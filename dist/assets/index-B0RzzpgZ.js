var wH=Object.defineProperty;var ok=e=>{throw TypeError(e)};var _H=(e,t,n)=>t in e?wH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Sh=(e,t,n)=>_H(e,typeof t!="symbol"?t+"":t,n),y0=(e,t,n)=>t.has(e)||ok("Cannot "+n);var U=(e,t,n)=>(y0(e,t,"read from private field"),n?n.call(e):t.get(e)),Xe=(e,t,n)=>t.has(e)?ok("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Oe=(e,t,n,r)=>(y0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),$t=(e,t,n)=>(y0(e,t,"access private method"),n);var zm=(e,t,n,r)=>({set _(i){Oe(e,t,i,n)},get _(){return U(e,t,r)}});import{j as o,A as DI,m as ce,u as LI,a as sf,b as jH}from"./framer-motion-V9WCrmtC.js";import{a as Oy,u as Md,e as SH,r as y,R as EH,L as Hn,c as R,b as NH,f as Mi,d as Um,g as cn,h as Dd,i as et,j as PH,N as wi,B as kH}from"./react-vendor-BEeWdMMG.js";import{_ as Fe,t as CH,a as Ry,c as BI,O as Pp,P as Hj,C as kp,b as $y,T as Cp,D as Ap,R as Vj,d as FI,u as vn,e as Iy,f as Zs,g as At,h as nc,i as lt,j as Pi,k as ci,l as AH,m as zI,n as TH,o as OH,p as UI,q as RH,I as $H,r as Zo,s as Ld,v as My,w as Gj,A as HI,x as VI,y as IH,z as MH,B as DH,F as LH,E as GI,G as WI,H as BH,J as qI,S as KI,K as YI,L as FH,M as XI,N as ZI,Q as JI,U as QI,V as eM,W as tM,X as nM,Y as zH,Z as UH,$ as HH,a0 as rM,a1 as VH,a2 as GH,a3 as WH,a4 as qH}from"./ui-vendor-CvG-xBlG.js";import{l as KH}from"./lottie-B4ZAOZ_T.js";import{B as Wj,e as Me,I as YH,i as jt,a as ot,b as Qi,c as ee,d as Qn,f as Tp,t as pl,g as ml,h as XH,V as Op,j as Y,s as Gs,k as Et,l as qj,m as gr,n as Wr,q as $n,o as wf,p as Aa,r as Dy,u as Jt,v as Kj,O as iM,w as aM,x as Ei,y as Wu,z as Js,C as me,A as Ly,D as rc,E as gn,F as He,G as tt,H as Nr,J as By,K as mt,L as vr,M as Ce,N as C,P as Yj,Q as Fy,R as zy,S as Ms,T as qr,U as Xj,W as is,X as kt,Y as x0,Z as sM,_ as os,$ as oM,a0 as ZH,a1 as Ne,a2 as Fw,a3 as As,a4 as ke,a5 as nn,a6 as Or,a7 as fe,a8 as JH,a9 as Rr,aa as Zj,ab as ck,ac as QH,ad as cM,ae as zw,af as Ws,ag as Uy,ah as Uw,ai as e9,aj as lM,ak as ju,al as Hy,am as Jj,an as $r,ao as qn,ap as er,aq as Gt,ar as wt,as as Vy,at as _f,au as qu,av as gl,aw as Ti,ax as Mt,ay as Rp,az as jf,aA as uM,aB as $p,aC as cu,aD as Mg,aE as Nc,aF as lk,aG as t9,aH as n9,aI as r9,aJ as i9,aK as a9,aL as dM,aM as Fo,aN as Hw,aO as hM,aP as s9,aQ as Qj,aR as o9,aS as eS,aT as c9,aU as l9,aV as u9,aW as d9,aX as Vw,aY as fM,aZ as h9,a_ as f9,a$ as uk,b0 as pM,b1 as p9,b2 as tS,b3 as m9,b4 as mM,b5 as gM,b6 as g9,b7 as v9,b8 as y9}from"./bpmn-vendor-B-7XOhPu.js";function x9(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var vM,dk=Oy;vM=dk.createRoot,dk.hydrateRoot;const b9={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},w9={type:"tween",ease:"anticipate",duration:.4},pa=({children:e})=>{const t=Md();return o.jsx(DI,{mode:"wait",children:o.jsx(ce.div,{initial:"initial",animate:"animate",exit:"exit",variants:b9,transition:w9,children:e},t.pathname)})},_9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class nS extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class j9 extends nS{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hk extends nS{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class fk extends nS{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Gw;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Gw||(Gw={}));class S9{constructor(t,{headers:n={},customFetch:r,region:i=Gw.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=_9(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Fe(this,arguments,void 0,function*(n,r={}){var i;let a,s;try{const{headers:c,method:l,body:u,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;u&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let v=d;h&&(s=new AbortController,a=setTimeout(()=>s.abort(),h),d?(v=s.signal,d.addEventListener("abort",()=>s.abort())):v=s.signal);const x=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),c),body:g,signal:v}).catch(j=>{throw new j9(j)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new hk(x);if(!x.ok)throw new fk(x);let w=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield x.json():w==="application/octet-stream"||w==="application/pdf"?_=yield x.blob():w==="text/event-stream"?_=x:w==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null,response:x}}catch(c){return{data:null,error:c,response:c instanceof fk||c instanceof hk?c.context:void 0}}finally{a&&clearTimeout(a)}})}}var Gr={};const Bd=SH(CH);var Hm={},Vm={},Gm={},Wm={},qm={},Km={},pk;function yM(){if(pk)return Km;pk=1,Object.defineProperty(Km,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Km.default=e,Km}var mk;function xM(){if(mk)return qm;mk=1,Object.defineProperty(qm,"__esModule",{value:!0});const t=Bd.__importDefault(yM());class n{constructor(i){var a,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let c=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,d,h,f;let p=null,m=null,g=null,v=l.status,x=l.statusText;if(l.ok){if(this.method!=="HEAD"){const j=await l.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?m=j:m=JSON.parse(j))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&_&&_.length>1&&(g=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(p={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,v=406,x="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const w=await l.text();try{p=JSON.parse(w),Array.isArray(p)&&l.status===404&&(m=[],p=null,v=200,x="OK")}catch{l.status===404&&w===""?(v=204,x="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,v=200,x="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:m,count:g,status:v,statusText:x}});return this.shouldThrowOnError||(c=c.catch(l=>{var u,d,h;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(d=l==null?void 0:l.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=l==null?void 0:l.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,a)}returns(){return this}overrideTypes(){return this}}return qm.default=n,qm}var gk;function bM(){if(gk)return Wm;gk=1,Object.defineProperty(Wm,"__esModule",{value:!0});const t=Bd.__importDefault(xM());class n extends t.default{select(i){let a=!1;const s=(i??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:c,referencedTable:l=c}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:c=s}={}){const l=typeof c>"u"?"offset":`${c}.offset`,u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:c=!1,wal:l=!1,format:u="text"}={}){var d;const h=[i?"analyze":null,a?"verbose":null,s?"settings":null,c?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Wm.default=n,Wm}var vk;function rS(){if(vk)return Gm;vk=1,Object.defineProperty(Gm,"__esModule",{value:!0});const t=Bd.__importDefault(bM()),n=new RegExp("[,()]");class r extends t.default{eq(a,s){return this.url.searchParams.append(a,`eq.${s}`),this}neq(a,s){return this.url.searchParams.append(a,`neq.${s}`),this}gt(a,s){return this.url.searchParams.append(a,`gt.${s}`),this}gte(a,s){return this.url.searchParams.append(a,`gte.${s}`),this}lt(a,s){return this.url.searchParams.append(a,`lt.${s}`),this}lte(a,s){return this.url.searchParams.append(a,`lte.${s}`),this}like(a,s){return this.url.searchParams.append(a,`like.${s}`),this}likeAllOf(a,s){return this.url.searchParams.append(a,`like(all).{${s.join(",")}}`),this}likeAnyOf(a,s){return this.url.searchParams.append(a,`like(any).{${s.join(",")}}`),this}ilike(a,s){return this.url.searchParams.append(a,`ilike.${s}`),this}ilikeAllOf(a,s){return this.url.searchParams.append(a,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(a,s){return this.url.searchParams.append(a,`ilike(any).{${s.join(",")}}`),this}is(a,s){return this.url.searchParams.append(a,`is.${s}`),this}in(a,s){const c=Array.from(new Set(s)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cs.{${s.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(s)}`),this}containedBy(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cd.{${s.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(s)}`),this}rangeGt(a,s){return this.url.searchParams.append(a,`sr.${s}`),this}rangeGte(a,s){return this.url.searchParams.append(a,`nxl.${s}`),this}rangeLt(a,s){return this.url.searchParams.append(a,`sl.${s}`),this}rangeLte(a,s){return this.url.searchParams.append(a,`nxr.${s}`),this}rangeAdjacent(a,s){return this.url.searchParams.append(a,`adj.${s}`),this}overlaps(a,s){return typeof s=="string"?this.url.searchParams.append(a,`ov.${s}`):this.url.searchParams.append(a,`ov.{${s.join(",")}}`),this}textSearch(a,s,{config:c,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const d=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${u}fts${d}.${s}`),this}match(a){return Object.entries(a).forEach(([s,c])=>{this.url.searchParams.append(s,`eq.${c}`)}),this}not(a,s,c){return this.url.searchParams.append(a,`not.${s}.${c}`),this}or(a,{foreignTable:s,referencedTable:c=s}={}){const l=c?`${c}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,s,c){return this.url.searchParams.append(a,`${s}.${c}`),this}}return Gm.default=r,Gm}var yk;function wM(){if(yk)return Vm;yk=1,Object.defineProperty(Vm,"__esModule",{value:!0});const t=Bd.__importDefault(rS());class n{constructor(i,{headers:a={},schema:s,fetch:c}){this.url=i,this.headers=new Headers(a),this.schema=s,this.fetch=c}select(i,a){const{head:s=!1,count:c}=a??{},l=s?"HEAD":"GET";let u=!1;const d=(i??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:s=!0}={}){var c;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:c,defaultToNull:l=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),c&&this.headers.append("Prefer",`count=${c}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var s;const c="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var a;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Vm.default=n,Vm}var xk;function E9(){if(xk)return Hm;xk=1,Object.defineProperty(Hm,"__esModule",{value:!0});const e=Bd,t=e.__importDefault(wM()),n=e.__importDefault(rS());class r{constructor(a,{headers:s={},schema:c,fetch:l}={}){this.url=a,this.headers=new Headers(s),this.schemaName=c,this.fetch=l}from(a){const s=new URL(`${this.url}/${a}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:c=!1,get:l=!1,count:u}={}){var d;let h;const f=new URL(`${this.url}/rpc/${a}`);let p;c||l?(h=c?"HEAD":"GET",Object.entries(s).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{f.searchParams.append(g,v)})):(h="POST",p=s);const m=new Headers(this.headers);return u&&m.set("Prefer",`count=${u}`),new n.default({method:h,url:f,headers:m,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Hm.default=r,Hm}Object.defineProperty(Gr,"__esModule",{value:!0});var _M=Gr.PostgrestError=OM=Gr.PostgrestBuilder=AM=Gr.PostgrestTransformBuilder=kM=Gr.PostgrestFilterBuilder=NM=Gr.PostgrestQueryBuilder=SM=Gr.PostgrestClient=void 0;const Fd=Bd,jM=Fd.__importDefault(E9());var SM=Gr.PostgrestClient=jM.default;const EM=Fd.__importDefault(wM());var NM=Gr.PostgrestQueryBuilder=EM.default;const PM=Fd.__importDefault(rS());var kM=Gr.PostgrestFilterBuilder=PM.default;const CM=Fd.__importDefault(bM());var AM=Gr.PostgrestTransformBuilder=CM.default;const TM=Fd.__importDefault(xM());var OM=Gr.PostgrestBuilder=TM.default;const RM=Fd.__importDefault(yM());_M=Gr.PostgrestError=RM.default;var $M=Gr.default={PostgrestClient:jM.default,PostgrestQueryBuilder:EM.default,PostgrestFilterBuilder:PM.default,PostgrestTransformBuilder:CM.default,PostgrestBuilder:TM.default,PostgrestError:RM.default};const N9=x9({__proto__:null,get PostgrestBuilder(){return OM},get PostgrestClient(){return SM},get PostgrestError(){return _M},get PostgrestFilterBuilder(){return kM},get PostgrestQueryBuilder(){return NM},get PostgrestTransformBuilder(){return AM},default:$M},[Gr]),{PostgrestClient:P9,PostgrestQueryBuilder:jIe,PostgrestFilterBuilder:SIe,PostgrestTransformBuilder:EIe,PostgrestBuilder:NIe,PostgrestError:PIe}=$M||N9;class k9{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const C9="2.81.1",A9=`realtime-js/${C9}`,IM="1.0.0",T9="2.0.0",bk=IM,Ww=1e4,O9=1e3,R9=100;var Hc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Hc||(Hc={}));var ar;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ar||(ar={}));var Vi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vi||(Vi={}));var qw;(function(e){e.websocket="websocket"})(qw||(qw={}));var Vc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vc||(Vc={}));class $9{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,n){if(this._isArrayBuffer(t.payload))return n(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodePush(t){const{join_ref:n,ref:r,event:i,topic:a,payload:s}=t,c=this.META_LENGTH+n.length+r.length+a.length+i.length,l=new ArrayBuffer(this.HEADER_LENGTH+c);let u=new DataView(l),d=0;u.setUint8(d++,this.KINDS.push),u.setUint8(d++,n.length),u.setUint8(d++,r.length),u.setUint8(d++,a.length),u.setUint8(d++,i.length),Array.from(n,f=>u.setUint8(d++,f.charCodeAt(0))),Array.from(r,f=>u.setUint8(d++,f.charCodeAt(0))),Array.from(a,f=>u.setUint8(d++,f.charCodeAt(0))),Array.from(i,f=>u.setUint8(d++,f.charCodeAt(0)));var h=new Uint8Array(l.byteLength+s.byteLength);return h.set(new Uint8Array(l),0),h.set(new Uint8Array(s),l.byteLength),h.buffer}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const{join_ref:i,ref:a,topic:s}=t,c=t.payload.event,l=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),u=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+a.length+s.length+c.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let h=new DataView(d),f=0;h.setUint8(f++,this.KINDS.userBroadcastPush),h.setUint8(f++,i.length),h.setUint8(f++,a.length),h.setUint8(f++,s.length),h.setUint8(f++,c.length),h.setUint8(f++,this.BINARY_ENCODING),Array.from(i,m=>h.setUint8(f++,m.charCodeAt(0))),Array.from(a,m=>h.setUint8(f++,m.charCodeAt(0))),Array.from(s,m=>h.setUint8(f++,m.charCodeAt(0))),Array.from(c,m=>h.setUint8(f++,m.charCodeAt(0)));var p=new Uint8Array(d.byteLength+l.byteLength);return p.set(new Uint8Array(d),0),p.set(new Uint8Array(l),d.byteLength),p.buffer}_encodeJsonUserBroadcastPush(t){var n,r;const{join_ref:i,ref:a,topic:s}=t,c=t.payload.event,l=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},d=new TextEncoder().encode(JSON.stringify(l)).buffer,h=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+a.length+s.length+c.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let p=new DataView(f),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,i.length),p.setUint8(m++,a.length),p.setUint8(m++,s.length),p.setUint8(m++,c.length),p.setUint8(m++,this.JSON_ENCODING),Array.from(i,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(a,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(s,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(c,v=>p.setUint8(m++,v.charCodeAt(0)));var g=new Uint8Array(f.byteLength+d.byteLength);return g.set(new Uint8Array(f),0),g.set(new Uint8Array(d),f.byteLength),g.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,a,s,c,l]=r;return n({join_ref:i,ref:a,topic:s,event:c,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(t,n,i);case this.KINDS.reply:return this._decodeReply(t,n,i);case this.KINDS.broadcast:return this._decodeBroadcast(t,n,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodePush(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3);let c=this.HEADER_LENGTH+this.META_LENGTH-1;const l=r.decode(t.slice(c,c+i));c=c+i;const u=r.decode(t.slice(c,c+a));c=c+a;const d=r.decode(t.slice(c,c+s));c=c+s;const h=JSON.parse(r.decode(t.slice(c,t.byteLength)));return{join_ref:l,ref:null,topic:u,event:d,payload:h}}_decodeReply(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3),c=n.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const u=r.decode(t.slice(l,l+i));l=l+i;const d=r.decode(t.slice(l,l+a));l=l+a;const h=r.decode(t.slice(l,l+s));l=l+s;const f=r.decode(t.slice(l,l+c));l=l+c;const p=JSON.parse(r.decode(t.slice(l,t.byteLength))),m={status:f,response:p};return{join_ref:u,ref:d,topic:h,event:Vi.reply,payload:m}}_decodeBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2);let s=this.HEADER_LENGTH+2;const c=r.decode(t.slice(s,s+i));s=s+i;const l=r.decode(t.slice(s,s+a));s=s+a;const u=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{join_ref:null,ref:null,topic:c,event:l,payload:u}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3),c=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(t.slice(l,l+i));l=l+i;const d=r.decode(t.slice(l,l+a));l=l+a;const h=r.decode(t.slice(l,l+s));l=l+s;const f=t.slice(l,t.byteLength),p=c===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST,event:d,payload:p};return s>0&&(m.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:m}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class MM{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(dn||(dn={}));const wk=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=I9(s,e,t,i),a),{}):{}},I9=(e,t,n,r)=>{const i=t.find(c=>c.name===e),a=i==null?void 0:i.type,s=n[e];return a&&!r.includes(a)?DM(a,s):Kw(s)},DM=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return B9(t,n)}switch(e){case dn.bool:return M9(t);case dn.float4:case dn.float8:case dn.int2:case dn.int4:case dn.int8:case dn.numeric:case dn.oid:return D9(t);case dn.json:case dn.jsonb:return L9(t);case dn.timestamp:return F9(t);case dn.abstime:case dn.date:case dn.daterange:case dn.int4range:case dn.int8range:case dn.money:case dn.reltime:case dn.text:case dn.time:case dn.timestamptz:case dn.timetz:case dn.tsrange:case dn.tstzrange:return Kw(t);default:return Kw(t)}},Kw=e=>e,M9=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},D9=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},L9=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},B9=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const s=e.slice(1,n);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(c=>DM(t,c))}return e},F9=e=>typeof e=="string"?e.replace(" ","T"):e,LM=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class b0{constructor(t,n,r={},i=Ww){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var _k;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(_k||(_k={}));class of{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=of.syncState(this.state,i,a,s),this.pendingDiffs.forEach(l=>{this.state=of.syncDiff(this.state,l,a,s)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=of.syncDiff(this.state,i,a,s),c())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),s=this.transformState(n),c={},l={};return this.map(a,(u,d)=>{s[u]||(l[u]=d)}),this.map(s,(u,d)=>{const h=a[u];if(h){const f=d.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),m=d.filter(v=>p.indexOf(v.presence_ref)<0),g=h.filter(v=>f.indexOf(v.presence_ref)<0);m.length>0&&(c[u]=m),g.length>0&&(l[u]=g)}else c[u]=d}),this.syncDiff(a,{joins:c,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(c,l)=>{var u;const d=(u=t[c])!==null&&u!==void 0?u:[];if(t[c]=this.cloneDeep(l),d.length>0){const h=t[c].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[c].unshift(...f)}r(c,d,l)}),this.map(s,(c,l)=>{let u=t[c];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[c]=u,i(c,u,l),u.length===0&&delete t[c]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jk;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(jk||(jk={}));var cf;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(cf||(cf={}));var Es;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Es||(Es={}));class iS{constructor(t,n={config:{}},r){var i,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ar.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new b0(this,Vi.join,this.params,this.timeout),this.rejoinTimer=new MM(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ar.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ar.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ar.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ar.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ar.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vi.reply,{},(s,c)=>{this._trigger(this._replyEventName(c),s)}),this.presence=new of(this),this.broadcastEndpointURL=LM(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ar.closed){const{config:{broadcast:s,presence:c,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[cf.PRESENCE]&&this.bindings[cf.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},f={broadcast:s,presence:Object.assign(Object.assign({},c),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Es.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Es.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){t==null||t(Es.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,x=[];for(let b=0;b<v;b++){const w=g[b],{filter:{event:_,schema:j,table:S,filter:N}}=w,P=p&&p[b];if(P&&P.event===_&&P.schema===j&&P.table===S&&P.filter===N)x.push(Object.assign(Object.assign({},w),{id:P.id}));else{this.unsubscribe(),this.state=ar.errored,t==null||t(Es.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Es.SUBSCRIBED);return}}).receive("error",p=>{this.state=ar.errored,t==null||t(Es.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Es.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ar.joined&&t===cf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let l=c.statusText;try{const u=await c.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,c,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(c=(s=this.params)===null||s===void 0?void 0:s.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ar.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new b0(this,Vi.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ar.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),s}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new b0(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>R9){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const s=t.toLocaleLowerCase(),{close:c,error:l,leave:u,join:d}=Vi;if(r&&[c,l,u,d].indexOf(s)>=0&&r!==this._joinRef())return;let f=this._onMessage(s,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,v;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===s}).map(p=>p.callback(f,r)):(a=this.bindings[s])===null||a===void 0||a.filter(p=>{var m,g,v,x,b,w;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const _=p.id,j=(m=p.filter)===null||m===void 0?void 0:m.event;return _&&((g=n.ids)===null||g===void 0?void 0:g.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(b=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:v,commit_timestamp:x,type:b,errors:w}=m;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:x,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===ar.closed}_isJoined(){return this.state===ar.joined}_isJoining(){return this.state===ar.joining}_isLeaving(){return this.state===ar.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&iS.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vi.close,{},t)}_onError(t){this._on(Vi.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ar.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=wk(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=wk(t.columns,t.old_record)),n}}const w0=()=>{},Ym={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},z9=[1e3,2e3,5e3,1e4],U9=1e4,H9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class V9{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ww,this.transport=null,this.heartbeatIntervalMs=Ym.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=w0,this.ref=0,this.reconnectTimer=null,this.vsn=bk,this.logger=w0,this.conn=null,this.sendBuffer=[],this.serializer=new $9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${qw.websocket}`,this.httpEndpoint=LM(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=k9.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Hc.connecting:return Vc.Connecting;case Hc.open:return Vc.Open;case Hc.closing:return Vc.Closing;default:return Vc.Closed}}isConnected(){return this.connectionState()===Vc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new iS(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,s=()=>{this.encode(t,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(O9,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ym.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:s}=n,c=s?`(${s})`:"",l=a.status||"";this.log("receive",`${l} ${r} ${i} ${c}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,a,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Hc.open||this.conn.readyState===Hc.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vi.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([H9],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:A9};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Vi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new MM(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ym.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,s,c,l,u,d,h,f,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Ww,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Ym.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(c=t==null?void 0:t.heartbeatCallback)!==null&&c!==void 0?c:w0,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:bk,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:m=>z9[m-1]||U9,this.vsn){case IM:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(m,g)=>g(JSON.stringify(m)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(m,g)=>g(JSON.parse(m));break;case T9:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class aS extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function kn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class G9 extends aS{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Yw extends aS{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const sS=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),W9=()=>Response,Xw=e=>{if(Array.isArray(e))return e.map(n=>Xw(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Xw(r)}),t},q9=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_0=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},K9=(e,t,n)=>Fe(void 0,void 0,void 0,function*(){const r=yield W9();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const a=e.status||500,s=(i==null?void 0:i.statusCode)||a+"";t(new G9(_0(i),a,s))}).catch(i=>{t(new Yw(_0(i),i))}):t(new Yw(_0(e),e))}),Y9=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(q9(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Ip(e,t,n,r,i,a){return Fe(this,void 0,void 0,function*(){return new Promise((s,c)=>{e(n,Y9(t,r,i,a)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>K9(l,c,r))})})}function Sf(e,t,n,r){return Fe(this,void 0,void 0,function*(){return Ip(e,"GET",t,n,r)})}function wa(e,t,n,r,i){return Fe(this,void 0,void 0,function*(){return Ip(e,"POST",t,r,i,n)})}function Zw(e,t,n,r,i){return Fe(this,void 0,void 0,function*(){return Ip(e,"PUT",t,r,i,n)})}function X9(e,t,n,r){return Fe(this,void 0,void 0,function*(){return Ip(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function oS(e,t,n,r,i){return Fe(this,void 0,void 0,function*(){return Ip(e,"DELETE",t,r,i,n)})}class Z9{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}}var BM;class J9{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[BM]="BlobDownloadBuilder",this.promise=null}asStream(){return new Z9(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}}BM=Symbol.toStringTag;const Q9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eV{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=sS(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Fe(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Sk),i);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),l&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(l))):(a=r,c["cache-control"]=`max-age=${s.cacheControl}`,c["content-type"]=s.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?Zw:wa)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:c},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(kn(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Fe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),s=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${s}`);c.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Sk.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Zw(this.fetch,c.toString(),l,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(kn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Fe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield wa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+a.url),c=s.searchParams.get("token");if(!c)throw new aS("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}update(t,n,r){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Fe(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield wa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Fe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield wa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Fe(this,void 0,void 0,function*(){try{const i=yield wa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kn(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=a?`?${a}`:"",c=this._getFinalPath(t),l=()=>Sf(this.fetch,`${this.url}/${i}/${c}${s}`,{headers:this.headers,noResolveJson:!0});return new J9(l,this.shouldThrowOnError)}info(t){return Fe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Sf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Xw(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}exists(t){return Fe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield X9(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r)&&r instanceof Yw){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${u}`)}}}remove(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield oS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}})}list(t,n,r){return Fe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Q9),n),{prefix:t||""});return{data:yield wa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kn(i))return{data:null,error:i};throw i}})}listV2(t,n){return Fe(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield wa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const FM="2.81.1",zM={"X-Client-Info":`storage-js/${FM}`};class tV{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zM),n),this.fetch=sS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Sf(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}})}createBucket(t){return Fe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield wa(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield Zw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield oS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class nV{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zM),n),this.fetch=sS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}})}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Sf(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield oS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}})}}const cS={"X-Client-Info":`storage-js/${FM}`,"Content-Type":"application/json"};class UM extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ki(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class j0 extends UM{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rV extends UM{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Ek;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ek||(Ek={}));const lS=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iV=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Nk=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),aV=(e,t,n)=>Fe(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(s=>{const c=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||i+"";t(new j0(Nk(s),i,c))}).catch(()=>{const s=i+"",c=a.statusText||`HTTP ${i} error`;t(new j0(c,i,s))});else{const s=i+"",c=a.statusText||`HTTP ${i} error`;t(new j0(c,i,s))}}else t(new rV(Nk(e),e))}),sV=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(iV(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function oV(e,t,n,r,i,a){return Fe(this,void 0,void 0,function*(){return new Promise((s,c)=>{e(n,sV(t,r,i,a)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>s(l)).catch(l=>aV(l,c,r))})})}function Ci(e,t,n,r,i){return Fe(this,void 0,void 0,function*(){return oV(e,"POST",t,r,i,n)})}class cV{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cS),n),this.fetch=lS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Ci(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ki(r))return{data:null,error:r};throw r}})}listIndexes(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Ci(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ki(r))return{data:null,error:r};throw r}})}}class lV{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cS),n),this.fetch=lS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ci(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}getVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}listVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ci(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}queryVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ci(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}}class uV{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cS),n),this.fetch=lS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Ci(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}listBuckets(){return Fe(this,arguments,void 0,function*(t={}){try{return{data:yield Ci(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Ci(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}}class dV extends uV{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new hV(this.url,this.headers,t,this.fetch)}}class hV extends cV{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Fe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Fe(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Fe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Fe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new fV(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class fV extends lV{constructor(t,n,r,i,a){super(t,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Fe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Fe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Fe(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Fe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Fe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class pV extends tV{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new eV(this.url,this.headers,t,this.fetch)}get vectors(){return new dV(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new nV(this.url+"/iceberg",this.headers,this.fetch)}}const mV="2.81.1";let Xh="";typeof Deno<"u"?Xh="deno":typeof document<"u"?Xh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xh="react-native":Xh="node";const gV={"X-Client-Info":`supabase-js-${Xh}/${mV}`},vV={headers:gV},yV={schema:"public"},xV={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bV={},wV=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_V=()=>Headers,jV=(e,t,n)=>{const r=wV(n),i=_V();return async(a,s)=>{var c;const l=(c=await t())!==null&&c!==void 0?c:e;let u=new i(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},s),{headers:u}))}};function SV(e){return e.endsWith("/")?e:e+"/"}function EV(e,t){var n,r;const{db:i,auth:a,realtime:s,global:c}=e,{db:l,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},h),c),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function NV(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(SV(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const HM="2.81.1",lu=30*1e3,Jw=3,S0=Jw*lu,PV="http://localhost:9999",kV="supabase.auth.token",CV={"X-Client-Info":`gotrue-js/${HM}`},Qw="X-Supabase-Api-Version",VM={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,TV=10*60*1e3;class Ef extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class OV extends Ef{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function RV(e){return Ue(e)&&e.name==="AuthApiError"}class Gc extends Ef{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ic extends Ef{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class va extends ic{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $V(e){return Ue(e)&&e.name==="AuthSessionMissingError"}class Wl extends ic{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xm extends ic{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zm extends ic{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function IV(e){return Ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class Pk extends ic{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class e_ extends ic{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function E0(e){return Ue(e)&&e.name==="AuthRetryableFetchError"}class kk extends ic{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class t_ extends ic{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ck=` 	
\r=`.split(""),MV=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ck.length;t+=1)e[Ck[t].charCodeAt(0)]=-2;for(let t=0;t<Xg.length;t+=1)e[Xg[t].charCodeAt(0)]=t;return e})();function Ak(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Xg[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Xg[r]),t.queuedBits-=6}}function GM(e,t,n){const r=MV[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Tk(e){const t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{BV(s,r,n)};for(let s=0;s<e.length;s+=1)GM(e.charCodeAt(s),i,a);return t.join("")}function DV(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function LV(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}DV(r,t)}}function BV(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Su(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)GM(e.charCodeAt(i),n,r);return new Uint8Array(t)}function FV(e){const t=[];return LV(e,n=>t.push(n)),new Uint8Array(t)}function Kc(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Ak(i,n,r)),Ak(null,n,r),t.join("")}function zV(e){return Math.round(Date.now()/1e3)+e}function UV(){return Symbol("auth-callback")}const _r=()=>typeof window<"u"&&typeof document<"u",Pc={tested:!1,writable:!1},WM=()=>{if(!_r())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pc.tested)return Pc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Pc.tested=!0,Pc.writable=!0}catch{Pc.tested=!0,Pc.writable=!1}return Pc.writable};function HV(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const qM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),VV=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",uu=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},kc=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},vo=async(e,t)=>{await e.removeItem(t)};class Gy{constructor(){this.promise=new Gy.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Gy.promiseConstructor=Promise;function N0(e){const t=e.split(".");if(t.length!==3)throw new t_("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!AV.test(t[r]))throw new t_("JWT not in base64url format");return{header:JSON.parse(Tk(t[0])),payload:JSON.parse(Tk(t[1])),signature:Su(t[2]),raw:{header:t[0],payload:t[1]}}}async function GV(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function WV(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){r(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function qV(e){return("0"+e.toString(16)).substr(-2)}function KV(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,qV).join("")}async function YV(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function XV(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await YV(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ql(e,t,n=!1){const r=KV();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await uu(e,`${t}-code-verifier`,i);const a=await XV(r);return[a,r===a?"plain":"s256"]}const ZV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JV(e){const t=e.headers.get(Qw);if(!t||!t.match(ZV))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function QV(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function eG(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tG=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kl(e){if(!tG.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function P0(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nG(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function Ok(e){return JSON.parse(JSON.stringify(e))}const Mc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rG=[502,503,504];async function Rk(e){var t;if(!VV(e))throw new e_(Mc(e),0);if(rG.includes(e.status))throw new e_(Mc(e),e.status);let n;try{n=await e.json()}catch(a){throw new Gc(Mc(a),a)}let r;const i=JV(e);if(i&&i.getTime()>=VM["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new kk(Mc(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new va}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new kk(Mc(n),e.status,n.weak_password.reasons);throw new OV(Mc(n),e.status||500,r)}const iG=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function at(e,t,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[Qw]||(a[Qw]=VM["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const c=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await aG(e,t,n+c,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function aG(e,t,n,r,i,a){const s=iG(t,r,i,a);let c;try{c=await e(n,Object.assign({},s))}catch(l){throw console.error(l),new e_(Mc(l),0)}if(c.ok||await Rk(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await Rk(l)}}function ya(e){var t;let n=null;cG(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=zV(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function $k(e){const t=ya(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ao(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function sG(e){return{data:e,error:null}}function oG(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,s=Ry(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},s);return{data:{properties:c,user:l},error:null}}function Ik(e){return e}function cG(e){return e.access_token&&e.refresh_token&&e.expires_in}const k0=["global","local","others"];class lG{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=qM(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=k0[0]){if(k0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${k0.join(", ")}`);try{return await at(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await at(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ao})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Ry(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await at(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:oG,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await at(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ao})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,s,c,l;try{const u={nextPage:null,lastPage:0,total:0},d=await at(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Ik});if(d.error)throw d.error;const h=await d.json(),f=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ue(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Kl(t);try{return await at(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ao})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Kl(t);try{return await at(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ao})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Kl(t);try{return await at(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ao})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Kl(t.userId);try{const{data:n,error:r}=await at(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Kl(t.userId),Kl(t.id);try{return{data:await at(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,a,s,c,l;try{const u={nextPage:null,lastPage:0,total:0},d=await at(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Ik});if(d.error)throw d.error;const h=await d.json(),f=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ue(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await at(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await at(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await at(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}}function Mk(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Yl={debug:!!(globalThis&&WM()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class KM extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class uG extends KM{}async function dG(e,t,n){Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new uG(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Yl.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function hG(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function YM(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function fG(e){return parseInt(e,16)}function pG(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function mG(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:c,requestId:l,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=YM(e.address),m=d?`${d}://${r}`:r,g=e.statement?`${e.statement}
`:"",v=`${m} wants you to sign in with your Ethereum account:
${p}

${g}`;let x=`URI: ${h}
Version: ${f}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),c&&(x+=`
Not Before: ${c.toISOString()}`),l&&(x+=`
Request ID: ${l}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}x+=b}return`${v}
${x}`}class Yn extends Error{constructor({message:t,code:n,cause:r,name:i}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Zg extends Yn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function gG({error:e,options:t}){var n,r,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Yn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Yn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Yn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Yn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Yn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Yn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Yn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Yn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(XM(s)){if(a.rp.id!==s)return new Yn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Yn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Yn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function vG({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Yn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Yn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(XM(r)){if(n.rpId!==r)return new Yn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Yn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class yG{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const xG=new yG;function bG(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=Ry(e,["challenge","user","excludeCredentials"]),a=Su(t).buffer,s=Object.assign(Object.assign({},n),{id:Su(n.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:a,user:s});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];c.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Su(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return c}function wG(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Ry(e,["challenge","allowCredentials"]),i=Su(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const c=n[s];a.allowCredentials[s]=Object.assign(Object.assign({},c),{id:Su(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function _G(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Kc(new Uint8Array(e.response.attestationObject)),clientDataJSON:Kc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jG(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Kc(new Uint8Array(i.authenticatorData)),clientDataJSON:Kc(new Uint8Array(i.clientDataJSON)),signature:Kc(new Uint8Array(i.signature)),userHandle:i.userHandle?Kc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function XM(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Dk(){var e,t;return!!(_r()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function SG(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zg("Browser returned unexpected credential type",t)}:{data:null,error:new Zg("Empty credential response",t)}}catch(t){return{data:null,error:gG({error:t,options:e})}}}async function EG(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zg("Browser returned unexpected credential type",t)}:{data:null,error:new Zg("Empty credential response",t)}}catch(t){return{data:null,error:vG({error:t,options:e})}}}const NG={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},PG={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Jg(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))r[a]=s;else if(n(s))r[a]=s;else if(t(s)){const c=r[a];t(c)?r[a]=Jg(c,s):r[a]=Jg(s)}else r[a]=s}return r}function kG(e,t){return Jg(NG,e,t||{})}function CG(e,t){return Jg(PG,e,t||{})}class AG{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},a){try{const{data:s,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:c};const l=i??xG.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=kG(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:h}=await SG({publicKey:u,signal:l});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=CG(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:h}=await EG(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(s){return Ue(s)?{data:null,error:s}:{data:null,error:new Gc("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new Ef("rpId is required for WebAuthn authentication")};try{if(!Dk())return{data:null,error:new Gc("Browser does not support WebAuthn",null)};const{data:s,error:c}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!s)return{data:null,error:c};const{webauthn:l}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(s){return Ue(s)?{data:null,error:s}:{data:null,error:new Gc("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new Ef("rpId is required for WebAuthn registration")};try{if(!Dk())return{data:null,error:new Gc("Browser does not support WebAuthn",null)};const{data:s,error:c}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:c};const{data:l,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return l?this._verify({factorId:s.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(s){return Ue(s)?{data:null,error:s}:{data:null,error:new Gc("Unexpected error in register",s)}}}}hG();const TG={url:PV,storageKey:kV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:CV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Lk(e,t,n){return await n()}const Xl={};class Nf{get jwks(){var t,n;return(n=(t=Xl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Xl[this.storageKey]=Object.assign(Object.assign({},Xl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Xl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xl[this.storageKey]=Object.assign(Object.assign({},Xl[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},TG),t);if(this.storageKey=a.storageKey,this.instanceID=(n=Nf.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Nf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&_r()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new lG({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=qM(a.fetch),this.lock=a.lock||Lk,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:_r()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=dG:this.lock=Lk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new AG(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:WM()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mk(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Mk(this.memoryStorage)),_r()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${HM}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(_r()&&(n=HV(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),_r()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),IV(a)){const l=(t=a.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",c),await this._saveSession(s),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ue(n)?this._returnResult({error:n}):this._returnResult({error:new Gc("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ya}),{data:s,error:c}=a;if(c||!s)return this._returnResult({data:{user:null,session:null},error:c});const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(Ue(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await ql(this.storage,this.storageKey)),a=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:ya})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ya})}else throw new Xm("You must provide either an email or phone number and a password");const{data:s,error:c}=a;if(c||!s)return this._returnResult({data:{user:null,session:null},error:c});const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(Ue(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:s,options:c}=t;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:$k})}else if("phone"in t){const{phone:a,password:s,options:c}=t;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:$k})}else throw new Xm("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new Wl;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,a,s,c,l,u,d,h,f;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:g,wallet:v,statement:x,options:b}=t;let w;if(_r())if(typeof v=="object")w=v;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")w=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const _=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=YM(j[0]);let N=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!N){const k=await w.request({method:"eth_chainId"});N=fG(k)}const P={domain:_.host,address:S,statement:x,uri:_.href,version:"1",chainId:N,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=mG(P),m=await w.request({method:"personal_sign",params:[pG(p),S]})}try{const{data:g,error:v}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ya});if(v)throw v;if(!g||!g.session||!g.user){const x=new Wl;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(Ue(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,i,a,s,c,l,u,d,h,f,p;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:v,wallet:x,statement:b,options:w}=t;let _;if(_r())if(typeof x=="object")_=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const j=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)m=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(m),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:v,error:x}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Kc(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ya});if(x)throw x;if(!v||!v.session||!v.user){const b=new Wl;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(Ue(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const n=await kc(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:s}=await at(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ya});if(await vo(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const c=new Wl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(Ue(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:s}=t,c=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ya}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new Wl;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(Ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,a,s;try{if("email"in t){const{email:c,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ql(this.storage,this.storageKey));const{error:h}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:c,options:l}=t,{data:u,error:d}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Xm("You must provide either an email or phone number.")}catch(c){if(Ue(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:c}=await at(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ya});if(c)throw c;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,u=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(Ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,a,s;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=await ql(this.storage,this.storageKey));const u=await at(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:sG});return!((a=u.data)===null||a===void 0)&&a.url&&_r()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(Ue(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new va;const{error:i}=await at(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Ue(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:s}=await at(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:s,error:c}=await at(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:c})}throw new Xm("You must provide either an email or phone number and a type")}catch(n){if(Ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await kc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<S0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const s=await kc(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=P0()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=nG(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ao}):await this._useSession(async n=>{var r,i,a;const{data:s,error:c}=n;if(c)throw c;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new va}:await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Ao})})}catch(n){if(Ue(n))return $V(n)&&(await this._removeSession(),await vo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new va;const s=i.session;let c=null,l=null;this.flowType==="pkce"&&t.email!=null&&([c,l]=await ql(this.storage,this.storageKey));const{data:u,error:d}=await at(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:l}),jwt:s.access_token,xform:Ao});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(Ue(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new va;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:s}=N0(t.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{data:c,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:l}=await this._getUser(t.access_token);if(l)throw l;a={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Ue(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:s,error:c}=n;if(c)throw c;t=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new va;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!_r())throw new Zm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Pk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zm("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Pk("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:c,expires_at:l,token_type:u}=t;if(!a||!c||!s||!u)throw new Zm("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(c);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=lu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:v}=await this._getUser(a);if(v)throw v;const x={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:f,refresh_token:s,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(r){if(Ue(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await kc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:c}=await this.admin.signOut(s,t);if(c&&!(RV(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return t!=="others"&&(await this._removeSession(),await vo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=UV(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ql(this.storage,this.storageKey,!0));try{return await at(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Ue(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var s,c,l,u,d;const{data:h,error:f}=a;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await at(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return _r()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ue(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:s,provider:c,token:l,access_token:u,nonce:d}=t,h=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ya}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Wl}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if(Ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)throw s;return await at(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await WV(async i=>(i>0&&await GV(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await at(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ya})),(i,a)=>{const s=200*Math.pow(2,i);return a&&E0(a)&&Date.now()+s-r<lu})}catch(r){if(this._debug(n,"error",r),Ue(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),_r()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await kc(this.storage,this.storageKey);if(i&&this.userStorage){let s=await kc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await uu(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:P0()}else if(i&&!i.user&&!i.user){const s=await kc(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await vo(this.storage,this.storageKey+"-user"),await uu(this.storage,this.storageKey,i)):i.user=P0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<S0;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${S0}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),E0(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:c}=await this._getUser(i.access_token);!c&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new va;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Gy;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new va;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),Ue(a)){const s={data:null,error:a};return E0(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,n)}catch(l){a.push(l)}});if(await Promise.all(s),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await uu(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=Ok(i);await uu(this.storage,this.storageKey,a)}else{const i=Ok(n);await uu(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await vo(this.storage,this.storageKey),await vo(this.storage,this.storageKey+"-code-verifier"),await vo(this.storage,this.storageKey+"-user"),this.userStorage&&await vo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_r()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),lu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/lu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${lu}ms, refresh threshold is ${Jw} ticks`),i<=Jw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof KM)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_r()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await ql(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(c.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await at(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)return this._returnResult({data:null,error:s});const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await at(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?_G(t.webauthn.credential_response):jG(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:l}=await at(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=await at(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:c}=s;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:bG(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:wG(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=N0(r.access_token);let s=null;a.aal&&(s=a.aal);let c=s;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:c,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await at(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new va})})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new va});const s=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return s.data&&s.data.redirect_url&&_r()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new va});const s=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return s.data&&s.data.redirect_url&&_r()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(c=>c.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===t),r&&this.jwks_cached_at+TV>i)return r;const{data:a,error:s}=await at(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(c=>c.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:i,payload:a,signature:s,raw:{header:c,payload:l}}=N0(r);n!=null&&n.allowExpired||QV(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:a,header:i,signature:s},error:null}}const d=eG(i.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,s,FV(`${c}.${l}`)))throw new t_("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}}Nf.nextInstanceID={};const OG=Nf;class RG extends OG{constructor(t){super(t)}}class $G{constructor(t,n,r){var i,a,s;this.supabaseUrl=t,this.supabaseKey=n;const c=NV(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:yV,realtime:bV,auth:Object.assign(Object.assign({},xV),{storageKey:l}),global:vV},d=EV(r??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=jV(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new P9(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new pV(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new S9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:s,flowType:c,lock:l,debug:u,throwOnError:d},h,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RG({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,flowType:c,lock:l,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new V9(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const IG=(e,t,n)=>new $G(e,t,n);function MG(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}MG()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const DG="https://lnxbvkcggoyfmpfthhhk.supabase.co",LG="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxueGJ2a2NnZ295Zm1wZnRoaGhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTg5MzcsImV4cCI6MjA3NTA3NDkzN30.jA9UekW12CqU7vKHBZUPN2dtwG-nhqy1yxE8L70HZjM",BG=LG,oe=IG(DG,BG,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}}});function Ku(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return Math.abs(t).toString(36)}function FG(){try{const e=document.createElement("canvas"),t=e.getContext("2d");return t?(e.width=200,e.height=50,t.textBaseline="top",t.font="14px Arial",t.fillStyle="#f60",t.fillRect(0,0,100,50),t.fillStyle="#069",t.fillText("Fingerprint",2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText("Canvas",4,17),Ku(e.toDataURL())):"no-canvas"}catch{return"canvas-error"}}function zG(){try{const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(!t)return"no-webgl";const n=t.getExtension("WEBGL_debug_renderer_info");if(!n)return"no-debug-info";const r=t.getParameter(n.UNMASKED_VENDOR_WEBGL),i=t.getParameter(n.UNMASKED_RENDERER_WEBGL);return Ku(`${r}~${i}`)}catch{return"webgl-error"}}function UG(){const e=["Arial","Courier New","Georgia","Times New Roman","Verdana","Helvetica","Comic Sans MS","Impact","Lucida Console","Tahoma"],t=["monospace","sans-serif","serif"],n="mmmmmmmmmmlli",r="72px",i=document.createElement("span");i.style.fontSize=r,i.style.position="absolute",i.style.left="-9999px",i.innerHTML=n,document.body.appendChild(i);const a=[];for(const s of e)for(const c of t){i.style.fontFamily=`'${s}', ${c}`;const l=i.offsetWidth;i.style.fontFamily=c;const u=i.offsetWidth;if(l!==u){a.push(s);break}}return document.body.removeChild(i),Ku(a.join(","))}function HG(){const e=[];for(let t=0;t<navigator.plugins.length;t++)e.push(navigator.plugins[t].name);return Ku(e.sort().join(","))}async function VG(){const e={userAgent:navigator.userAgent,language:navigator.language,colorDepth:screen.colorDepth,screenResolution:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,sessionStorage:!!window.sessionStorage,localStorage:!!window.localStorage,indexedDb:!!window.indexedDB,platform:navigator.platform||"unknown",cpuClass:navigator.cpuClass||"unknown",plugins:HG(),canvas:FG(),webgl:zG(),fonts:UG()},t=Object.values(e).join("|"),n=Ku(t);let r=localStorage.getItem("_vid");return r||(r=`${Date.now().toString(36)}${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("_vid",r)),`${n}_${Ku(r)}`}const GG=()=>{const e=Md();return y.useEffect(()=>{(async()=>{try{const n=await VG();let r=sessionStorage.getItem("visitor_session_id");r||(r=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("visitor_session_id",r));const i=navigator.userAgent,a=qG(i),s=KG(i),c=YG(i),l=document.referrer||null,u=Intl.DateTimeFormat().resolvedOptions().timeZone,d=WG(u),{data:h}=await oe.from("visitor_tracking").select("id, fingerprint").eq("fingerprint",n).eq("country",d).limit(1).maybeSingle(),f=!h,{error:p}=await oe.from("visitor_tracking").insert({page_path:e.pathname,user_agent:i,referrer:l,session_id:r,device_type:a,browser:s,os:c,fingerprint:n,is_unique_visitor:f,country:d,city:null,ip_address:null});p&&console.error("Error tracking visitor:",p)}catch(n){console.error("Error in visitor tracking:",n)}})()},[e.pathname]),null},WG=e=>({"America/New_York":"US","America/Los_Angeles":"US","America/Chicago":"US","Europe/London":"UK","Europe/Paris":"FR","Europe/Berlin":"DE","Asia/Tokyo":"JP","Asia/Shanghai":"CN","Asia/Kolkata":"IN","Australia/Sydney":"AU","America/Sao_Paulo":"BR","America/Toronto":"CA","Asia/Singapore":"SG","Asia/Dubai":"AE","Europe/Moscow":"RU"})[e]||e.split("/")[0]||"Unknown",qG=e=>/mobile/i.test(e)?"Mobile":/tablet|ipad/i.test(e)?"Tablet":"Desktop",KG=e=>e.includes("Chrome")&&!e.includes("Edg")?"Chrome":e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Firefox")?"Firefox":e.includes("Edg")?"Edge":e.includes("Opera")||e.includes("OPR")?"Opera":"Other",YG=e=>e.includes("Win")?"Windows":e.includes("Mac")?"MacOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")||e.includes("iPhone")||e.includes("iPad")?"iOS":"Other";var XG=Symbol.for("react.lazy"),Qg=EH[" use ".trim().toString()];function ZG(e){return typeof e=="object"&&e!==null&&"then"in e}function ZM(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===XG&&"_payload"in e&&ZG(e._payload)}function Mp(e){const t=JG(e),n=y.forwardRef((r,i)=>{let{children:a,...s}=r;ZM(a)&&typeof Qg=="function"&&(a=Qg(a._payload));const c=y.Children.toArray(a),l=c.find(eW);if(l){const u=l.props.children,d=c.map(h=>h===l?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...s,ref:i,children:y.isValidElement(u)?y.cloneElement(u,void 0,d):null})}return o.jsx(t,{...s,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var JM=Mp("Slot");function JG(e){const t=y.forwardRef((n,r)=>{let{children:i,...a}=n;if(ZM(i)&&typeof Qg=="function"&&(i=Qg(i._payload)),y.isValidElement(i)){const s=nW(i),c=tW(a,i.props);return i.type!==y.Fragment&&(c.ref=r?BI(r,s):s),y.cloneElement(i,c)}return y.Children.count(i)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var QG=Symbol("radix.slottable");function eW(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===QG}function tW(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...c)=>{const l=a(...c);return i(...c),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function nW(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function QM(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=QM(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ut(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=QM(e))&&(r&&(r+=" "),r+=t);return r}const Bk=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Fk=ut,Dp=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Fk(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,s=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const f=Bk(d)||Bk(h);return i[u][f]}),c=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes({...a,...c}[g]):{...a,...c}[g]===v})?[...u,h,f]:u},[]);return Fk(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},uS="-",rW=e=>{const t=aW(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const c=s.split(uS);return c[0]===""&&c.length!==1&&c.shift(),eD(c,t)||iW(s)},getConflictingClassGroupIds:(s,c)=>{const l=n[s]||[];return c&&r[s]?[...l,...r[s]]:l}}},eD=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?eD(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(uS);return(s=t.validators.find(({validator:c})=>c(a)))==null?void 0:s.classGroupId},zk=/^\[(.+)\]$/,iW=e=>{if(zk.test(e)){const t=zk.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},aW=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return oW(Object.entries(e.classGroups),n).forEach(([a,s])=>{n_(s,r,a,t)}),r},n_=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:Uk(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(sW(i)){n_(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,s])=>{n_(s,Uk(t,a),n,r)})})},Uk=(e,t)=>{let n=e;return t.split(uS).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},sW=e=>e.isThemeGetter,oW=(e,t)=>t?e.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([s,c])=>[t+s,c])):a);return[n,i]}):e,cW=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(a,s)=>{n.set(a,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let s=n.get(a);if(s!==void 0)return s;if((s=r.get(a))!==void 0)return i(a,s),s},set(a,s){n.has(a)?n.set(a,s):i(a,s)}}},tD="!",lW=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],a=t.length,s=c=>{const l=[];let u=0,d=0,h;for(let v=0;v<c.length;v++){let x=c[v];if(u===0){if(x===i&&(r||c.slice(v,v+a)===t)){l.push(c.slice(d,v)),d=v+a;continue}if(x==="/"){h=v;continue}}x==="["?u++:x==="]"&&u--}const f=l.length===0?c:c.substring(d),p=f.startsWith(tD),m=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return n?c=>n({className:c,parseClassName:s}):s},uW=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},dW=e=>({cache:cW(e.cacheSize),parseClassName:lW(e),...rW(e)}),hW=/\s+/,fW=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],s=e.trim().split(hW);let c="";for(let l=s.length-1;l>=0;l-=1){const u=s[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let m=!!p,g=r(m?f.substring(0,p):f);if(!g){if(!m){c=u+(c.length>0?" "+c:c);continue}if(g=r(f),!g){c=u+(c.length>0?" "+c:c);continue}m=!1}const v=uW(d).join(":"),x=h?v+tD:v,b=x+g;if(a.includes(b))continue;a.push(b);const w=i(g,m);for(let _=0;_<w.length;++_){const j=w[_];a.push(x+j)}c=u+(c.length>0?" "+c:c)}return c};function pW(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=nD(t))&&(r&&(r+=" "),r+=n);return r}const nD=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=nD(e[r]))&&(n&&(n+=" "),n+=t);return n};function mW(e,...t){let n,r,i,a=s;function s(l){const u=t.reduce((d,h)=>h(d),e());return n=dW(u),r=n.cache.get,i=n.cache.set,a=c,c(l)}function c(l){const u=r(l);if(u)return u;const d=fW(l,n);return i(l,d),d}return function(){return a(pW.apply(null,arguments))}}const xn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},rD=/^\[(?:([a-z-]+):)?(.+)\]$/i,gW=/^\d+\/\d+$/,vW=new Set(["px","full","screen"]),yW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xW=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bW=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wW=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_W=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bs=e=>Eu(e)||vW.has(e)||gW.test(e),yo=e=>zd(e,"length",AW),Eu=e=>!!e&&!Number.isNaN(Number(e)),C0=e=>zd(e,"number",Eu),Eh=e=>!!e&&Number.isInteger(Number(e)),jW=e=>e.endsWith("%")&&Eu(e.slice(0,-1)),yt=e=>rD.test(e),xo=e=>yW.test(e),SW=new Set(["length","size","percentage"]),EW=e=>zd(e,SW,iD),NW=e=>zd(e,"position",iD),PW=new Set(["image","url"]),kW=e=>zd(e,PW,OW),CW=e=>zd(e,"",TW),Nh=()=>!0,zd=(e,t,n)=>{const r=rD.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},AW=e=>xW.test(e)&&!bW.test(e),iD=()=>!1,TW=e=>wW.test(e),OW=e=>_W.test(e),RW=()=>{const e=xn("colors"),t=xn("spacing"),n=xn("blur"),r=xn("brightness"),i=xn("borderColor"),a=xn("borderRadius"),s=xn("borderSpacing"),c=xn("borderWidth"),l=xn("contrast"),u=xn("grayscale"),d=xn("hueRotate"),h=xn("invert"),f=xn("gap"),p=xn("gradientColorStops"),m=xn("gradientColorStopPositions"),g=xn("inset"),v=xn("margin"),x=xn("opacity"),b=xn("padding"),w=xn("saturate"),_=xn("scale"),j=xn("sepia"),S=xn("skew"),N=xn("space"),P=xn("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",yt,t],O=()=>[yt,t],D=()=>["",bs,yo],L=()=>["auto",Eu,yt],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",yt],le=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_e=()=>[Eu,yt];return{cacheSize:500,separator:":",theme:{colors:[Nh],spacing:[bs,yo],blur:["none","",xo,yt],brightness:_e(),borderColor:[e],borderRadius:["none","","full",xo,yt],borderSpacing:O(),borderWidth:D(),contrast:_e(),grayscale:q(),hueRotate:_e(),invert:q(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[jW,yo],inset:A(),margin:A(),opacity:_e(),padding:O(),saturate:_e(),scale:_e(),sepia:q(),skew:_e(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",yt]}],container:["container"],columns:[{columns:[xo]}],"break-after":[{"break-after":le()}],"break-before":[{"break-before":le()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),yt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Eh,yt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yt]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",Eh,yt]}],"grid-cols":[{"grid-cols":[Nh]}],"col-start-end":[{col:["auto",{span:["full",Eh,yt]},yt]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Nh]}],"row-start-end":[{row:["auto",{span:[Eh,yt]},yt]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...Z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",yt,t]}],"min-w":[{"min-w":[yt,t,"min","max","fit"]}],"max-w":[{"max-w":[yt,t,"none","full","min","max","fit","prose",{screen:[xo]},xo]}],h:[{h:[yt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[yt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[yt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[yt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",xo,yo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",C0]}],"font-family":[{font:[Nh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yt]}],"line-clamp":[{"line-clamp":["none",Eu,C0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bs,yt]}],"list-image":[{"list-image":["none",yt]}],"list-style-type":[{list:["none","disc","decimal",yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bs,yo]}],"underline-offset":[{"underline-offset":["auto",bs,yt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),NW]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EW]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kW]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:H()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[bs,yt]}],"outline-w":[{outline:[bs,yo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[bs,yo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",xo,CW]}],"shadow-color":[{shadow:[Nh]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",xo,yt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yt]}],duration:[{duration:_e()}],ease:[{ease:["linear","in","out","in-out",yt]}],delay:[{delay:_e()}],animate:[{animate:["none","spin","ping","pulse","bounce",yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Eh,yt]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[bs,yo,C0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$W=mW(RW);function ye(...e){return $W(ut(e))}const dS=Dp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-160 ease-out disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:shadow-[0_0_0_1px_hsl(var(--ring)),0_0_8px_hsl(var(--ring)/0.5)]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-[1.03] hover:-translate-y-0.5 hover:shadow-lg active:scale-[0.98] active:translate-y-0",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:scale-[1.03] hover:shadow-lg active:scale-[0.98]",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:scale-[1.03] hover:shadow-md active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:scale-[1.03] hover:shadow-md active:scale-[0.98]",ghost:"hover:bg-accent hover:text-accent-foreground hover:scale-[1.03] active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline hover:scale-[1.02] active:scale-[0.98]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),V=y.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>{const s=r?JM:"button";return o.jsx(s,{className:ye(dS({variant:t,size:n,className:e})),ref:a,...i})});V.displayName="Button";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IW=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aD=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...c},l)=>y.createElement("svg",{ref:l,...MW,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:aD("lucide",i),...c},[...s.map(([u,d])=>y.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,t)=>{const n=y.forwardRef(({className:r,...i},a)=>y.createElement(DW,{ref:a,iconNode:t,className:aD(`lucide-${IW(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=ie("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=ie("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=ie("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=ie("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=ie("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=ie("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=ie("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=ie("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=ie("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=ie("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=ie("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=ie("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=ie("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=ie("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=ie("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=ie("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=ie("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=ie("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=ie("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=ie("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=ie("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=ie("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=ie("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=ie("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ie("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=ie("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=ie("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=ie("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=ie("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=ie("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=ie("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=ie("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=ie("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=ie("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=ie("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=ie("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=ie("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=ie("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=ie("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=ie("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=ie("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=ie("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=ie("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=ie("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=ie("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=ie("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=ie("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ie("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=ie("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ie("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=ie("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),O7=1,R7=1e6;let $0=0;function $7(){return $0=($0+1)%Number.MAX_SAFE_INTEGER,$0.toString()}const I0=new Map,e2=e=>{if(I0.has(e))return;const t=setTimeout(()=>{I0.delete(e),uf({type:"REMOVE_TOAST",toastId:e})},R7);I0.set(e,t)},I7=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,O7)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?e2(n):e.toasts.forEach(r=>{e2(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Dg=[];let Lg={toasts:[]};function uf(e){Lg=I7(Lg,e),Dg.forEach(t=>{t(Lg)})}function M7({...e}){const t=$7(),n=i=>uf({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>uf({type:"DISMISS_TOAST",toastId:t});return uf({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function Ud(){const[e,t]=y.useState(Lg);return y.useEffect(()=>(Dg.push(t),()=>{const n=Dg.indexOf(t);n>-1&&Dg.splice(n,1)}),[e]),{...e,toast:M7,dismiss:n=>uf({type:"DISMISS_TOAST",toastId:n})}}const fD=e=>{const[t,n]=y.useState(!1),[r,i]=y.useState(!0);return y.useEffect(()=>{(async()=>{if(!e){n(!1),i(!1);return}try{const{data:s,error:c}=await oe.from("user_roles").select("role").eq("user_id",e.id).eq("role","admin").maybeSingle();c?(c.code!=="PGRST116"&&c.code!=="PGRST301"&&console.error("Error checking admin status:",c),n(!1)):n(!!s)}catch(s){console.error("Unexpected error checking admin:",s),n(!1)}finally{i(!1)}})()},[e]),{isAdmin:t,isLoading:r}},pD=Vj,mD=FI,D7=Hj,gD=y.forwardRef(({className:e,...t},n)=>o.jsx(Pp,{className:ye("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));gD.displayName=Pp.displayName;const L7=Dp("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),xS=y.forwardRef(({side:e="right",className:t,children:n,...r},i)=>o.jsxs(D7,{children:[o.jsx(gD,{}),o.jsxs(kp,{ref:i,className:ye(L7({side:e}),t),...r,children:[n,o.jsxs($y,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(Pa,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xS.displayName=kp.displayName;const bS=({className:e,...t})=>o.jsx("div",{className:ye("flex flex-col space-y-2 text-center sm:text-left",e),...t});bS.displayName="SheetHeader";const wS=y.forwardRef(({className:e,...t},n)=>o.jsx(Cp,{ref:n,className:ye("text-lg font-semibold text-foreground",e),...t}));wS.displayName=Cp.displayName;const B7=y.forwardRef(({className:e,...t},n)=>o.jsx(Ap,{ref:n,className:ye("text-sm text-muted-foreground",e),...t}));B7.displayName=Ap.displayName;const vD=y.createContext(void 0),M0="prossmind-theme";function F7({children:e}){const[t,n]=y.useState(()=>typeof window>"u"?"system":localStorage.getItem(M0)||"system"),[r,i]=y.useState(()=>typeof window>"u"?"light":t==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t);y.useEffect(()=>{if(t==="system"){const s=window.matchMedia("(prefers-color-scheme: dark)"),c=l=>{i(l.matches?"dark":"light")};return c(s),s.addEventListener("change",c),()=>s.removeEventListener("change",c)}else i(t)},[t]),y.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),r==="dark"?s.classList.add("dark"):s.classList.add("light")},[r]);const a=s=>{n(s),typeof window<"u"&&localStorage.setItem(M0,s)};return y.useEffect(()=>{const s=window.document.documentElement,l=localStorage.getItem(M0)||"system";let u="light";l==="system"?u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":u=l,s.classList.remove("light","dark"),s.classList.add(u)},[]),o.jsx(vD.Provider,{value:{theme:t,setTheme:a,resolvedTheme:r},children:e})}function z7(){const e=y.useContext(vD);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const D0=()=>{const{theme:e,setTheme:t,resolvedTheme:n}=z7(),[r,i]=y.useState(!1);if(y.useEffect(()=>{i(!0)},[]),!r)return o.jsx(V,{variant:"ghost",size:"icon",className:"h-9 w-9","aria-label":"Theme toggle",disabled:!0,children:o.jsx(Zk,{className:"h-5 w-5","aria-hidden":"true"})});const a=()=>{t(e==="light"?"dark":e==="dark"?"system":"light")};return o.jsxs(V,{variant:"ghost",size:"icon",onClick:a,className:"h-9 w-9 relative transition-all","aria-label":`Switch to ${n==="dark"?"light":"dark"} mode`,title:`Current: ${n==="dark"?"Dark":"Light"} mode (${e==="system"?"Auto":"Manual"})`,children:[n==="dark"?o.jsx(Zk,{className:"h-5 w-5 transition-all rotate-0 scale-100","aria-hidden":"true"}):o.jsx(m7,{className:"h-5 w-5 transition-all rotate-0 scale-100","aria-hidden":"true"}),o.jsx("span",{className:"sr-only",children:n==="dark"?"Switch to light mode":"Switch to dark mode"})]})},li=()=>{const[e,t]=y.useState(!1);return y.useEffect(()=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)");t(n.matches);const r=i=>{t(i.matches)};return n.addEventListener?(n.addEventListener("change",r),()=>n.removeEventListener("change",r)):(n.addListener(r),()=>n.removeListener(r))},[]),e},rt=e=>{if(e)return{duration:0}},zp=()=>{const t=new URLSearchParams(window.location.search).get("subdomain");if(t)return t;const r=window.location.host.split(".");return r.length>2?r[0]:null},yD=()=>{const e=zp();return e&&["app","docs","admin","status","api","de","fr","bpmn","pid","partners"].includes(e)?e:"main"},U7=()=>yD()==="app",Ur=()=>{const e=window.location.host,t=window.location.hostname;return e.includes("localhost")||e.includes("127.0.0.1")||e.includes("0.0.0.0")||t.endsWith(".localhost")},xD=()=>{const e=window.location.host,t=e.split(".");return t.length>2?t.slice(-2).join("."):e},bD=(e,t="")=>{if(Ur()){const a=t.startsWith("/")?t:`/${t}`,s=`${window.location.origin}${a}`,c=s.includes("?")?"&":"?";return`${s}${c}subdomain=${e}`}const n=window.location.protocol,r=xD(),i=t.startsWith("/")?t:`/${t}`;return`${n}//${e}.${r}${i}`},Sa=(e="",t=!1)=>{const n=bD("app",e);t?window.open(n,"_blank"):window.location.href=n},i_=(e,t="")=>bD(e,t),xi=()=>{const e=zp();return e?`?subdomain=${e}`:""},Gn=(e,t)=>{const n=zp();if(n&&Ur()){const r=t.includes("?")?"&":"?";e(`${t}${r}subdomain=${n}`)}else e(t)},H7=()=>{if(Ur())return`${window.location.origin}/`;const e=window.location.protocol,t=xD();return`${e}//${t}/`},Mr=({user:e})=>{const t=Md(),{toast:n}=Ud(),r=y.useRef(!1),i=y.useRef(null),a=y.useRef(null),[s,c]=y.useState(()=>{const P=e??null;return a.current=P,P}),{isAdmin:l}=fD(s),u=li(),[d,h]=y.useState(!1),[f,p]=y.useState(!1),[m,g]=y.useState(!1),{scrollY:v}=LI();y.useEffect(()=>{oe.auth.getSession().then(({data:{session:k}})=>{r.current=!0;const T=(k==null?void 0:k.user)??null;i.current=T,a.current=T,c(T)});const{data:{subscription:P}}=oe.auth.onAuthStateChange((k,T)=>{r.current=!0;const A=(T==null?void 0:T.user)??null;i.current=A,a.current=A,c(A)});return()=>P.unsubscribe()},[]),y.useEffect(()=>{r.current&&(e!==void 0?(a.current=e,c(e),e&&(i.current=e)):e===void 0&&a.current===null&&i.current!==null&&(a.current=i.current,c(i.current)))},[e]),y.useEffect(()=>{a.current=s},[s]),y.useEffect(()=>{const P=()=>{h(window.innerWidth<1080)};return P(),window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),y.useEffect(()=>{const P=v.on("change",k=>{g(k>50)});return()=>P()},[v]);const x=async()=>{var k,T;const{error:P}=await oe.auth.signOut();P&&!((k=P.message)!=null&&k.includes("session"))&&!((T=P.message)!=null&&T.includes("Session"))&&n({variant:"destructive",title:"Error signing out",description:P.message}),c(null),i.current=null,a.current=null,window.location.href="/"},w=yD()==="app",_=[{name:"Dashboard",path:"/dashboard",icon:o7},{name:"Projects",path:"/projects",icon:t7},{name:"Templates",path:"/templates",icon:Wn},{name:"Vision AI",path:"/vision-ai",icon:Da}],j=[{name:"Features",path:"/features"},{name:"Pricing",path:"/pricing"},{name:"Documentation",path:i_("docs"),external:!0},{name:"Contact",path:"/contact"}],S=s?_:_.filter(P=>P.name!=="Vision AI"),N=w?S:j;return o.jsx(ce.nav,{className:"fixed top-0 left-0 right-0 z-50 border-b border-border/50 h-16 bg-background/95 backdrop-blur-lg",style:{backgroundColor:sf(v,[0,100],["hsl(var(--background) / 0.95)","hsl(var(--background) / 1)"]),backdropFilter:sf(v,[0,100],["blur(16px)","blur(24px)"]),boxShadow:sf(v,[0,100],["0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","0 4px 30px rgba(37, 99, 235, 0.1)"])},initial:u?{y:0}:{y:-100},animate:{y:0},transition:rt(u)||{duration:.3},children:o.jsx("div",{className:"container mx-auto px-6 h-full",children:o.jsxs("div",{className:"flex items-center justify-between h-full",children:[o.jsx(ce.div,{animate:u?{scale:1}:{scale:m?.95:1},transition:rt(u)||{duration:.3},children:o.jsxs("a",{href:H7(),className:"flex items-center space-x-3 group flex-shrink-0","aria-label":"ProssMind Home",children:[o.jsx(ce.img,{src:"/Prossmind-Logo.png",alt:"ProssMind Logo",className:"h-12 w-auto",whileHover:u?{}:{scale:1.05},transition:rt(u)||{duration:.2}}),o.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent whitespace-nowrap",children:"ProssMind"})]})}),!d&&o.jsxs(o.Fragment,{children:[o.jsx(ce.div,{className:"flex items-center space-x-1 bg-secondary/50 rounded-full px-2 py-1.5 shadow-sm flex-shrink-0 relative border border-border/30",style:{borderRadius:"40px"},animate:u?{}:{paddingTop:m?"0.25rem":"0.375rem",paddingBottom:m?"0.25rem":"0.375rem"},transition:rt(u)||{duration:.3},children:N.map(P=>{const k=P.icon,T=P.external,A=!T&&(t.pathname===P.path||P.path==="/dashboard"&&t.pathname==="/"),O=`px-5 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap relative flex items-center gap-2 ${A?"text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80 hover:scale-[1.02]"}`;if(T)return o.jsxs("a",{href:P.path,target:"_blank",rel:"noopener noreferrer",className:O,"aria-label":`Navigate to ${P.name} page`,children:[k&&o.jsx(k,{className:"h-4 w-4 relative z-10"}),o.jsx("span",{className:"relative z-10",children:P.name})]},P.path);const D=!T&&Ur()?`${P.path}${xi()}`:P.path;return o.jsxs(Hn,{to:D,className:O,"aria-label":`Navigate to ${P.name} page`,children:[A?o.jsx(ce.div,{layoutId:u?void 0:"activeNavIndicator",className:"absolute inset-0 bg-primary rounded-full shadow-md",transition:rt(u)||{type:"spring",stiffness:380,damping:30}}):null,k&&o.jsx(k,{className:"h-4 w-4 relative z-10"}),o.jsx("span",{className:"relative z-10",children:P.name})]},P.path)})}),s?o.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[o.jsx(D0,{}),w&&o.jsxs(o.Fragment,{children:[o.jsx(Hn,{to:Ur()?`/account${xi()}`:"/account",children:o.jsx(V,{variant:"ghost",size:"sm",className:"gap-2","aria-label":"Account",children:o.jsx(kf,{className:"h-4 w-4"})})}),o.jsx(Hn,{to:Ur()?`/settings${xi()}`:"/settings",children:o.jsx(V,{variant:"ghost",size:"sm",className:"gap-2","aria-label":"Settings",children:o.jsx(rv,{className:"h-4 w-4"})})})]}),o.jsx(Hn,{to:Ur()?`/admin/bpmn-dashboard${xi()}`:"/admin/bpmn-dashboard",children:o.jsxs(V,{variant:"outline",size:"sm",className:"gap-2 hover:bg-primary/10 hover:border-primary/50 transition-all whitespace-nowrap","aria-label":"BPMN Analytics",children:[o.jsx(Hk,{className:"h-4 w-4","aria-hidden":"true"}),"Analytics"]})}),l&&o.jsx(Hn,{to:Ur()?`/admin${xi()}`:"/admin",children:o.jsxs(V,{variant:"outline",size:"sm",className:"gap-2 hover:bg-primary/10 hover:border-primary/50 transition-all whitespace-nowrap","aria-label":"Admin Dashboard",children:[o.jsx(Jo,{className:"h-4 w-4","aria-hidden":"true"}),"Admin"]})}),o.jsx("span",{className:"text-sm text-muted-foreground font-medium whitespace-nowrap truncate max-w-[200px]","aria-label":`Logged in as ${s.email}`,children:s.email}),o.jsxs(V,{onClick:x,variant:"outline",className:"items-center gap-2 hover:bg-destructive/10 hover:border-destructive/50 hover:text-destructive transition-all whitespace-nowrap","aria-label":"Sign out",children:[o.jsx(Kk,{className:"h-4 w-4","aria-hidden":"true"}),"Sign Out"]})]}):o.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[o.jsx(D0,{}),o.jsx(Hn,{to:Ur()?`/auth${xi()}`:"/auth",className:"flex-shrink-0",children:o.jsxs(V,{className:"flex items-center gap-2 bg-primary hover:bg-primary/90 shadow-md hover:shadow-lg transition-all whitespace-nowrap","aria-label":"Sign up or log in",children:[w?"Sign In":"Sign Up",o.jsx(Yu,{className:"h-4 w-4","aria-hidden":"true"})]})})]})]}),d&&o.jsxs(pD,{open:f,onOpenChange:p,children:[o.jsx(mD,{asChild:!0,children:o.jsx(ce.div,{whileTap:u?{}:{scale:.95},children:o.jsxs(V,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Open navigation menu",children:[o.jsx(ce.div,{animate:u?{rotate:f?90:0}:{rotate:f?90:0},transition:rt(u)||{duration:.3},children:o.jsx(lD,{className:"h-6 w-6","aria-hidden":"true"})}),o.jsx("span",{className:"sr-only",children:"Open menu"})]})})}),o.jsxs(xS,{side:"right",className:"w-[300px] sm:w-[400px]",children:[o.jsx(bS,{children:o.jsx(wS,{children:"Menu"})}),o.jsxs("nav",{className:"flex flex-col gap-4 mt-6",children:[o.jsxs(ce.div,{className:"flex items-center justify-between px-4 py-2 border-b border-border mb-2",initial:u?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:rt(u)||{delay:.1},children:[o.jsx("span",{className:"text-sm font-medium",children:"Theme"}),o.jsx(D0,{})]}),N.map((P,k)=>{const T=P.icon,A=P.external,D=`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${!A&&(t.pathname===P.path||P.path==="/dashboard"&&t.pathname==="/")?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80"}`;return o.jsx(ce.div,{initial:u?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:rt(u)||{delay:.1+k*.05},children:A?o.jsxs("a",{href:P.path,target:"_blank",rel:"noopener noreferrer",className:D,"aria-label":`Navigate to ${P.name} page`,children:[T&&o.jsx(T,{className:"h-4 w-4"}),P.name]}):o.jsxs(Hn,{to:Ur()?`${P.path}${xi()}`:P.path,onClick:()=>p(!1),className:D,"aria-label":`Navigate to ${P.name} page`,children:[T&&o.jsx(T,{className:"h-4 w-4"}),P.name]})},P.path)}),w&&s&&o.jsxs(o.Fragment,{children:[o.jsx(ce.div,{initial:u?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:rt(u)||{delay:.3},children:o.jsxs(Hn,{to:Ur()?`/account${xi()}`:"/account",onClick:()=>p(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${t.pathname==="/account"?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80"}`,children:[o.jsx(kf,{className:"h-4 w-4"}),"Account"]})}),o.jsx(ce.div,{initial:u?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:rt(u)||{delay:.35},children:o.jsxs(Hn,{to:Ur()?`/settings${xi()}`:"/settings",onClick:()=>p(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${t.pathname==="/settings"?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80"}`,children:[o.jsx(rv,{className:"h-4 w-4"}),"Settings"]})})]}),s?o.jsxs(o.Fragment,{children:[o.jsx(Hn,{to:Ur()?`/admin/bpmn-dashboard${xi()}`:"/admin/bpmn-dashboard",onClick:()=>p(!1),children:o.jsxs(V,{variant:"outline",className:"w-full justify-start gap-2","aria-label":"BPMN Analytics",children:[o.jsx(Hk,{className:"h-4 w-4","aria-hidden":"true"}),"Analytics"]})}),l&&o.jsx(Hn,{to:Ur()?`/admin${xi()}`:"/admin",onClick:()=>p(!1),children:o.jsxs(V,{variant:"outline",className:"w-full justify-start gap-2","aria-label":"Admin Dashboard",children:[o.jsx(Jo,{className:"h-4 w-4","aria-hidden":"true"}),"Admin"]})}),o.jsx("div",{className:"px-4 py-2 text-sm text-muted-foreground","aria-label":`Logged in as ${s.email}`,children:s.email}),o.jsxs(V,{onClick:()=>{x(),p(!1)},variant:"outline",className:"w-full justify-start gap-2 hover:bg-destructive/10 hover:border-destructive/50 hover:text-destructive","aria-label":"Sign out",children:[o.jsx(Kk,{className:"h-4 w-4","aria-hidden":"true"}),"Sign Out"]})]}):o.jsx(Hn,{to:Ur()?`/auth${xi()}`:"/auth",onClick:()=>p(!1),children:o.jsxs(V,{className:"w-full gap-2","aria-label":"Sign up or log in",children:["Sign Up",o.jsx(Yu,{className:"h-4 w-4","aria-hidden":"true"})]})})]})]})]})]})})})},V7="/assets/hero-mind-process-CVwas96Y.jpg",G7=()=>{const e=y.useRef(null),t=y.useRef([]),n=y.useRef();return y.useEffect(()=>{const r=e.current;if(!r)return;const i=r.getContext("2d");if(!i)return;const a=()=>{r.width=window.innerWidth,r.height=window.innerHeight};a(),window.addEventListener("resize",a);const s=Math.min(20,Math.max(15,Math.floor(r.width*r.height/2e4)));t.current=Array.from({length:s},()=>({x:Math.random()*r.width,y:Math.random()*r.height,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3-.2,size:Math.random()*2+1,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,opacity:Math.random()*.5+.3}));const c=()=>{i.clearRect(0,0,r.width,r.height);const l=t.current;l.forEach(u=>{let d=u.x+u.vx,h=u.y+u.vy;u.rotation+=u.rotationSpeed,d<0&&(d=r.width,u.opacity=Math.random()*.5+.3),d>r.width&&(d=0,u.opacity=Math.random()*.5+.3),h<0&&(h=r.height,u.opacity=Math.random()*.5+.3),h>r.height&&(h=0,u.opacity=Math.random()*.5+.3),u.x=d,u.y=h,i.save(),i.translate(u.x,u.y),i.rotate(u.rotation),i.beginPath(),i.arc(0,0,u.size,0,Math.PI*2),i.fillStyle=`rgba(37, 99, 235, ${u.opacity})`,i.fill(),i.restore()}),l.forEach((u,d)=>{l.slice(d+1).forEach(h=>{const f=u.x-h.x,p=u.y-h.y,m=Math.sqrt(f*f+p*p);m<150&&(i.beginPath(),i.moveTo(u.x,u.y),i.lineTo(h.x,h.y),i.strokeStyle=`rgba(37, 99, 235, ${.1*(1-m/150)})`,i.lineWidth=.5,i.stroke())})}),n.current=requestAnimationFrame(c)};return c(),()=>{window.removeEventListener("resize",a),n.current&&cancelAnimationFrame(n.current)}},[]),o.jsx(ce.canvas,{ref:e,className:"absolute inset-0 pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:1}})},W7=({containerRef:e,centerX:t,centerY:n})=>{const r=y.useRef(null),[i,a]=y.useState([]),s=y.useRef();if(y.useEffect(()=>{if(!e.current||t===0||n===0)return;const l=e.current.getBoundingClientRect(),u=t-l.left,d=n-l.top,h=6,f=Array.from({length:h},(m,g)=>{const v=g/h*Math.PI*2,x=150+Math.random()*100,b=u+Math.cos(v)*x,w=d+Math.sin(v)*x,_=3+Math.floor(Math.random()*3),j=Array.from({length:_},()=>({progress:Math.random(),speed:.005+Math.random()*.005}));return{id:g,startX:u,startY:d,endX:b,endY:w,particles:j}});a(f);const p=()=>{a(m=>m.map(g=>({...g,particles:g.particles.map(v=>({...v,progress:(v.progress+v.speed)%1}))}))),s.current=requestAnimationFrame(p)};return p(),()=>{s.current&&cancelAnimationFrame(s.current)}},[t,n,e]),!e.current)return null;const c=e.current.getBoundingClientRect();return o.jsxs("svg",{ref:r,className:"absolute inset-0 pointer-events-none",width:c.width,height:c.height,children:[o.jsx("defs",{children:o.jsxs("filter",{id:"glow",children:[o.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),o.jsxs("feMerge",{children:[o.jsx("feMergeNode",{in:"coloredBlur"}),o.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),i.map(l=>o.jsxs("g",{children:[o.jsx(ce.line,{x1:l.startX,y1:l.startY,x2:l.endX,y2:l.endY,stroke:"rgba(37, 99, 235, 0.2)",strokeWidth:"1",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,ease:"easeOut"}}),l.particles.map((u,d)=>{const h=l.startX+(l.endX-l.startX)*u.progress,f=l.startY+(l.endY-l.startY)*u.progress,p=1-u.progress%.2*5;return o.jsxs("g",{children:[o.jsx("circle",{cx:h,cy:f,r:"8",fill:"rgba(37, 99, 235, 0.1)",opacity:p,filter:"url(#glow)"}),o.jsx(ce.circle,{cx:h,cy:f,r:"3",fill:"rgba(37, 99, 235, 0.8)",filter:"url(#glow)",animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]},d)})]},l.id))]})},q7=({src:e,autoplay:t=!0,loop:n=!0,className:r="","aria-label":i,lazy:a=!0,fallback:s})=>{const c=y.useRef(null),l=y.useRef(null),[u,d]=y.useState(!1),[h,f]=y.useState(!1),p=li(),[m,g]=y.useState(!a);return y.useEffect(()=>{if(!a||m)return;const v=c.current;if(!v)return;const x=new IntersectionObserver(b=>{b.forEach(w=>{w.isIntersecting&&(g(!0),x.disconnect())})},{rootMargin:"100px",threshold:0});if(x.observe(v),typeof window.requestIdleCallback<"u"){const b=window.requestIdleCallback(()=>{m||g(!0)});return()=>{x.disconnect(),window.cancelIdleCallback(b)}}return()=>x.disconnect()},[a,m]),y.useEffect(()=>{if(!m||!c.current||p){p&&s&&d(!0);return}let v=!0;return(async()=>{try{const b=await fetch(e);if(!b.ok)throw new Error(`Failed to load animation: ${b.statusText}`);const w=await b.json();if(!v||!c.current)return;const _=KH.loadAnimation({container:c.current,renderer:"svg",loop:n,autoplay:t,animationData:w});l.current=_,d(!0)}catch(b){console.error("Error loading Lottie animation:",b),v&&(f(!0),d(!0))}})(),()=>{v=!1,l.current&&(l.current.destroy(),l.current=null)}},[e,m,p,t,n,s]),p&&s?o.jsx("div",{className:r,children:s}):h&&s?o.jsx("div",{className:r,children:s}):o.jsx("div",{ref:c,className:r,"aria-label":i,"aria-hidden":i?void 0:"true",role:i?"img":void 0})},ac=e=>{const t=y.useRef(null),n=jH(t,{once:(e==null?void 0:e.once)??!0,amount:(e==null?void 0:e.threshold)??.15});return{ref:t,isInView:n}},K7={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},Hd={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},Go={hidden:{opacity:0,y:18},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.2,.9,.3,1]}}},Y7=[{quote:"What used to take days now takes minutes. The AI-powered BPMN generation is remarkably intuitive and incredibly accurate."},{quote:"Finally, a tool that makes process modeling accessible to everyone. The ease of use and speed are unmatched."}],wD=()=>{const e=li(),t=y.useRef(null),[n,r]=y.useState(null);y.useEffect(()=>{oe.auth.getSession().then(({data:{session:l}})=>{r((l==null?void 0:l.user)??null)})},[]);const i=()=>{Sa(n?"/dashboard":"/auth")},{scrollY:a}=LI();sf(a,[0,500],[0,100]),sf(a,[0,300],[1,0]);const[s,c]=y.useState({x:0,y:0});return y.useEffect(()=>{if(t.current){const l=t.current.getBoundingClientRect();c({x:l.left+l.width/2,y:l.top+l.height/2})}},[]),o.jsxs(ce.section,{className:"relative min-h-screen bg-gradient-to-b from-gray-50 to-white dark:from-background dark:to-card text-hero-foreground dark:text-foreground overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[o.jsx(G7,{}),o.jsx("div",{className:"container mx-auto px-8 md:px-12 pb-8 md:pb-16 relative z-10",children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center min-h-[600px]",children:[o.jsxs(ce.div,{className:"space-y-6 md:space-y-8 flex flex-col justify-center",initial:"hidden",animate:"visible",variants:K7,children:[o.jsxs(ce.div,{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-primary/10 dark:bg-primary/20 border border-primary/20 dark:border-primary/30 text-xs font-medium mb-2",style:{width:"fit-content"},initial:e?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:rt(e)||{delay:.2,duration:.5},children:[o.jsx(Pf,{className:"h-3 w-3 text-primary"}),o.jsx("span",{children:"AI-Powered Process Intelligence"})]}),o.jsx(ce.h1,{className:"text-5xl md:text-7xl font-bold leading-tight tracking-tight",initial:e?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},transition:rt(e)||{delay:.4,duration:.7,ease:"easeOut"},children:"ProssMind"}),o.jsx(ce.p,{className:"text-lg md:text-xl text-foreground/80 dark:text-foreground/80 max-w-lg leading-relaxed",initial:e?{opacity:1,y:0}:{opacity:0,y:10},animate:{opacity:1,y:0},transition:rt(e)||{delay:1.1,duration:.6},children:"Transform complex processes into intelligent workflows with AI-powered automation."}),o.jsxs(ce.div,{className:"flex flex-col gap-4 sm:flex-row sm:gap-6 pt-2",initial:e?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},transition:rt(e)||{delay:.5,duration:.6},children:[o.jsx(ce.div,{whileHover:e?{}:{scale:1.02},transition:rt(e)||{duration:.2},children:o.jsx(V,{size:"lg",className:"group text-base px-8 py-6 shadow-lg hover:shadow-xl transition-all focus-visible:outline-2 focus-visible:outline-offset-2 relative overflow-hidden",onClick:i,"aria-label":"Try ProssMind for free",style:{background:"linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.9))"},children:o.jsxs(ce.span,{className:"flex items-center",whileHover:e?{}:{scale:1.02},children:["Try It Free",o.jsx(ce.span,{className:"ml-2",animate:e?{x:0}:{x:[0,4,0]},transition:rt(e)||{duration:1.5,repeat:1/0,repeatDelay:2},children:o.jsx(pu,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform","aria-hidden":"true"})})]})})}),o.jsx(ce.div,{whileHover:e?{}:{scale:1.02},transition:rt(e)||{duration:.2},children:o.jsx(V,{size:"lg",variant:"outline",className:"group text-base px-8 py-6 bg-hero-foreground/5 dark:bg-foreground/5 hover:bg-primary/5 border-2 border-primary/30 hover:border-primary transition-all focus-visible:outline-2 focus-visible:outline-offset-2 relative","aria-label":"View ProssMind features",style:{boxShadow:"0 0 0px rgba(100, 180, 255, 0)"},onMouseEnter:l=>{l.currentTarget.style.boxShadow="0 0 15px rgba(100, 180, 255, 0.5)",l.currentTarget.style.color="hsl(var(--primary))"},onMouseLeave:l=>{l.currentTarget.style.boxShadow="0 0 0px rgba(100, 180, 255, 0)",l.currentTarget.style.color=""},children:o.jsxs("span",{className:"flex items-center",children:["View Features",o.jsx(ce.span,{initial:e?{opacity:1,x:0}:{opacity:0,x:-5},whileHover:e?{}:{opacity:1,x:0},transition:rt(e)||{duration:.2},className:"ml-2",children:o.jsx(Yu,{className:"h-5 w-5","aria-hidden":"true"})})]})})})]})]}),o.jsxs(ce.div,{ref:t,className:"relative",initial:e?{opacity:1,x:0}:{opacity:0,x:50},animate:{opacity:1,x:0},transition:rt(e)||{delay:.6,duration:.7},children:[s.x>0&&s.y>0&&o.jsx(W7,{containerRef:t,centerX:s.x,centerY:s.y}),o.jsx(ce.div,{className:"absolute inset-0 bg-primary/20 dark:bg-primary/10 blur-3xl rounded-full glow-effect",animate:e?{scale:1}:{scale:[1,1.1,1]},transition:rt(e)||{duration:4,repeat:1/0}}),o.jsx(ce.div,{className:"relative z-10 rounded-2xl overflow-hidden shadow-2xl border border-hero-foreground/10 dark:border-border/50",whileHover:e?{}:{scale:1.02},animate:e?{scale:1}:{scale:[1,1.02,1]},transition:rt(e)||{duration:2,repeat:1/0,ease:"easeInOut"},children:o.jsx(q7,{src:"/animations/brain-flow.json",autoplay:!0,loop:!0,className:"w-full h-auto","aria-label":"Mind and Process Mining Intelligence animation",lazy:!0,fallback:o.jsx("img",{src:V7,alt:"Mind and Process Mining Intelligence",className:"w-full h-auto",loading:"lazy"})})})]})]})}),o.jsxs("div",{className:"container mx-auto px-8 md:px-12 pb-16 relative z-10",children:[o.jsxs(ce.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.8},className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-3 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Trusted by Industry Leaders"}),o.jsx("p",{className:"text-foreground/70 dark:text-foreground/60 text-lg",children:"See what people are saying"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:Y7.map((l,u)=>o.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.4+u*.15,duration:.6},whileHover:e?{}:{y:-8,scale:1.02},className:"group relative",children:o.jsxs("div",{className:"relative h-full p-8 rounded-xl bg-gradient-to-br from-card/80 to-card/40 dark:from-card/60 dark:to-card/30 backdrop-blur-sm border border-border/50 dark:border-border/30 shadow-lg hover:shadow-xl transition-all duration-300",children:[o.jsx("div",{className:"absolute -top-3 -left-3 w-12 h-12 rounded-full bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:o.jsx(b7,{className:"h-6 w-6 text-primary-foreground"})}),o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-primary/10 dark:bg-primary/5 rounded-full blur-2xl group-hover:bg-primary/20 dark:group-hover:bg-primary/10 transition-all duration-500"}),o.jsx("blockquote",{className:"relative z-10 mt-4",children:o.jsxs("p",{className:"text-foreground/80 dark:text-foreground/70 leading-relaxed italic text-lg",children:['"',l.quote,'"']})}),o.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-primary/0 via-primary/0 to-primary/0 group-hover:from-primary/10 group-hover:via-primary/5 group-hover:to-transparent transition-all duration-500 pointer-events-none"})]})},u))})]}),o.jsx("div",{className:"container mx-auto px-8 md:px-12 pb-20 relative z-10",children:o.jsxs(ce.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.8,duration:.8},className:"text-center max-w-3xl mx-auto",children:[o.jsx("p",{className:"text-base md:text-lg text-foreground/80 dark:text-foreground/70 leading-relaxed mb-3",children:"Join hundreds of organizations transforming their operations with AI-powered process intelligence."}),o.jsx("p",{className:"text-lg md:text-xl font-bold bg-gradient-to-r from-primary via-primary/80 to-primary/60 bg-clip-text text-transparent",children:"Start seeing results in weeks, not months."})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-background to-transparent"})]})},_D=()=>{const e=li(),t=[{icon:Wn,title:"Upload Your Document",description:"Upload images, PDFs, Word documents, or text files describing your process.",color:"text-blue-500",glowColor:"blue"},{icon:UW,title:"AI Analysis",description:"Our AI analyzes your document and extracts process information using advanced NLP.",color:"text-purple-500",glowColor:"purple"},{icon:$i,title:"BPMN Generation",description:"The AI generates a complete BPMN diagram with tasks, gateways, and flows.",color:"text-green-500",glowColor:"green"},{icon:Zh,title:"Ready to Use",description:"Download your BPMN diagram or integrate directly with your workflow tools.",color:"text-primary",glowColor:"primary"}],n=r=>{switch(r){case"blue":return"hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50";case"purple":return"hover:shadow-[0_0_20px_rgba(168,85,247,0.5)] hover:shadow-purple-500/50";case"green":return"hover:shadow-[0_0_20px_rgba(34,197,94,0.5)] hover:shadow-green-500/50";case"primary":return"hover:shadow-[0_0_20px_hsl(var(--primary))] hover:shadow-primary/50";default:return"hover:shadow-[0_0_20px_rgba(59,130,246,0.5)]"}};return o.jsx(ce.section,{className:"py-24 bg-background relative overflow-hidden",initial:e?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:rt(e)||{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs(ce.div,{className:"text-center mb-16",initial:e?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:rt(e)||{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"How It Works"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"From document to diagram in seconds"})]}),o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((r,i)=>{const a=r.icon;return o.jsxs(ce.div,{className:`text-center space-y-4 p-6 rounded-2xl transition-all duration-300 cursor-pointer ${n(r.glowColor)}`,initial:e?{opacity:1,y:0}:{opacity:0,y:20},whileInView:e?{}:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:rt(e)||{duration:.6,delay:i*.1},whileHover:e?{}:{scale:1.05,y:-5},children:[o.jsx(ce.div,{className:"w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center transition-all duration-300","aria-hidden":"true",children:o.jsx(a,{className:`h-8 w-8 ${r.color} transition-all duration-300`,"aria-hidden":"true"})}),o.jsx("h3",{className:"text-xl font-semibold",children:r.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]},i)})})})]})})},ue=y.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ue.displayName="Card";const ve=y.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ye("flex flex-col space-y-1.5 p-6",e),...t}));ve.displayName="CardHeader";const be=y.forwardRef(({className:e,...t},n)=>o.jsx("h3",{ref:n,className:ye("text-2xl font-semibold leading-none tracking-tight",e),...t}));be.displayName="CardTitle";const Te=y.forwardRef(({className:e,...t},n)=>o.jsx("p",{ref:n,className:ye("text-sm text-muted-foreground",e),...t}));Te.displayName="CardDescription";const pe=y.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ye("p-6 pt-0",e),...t}));pe.displayName="CardContent";const jD=y.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ye("flex items-center p-6 pt-0",e),...t}));jD.displayName="CardFooter";const X7=[{icon:yl,title:"Manufacturing Operations",problems:[{label:"Invisible Bottlenecks:",description:'Delays in "Order-to-Cash" or production lines'},{label:"Compliance Deviations:",description:'"Maverick" behaviors bypassing ISO/Safety standards'}],color:"text-orange-500",bgGradient:"from-orange-500/20 to-orange-500/5"},{icon:Wy,title:"Financial Services",problems:[{label:"High Cycle Times:",description:"Latency in loan origination and customer onboarding"},{label:"Regulatory Gaps:",description:"Inability to prove 100% audit compliance"}],color:"text-blue-500",bgGradient:"from-blue-500/20 to-blue-500/5"},{icon:s7,title:"Healthcare Systems",problems:[{label:"Care Path Variation:",description:"Inconsistent patient journeys driving up costs"},{label:"Protocol Non-Adherence:",description:"Staff deviating from standard triage or discharge rules"}],color:"text-red-500",bgGradient:"from-red-500/20 to-red-500/5"},{icon:hD,title:"IT & DevOps",problems:[{label:"SLA Breaches:",description:'Excessive "ticket requests" between support teams'},{label:"Shadow IT:",description:"Changes made to production without formal approvals"}],color:"text-purple-500",bgGradient:"from-purple-500/20 to-purple-500/5"}],Z7=()=>{const e=li(),{ref:t,isInView:n}=ac({threshold:.1});return o.jsxs(ce.section,{className:"py-24 bg-background relative overflow-hidden",initial:e?{opacity:1}:{opacity:0},whileInView:{opacity:1},viewport:{once:!0,amount:.2},transition:rt(e)||{duration:.5},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-muted/30 to-transparent pointer-events-none"}),o.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[o.jsxs(ce.div,{className:"text-center mb-16",initial:e?{opacity:1}:{opacity:0},whileInView:{opacity:1},viewport:{once:!0,amount:.3},transition:rt(e)||{duration:.4},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Who We Serve"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Empowering industries with AI-driven process intelligence"})]}),o.jsx(ce.div,{ref:t,className:"grid md:grid-cols-2 gap-8 max-w-6xl mx-auto",variants:Hd,initial:"hidden",animate:n?"visible":"hidden",children:X7.map((r,i)=>o.jsx(ce.div,{variants:e?void 0:Go,whileHover:e?{}:{y:-8,scale:1.02},transition:rt(e)||{duration:.3},children:o.jsxs(ue,{className:"card-hover cursor-pointer border-border/50 hover:border-primary bg-card/50 backdrop-blur-sm h-full rounded-2xl shadow-md transition-all relative overflow-hidden group",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},role:"article","aria-label":`Target Group: ${r.title}`,children:[o.jsx(ce.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"linear-gradient(45deg, hsl(var(--primary)), hsl(var(--accent)))",padding:"1px"},initial:!1,children:o.jsx("div",{className:"w-full h-full bg-card/50 backdrop-blur-sm rounded-2xl"})}),o.jsx(ve,{className:"relative z-10",children:o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx(ce.div,{className:`w-16 h-16 rounded-xl bg-gradient-to-br ${r.bgGradient} flex items-center justify-center tech-glow`,whileHover:e?{}:{scale:1.1},transition:{duration:.2},children:o.jsx(r.icon,{className:`h-8 w-8 ${r.color}`})}),o.jsx(be,{className:"text-2xl",children:r.title})]})}),o.jsx(pe,{className:"relative z-10 space-y-4",children:r.problems.map((a,s)=>o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-semibold text-foreground",children:a.label}),o.jsx("p",{className:"text-sm text-muted-foreground pl-4 border-l-2 border-primary/30",children:a.description})]},s))})]})},i))})]})]})},J7=[{icon:Jh,title:"Hidden Process Inefficiencies",description:"Uncover invisible bottlenecks and delays that drain productivity and increase operational costs.",color:"text-yellow-500",bgGradient:"from-yellow-500/20 to-yellow-500/5",impact:"Up to 30% productivity loss"},{icon:C7,title:"Compliance & Regulatory Risks",description:"Identify and eliminate maverick behaviors that bypass critical safety and compliance standards.",color:"text-red-500",bgGradient:"from-red-500/20 to-red-500/5",impact:"Avoid costly penalties"},{icon:Lp,title:"Extended Cycle Times",description:"Reduce latency in critical processes like loan origination, customer onboarding, and patient care.",color:"text-blue-500",bgGradient:"from-blue-500/20 to-blue-500/5",impact:"50% faster processing"},{icon:Jo,title:"Audit Trail Gaps",description:"Ensure 100% audit compliance with complete visibility into every process step and decision point.",color:"text-green-500",bgGradient:"from-green-500/20 to-green-500/5",impact:"100% audit readiness"},{icon:yS,title:"Process Variation",description:"Standardize inconsistent workflows that lead to quality issues and increased operational costs.",color:"text-purple-500",bgGradient:"from-purple-500/20 to-purple-500/5",impact:"Consistent quality"},{icon:k7,title:"Shadow IT & Unauthorized Changes",description:"Detect and prevent unauthorized modifications to production systems without proper approvals.",color:"text-orange-500",bgGradient:"from-orange-500/20 to-orange-500/5",impact:"Enhanced security"}],Q7=()=>{const e=li(),{ref:t,isInView:n}=ac({threshold:.1});return o.jsxs(ce.section,{className:"py-24 bg-muted/30 relative overflow-hidden",initial:e?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:rt(e)||{duration:.7},children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-primary/5 via-transparent to-transparent pointer-events-none"}),o.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[o.jsxs(ce.div,{className:"text-center mb-16",initial:e?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:rt(e)||{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Problems We Solve"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Transform operational challenges into competitive advantages with AI-powered insights"})]}),o.jsx(ce.div,{ref:t,className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",variants:Hd,initial:"hidden",animate:n?"visible":"hidden",children:J7.map((r,i)=>o.jsx(ce.div,{variants:e?void 0:Go,whileHover:e?{}:{y:-12,scale:1.03},transition:rt(e)||{duration:.3},children:o.jsxs(ue,{className:"card-hover cursor-pointer border-border/50 hover:border-primary bg-card/50 backdrop-blur-sm h-full rounded-2xl shadow-md transition-all relative overflow-hidden group",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},role:"article","aria-label":`Problem: ${r.title}`,children:[o.jsx(ce.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"linear-gradient(45deg, hsl(var(--primary)), hsl(var(--accent)))",padding:"1px"},initial:!1,children:o.jsx("div",{className:"w-full h-full bg-card/50 backdrop-blur-sm rounded-2xl"})}),o.jsx(ve,{className:"relative z-10",children:o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx(ce.div,{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${r.bgGradient} flex items-center justify-center tech-glow`,animate:e?{rotate:0}:{rotate:[-2,2,-2]},transition:rt(e)||{duration:4,repeat:1/0,ease:"easeInOut"},whileHover:e?{}:{scale:1.15,rotate:15},children:o.jsx(r.icon,{className:`h-7 w-7 ${r.color}`})}),o.jsx(be,{className:"text-xl",children:r.title})]})}),o.jsxs(pe,{className:"relative z-10 space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r.description}),o.jsx("div",{className:"pt-2 border-t border-border/50",children:o.jsx("p",{className:`text-xs font-semibold ${r.color}`,children:r.impact})})]})]})},i))})]})]})},eq=[{icon:Ky,title:"Operational Cost Reduction",metric:"25-40%",description:"Reduce operational costs by eliminating inefficiencies and automating manual processes.",color:"text-green-500",bgGradient:"from-green-500/20 to-green-500/5"},{icon:Lp,title:"Time Savings",metric:"50-70%",description:"Cut process cycle times in half through intelligent automation and optimization.",color:"text-blue-500",bgGradient:"from-blue-500/20 to-blue-500/5"},{icon:Cf,title:"Resource Optimization",metric:"30-45%",description:"Free up your team to focus on high-value work instead of repetitive tasks.",color:"text-purple-500",bgGradient:"from-purple-500/20 to-purple-500/5"},{icon:vS,title:"Productivity Gains",metric:"35-60%",description:"Boost overall productivity by streamlining workflows and reducing bottlenecks.",color:"text-orange-500",bgGradient:"from-orange-500/20 to-orange-500/5"},{icon:VW,title:"Compliance Improvement",metric:"90-100%",description:"Achieve near-perfect audit compliance and reduce regulatory risk exposure.",color:"text-red-500",bgGradient:"from-red-500/20 to-red-500/5"},{icon:Pf,title:"ROI Timeline",metric:"3-6 months",description:"See measurable returns on investment within the first quarter of implementation.",color:"text-primary",bgGradient:"from-primary/20 to-primary/5"}],tq=()=>{const e=li(),{ref:t,isInView:n}=ac({threshold:.1});return o.jsxs(ce.section,{className:"py-24 bg-background relative overflow-hidden",initial:e?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:rt(e)||{duration:.7},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-primary/5 to-transparent pointer-events-none"}),o.jsx(ce.div,{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl",animate:e?{scale:1,opacity:.3}:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:rt(e)||{duration:8,repeat:1/0,ease:"easeInOut"}}),o.jsx(ce.div,{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent/10 rounded-full blur-3xl",animate:e?{scale:1,opacity:.3}:{scale:[1.2,1,1.2],opacity:[.5,.3,.5]},transition:rt(e)||{duration:8,repeat:1/0,ease:"easeInOut"}}),o.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[o.jsxs(ce.div,{className:"text-center mb-16",initial:e?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:rt(e)||{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Measurable Impact"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Real cost savings and efficiency gains our clients achieve with ProssMind"})]}),o.jsx(ce.div,{ref:t,className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",variants:Hd,initial:"hidden",animate:n?"visible":"hidden",children:eq.map((r,i)=>o.jsx(ce.div,{variants:e?void 0:Go,whileHover:e?{}:{y:-12,scale:1.03},transition:rt(e)||{duration:.3},children:o.jsxs(ue,{className:"card-hover cursor-pointer border-border/50 hover:border-primary bg-card/50 backdrop-blur-sm h-full rounded-2xl shadow-md transition-all relative overflow-hidden group",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},role:"article","aria-label":`Savings: ${r.title}`,children:[o.jsx(ce.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"linear-gradient(45deg, hsl(var(--primary)), hsl(var(--accent)))",padding:"1px"},initial:!1,children:o.jsx("div",{className:"w-full h-full bg-card/50 backdrop-blur-sm rounded-2xl"})}),o.jsx(ve,{className:"relative z-10",children:o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx(ce.div,{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${r.bgGradient} flex items-center justify-center tech-glow`,animate:e?{rotate:0}:{rotate:[-2,2,-2]},transition:rt(e)||{duration:4,repeat:1/0,ease:"easeInOut"},whileHover:e?{}:{scale:1.15,rotate:15},children:o.jsx(r.icon,{className:`h-7 w-7 ${r.color}`})}),o.jsx(be,{className:"text-2xl",children:r.title})]})}),o.jsxs(pe,{className:"relative z-10 space-y-4",children:[o.jsx(ce.div,{className:"text-center py-4",whileHover:e?{}:{scale:1.1},transition:rt(e)||{duration:.2},children:o.jsx("p",{className:`text-4xl font-bold ${r.color}`,children:r.metric})}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r.description})]})]})},i))})]})]})},nq=[{name:"ProssMind Light",description:"Perfect for individuals and small teams",features:["Basic automation features","Up to 5 processes","Community support","Basic analytics"]},{name:"ProssMind Vision",description:"Advanced features for growing businesses",features:["All Light features","Unlimited processes","Vision automation","Priority support","Advanced analytics","Custom integrations"],popular:!0},{name:"Custom Models",description:"Enterprise-grade solution",features:["All Vision features","Custom AI models","Dedicated support","On-premise deployment","SLA guarantee","Training & consulting"]}],_S=()=>{const{ref:e,isInView:t}=ac({threshold:.1}),n=li();return o.jsx(ce.section,{className:"py-24 bg-background relative",initial:n?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:n?{}:{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs(ce.div,{className:"text-center mb-16",initial:n?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:n?{}:{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Choose Your Plan"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Select the perfect plan for your business needs"})]}),o.jsx(ce.div,{ref:e,className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",variants:Hd,initial:"hidden",animate:t?"visible":"hidden",children:nq.map((r,i)=>o.jsx(ce.div,{variants:Go,whileHover:{y:-8,rotateY:r.popular?0:2,rotateX:r.popular?0:2,scale:r.popular?1.05:1.02},style:{perspective:1e3},children:o.jsxs(ue,{className:`relative card-hover flex flex-col h-full transition-all ${r.popular?"border-primary shadow-2xl bg-gradient-to-b from-card to-primary/5 hover:border-primary/80":"border-border bg-card/50 backdrop-blur-sm hover:border-primary/50"}`,role:"article","aria-label":`Pricing tier: ${r.name}${r.popular?" - Most Popular":""}`,children:[r.popular&&o.jsxs(ce.div,{className:"absolute -top-4 left-1/2 -translate-x-1/2 z-10",animate:{scale:[1,1.08,1],opacity:[.8,1,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},whileHover:{scale:1.1},children:[o.jsx(ce.span,{className:"bg-gradient-to-r from-primary to-accent text-primary-foreground text-sm font-semibold px-6 py-2 rounded-full shadow-lg block",animate:{boxShadow:["0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 0 20px rgba(37, 99, 235, 0.5)","0 10px 15px -3px rgba(37, 99, 235, 0.3), 0 0 30px rgba(37, 99, 235, 0.8)","0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 0 20px rgba(37, 99, 235, 0.5)"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"Most Popular"}),o.jsx(ce.div,{animate:{scale:[1,1.15,1]},transition:{duration:.3,repeat:1/0,repeatDelay:5,ease:"easeOut"},className:"absolute inset-0",style:{pointerEvents:"none"}})]}),o.jsxs(ve,{className:"text-center pb-8 pt-8 flex-shrink-0",children:[o.jsx(be,{className:"text-2xl mb-3 font-bold",children:r.name}),o.jsx(Te,{className:"text-base",children:r.description})]}),o.jsxs(pe,{className:"flex flex-col flex-grow space-y-8",children:[o.jsx("ul",{className:"space-y-4 flex-grow",children:r.features.map((a,s)=>o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"rounded-full bg-primary/10 p-1 flex-shrink-0",children:o.jsx(si,{className:"h-4 w-4 text-primary"})}),o.jsx("span",{className:"text-sm leading-relaxed",children:a})]},s))}),o.jsx(V,{className:`w-full text-base py-6 mt-auto hover:scale-[1.03] transition-all ${r.popular?"shadow-lg hover:shadow-xl":""}`,variant:r.popular?"default":"outline",size:"lg","aria-label":`Get started with ${r.name}`,children:"Get Started"})]})]})},i))})]})})},rq="https://cdn.prossmind.com/config/partners.json",iq=()=>{const[e,t]=y.useState(null),[n,r]=y.useState(!0),[i,a]=y.useState(null),{ref:s,isInView:c}=ac({threshold:.1}),l=li();if(y.useEffect(()=>{(async()=>{try{let h=await fetch(rq,{method:"GET",headers:{Accept:"application/json"}});if(h.ok||(console.warn("CloudFront URL failed, falling back to local partners.json"),h=await fetch("/partners.json",{method:"GET",headers:{Accept:"application/json"}})),!h.ok)throw new Error(`Failed to fetch partners data: ${h.status}`);const f=await h.json();t(f),a(null)}catch(h){console.error("Error fetching partners data:",h),a(h instanceof Error?h.message:"Failed to load partners")}finally{r(!1)}})()},[]),n)return o.jsx("section",{className:"py-20 md:py-24 bg-background",children:o.jsx("div",{className:"container mx-auto px-6 max-w-7xl",children:o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx(Ir,{className:"h-8 w-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading partners..."})]})})});if(i||!e)return o.jsx("section",{className:"py-20 md:py-24 bg-background",children:o.jsx("div",{className:"container mx-auto px-6 max-w-7xl",children:o.jsxs("div",{className:"flex items-center justify-center py-12 text-muted-foreground",children:[o.jsx(qy,{className:"h-6 w-6 mr-2"}),o.jsx("span",{children:"Unable to load partners at this time"})]})})});const u=e.items.filter(d=>d.active).sort((d,h)=>d.priority-h.priority);return o.jsx(ce.section,{className:"py-12 md:py-20 bg-background relative overflow-hidden",initial:l?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:l?{}:{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6 max-w-7xl",children:[o.jsxs(ce.div,{className:"text-center mb-12 md:mb-16",initial:l?{opacity:1,y:0}:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:l?{}:{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-2xl md:text-4xl font-bold mb-3 md:mb-4",children:e.title}),o.jsx("p",{className:"text-base md:text-lg text-muted-foreground max-w-2xl mx-auto",children:e.subtitle})]}),o.jsx(ce.div,{ref:s,className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-5 md:gap-8",initial:{opacity:1},animate:{opacity:1},children:u.length>0?u.map((d,h)=>o.jsx(aq,{partner:d,index:h,prefersReducedMotion:l,isInView:c},d.id)):o.jsx("div",{className:"col-span-full text-center text-muted-foreground",children:"No active partners found"})})]})})},aq=({partner:e,index:t,prefersReducedMotion:n,isInView:r})=>{const[i,a]=y.useState(!1),[s,c]=y.useState(!1);return o.jsxs(ce.div,{className:"group relative flex flex-col items-center cursor-pointer",initial:{opacity:1,y:0},animate:r&&!n?{opacity:1,y:0}:{opacity:1,y:0},transition:{duration:.6,delay:t*.08,ease:[.2,.9,.3,1]},onTouchStart:()=>c(!0),onTouchEnd:()=>c(!1),children:[o.jsxs("a",{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"relative w-full p-6 md:p-8 rounded-xl bg-white backdrop-blur-sm border border-border hover:border-primary/50 transition-all duration-300 min-h-[120px] flex items-center justify-center",style:{transform:s?"scale(0.97)":void 0,transition:"transform 0.12s ease"},"aria-label":`Visit ${e.name} - ${e.role}`,children:[o.jsx("div",{className:"relative w-full h-16 overflow-hidden",children:i?o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center w-full px-2",children:o.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.name})}):o.jsx("img",{src:e.logoUrl,alt:e.name,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-h-[60px] max-w-full object-contain transition-all duration-300 group-hover:scale-105",onError:()=>a(!0),loading:"lazy"})}),o.jsx(ce.div,{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",initial:{opacity:0},whileHover:{opacity:1},children:o.jsx(QW,{className:"h-4 w-4 text-primary"})})]}),o.jsxs("div",{className:"text-center w-full mt-4 px-2",children:[o.jsx("p",{className:"text-sm font-semibold text-foreground mb-1 line-clamp-2",children:e.name}),o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:e.role})]})]})},sq="https://cdn.prossmind.com/config/experts.json",oq=()=>{const[e,t]=y.useState(null),[n,r]=y.useState(!0),[i,a]=y.useState(null),{ref:s,isInView:c}=ac({threshold:.1}),l=li();if(y.useEffect(()=>{(async()=>{try{let h=await fetch(sq,{method:"GET",headers:{Accept:"application/json"}});if(h.ok||(console.warn("CloudFront URL failed, falling back to local experts.json"),h=await fetch("/experts.json",{method:"GET",headers:{Accept:"application/json"}})),!h.ok)throw new Error(`Failed to fetch experts data: ${h.status}`);const f=await h.json();t(f),a(null)}catch(h){console.error("Error fetching experts data:",h),a(h instanceof Error?h.message:"Failed to load experts")}finally{r(!1)}})()},[]),n)return o.jsx("section",{className:"py-20 md:py-24 bg-background",children:o.jsx("div",{className:"container mx-auto px-6 max-w-7xl",children:o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx(Ir,{className:"h-8 w-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading experts..."})]})})});if(i||!e)return o.jsx("section",{className:"py-20 md:py-24 bg-background",children:o.jsx("div",{className:"container mx-auto px-6 max-w-7xl",children:o.jsxs("div",{className:"flex items-center justify-center py-12 text-muted-foreground",children:[o.jsx(qy,{className:"h-6 w-6 mr-2"}),o.jsx("span",{children:"Unable to load experts at this time"})]})})});const u=e.items.filter(d=>d.active).sort((d,h)=>d.priority-h.priority);return o.jsx(ce.section,{className:"py-12 md:py-20 bg-background relative overflow-hidden",initial:l?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:l?{}:{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6 max-w-7xl",children:[o.jsxs(ce.div,{className:"text-center mb-12 md:mb-16",initial:l?{opacity:1,y:0}:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:l?{}:{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-2xl md:text-4xl font-bold mb-3 md:mb-4 text-foreground",children:e.title}),o.jsx("p",{className:"text-base md:text-lg text-muted-foreground max-w-2xl mx-auto",children:e.subtitle})]}),o.jsx(ce.div,{ref:s,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",initial:{opacity:1},animate:{opacity:1},children:u.length>0?u.map((d,h)=>o.jsx(cq,{expert:d,index:h,prefersReducedMotion:l,isInView:c},d.id)):o.jsx("div",{className:"col-span-full text-center text-muted-foreground",children:"No active experts found"})})]})})},cq=({expert:e,index:t,prefersReducedMotion:n,isInView:r})=>{const[i,a]=y.useState(!1);return o.jsxs(ce.div,{className:"group relative flex items-start gap-4 p-6 rounded-xl bg-card/50 backdrop-blur-sm border border-border hover:border-primary/50 transition-all duration-300",initial:{opacity:1,y:0},animate:r&&!n?{opacity:1,y:0}:{opacity:1,y:0},transition:{duration:.6,delay:t*.08,ease:[.2,.9,.3,1]},whileHover:n?{}:{y:-4,boxShadow:"0 0 14px rgba(0, 140, 255, 0.15)"},children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"relative w-20 h-20 rounded-full overflow-hidden bg-muted",children:i?o.jsx("div",{className:"w-full h-full flex items-center justify-center bg-primary/10",children:o.jsx("span",{className:"text-2xl font-bold text-primary",children:e.name.charAt(0)})}):o.jsx("img",{src:e.photoUrl,alt:e.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:()=>a(!0),loading:"lazy"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-base font-semibold text-foreground mb-1 line-clamp-2",children:e.name}),o.jsx("p",{className:"text-sm text-primary font-medium line-clamp-1",children:e.title})]}),e.linkedInUrl&&o.jsx("a",{href:e.linkedInUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 p-2 rounded-lg hover:bg-primary/10 transition-colors duration-200","aria-label":`Visit ${e.name}'s LinkedIn profile`,children:o.jsx(c7,{className:"h-4 w-4 text-primary"})})]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:e.description})]})]})},ea=y.forwardRef(({className:e,...t},n)=>o.jsx("textarea",{className:ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-ring focus-visible:shadow-[0_0_0_1px_hsl(var(--ring)),0_0_8px_hsl(var(--ring)/0.3)] disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));ea.displayName="Textarea";function a_(e,[t,n]){return Math.min(n,Math.max(t,e))}function lq(e,t){return y.useReducer((n,r)=>t[n][r]??n,e)}var jS="ScrollArea",[SD]=Zs(jS),[uq,na]=SD(jS),ED=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...s}=e,[c,l]=y.useState(null),[u,d]=y.useState(null),[h,f]=y.useState(null),[p,m]=y.useState(null),[g,v]=y.useState(null),[x,b]=y.useState(0),[w,_]=y.useState(0),[j,S]=y.useState(!1),[N,P]=y.useState(!1),k=vn(t,A=>l(A)),T=Iy(i);return o.jsx(uq,{scope:n,type:r,dir:T,scrollHideDelay:a,scrollArea:c,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:j,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:N,onScrollbarYEnabledChange:P,onCornerWidthChange:b,onCornerHeightChange:_,children:o.jsx(At.div,{dir:T,...s,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});ED.displayName=jS;var ND="ScrollAreaViewport",PD=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=e,s=na(ND,n),c=y.useRef(null),l=vn(t,c,s.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),o.jsx(At.div,{"data-radix-scroll-area-viewport":"",...a,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});PD.displayName=ND;var cs="ScrollAreaScrollbar",SS=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=na(cs,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:s}=i,c=e.orientation==="horizontal";return y.useEffect(()=>(c?a(!0):s(!0),()=>{c?a(!1):s(!1)}),[c,a,s]),i.type==="hover"?o.jsx(dq,{...r,ref:t,forceMount:n}):i.type==="scroll"?o.jsx(hq,{...r,ref:t,forceMount:n}):i.type==="auto"?o.jsx(kD,{...r,ref:t,forceMount:n}):i.type==="always"?o.jsx(ES,{...r,ref:t}):null});SS.displayName=cs;var dq=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=na(cs,e.__scopeScrollArea),[a,s]=y.useState(!1);return y.useEffect(()=>{const c=i.scrollArea;let l=0;if(c){const u=()=>{window.clearTimeout(l),s(!0)},d=()=>{l=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),o.jsx(nc,{present:n||a,children:o.jsx(kD,{"data-state":a?"visible":"hidden",...r,ref:t})})}),hq=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=na(cs,e.__scopeScrollArea),a=e.orientation==="horizontal",s=Xy(()=>l("SCROLL_END"),100),[c,l]=lq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,i.scrollHideDelay,l]),y.useEffect(()=>{const u=i.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const p=u[d];h!==p&&(l("SCROLL"),s()),h=p};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,a,l,s]),o.jsx(nc,{present:n||c!=="hidden",children:o.jsx(ES,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:lt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:lt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),kD=y.forwardRef((e,t)=>{const n=na(cs,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,s]=y.useState(!1),c=e.orientation==="horizontal",l=Xy(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;s(c?u:d)}},10);return Zu(n.viewport,l),Zu(n.content,l),o.jsx(nc,{present:r||a,children:o.jsx(ES,{"data-state":a?"visible":"hidden",...i,ref:t})})}),ES=y.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=na(cs,e.__scopeScrollArea),a=y.useRef(null),s=y.useRef(0),[c,l]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=RD(c.viewport,c.content),d={...r,sizes:c,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:f=>s.current=f};function h(f,p){return yq(f,s.current,c,p)}return n==="horizontal"?o.jsx(fq,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollLeft,p=t2(f,c,i.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=h(f,i.dir))}}):n==="vertical"?o.jsx(pq,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollTop,p=t2(f,c);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=h(f))}}):null}),fq=y.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=na(cs,e.__scopeScrollArea),[s,c]=y.useState(),l=y.useRef(null),u=vn(t,l,a.onScrollbarXChange);return y.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),o.jsx(AD,{"data-orientation":"horizontal",...i,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Yy(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),ID(f,h)&&d.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:av(s.paddingLeft),paddingEnd:av(s.paddingRight)}})}})}),pq=y.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=na(cs,e.__scopeScrollArea),[s,c]=y.useState(),l=y.useRef(null),u=vn(t,l,a.onScrollbarYChange);return y.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),o.jsx(AD,{"data-orientation":"vertical",...i,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Yy(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),ID(f,h)&&d.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:av(s.paddingTop),paddingEnd:av(s.paddingBottom)}})}})}),[mq,CD]=SD(cs),AD=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:s,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=e,p=na(cs,n),[m,g]=y.useState(null),v=vn(t,k=>g(k)),x=y.useRef(null),b=y.useRef(""),w=p.viewport,_=r.content-r.viewport,j=Pi(d),S=Pi(l),N=Xy(h,10);function P(k){if(x.current){const T=k.clientX-x.current.left,A=k.clientY-x.current.top;u({x:T,y:A})}}return y.useEffect(()=>{const k=T=>{const A=T.target;(m==null?void 0:m.contains(A))&&j(T,_)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[w,m,_,j]),y.useEffect(S,[r,S]),Zu(m,N),Zu(p.content,N),o.jsx(mq,{scope:n,scrollbar:m,hasThumb:i,onThumbChange:Pi(a),onThumbPointerUp:Pi(s),onThumbPositionChange:S,onThumbPointerDown:Pi(c),children:o.jsx(At.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:lt(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),x.current=m.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(k))}),onPointerMove:lt(e.onPointerMove,P),onPointerUp:lt(e.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),iv="ScrollAreaThumb",TD=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=CD(iv,e.__scopeScrollArea);return o.jsx(nc,{present:n||i.hasThumb,children:o.jsx(gq,{ref:t,...r})})}),gq=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,a=na(iv,n),s=CD(iv,n),{onThumbPositionChange:c}=s,l=vn(t,h=>s.onThumbChange(h)),u=y.useRef(void 0),d=Xy(()=>{u.current&&(u.current(),u.current=void 0)},100);return y.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(d(),!u.current){const p=xq(h,c);u.current=p,c()}};return c(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,d,c]),o.jsx(At.div,{"data-state":s.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:lt(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),m=h.clientX-p.left,g=h.clientY-p.top;s.onThumbPointerDown({x:m,y:g})}),onPointerUp:lt(e.onPointerUp,s.onThumbPointerUp)})});TD.displayName=iv;var NS="ScrollAreaCorner",OD=y.forwardRef((e,t)=>{const n=na(NS,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(vq,{...e,ref:t}):null});OD.displayName=NS;var vq=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=na(NS,n),[a,s]=y.useState(0),[c,l]=y.useState(0),u=!!(a&&c);return Zu(i.scrollbarX,()=>{var h;const d=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(d),l(d)}),Zu(i.scrollbarY,()=>{var h;const d=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(d),s(d)}),u?o.jsx(At.div,{...r,ref:t,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function av(e){return e?parseInt(e,10):0}function RD(e,t){const n=e/t;return isNaN(n)?0:n}function Yy(e){const t=RD(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function yq(e,t,n,r="ltr"){const i=Yy(n),a=i/2,s=t||a,c=i-s,l=n.scrollbar.paddingStart+s,u=n.scrollbar.size-n.scrollbar.paddingEnd-c,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return $D([l,u],h)(e)}function t2(e,t,n="ltr"){const r=Yy(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,s=t.content-t.viewport,c=a-r,l=n==="ltr"?[0,s]:[s*-1,0],u=a_(e,l);return $D([0,s],[0,c])(u)}function $D(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function ID(e,t){return e>0&&e<t}var xq=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},s=n.left!==a.left,c=n.top!==a.top;(s||c)&&t(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Xy(e,t){const n=Pi(e),r=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),y.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Zu(e,t){const n=Pi(t);ci(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}var MD=ED,bq=PD,wq=OD;const Ns=y.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(MD,{ref:r,className:ye("relative overflow-hidden",e),...n,children:[o.jsx(bq,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(PS,{}),o.jsx(wq,{})]}));Ns.displayName=MD.displayName;const PS=y.forwardRef(({className:e,orientation:t="vertical",...n},r)=>o.jsx(SS,{ref:r,orientation:t,className:ye("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(TD,{className:"relative flex-1 rounded-full bg-border"})}));PS.displayName=SS.displayName;var _q=e=>{switch(e){case"success":return Eq;case"info":return Pq;case"warning":return Nq;case"error":return kq;default:return null}},jq=Array(12).fill(0),Sq=({visible:e,className:t})=>R.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},R.createElement("div",{className:"sonner-spinner"},jq.map((n,r)=>R.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Eq=R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},R.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Nq=R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},R.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Pq=R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},R.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),kq=R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},R.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Cq=R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},R.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),R.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Aq=()=>{let[e,t]=R.useState(document.hidden);return R.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},s_=1,Tq=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:s_++,a=this.toasts.find(c=>c.id===i),s=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:n}),{...c,...e,id:i,dismissible:s,title:n}):c):this.addToast({title:n,...r,dismissible:s,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=n!==void 0,a,s=r.then(async l=>{if(a=["resolve",l],R.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(Rq(l)&&!l.ok){i=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${l.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${l.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){i=!1;let u=typeof t.success=="function"?await t.success(l):t.success,d=typeof t.description=="function"?await t.description(l):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async l=>{if(a=["reject",l],t.error!==void 0){i=!1;let u=typeof t.error=="function"?await t.error(l):t.error,d=typeof t.description=="function"?await t.description(l):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var l;i&&(this.dismiss(n),n=void 0),(l=t.finally)==null||l.call(t)}),c=()=>new Promise((l,u)=>s.then(()=>a[0]==="reject"?u(a[1]):l(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||s_++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ii=new Tq,Oq=(e,t)=>{let n=(t==null?void 0:t.id)||s_++;return ii.addToast({title:e,...t,id:n}),n},Rq=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",$q=Oq,Iq=()=>ii.toasts,Mq=()=>ii.getActiveToasts(),$=Object.assign($q,{success:ii.success,info:ii.info,warning:ii.warning,error:ii.error,custom:ii.custom,message:ii.message,promise:ii.promise,dismiss:ii.dismiss,loading:ii.loading},{getHistory:Iq,getToasts:Mq});function Dq(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Dq(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Jm(e){return e.label!==void 0}var Lq=3,Bq="32px",Fq="16px",n2=4e3,zq=356,Uq=14,Hq=20,Vq=200;function ma(...e){return e.filter(Boolean).join(" ")}function Gq(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var Wq=e=>{var t,n,r,i,a,s,c,l,u,d,h;let{invert:f,toast:p,unstyled:m,interacting:g,setHeights:v,visibleToasts:x,heights:b,index:w,toasts:_,expanded:j,removeToast:S,defaultRichColors:N,closeButton:P,style:k,cancelButtonStyle:T,actionButtonStyle:A,className:O="",descriptionClassName:D="",duration:L,position:G,gap:H,loadingIcon:K,expandByDefault:Z,classNames:q,icons:le,closeButtonAriaLabel:_e="Close toast",pauseWhenPageIsHidden:re}=e,[de,Se]=R.useState(null),[nt,St]=R.useState(null),[Ee,se]=R.useState(!1),[X,ne]=R.useState(!1),[ae,W]=R.useState(!1),[Re,Pe]=R.useState(!1),[Ve,Ct]=R.useState(!1),[qt,tr]=R.useState(0),[Dn,Jr]=R.useState(0),ur=R.useRef(p.duration||L||n2),br=R.useRef(null),yn=R.useRef(null),Lr=w===0,je=w+1<=x,Ge=p.type,We=p.dismissible!==!1,zt=p.className||"",ht=p.descriptionClassName||"",Le=R.useMemo(()=>b.findIndex(st=>st.toastId===p.id)||0,[b,p.id]),en=R.useMemo(()=>{var st;return(st=p.closeButton)!=null?st:P},[p.closeButton,P]),Tt=R.useMemo(()=>p.duration||L||n2,[p.duration,L]),kr=R.useRef(0),Lt=R.useRef(0),fa=R.useRef(0),lo=R.useRef(null),[dr,Bl]=G.split("-"),fh=R.useMemo(()=>b.reduce((st,Dt,un)=>un>=Le?st:st+Dt.height,0),[b,Le]),_m=Aq(),Fl=p.invert||f,qe=Ge==="loading";Lt.current=R.useMemo(()=>Le*H+fh,[Le,fh]),R.useEffect(()=>{ur.current=Tt},[Tt]),R.useEffect(()=>{se(!0)},[]),R.useEffect(()=>{let st=yn.current;if(st){let Dt=st.getBoundingClientRect().height;return Jr(Dt),v(un=>[{toastId:p.id,height:Dt,position:p.position},...un]),()=>v(un=>un.filter(hi=>hi.toastId!==p.id))}},[v,p.id]),R.useLayoutEffect(()=>{if(!Ee)return;let st=yn.current,Dt=st.style.height;st.style.height="auto";let un=st.getBoundingClientRect().height;st.style.height=Dt,Jr(un),v(hi=>hi.find(fi=>fi.toastId===p.id)?hi.map(fi=>fi.toastId===p.id?{...fi,height:un}:fi):[{toastId:p.id,height:un,position:p.position},...hi])},[Ee,p.title,p.description,v,p.id]);let Qr=R.useCallback(()=>{ne(!0),tr(Lt.current),v(st=>st.filter(Dt=>Dt.toastId!==p.id)),setTimeout(()=>{S(p)},Vq)},[p,S,v,Lt]);R.useEffect(()=>{if(p.promise&&Ge==="loading"||p.duration===1/0||p.type==="loading")return;let st;return j||g||re&&_m?(()=>{if(fa.current<kr.current){let Dt=new Date().getTime()-kr.current;ur.current=ur.current-Dt}fa.current=new Date().getTime()})():ur.current!==1/0&&(kr.current=new Date().getTime(),st=setTimeout(()=>{var Dt;(Dt=p.onAutoClose)==null||Dt.call(p,p),Qr()},ur.current)),()=>clearTimeout(st)},[j,g,p,Ge,re,_m,Qr]),R.useEffect(()=>{p.delete&&Qr()},[Qr,p.delete]);function uo(){var st,Dt,un;return le!=null&&le.loading?R.createElement("div",{className:ma(q==null?void 0:q.loader,(st=p==null?void 0:p.classNames)==null?void 0:st.loader,"sonner-loader"),"data-visible":Ge==="loading"},le.loading):K?R.createElement("div",{className:ma(q==null?void 0:q.loader,(Dt=p==null?void 0:p.classNames)==null?void 0:Dt.loader,"sonner-loader"),"data-visible":Ge==="loading"},K):R.createElement(Sq,{className:ma(q==null?void 0:q.loader,(un=p==null?void 0:p.classNames)==null?void 0:un.loader),visible:Ge==="loading"})}return R.createElement("li",{tabIndex:0,ref:yn,className:ma(O,zt,q==null?void 0:q.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,q==null?void 0:q.default,q==null?void 0:q[Ge],(n=p==null?void 0:p.classNames)==null?void 0:n[Ge]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:N,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":Ee,"data-promise":!!p.promise,"data-swiped":Ve,"data-removed":X,"data-visible":je,"data-y-position":dr,"data-x-position":Bl,"data-index":w,"data-front":Lr,"data-swiping":ae,"data-dismissible":We,"data-type":Ge,"data-invert":Fl,"data-swipe-out":Re,"data-swipe-direction":nt,"data-expanded":!!(j||Z&&Ee),style:{"--index":w,"--toasts-before":w,"--z-index":_.length-w,"--offset":`${X?qt:Lt.current}px`,"--initial-height":Z?"auto":`${Dn}px`,...k,...p.style},onDragEnd:()=>{W(!1),Se(null),lo.current=null},onPointerDown:st=>{qe||!We||(br.current=new Date,tr(Lt.current),st.target.setPointerCapture(st.pointerId),st.target.tagName!=="BUTTON"&&(W(!0),lo.current={x:st.clientX,y:st.clientY}))},onPointerUp:()=>{var st,Dt,un,hi;if(Re||!We)return;lo.current=null;let fi=Number(((st=yn.current)==null?void 0:st.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ua=Number(((Dt=yn.current)==null?void 0:Dt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ps=new Date().getTime()-((un=br.current)==null?void 0:un.getTime()),Br=de==="x"?fi:Ua,ei=Math.abs(Br)/ps;if(Math.abs(Br)>=Hq||ei>.11){tr(Lt.current),(hi=p.onDismiss)==null||hi.call(p,p),St(de==="x"?fi>0?"right":"left":Ua>0?"down":"up"),Qr(),Pe(!0),Ct(!1);return}W(!1),Se(null)},onPointerMove:st=>{var Dt,un,hi,fi;if(!lo.current||!We||((Dt=window.getSelection())==null?void 0:Dt.toString().length)>0)return;let Ua=st.clientY-lo.current.y,ps=st.clientX-lo.current.x,Br=(un=e.swipeDirections)!=null?un:Gq(G);!de&&(Math.abs(ps)>1||Math.abs(Ua)>1)&&Se(Math.abs(ps)>Math.abs(Ua)?"x":"y");let ei={x:0,y:0};de==="y"?(Br.includes("top")||Br.includes("bottom"))&&(Br.includes("top")&&Ua<0||Br.includes("bottom")&&Ua>0)&&(ei.y=Ua):de==="x"&&(Br.includes("left")||Br.includes("right"))&&(Br.includes("left")&&ps<0||Br.includes("right")&&ps>0)&&(ei.x=ps),(Math.abs(ei.x)>0||Math.abs(ei.y)>0)&&Ct(!0),(hi=yn.current)==null||hi.style.setProperty("--swipe-amount-x",`${ei.x}px`),(fi=yn.current)==null||fi.style.setProperty("--swipe-amount-y",`${ei.y}px`)}},en&&!p.jsx?R.createElement("button",{"aria-label":_e,"data-disabled":qe,"data-close-button":!0,onClick:qe||!We?()=>{}:()=>{var st;Qr(),(st=p.onDismiss)==null||st.call(p,p)},className:ma(q==null?void 0:q.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(a=le==null?void 0:le.close)!=null?a:Cq):null,p.jsx||y.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:R.createElement(R.Fragment,null,Ge||p.icon||p.promise?R.createElement("div",{"data-icon":"",className:ma(q==null?void 0:q.icon,(s=p==null?void 0:p.classNames)==null?void 0:s.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||uo():null,p.type!=="loading"?p.icon||(le==null?void 0:le[Ge])||_q(Ge):null):null,R.createElement("div",{"data-content":"",className:ma(q==null?void 0:q.content,(c=p==null?void 0:p.classNames)==null?void 0:c.content)},R.createElement("div",{"data-title":"",className:ma(q==null?void 0:q.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?R.createElement("div",{"data-description":"",className:ma(D,ht,q==null?void 0:q.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),y.isValidElement(p.cancel)?p.cancel:p.cancel&&Jm(p.cancel)?R.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||T,onClick:st=>{var Dt,un;Jm(p.cancel)&&We&&((un=(Dt=p.cancel).onClick)==null||un.call(Dt,st),Qr())},className:ma(q==null?void 0:q.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,y.isValidElement(p.action)?p.action:p.action&&Jm(p.action)?R.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||A,onClick:st=>{var Dt,un;Jm(p.action)&&((un=(Dt=p.action).onClick)==null||un.call(Dt,st),!st.defaultPrevented&&Qr())},className:ma(q==null?void 0:q.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function r2(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function qq(e,t){let n={};return[e,t].forEach((r,i)=>{let a=i===1,s=a?"--mobile-offset":"--offset",c=a?Fq:Bq;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=c:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(c)}),n}var Kq=y.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:s,className:c,offset:l,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:m=Lq,toastOptions:g,dir:v=r2(),gap:x=Uq,loadingIcon:b,icons:w,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:j}=e,[S,N]=R.useState([]),P=R.useMemo(()=>Array.from(new Set([r].concat(S.filter(re=>re.position).map(re=>re.position)))),[S,r]),[k,T]=R.useState([]),[A,O]=R.useState(!1),[D,L]=R.useState(!1),[G,H]=R.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=R.useRef(null),Z=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=R.useRef(null),le=R.useRef(!1),_e=R.useCallback(re=>{N(de=>{var Se;return(Se=de.find(nt=>nt.id===re.id))!=null&&Se.delete||ii.dismiss(re.id),de.filter(({id:nt})=>nt!==re.id)})},[]);return R.useEffect(()=>ii.subscribe(re=>{if(re.dismiss){N(de=>de.map(Se=>Se.id===re.id?{...Se,delete:!0}:Se));return}setTimeout(()=>{NH.flushSync(()=>{N(de=>{let Se=de.findIndex(nt=>nt.id===re.id);return Se!==-1?[...de.slice(0,Se),{...de[Se],...re},...de.slice(Se+1)]:[re,...de]})})})}),[]),R.useEffect(()=>{if(d!=="system"){H(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;let re=window.matchMedia("(prefers-color-scheme: dark)");try{re.addEventListener("change",({matches:de})=>{H(de?"dark":"light")})}catch{re.addListener(({matches:Se})=>{try{H(Se?"dark":"light")}catch(nt){console.error(nt)}})}},[d]),R.useEffect(()=>{S.length<=1&&O(!1)},[S]),R.useEffect(()=>{let re=de=>{var Se,nt;i.every(St=>de[St]||de.code===St)&&(O(!0),(Se=K.current)==null||Se.focus()),de.code==="Escape"&&(document.activeElement===K.current||(nt=K.current)!=null&&nt.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[i]),R.useEffect(()=>{if(K.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,le.current=!1)}},[K.current]),R.createElement("section",{ref:t,"aria-label":`${_} ${Z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((re,de)=>{var Se;let[nt,St]=re.split("-");return S.length?R.createElement("ol",{key:re,dir:v==="auto"?r2():v,tabIndex:-1,ref:K,className:c,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":nt,"data-lifted":A&&S.length>1&&!a,"data-x-position":St,style:{"--front-toast-height":`${((Se=k[0])==null?void 0:Se.height)||0}px`,"--width":`${zq}px`,"--gap":`${x}px`,...p,...qq(l,u)},onBlur:Ee=>{le.current&&!Ee.currentTarget.contains(Ee.relatedTarget)&&(le.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||le.current||(le.current=!0,q.current=Ee.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{D||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},S.filter(Ee=>!Ee.position&&de===0||Ee.position===re).map((Ee,se)=>{var X,ne;return R.createElement(Wq,{key:Ee.id,icons:w,index:se,toast:Ee,defaultRichColors:h,duration:(X=g==null?void 0:g.duration)!=null?X:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:m,closeButton:(ne=g==null?void 0:g.closeButton)!=null?ne:s,interacting:D,position:re,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:_e,toasts:S.filter(ae=>ae.position==Ee.position),heights:k.filter(ae=>ae.position==Ee.position),setHeights:T,expandByDefault:a,gap:x,loadingIcon:b,expanded:A,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const DD=()=>{const[e,t]=y.useState(!1),[n,r]=y.useState([{role:"assistant",content:"Hi! I'm ProssMind AI Assistant. I can help you with creating BPMN diagrams, using the interface, or answering any questions. How can I help you today?"}]),[i,a]=y.useState(""),[s,c]=y.useState(!1),l=y.useRef(null),u=y.useRef(null);y.useEffect(()=>{var p;(p=u.current)==null||p.scrollIntoView({behavior:"smooth"})},[n]);const d=async p=>{var g,v,x;const m=[...n,{role:"user",content:p}];r(m),a(""),c(!0);try{const w=await fetch("https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/chatbot",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({messages:m})});if(!w.ok){w.status===429?$.error("Rate limit exceeded. Please try again in a moment."):w.status===402?$.error("AI credits depleted. Please contact support."):$.error("Failed to get response from AI."),c(!1);return}if(!w.body)throw new Error("No response body");const _=w.body.getReader(),j=new TextDecoder;let S="",N="",P=!1;const k=T=>{r(A=>{const O=A[A.length-1];return(O==null?void 0:O.role)==="assistant"?A.map((D,L)=>L===A.length-1?{...D,content:T}:D):[...A,{role:"assistant",content:T}]})};for(;!P;){const{done:T,value:A}=await _.read();if(T)break;S+=j.decode(A,{stream:!0});let O;for(;(O=S.indexOf(`
`))!==-1;){let D=S.slice(0,O);if(S=S.slice(O+1),D.endsWith("\r")&&(D=D.slice(0,-1)),D.startsWith(":")||D.trim()===""||!D.startsWith("data: "))continue;const L=D.slice(6).trim();if(L==="[DONE]"){P=!0;break}try{const H=(x=(v=(g=JSON.parse(L).choices)==null?void 0:g[0])==null?void 0:v.delta)==null?void 0:x.content;H&&(N+=H,k(N))}catch{S=D+`
`+S;break}}}c(!1)}catch(b){console.error("Chat error:",b),$.error("An error occurred. Please try again."),c(!1)}},h=()=>{!i.trim()||s||d(i)},f=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),h())};return o.jsxs(o.Fragment,{children:[!e&&o.jsx(V,{onClick:()=>t(!0),className:"fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-2xl hover:shadow-xl transition-all z-50 animate-fade-in",size:"icon",children:o.jsx(h7,{className:"h-6 w-6"})}),e&&o.jsxs(ue,{className:"fixed bottom-6 right-6 w-96 h-[600px] shadow-2xl flex flex-col z-50 animate-scale-in",children:[o.jsx(ve,{className:"border-b bg-gradient-to-r from-primary to-accent text-primary-foreground",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nu,{className:"h-5 w-5"}),o.jsx(be,{className:"text-lg",children:"ProssMind Assistant"})]}),o.jsx(V,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"text-primary-foreground hover:bg-primary-foreground/20",children:o.jsx(Pa,{className:"h-4 w-4"})})]})}),o.jsxs(pe,{className:"flex-1 flex flex-col p-0",children:[o.jsx(Ns,{className:"flex-1 p-4",ref:l,children:o.jsxs("div",{className:"space-y-4",children:[n.map((p,m)=>o.jsxs("div",{className:`flex gap-3 ${p.role==="user"?"justify-end":"justify-start"}`,children:[p.role==="assistant"&&o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx(Nu,{className:"h-4 w-4 text-primary"})}),o.jsx("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 ${p.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.content})}),p.role==="user"&&o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:o.jsx(kf,{className:"h-4 w-4 text-primary-foreground"})})]},m)),o.jsx("div",{ref:u})]})}),o.jsx("div",{className:"border-t p-4",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ea,{value:i,onChange:p=>a(p.target.value),onKeyDown:f,placeholder:"Ask me anything about ProssMind...",className:"resize-none min-h-[60px]",disabled:s}),o.jsx(V,{onClick:h,disabled:!i.trim()||s,size:"icon",className:"h-[60px] w-[60px] flex-shrink-0",children:o.jsx(mS,{className:"h-5 w-5"})})]})})]})]})]})},sv=()=>{const{ref:e,isInView:t}=ac({threshold:.1});return o.jsx("footer",{className:"border-t border-border bg-background",children:o.jsxs("div",{className:"container mx-auto px-6 py-12",children:[o.jsxs(ce.div,{ref:e,className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",variants:Hd,initial:"hidden",animate:t?"visible":"hidden",children:[o.jsxs(ce.div,{variants:Go,children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Product"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsxs(Hn,{to:"/features",className:"hover:text-foreground transition-colors relative group",children:["Features",o.jsx(ce.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs(Hn,{to:"/pricing",className:"hover:text-foreground transition-colors relative group",children:["Pricing",o.jsx(ce.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs("a",{href:i_("docs"),className:"hover:text-foreground transition-colors relative group",children:["Documentation",o.jsx(ce.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs("a",{href:i_("status"),className:"hover:text-foreground transition-colors relative group",children:["Status",o.jsx(ce.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})})]})]}),o.jsxs(ce.div,{variants:Go,children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Legal"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsxs(Hn,{to:"/privacy",className:"hover:text-foreground transition-colors relative group",children:["Privacy Policy",o.jsx(ce.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs(Hn,{to:"/terms",className:"hover:text-foreground transition-colors relative group",children:["Terms of Service",o.jsx(ce.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs(Hn,{to:"/contact",className:"hover:text-foreground transition-colors relative group",children:["Contact",o.jsx(ce.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})})]})]}),o.jsxs(ce.div,{variants:Go,children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Company"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsxs(Hn,{to:"/about",className:"hover:text-foreground transition-colors relative group",children:["About Us",o.jsx(ce.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs(Hn,{to:"/contact",className:"hover:text-foreground transition-colors relative group",children:["Contact Us",o.jsx(ce.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})})]})]})]}),o.jsx("div",{className:"flex flex-wrap items-center gap-4 justify-center md:justify-start mb-8 pb-8 border-b border-border",children:o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 border border-primary/20",children:[o.jsx(u7,{className:"h-4 w-4 text-primary","aria-hidden":"true"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"Swiss Hosted"})]})}),o.jsx("div",{className:"text-sm text-muted-foreground text-center",children:o.jsxs("p",{children:[" ",new Date().getFullYear()," ProssMind. All rights reserved."]})})]})})},Yq=TH,Xq=OH,LD=y.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>o.jsx(AH,{children:o.jsx(zI,{ref:i,align:t,sideOffset:n,className:ye("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));LD.displayName=zI.displayName;const BD=()=>{const e=li(),t=[{icon:hD,label:"Swiss Hosted",title:"Swiss Hosted Infrastructure",description:"All data is hosted in Switzerland, ensuring maximum privacy and data sovereignty. Our infrastructure complies with Swiss data protection laws.",link:"#"}];return o.jsx("div",{className:"bg-muted/50 dark:bg-muted/30 py-2 text-sm text-muted-foreground text-center border-b border-border/50",children:o.jsx("div",{className:"container mx-auto px-6",children:o.jsx("div",{className:"flex items-center justify-center gap-6 flex-wrap",children:t.map((n,r)=>o.jsxs(Yq,{children:[o.jsx(Xq,{asChild:!0,children:o.jsxs(ce.button,{className:"flex items-center gap-2 hover:text-foreground transition-colors cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded px-2 py-1",whileHover:e?{}:{scale:1.05},whileTap:e?{}:{scale:.95},"aria-label":`Learn more about ${n.label}`,children:[o.jsx(n.icon,{className:"h-4 w-4","aria-hidden":"true"}),o.jsx("span",{children:n.label})]})}),o.jsx(LD,{className:"w-80",side:"bottom",align:"center",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-semibold text-sm",children:n.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})]},r))})})})},Zq=24*60*60*1e3,Jq=()=>{const[e,t]=y.useState(!1),[n,r]=y.useState(!1),[i,a]=y.useState(null);y.useEffect(()=>{const h=localStorage.getItem("cookieConsent")??null,f=localStorage.getItem("cookieBannerDismissed"),p=f&&Date.now()-new Date(f).getTime()<Zq;if((h==="accepted"||h==="declined")&&(a(h),L0(h==="accepted")),!h||!p){const m=setTimeout(()=>t(!0),1e3);return()=>clearTimeout(m)}},[]);const s=h=>{h&&(localStorage.setItem("cookieConsent",h),localStorage.setItem("cookieConsentTimestamp",new Date().toISOString()),a(h))},c=async()=>{r(!0);try{s("accepted"),await L0(!0),t(!1)}catch(h){console.error("Error saving cookie consent:",h)}finally{r(!1)}},l=async()=>{r(!0);try{s("declined"),await L0(!1),t(!1)}catch(h){console.error("Error saving cookie consent:",h)}finally{r(!1)}},u=()=>{t(!1),localStorage.setItem("cookieBannerDismissed",new Date().toISOString())},d=()=>{localStorage.removeItem("cookieBannerDismissed"),t(!0)};return o.jsxs(o.Fragment,{children:[e&&o.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 pointer-events-none",children:o.jsxs(ue,{className:"max-w-4xl mx-auto shadow-lg pointer-events-auto border-2",children:[o.jsx(pe,{className:"pt-6",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cookie Consent"}),o.jsx(Te,{className:"text-sm",children:'We use cookies to enhance your browsing experience, analyze site traffic, and understand where our visitors come from. By clicking "Accept", you consent to our use of cookies for tracking and analytics purposes.'})]}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:u,disabled:n,children:o.jsx(Pa,{className:"h-4 w-4"})})]})}),o.jsxs(jD,{className:"flex gap-2 justify-end",children:[o.jsx(V,{variant:"outline",onClick:l,disabled:n,children:"Decline"}),o.jsx(V,{onClick:c,disabled:n,children:n?"Saving...":"Accept"})]})]})}),o.jsx(V,{variant:"outline",size:"sm",className:"fixed bottom-4 right-4 z-40 shadow-lg bg-background/80 backdrop-blur",onClick:d,children:"Cookie Preferences"})]})};async function L0(e){var t;try{let n=sessionStorage.getItem("visitorSessionId");n||(n=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("visitorSessionId",n));const{data:{user:r}}=await oe.auth.getUser(),i={session_id:n,user_id:(r==null?void 0:r.id)||null,landing_page:window.location.href,referrer:document.referrer||null,user_agent:navigator.userAgent,language:navigator.language||((t=navigator.languages)==null?void 0:t[0])||null,screen_resolution:`${window.screen.width}x${window.screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,cookie_consent:e,consent_timestamp:new Date().toISOString()},{data:a,error:s}=await oe.functions.invoke("track-visitor",{body:i});s&&console.error("Error tracking visitor:",s)}catch(n){console.error("Error in trackVisitor:",n)}}const Qq=()=>{const[e,t]=y.useState(null),[n,r]=y.useState(!0);return y.useEffect(()=>{const{data:{subscription:i}}=oe.auth.onAuthStateChange((a,s)=>{t((s==null?void 0:s.user)??null),r(!1)});return oe.auth.getSession().then(({data:{session:a}})=>{t((a==null?void 0:a.user)??null),r(!1)}),()=>{i.unsubscribe()}},[]),n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{user:e}),o.jsx(BD,{}),o.jsx(wD,{}),o.jsx(_D,{}),o.jsx(Z7,{}),o.jsx(Q7,{}),o.jsx(tq,{}),o.jsx(iq,{}),o.jsx(oq,{}),o.jsx(_S,{}),o.jsx(DD,{}),o.jsx(sv,{}),o.jsx(Jq,{})]})},Bt=({children:e,className:t})=>o.jsx("div",{className:ye("max-w-[1200px] mx-auto p-4 md:p-8",t),children:e}),eK=[{icon:Nu,title:"AI Agent Generator",description:"Create intelligent agents that can automate complex workflows and tasks with advanced machine learning capabilities.",benefits:["Natural language processing","Self-learning algorithms","Multi-task handling"]},{icon:$i,title:"Process Generator",description:"Design and build automated business processes with powerful AI capabilities and intuitive visual tools. Download BPMN diagrams and integrate seamlessly with SAP Signavio, Camunda, Flowable, and more.",benefits:["Visual process builder","Real-time monitoring","Automatic optimization","Export BPMN diagrams","Integration with SAP Signavio, Camunda, Flowable"]},{icon:Da,title:"Vision Automation",description:"Automate visual tasks with advanced computer vision and image processing powered by state-of-the-art AI.",benefits:["Image recognition","OCR capabilities"]},{icon:yS,title:"Lightning Fast",description:"Process automation that runs at incredible speeds with minimal latency and maximum efficiency.",benefits:["Sub-second response","Real-time processing","Edge computing"]},{icon:Jo,title:"Enterprise Security",description:"Bank-level security with end-to-end encryption, ensuring your data and processes are always protected.",benefits:["256-bit encryption","End-to-end encryption","Secure data storage"]},{icon:n7,title:"Performance Analytics",description:"Deep insights into your automation performance with comprehensive analytics and reporting tools.",benefits:["Real-time dashboards","Custom reports","Predictive insights"]}],tK=()=>{const e=li();return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{}),o.jsx("main",{className:"pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Powerful ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Features"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Everything you need to automate your business processes with cutting-edge AI technology"})]}),o.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:eK.map((t,n)=>o.jsx(ce.div,{whileHover:e?{}:{y:-12,rotateY:2,rotateX:2,scale:1.03},transition:rt(e)||{duration:.3},style:{perspective:1e3},children:o.jsxs(ue,{className:"card-hover cursor-pointer border-border/50 hover:border-primary bg-card/50 backdrop-blur-sm flex flex-col h-full rounded-2xl shadow-md transition-all relative overflow-hidden group",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},role:"article","aria-label":`Feature: ${t.title}`,children:[o.jsx(ce.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"linear-gradient(45deg, hsl(var(--primary)), hsl(var(--accent)))",padding:"1px"},initial:!1,children:o.jsx("div",{className:"w-full h-full bg-card/50 backdrop-blur-sm rounded-2xl"})}),o.jsxs(ve,{className:"flex-shrink-0 relative z-10",children:[o.jsxs(ce.div,{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mb-4 relative",animate:e?{rotate:0}:{rotate:[-2,2,-2]},transition:rt(e)||{duration:4,repeat:1/0,ease:"easeInOut"},whileHover:e?{}:{scale:1.15,rotate:15,filter:"brightness(1.3)"},children:[o.jsx(ce.div,{whileHover:e?{}:{scale:1.2},transition:rt(e)||{duration:.2},style:{filter:"drop-shadow(0 0 20px hsl(var(--primary)))"},children:o.jsx(t.icon,{className:"h-7 w-7 text-primary"})}),o.jsx(ce.div,{className:"absolute inset-0 rounded-xl bg-primary/20 blur-xl",animate:e?{scale:1,opacity:0}:{scale:[1,1.3,1],opacity:[0,.8,0]},transition:rt(e)||{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),o.jsx(be,{className:"text-2xl mb-2",children:t.title}),o.jsx(Te,{className:"text-base mt-2",children:t.description})]}),o.jsx(pe,{className:"flex-grow flex flex-col relative z-10",children:o.jsx("ul",{className:"space-y-2",children:t.benefits.map((r,i)=>o.jsxs("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),r]},i))})})]})},n))})]})})]})},nK="modulepreload",rK=function(e){return"/"+e},i2={},Pu=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=rK(l),l in i2)return;i2[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":nK,u||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})},Xn=Vj,iK=Hj,FD=y.forwardRef(({className:e,...t},n)=>o.jsx(Pp,{ref:n,className:ye("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));FD.displayName=Pp.displayName;const Bn=y.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(iK,{children:[o.jsx(FD,{}),o.jsxs(kp,{ref:r,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,o.jsxs($y,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(Pa,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Bn.displayName=kp.displayName;const Fn=({className:e,...t})=>o.jsx("div",{className:ye("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Fn.displayName="DialogHeader";const ov=({className:e,...t})=>o.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ov.displayName="DialogFooter";const zn=y.forwardRef(({className:e,...t},n)=>o.jsx(Cp,{ref:n,className:ye("text-lg font-semibold leading-none tracking-tight",e),...t}));zn.displayName=Cp.displayName;const Un=y.forwardRef(({className:e,...t},n)=>o.jsx(Ap,{ref:n,className:ye("text-sm text-muted-foreground",e),...t}));Un.displayName=Ap.displayName;var Zy="Tabs",[aK]=Zs(Zy,[UI]),zD=UI(),[sK,kS]=aK(Zy),UD=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:c,activationMode:l="automatic",...u}=e,d=Iy(c),[h,f]=Zo({prop:r,onChange:i,defaultProp:a??"",caller:Zy});return o.jsx(sK,{scope:n,baseId:Ld(),value:h,onValueChange:f,orientation:s,dir:d,activationMode:l,children:o.jsx(At.div,{dir:d,"data-orientation":s,...u,ref:t})})});UD.displayName=Zy;var HD="TabsList",VD=y.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,a=kS(HD,n),s=zD(n);return o.jsx(RH,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(At.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});VD.displayName=HD;var GD="TabsTrigger",WD=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=e,s=kS(GD,n),c=zD(n),l=YD(s.baseId,r),u=XD(s.baseId,r),d=r===s.value;return o.jsx($H,{asChild:!0,...c,focusable:!i,active:d,children:o.jsx(At.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...a,ref:t,onMouseDown:lt(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:lt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:lt(e.onFocus,()=>{const h=s.activationMode!=="manual";!d&&!i&&h&&s.onValueChange(r)})})})});WD.displayName=GD;var qD="TabsContent",KD=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...s}=e,c=kS(qD,n),l=YD(c.baseId,r),u=XD(c.baseId,r),d=r===c.value,h=y.useRef(d);return y.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),o.jsx(nc,{present:i||d,children:({present:f})=>o.jsx(At.div,{"data-state":d?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});KD.displayName=qD;function YD(e,t){return`${e}-trigger-${t}`}function XD(e,t){return`${e}-content-${t}`}var ZD=UD,Jy=VD,Qy=WD,ex=KD;const oK=ZD,JD=y.forwardRef(({className:e,...t},n)=>o.jsx(Jy,{ref:n,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground relative gap-1",e),...t}));JD.displayName=Jy.displayName;const o_=y.forwardRef(({className:e,children:t,...n},r)=>{const i=y.useRef(null),[a,s]=y.useState(!1);return y.useImperativeHandle(r,()=>i.current),y.useEffect(()=>{const c=()=>{i.current&&s(i.current.getAttribute("data-state")==="active")};c();const l=new MutationObserver(c);return i.current&&l.observe(i.current,{attributes:!0,attributeFilter:["data-state"]}),()=>l.disconnect()},[]),o.jsxs(Qy,{ref:i,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 relative z-10 flex-1","data-[state=active]:text-foreground","hover:text-foreground/90",e),...n,children:[o.jsx("span",{className:"relative z-10 flex items-center justify-center w-full",children:t}),a&&o.jsx(ce.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",initial:!1,transition:{type:"spring",stiffness:380,damping:30,duration:.4}})]})});o_.displayName=Qy.displayName;const c_=y.forwardRef(({className:e,...t},n)=>{const[r,i]=y.useState(1),a=y.useRef();return y.useEffect(()=>{if(a.current&&t.value){const s=parseInt(a.current)||0,c=parseInt(t.value)||0;i(c>s?1:-1)}a.current=t.value},[t.value]),o.jsx(DI,{mode:"wait",custom:r,children:o.jsx(ex,{ref:n,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t,asChild:!0,children:o.jsx(ce.div,{custom:r,initial:{opacity:0,x:r*20},animate:{opacity:1,x:0},exit:{opacity:0,x:r*-20},transition:{opacity:{duration:.3},x:{duration:.2},ease:"easeInOut"},children:t.children})},t.value)})});c_.displayName=ex.displayName;function cK(e,t=[]){let n=[];function r(a,s){const c=y.createContext(s);c.displayName=a+"Context";const l=n.length;n=[...n,s];const u=h=>{var x;const{scope:f,children:p,...m}=h,g=((x=f==null?void 0:f[e])==null?void 0:x[l])||c,v=y.useMemo(()=>m,Object.values(m));return o.jsx(g.Provider,{value:v,children:p})};u.displayName=a+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[e])==null?void 0:g[l])||c,m=y.useContext(p);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=n.map(s=>y.createContext(s));return function(c){const l=(c==null?void 0:c[e])||a;return y.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return i.scopeName=e,[r,lK(i,...t)]}function lK(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((c,{useScope:l,scopeName:u})=>{const h=l(a)[`__scope${u}`];return{...c,...h}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var uK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],QD=uK.reduce((e,t)=>{const n=Mp(`Primitive.${t}`),r=y.forwardRef((i,a)=>{const{asChild:s,...c}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),CS="Progress",AS=100,[dK]=cK(CS),[hK,fK]=dK(CS),e5=y.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=pK,...s}=e;(i||i===0)&&!a2(i)&&console.error(mK(`${i}`,"Progress"));const c=a2(i)?i:AS;r!==null&&!s2(r,c)&&console.error(gK(`${r}`,"Progress"));const l=s2(r,c)?r:null,u=cv(l)?a(l,c):void 0;return o.jsx(hK,{scope:n,value:l,max:c,children:o.jsx(QD.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":cv(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":r5(l,c),"data-value":l??void 0,"data-max":c,...s,ref:t})})});e5.displayName=CS;var t5="ProgressIndicator",n5=y.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=fK(t5,n);return o.jsx(QD.div,{"data-state":r5(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});n5.displayName=t5;function pK(e,t){return`${Math.round(e/t*100)}%`}function r5(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function cv(e){return typeof e=="number"}function a2(e){return cv(e)&&!isNaN(e)&&e>0}function s2(e,t){return cv(e)&&!isNaN(e)&&e<=t&&e>=0}function mK(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${AS}\`.`}function gK(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${AS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var i5=e5,vK=n5;const Ds=y.forwardRef(({className:e,value:t,...n},r)=>o.jsx(i5,{ref:r,className:ye("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:o.jsx(vK,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ds.displayName=i5.displayName;async function a5(e,t=1920,n=1920,r=.85,i=500){return new Promise((a,s)=>{const c=new FileReader;c.onload=l=>{var d;const u=new Image;u.onload=()=>{const h=document.createElement("canvas");let f=u.width,p=u.height;if(f>t||p>n){const g=Math.min(t/f,n/p);f=f*g,p=p*g}h.width=f,h.height=p;const m=h.getContext("2d");if(!m){s(new Error("Could not get canvas context"));return}m.drawImage(u,0,0,f,p),h.toBlob(g=>{if(!g){s(new Error("Failed to compress image"));return}g.size>i*1024&&r>.5?h.toBlob(v=>{if(!v){a(new File([g],e.name,{type:e.type}));return}a(new File([v],e.name,{type:e.type}))},e.type,r*.7):a(new File([g],e.name,{type:e.type}))},e.type,r)},u.onerror=()=>s(new Error("Failed to load image")),u.src=(d=l.target)==null?void 0:d.result},c.onerror=()=>s(new Error("Failed to read file")),c.readAsDataURL(e)})}async function s5(e,t=!0){let n=e;if(t&&e.type.startsWith("image/"))try{n=await a5(e)}catch(r){console.warn("Image compression failed, using original:",r)}return new Promise((r,i)=>{const a=new FileReader;a.onload=()=>{const s=a.result,c=s.includes(",")?s.split(",")[1]:s;r(c)},a.onerror=()=>i(new Error("Failed to read file")),a.readAsDataURL(n)})}function o5(e,t=500){return e.size>t*1024&&e.type.startsWith("image/")}const l_=Object.freeze(Object.defineProperty({__proto__:null,compressImage:a5,fileToBase64:s5,shouldCompressImage:o5},Symbol.toStringTag,{value:"Module"})),B0=new Map,yK=6e4;function xK(e,t){const n=B0.get(e);if(n&&Date.now()-n.timestamp<yK)return n.promise;const r=t().finally(()=>{B0.delete(e)});return B0.set(e,{promise:r,timestamp:Date.now()}),r}function bK(e,t){const n=Object.keys(t).sort().map(r=>`${r}:${JSON.stringify(t[r])}`).join("|");return`${e}:${n}`}async function c5(e,t,n){const{deduplicate:r=!0,timeout:i=6e4}=n||{},a=async()=>{var s;try{const c=new AbortController,l=setTimeout(()=>c.abort(),i),{data:u,error:d}=await oe.functions.invoke(e,{body:t,signal:c.signal});return clearTimeout(l),d?{error:{message:d.message||"Unknown error",code:(s=d.status)==null?void 0:s.toString()}}:{data:u}}catch(c){return c instanceof Error&&c.name==="AbortError"?{error:{message:"Request timeout",code:"TIMEOUT"}}:{error:{message:c instanceof Error?c.message:"Unknown error"}}}};if(r){const s=bK(e,t);return xK(s,a)}return a()}const TS=Object.freeze(Object.defineProperty({__proto__:null,invokeFunction:c5},Symbol.toStringTag,{value:"Module"})),l5=()=>{const e=Mi(),[t,n]=y.useState(null),[r,i]=y.useState(null),[a,s]=y.useState(!0),[c,l]=y.useState(!1),[u,d]=y.useState(null),[h,f]=y.useState(!1),[p,m]=y.useState(null),[g,v]=y.useState("bpmn"),[x,b]=y.useState(0),[w,_]=y.useState(""),[j,S]=y.useState(null);y.useEffect(()=>{const{data:{subscription:O}}=oe.auth.onAuthStateChange((D,L)=>{i(L),n((L==null?void 0:L.user)??null),s(!1)});return oe.auth.getSession().then(({data:{session:D}})=>{i(D),n((D==null?void 0:D.user)??null),s(!1)}),()=>O.unsubscribe()},[]);const N=!!t;y.useEffect(()=>{if(!p)return;let O;const D=async()=>{const{data:H,error:K}=await oe.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",p).single();if(K){console.error("Error checking job status:",K);return}if(console.log("Job status:",H.status),H.status==="completed"&&H.bpmn_xml){const Z=g==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(Z,H.bpmn_xml),localStorage.setItem("diagramType",g);const q=g==="bpmn"?"BPMN":"P&ID";b(100),_("Complete!");const le=g==="bpmn"?"/bpmn-generator":"/pid-generator";$.success(`${q} diagram generated successfully!`,{description:"Redirecting to editor..."}),setTimeout(()=>{Gn(e,le)},1e3),l(!1),d(null),f(!1),m(null),S(null),O&&clearInterval(O)}else if(H.status==="failed"){const Z=H.error_message||"Please try again";S(Z),$.error("Upload failed  retry or contact support",{description:Z,action:{label:"Retry",onClick:()=>{S(null),u&&A()}},duration:1e4}),f(!1),m(null),b(0),_(""),O&&clearInterval(O)}},L=oe.channel(`job-${p}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${p}`},H=>{const K=H.new;if(console.log("Realtime job status update:",K.status),K.status==="completed"&&K.bpmn_xml){const Z=g==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(Z,K.bpmn_xml),localStorage.setItem("diagramType",g);const q=g==="bpmn"?"BPMN":"P&ID";b(100),_("Complete!");const le=g==="bpmn"?"/bpmn-generator":"/pid-generator";$.success(`${q} diagram generated successfully!`,{description:"Redirecting to editor..."}),setTimeout(()=>{Gn(e,le)},1e3),l(!1),d(null),f(!1),m(null),S(null),O&&clearInterval(O)}else if(K.status==="failed"){const Z=K.error_message||"Please try again";S(Z),$.error("Upload failed  retry or contact support",{description:Z,action:{label:"Retry",onClick:()=>{S(null),u&&A()}},duration:1e4}),f(!1),m(null),b(0),_(""),O&&clearInterval(O)}}).subscribe();O=window.setInterval(D,3e3),D();const G=window.setTimeout(()=>{O&&clearInterval(O);const H="Processing timed out - Please try refreshing the page or contact support";S(H),b(0),_(""),$.error("Upload failed  retry or contact support",{description:H,action:{label:"Retry",onClick:()=>{S(null),u&&A()}},duration:1e4}),f(!1),m(null)},3e5);return()=>{clearTimeout(G),oe.removeChannel(L),O&&clearInterval(O)}},[p,g,u]);const P=()=>{if(!N){$.error("Authentication required",{description:"Please sign in to access Vision AI features"}),Gn(e,"/auth");return}l(!0)},k=()=>{Gn(e,"/auth")},T=O=>{var L;const D=(L=O.target.files)==null?void 0:L[0];if(D){if(D.size>209715200){$.error("File too large",{description:"Maximum file size is 200 MB. Please select a smaller file."}),O.target.value="";return}d(D),S(null),b(10),_("File selected, ready to upload...")}},A=async()=>{if(h)return;if(!u){$.error("Please select a file");return}f(!0),S(null),b(10),_("Analyzing frame 1 of 20...");const O=$.loading("Processing your file...",{description:"This may take 30-60 seconds for complex diagrams"});try{const{data:{user:D},error:L}=await oe.auth.getUser();if(!D||L){$.dismiss(O);const q=(L==null?void 0:L.message)||"Please log in to use this feature";S(q),$.error("Upload failed  retry or contact support",{description:q,action:{label:"Retry",onClick:()=>{S(null),A()}},duration:1e4}),f(!1),b(0),_(""),Gn(e,"/auth");return}let G=u;if(o5(u)){$.info("Compressing image for faster upload...");try{const{compressImage:q}=await Pu(async()=>{const{compressImage:le}=await Promise.resolve().then(()=>l_);return{compressImage:le}},void 0);G=await q(u)}catch(q){console.warn("Image compression failed, using original:",q)}}const H=await s5(G,!1),K=`data:${G.type};base64,${H}`;$.dismiss(O),b(20),_("Uploading file...");const Z=$.loading("Starting diagram generation...",{description:"This will continue in the background"});try{const{data:q,error:le}=await c5("vision-to-bpmn",{imageBase64:K,diagramType:g},{deduplicate:!0});if($.dismiss(Z),le){const _e=le.message||"Failed to start diagram generation";S(_e),b(0),_(""),$.error("Upload failed  retry or contact support",{description:_e,action:{label:"Retry",onClick:()=>{S(null),A()}},duration:1e4}),f(!1);return}if(!q||!q.jobId){const _e="Failed to start processing";S(_e),b(0),_(""),$.error("Upload failed  retry or contact support",{description:_e,action:{label:"Retry",onClick:()=>{S(null),A()}},duration:1e4}),f(!1);return}m(q.jobId),b(30),_("Processing started, analyzing frames..."),$.info("Processing started",{description:"We'll notify you when your diagram is ready (this may take 1-2 minutes)"})}catch{const le="Network error - Please check your connection and try again";S(le),b(0),_(""),$.dismiss(Z),$.error("Upload failed  retry or contact support",{description:le,action:{label:"Retry",onClick:()=>{S(null),A()}},duration:1e4}),f(!1)}}catch(D){const L=D instanceof Error?D.message:"Failed to generate diagram";S(L),b(0),_(""),$.dismiss(O),$.error("Upload failed  retry or contact support",{description:L,action:{label:"Retry",onClick:()=>{S(null),A()}},duration:1e4}),f(!1)}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{}),o.jsx("main",{className:"pt-24 pb-20",children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary/10 mb-6",children:o.jsx(Da,{className:"h-10 w-10 text-primary"})}),o.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Vision ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"AI"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"See what computers see. Our advanced vision AI technology enables your automation to understand and process visual information just like humans do."})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mb-20",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Self-Learning Vision System"}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"Our Vision AI continuously learns and adapts to your specific use cases, improving accuracy and performance over time without manual intervention."}),o.jsxs("ul",{className:"space-y-4",children:[o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx(HW,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Real-time Processing"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Process images and video streams in real-time with minimal latency"})]})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx(S7,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Object Detection"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Identify and track multiple objects across frames"})]})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx(ka,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Image Classification"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically categorize and tag visual content"})]})]})]}),N?o.jsx(V,{size:"lg",className:"mt-6",onClick:P,children:"Start Free Trial"}):o.jsxs("div",{className:"mt-6 space-y-3",children:[o.jsxs(V,{size:"lg",onClick:k,className:"w-full sm:w-auto",children:[o.jsx(qk,{className:"h-4 w-4 mr-2"}),"Sign In to Access"]}),o.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[o.jsx(r_,{className:"h-4 w-4"}),"Vision AI requires authentication"]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-accent/10 rounded-2xl p-12 text-center",children:[o.jsx(Da,{className:"h-32 w-32 mx-auto text-primary mb-6"}),o.jsx("h3",{className:"text-xl font-bold mb-4",children:"100% Client-Side Processing"}),o.jsx("p",{className:"text-muted-foreground",children:"All vision processing happens on your device. Your data never leaves your control, ensuring maximum privacy and security."})]})]}),o.jsxs("div",{className:"bg-hero-bg text-hero-foreground rounded-2xl p-12 text-center",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to See the Future?"}),o.jsx("p",{className:"text-xl text-hero-foreground/80 mb-8 max-w-2xl mx-auto",children:"Join thousands of companies already using ProssMind Vision AI to transform their automation workflows"}),N?o.jsx(V,{size:"lg",variant:"secondary",className:"text-lg px-8",onClick:P,children:"Get Started Now"}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs(V,{size:"lg",variant:"secondary",className:"text-lg px-8",onClick:k,children:[o.jsx(qk,{className:"h-5 w-5 mr-2"}),"Sign In to Get Started"]}),o.jsxs("p",{className:"text-sm text-hero-foreground/60 flex items-center justify-center gap-2",children:[o.jsx(r_,{className:"h-4 w-4"}),"Authentication required for Vision AI access"]})]})]})]})}),o.jsx(Xn,{open:c,onOpenChange:l,children:o.jsxs(Bn,{className:"max-w-2xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Upload Your Process"}),o.jsx(Un,{children:"Upload handwritten notes, whiteboard images, process documents, or text files to generate a diagram"})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(oK,{value:g,onValueChange:O=>v(O),className:"w-full",children:[o.jsxs(JD,{className:"grid w-full grid-cols-2",children:[o.jsx(o_,{value:"bpmn",children:"BPMN Diagram"}),o.jsx(o_,{value:"pid",children:"P&ID Diagram"})]}),o.jsxs(c_,{value:"bpmn",className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"bg-card border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:[o.jsx("input",{type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:T,className:"hidden",id:"file-upload",disabled:h}),o.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx(ka,{className:"w-8 h-8 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-lg font-semibold mb-1",children:u?u.name:"Drop your process image or document"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Images, PDF, Word documents, or text files"})]})]}),h&&x>0&&o.jsxs("div",{className:"mt-6 space-y-2",children:[o.jsx(Ds,{value:x,className:"w-full"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:w})]}),j&&o.jsx("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:o.jsx("p",{className:"text-sm text-destructive",children:j})})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(ka,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Images"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"JPG, PNG, WEBP"})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(Wn,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Documents"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"PDF, DOC, DOCX"})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(Wn,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Text"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"TXT files"})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx(V,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),o.jsx(V,{onClick:A,disabled:!u||h,children:h?"Generating...":"Generate BPMN"})]})]}),o.jsxs(c_,{value:"pid",className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"bg-card border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:[o.jsx("input",{type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:T,className:"hidden",id:"file-upload-pid",disabled:h}),o.jsxs("label",{htmlFor:"file-upload-pid",className:"cursor-pointer flex flex-col items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx(ka,{className:"w-8 h-8 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-lg font-semibold mb-1",children:u?u.name:"Drop your process image or document"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Images, PDF, Word documents, or text files"})]})]}),h&&x>0&&o.jsxs("div",{className:"mt-6 space-y-2",children:[o.jsx(Ds,{value:x,className:"w-full"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:w})]}),j&&o.jsx("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:o.jsx("p",{className:"text-sm text-destructive",children:j})})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(ka,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Images"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"JPG, PNG, WEBP"})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(Wn,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Documents"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"PDF, DOC, DOCX"})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(Wn,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Text"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"TXT files"})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx(V,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),o.jsx(V,{onClick:A,disabled:!u||h,children:h?"Generating...":"Generate P&ID"})]})]})]})})]})})]})},wK=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{}),o.jsx("main",{className:"pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Simple, ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Transparent"})," Pricing"]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Choose the plan that fits your needs. All plans include our core automation features."})]}),o.jsx(_S,{}),o.jsxs("div",{className:"mt-20 bg-muted/30 rounded-2xl p-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"All Plans Include"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(si,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"99.9% Uptime SLA"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Reliable service you can count on"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(si,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"24/7 Support"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Help whenever you need it"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(si,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Free Updates"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Always get the latest features"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(si,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Data Encryption"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Bank-level security for your data"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(si,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"API Access"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Integrate with your tools"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(si,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"No Hidden Fees"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"What you see is what you pay"})]})]})]})]})]})})]}),pn=y.forwardRef(({className:e,type:t,...n},r)=>o.jsx("input",{type:t,className:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-ring focus-visible:shadow-[0_0_0_1px_hsl(var(--ring)),0_0_8px_hsl(var(--ring)/0.3)] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));pn.displayName="Input";function _K(e,t=[]){let n=[];function r(a,s){const c=y.createContext(s);c.displayName=a+"Context";const l=n.length;n=[...n,s];const u=h=>{var x;const{scope:f,children:p,...m}=h,g=((x=f==null?void 0:f[e])==null?void 0:x[l])||c,v=y.useMemo(()=>m,Object.values(m));return o.jsx(g.Provider,{value:v,children:p})};u.displayName=a+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[e])==null?void 0:g[l])||c,m=y.useContext(p);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=n.map(s=>y.createContext(s));return function(c){const l=(c==null?void 0:c[e])||a;return y.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return i.scopeName=e,[r,jK(i,...t)]}function jK(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((c,{useScope:l,scopeName:u})=>{const h=l(a)[`__scope${u}`];return{...c,...h}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var SK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],OS=SK.reduce((e,t)=>{const n=Mp(`Primitive.${t}`),r=y.forwardRef((i,a)=>{const{asChild:s,...c}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),u5={exports:{}},d5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju=y;function EK(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var NK=typeof Object.is=="function"?Object.is:EK,PK=Ju.useState,kK=Ju.useEffect,CK=Ju.useLayoutEffect,AK=Ju.useDebugValue;function TK(e,t){var n=t(),r=PK({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return CK(function(){i.value=n,i.getSnapshot=t,F0(i)&&a({inst:i})},[e,n,t]),kK(function(){return F0(i)&&a({inst:i}),e(function(){F0(i)&&a({inst:i})})},[e]),AK(n),n}function F0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!NK(e,n)}catch{return!0}}function OK(e,t){return t()}var RK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?OK:TK;d5.useSyncExternalStore=Ju.useSyncExternalStore!==void 0?Ju.useSyncExternalStore:RK;u5.exports=d5;var $K=u5.exports;function IK(){return $K.useSyncExternalStore(MK,()=>!0,()=>!1)}function MK(){return()=>{}}var RS="Avatar",[DK]=_K(RS),[LK,h5]=DK(RS),f5=y.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,a]=y.useState("idle");return o.jsx(LK,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:o.jsx(OS.span,{...r,ref:t})})});f5.displayName=RS;var p5="AvatarImage",m5=y.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,s=h5(p5,n),c=BK(r,a),l=Pi(u=>{i(u),s.onImageLoadingStatusChange(u)});return ci(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?o.jsx(OS.img,{...a,ref:t,src:r}):null});m5.displayName=p5;var g5="AvatarFallback",v5=y.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,a=h5(g5,n),[s,c]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(l)}},[r]),s&&a.imageLoadingStatus!=="loaded"?o.jsx(OS.span,{...i,ref:t}):null});v5.displayName=g5;function o2(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function BK(e,{referrerPolicy:t,crossOrigin:n}){const r=IK(),i=y.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[s,c]=y.useState(()=>o2(a,e));return ci(()=>{c(o2(a,e))},[a,e]),ci(()=>{const l=h=>()=>{c(h)};if(!a)return;const u=l("loaded"),d=l("error");return a.addEventListener("load",u),a.addEventListener("error",d),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,n,t]),s}var y5=f5,x5=m5,b5=v5;const FK=y.forwardRef(({className:e,...t},n)=>o.jsx(y5,{ref:n,className:ye("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));FK.displayName=y5.displayName;const zK=y.forwardRef(({className:e,...t},n)=>o.jsx(x5,{ref:n,className:ye("aspect-square h-full w-full object-cover",e),...t}));zK.displayName=x5.displayName;const UK=y.forwardRef(({className:e,...t},n)=>o.jsx(b5,{ref:n,className:ye("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));UK.displayName=b5.displayName;const u_={showTeamSection:!1,showLanguagePreference:!1},HK=()=>{const[e,t]=y.useState({name:"",email:"",subject:"",message:""}),n=r=>{r.preventDefault(),$.success("Message sent! We'll get back to you soon."),t({name:"",email:"",subject:"",message:""})};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{}),o.jsx("main",{className:"pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Get in"," ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Touch"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Have questions? We'd love to hear from you. Send us a message and we'll respond as soon as possible."})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[o.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.02] hover:-translate-y-1",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-all duration-300",children:o.jsx(fS,{className:"h-6 w-6 text-primary"})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Email Us"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"info@prossmind.com"})]}),o.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.02] hover:-translate-y-1",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-all duration-300",children:o.jsx(y7,{className:"h-6 w-6 text-primary"})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Call Us"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"+41 78 330 79 67"})]}),o.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.02] hover:-translate-y-1",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-all duration-300",children:o.jsx(pS,{className:"h-6 w-6 text-primary"})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Live Chat"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Available 24/7"})]})]}),u_.showTeamSection,o.jsx("div",{className:"max-w-2xl mx-auto",children:o.jsxs("form",{onSubmit:n,className:"bg-card border border-border rounded-2xl p-8 space-y-6 transition-all duration-300 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] hover:shadow-blue-500/30",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"Name"}),o.jsx(pn,{id:"name",value:e.name,onChange:r=>t({...e,name:r.target.value}),placeholder:"Your name",className:"transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),o.jsx(pn,{id:"email",type:"email",value:e.email,onChange:r=>t({...e,email:r.target.value}),placeholder:"your@email.com",className:"transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"subject",className:"text-sm font-medium",children:"Subject"}),o.jsx(pn,{id:"subject",value:e.subject,onChange:r=>t({...e,subject:r.target.value}),placeholder:"How can we help?",className:"transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"message",className:"text-sm font-medium",children:"Message"}),o.jsx(ea,{id:"message",value:e.message,onChange:r=>t({...e,message:r.target.value}),placeholder:"Tell us more about your inquiry...",className:"min-h-[150px] transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]}),o.jsx(V,{type:"submit",size:"lg",className:"w-full transition-all duration-300 hover:shadow-[0_0_20px_rgba(59,130,246,0.6)] hover:shadow-blue-500/60 hover:scale-[1.02]",children:"Send Message"})]})})]})})]})};var VK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],GK=VK.reduce((e,t)=>{const n=Mp(`Primitive.${t}`),r=y.forwardRef((i,a)=>{const{asChild:s,...c}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),WK="Label",w5=y.forwardRef((e,t)=>o.jsx(GK.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));w5.displayName=WK;var _5=w5;const qK=Dp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Nt=y.forwardRef(({className:e,...t},n)=>o.jsx(_5,{ref:n,className:ye(qK(),e),...t}));Nt.displayName=_5.displayName;var Ut;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const s of i)a[s]=s;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),s={};for(const c of a)s[c]=i[c];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},e.find=(i,a)=>{for(const s of i)if(a(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Ut||(Ut={}));var c2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(c2||(c2={}));const De=Ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Po=e=>{switch(typeof e){case"undefined":return De.undefined;case"string":return De.string;case"number":return Number.isNaN(e)?De.nan:De.number;case"boolean":return De.boolean;case"function":return De.function;case"bigint":return De.bigint;case"symbol":return De.symbol;case"object":return Array.isArray(e)?De.array:e===null?De.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?De.promise:typeof Map<"u"&&e instanceof Map?De.map:typeof Set<"u"&&e instanceof Set?De.set:typeof Date<"u"&&e instanceof Date?De.date:De.object;default:return De.unknown}},xe=Ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class qs extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},r={_errors:[]},i=a=>{for(const s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let c=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(n(s))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}};return i(this),r}static assert(t){if(!(t instanceof qs))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(t(i))}else r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}qs.create=e=>new qs(e);const d_=(e,t)=>{let n;switch(e.code){case xe.invalid_type:e.received===De.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case xe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Ut.jsonStringifyReplacer)}`;break;case xe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ut.joinValues(e.keys,", ")}`;break;case xe.invalid_union:n="Invalid input";break;case xe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ut.joinValues(e.options)}`;break;case xe.invalid_enum_value:n=`Invalid enum value. Expected ${Ut.joinValues(e.options)}, received '${e.received}'`;break;case xe.invalid_arguments:n="Invalid function arguments";break;case xe.invalid_return_type:n="Invalid function return type";break;case xe.invalid_date:n="Invalid date";break;case xe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Ut.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case xe.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case xe.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case xe.custom:n="Invalid input";break;case xe.invalid_intersection_types:n="Intersection results could not be merged";break;case xe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case xe.not_finite:n="Number must be finite";break;default:n=t.defaultError,Ut.assertNever(e)}return{message:n}};let KK=d_;function YK(){return KK}const XK=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],s={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)c=u(s,{data:t,defaultError:c}).message;return{...i,path:a,message:c}};function Ae(e,t){const n=YK(),r=XK({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===d_?void 0:d_].filter(i=>!!i)});e.common.issues.push(r)}class Ii{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return ft;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const a=await i.key,s=await i.value;r.push({key:a,value:s})}return Ii.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return ft;a.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[a.value]=s.value)}return{status:t.value,value:r}}}const ft=Object.freeze({status:"aborted"}),Qh=e=>({status:"dirty",value:e}),ra=e=>({status:"valid",value:e}),l2=e=>e.status==="aborted",u2=e=>e.status==="dirty",Qu=e=>e.status==="valid",lv=e=>typeof Promise<"u"&&e instanceof Promise;var Be;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Be||(Be={}));class Qo{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const d2=(e,t)=>{if(Qu(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new qs(e.common.issues);return this._error=n,this._error}}};function Pt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(s,c)=>{const{message:l}=e;return s.code==="invalid_enum_value"?{message:l??c.defaultError}:typeof c.data>"u"?{message:l??r??c.defaultError}:s.code!=="invalid_type"?{message:c.defaultError}:{message:l??n??c.defaultError}},description:i}}class Ft{get description(){return this._def.description}_getType(t){return Po(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Po(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ii,ctx:{common:t.parent.common,data:t.data,parsedType:Po(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(lv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Po(t)},i=this._parseSync({data:t,path:r.path,parent:r});return d2(r,i)}"~validate"(t){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Po(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:n});return Qu(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(a=>Qu(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Po(t)},i=this._parse({data:t,path:r.path,parent:r}),a=await(lv(i)?i:Promise.resolve(i));return d2(r,a)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const s=t(i),c=()=>a.addIssue({code:xe.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(c(),!1)):s?!0:(c(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new td({schema:this,typeName:pt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Wo.create(this,this._def)}nullable(){return nd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qa.create(this)}promise(){return fv.create(this,this._def)}or(t){return dv.create([this,t],this._def)}and(t){return hv.create(this,t,this._def)}transform(t){return new td({...Pt(this._def),schema:this,typeName:pt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new f_({...Pt(this._def),innerType:this,defaultValue:n,typeName:pt.ZodDefault})}brand(){return new xY({typeName:pt.ZodBranded,type:this,...Pt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new p_({...Pt(this._def),innerType:this,catchValue:n,typeName:pt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return $S.create(this,t)}readonly(){return m_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ZK=/^c[^\s-]{8,}$/i,JK=/^[0-9a-z]+$/,QK=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tY=/^[a-z0-9_-]{21}$/i,nY=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,iY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let z0;const sY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,lY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,uY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,j5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hY=new RegExp(`^${j5}$`);function S5(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function fY(e){return new RegExp(`^${S5(e)}$`)}function pY(e){let t=`${j5}T${S5(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function mY(e,t){return!!((t==="v4"||!t)&&sY.test(e)||(t==="v6"||!t)&&cY.test(e))}function gY(e,t){if(!nY.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function vY(e,t){return!!((t==="v4"||!t)&&oY.test(e)||(t==="v6"||!t)&&lY.test(e))}class zo extends Ft{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==De.string){const a=this._getOrReturnCtx(t);return Ae(a,{code:xe.invalid_type,expected:De.string,received:a.parsedType}),ft}const r=new Ii;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const s=t.data.length>a.value,c=t.data.length<a.value;(s||c)&&(i=this._getOrReturnCtx(t,i),s?Ae(i,{code:xe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&Ae(i,{code:xe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")iY.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"email",code:xe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")z0||(z0=new RegExp(aY,"u")),z0.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"emoji",code:xe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")eY.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"uuid",code:xe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")tY.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"nanoid",code:xe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")ZK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"cuid",code:xe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")JK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"cuid2",code:xe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")QK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"ulid",code:xe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ae(i,{validation:"url",code:xe.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"regex",code:xe.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?pY(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?hY.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?fY(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?rY.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"duration",code:xe.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?mY(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"ip",code:xe.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?gY(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"jwt",code:xe.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?vY(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"cidr",code:xe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?uY.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"base64",code:xe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?dY.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"base64url",code:xe.invalid_string,message:a.message}),r.dirty()):Ut.assertNever(a);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:xe.invalid_string,...Be.errToObj(r)})}_addCheck(t){return new zo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Be.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Be.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Be.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Be.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Be.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Be.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Be.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Be.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Be.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Be.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Be.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Be.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Be.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Be.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Be.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Be.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Be.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Be.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Be.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Be.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Be.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Be.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Be.errToObj(n)})}nonempty(t){return this.min(1,Be.errToObj(t))}trim(){return new zo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}zo.create=e=>new zo({checks:[],typeName:pt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Pt(e)});function yY(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(e.toFixed(i).replace(".","")),s=Number.parseInt(t.toFixed(i).replace(".",""));return a%s/10**i}class Af extends Ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==De.number){const a=this._getOrReturnCtx(t);return Ae(a,{code:xe.invalid_type,expected:De.number,received:a.parsedType}),ft}let r;const i=new Ii;for(const a of this._def.checks)a.kind==="int"?Ut.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Ae(r,{code:xe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:xe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:xe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?yY(t.data,a.value)!==0&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:xe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Ae(r,{code:xe.not_finite,message:a.message}),i.dirty()):Ut.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Be.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Be.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Be.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Be.toString(n))}setLimit(t,n,r,i){return new Af({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Be.toString(i)}]})}_addCheck(t){return new Af({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Be.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Be.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Be.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Be.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Be.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Be.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Be.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Be.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Be.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ut.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Af.create=e=>new Af({checks:[],typeName:pt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Pt(e)});class Tf extends Ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==De.bigint)return this._getInvalidInput(t);let r;const i=new Ii;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:xe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:xe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:xe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Ut.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ae(n,{code:xe.invalid_type,expected:De.bigint,received:n.parsedType}),ft}gte(t,n){return this.setLimit("min",t,!0,Be.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Be.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Be.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Be.toString(n))}setLimit(t,n,r,i){return new Tf({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Be.toString(i)}]})}_addCheck(t){return new Tf({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Be.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Be.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Be.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Be.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Be.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Tf.create=e=>new Tf({checks:[],typeName:pt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Pt(e)});class h2 extends Ft{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==De.boolean){const r=this._getOrReturnCtx(t);return Ae(r,{code:xe.invalid_type,expected:De.boolean,received:r.parsedType}),ft}return ra(t.data)}}h2.create=e=>new h2({typeName:pt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Pt(e)});class uv extends Ft{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==De.date){const a=this._getOrReturnCtx(t);return Ae(a,{code:xe.invalid_type,expected:De.date,received:a.parsedType}),ft}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Ae(a,{code:xe.invalid_date}),ft}const r=new Ii;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Ae(i,{code:xe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Ut.assertNever(a);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new uv({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Be.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Be.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}uv.create=e=>new uv({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:pt.ZodDate,...Pt(e)});class f2 extends Ft{_parse(t){if(this._getType(t)!==De.symbol){const r=this._getOrReturnCtx(t);return Ae(r,{code:xe.invalid_type,expected:De.symbol,received:r.parsedType}),ft}return ra(t.data)}}f2.create=e=>new f2({typeName:pt.ZodSymbol,...Pt(e)});class p2 extends Ft{_parse(t){if(this._getType(t)!==De.undefined){const r=this._getOrReturnCtx(t);return Ae(r,{code:xe.invalid_type,expected:De.undefined,received:r.parsedType}),ft}return ra(t.data)}}p2.create=e=>new p2({typeName:pt.ZodUndefined,...Pt(e)});class m2 extends Ft{_parse(t){if(this._getType(t)!==De.null){const r=this._getOrReturnCtx(t);return Ae(r,{code:xe.invalid_type,expected:De.null,received:r.parsedType}),ft}return ra(t.data)}}m2.create=e=>new m2({typeName:pt.ZodNull,...Pt(e)});class g2 extends Ft{constructor(){super(...arguments),this._any=!0}_parse(t){return ra(t.data)}}g2.create=e=>new g2({typeName:pt.ZodAny,...Pt(e)});class v2 extends Ft{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ra(t.data)}}v2.create=e=>new v2({typeName:pt.ZodUnknown,...Pt(e)});class ec extends Ft{_parse(t){const n=this._getOrReturnCtx(t);return Ae(n,{code:xe.invalid_type,expected:De.never,received:n.parsedType}),ft}}ec.create=e=>new ec({typeName:pt.ZodNever,...Pt(e)});class y2 extends Ft{_parse(t){if(this._getType(t)!==De.undefined){const r=this._getOrReturnCtx(t);return Ae(r,{code:xe.invalid_type,expected:De.void,received:r.parsedType}),ft}return ra(t.data)}}y2.create=e=>new y2({typeName:pt.ZodVoid,...Pt(e)});class Qa extends Ft{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==De.array)return Ae(n,{code:xe.invalid_type,expected:De.array,received:n.parsedType}),ft;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,c=n.data.length<i.exactLength.value;(s||c)&&(Ae(n,{code:s?xe.too_big:xe.too_small,minimum:c?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ae(n,{code:xe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ae(n,{code:xe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,c)=>i.type._parseAsync(new Qo(n,s,n.path,c)))).then(s=>Ii.mergeArray(r,s));const a=[...n.data].map((s,c)=>i.type._parseSync(new Qo(n,s,n.path,c)));return Ii.mergeArray(r,a)}get element(){return this._def.type}min(t,n){return new Qa({...this._def,minLength:{value:t,message:Be.toString(n)}})}max(t,n){return new Qa({...this._def,maxLength:{value:t,message:Be.toString(n)}})}length(t,n){return new Qa({...this._def,exactLength:{value:t,message:Be.toString(n)}})}nonempty(t){return this.min(1,t)}}Qa.create=(e,t)=>new Qa({type:e,minLength:null,maxLength:null,exactLength:null,typeName:pt.ZodArray,...Pt(t)});function hu(e){if(e instanceof Zn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Wo.create(hu(r))}return new Zn({...e._def,shape:()=>t})}else return e instanceof Qa?new Qa({...e._def,type:hu(e.element)}):e instanceof Wo?Wo.create(hu(e.unwrap())):e instanceof nd?nd.create(hu(e.unwrap())):e instanceof xl?xl.create(e.items.map(t=>hu(t))):e}class Zn extends Ft{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Ut.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==De.object){const u=this._getOrReturnCtx(t);return Ae(u,{code:xe.invalid_type,expected:De.object,received:u.parsedType}),ft}const{status:r,ctx:i}=this._processInputParams(t),{shape:a,keys:s}=this._getCached(),c=[];if(!(this._def.catchall instanceof ec&&this._def.unknownKeys==="strip"))for(const u in i.data)s.includes(u)||c.push(u);const l=[];for(const u of s){const d=a[u],h=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Qo(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof ec){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of c)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")c.length>0&&(Ae(i,{code:xe.unrecognized_keys,keys:c}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of c){const h=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Qo(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,f=await d.value;u.push({key:h,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>Ii.mergeObjectSync(r,u)):Ii.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return Be.errToObj,new Zn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,s;const i=((s=(a=this._def).errorMap)==null?void 0:s.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Be.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new Zn({...this._def,unknownKeys:"strip"})}passthrough(){return new Zn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Zn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Zn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:pt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Zn({...this._def,catchall:t})}pick(t){const n={};for(const r of Ut.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Zn({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Ut.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new Zn({...this._def,shape:()=>n})}deepPartial(){return hu(this)}partial(t){const n={};for(const r of Ut.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}return new Zn({...this._def,shape:()=>n})}required(t){const n={};for(const r of Ut.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Wo;)a=a._def.innerType;n[r]=a}return new Zn({...this._def,shape:()=>n})}keyof(){return E5(Ut.objectKeys(this.shape))}}Zn.create=(e,t)=>new Zn({shape:()=>e,unknownKeys:"strip",catchall:ec.create(),typeName:pt.ZodObject,...Pt(t)});Zn.strictCreate=(e,t)=>new Zn({shape:()=>e,unknownKeys:"strict",catchall:ec.create(),typeName:pt.ZodObject,...Pt(t)});Zn.lazycreate=(e,t)=>new Zn({shape:e,unknownKeys:"strip",catchall:ec.create(),typeName:pt.ZodObject,...Pt(t)});class dv extends Ft{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const s=a.map(c=>new qs(c.ctx.common.issues));return Ae(n,{code:xe.invalid_union,unionErrors:s}),ft}if(n.common.async)return Promise.all(r.map(async a=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let a;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const c=s.map(l=>new qs(l));return Ae(n,{code:xe.invalid_union,unionErrors:c}),ft}}get options(){return this._def.options}}dv.create=(e,t)=>new dv({options:e,typeName:pt.ZodUnion,...Pt(t)});function h_(e,t){const n=Po(e),r=Po(t);if(e===t)return{valid:!0,data:e};if(n===De.object&&r===De.object){const i=Ut.objectKeys(t),a=Ut.objectKeys(e).filter(c=>i.indexOf(c)!==-1),s={...e,...t};for(const c of a){const l=h_(e[c],t[c]);if(!l.valid)return{valid:!1};s[c]=l.data}return{valid:!0,data:s}}else if(n===De.array&&r===De.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const s=e[a],c=t[a],l=h_(s,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===De.date&&r===De.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class hv extends Ft{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(a,s)=>{if(l2(a)||l2(s))return ft;const c=h_(a.value,s.value);return c.valid?((u2(a)||u2(s))&&n.dirty(),{status:n.value,value:c.data}):(Ae(r,{code:xe.invalid_intersection_types}),ft)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}hv.create=(e,t,n)=>new hv({left:e,right:t,typeName:pt.ZodIntersection,...Pt(n)});class xl extends Ft{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==De.array)return Ae(r,{code:xe.invalid_type,expected:De.array,received:r.parsedType}),ft;if(r.data.length<this._def.items.length)return Ae(r,{code:xe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ft;!this._def.rest&&r.data.length>this._def.items.length&&(Ae(r,{code:xe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((s,c)=>{const l=this._def.items[c]||this._def.rest;return l?l._parse(new Qo(r,s,r.path,c)):null}).filter(s=>!!s);return r.common.async?Promise.all(a).then(s=>Ii.mergeArray(n,s)):Ii.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new xl({...this._def,rest:t})}}xl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xl({items:e,typeName:pt.ZodTuple,rest:null,...Pt(t)})};class x2 extends Ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==De.map)return Ae(r,{code:xe.invalid_type,expected:De.map,received:r.parsedType}),ft;const i=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([c,l],u)=>({key:i._parse(new Qo(r,c,r.path,[u,"key"])),value:a._parse(new Qo(r,l,r.path,[u,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return ft;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),c.set(u.value,d.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const l of s){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return ft;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),c.set(u.value,d.value)}return{status:n.value,value:c}}}}x2.create=(e,t,n)=>new x2({valueType:t,keyType:e,typeName:pt.ZodMap,...Pt(n)});class Of extends Ft{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==De.set)return Ae(r,{code:xe.invalid_type,expected:De.set,received:r.parsedType}),ft;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ae(r,{code:xe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ae(r,{code:xe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function s(l){const u=new Set;for(const d of l){if(d.status==="aborted")return ft;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const c=[...r.data.values()].map((l,u)=>a._parse(new Qo(r,l,r.path,u)));return r.common.async?Promise.all(c).then(l=>s(l)):s(c)}min(t,n){return new Of({...this._def,minSize:{value:t,message:Be.toString(n)}})}max(t,n){return new Of({...this._def,maxSize:{value:t,message:Be.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Of.create=(e,t)=>new Of({valueType:e,minSize:null,maxSize:null,typeName:pt.ZodSet,...Pt(t)});class b2 extends Ft{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}b2.create=(e,t)=>new b2({getter:e,typeName:pt.ZodLazy,...Pt(t)});class w2 extends Ft{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ae(n,{received:n.data,code:xe.invalid_literal,expected:this._def.value}),ft}return{status:"valid",value:t.data}}get value(){return this._def.value}}w2.create=(e,t)=>new w2({value:e,typeName:pt.ZodLiteral,...Pt(t)});function E5(e,t){return new ed({values:e,typeName:pt.ZodEnum,...Pt(t)})}class ed extends Ft{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Ae(n,{expected:Ut.joinValues(r),received:n.parsedType,code:xe.invalid_type}),ft}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Ae(n,{received:n.data,code:xe.invalid_enum_value,options:r}),ft}return ra(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ed.create(t,{...this._def,...n})}exclude(t,n=this._def){return ed.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}ed.create=E5;class _2 extends Ft{_parse(t){const n=Ut.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==De.string&&r.parsedType!==De.number){const i=Ut.objectValues(n);return Ae(r,{expected:Ut.joinValues(i),received:r.parsedType,code:xe.invalid_type}),ft}if(this._cache||(this._cache=new Set(Ut.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Ut.objectValues(n);return Ae(r,{received:r.data,code:xe.invalid_enum_value,options:i}),ft}return ra(t.data)}get enum(){return this._def.values}}_2.create=(e,t)=>new _2({values:e,typeName:pt.ZodNativeEnum,...Pt(t)});class fv extends Ft{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==De.promise&&n.common.async===!1)return Ae(n,{code:xe.invalid_type,expected:De.promise,received:n.parsedType}),ft;const r=n.parsedType===De.promise?n.data:Promise.resolve(n.data);return ra(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}fv.create=(e,t)=>new fv({type:e,typeName:pt.ZodPromise,...Pt(t)});class td extends Ft{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:s=>{Ae(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const s=i.transform(r.data,a);if(r.common.async)return Promise.resolve(s).then(async c=>{if(n.value==="aborted")return ft;const l=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return l.status==="aborted"?ft:l.status==="dirty"||n.value==="dirty"?Qh(l.value):l});{if(n.value==="aborted")return ft;const c=this._def.schema._parseSync({data:s,path:r.path,parent:r});return c.status==="aborted"?ft:c.status==="dirty"||n.value==="dirty"?Qh(c.value):c}}if(i.type==="refinement"){const s=c=>{const l=i.refinement(c,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?ft:(c.status==="dirty"&&n.dirty(),s(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?ft:(c.status==="dirty"&&n.dirty(),s(c.value).then(()=>({status:n.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Qu(s))return ft;const c=i.transform(s.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Qu(s)?Promise.resolve(i.transform(s.value,a)).then(c=>({status:n.value,value:c})):ft);Ut.assertNever(i)}}td.create=(e,t,n)=>new td({schema:e,typeName:pt.ZodEffects,effect:t,...Pt(n)});td.createWithPreprocess=(e,t,n)=>new td({schema:t,effect:{type:"preprocess",transform:e},typeName:pt.ZodEffects,...Pt(n)});class Wo extends Ft{_parse(t){return this._getType(t)===De.undefined?ra(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Wo.create=(e,t)=>new Wo({innerType:e,typeName:pt.ZodOptional,...Pt(t)});class nd extends Ft{_parse(t){return this._getType(t)===De.null?ra(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}nd.create=(e,t)=>new nd({innerType:e,typeName:pt.ZodNullable,...Pt(t)});class f_ extends Ft{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===De.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}f_.create=(e,t)=>new f_({innerType:e,typeName:pt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Pt(t)});class p_ extends Ft{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return lv(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new qs(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}p_.create=(e,t)=>new p_({innerType:e,typeName:pt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Pt(t)});class j2 extends Ft{_parse(t){if(this._getType(t)!==De.nan){const r=this._getOrReturnCtx(t);return Ae(r,{code:xe.invalid_type,expected:De.nan,received:r.parsedType}),ft}return{status:"valid",value:t.data}}}j2.create=e=>new j2({typeName:pt.ZodNaN,...Pt(e)});class xY extends Ft{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class $S extends Ft{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ft:a.status==="dirty"?(n.dirty(),Qh(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ft:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new $S({in:t,out:n,typeName:pt.ZodPipeline})}}class m_ extends Ft{_parse(t){const n=this._def.innerType._parse(t),r=i=>(Qu(i)&&(i.value=Object.freeze(i.value)),i);return lv(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}m_.create=(e,t)=>new m_({innerType:e,typeName:pt.ZodReadonly,...Pt(t)});var pt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(pt||(pt={}));const S2=zo.create;ec.create;Qa.create;const bY=Zn.create;dv.create;hv.create;xl.create;ed.create;fv.create;Wo.create;nd.create;const wY=bY({email:S2().email("Invalid email address").max(255,"Email too long"),password:S2().min(6,"Password must be at least 6 characters").max(100,"Password too long")}),N5=()=>{const e=Mi(),{toast:t}=Ud(),[n,r]=y.useState(!1),[i,a]=y.useState(""),[s,c]=y.useState(""),[l,u]=y.useState(!1),[d,h]=y.useState(""),[f,p]=y.useState("");y.useEffect(()=>{oe.auth.getSession().then(({data:{session:b}})=>{b&&e("/")});const{data:{subscription:x}}=oe.auth.onAuthStateChange((b,w)=>{w&&e("/")});return()=>x.unsubscribe()},[e]);const m=async x=>{if(x.preventDefault(),d.length!==6){t({variant:"destructive",title:"Invalid OTP",description:"Please enter a 6-digit code"});return}r(!0);const{error:b}=await oe.auth.verifyOtp({email:f,token:d,type:"email"});r(!1),b?t({variant:"destructive",title:"Verification failed",description:b.message}):(t({title:"Success!",description:"Your email has been verified. You can now sign in."}),u(!1),h(""),p(""),a(""),c(""))},g=async()=>{r(!0);const{error:x}=await oe.auth.resend({type:"signup",email:f});r(!1),t(x?{variant:"destructive",title:"Resend failed",description:x.message}:{title:"OTP Resent",description:"Check your email for a new verification code."})},v=async x=>{x.preventDefault();const b=wY.safeParse({email:i,password:s});if(!b.success){t({variant:"destructive",title:"Validation Error",description:b.error.errors[0].message});return}r(!0);const{error:w}=await oe.auth.signInWithPassword({email:b.data.email,password:b.data.password});r(!1),w&&t({variant:"destructive",title:"Sign in failed",description:w.message})};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(ue,{className:"w-full max-w-md",children:[o.jsxs(ve,{children:[o.jsx(be,{className:"text-2xl text-center",children:"Welcome to ProssMind"}),o.jsx(Te,{className:"text-center",children:l?"Verify your email":"Sign in to start generating BPMN diagrams"})]}),o.jsx(pe,{children:l?o.jsxs("form",{onSubmit:m,className:"space-y-4",children:[o.jsxs(V,{type:"button",variant:"ghost",onClick:()=>{u(!1),h(""),p("")},className:"mb-4 p-0 h-auto",children:[o.jsx(LW,{className:"h-4 w-4 mr-2"}),"Back to sign up"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Nt,{htmlFor:"otp",children:"Verification Code"}),o.jsx(pn,{id:"otp",type:"text",placeholder:"Enter 6-digit code",value:d,onChange:x=>h(x.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,required:!0,disabled:n,className:"text-center text-2xl tracking-widest"}),o.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Enter the 6-digit code sent to ",f]})]}),o.jsx(V,{type:"submit",className:"w-full",disabled:n||d.length!==6,children:n?"Verifying...":"Verify Email"}),o.jsx(V,{type:"button",variant:"link",className:"w-full text-sm",onClick:g,disabled:n,children:"Didn't receive the code? Resend"})]}):o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Nt,{htmlFor:"signin-email",children:"Email"}),o.jsx(pn,{id:"signin-email",type:"email",placeholder:"you@example.com",value:i,onChange:x=>a(x.target.value),required:!0,disabled:n})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Nt,{htmlFor:"signin-password",children:"Password"}),o.jsx(pn,{id:"signin-password",type:"password",placeholder:"",value:s,onChange:x=>c(x.target.value),required:!0,disabled:n})]}),o.jsx(V,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign In"})]})})]})})},sc=y.forwardRef(({className:e,...t},n)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:n,className:ye("w-full caption-bottom text-sm",e),...t})}));sc.displayName="Table";const oc=y.forwardRef(({className:e,...t},n)=>o.jsx("thead",{ref:n,className:ye("[&_tr]:border-b",e),...t}));oc.displayName="TableHeader";const cc=y.forwardRef(({className:e,...t},n)=>o.jsx("tbody",{ref:n,className:ye("[&_tr:last-child]:border-0",e),...t}));cc.displayName="TableBody";const _Y=y.forwardRef(({className:e,...t},n)=>o.jsx("tfoot",{ref:n,className:ye("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));_Y.displayName="TableFooter";const mr=y.forwardRef(({className:e,...t},n)=>o.jsx("tr",{ref:n,className:ye("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));mr.displayName="TableRow";const _t=y.forwardRef(({className:e,...t},n)=>o.jsx("th",{ref:n,className:ye("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));_t.displayName="TableHead";const vt=y.forwardRef(({className:e,...t},n)=>o.jsx("td",{ref:n,className:ye("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));vt.displayName="TableCell";const jY=y.forwardRef(({className:e,...t},n)=>o.jsx("caption",{ref:n,className:ye("mt-4 text-sm text-muted-foreground",e),...t}));jY.displayName="TableCaption";const SY=Dp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Zt({className:e,variant:t,...n}){return o.jsx("div",{className:ye(SY({variant:t}),e),...n})}const EY=()=>{const e=Mi(),[t,n]=y.useState(null),[r,i]=y.useState(!0),[a,s]=y.useState(!1),[c,l]=y.useState([]);y.useEffect(()=>{const{data:{subscription:h}}=oe.auth.onAuthStateChange((f,p)=>{n((p==null?void 0:p.user)??null),p!=null&&p.user||e("/auth")});return oe.auth.getSession().then(({data:{session:f}})=>{n((f==null?void 0:f.user)??null),f!=null&&f.user||e("/auth")}),()=>h.unsubscribe()},[e]),y.useEffect(()=>{t&&(async()=>{if(t)try{const{data:f,error:p}=await oe.from("user_roles").select("role").eq("user_id",t.id).eq("role","admin").maybeSingle();if(p&&p.code!=="PGRST116"&&p.code!=="PGRST301"){console.error("Error checking admin status:",p),$.error("Failed to verify admin status"),e("/");return}const m=!!f;s(m),m||($.error("Access denied: Admin privileges required"),e("/"))}catch(f){console.error("Unexpected error:",f),e("/")}finally{i(!1)}})()},[t,e]),y.useEffect(()=>{(async()=>{if(a)try{const{data:f,error:p}=await oe.from("user_profiles").select("*").order("created_at",{ascending:!1});if(p)throw p;const{data:m,error:g}=await oe.from("user_roles").select("user_id, role");if(g)throw g;const v=(m==null?void 0:m.reduce((b,w)=>(b[w.user_id]||(b[w.user_id]=[]),b[w.user_id].push(w.role),b),{}))||{},x=(f==null?void 0:f.map(b=>({...b,roles:v[b.user_id]||["user"]})))||[];l(x)}catch(f){console.error("Error fetching users:",f),$.error("Failed to load users")}})()},[a]);const u=async(h,f)=>{const p=f.includes("admin");try{if(p){const{error:b}=await oe.from("user_roles").delete().eq("user_id",h).eq("role","admin");if(b)throw b;$.success("Admin privileges revoked")}else{const{error:b}=await oe.from("user_roles").insert({user_id:h,role:"admin"});if(b)throw b;$.success("Admin privileges granted")}const{data:m}=await oe.from("user_profiles").select("*").order("created_at",{ascending:!1}),{data:g}=await oe.from("user_roles").select("user_id, role"),v=(g==null?void 0:g.reduce((b,w)=>(b[w.user_id]||(b[w.user_id]=[]),b[w.user_id].push(w.role),b),{}))||{},x=(m==null?void 0:m.map(b=>({...b,roles:v[b.user_id]||["user"]})))||[];l(x)}catch(m){console.error("Error toggling admin:",m),$.error("Failed to update admin status")}},d=async h=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const{error:f}=await oe.auth.admin.deleteUser(h);if(f)throw f;$.success("User deleted successfully"),l(c.filter(p=>p.user_id!==h))}catch(f){console.error("Error deleting user:",f),$.error("Failed to delete user")}};return r?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):a?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{user:t}),o.jsxs("div",{className:"container mx-auto px-6 py-24",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[o.jsx(Jo,{className:"h-8 w-8 text-primary"}),o.jsx("h1",{className:"text-4xl font-bold",children:"Admin Dashboard"})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(A7,{className:"h-5 w-5"}),"User Management"]}),o.jsx(Te,{children:"Manage users, assign roles, and control access permissions"})]}),o.jsx(pe,{children:o.jsxs(sc,{children:[o.jsx(oc,{children:o.jsxs(mr,{children:[o.jsx(_t,{children:"Email"}),o.jsx(_t,{children:"Roles"}),o.jsx(_t,{children:"Created At"}),o.jsx(_t,{children:"Actions"})]})}),o.jsx(cc,{children:c.map(h=>o.jsxs(mr,{children:[o.jsx(vt,{className:"font-medium",children:h.email}),o.jsx(vt,{children:o.jsx("div",{className:"flex gap-2",children:h.roles.map(f=>o.jsxs(Zt,{variant:f==="admin"?"default":"secondary",children:[f==="admin"&&o.jsx(Vk,{className:"h-3 w-3 mr-1"}),f]},f))})}),o.jsx(vt,{children:new Date(h.created_at).toLocaleDateString()}),o.jsx(vt,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{variant:h.roles.includes("admin")?"destructive":"default",size:"sm",onClick:()=>u(h.user_id,h.roles),disabled:h.user_id===(t==null?void 0:t.id),children:[o.jsx(Vk,{className:"h-4 w-4 mr-1"}),h.roles.includes("admin")?"Revoke Admin":"Make Admin"]}),o.jsx(V,{variant:"outline",size:"sm",onClick:()=>d(h.user_id),disabled:h.user_id===(t==null?void 0:t.id),children:o.jsx(Fp,{className:"h-4 w-4"})})]})})]},h.id))})]})})]})]})]}):null};var Up=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},NY={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Oo,Uj,PI,PY=(PI=class{constructor(){Xe(this,Oo,NY);Xe(this,Uj,!1)}setTimeoutProvider(e){Oe(this,Oo,e)}setTimeout(e,t){return U(this,Oo).setTimeout(e,t)}clearTimeout(e){U(this,Oo).clearTimeout(e)}setInterval(e,t){return U(this,Oo).setInterval(e,t)}clearInterval(e){U(this,Oo).clearInterval(e)}},Oo=new WeakMap,Uj=new WeakMap,PI),Yc=new PY;function kY(e){setTimeout(e,0)}var bl=typeof window>"u"||"Deno"in globalThis;function ai(){}function CY(e,t){return typeof e=="function"?e(t):e}function g_(e){return typeof e=="number"&&e>=0&&e!==1/0}function P5(e,t){return Math.max(e+(t||0)-Date.now(),0)}function qo(e,t){return typeof e=="function"?e(t):e}function Gi(e,t){return typeof e=="function"?e(t):e}function E2(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:s,stale:c}=e;if(s){if(r){if(t.queryHash!==IS(s,t.options))return!1}else if(!$f(t.queryKey,s))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||i&&i!==t.state.fetchStatus||a&&!a(t))}function N2(e,t){const{exact:n,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Rf(t.options.mutationKey)!==Rf(a))return!1}else if(!$f(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function IS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Rf)(e)}function Rf(e){return JSON.stringify(e,(t,n)=>y_(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function $f(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>$f(e[n],t[n])):!1}var AY=Object.prototype.hasOwnProperty;function k5(e,t){if(e===t)return e;const n=P2(e)&&P2(t);if(!n&&!(y_(e)&&y_(t)))return t;const i=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),s=a.length,c=n?new Array(s):{};let l=0;for(let u=0;u<s;u++){const d=n?u:a[u],h=e[d],f=t[d];if(h===f){c[d]=h,(n?u<i:AY.call(e,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){c[d]=f;continue}const p=k5(h,f);c[d]=p,p===h&&l++}return i===s&&l===i?e:c}function v_(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function P2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function y_(e){if(!k2(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!k2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function k2(e){return Object.prototype.toString.call(e)==="[object Object]"}function TY(e){return new Promise(t=>{Yc.setTimeout(t,e)})}function x_(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?k5(e,t):t}function OY(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function RY(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var MS=Symbol();function C5(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===MS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function $Y(e,t){return typeof e=="function"?e(...t):!!e}var nl,Ro,$u,kI,IY=(kI=class extends Up{constructor(){super();Xe(this,nl);Xe(this,Ro);Xe(this,$u);Oe(this,$u,t=>{if(!bl&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){U(this,Ro)||this.setEventListener(U(this,$u))}onUnsubscribe(){var t;this.hasListeners()||((t=U(this,Ro))==null||t.call(this),Oe(this,Ro,void 0))}setEventListener(t){var n;Oe(this,$u,t),(n=U(this,Ro))==null||n.call(this),Oe(this,Ro,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){U(this,nl)!==t&&(Oe(this,nl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof U(this,nl)=="boolean"?U(this,nl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},nl=new WeakMap,Ro=new WeakMap,$u=new WeakMap,kI),DS=new IY;function b_(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}var MY=kY;function DY(){let e=[],t=0,n=c=>{c()},r=c=>{c()},i=MY;const a=c=>{t?e.push(c):i(()=>{n(c)})},s=()=>{const c=e;e=[],c.length&&i(()=>{r(()=>{c.forEach(l=>{n(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||s()}return l},batchCalls:c=>(...l)=>{a(()=>{c(...l)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var Er=DY(),Iu,$o,Mu,CI,LY=(CI=class extends Up{constructor(){super();Xe(this,Iu,!0);Xe(this,$o);Xe(this,Mu);Oe(this,Mu,t=>{if(!bl&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){U(this,$o)||this.setEventListener(U(this,Mu))}onUnsubscribe(){var t;this.hasListeners()||((t=U(this,$o))==null||t.call(this),Oe(this,$o,void 0))}setEventListener(t){var n;Oe(this,Mu,t),(n=U(this,$o))==null||n.call(this),Oe(this,$o,t(this.setOnline.bind(this)))}setOnline(t){U(this,Iu)!==t&&(Oe(this,Iu,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return U(this,Iu)}},Iu=new WeakMap,$o=new WeakMap,Mu=new WeakMap,CI),pv=new LY;function BY(e){return Math.min(1e3*2**e,3e4)}function A5(e){return(e??"online")==="online"?pv.isOnline():!0}var w_=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function T5(e){let t=!1,n=0,r;const i=b_(),a=()=>i.status!=="pending",s=g=>{var v;if(!a()){const x=new w_(g);f(x),(v=e.onCancel)==null||v.call(e,x)}},c=()=>{t=!0},l=()=>{t=!1},u=()=>DS.isFocused()&&(e.networkMode==="always"||pv.isOnline())&&e.canRun(),d=()=>A5(e.networkMode)&&e.canRun(),h=g=>{a()||(r==null||r(),i.resolve(g))},f=g=>{a()||(r==null||r(),i.reject(g))},p=()=>new Promise(g=>{var v;r=x=>{(a()||u())&&g(x)},(v=e.onPause)==null||v.call(e)}).then(()=>{var g;r=void 0,a()||(g=e.onContinue)==null||g.call(e)}),m=()=>{if(a())return;let g;const v=n===0?e.initialPromise:void 0;try{g=v??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(h).catch(x=>{var S;if(a())return;const b=e.retry??(bl?0:3),w=e.retryDelay??BY,_=typeof w=="function"?w(n,x):w,j=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,x);if(t||!j){f(x);return}n++,(S=e.onFail)==null||S.call(e,n,x),TY(_).then(()=>u()?void 0:p()).then(()=>{t?f(x):m()})})};return{promise:i,status:()=>i.status,cancel:s,continue:()=>(r==null||r(),i),cancelRetry:c,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var rl,AI,O5=(AI=class{constructor(){Xe(this,rl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),g_(this.gcTime)&&Oe(this,rl,Yc.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(bl?1/0:5*60*1e3))}clearGcTimeout(){U(this,rl)&&(Yc.clearTimeout(U(this,rl)),Oe(this,rl,void 0))}},rl=new WeakMap,AI),il,Du,Ui,al,hr,_p,sl,_a,_s,TI,FY=(TI=class extends O5{constructor(t){super();Xe(this,_a);Xe(this,il);Xe(this,Du);Xe(this,Ui);Xe(this,al);Xe(this,hr);Xe(this,_p);Xe(this,sl);Oe(this,sl,!1),Oe(this,_p,t.defaultOptions),this.setOptions(t.options),this.observers=[],Oe(this,al,t.client),Oe(this,Ui,U(this,al).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Oe(this,il,A2(this.options)),this.state=t.state??U(this,il),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=U(this,hr))==null?void 0:t.promise}setOptions(t){if(this.options={...U(this,_p),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=A2(this.options);n.data!==void 0&&(this.setState(C2(n.data,n.dataUpdatedAt)),Oe(this,il,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,Ui).remove(this)}setData(t,n){const r=x_(this.state.data,t,this.options);return $t(this,_a,_s).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){$t(this,_a,_s).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=U(this,hr))==null?void 0:r.promise;return(i=U(this,hr))==null||i.cancel(t),n?n.then(ai).catch(ai):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,il))}isActive(){return this.observers.some(t=>Gi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===MS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>qo(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!P5(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=U(this,hr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=U(this,hr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),U(this,Ui).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(U(this,hr)&&(U(this,sl)?U(this,hr).cancel({revert:!0}):U(this,hr).cancelRetry()),this.scheduleGc()),U(this,Ui).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$t(this,_a,_s).call(this,{type:"invalidate"})}async fetch(t,n){var l,u,d,h,f,p,m,g,v,x,b,w;if(this.state.fetchStatus!=="idle"&&((l=U(this,hr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(U(this,hr))return U(this,hr).continueRetry(),U(this,hr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(j=>j.options.queryFn);_&&this.setOptions(_.options)}const r=new AbortController,i=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(Oe(this,sl,!0),r.signal)})},a=()=>{const _=C5(this.options,n),S=(()=>{const N={client:U(this,al),queryKey:this.queryKey,meta:this.meta};return i(N),N})();return Oe(this,sl,!1),this.options.persister?this.options.persister(_,S,this):_(S)},c=(()=>{const _={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:U(this,al),state:this.state,fetchFn:a};return i(_),_})();(u=this.options.behavior)==null||u.onFetch(c,this),Oe(this,Du,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=c.fetchOptions)==null?void 0:d.meta))&&$t(this,_a,_s).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta}),Oe(this,hr,T5({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,onCancel:_=>{_ instanceof w_&&_.revert&&this.setState({...U(this,Du),fetchStatus:"idle"}),r.abort()},onFail:(_,j)=>{$t(this,_a,_s).call(this,{type:"failed",failureCount:_,error:j})},onPause:()=>{$t(this,_a,_s).call(this,{type:"pause"})},onContinue:()=>{$t(this,_a,_s).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const _=await U(this,hr).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(p=(f=U(this,Ui).config).onSuccess)==null||p.call(f,_,this),(g=(m=U(this,Ui).config).onSettled)==null||g.call(m,_,this.state.error,this),_}catch(_){if(_ instanceof w_){if(_.silent)return U(this,hr).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw $t(this,_a,_s).call(this,{type:"error",error:_}),(x=(v=U(this,Ui).config).onError)==null||x.call(v,_,this),(w=(b=U(this,Ui).config).onSettled)==null||w.call(b,this.state.data,_,this),_}finally{this.scheduleGc()}}},il=new WeakMap,Du=new WeakMap,Ui=new WeakMap,al=new WeakMap,hr=new WeakMap,_p=new WeakMap,sl=new WeakMap,_a=new WeakSet,_s=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...R5(r.data,this.options),fetchMeta:t.meta??null};case"success":const i={...r,...C2(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Oe(this,Du,t.manual?i:void 0),i;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Er.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),U(this,Ui).notify({query:this,type:"updated",action:t})})},TI);function R5(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:A5(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function C2(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function A2(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ri,It,jp,Hr,ol,Lu,ks,Io,Sp,Bu,Fu,cl,ll,Mo,zu,Qt,ef,__,j_,S_,E_,N_,P_,k_,$5,OI,zY=(OI=class extends Up{constructor(t,n){super();Xe(this,Qt);Xe(this,ri);Xe(this,It);Xe(this,jp);Xe(this,Hr);Xe(this,ol);Xe(this,Lu);Xe(this,ks);Xe(this,Io);Xe(this,Sp);Xe(this,Bu);Xe(this,Fu);Xe(this,cl);Xe(this,ll);Xe(this,Mo);Xe(this,zu,new Set);this.options=n,Oe(this,ri,t),Oe(this,Io,null),Oe(this,ks,b_()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(U(this,It).addObserver(this),T2(U(this,It),this.options)?$t(this,Qt,ef).call(this):this.updateResult(),$t(this,Qt,E_).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return C_(U(this,It),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return C_(U(this,It),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,$t(this,Qt,N_).call(this),$t(this,Qt,P_).call(this),U(this,It).removeObserver(this)}setOptions(t){const n=this.options,r=U(this,It);if(this.options=U(this,ri).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Gi(this.options.enabled,U(this,It))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");$t(this,Qt,k_).call(this),U(this,It).setOptions(this.options),n._defaulted&&!v_(this.options,n)&&U(this,ri).getQueryCache().notify({type:"observerOptionsUpdated",query:U(this,It),observer:this});const i=this.hasListeners();i&&O2(U(this,It),r,this.options,n)&&$t(this,Qt,ef).call(this),this.updateResult(),i&&(U(this,It)!==r||Gi(this.options.enabled,U(this,It))!==Gi(n.enabled,U(this,It))||qo(this.options.staleTime,U(this,It))!==qo(n.staleTime,U(this,It)))&&$t(this,Qt,__).call(this);const a=$t(this,Qt,j_).call(this);i&&(U(this,It)!==r||Gi(this.options.enabled,U(this,It))!==Gi(n.enabled,U(this,It))||a!==U(this,Mo))&&$t(this,Qt,S_).call(this,a)}getOptimisticResult(t){const n=U(this,ri).getQueryCache().build(U(this,ri),t),r=this.createResult(n,t);return HY(this,r)&&(Oe(this,Hr,r),Oe(this,Lu,this.options),Oe(this,ol,U(this,It).state)),r}getCurrentResult(){return U(this,Hr)}trackResult(t,n){return new Proxy(t,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&U(this,ks).status==="pending"&&U(this,ks).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(t){U(this,zu).add(t)}getCurrentQuery(){return U(this,It)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=U(this,ri).defaultQueryOptions(t),r=U(this,ri).getQueryCache().build(U(this,ri),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return $t(this,Qt,ef).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),U(this,Hr)))}createResult(t,n){var k;const r=U(this,It),i=this.options,a=U(this,Hr),s=U(this,ol),c=U(this,Lu),u=t!==r?t.state:U(this,jp),{state:d}=t;let h={...d},f=!1,p;if(n._optimisticResults){const T=this.hasListeners(),A=!T&&T2(t,n),O=T&&O2(t,r,n,i);(A||O)&&(h={...h,...R5(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=h;p=h.data;let x=!1;if(n.placeholderData!==void 0&&p===void 0&&v==="pending"){let T;a!=null&&a.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData)?(T=a.data,x=!0):T=typeof n.placeholderData=="function"?n.placeholderData((k=U(this,Fu))==null?void 0:k.state.data,U(this,Fu)):n.placeholderData,T!==void 0&&(v="success",p=x_(a==null?void 0:a.data,T,n),f=!0)}if(n.select&&p!==void 0&&!x)if(a&&p===(s==null?void 0:s.data)&&n.select===U(this,Sp))p=U(this,Bu);else try{Oe(this,Sp,n.select),p=n.select(p),p=x_(a==null?void 0:a.data,p,n),Oe(this,Bu,p),Oe(this,Io,null)}catch(T){Oe(this,Io,T)}U(this,Io)&&(m=U(this,Io),p=U(this,Bu),g=Date.now(),v="error");const b=h.fetchStatus==="fetching",w=v==="pending",_=v==="error",j=w&&b,S=p!==void 0,P={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:_,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:_&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:_&&S,isStale:LS(t,n),refetch:this.refetch,promise:U(this,ks),isEnabled:Gi(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=D=>{P.status==="error"?D.reject(P.error):P.data!==void 0&&D.resolve(P.data)},A=()=>{const D=Oe(this,ks,P.promise=b_());T(D)},O=U(this,ks);switch(O.status){case"pending":t.queryHash===r.queryHash&&T(O);break;case"fulfilled":(P.status==="error"||P.data!==O.value)&&A();break;case"rejected":(P.status!=="error"||P.error!==O.reason)&&A();break}}return P}updateResult(){const t=U(this,Hr),n=this.createResult(U(this,It),this.options);if(Oe(this,ol,U(this,It).state),Oe(this,Lu,this.options),U(this,ol).data!==void 0&&Oe(this,Fu,U(this,It)),v_(n,t))return;Oe(this,Hr,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!U(this,zu).size)return!0;const s=new Set(a??U(this,zu));return this.options.throwOnError&&s.add("error"),Object.keys(U(this,Hr)).some(c=>{const l=c;return U(this,Hr)[l]!==t[l]&&s.has(l)})};$t(this,Qt,$5).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&$t(this,Qt,E_).call(this)}},ri=new WeakMap,It=new WeakMap,jp=new WeakMap,Hr=new WeakMap,ol=new WeakMap,Lu=new WeakMap,ks=new WeakMap,Io=new WeakMap,Sp=new WeakMap,Bu=new WeakMap,Fu=new WeakMap,cl=new WeakMap,ll=new WeakMap,Mo=new WeakMap,zu=new WeakMap,Qt=new WeakSet,ef=function(t){$t(this,Qt,k_).call(this);let n=U(this,It).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(ai)),n},__=function(){$t(this,Qt,N_).call(this);const t=qo(this.options.staleTime,U(this,It));if(bl||U(this,Hr).isStale||!g_(t))return;const r=P5(U(this,Hr).dataUpdatedAt,t)+1;Oe(this,cl,Yc.setTimeout(()=>{U(this,Hr).isStale||this.updateResult()},r))},j_=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(U(this,It)):this.options.refetchInterval)??!1},S_=function(t){$t(this,Qt,P_).call(this),Oe(this,Mo,t),!(bl||Gi(this.options.enabled,U(this,It))===!1||!g_(U(this,Mo))||U(this,Mo)===0)&&Oe(this,ll,Yc.setInterval(()=>{(this.options.refetchIntervalInBackground||DS.isFocused())&&$t(this,Qt,ef).call(this)},U(this,Mo)))},E_=function(){$t(this,Qt,__).call(this),$t(this,Qt,S_).call(this,$t(this,Qt,j_).call(this))},N_=function(){U(this,cl)&&(Yc.clearTimeout(U(this,cl)),Oe(this,cl,void 0))},P_=function(){U(this,ll)&&(Yc.clearInterval(U(this,ll)),Oe(this,ll,void 0))},k_=function(){const t=U(this,ri).getQueryCache().build(U(this,ri),this.options);if(t===U(this,It))return;const n=U(this,It);Oe(this,It,t),Oe(this,jp,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},$5=function(t){Er.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(U(this,Hr))}),U(this,ri).getQueryCache().notify({query:U(this,It),type:"observerResultsUpdated"})})},OI);function UY(e,t){return Gi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function T2(e,t){return UY(e,t)||e.state.data!==void 0&&C_(e,t,t.refetchOnMount)}function C_(e,t,n){if(Gi(t.enabled,e)!==!1&&qo(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&LS(e,t)}return!1}function O2(e,t,n,r){return(e!==t||Gi(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&LS(e,n)}function LS(e,t){return Gi(t.enabled,e)!==!1&&e.isStaleByTime(qo(t.staleTime,e))}function HY(e,t){return!v_(e.getCurrentResult(),t)}function R2(e){return{onFetch:(t,n)=>{var d,h,f,p,m;const r=t.options,i=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],s=((m=t.state.data)==null?void 0:m.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=C5(t.options,t.fetchOptions),b=async(w,_,j)=>{if(g)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};return v(A),A})(),P=await x(N),{maxPages:k}=t.options,T=j?RY:OY;return{pages:T(w.pages,P,k),pageParams:T(w.pageParams,_,k)}};if(i&&a.length){const w=i==="backward",_=w?VY:$2,j={pages:a,pageParams:s},S=_(r,j);c=await b(j,S,w)}else{const w=e??a.length;do{const _=l===0?s[0]??r.initialPageParam:$2(r,c);if(l>0&&_==null)break;c=await b(c,_),l++}while(l<w)}return c};t.options.persister?t.fetchFn=()=>{var g,v;return(v=(g=t.options).persister)==null?void 0:v.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function $2(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function VY(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Ep,Ka,Vr,ul,Ya,Eo,RI,GY=(RI=class extends O5{constructor(t){super();Xe(this,Ya);Xe(this,Ep);Xe(this,Ka);Xe(this,Vr);Xe(this,ul);Oe(this,Ep,t.client),this.mutationId=t.mutationId,Oe(this,Vr,t.mutationCache),Oe(this,Ka,[]),this.state=t.state||WY(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){U(this,Ka).includes(t)||(U(this,Ka).push(t),this.clearGcTimeout(),U(this,Vr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Oe(this,Ka,U(this,Ka).filter(n=>n!==t)),this.scheduleGc(),U(this,Vr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){U(this,Ka).length||(this.state.status==="pending"?this.scheduleGc():U(this,Vr).remove(this))}continue(){var t;return((t=U(this,ul))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,c,l,u,d,h,f,p,m,g,v,x,b,w,_,j,S,N,P,k;const n=()=>{$t(this,Ya,Eo).call(this,{type:"continue"})},r={client:U(this,Ep),meta:this.options.meta,mutationKey:this.options.mutationKey};Oe(this,ul,T5({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(T,A)=>{$t(this,Ya,Eo).call(this,{type:"failed",failureCount:T,error:A})},onPause:()=>{$t(this,Ya,Eo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,Vr).canRun(this)}));const i=this.state.status==="pending",a=!U(this,ul).canStart();try{if(i)n();else{$t(this,Ya,Eo).call(this,{type:"pending",variables:t,isPaused:a}),await((c=(s=U(this,Vr).config).onMutate)==null?void 0:c.call(s,t,this,r));const A=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,r));A!==this.state.context&&$t(this,Ya,Eo).call(this,{type:"pending",context:A,variables:t,isPaused:a})}const T=await U(this,ul).start();return await((h=(d=U(this,Vr).config).onSuccess)==null?void 0:h.call(d,T,t,this.state.context,this,r)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,t,this.state.context,r)),await((g=(m=U(this,Vr).config).onSettled)==null?void 0:g.call(m,T,null,this.state.variables,this.state.context,this,r)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,T,null,t,this.state.context,r)),$t(this,Ya,Eo).call(this,{type:"success",data:T}),T}catch(T){try{throw await((w=(b=U(this,Vr).config).onError)==null?void 0:w.call(b,T,t,this.state.context,this,r)),await((j=(_=this.options).onError)==null?void 0:j.call(_,T,t,this.state.context,r)),await((N=(S=U(this,Vr).config).onSettled)==null?void 0:N.call(S,void 0,T,this.state.variables,this.state.context,this,r)),await((k=(P=this.options).onSettled)==null?void 0:k.call(P,void 0,T,t,this.state.context,r)),T}finally{$t(this,Ya,Eo).call(this,{type:"error",error:T})}}finally{U(this,Vr).runNext(this)}}},Ep=new WeakMap,Ka=new WeakMap,Vr=new WeakMap,ul=new WeakMap,Ya=new WeakSet,Eo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Er.batch(()=>{U(this,Ka).forEach(r=>{r.onMutationUpdate(t)}),U(this,Vr).notify({mutation:this,type:"updated",action:t})})},RI);function WY(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Cs,ja,Np,$I,qY=($I=class extends Up{constructor(t={}){super();Xe(this,Cs);Xe(this,ja);Xe(this,Np);this.config=t,Oe(this,Cs,new Set),Oe(this,ja,new Map),Oe(this,Np,0)}build(t,n,r){const i=new GY({client:t,mutationCache:this,mutationId:++zm(this,Np)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){U(this,Cs).add(t);const n=Qm(t);if(typeof n=="string"){const r=U(this,ja).get(n);r?r.push(t):U(this,ja).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(U(this,Cs).delete(t)){const n=Qm(t);if(typeof n=="string"){const r=U(this,ja).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&U(this,ja).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Qm(t);if(typeof n=="string"){const r=U(this,ja).get(n),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=Qm(t);if(typeof n=="string"){const i=(r=U(this,ja).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Er.batch(()=>{U(this,Cs).forEach(t=>{this.notify({type:"removed",mutation:t})}),U(this,Cs).clear(),U(this,ja).clear()})}getAll(){return Array.from(U(this,Cs))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>N2(n,r))}findAll(t={}){return this.getAll().filter(n=>N2(t,n))}notify(t){Er.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Er.batch(()=>Promise.all(t.map(n=>n.continue().catch(ai))))}},Cs=new WeakMap,ja=new WeakMap,Np=new WeakMap,$I);function Qm(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Xa,II,KY=(II=class extends Up{constructor(t={}){super();Xe(this,Xa);this.config=t,Oe(this,Xa,new Map)}build(t,n,r){const i=n.queryKey,a=n.queryHash??IS(i,n);let s=this.get(a);return s||(s=new FY({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){U(this,Xa).has(t.queryHash)||(U(this,Xa).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=U(this,Xa).get(t.queryHash);n&&(t.destroy(),n===t&&U(this,Xa).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Er.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return U(this,Xa).get(t)}getAll(){return[...U(this,Xa).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>E2(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>E2(t,r)):n}notify(t){Er.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Er.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Er.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Xa=new WeakMap,II),An,Do,Lo,Uu,Hu,Bo,Vu,Gu,MI,YY=(MI=class{constructor(e={}){Xe(this,An);Xe(this,Do);Xe(this,Lo);Xe(this,Uu);Xe(this,Hu);Xe(this,Bo);Xe(this,Vu);Xe(this,Gu);Oe(this,An,e.queryCache||new KY),Oe(this,Do,e.mutationCache||new qY),Oe(this,Lo,e.defaultOptions||{}),Oe(this,Uu,new Map),Oe(this,Hu,new Map),Oe(this,Bo,0)}mount(){zm(this,Bo)._++,U(this,Bo)===1&&(Oe(this,Vu,DS.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,An).onFocus())})),Oe(this,Gu,pv.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,An).onOnline())})))}unmount(){var e,t;zm(this,Bo)._--,U(this,Bo)===0&&((e=U(this,Vu))==null||e.call(this),Oe(this,Vu,void 0),(t=U(this,Gu))==null||t.call(this),Oe(this,Gu,void 0))}isFetching(e){return U(this,An).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return U(this,Do).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=U(this,An).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=U(this,An).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(qo(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return U(this,An).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=U(this,An).get(r.queryHash),a=i==null?void 0:i.state.data,s=CY(t,a);if(s!==void 0)return U(this,An).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return Er.batch(()=>U(this,An).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=U(this,An).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=U(this,An);Er.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=U(this,An);return Er.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Er.batch(()=>U(this,An).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(ai).catch(ai)}invalidateQueries(e,t={}){return Er.batch(()=>(U(this,An).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Er.batch(()=>U(this,An).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(ai)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(ai)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=U(this,An).build(this,t);return n.isStaleByTime(qo(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ai).catch(ai)}fetchInfiniteQuery(e){return e.behavior=R2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ai).catch(ai)}ensureInfiniteQueryData(e){return e.behavior=R2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return pv.isOnline()?U(this,Do).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,An)}getMutationCache(){return U(this,Do)}getDefaultOptions(){return U(this,Lo)}setDefaultOptions(e){Oe(this,Lo,e)}setQueryDefaults(e,t){U(this,Uu).set(Rf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...U(this,Uu).values()],n={};return t.forEach(r=>{$f(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){U(this,Hu).set(Rf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...U(this,Hu).values()],n={};return t.forEach(r=>{$f(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...U(this,Lo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=IS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===MS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...U(this,Lo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){U(this,An).clear(),U(this,Do).clear()}},An=new WeakMap,Do=new WeakMap,Lo=new WeakMap,Uu=new WeakMap,Hu=new WeakMap,Bo=new WeakMap,Vu=new WeakMap,Gu=new WeakMap,MI),I5=y.createContext(void 0),XY=e=>{const t=y.useContext(I5);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ZY=({client:e,children:t})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(I5.Provider,{value:e,children:t})),M5=y.createContext(!1),JY=()=>y.useContext(M5);M5.Provider;function QY(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var eX=y.createContext(QY()),tX=()=>y.useContext(eX),nX=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},rX=e=>{y.useEffect(()=>{e.clearReset()},[e])},iX=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||$Y(n,[e.error,r])),aX=e=>{if(e.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},sX=(e,t)=>e.isLoading&&e.isFetching&&!t,oX=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,I2=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function cX(e,t,n){var h,f,p,m,g;const r=JY(),i=tX(),a=XY(),s=a.defaultQueryOptions(e);(f=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,s),s._optimisticResults=r?"isRestoring":"optimistic",aX(s),nX(s,i),rX(i);const c=!a.getQueryCache().get(s.queryHash),[l]=y.useState(()=>new t(a,s)),u=l.getOptimisticResult(s),d=!r&&e.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(v=>{const x=d?l.subscribe(Er.batchCalls(v)):ai;return l.updateResult(),x},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),y.useEffect(()=>{l.setOptions(s)},[s,l]),oX(s,u))throw I2(s,l,i);if(iX({result:u,errorResetBoundary:i,throwOnError:s.throwOnError,query:a.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw u.error;if((m=(p=a.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,s,u),s.experimental_prefetchInRender&&!bl&&sX(u,r)){const v=c?I2(s,l,i):(g=a.getQueryCache().get(s.queryHash))==null?void 0:g.promise;v==null||v.catch(ai).finally(()=>{l.updateResult()})}return s.notifyOnChangeProps?u:l.trackResult(u)}function ku(e,t){return cX(e,zY)}const BS=ZD,tx=y.forwardRef(({className:e,...t},n)=>o.jsx(Jy,{ref:n,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));tx.displayName=Jy.displayName;const Ls=y.forwardRef(({className:e,...t},n)=>o.jsx(Qy,{ref:n,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Ls.displayName=Qy.displayName;const Bs=y.forwardRef(({className:e,...t},n)=>o.jsx(ex,{ref:n,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Bs.displayName=ex.displayName;function lX(e){const t=uX(e),n=y.forwardRef((r,i)=>{const{children:a,...s}=r,c=y.Children.toArray(a),l=c.find(hX);if(l){const u=l.props.children,d=c.map(h=>h===l?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...s,ref:i,children:y.isValidElement(u)?y.cloneElement(u,void 0,d):null})}return o.jsx(t,{...s,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}function uX(e){const t=y.forwardRef((n,r)=>{const{children:i,...a}=n;if(y.isValidElement(i)){const s=pX(i),c=fX(a,i.props);return i.type!==y.Fragment&&(c.ref=r?BI(r,s):s),y.cloneElement(i,c)}return y.Children.count(i)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var dX=Symbol("radix.slottable");function hX(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===dX}function fX(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...c)=>{const l=a(...c);return i(...c),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function pX(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function D5(e){const t=y.useRef({value:e,previous:e});return y.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var L5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),mX="VisuallyHidden",nx=y.forwardRef((e,t)=>o.jsx(At.span,{...e,ref:t,style:{...L5,...e.style}}));nx.displayName=mX;var gX=nx,vX=[" ","Enter","ArrowUp","ArrowDown"],yX=[" ","Enter"],wl="Select",[rx,ix,xX]=Gj(wl),[Vd]=Zs(wl,[xX,My]),ax=My(),[bX,lc]=Vd(wl),[wX,_X]=Vd(wl),B5=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:s,defaultValue:c,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:f,required:p,form:m}=e,g=ax(t),[v,x]=y.useState(null),[b,w]=y.useState(null),[_,j]=y.useState(!1),S=Iy(u),[N,P]=Zo({prop:r,defaultProp:i??!1,onChange:a,caller:wl}),[k,T]=Zo({prop:s,defaultProp:c,onChange:l,caller:wl}),A=y.useRef(null),O=v?m||!!v.closest("form"):!0,[D,L]=y.useState(new Set),G=Array.from(D).map(H=>H.props.value).join(";");return o.jsx(BH,{...g,children:o.jsxs(bX,{required:p,scope:t,trigger:v,onTriggerChange:x,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Ld(),value:k,onValueChange:T,open:N,onOpenChange:P,dir:S,triggerPointerDownPosRef:A,disabled:f,children:[o.jsx(rx.Provider,{scope:t,children:o.jsx(wX,{scope:e.__scopeSelect,onNativeOptionAdd:y.useCallback(H=>{L(K=>new Set(K).add(H))},[]),onNativeOptionRemove:y.useCallback(H=>{L(K=>{const Z=new Set(K);return Z.delete(H),Z})},[]),children:n})}),O?o.jsxs(lL,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:k,onChange:H=>T(H.target.value),disabled:f,form:m,children:[k===void 0?o.jsx("option",{value:""}):null,Array.from(D)]},G):null]})})};B5.displayName=wl;var F5="SelectTrigger",z5=y.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,a=ax(n),s=lc(F5,n),c=s.disabled||r,l=vn(t,s.onTriggerChange),u=ix(n),d=y.useRef("touch"),[h,f,p]=dL(g=>{const v=u().filter(w=>!w.disabled),x=v.find(w=>w.value===s.value),b=hL(v,g,x);b!==void 0&&s.onValueChange(b.value)}),m=g=>{c||(s.onOpenChange(!0),p()),g&&(s.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(HI,{asChild:!0,...a,children:o.jsx(At.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":uL(s.value)?"":void 0,...i,ref:l,onClick:lt(i.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&m(g)}),onPointerDown:lt(i.onPointerDown,g=>{d.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:lt(i.onKeyDown,g=>{const v=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(v&&g.key===" ")&&vX.includes(g.key)&&(m(),g.preventDefault())})})})});z5.displayName=F5;var U5="SelectValue",H5=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:s="",...c}=e,l=lc(U5,n),{onValueNodeHasChildrenChange:u}=l,d=a!==void 0,h=vn(t,l.onValueNodeChange);return ci(()=>{u(d)},[u,d]),o.jsx(At.span,{...c,ref:h,style:{pointerEvents:"none"},children:uL(l.value)?o.jsx(o.Fragment,{children:s}):a})});H5.displayName=U5;var jX="SelectIcon",V5=y.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return o.jsx(At.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});V5.displayName=jX;var SX="SelectPortal",G5=e=>o.jsx(VI,{asChild:!0,...e});G5.displayName=SX;var _l="SelectContent",W5=y.forwardRef((e,t)=>{const n=lc(_l,e.__scopeSelect),[r,i]=y.useState();if(ci(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Oy.createPortal(o.jsx(q5,{scope:e.__scopeSelect,children:o.jsx(rx.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(K5,{...e,ref:t})});W5.displayName=_l;var ba=10,[q5,uc]=Vd(_l),EX="SelectContentImpl",NX=lX("SelectContent.RemoveScroll"),K5=y.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:s,side:c,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v,...x}=e,b=lc(_l,n),[w,_]=y.useState(null),[j,S]=y.useState(null),N=vn(t,Ee=>_(Ee)),[P,k]=y.useState(null),[T,A]=y.useState(null),O=ix(n),[D,L]=y.useState(!1),G=y.useRef(!1);y.useEffect(()=>{if(w)return IH(w)},[w]),MH();const H=y.useCallback(Ee=>{const[se,...X]=O().map(W=>W.ref.current),[ne]=X.slice(-1),ae=document.activeElement;for(const W of Ee)if(W===ae||(W==null||W.scrollIntoView({block:"nearest"}),W===se&&j&&(j.scrollTop=0),W===ne&&j&&(j.scrollTop=j.scrollHeight),W==null||W.focus(),document.activeElement!==ae))return},[O,j]),K=y.useCallback(()=>H([P,w]),[H,P,w]);y.useEffect(()=>{D&&K()},[D,K]);const{onOpenChange:Z,triggerPointerDownPosRef:q}=b;y.useEffect(()=>{if(w){let Ee={x:0,y:0};const se=ne=>{var ae,W;Ee={x:Math.abs(Math.round(ne.pageX)-(((ae=q.current)==null?void 0:ae.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((W=q.current)==null?void 0:W.y)??0))}},X=ne=>{Ee.x<=10&&Ee.y<=10?ne.preventDefault():w.contains(ne.target)||Z(!1),document.removeEventListener("pointermove",se),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",X,{capture:!0})}}},[w,Z,q]),y.useEffect(()=>{const Ee=()=>Z(!1);return window.addEventListener("blur",Ee),window.addEventListener("resize",Ee),()=>{window.removeEventListener("blur",Ee),window.removeEventListener("resize",Ee)}},[Z]);const[le,_e]=dL(Ee=>{const se=O().filter(ae=>!ae.disabled),X=se.find(ae=>ae.ref.current===document.activeElement),ne=hL(se,Ee,X);ne&&setTimeout(()=>ne.ref.current.focus())}),re=y.useCallback((Ee,se,X)=>{const ne=!G.current&&!X;(b.value!==void 0&&b.value===se||ne)&&(k(Ee),ne&&(G.current=!0))},[b.value]),de=y.useCallback(()=>w==null?void 0:w.focus(),[w]),Se=y.useCallback((Ee,se,X)=>{const ne=!G.current&&!X;(b.value!==void 0&&b.value===se||ne)&&A(Ee)},[b.value]),nt=r==="popper"?A_:Y5,St=nt===A_?{side:c,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v}:{};return o.jsx(q5,{scope:n,content:w,viewport:j,onViewportChange:S,itemRefCallback:re,selectedItem:P,onItemLeave:de,itemTextRefCallback:Se,focusSelectedItem:K,selectedItemText:T,position:r,isPositioned:D,searchRef:le,children:o.jsx(DH,{as:NX,allowPinchZoom:!0,children:o.jsx(LH,{asChild:!0,trapped:b.open,onMountAutoFocus:Ee=>{Ee.preventDefault()},onUnmountAutoFocus:lt(i,Ee=>{var se;(se=b.trigger)==null||se.focus({preventScroll:!0}),Ee.preventDefault()}),children:o.jsx(GI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:Ee=>Ee.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:o.jsx(nt,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:Ee=>Ee.preventDefault(),...x,...St,onPlaced:()=>L(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:lt(x.onKeyDown,Ee=>{const se=Ee.ctrlKey||Ee.altKey||Ee.metaKey;if(Ee.key==="Tab"&&Ee.preventDefault(),!se&&Ee.key.length===1&&_e(Ee.key),["ArrowUp","ArrowDown","Home","End"].includes(Ee.key)){let ne=O().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(Ee.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ee.key)){const ae=Ee.target,W=ne.indexOf(ae);ne=ne.slice(W+1)}setTimeout(()=>H(ne)),Ee.preventDefault()}})})})})})})});K5.displayName=EX;var PX="SelectItemAlignedPosition",Y5=y.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,a=lc(_l,n),s=uc(_l,n),[c,l]=y.useState(null),[u,d]=y.useState(null),h=vn(t,N=>d(N)),f=ix(n),p=y.useRef(!1),m=y.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:x,focusSelectedItem:b}=s,w=y.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&u&&g&&v&&x){const N=a.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),k=a.valueNode.getBoundingClientRect(),T=x.getBoundingClientRect();if(a.dir!=="rtl"){const ae=T.left-P.left,W=k.left-ae,Re=N.left-W,Pe=N.width+Re,Ve=Math.max(Pe,P.width),Ct=window.innerWidth-ba,qt=a_(W,[ba,Math.max(ba,Ct-Ve)]);c.style.minWidth=Pe+"px",c.style.left=qt+"px"}else{const ae=P.right-T.right,W=window.innerWidth-k.right-ae,Re=window.innerWidth-N.right-W,Pe=N.width+Re,Ve=Math.max(Pe,P.width),Ct=window.innerWidth-ba,qt=a_(W,[ba,Math.max(ba,Ct-Ve)]);c.style.minWidth=Pe+"px",c.style.right=qt+"px"}const A=f(),O=window.innerHeight-ba*2,D=g.scrollHeight,L=window.getComputedStyle(u),G=parseInt(L.borderTopWidth,10),H=parseInt(L.paddingTop,10),K=parseInt(L.borderBottomWidth,10),Z=parseInt(L.paddingBottom,10),q=G+H+D+Z+K,le=Math.min(v.offsetHeight*5,q),_e=window.getComputedStyle(g),re=parseInt(_e.paddingTop,10),de=parseInt(_e.paddingBottom,10),Se=N.top+N.height/2-ba,nt=O-Se,St=v.offsetHeight/2,Ee=v.offsetTop+St,se=G+H+Ee,X=q-se;if(se<=Se){const ae=A.length>0&&v===A[A.length-1].ref.current;c.style.bottom="0px";const W=u.clientHeight-g.offsetTop-g.offsetHeight,Re=Math.max(nt,St+(ae?de:0)+W+K),Pe=se+Re;c.style.height=Pe+"px"}else{const ae=A.length>0&&v===A[0].ref.current;c.style.top="0px";const Re=Math.max(Se,G+g.offsetTop+(ae?re:0)+St)+X;c.style.height=Re+"px",g.scrollTop=se-Se+g.offsetTop}c.style.margin=`${ba}px 0`,c.style.minHeight=le+"px",c.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,c,u,g,v,x,a.dir,r]);ci(()=>w(),[w]);const[_,j]=y.useState();ci(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const S=y.useCallback(N=>{N&&m.current===!0&&(w(),b==null||b(),m.current=!1)},[w,b]);return o.jsx(CX,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:p,onScrollButtonChange:S,children:o.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:o.jsx(At.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Y5.displayName=PX;var kX="SelectPopperPosition",A_=y.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ba,...a}=e,s=ax(n);return o.jsx(WI,{...s,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});A_.displayName=kX;var[CX,FS]=Vd(_l,{}),T_="SelectViewport",X5=y.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,a=uc(T_,n),s=FS(T_,n),c=vn(t,a.onViewportChange),l=y.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(rx.Slot,{scope:n,children:o.jsx(At.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:lt(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=s;if(f!=null&&f.current&&h){const p=Math.abs(l.current-d.scrollTop);if(p>0){const m=window.innerHeight-ba*2,g=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),x=Math.max(g,v);if(x<m){const b=x+p,w=Math.min(m,b),_=b-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});X5.displayName=T_;var Z5="SelectGroup",[AX,TX]=Vd(Z5),OX=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Ld();return o.jsx(AX,{scope:n,id:i,children:o.jsx(At.div,{role:"group","aria-labelledby":i,...r,ref:t})})});OX.displayName=Z5;var J5="SelectLabel",Q5=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=TX(J5,n);return o.jsx(At.div,{id:i.id,...r,ref:t})});Q5.displayName=J5;var mv="SelectItem",[RX,eL]=Vd(mv),tL=y.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...s}=e,c=lc(mv,n),l=uc(mv,n),u=c.value===r,[d,h]=y.useState(a??""),[f,p]=y.useState(!1),m=vn(t,b=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,b,r,i)}),g=Ld(),v=y.useRef("touch"),x=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(RX,{scope:n,value:r,disabled:i,textId:g,isSelected:u,onItemTextChange:y.useCallback(b=>{h(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:o.jsx(rx.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:o.jsx(At.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:m,onFocus:lt(s.onFocus,()=>p(!0)),onBlur:lt(s.onBlur,()=>p(!1)),onClick:lt(s.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:lt(s.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:lt(s.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:lt(s.onPointerMove,b=>{var w;v.current=b.pointerType,i?(w=l.onItemLeave)==null||w.call(l):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:lt(s.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:lt(s.onKeyDown,b=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&b.key===" "||(yX.includes(b.key)&&x(),b.key===" "&&b.preventDefault())})})})})});tL.displayName=mv;var tf="SelectItemText",nL=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...a}=e,s=lc(tf,n),c=uc(tf,n),l=eL(tf,n),u=_X(tf,n),[d,h]=y.useState(null),f=vn(t,x=>h(x),l.onItemTextChange,x=>{var b;return(b=c.itemTextRefCallback)==null?void 0:b.call(c,x,l.value,l.disabled)}),p=d==null?void 0:d.textContent,m=y.useMemo(()=>o.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return ci(()=>(g(m),()=>v(m)),[g,v,m]),o.jsxs(o.Fragment,{children:[o.jsx(At.span,{id:l.textId,...a,ref:f}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Oy.createPortal(a.children,s.valueNode):null]})});nL.displayName=tf;var rL="SelectItemIndicator",iL=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return eL(rL,n).isSelected?o.jsx(At.span,{"aria-hidden":!0,...r,ref:t}):null});iL.displayName=rL;var O_="SelectScrollUpButton",aL=y.forwardRef((e,t)=>{const n=uc(O_,e.__scopeSelect),r=FS(O_,e.__scopeSelect),[i,a]=y.useState(!1),s=vn(t,r.onScrollButtonChange);return ci(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=l.scrollTop>0;a(u)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?o.jsx(oL,{...e,ref:s,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});aL.displayName=O_;var R_="SelectScrollDownButton",sL=y.forwardRef((e,t)=>{const n=uc(R_,e.__scopeSelect),r=FS(R_,e.__scopeSelect),[i,a]=y.useState(!1),s=vn(t,r.onScrollButtonChange);return ci(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;a(d)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?o.jsx(oL,{...e,ref:s,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});sL.displayName=R_;var oL=y.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,a=uc("SelectScrollButton",n),s=y.useRef(null),c=ix(n),l=y.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return y.useEffect(()=>()=>l(),[l]),ci(()=>{var d;const u=c().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[c]),o.jsx(At.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:lt(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:lt(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:lt(i.onPointerLeave,()=>{l()})})}),$X="SelectSeparator",cL=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(At.div,{"aria-hidden":!0,...r,ref:t})});cL.displayName=$X;var $_="SelectArrow",IX=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=ax(n),a=lc($_,n),s=uc($_,n);return a.open&&s.position==="popper"?o.jsx(qI,{...i,...r,ref:t}):null});IX.displayName=$_;var MX="SelectBubbleInput",lL=y.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=y.useRef(null),a=vn(r,i),s=D5(t);return y.useEffect(()=>{const c=i.current;if(!c)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("change",{bubbles:!0});d.call(c,t),c.dispatchEvent(h)}},[s,t]),o.jsx(At.select,{...n,style:{...L5,...n.style},ref:a,defaultValue:t})});lL.displayName=MX;function uL(e){return e===""||e===void 0}function dL(e){const t=Pi(e),n=y.useRef(""),r=y.useRef(0),i=y.useCallback(s=>{const c=n.current+s;t(c),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(c)},[t]),a=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function hL(e,t,n){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let s=DX(e,Math.max(a,0));i.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function DX(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var LX=B5,fL=z5,BX=H5,FX=V5,zX=G5,pL=W5,UX=X5,mL=Q5,gL=tL,HX=nL,VX=iL,vL=aL,yL=sL,xL=cL;const es=LX,ts=BX,Oa=y.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(fL,{ref:r,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx(FX,{asChild:!0,children:o.jsx(_i,{className:"h-4 w-4 opacity-50"})})]}));Oa.displayName=fL.displayName;const bL=y.forwardRef(({className:e,...t},n)=>o.jsx(vL,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(xa,{className:"h-4 w-4"})}));bL.displayName=vL.displayName;const wL=y.forwardRef(({className:e,...t},n)=>o.jsx(yL,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(_i,{className:"h-4 w-4"})}));wL.displayName=yL.displayName;const Ra=y.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>o.jsx(zX,{children:o.jsxs(pL,{ref:i,className:ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(bL,{}),o.jsx(UX,{className:ye("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(wL,{})]})}));Ra.displayName=pL.displayName;const GX=y.forwardRef(({className:e,...t},n)=>o.jsx(mL,{ref:n,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));GX.displayName=mL.displayName;const Qe=y.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(gL,{ref:r,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(VX,{children:o.jsx(si,{className:"h-4 w-4"})})}),o.jsx(HX,{children:t})]}));Qe.displayName=gL.displayName;const WX=y.forwardRef(({className:e,...t},n)=>o.jsx(xL,{ref:n,className:ye("-mx-1 my-1 h-px bg-muted",e),...t}));WX.displayName=xL.displayName;var qX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],KX=qX.reduce((e,t)=>{const n=Mp(`Primitive.${t}`),r=y.forwardRef((i,a)=>{const{asChild:s,...c}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),YX="Separator",M2="horizontal",XX=["horizontal","vertical"],_L=y.forwardRef((e,t)=>{const{decorative:n,orientation:r=M2,...i}=e,a=ZX(r)?r:M2,c=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(KX.div,{"data-orientation":a,...c,...i,ref:t})});_L.displayName=YX;function ZX(e){return XX.includes(e)}var jL=_L;const nf=y.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},i)=>o.jsx(jL,{ref:i,decorative:n,orientation:t,className:ye("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));nf.displayName=jL.displayName;function JX({requestId:e,onClose:t}){var c;const{toast:n}=Ud(),{data:r,isLoading:i}=ku({queryKey:["dashboard-request-detail",e],queryFn:async()=>{const{data:{session:l}}=await oe.auth.getSession();if(!l)throw new Error("Not authenticated");const u=await fetch(`https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/bpmn-dashboard-api/requests/${e}`,{headers:{Authorization:`Bearer ${l.access_token}`}});if(!u.ok)throw new Error("Failed to fetch request details");return u.json()}}),a=l=>{navigator.clipboard.writeText(l),n({title:"Copied to clipboard",description:"Content has been copied to your clipboard"})},s=()=>{if(!(r!=null&&r.result_xml))return;const l=new Blob([r.result_xml],{type:"application/xml"}),u=window.URL.createObjectURL(l),d=document.createElement("a");d.href=u,d.download=`bpmn-${e}.xml`,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(u),document.body.removeChild(d)};return o.jsx(Xn,{open:!0,onOpenChange:t,children:o.jsxs(Bn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Request Details"}),o.jsx(Un,{children:(r==null?void 0:r.request_timestamp)&&new Date(r.request_timestamp).toLocaleString()})]}),i?o.jsx("div",{className:"text-center py-8",children:"Loading..."}):r?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"User"}),o.jsx("div",{className:"mt-1",children:r.user_email||"Unknown"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),o.jsx("div",{className:"mt-1",children:o.jsx(Zt,{variant:r.status==="error"?"destructive":"default",children:r.status})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Diagram Type"}),o.jsx("div",{className:"mt-1",children:o.jsx(Zt,{variant:"outline",children:r.diagram_type.toUpperCase()})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Source Function"}),o.jsx("div",{className:"mt-1 font-mono text-sm",children:r.source_function})]})]}),o.jsx(nf,{}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Original Prompt"}),o.jsx("div",{className:"bg-muted p-4 rounded-md text-sm whitespace-pre-wrap",children:r.original_prompt})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Performance Metrics"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:"Duration"}),o.jsx("div",{className:"text-lg font-semibold",children:r.generation_duration_ms?`${r.generation_duration_ms}ms`:"N/A"})]}),o.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:"Input Tokens"}),o.jsx("div",{className:"text-lg font-semibold",children:r.input_tokens||"N/A"})]}),o.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:"Output Tokens"}),o.jsx("div",{className:"text-lg font-semibold",children:r.output_tokens||"N/A"})]}),o.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:"Estimated Cost"}),o.jsxs("div",{className:"text-lg font-semibold",children:["$",((c=r.estimated_cost_usd)==null?void 0:c.toFixed(6))||"0.000000"]})]}),o.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:"Cache Hit"}),o.jsx("div",{className:"text-lg font-semibold",children:r.cache_hit?"Yes":"No"})]}),r.cache_similarity_score&&o.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:"Similarity"}),o.jsxs("div",{className:"text-lg font-semibold",children:[(r.cache_similarity_score*100).toFixed(1),"%"]})]}),r.detected_language&&o.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:"Language"}),o.jsx("div",{className:"text-lg font-semibold",children:r.detected_language})]}),r.complexity_level&&o.jsxs("div",{className:"bg-muted/50 p-3 rounded-md",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:"Complexity"}),o.jsx("div",{className:"text-lg font-semibold capitalize",children:r.complexity_level})]})]})]}),r.sub_requests&&r.sub_requests.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(nf,{}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Sub-diagrams (",r.sub_requests.length,")"]}),o.jsx("div",{className:"space-y-2",children:r.sub_requests.map((l,u)=>o.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"font-medium text-sm",children:["Sub-diagram ",u+1]}),o.jsx("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:l.original_prompt})]}),o.jsx(Zt,{variant:l.status==="error"?"destructive":"default",children:l.status})]})},l.id))})]})]}),r.result_xml&&o.jsxs(o.Fragment,{children:[o.jsx(nf,{}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"BPMN XML"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>a(r.result_xml),children:[o.jsx(ZW,{className:"h-3 w-3 mr-1"}),"Copy"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:s,children:[o.jsx(vl,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),o.jsx("div",{className:"bg-muted p-4 rounded-md text-xs font-mono overflow-x-auto max-h-[300px] overflow-y-auto",children:r.result_xml})]})]}),r.error_message&&o.jsxs(o.Fragment,{children:[o.jsx(nf,{}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Error Details"}),o.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 p-4 rounded-md",children:[o.jsx("div",{className:"font-semibold text-destructive mb-2",children:r.error_message}),r.error_stack&&o.jsx("pre",{className:"text-xs font-mono mt-2 overflow-x-auto",children:r.error_stack})]})]})]})]}):o.jsx("div",{className:"text-center py-8",children:"Request not found"})]})})}function QX(){var m,g;const[e,t]=y.useState(1),[n,r]=y.useState(""),[i,a]=y.useState("all"),[s,c]=y.useState("all"),[l,u]=y.useState(null),{data:d,isLoading:h}=ku({queryKey:["dashboard-requests",e,n,i,s],queryFn:async()=>{const{data:{session:v}}=await oe.auth.getSession();if(!v)throw new Error("Not authenticated");const x=new URLSearchParams({page:e.toString(),limit:"50"});n&&x.append("search",n),i!=="all"&&x.append("status",i),s!=="all"&&x.append("diagramType",s);const b=await fetch(`https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/bpmn-dashboard-api/requests?${x}`,{headers:{Authorization:`Bearer ${v.access_token}`}});if(!b.ok)throw new Error("Failed to fetch requests");return b.json()}}),f=async()=>{const{data:{session:v}}=await oe.auth.getSession();if(!v)return;const b=await(await fetch("https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/bpmn-dashboard-api/export",{method:"POST",headers:{Authorization:`Bearer ${v.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({format:"csv",filters:{status:i!=="all"?i:void 0,diagramType:s!=="all"?s:void 0}})})).blob(),w=window.URL.createObjectURL(b),_=document.createElement("a");_.href=w,_.download=`bpmn-dashboard-export-${Date.now()}.csv`,document.body.appendChild(_),_.click(),window.URL.revokeObjectURL(w),document.body.removeChild(_)},p=v=>{const x={success:"default",cached:"secondary",error:"destructive",pending:"outline"};return o.jsx(Zt,{variant:x[v]||"outline",children:v})};return o.jsxs(o.Fragment,{children:[o.jsxs(ue,{children:[o.jsx(ve,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx(be,{children:"Generation Requests"}),o.jsx(Te,{children:"View and filter all BPMN generation requests"})]}),o.jsxs(V,{onClick:f,variant:"outline",size:"sm",children:[o.jsx(vl,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),o.jsxs(pe,{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-4 flex-wrap",children:[o.jsx("div",{className:"flex-1 min-w-[200px]",children:o.jsxs("div",{className:"relative",children:[o.jsx(Xu,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),o.jsx(pn,{placeholder:"Search prompts...",value:n,onChange:v=>r(v.target.value),className:"pl-8"})]})}),o.jsxs(es,{value:i,onValueChange:a,children:[o.jsx(Oa,{className:"w-[150px]",children:o.jsx(ts,{placeholder:"Status"})}),o.jsxs(Ra,{children:[o.jsx(Qe,{value:"all",children:"All Status"}),o.jsx(Qe,{value:"success",children:"Success"}),o.jsx(Qe,{value:"cached",children:"Cached"}),o.jsx(Qe,{value:"error",children:"Error"})]})]}),o.jsxs(es,{value:s,onValueChange:c,children:[o.jsx(Oa,{className:"w-[150px]",children:o.jsx(ts,{placeholder:"Type"})}),o.jsxs(Ra,{children:[o.jsx(Qe,{value:"all",children:"All Types"}),o.jsx(Qe,{value:"bpmn",children:"BPMN"}),o.jsx(Qe,{value:"pid",children:"PID"})]})]})]}),o.jsx("div",{className:"rounded-md border",children:o.jsxs(sc,{children:[o.jsx(oc,{children:o.jsxs(mr,{children:[o.jsx(_t,{children:"Timestamp"}),o.jsx(_t,{children:"User"}),o.jsx(_t,{children:"Prompt"}),o.jsx(_t,{children:"Type"}),o.jsx(_t,{children:"Status"}),o.jsx(_t,{children:"Duration"}),o.jsx(_t,{children:"Cache"}),o.jsx(_t,{children:"Cost"}),o.jsx(_t,{children:"Source"}),o.jsx(_t,{children:"Result XML"})]})}),o.jsx(cc,{children:h?o.jsx(mr,{children:o.jsx(vt,{colSpan:9,className:"text-center",children:"Loading..."})}):((m=d==null?void 0:d.data)==null?void 0:m.length)===0?o.jsx(mr,{children:o.jsx(vt,{colSpan:9,className:"text-center",children:"No requests found"})}):(g=d==null?void 0:d.data)==null?void 0:g.map(v=>{var x;return o.jsxs(mr,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>u(v.id),children:[o.jsx(vt,{className:"font-mono text-xs",children:new Date(v.request_timestamp).toLocaleString()}),o.jsx(vt,{className:"text-sm",children:v.user_email}),o.jsx(vt,{className:"max-w-[300px] truncate",children:v.original_prompt}),o.jsx(vt,{children:o.jsx(Zt,{variant:"outline",children:v.diagram_type.toUpperCase()})}),o.jsx(vt,{children:p(v.status)}),o.jsx(vt,{className:"font-mono text-xs",children:v.generation_duration_ms?`${v.generation_duration_ms}ms`:"-"}),o.jsx(vt,{children:v.cache_hit?"":""}),o.jsxs(vt,{className:"font-mono text-xs",children:["$",((x=v.estimated_cost_usd)==null?void 0:x.toFixed(6))||"0.000000"]}),o.jsx(vt,{className:"font-mono text-xs text-muted-foreground",children:v.source_function}),o.jsx(vt,{className:"max-w-[200px]",children:v.result_xml?o.jsxs("code",{className:"text-xs bg-muted px-2 py-1 rounded block truncate",children:[v.result_xml.substring(0,50),"..."]}):o.jsx("span",{className:"text-xs text-muted-foreground",children:""})})]},v.id)})})]})}),(d==null?void 0:d.pagination)&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",d.pagination.page," of ",d.pagination.totalPages," (",d.pagination.total," ","total)"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>t(v=>Math.max(1,v-1)),disabled:e===1,children:[o.jsx(du,{className:"h-4 w-4"}),"Previous"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>t(v=>v+1),disabled:e>=(d.pagination.totalPages||1),children:["Next",o.jsx(Yu,{className:"h-4 w-4"})]})]})]})]})]}),l&&o.jsx(JX,{requestId:l,onClose:()=>u(null)})]})}var eZ=Array.isArray,ui=eZ,tZ=typeof Um=="object"&&Um&&Um.Object===Object&&Um,SL=tZ,nZ=SL,rZ=typeof self=="object"&&self&&self.Object===Object&&self,iZ=nZ||rZ||Function("return this")(),ls=iZ,aZ=ls,sZ=aZ.Symbol,Hp=sZ,D2=Hp,EL=Object.prototype,oZ=EL.hasOwnProperty,cZ=EL.toString,Ph=D2?D2.toStringTag:void 0;function lZ(e){var t=oZ.call(e,Ph),n=e[Ph];try{e[Ph]=void 0;var r=!0}catch{}var i=cZ.call(e);return r&&(t?e[Ph]=n:delete e[Ph]),i}var uZ=lZ,dZ=Object.prototype,hZ=dZ.toString;function fZ(e){return hZ.call(e)}var pZ=fZ,L2=Hp,mZ=uZ,gZ=pZ,vZ="[object Null]",yZ="[object Undefined]",B2=L2?L2.toStringTag:void 0;function xZ(e){return e==null?e===void 0?yZ:vZ:B2&&B2 in Object(e)?mZ(e):gZ(e)}var Qs=xZ;function bZ(e){return e!=null&&typeof e=="object"}var eo=bZ,wZ=Qs,_Z=eo,jZ="[object Symbol]";function SZ(e){return typeof e=="symbol"||_Z(e)&&wZ(e)==jZ}var Gd=SZ,EZ=ui,NZ=Gd,PZ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kZ=/^\w*$/;function CZ(e,t){if(EZ(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||NZ(e)?!0:kZ.test(e)||!PZ.test(e)||t!=null&&e in Object(t)}var zS=CZ;function AZ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var dc=AZ;const Wd=cn(dc);var TZ=Qs,OZ=dc,RZ="[object AsyncFunction]",$Z="[object Function]",IZ="[object GeneratorFunction]",MZ="[object Proxy]";function DZ(e){if(!OZ(e))return!1;var t=TZ(e);return t==$Z||t==IZ||t==RZ||t==MZ}var US=DZ;const ct=cn(US);var LZ=ls,BZ=LZ["__core-js_shared__"],FZ=BZ,U0=FZ,F2=function(){var e=/[^.]+$/.exec(U0&&U0.keys&&U0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function zZ(e){return!!F2&&F2 in e}var UZ=zZ,HZ=Function.prototype,VZ=HZ.toString;function GZ(e){if(e!=null){try{return VZ.call(e)}catch{}try{return e+""}catch{}}return""}var NL=GZ,WZ=US,qZ=UZ,KZ=dc,YZ=NL,XZ=/[\\^$.*+?()[\]{}|]/g,ZZ=/^\[object .+?Constructor\]$/,JZ=Function.prototype,QZ=Object.prototype,eJ=JZ.toString,tJ=QZ.hasOwnProperty,nJ=RegExp("^"+eJ.call(tJ).replace(XZ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rJ(e){if(!KZ(e)||qZ(e))return!1;var t=WZ(e)?nJ:ZZ;return t.test(YZ(e))}var iJ=rJ;function aJ(e,t){return e==null?void 0:e[t]}var sJ=aJ,oJ=iJ,cJ=sJ;function lJ(e,t){var n=cJ(e,t);return oJ(n)?n:void 0}var Cl=lJ,uJ=Cl,dJ=uJ(Object,"create"),sx=dJ,z2=sx;function hJ(){this.__data__=z2?z2(null):{},this.size=0}var fJ=hJ;function pJ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var mJ=pJ,gJ=sx,vJ="__lodash_hash_undefined__",yJ=Object.prototype,xJ=yJ.hasOwnProperty;function bJ(e){var t=this.__data__;if(gJ){var n=t[e];return n===vJ?void 0:n}return xJ.call(t,e)?t[e]:void 0}var wJ=bJ,_J=sx,jJ=Object.prototype,SJ=jJ.hasOwnProperty;function EJ(e){var t=this.__data__;return _J?t[e]!==void 0:SJ.call(t,e)}var NJ=EJ,PJ=sx,kJ="__lodash_hash_undefined__";function CJ(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=PJ&&t===void 0?kJ:t,this}var AJ=CJ,TJ=fJ,OJ=mJ,RJ=wJ,$J=NJ,IJ=AJ;function qd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}qd.prototype.clear=TJ;qd.prototype.delete=OJ;qd.prototype.get=RJ;qd.prototype.has=$J;qd.prototype.set=IJ;var MJ=qd;function DJ(){this.__data__=[],this.size=0}var LJ=DJ;function BJ(e,t){return e===t||e!==e&&t!==t}var HS=BJ,FJ=HS;function zJ(e,t){for(var n=e.length;n--;)if(FJ(e[n][0],t))return n;return-1}var ox=zJ,UJ=ox,HJ=Array.prototype,VJ=HJ.splice;function GJ(e){var t=this.__data__,n=UJ(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():VJ.call(t,n,1),--this.size,!0}var WJ=GJ,qJ=ox;function KJ(e){var t=this.__data__,n=qJ(t,e);return n<0?void 0:t[n][1]}var YJ=KJ,XJ=ox;function ZJ(e){return XJ(this.__data__,e)>-1}var JJ=ZJ,QJ=ox;function eQ(e,t){var n=this.__data__,r=QJ(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var tQ=eQ,nQ=LJ,rQ=WJ,iQ=YJ,aQ=JJ,sQ=tQ;function Kd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Kd.prototype.clear=nQ;Kd.prototype.delete=rQ;Kd.prototype.get=iQ;Kd.prototype.has=aQ;Kd.prototype.set=sQ;var cx=Kd,oQ=Cl,cQ=ls,lQ=oQ(cQ,"Map"),VS=lQ,U2=MJ,uQ=cx,dQ=VS;function hQ(){this.size=0,this.__data__={hash:new U2,map:new(dQ||uQ),string:new U2}}var fQ=hQ;function pQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var mQ=pQ,gQ=mQ;function vQ(e,t){var n=e.__data__;return gQ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var lx=vQ,yQ=lx;function xQ(e){var t=yQ(this,e).delete(e);return this.size-=t?1:0,t}var bQ=xQ,wQ=lx;function _Q(e){return wQ(this,e).get(e)}var jQ=_Q,SQ=lx;function EQ(e){return SQ(this,e).has(e)}var NQ=EQ,PQ=lx;function kQ(e,t){var n=PQ(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var CQ=kQ,AQ=fQ,TQ=bQ,OQ=jQ,RQ=NQ,$Q=CQ;function Yd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Yd.prototype.clear=AQ;Yd.prototype.delete=TQ;Yd.prototype.get=OQ;Yd.prototype.has=RQ;Yd.prototype.set=$Q;var GS=Yd,PL=GS,IQ="Expected a function";function WS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(IQ);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=e.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(WS.Cache||PL),n}WS.Cache=PL;var kL=WS;const MQ=cn(kL);var DQ=kL,LQ=500;function BQ(e){var t=DQ(e,function(r){return n.size===LQ&&n.clear(),r}),n=t.cache;return t}var FQ=BQ,zQ=FQ,UQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,HQ=/\\(\\)?/g,VQ=zQ(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(UQ,function(n,r,i,a){t.push(i?a.replace(HQ,"$1"):r||n)}),t}),GQ=VQ;function WQ(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var qS=WQ,H2=Hp,qQ=qS,KQ=ui,YQ=Gd,V2=H2?H2.prototype:void 0,G2=V2?V2.toString:void 0;function CL(e){if(typeof e=="string")return e;if(KQ(e))return qQ(e,CL)+"";if(YQ(e))return G2?G2.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var XQ=CL,ZQ=XQ;function JQ(e){return e==null?"":ZQ(e)}var AL=JQ,QQ=ui,eee=zS,tee=GQ,nee=AL;function ree(e,t){return QQ(e)?e:eee(e,t)?[e]:tee(nee(e))}var TL=ree,iee=Gd;function aee(e){if(typeof e=="string"||iee(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ux=aee,see=TL,oee=ux;function cee(e,t){t=see(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[oee(t[n++])];return n&&n==r?e:void 0}var KS=cee,lee=KS;function uee(e,t,n){var r=e==null?void 0:lee(e,t);return r===void 0?n:r}var OL=uee;const Oi=cn(OL);function dee(e){return e==null}var hee=dee;const gt=cn(hee);var fee=Qs,pee=ui,mee=eo,gee="[object String]";function vee(e){return typeof e=="string"||!pee(e)&&mee(e)&&fee(e)==gee}var yee=vee;const jl=cn(yee);var RL={exports:{}},rn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS=Symbol.for("react.element"),XS=Symbol.for("react.portal"),dx=Symbol.for("react.fragment"),hx=Symbol.for("react.strict_mode"),fx=Symbol.for("react.profiler"),px=Symbol.for("react.provider"),mx=Symbol.for("react.context"),xee=Symbol.for("react.server_context"),gx=Symbol.for("react.forward_ref"),vx=Symbol.for("react.suspense"),yx=Symbol.for("react.suspense_list"),xx=Symbol.for("react.memo"),bx=Symbol.for("react.lazy"),bee=Symbol.for("react.offscreen"),$L;$L=Symbol.for("react.module.reference");function ia(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case YS:switch(e=e.type,e){case dx:case fx:case hx:case vx:case yx:return e;default:switch(e=e&&e.$$typeof,e){case xee:case mx:case gx:case bx:case xx:case px:return e;default:return t}}case XS:return t}}}rn.ContextConsumer=mx;rn.ContextProvider=px;rn.Element=YS;rn.ForwardRef=gx;rn.Fragment=dx;rn.Lazy=bx;rn.Memo=xx;rn.Portal=XS;rn.Profiler=fx;rn.StrictMode=hx;rn.Suspense=vx;rn.SuspenseList=yx;rn.isAsyncMode=function(){return!1};rn.isConcurrentMode=function(){return!1};rn.isContextConsumer=function(e){return ia(e)===mx};rn.isContextProvider=function(e){return ia(e)===px};rn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===YS};rn.isForwardRef=function(e){return ia(e)===gx};rn.isFragment=function(e){return ia(e)===dx};rn.isLazy=function(e){return ia(e)===bx};rn.isMemo=function(e){return ia(e)===xx};rn.isPortal=function(e){return ia(e)===XS};rn.isProfiler=function(e){return ia(e)===fx};rn.isStrictMode=function(e){return ia(e)===hx};rn.isSuspense=function(e){return ia(e)===vx};rn.isSuspenseList=function(e){return ia(e)===yx};rn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dx||e===fx||e===hx||e===vx||e===yx||e===bee||typeof e=="object"&&e!==null&&(e.$$typeof===bx||e.$$typeof===xx||e.$$typeof===px||e.$$typeof===mx||e.$$typeof===gx||e.$$typeof===$L||e.getModuleId!==void 0)};rn.typeOf=ia;RL.exports=rn;var wee=RL.exports,_ee=Qs,jee=eo,See="[object Number]";function Eee(e){return typeof e=="number"||jee(e)&&_ee(e)==See}var IL=Eee;const Nee=cn(IL);var Pee=IL;function kee(e){return Pee(e)&&e!=+e}var Cee=kee;const Vp=cn(Cee);var Kr=function(t){return t===0?0:t>0?1:-1},Xc=function(t){return jl(t)&&t.indexOf("%")===t.length-1},we=function(t){return Nee(t)&&!Vp(t)},Aee=function(t){return gt(t)},cr=function(t){return we(t)||jl(t)},Tee=0,Xd=function(t){var n=++Tee;return"".concat(t||"").concat(n)},Yr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(t)&&!jl(t))return r;var a;if(Xc(t)){var s=t.indexOf("%");a=n*parseFloat(t.slice(0,s))/100}else a=+t;return Vp(a)&&(a=r),i&&a>n&&(a=n),a},To=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Oee=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},Ni=function(t,n){return we(t)&&we(n)?function(r){return t+r*(n-t)}:function(){return n}};function gv(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Oi(r,t))===n})}var Ree=function(t,n){return we(t)&&we(n)?t-n:jl(t)&&jl(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function Cu(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function I_(e){"@babel/helpers - typeof";return I_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I_(e)}var $ee=["viewBox","children"],Iee=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],W2=["points","pathLength"],H0={svg:$ee,polygon:W2,polyline:W2},ZS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],vv=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(y.isValidElement(t)&&(r=t.props),!Wd(r))return null;var i={};return Object.keys(r).forEach(function(a){ZS.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},Mee=function(t,n,r){return function(i){return t(n,r,i),null}},Sl=function(t,n,r){if(!Wd(t)||I_(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var s=t[a];ZS.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=Mee(s,n,r))}),i},Dee=["children"],Lee=["children"];function q2(e,t){if(e==null)return{};var n=Bee(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Bee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function M_(e){"@babel/helpers - typeof";return M_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M_(e)}var K2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Y2=null,V0=null,JS=function e(t){if(t===Y2&&Array.isArray(V0))return V0;var n=[];return y.Children.forEach(t,function(r){gt(r)||(wee.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),V0=n,Y2=t,n};function Ri(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return Fs(i)}):r=[Fs(t)],JS(e).forEach(function(i){var a=Oi(i,"type.displayName")||Oi(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function Si(e,t){var n=Ri(e,t);return n&&n[0]}var X2=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!we(r)||r<=0||!we(i)||i<=0)},Fee=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],zee=function(t){return t&&t.type&&jl(t.type)&&Fee.indexOf(t.type)>=0},Uee=function(t){return t&&M_(t)==="object"&&"clipDot"in t},Hee=function(t,n,r,i){var a,s=(a=H0==null?void 0:H0[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!ct(t)&&(i&&s.includes(n)||Iee.includes(n))||r&&ZS.includes(n)},Ye=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(y.isValidElement(t)&&(i=t.props),!Wd(i))return null;var a={};return Object.keys(i).forEach(function(s){var c;Hee((c=i)===null||c===void 0?void 0:c[s],s,n,r)&&(a[s]=i[s])}),a},D_=function e(t,n){if(t===n)return!0;var r=y.Children.count(t);if(r!==y.Children.count(n))return!1;if(r===0)return!0;if(r===1)return Z2(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=t[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!e(a,s))return!1}else if(!Z2(a,s))return!1}return!0},Z2=function(t,n){if(gt(t)&&gt(n))return!0;if(!gt(t)&&!gt(n)){var r=t.props||{},i=r.children,a=q2(r,Dee),s=n.props||{},c=s.children,l=q2(s,Lee);return i&&c?Cu(a,l)&&D_(i,c):!i&&!c?Cu(a,l):!1}return!1},J2=function(t,n){var r=[],i={};return JS(t).forEach(function(a,s){if(zee(a))r.push(a);else if(a){var c=Fs(a.type),l=n[c]||{},u=l.handler,d=l.once;if(u&&(!d||!i[c])){var h=u(a,c,s);r.push(h),i[c]=!0}}}),r},Vee=function(t){var n=t&&t.type;return n&&K2[n]?K2[n]:null},Gee=function(t,n){return JS(n).indexOf(t)},Wee=["children","width","height","viewBox","className","style","title","desc"];function L_(){return L_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L_.apply(this,arguments)}function qee(e,t){if(e==null)return{};var n=Kee(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function B_(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,a=e.className,s=e.style,c=e.title,l=e.desc,u=qee(e,Wee),d=i||{width:n,height:r,x:0,y:0},h=ut("recharts-surface",a);return R.createElement("svg",L_({},Ye(u,!0,"svg"),{className:h,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),R.createElement("title",null,c),R.createElement("desc",null,l),t)}var Yee=["children","className"];function F_(){return F_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F_.apply(this,arguments)}function Xee(e,t){if(e==null)return{};var n=Zee(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Ht=R.forwardRef(function(e,t){var n=e.children,r=e.className,i=Xee(e,Yee),a=ut("recharts-layer",r);return R.createElement("g",F_({className:a},Ye(i,!0),{ref:t}),n)}),$a=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function Jee(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}var Qee=Jee,ete=Qee;function tte(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:ete(e,t,n)}var nte=tte,rte="\\ud800-\\udfff",ite="\\u0300-\\u036f",ate="\\ufe20-\\ufe2f",ste="\\u20d0-\\u20ff",ote=ite+ate+ste,cte="\\ufe0e\\ufe0f",lte="\\u200d",ute=RegExp("["+lte+rte+ote+cte+"]");function dte(e){return ute.test(e)}var ML=dte;function hte(e){return e.split("")}var fte=hte,DL="\\ud800-\\udfff",pte="\\u0300-\\u036f",mte="\\ufe20-\\ufe2f",gte="\\u20d0-\\u20ff",vte=pte+mte+gte,yte="\\ufe0e\\ufe0f",xte="["+DL+"]",z_="["+vte+"]",U_="\\ud83c[\\udffb-\\udfff]",bte="(?:"+z_+"|"+U_+")",LL="[^"+DL+"]",BL="(?:\\ud83c[\\udde6-\\uddff]){2}",FL="[\\ud800-\\udbff][\\udc00-\\udfff]",wte="\\u200d",zL=bte+"?",UL="["+yte+"]?",_te="(?:"+wte+"(?:"+[LL,BL,FL].join("|")+")"+UL+zL+")*",jte=UL+zL+_te,Ste="(?:"+[LL+z_+"?",z_,BL,FL,xte].join("|")+")",Ete=RegExp(U_+"(?="+U_+")|"+Ste+jte,"g");function Nte(e){return e.match(Ete)||[]}var Pte=Nte,kte=fte,Cte=ML,Ate=Pte;function Tte(e){return Cte(e)?Ate(e):kte(e)}var Ote=Tte,Rte=nte,$te=ML,Ite=Ote,Mte=AL;function Dte(e){return function(t){t=Mte(t);var n=$te(t)?Ite(t):void 0,r=n?n[0]:t.charAt(0),i=n?Rte(n,1).join(""):t.slice(1);return r[e]()+i}}var Lte=Dte,Bte=Lte,Fte=Bte("toUpperCase"),zte=Fte;const wx=cn(zte);function fn(e){return function(){return e}}const HL=Math.cos,yv=Math.sin,La=Math.sqrt,xv=Math.PI,_x=2*xv,H_=Math.PI,V_=2*H_,Dc=1e-6,Ute=V_-Dc;function VL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Hte(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return VL;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Vte{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?VL:Hte(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,c=this._y1,l=r-t,u=i-n,d=s-t,h=c-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Dc)if(!(Math.abs(h*l-u*d)>Dc)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-s,m=i-c,g=l*l+u*u,v=p*p+m*m,x=Math.sqrt(g),b=Math.sqrt(f),w=a*Math.tan((H_-Math.acos((g+f-v)/(2*x*b)))/2),_=w/b,j=w/x;Math.abs(_-1)>Dc&&this._append`L${t+_*d},${n+_*h}`,this._append`A${a},${a},0,0,${+(h*p>d*m)},${this._x1=t+j*l},${this._y1=n+j*u}`}}arc(t,n,r,i,a,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),l=r*Math.sin(i),u=t+c,d=n+l,h=1^s,f=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Dc||Math.abs(this._y1-d)>Dc)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%V_+V_),f>Ute?this._append`A${r},${r},0,1,${h},${t-c},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>Dc&&this._append`A${r},${r},0,${+(f>=H_)},${h},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function QS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Vte(t)}function eE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function GL(e){this._context=e}GL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function jx(e){return new GL(e)}function WL(e){return e[0]}function qL(e){return e[1]}function KL(e,t){var n=fn(!0),r=null,i=jx,a=null,s=QS(c);e=typeof e=="function"?e:e===void 0?WL:fn(e),t=typeof t=="function"?t:t===void 0?qL:fn(t);function c(l){var u,d=(l=eE(l)).length,h,f=!1,p;for(r==null&&(a=i(p=s())),u=0;u<=d;++u)!(u<d&&n(h=l[u],u,l))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(h,u,l),+t(h,u,l));if(p)return a=null,p+""||null}return c.x=function(l){return arguments.length?(e=typeof l=="function"?l:fn(+l),c):e},c.y=function(l){return arguments.length?(t=typeof l=="function"?l:fn(+l),c):t},c.defined=function(l){return arguments.length?(n=typeof l=="function"?l:fn(!!l),c):n},c.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),c):i},c.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),c):r},c}function eg(e,t,n){var r=null,i=fn(!0),a=null,s=jx,c=null,l=QS(u);e=typeof e=="function"?e:e===void 0?WL:fn(+e),t=typeof t=="function"?t:fn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?qL:fn(+n);function u(h){var f,p,m,g=(h=eE(h)).length,v,x=!1,b,w=new Array(g),_=new Array(g);for(a==null&&(c=s(b=l())),f=0;f<=g;++f){if(!(f<g&&i(v=h[f],f,h))===x)if(x=!x)p=f,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),m=f-1;m>=p;--m)c.point(w[m],_[m]);c.lineEnd(),c.areaEnd()}x&&(w[f]=+e(v,f,h),_[f]=+t(v,f,h),c.point(r?+r(v,f,h):w[f],n?+n(v,f,h):_[f]))}if(b)return c=null,b+""||null}function d(){return KL().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:fn(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:fn(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:fn(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:fn(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:fn(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:fn(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:fn(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(c=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=c=null:c=s(a=h),u):a},u}class YL{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Gte(e){return new YL(e,!0)}function Wte(e){return new YL(e,!1)}const tE={draw(e,t){const n=La(t/xv);e.moveTo(n,0),e.arc(0,0,n,0,_x)}},qte={draw(e,t){const n=La(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},XL=La(1/3),Kte=XL*2,Yte={draw(e,t){const n=La(t/Kte),r=n*XL;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Xte={draw(e,t){const n=La(t),r=-n/2;e.rect(r,r,n,n)}},Zte=.8908130915292852,ZL=yv(xv/10)/yv(7*xv/10),Jte=yv(_x/10)*ZL,Qte=-HL(_x/10)*ZL,ene={draw(e,t){const n=La(t*Zte),r=Jte*n,i=Qte*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const s=_x*a/5,c=HL(s),l=yv(s);e.lineTo(l*n,-c*n),e.lineTo(c*r-l*i,l*r+c*i)}e.closePath()}},G0=La(3),tne={draw(e,t){const n=-La(t/(G0*3));e.moveTo(0,n*2),e.lineTo(-G0*n,-n),e.lineTo(G0*n,-n),e.closePath()}},Bi=-.5,Fi=La(3)/2,G_=1/La(12),nne=(G_/2+1)*3,rne={draw(e,t){const n=La(t/nne),r=n/2,i=n*G_,a=r,s=n*G_+n,c=-a,l=s;e.moveTo(r,i),e.lineTo(a,s),e.lineTo(c,l),e.lineTo(Bi*r-Fi*i,Fi*r+Bi*i),e.lineTo(Bi*a-Fi*s,Fi*a+Bi*s),e.lineTo(Bi*c-Fi*l,Fi*c+Bi*l),e.lineTo(Bi*r+Fi*i,Bi*i-Fi*r),e.lineTo(Bi*a+Fi*s,Bi*s-Fi*a),e.lineTo(Bi*c+Fi*l,Bi*l-Fi*c),e.closePath()}};function ine(e,t){let n=null,r=QS(i);e=typeof e=="function"?e:fn(e||tE),t=typeof t=="function"?t:fn(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:fn(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:fn(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function bv(){}function wv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function JL(e){this._context=e}JL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ane(e){return new JL(e)}function QL(e){this._context=e}QL.prototype={areaStart:bv,areaEnd:bv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:wv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sne(e){return new QL(e)}function e4(e){this._context=e}e4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:wv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function one(e){return new e4(e)}function t4(e){this._context=e}t4.prototype={areaStart:bv,areaEnd:bv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function cne(e){return new t4(e)}function Q2(e){return e<0?-1:1}function eC(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),c=(a*i+s*r)/(r+i);return(Q2(a)+Q2(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(c))||0}function tC(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function W0(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,c=(a-r)/3;e._context.bezierCurveTo(r+c,i+c*t,a-c,s-c*n,a,s)}function _v(e){this._context=e}_v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:W0(this,this._t0,tC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,W0(this,tC(this,n=eC(this,e,t)),n);break;default:W0(this,this._t0,n=eC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function n4(e){this._context=new r4(e)}(n4.prototype=Object.create(_v.prototype)).point=function(e,t){_v.prototype.point.call(this,t,e)};function r4(e){this._context=e}r4.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function lne(e){return new _v(e)}function une(e){return new n4(e)}function i4(e){this._context=e}i4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=nC(e),i=nC(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function nC(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function dne(e){return new i4(e)}function Sx(e,t){this._context=e,this._t=t}Sx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function hne(e){return new Sx(e,.5)}function fne(e){return new Sx(e,0)}function pne(e){return new Sx(e,1)}function rd(e,t){if((s=e.length)>1)for(var n=1,r,i,a=e[t[0]],s,c=a.length;n<s;++n)for(i=a,a=e[t[n]],r=0;r<c;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function W_(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function mne(e,t){return e[t]}function gne(e){const t=[];return t.key=e,t}function vne(){var e=fn([]),t=W_,n=rd,r=mne;function i(a){var s=Array.from(e.apply(this,arguments),gne),c,l=s.length,u=-1,d;for(const h of a)for(c=0,++u;c<l;++c)(s[c][u]=[0,+r(h,s[c].key,u,a)]).data=h;for(c=0,d=eE(t(s));c<l;++c)s[d[c]].index=c;return n(s,d),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:fn(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:fn(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?W_:typeof a=="function"?a:fn(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??rd,i):n},i}function yne(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=e[n][i][1]||0;if(s)for(n=0;n<r;++n)e[n][i][1]/=s}rd(e,t)}}function xne(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var s=0,c=0;s<i;++s)c+=e[s][n][1]||0;r[n][1]+=r[n][0]=-c/2}rd(e,t)}}function bne(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var c=0,l=0,u=0;c<s;++c){for(var d=e[t[c]],h=d[r][1]||0,f=d[r-1][1]||0,p=(h-f)/2,m=0;m<c;++m){var g=e[t[m]],v=g[r][1]||0,x=g[r-1][1]||0;p+=v-x}l+=h,u+=p*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,rd(e,t)}}function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}var wne=["type","size","sizeType"];function q_(){return q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q_.apply(this,arguments)}function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(n),!0).forEach(function(r){_ne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _ne(e,t,n){return t=jne(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jne(e){var t=Sne(e,"string");return If(t)=="symbol"?t:t+""}function Sne(e,t){if(If(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ene(e,t){if(e==null)return{};var n=Nne(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Nne(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var a4={symbolCircle:tE,symbolCross:qte,symbolDiamond:Yte,symbolSquare:Xte,symbolStar:ene,symbolTriangle:tne,symbolWye:rne},Pne=Math.PI/180,kne=function(t){var n="symbol".concat(wx(t));return a4[n]||tE},Cne=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*Pne;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Ane=function(t,n){a4["symbol".concat(wx(t))]=n},nE=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,s=t.sizeType,c=s===void 0?"area":s,l=Ene(t,wne),u=iC(iC({},l),{},{type:r,size:a,sizeType:c}),d=function(){var v=kne(r),x=ine().type(v).size(Cne(a,c,r));return x()},h=u.className,f=u.cx,p=u.cy,m=Ye(u,!0);return f===+f&&p===+p&&a===+a?R.createElement("path",q_({},m,{className:ut("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(p,")"),d:d()})):null};nE.registerSymbol=Ane;function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}function K_(){return K_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K_.apply(this,arguments)}function aC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(n),!0).forEach(function(r){Mf(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function One(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o4(r.key),r)}}function $ne(e,t,n){return t&&Rne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ine(e,t,n){return t=jv(t),Mne(e,s4()?Reflect.construct(t,n||[],jv(e).constructor):t.apply(e,n))}function Mne(e,t){if(t&&(id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dne(e)}function Dne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s4=function(){return!!e})()}function jv(e){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jv(e)}function Lne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y_(e,t)}function Y_(e,t){return Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Y_(e,t)}function Mf(e,t,n){return t=o4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o4(e){var t=Bne(e,"string");return id(t)=="symbol"?t:t+""}function Bne(e,t){if(id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zi=32,rE=function(e){function t(){return One(this,t),Ine(this,t,arguments)}return Lne(t,e),$ne(t,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=zi/2,s=zi/6,c=zi/3,l=r.inactive?i:r.color;if(r.type==="plainline")return R.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:zi,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return R.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(a,`
            H`).concat(zi,"M").concat(2*c,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return R.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(zi/8,"h").concat(zi,"v").concat(zi*3/4,"h").concat(-zi,"z"),className:"recharts-legend-icon"});if(R.isValidElement(r.legendIcon)){var u=Tne({},r);return delete u.legendIcon,R.cloneElement(r.legendIcon,u)}return R.createElement(nE,{fill:l,cx:a,cy:a,size:zi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,c=i.layout,l=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:zi,height:zi},h={display:c==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,m){var g=p.formatter||l,v=ut(Mf(Mf({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var x=ct(p.value)?null:p.value;$a(!ct(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=p.inactive?u:p.color;return R.createElement("li",K_({className:v,style:h,key:"legend-item-".concat(m)},Sl(r.props,p,m)),R.createElement(B_,{width:s,height:s,viewBox:d,style:f},r.renderIcon(p)),R.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(x,p,m):x))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var c={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return R.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])}(y.PureComponent);Mf(rE,"displayName","Legend");Mf(rE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Fne=cx;function zne(){this.__data__=new Fne,this.size=0}var Une=zne;function Hne(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Vne=Hne;function Gne(e){return this.__data__.get(e)}var Wne=Gne;function qne(e){return this.__data__.has(e)}var Kne=qne,Yne=cx,Xne=VS,Zne=GS,Jne=200;function Qne(e,t){var n=this.__data__;if(n instanceof Yne){var r=n.__data__;if(!Xne||r.length<Jne-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Zne(r)}return n.set(e,t),this.size=n.size,this}var ere=Qne,tre=cx,nre=Une,rre=Vne,ire=Wne,are=Kne,sre=ere;function Zd(e){var t=this.__data__=new tre(e);this.size=t.size}Zd.prototype.clear=nre;Zd.prototype.delete=rre;Zd.prototype.get=ire;Zd.prototype.has=are;Zd.prototype.set=sre;var c4=Zd,ore="__lodash_hash_undefined__";function cre(e){return this.__data__.set(e,ore),this}var lre=cre;function ure(e){return this.__data__.has(e)}var dre=ure,hre=GS,fre=lre,pre=dre;function Sv(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new hre;++t<n;)this.add(e[t])}Sv.prototype.add=Sv.prototype.push=fre;Sv.prototype.has=pre;var l4=Sv;function mre(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var u4=mre;function gre(e,t){return e.has(t)}var d4=gre,vre=l4,yre=u4,xre=d4,bre=1,wre=2;function _re(e,t,n,r,i,a){var s=n&bre,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var h=-1,f=!0,p=n&wre?new vre:void 0;for(a.set(e,t),a.set(t,e);++h<c;){var m=e[h],g=t[h];if(r)var v=s?r(g,m,h,t,e,a):r(m,g,h,e,t,a);if(v!==void 0){if(v)continue;f=!1;break}if(p){if(!yre(t,function(x,b){if(!xre(p,b)&&(m===x||i(m,x,n,r,a)))return p.push(b)})){f=!1;break}}else if(!(m===g||i(m,g,n,r,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var h4=_re,jre=ls,Sre=jre.Uint8Array,Ere=Sre;function Nre(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var Pre=Nre;function kre(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var iE=kre,sC=Hp,oC=Ere,Cre=HS,Are=h4,Tre=Pre,Ore=iE,Rre=1,$re=2,Ire="[object Boolean]",Mre="[object Date]",Dre="[object Error]",Lre="[object Map]",Bre="[object Number]",Fre="[object RegExp]",zre="[object Set]",Ure="[object String]",Hre="[object Symbol]",Vre="[object ArrayBuffer]",Gre="[object DataView]",cC=sC?sC.prototype:void 0,q0=cC?cC.valueOf:void 0;function Wre(e,t,n,r,i,a,s){switch(n){case Gre:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Vre:return!(e.byteLength!=t.byteLength||!a(new oC(e),new oC(t)));case Ire:case Mre:case Bre:return Cre(+e,+t);case Dre:return e.name==t.name&&e.message==t.message;case Fre:case Ure:return e==t+"";case Lre:var c=Tre;case zre:var l=r&Rre;if(c||(c=Ore),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;r|=$re,s.set(e,t);var d=Are(c(e),c(t),r,i,a,s);return s.delete(e),d;case Hre:if(q0)return q0.call(e)==q0.call(t)}return!1}var qre=Wre;function Kre(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var f4=Kre,Yre=f4,Xre=ui;function Zre(e,t,n){var r=t(e);return Xre(e)?r:Yre(r,n(e))}var Jre=Zre;function Qre(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[i++]=s)}return a}var eie=Qre;function tie(){return[]}var nie=tie,rie=eie,iie=nie,aie=Object.prototype,sie=aie.propertyIsEnumerable,lC=Object.getOwnPropertySymbols,oie=lC?function(e){return e==null?[]:(e=Object(e),rie(lC(e),function(t){return sie.call(e,t)}))}:iie,cie=oie;function lie(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var uie=lie,die=Qs,hie=eo,fie="[object Arguments]";function pie(e){return hie(e)&&die(e)==fie}var mie=pie,uC=mie,gie=eo,p4=Object.prototype,vie=p4.hasOwnProperty,yie=p4.propertyIsEnumerable,xie=uC(function(){return arguments}())?uC:function(e){return gie(e)&&vie.call(e,"callee")&&!yie.call(e,"callee")},aE=xie,Ev={exports:{}};function bie(){return!1}var wie=bie;Ev.exports;(function(e,t){var n=ls,r=wie,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,c=s?n.Buffer:void 0,l=c?c.isBuffer:void 0,u=l||r;e.exports=u})(Ev,Ev.exports);var m4=Ev.exports,_ie=9007199254740991,jie=/^(?:0|[1-9]\d*)$/;function Sie(e,t){var n=typeof e;return t=t??_ie,!!t&&(n=="number"||n!="symbol"&&jie.test(e))&&e>-1&&e%1==0&&e<t}var sE=Sie,Eie=9007199254740991;function Nie(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Eie}var oE=Nie,Pie=Qs,kie=oE,Cie=eo,Aie="[object Arguments]",Tie="[object Array]",Oie="[object Boolean]",Rie="[object Date]",$ie="[object Error]",Iie="[object Function]",Mie="[object Map]",Die="[object Number]",Lie="[object Object]",Bie="[object RegExp]",Fie="[object Set]",zie="[object String]",Uie="[object WeakMap]",Hie="[object ArrayBuffer]",Vie="[object DataView]",Gie="[object Float32Array]",Wie="[object Float64Array]",qie="[object Int8Array]",Kie="[object Int16Array]",Yie="[object Int32Array]",Xie="[object Uint8Array]",Zie="[object Uint8ClampedArray]",Jie="[object Uint16Array]",Qie="[object Uint32Array]",bn={};bn[Gie]=bn[Wie]=bn[qie]=bn[Kie]=bn[Yie]=bn[Xie]=bn[Zie]=bn[Jie]=bn[Qie]=!0;bn[Aie]=bn[Tie]=bn[Hie]=bn[Oie]=bn[Vie]=bn[Rie]=bn[$ie]=bn[Iie]=bn[Mie]=bn[Die]=bn[Lie]=bn[Bie]=bn[Fie]=bn[zie]=bn[Uie]=!1;function eae(e){return Cie(e)&&kie(e.length)&&!!bn[Pie(e)]}var tae=eae;function nae(e){return function(t){return e(t)}}var g4=nae,Nv={exports:{}};Nv.exports;(function(e,t){var n=SL,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,c=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=c})(Nv,Nv.exports);var rae=Nv.exports,iae=tae,aae=g4,dC=rae,hC=dC&&dC.isTypedArray,sae=hC?aae(hC):iae,v4=sae,oae=uie,cae=aE,lae=ui,uae=m4,dae=sE,hae=v4,fae=Object.prototype,pae=fae.hasOwnProperty;function mae(e,t){var n=lae(e),r=!n&&cae(e),i=!n&&!r&&uae(e),a=!n&&!r&&!i&&hae(e),s=n||r||i||a,c=s?oae(e.length,String):[],l=c.length;for(var u in e)(t||pae.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||dae(u,l)))&&c.push(u);return c}var gae=mae,vae=Object.prototype;function yae(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||vae;return e===n}var xae=yae;function bae(e,t){return function(n){return e(t(n))}}var y4=bae,wae=y4,_ae=wae(Object.keys,Object),jae=_ae,Sae=xae,Eae=jae,Nae=Object.prototype,Pae=Nae.hasOwnProperty;function kae(e){if(!Sae(e))return Eae(e);var t=[];for(var n in Object(e))Pae.call(e,n)&&n!="constructor"&&t.push(n);return t}var Cae=kae,Aae=US,Tae=oE;function Oae(e){return e!=null&&Tae(e.length)&&!Aae(e)}var Gp=Oae,Rae=gae,$ae=Cae,Iae=Gp;function Mae(e){return Iae(e)?Rae(e):$ae(e)}var Ex=Mae,Dae=Jre,Lae=cie,Bae=Ex;function Fae(e){return Dae(e,Bae,Lae)}var zae=Fae,fC=zae,Uae=1,Hae=Object.prototype,Vae=Hae.hasOwnProperty;function Gae(e,t,n,r,i,a){var s=n&Uae,c=fC(e),l=c.length,u=fC(t),d=u.length;if(l!=d&&!s)return!1;for(var h=l;h--;){var f=c[h];if(!(s?f in t:Vae.call(t,f)))return!1}var p=a.get(e),m=a.get(t);if(p&&m)return p==t&&m==e;var g=!0;a.set(e,t),a.set(t,e);for(var v=s;++h<l;){f=c[h];var x=e[f],b=t[f];if(r)var w=s?r(b,x,f,t,e,a):r(x,b,f,e,t,a);if(!(w===void 0?x===b||i(x,b,n,r,a):w)){g=!1;break}v||(v=f=="constructor")}if(g&&!v){var _=e.constructor,j=t.constructor;_!=j&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(g=!1)}return a.delete(e),a.delete(t),g}var Wae=Gae,qae=Cl,Kae=ls,Yae=qae(Kae,"DataView"),Xae=Yae,Zae=Cl,Jae=ls,Qae=Zae(Jae,"Promise"),ese=Qae,tse=Cl,nse=ls,rse=tse(nse,"Set"),x4=rse,ise=Cl,ase=ls,sse=ise(ase,"WeakMap"),ose=sse,X_=Xae,Z_=VS,J_=ese,Q_=x4,e1=ose,b4=Qs,Jd=NL,pC="[object Map]",cse="[object Object]",mC="[object Promise]",gC="[object Set]",vC="[object WeakMap]",yC="[object DataView]",lse=Jd(X_),use=Jd(Z_),dse=Jd(J_),hse=Jd(Q_),fse=Jd(e1),Lc=b4;(X_&&Lc(new X_(new ArrayBuffer(1)))!=yC||Z_&&Lc(new Z_)!=pC||J_&&Lc(J_.resolve())!=mC||Q_&&Lc(new Q_)!=gC||e1&&Lc(new e1)!=vC)&&(Lc=function(e){var t=b4(e),n=t==cse?e.constructor:void 0,r=n?Jd(n):"";if(r)switch(r){case lse:return yC;case use:return pC;case dse:return mC;case hse:return gC;case fse:return vC}return t});var pse=Lc,K0=c4,mse=h4,gse=qre,vse=Wae,xC=pse,bC=ui,wC=m4,yse=v4,xse=1,_C="[object Arguments]",jC="[object Array]",tg="[object Object]",bse=Object.prototype,SC=bse.hasOwnProperty;function wse(e,t,n,r,i,a){var s=bC(e),c=bC(t),l=s?jC:xC(e),u=c?jC:xC(t);l=l==_C?tg:l,u=u==_C?tg:u;var d=l==tg,h=u==tg,f=l==u;if(f&&wC(e)){if(!wC(t))return!1;s=!0,d=!1}if(f&&!d)return a||(a=new K0),s||yse(e)?mse(e,t,n,r,i,a):gse(e,t,l,n,r,i,a);if(!(n&xse)){var p=d&&SC.call(e,"__wrapped__"),m=h&&SC.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,v=m?t.value():t;return a||(a=new K0),i(g,v,n,r,a)}}return f?(a||(a=new K0),vse(e,t,n,r,i,a)):!1}var _se=wse,jse=_se,EC=eo;function w4(e,t,n,r,i){return e===t?!0:e==null||t==null||!EC(e)&&!EC(t)?e!==e&&t!==t:jse(e,t,n,r,w4,i)}var cE=w4,Sse=c4,Ese=cE,Nse=1,Pse=2;function kse(e,t,n,r){var i=n.length,a=i,s=!r;if(e==null)return!a;for(e=Object(e);i--;){var c=n[i];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<a;){c=n[i];var l=c[0],u=e[l],d=c[1];if(s&&c[2]){if(u===void 0&&!(l in e))return!1}else{var h=new Sse;if(r)var f=r(u,d,l,e,t,h);if(!(f===void 0?Ese(d,u,Nse|Pse,r,h):f))return!1}}return!0}var Cse=kse,Ase=dc;function Tse(e){return e===e&&!Ase(e)}var _4=Tse,Ose=_4,Rse=Ex;function $se(e){for(var t=Rse(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ose(i)]}return t}var Ise=$se;function Mse(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var j4=Mse,Dse=Cse,Lse=Ise,Bse=j4;function Fse(e){var t=Lse(e);return t.length==1&&t[0][2]?Bse(t[0][0],t[0][1]):function(n){return n===e||Dse(n,e,t)}}var zse=Fse;function Use(e,t){return e!=null&&t in Object(e)}var Hse=Use,Vse=TL,Gse=aE,Wse=ui,qse=sE,Kse=oE,Yse=ux;function Xse(e,t,n){t=Vse(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var s=Yse(t[r]);if(!(a=e!=null&&n(e,s)))break;e=e[s]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&Kse(i)&&qse(s,i)&&(Wse(e)||Gse(e)))}var Zse=Xse,Jse=Hse,Qse=Zse;function eoe(e,t){return e!=null&&Qse(e,t,Jse)}var toe=eoe,noe=cE,roe=OL,ioe=toe,aoe=zS,soe=_4,ooe=j4,coe=ux,loe=1,uoe=2;function doe(e,t){return aoe(e)&&soe(t)?ooe(coe(e),t):function(n){var r=roe(n,e);return r===void 0&&r===t?ioe(n,e):noe(t,r,loe|uoe)}}var hoe=doe;function foe(e){return e}var Qd=foe;function poe(e){return function(t){return t==null?void 0:t[e]}}var moe=poe,goe=KS;function voe(e){return function(t){return goe(t,e)}}var yoe=voe,xoe=moe,boe=yoe,woe=zS,_oe=ux;function joe(e){return woe(e)?xoe(_oe(e)):boe(e)}var Soe=joe,Eoe=zse,Noe=hoe,Poe=Qd,koe=ui,Coe=Soe;function Aoe(e){return typeof e=="function"?e:e==null?Poe:typeof e=="object"?koe(e)?Noe(e[0],e[1]):Eoe(e):Coe(e)}var us=Aoe;function Toe(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var S4=Toe;function Ooe(e){return e!==e}var Roe=Ooe;function $oe(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var Ioe=$oe,Moe=S4,Doe=Roe,Loe=Ioe;function Boe(e,t,n){return t===t?Loe(e,t,n):Moe(e,Doe,n)}var Foe=Boe,zoe=Foe;function Uoe(e,t){var n=e==null?0:e.length;return!!n&&zoe(e,t,0)>-1}var Hoe=Uoe;function Voe(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var Goe=Voe;function Woe(){}var qoe=Woe,Y0=x4,Koe=qoe,Yoe=iE,Xoe=1/0,Zoe=Y0&&1/Yoe(new Y0([,-0]))[1]==Xoe?function(e){return new Y0(e)}:Koe,Joe=Zoe,Qoe=l4,ece=Hoe,tce=Goe,nce=d4,rce=Joe,ice=iE,ace=200;function sce(e,t,n){var r=-1,i=ece,a=e.length,s=!0,c=[],l=c;if(n)s=!1,i=tce;else if(a>=ace){var u=t?null:rce(e);if(u)return ice(u);s=!1,i=nce,l=new Qoe}else l=t?[]:c;e:for(;++r<a;){var d=e[r],h=t?t(d):d;if(d=n||d!==0?d:0,s&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue e;t&&l.push(h),c.push(d)}else i(l,h,n)||(l!==c&&l.push(h),c.push(d))}return c}var oce=sce,cce=us,lce=oce;function uce(e,t){return e&&e.length?lce(e,cce(t)):[]}var dce=uce;const NC=cn(dce);function E4(e,t,n){return t===!0?NC(e,n):ct(t)?NC(e,t):e}function ad(e){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(e)}var hce=["ref"];function PC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ws(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(n),!0).forEach(function(r){Nx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P4(r.key),r)}}function pce(e,t,n){return t&&kC(e.prototype,t),n&&kC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mce(e,t,n){return t=Pv(t),gce(e,N4()?Reflect.construct(t,n||[],Pv(e).constructor):t.apply(e,n))}function gce(e,t){if(t&&(ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vce(e)}function vce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N4=function(){return!!e})()}function Pv(e){return Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pv(e)}function yce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t1(e,t)}function t1(e,t){return t1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},t1(e,t)}function Nx(e,t,n){return t=P4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P4(e){var t=xce(e,"string");return ad(t)=="symbol"?t:t+""}function xce(e,t){if(ad(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ad(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function bce(e,t){if(e==null)return{};var n=wce(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wce(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _ce(e){return e.value}function jce(e,t){if(R.isValidElement(e))return R.cloneElement(e,t);if(typeof e=="function")return R.createElement(e,t);t.ref;var n=bce(t,hce);return R.createElement(rE,n)}var CC=1,Ko=function(e){function t(){var n;fce(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=mce(this,t,[].concat(i)),Nx(n,"lastBoundingBox",{width:-1,height:-1}),n}return yce(t,e),pce(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>CC||Math.abs(i.height-this.lastBoundingBox.height)>CC)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ws({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,c=i.verticalAlign,l=i.margin,u=i.chartWidth,d=i.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();h={left:((u||0)-p.width)/2}}else h=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(c==="middle"){var m=this.getBBoxSnapshot();f={top:((d||0)-m.height)/2}}else f=c==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ws(ws({},h),f)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,c=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=ws(ws({position:"absolute",width:s||"auto",height:c||"auto"},this.getDefaultPosition(l)),l);return R.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(p){r.wrapperNode=p}},jce(a,ws(ws({},this.props),{},{payload:E4(d,u,_ce)})))}}],[{key:"getWithHeight",value:function(r,i){var a=ws(ws({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&we(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(y.PureComponent);Nx(Ko,"displayName","Legend");Nx(Ko,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var AC=Hp,Sce=aE,Ece=ui,TC=AC?AC.isConcatSpreadable:void 0;function Nce(e){return Ece(e)||Sce(e)||!!(TC&&e&&e[TC])}var Pce=Nce,kce=f4,Cce=Pce;function k4(e,t,n,r,i){var a=-1,s=e.length;for(n||(n=Cce),i||(i=[]);++a<s;){var c=e[a];t>0&&n(c)?t>1?k4(c,t-1,n,r,i):kce(i,c):r||(i[i.length]=c)}return i}var C4=k4;function Ace(e){return function(t,n,r){for(var i=-1,a=Object(t),s=r(t),c=s.length;c--;){var l=s[e?c:++i];if(n(a[l],l,a)===!1)break}return t}}var Tce=Ace,Oce=Tce,Rce=Oce(),$ce=Rce,Ice=$ce,Mce=Ex;function Dce(e,t){return e&&Ice(e,t,Mce)}var A4=Dce,Lce=Gp;function Bce(e,t){return function(n,r){if(n==null)return n;if(!Lce(n))return e(n,r);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var Fce=Bce,zce=A4,Uce=Fce,Hce=Uce(zce),lE=Hce,Vce=lE,Gce=Gp;function Wce(e,t){var n=-1,r=Gce(e)?Array(e.length):[];return Vce(e,function(i,a,s){r[++n]=t(i,a,s)}),r}var T4=Wce;function qce(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Kce=qce,OC=Gd;function Yce(e,t){if(e!==t){var n=e!==void 0,r=e===null,i=e===e,a=OC(e),s=t!==void 0,c=t===null,l=t===t,u=OC(t);if(!c&&!u&&!a&&e>t||a&&s&&l&&!c&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||c&&n&&i||!s&&i||!l)return-1}return 0}var Xce=Yce,Zce=Xce;function Jce(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,s=i.length,c=n.length;++r<s;){var l=Zce(i[r],a[r]);if(l){if(r>=c)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return e.index-t.index}var Qce=Jce,X0=qS,ele=KS,tle=us,nle=T4,rle=Kce,ile=g4,ale=Qce,sle=Qd,ole=ui;function cle(e,t,n){t.length?t=X0(t,function(a){return ole(a)?function(s){return ele(s,a.length===1?a[0]:a)}:a}):t=[sle];var r=-1;t=X0(t,ile(tle));var i=nle(e,function(a,s,c){var l=X0(t,function(u){return u(a)});return{criteria:l,index:++r,value:a}});return rle(i,function(a,s){return ale(a,s,n)})}var lle=cle;function ule(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var dle=ule,hle=dle,RC=Math.max;function fle(e,t,n){return t=RC(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=RC(r.length-t,0),s=Array(a);++i<a;)s[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(s),hle(e,this,c)}}var ple=fle;function mle(e){return function(){return e}}var gle=mle,vle=Cl,yle=function(){try{var e=vle(Object,"defineProperty");return e({},"",{}),e}catch{}}(),O4=yle,xle=gle,$C=O4,ble=Qd,wle=$C?function(e,t){return $C(e,"toString",{configurable:!0,enumerable:!1,value:xle(t),writable:!0})}:ble,_le=wle,jle=800,Sle=16,Ele=Date.now;function Nle(e){var t=0,n=0;return function(){var r=Ele(),i=Sle-(r-n);if(n=r,i>0){if(++t>=jle)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Ple=Nle,kle=_le,Cle=Ple,Ale=Cle(kle),Tle=Ale,Ole=Qd,Rle=ple,$le=Tle;function Ile(e,t){return $le(Rle(e,t,Ole),e+"")}var Mle=Ile,Dle=HS,Lle=Gp,Ble=sE,Fle=dc;function zle(e,t,n){if(!Fle(n))return!1;var r=typeof t;return(r=="number"?Lle(n)&&Ble(t,n.length):r=="string"&&t in n)?Dle(n[t],e):!1}var Px=zle,Ule=C4,Hle=lle,Vle=Mle,IC=Px,Gle=Vle(function(e,t){if(e==null)return[];var n=t.length;return n>1&&IC(e,t[0],t[1])?t=[]:n>2&&IC(t[0],t[1],t[2])&&(t=[t[0]]),Hle(e,Ule(t,1),[])}),Wle=Gle;const uE=cn(Wle);function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n1.apply(this,arguments)}function qle(e,t){return Zle(e)||Xle(e,t)||Yle(e,t)||Kle()}function Kle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yle(e,t){if(e){if(typeof e=="string")return MC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MC(e,t)}}function MC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function Zle(e){if(Array.isArray(e))return e}function DC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Z0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(n),!0).forEach(function(r){Jle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jle(e,t,n){return t=Qle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qle(e){var t=eue(e,"string");return Df(t)=="symbol"?t:t+""}function eue(e,t){if(Df(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tue(e){return Array.isArray(e)&&cr(e[0])&&cr(e[1])?e.join(" ~ "):e}var nue=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,s=t.itemStyle,c=s===void 0?{}:s,l=t.labelStyle,u=l===void 0?{}:l,d=t.payload,h=t.formatter,f=t.itemSorter,p=t.wrapperClassName,m=t.labelClassName,g=t.label,v=t.labelFormatter,x=t.accessibilityLayer,b=x===void 0?!1:x,w=function(){if(d&&d.length){var O={padding:0,margin:0},D=(f?uE(d,f):d).map(function(L,G){if(L.type==="none")return null;var H=Z0({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},c),K=L.formatter||h||tue,Z=L.value,q=L.name,le=Z,_e=q;if(K&&le!=null&&_e!=null){var re=K(Z,q,L,G,d);if(Array.isArray(re)){var de=qle(re,2);le=de[0],_e=de[1]}else le=re}return R.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:H},cr(_e)?R.createElement("span",{className:"recharts-tooltip-item-name"},_e):null,cr(_e)?R.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,R.createElement("span",{className:"recharts-tooltip-item-value"},le),R.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return R.createElement("ul",{className:"recharts-tooltip-item-list",style:O},D)}return null},_=Z0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),j=Z0({margin:0},u),S=!gt(g),N=S?g:"",P=ut("recharts-default-tooltip",p),k=ut("recharts-tooltip-label",m);S&&v&&d!==void 0&&d!==null&&(N=v(g,d));var T=b?{role:"status","aria-live":"assertive"}:{};return R.createElement("div",n1({className:P,style:_},T),R.createElement("p",{className:k,style:j},R.isValidElement(N)?N:"".concat(N)),w())};function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function ng(e,t,n){return t=rue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rue(e){var t=iue(e,"string");return Lf(t)=="symbol"?t:t+""}function iue(e,t){if(Lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kh="recharts-tooltip-wrapper",aue={visibility:"hidden"};function sue(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return ut(kh,ng(ng(ng(ng({},"".concat(kh,"-right"),we(n)&&t&&we(t.x)&&n>=t.x),"".concat(kh,"-left"),we(n)&&t&&we(t.x)&&n<t.x),"".concat(kh,"-bottom"),we(r)&&t&&we(t.y)&&r>=t.y),"".concat(kh,"-top"),we(r)&&t&&we(t.y)&&r<t.y))}function LC(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,c=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(a&&we(a[r]))return a[r];var d=n[r]-c-i,h=n[r]+i;if(t[r])return s[r]?d:h;if(s[r]){var f=d,p=l[r];return f<p?Math.max(h,l[r]):Math.max(d,l[r])}var m=h+c,g=l[r]+u;return m>g?Math.max(d,l[r]):Math.max(h,l[r])}function oue(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function cue(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,a=e.reverseDirection,s=e.tooltipBox,c=e.useTranslate3d,l=e.viewBox,u,d,h;return s.height>0&&s.width>0&&n?(d=LC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),h=LC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=oue({translateX:d,translateY:h,useTranslate3d:c})):u=aue,{cssProperties:u,cssClasses:sue({translateX:d,translateY:h,coordinate:n})}}function sd(e){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(e)}function BC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(n),!0).forEach(function(r){i1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$4(r.key),r)}}function due(e,t,n){return t&&uue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hue(e,t,n){return t=kv(t),fue(e,R4()?Reflect.construct(t,n||[],kv(e).constructor):t.apply(e,n))}function fue(e,t){if(t&&(sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pue(e)}function pue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R4=function(){return!!e})()}function kv(e){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kv(e)}function mue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r1(e,t)}function r1(e,t){return r1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},r1(e,t)}function i1(e,t,n){return t=$4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $4(e){var t=gue(e,"string");return sd(t)=="symbol"?t:t+""}function gue(e,t){if(sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zC=1,vue=function(e){function t(){var n;lue(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=hue(this,t,[].concat(i)),i1(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),i1(n,"handleKeyDown",function(s){if(s.key==="Escape"){var c,l,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&c!==void 0?c:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return mue(t,e),due(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>zC||Math.abs(r.height-this.state.lastBoundingBox.height)>zC)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,l=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,p=i.offset,m=i.position,g=i.reverseDirection,v=i.useTranslate3d,x=i.viewBox,b=i.wrapperStyle,w=cue({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:p,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:x}),_=w.cssClasses,j=w.cssProperties,S=FC(FC({transition:f&&a?"transform ".concat(c,"ms ").concat(l):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},b);return R.createElement("div",{tabIndex:-1,className:_,style:S,ref:function(P){r.wrapperNode=P}},u)}}])}(y.PureComponent),yue=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Al={isSsr:yue()};function od(e){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(e)}function UC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function HC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(n),!0).forEach(function(r){dE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M4(r.key),r)}}function wue(e,t,n){return t&&bue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ue(e,t,n){return t=Cv(t),jue(e,I4()?Reflect.construct(t,n||[],Cv(e).constructor):t.apply(e,n))}function jue(e,t){if(t&&(od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sue(e)}function Sue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I4=function(){return!!e})()}function Cv(e){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cv(e)}function Eue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a1(e,t)}function a1(e,t){return a1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},a1(e,t)}function dE(e,t,n){return t=M4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M4(e){var t=Nue(e,"string");return od(t)=="symbol"?t:t+""}function Nue(e,t){if(od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Pue(e){return e.dataKey}function kue(e,t){return R.isValidElement(e)?R.cloneElement(e,t):typeof e=="function"?R.createElement(e,t):R.createElement(nue,t)}var Sr=function(e){function t(){return xue(this,t),_ue(this,t,arguments)}return Eue(t,e),wue(t,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,l=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,f=i.isAnimationActive,p=i.offset,m=i.payload,g=i.payloadUniqBy,v=i.position,x=i.reverseDirection,b=i.useTranslate3d,w=i.viewBox,_=i.wrapperStyle,j=m??[];h&&j.length&&(j=E4(m.filter(function(N){return N.value!=null&&(N.hide!==!0||r.props.includeHidden)}),g,Pue));var S=j.length>0;return R.createElement(vue,{allowEscapeViewBox:s,animationDuration:c,animationEasing:l,isAnimationActive:f,active:a,coordinate:d,hasPayload:S,offset:p,position:v,reverseDirection:x,useTranslate3d:b,viewBox:w,wrapperStyle:_},kue(u,HC(HC({},this.props),{},{payload:j})))}}])}(y.PureComponent);dE(Sr,"displayName","Tooltip");dE(Sr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Al.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Cue=ls,Aue=function(){return Cue.Date.now()},Tue=Aue,Oue=/\s/;function Rue(e){for(var t=e.length;t--&&Oue.test(e.charAt(t)););return t}var $ue=Rue,Iue=$ue,Mue=/^\s+/;function Due(e){return e&&e.slice(0,Iue(e)+1).replace(Mue,"")}var Lue=Due,Bue=Lue,VC=dc,Fue=Gd,GC=NaN,zue=/^[-+]0x[0-9a-f]+$/i,Uue=/^0b[01]+$/i,Hue=/^0o[0-7]+$/i,Vue=parseInt;function Gue(e){if(typeof e=="number")return e;if(Fue(e))return GC;if(VC(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=VC(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Bue(e);var n=Uue.test(e);return n||Hue.test(e)?Vue(e.slice(2),n?2:8):zue.test(e)?GC:+e}var D4=Gue,Wue=dc,J0=Tue,WC=D4,que="Expected a function",Kue=Math.max,Yue=Math.min;function Xue(e,t,n){var r,i,a,s,c,l,u=0,d=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(que);t=WC(t)||0,Wue(n)&&(d=!!n.leading,h="maxWait"in n,a=h?Kue(WC(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f);function p(S){var N=r,P=i;return r=i=void 0,u=S,s=e.apply(P,N),s}function m(S){return u=S,c=setTimeout(x,t),d?p(S):s}function g(S){var N=S-l,P=S-u,k=t-N;return h?Yue(k,a-P):k}function v(S){var N=S-l,P=S-u;return l===void 0||N>=t||N<0||h&&P>=a}function x(){var S=J0();if(v(S))return b(S);c=setTimeout(x,g(S))}function b(S){return c=void 0,f&&r?p(S):(r=i=void 0,s)}function w(){c!==void 0&&clearTimeout(c),u=0,r=l=i=c=void 0}function _(){return c===void 0?s:b(J0())}function j(){var S=J0(),N=v(S);if(r=arguments,i=this,l=S,N){if(c===void 0)return m(l);if(h)return clearTimeout(c),c=setTimeout(x,t),p(l)}return c===void 0&&(c=setTimeout(x,t)),s}return j.cancel=w,j.flush=_,j}var Zue=Xue,Jue=Zue,Que=dc,ede="Expected a function";function tde(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(ede);return Que(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Jue(e,t,{leading:r,maxWait:t,trailing:i})}var nde=tde;const L4=cn(nde);function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function qC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(n),!0).forEach(function(r){rde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rde(e,t,n){return t=ide(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ide(e){var t=ade(e,"string");return Bf(t)=="symbol"?t:t+""}function ade(e,t){if(Bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sde(e,t){return ude(e)||lde(e,t)||cde(e,t)||ode()}function ode(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cde(e,t){if(e){if(typeof e=="string")return KC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KC(e,t)}}function KC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lde(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function ude(e){if(Array.isArray(e))return e}var Uo=y.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=e.width,s=a===void 0?"100%":a,c=e.height,l=c===void 0?"100%":c,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,f=e.maxHeight,p=e.children,m=e.debounce,g=m===void 0?0:m,v=e.id,x=e.className,b=e.onResize,w=e.style,_=w===void 0?{}:w,j=y.useRef(null),S=y.useRef();S.current=b,y.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var N=y.useState({containerWidth:i.width,containerHeight:i.height}),P=sde(N,2),k=P[0],T=P[1],A=y.useCallback(function(D,L){T(function(G){var H=Math.round(D),K=Math.round(L);return G.containerWidth===H&&G.containerHeight===K?G:{containerWidth:H,containerHeight:K}})},[]);y.useEffect(function(){var D=function(q){var le,_e=q[0].contentRect,re=_e.width,de=_e.height;A(re,de),(le=S.current)===null||le===void 0||le.call(S,re,de)};g>0&&(D=L4(D,g,{trailing:!0,leading:!1}));var L=new ResizeObserver(D),G=j.current.getBoundingClientRect(),H=G.width,K=G.height;return A(H,K),L.observe(j.current),function(){L.disconnect()}},[A,g]);var O=y.useMemo(function(){var D=k.containerWidth,L=k.containerHeight;if(D<0||L<0)return null;$a(Xc(s)||Xc(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),$a(!n||n>0,"The aspect(%s) must be greater than zero.",n);var G=Xc(s)?D:s,H=Xc(l)?L:l;n&&n>0&&(G?H=G/n:H&&(G=H*n),f&&H>f&&(H=f)),$a(G>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,H,s,l,d,h,n);var K=!Array.isArray(p)&&Fs(p.type).endsWith("Chart");return R.Children.map(p,function(Z){return R.isValidElement(Z)?y.cloneElement(Z,rg({width:G,height:H},K?{style:rg({height:"100%",width:"100%",maxHeight:H,maxWidth:G},Z.props.style)}:{})):Z})},[n,p,l,f,h,d,k,s]);return R.createElement("div",{id:v?"".concat(v):void 0,className:ut("recharts-responsive-container",x),style:rg(rg({},_),{},{width:s,height:l,minWidth:d,minHeight:h,maxHeight:f}),ref:j},O)}),kx=function(t){return null};kx.displayName="Cell";function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}function YC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function s1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(n),!0).forEach(function(r){dde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dde(e,t,n){return t=hde(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hde(e){var t=fde(e,"string");return Ff(t)=="symbol"?t:t+""}function fde(e,t){if(Ff(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zl={widthCache:{},cacheCount:0},pde=2e3,mde={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XC="recharts_measurement_span";function gde(e){var t=s1({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var df=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Al.isSsr)return{width:0,height:0};var r=gde(n),i=JSON.stringify({text:t,copyStyle:r});if(Zl.widthCache[i])return Zl.widthCache[i];try{var a=document.getElementById(XC);a||(a=document.createElement("span"),a.setAttribute("id",XC),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=s1(s1({},mde),r);Object.assign(a.style,s),a.textContent="".concat(t);var c=a.getBoundingClientRect(),l={width:c.width,height:c.height};return Zl.widthCache[i]=l,++Zl.cacheCount>pde&&(Zl.cacheCount=0,Zl.widthCache={}),l}catch{return{width:0,height:0}}},vde=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function Av(e,t){return wde(e)||bde(e,t)||xde(e,t)||yde()}function yde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xde(e,t){if(e){if(typeof e=="string")return ZC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZC(e,t)}}function ZC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bde(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function wde(e){if(Array.isArray(e))return e}function _de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sde(r.key),r)}}function jde(e,t,n){return t&&JC(e.prototype,t),n&&JC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sde(e){var t=Ede(e,"string");return zf(t)=="symbol"?t:t+""}function Ede(e,t){if(zf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var QC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Nde=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Pde=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,B4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},kde=Object.keys(B4),mu="NaN";function Cde(e,t){return e*B4[t]}var ig=function(){function e(t,n){_de(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Nde.test(n)&&(this.num=NaN,this.unit=""),kde.includes(n)&&(this.num=Cde(t,n),this.unit="px")}return jde(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Pde.exec(n))!==null&&r!==void 0?r:[],a=Av(i,3),s=a[1],c=a[2];return new e(parseFloat(s),c??"")}}])}();function F4(e){if(e.includes(mu))return mu;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=QC.exec(t))!==null&&n!==void 0?n:[],i=Av(r,4),a=i[1],s=i[2],c=i[3],l=ig.parse(a??""),u=ig.parse(c??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return mu;t=t.replace(QC,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,f=(h=eA.exec(t))!==null&&h!==void 0?h:[],p=Av(f,4),m=p[1],g=p[2],v=p[3],x=ig.parse(m??""),b=ig.parse(v??""),w=g==="+"?x.add(b):x.subtract(b);if(w.isNaN())return mu;t=t.replace(eA,w.toString())}return t}var tA=/\(([^()]*)\)/;function Ade(e){for(var t=e;t.includes("(");){var n=tA.exec(t),r=Av(n,2),i=r[1];t=t.replace(tA,F4(i))}return t}function Tde(e){var t=e.replace(/\s+/g,"");return t=Ade(t),t=F4(t),t}function Ode(e){try{return Tde(e)}catch{return mu}}function Q0(e){var t=Ode(e.slice(5,-1));return t===mu?"":t}var Rde=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$de=["dx","dy","angle","className","breakAll"];function o1(){return o1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o1.apply(this,arguments)}function nA(e,t){if(e==null)return{};var n=Ide(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ide(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function rA(e,t){return Bde(e)||Lde(e,t)||Dde(e,t)||Mde()}function Mde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dde(e,t){if(e){if(typeof e=="string")return iA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iA(e,t)}}function iA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lde(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function Bde(e){if(Array.isArray(e))return e}var z4=/[ \f\n\r\t\v\u2028\u2029]+/,U4=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var a=[];gt(n)||(r?a=n.toString().split(""):a=n.toString().split(z4));var s=a.map(function(l){return{word:l,width:df(l,i).width}}),c=r?0:df("",i).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},Fde=function(t,n,r,i,a){var s=t.maxLines,c=t.children,l=t.style,u=t.breakAll,d=we(s),h=c,f=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(H,K){var Z=K.word,q=K.width,le=H[H.length-1];if(le&&(i==null||a||le.width+q+r<Number(i)))le.words.push(Z),le.width+=q+r;else{var _e={words:[Z],width:q};H.push(_e)}return H},[])},p=f(n),m=function(G){return G.reduce(function(H,K){return H.width>K.width?H:K})};if(!d)return p;for(var g="",v=function(G){var H=h.slice(0,G),K=U4({breakAll:u,style:l,children:H+g}).wordsWithComputedWidth,Z=f(K),q=Z.length>s||m(Z).width>Number(i);return[q,Z]},x=0,b=h.length-1,w=0,_;x<=b&&w<=h.length-1;){var j=Math.floor((x+b)/2),S=j-1,N=v(S),P=rA(N,2),k=P[0],T=P[1],A=v(j),O=rA(A,1),D=O[0];if(!k&&!D&&(x=j+1),k&&D&&(b=j-1),!k&&D){_=T;break}w++}return _||p},aA=function(t){var n=gt(t)?[]:t.toString().split(z4);return[{words:n}]},zde=function(t){var n=t.width,r=t.scaleToFit,i=t.children,a=t.style,s=t.breakAll,c=t.maxLines;if((n||r)&&!Al.isSsr){var l,u,d=U4({breakAll:s,children:i,style:a});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;l=h,u=f}else return aA(i);return Fde({breakAll:s,children:i,maxLines:c,style:a},l,u,n,r)}return aA(i)},sA="#808080",El=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,s=t.lineHeight,c=s===void 0?"1em":s,l=t.capHeight,u=l===void 0?"0.71em":l,d=t.scaleToFit,h=d===void 0?!1:d,f=t.textAnchor,p=f===void 0?"start":f,m=t.verticalAnchor,g=m===void 0?"end":m,v=t.fill,x=v===void 0?sA:v,b=nA(t,Rde),w=y.useMemo(function(){return zde({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:h,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,h,b.style,b.width]),_=b.dx,j=b.dy,S=b.angle,N=b.className,P=b.breakAll,k=nA(b,$de);if(!cr(r)||!cr(a))return null;var T=r+(we(_)?_:0),A=a+(we(j)?j:0),O;switch(g){case"start":O=Q0("calc(".concat(u,")"));break;case"middle":O=Q0("calc(".concat((w.length-1)/2," * -").concat(c," + (").concat(u," / 2))"));break;default:O=Q0("calc(".concat(w.length-1," * -").concat(c,")"));break}var D=[];if(h){var L=w[0].width,G=b.width;D.push("scale(".concat((we(G)?G/L:1)/L,")"))}return S&&D.push("rotate(".concat(S,", ").concat(T,", ").concat(A,")")),D.length&&(k.transform=D.join(" ")),R.createElement("text",o1({},Ye(k,!0),{x:T,y:A,className:ut("recharts-text",N),textAnchor:p,fill:x.includes("url")?sA:x}),w.map(function(H,K){var Z=H.words.join(P?"":" ");return R.createElement("tspan",{x:T,dy:K===0?O:c,key:"".concat(Z,"-").concat(K)},Z)}))};function Yo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ude(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hE(e){let t,n,r;e.length!==2?(t=Yo,n=(c,l)=>Yo(e(c),l),r=(c,l)=>e(c)-l):(t=e===Yo||e===Ude?e:Hde,n=e,r=e);function i(c,l,u=0,d=c.length){if(u<d){if(t(l,l)!==0)return d;do{const h=u+d>>>1;n(c[h],l)<0?u=h+1:d=h}while(u<d)}return u}function a(c,l,u=0,d=c.length){if(u<d){if(t(l,l)!==0)return d;do{const h=u+d>>>1;n(c[h],l)<=0?u=h+1:d=h}while(u<d)}return u}function s(c,l,u=0,d=c.length){const h=i(c,l,u,d-1);return h>u&&r(c[h-1],l)>-r(c[h],l)?h-1:h}return{left:i,center:s,right:a}}function Hde(){return 0}function H4(e){return e===null?NaN:+e}function*Vde(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Gde=hE(Yo),Wp=Gde.right;hE(H4).center;class oA extends Map{constructor(t,n=Kde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(cA(this,t))}has(t){return super.has(cA(this,t))}set(t,n){return super.set(Wde(this,t),n)}delete(t){return super.delete(qde(this,t))}}function cA({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Wde({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function qde({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Kde(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Yde(e=Yo){if(e===Yo)return V4;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function V4(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Xde=Math.sqrt(50),Zde=Math.sqrt(10),Jde=Math.sqrt(2);function Tv(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Xde?10:a>=Zde?5:a>=Jde?2:1;let c,l,u;return i<0?(u=Math.pow(10,-i)/s,c=Math.round(e*u),l=Math.round(t*u),c/u<e&&++c,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,c=Math.round(e/u),l=Math.round(t/u),c*u<e&&++c,l*u>t&&--l),l<c&&.5<=n&&n<2?Tv(e,t,n*2):[c,l,u]}function c1(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,s]=r?Tv(t,e,n):Tv(e,t,n);if(!(a>=i))return[];const c=a-i+1,l=new Array(c);if(r)if(s<0)for(let u=0;u<c;++u)l[u]=(a-u)/-s;else for(let u=0;u<c;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<c;++u)l[u]=(i+u)/-s;else for(let u=0;u<c;++u)l[u]=(i+u)*s;return l}function l1(e,t,n){return t=+t,e=+e,n=+n,Tv(e,t,n)[2]}function u1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?l1(t,e,n):l1(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function lA(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function uA(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function G4(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?V4:Yde(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(l-h)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(t-u*h/l+f)),m=Math.min(r,Math.floor(t+(l-u)*h/l+f));G4(e,t,p,m,i)}const a=e[t];let s=n,c=r;for(Ch(e,n,t),i(e[r],a)>0&&Ch(e,n,r);s<c;){for(Ch(e,s,c),++s,--c;i(e[s],a)<0;)++s;for(;i(e[c],a)>0;)--c}i(e[n],a)===0?Ch(e,n,c):(++c,Ch(e,c,r)),c<=t&&(n=c+1),t<=c&&(r=c-1)}return e}function Ch(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Qde(e,t,n){if(e=Float64Array.from(Vde(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return uA(e);if(t>=1)return lA(e);var r,i=(r-1)*t,a=Math.floor(i),s=lA(G4(e,a).subarray(0,a+1)),c=uA(e.subarray(a+1));return s+(c-s)*(i-a)}}function ehe(e,t,n=H4){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),s=+n(e[a],a,e),c=+n(e[a+1],a+1,e);return s+(c-s)*(i-a)}}function the(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function aa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function to(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const d1=Symbol("implicit");function fE(){var e=new oA,t=[],n=[],r=d1;function i(a){let s=e.get(a);if(s===void 0){if(r!==d1)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new oA;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return fE(t,n).unknown(r)},aa.apply(i,arguments),i}function Uf(){var e=fE().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,s,c=!1,l=0,u=0,d=.5;delete e.unknown;function h(){var f=t().length,p=i<r,m=p?i:r,g=p?r:i;a=(g-m)/Math.max(1,f-l+u*2),c&&(a=Math.floor(a)),m+=(g-m-a*(f-l))*d,s=a*(1-l),c&&(m=Math.round(m),s=Math.round(s));var v=the(f).map(function(x){return m+a*x});return n(p?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,c=!0,h()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(f){return arguments.length?(c=!!f,h()):c},e.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),h()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},e.copy=function(){return Uf(t(),[r,i]).round(c).paddingInner(l).paddingOuter(u).align(d)},aa.apply(h(),arguments)}function W4(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return W4(t())},e}function hf(){return W4(Uf.apply(null,arguments).paddingInner(1))}function pE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function q4(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qp(){}var Hf=.7,Ov=1/Hf,Au="\\s*([+-]?\\d+)\\s*",Vf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nhe=/^#([0-9a-f]{3,8})$/,rhe=new RegExp(`^rgb\\(${Au},${Au},${Au}\\)$`),ihe=new RegExp(`^rgb\\(${ns},${ns},${ns}\\)$`),ahe=new RegExp(`^rgba\\(${Au},${Au},${Au},${Vf}\\)$`),she=new RegExp(`^rgba\\(${ns},${ns},${ns},${Vf}\\)$`),ohe=new RegExp(`^hsl\\(${Vf},${ns},${ns}\\)$`),che=new RegExp(`^hsla\\(${Vf},${ns},${ns},${Vf}\\)$`),dA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pE(qp,Gf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hA,formatHex:hA,formatHex8:lhe,formatHsl:uhe,formatRgb:fA,toString:fA});function hA(){return this.rgb().formatHex()}function lhe(){return this.rgb().formatHex8()}function uhe(){return K4(this).formatHsl()}function fA(){return this.rgb().formatRgb()}function Gf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nhe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pA(t):n===3?new oi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ag(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ag(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rhe.exec(e))?new oi(t[1],t[2],t[3],1):(t=ihe.exec(e))?new oi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ahe.exec(e))?ag(t[1],t[2],t[3],t[4]):(t=she.exec(e))?ag(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ohe.exec(e))?vA(t[1],t[2]/100,t[3]/100,1):(t=che.exec(e))?vA(t[1],t[2]/100,t[3]/100,t[4]):dA.hasOwnProperty(e)?pA(dA[e]):e==="transparent"?new oi(NaN,NaN,NaN,0):null}function pA(e){return new oi(e>>16&255,e>>8&255,e&255,1)}function ag(e,t,n,r){return r<=0&&(e=t=n=NaN),new oi(e,t,n,r)}function dhe(e){return e instanceof qp||(e=Gf(e)),e?(e=e.rgb(),new oi(e.r,e.g,e.b,e.opacity)):new oi}function h1(e,t,n,r){return arguments.length===1?dhe(e):new oi(e,t,n,r??1)}function oi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}pE(oi,h1,q4(qp,{brighter(e){return e=e==null?Ov:Math.pow(Ov,e),new oi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hf:Math.pow(Hf,e),new oi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new oi(hl(this.r),hl(this.g),hl(this.b),Rv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mA,formatHex:mA,formatHex8:hhe,formatRgb:gA,toString:gA}));function mA(){return`#${Zc(this.r)}${Zc(this.g)}${Zc(this.b)}`}function hhe(){return`#${Zc(this.r)}${Zc(this.g)}${Zc(this.b)}${Zc((isNaN(this.opacity)?1:this.opacity)*255)}`}function gA(){const e=Rv(this.opacity);return`${e===1?"rgb(":"rgba("}${hl(this.r)}, ${hl(this.g)}, ${hl(this.b)}${e===1?")":`, ${e})`}`}function Rv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zc(e){return e=hl(e),(e<16?"0":"")+e.toString(16)}function vA(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ca(e,t,n,r)}function K4(e){if(e instanceof Ca)return new Ca(e.h,e.s,e.l,e.opacity);if(e instanceof qp||(e=Gf(e)),!e)return new Ca;if(e instanceof Ca)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,c=a-i,l=(a+i)/2;return c?(t===a?s=(n-r)/c+(n<r)*6:n===a?s=(r-t)/c+2:s=(t-n)/c+4,c/=l<.5?a+i:2-a-i,s*=60):c=l>0&&l<1?0:s,new Ca(s,c,l,e.opacity)}function fhe(e,t,n,r){return arguments.length===1?K4(e):new Ca(e,t,n,r??1)}function Ca(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pE(Ca,fhe,q4(qp,{brighter(e){return e=e==null?Ov:Math.pow(Ov,e),new Ca(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hf:Math.pow(Hf,e),new Ca(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new oi(ew(e>=240?e-240:e+120,i,r),ew(e,i,r),ew(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ca(yA(this.h),sg(this.s),sg(this.l),Rv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rv(this.opacity);return`${e===1?"hsl(":"hsla("}${yA(this.h)}, ${sg(this.s)*100}%, ${sg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yA(e){return e=(e||0)%360,e<0?e+360:e}function sg(e){return Math.max(0,Math.min(1,e||0))}function ew(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mE=e=>()=>e;function phe(e,t){return function(n){return e+n*t}}function mhe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ghe(e){return(e=+e)==1?Y4:function(t,n){return n-t?mhe(t,n,e):mE(isNaN(t)?n:t)}}function Y4(e,t){var n=t-e;return n?phe(e,n):mE(isNaN(e)?t:e)}const xA=function e(t){var n=ghe(t);function r(i,a){var s=n((i=h1(i)).r,(a=h1(a)).r),c=n(i.g,a.g),l=n(i.b,a.b),u=Y4(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=c(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=e,r}(1);function vhe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function yhe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xhe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=eh(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(c){for(s=0;s<r;++s)a[s]=i[s](c);return a}}function bhe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function $v(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function whe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=eh(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var f1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tw=new RegExp(f1.source,"g");function _he(e){return function(){return e}}function jhe(e){return function(t){return e(t)+""}}function She(e,t){var n=f1.lastIndex=tw.lastIndex=0,r,i,a,s=-1,c=[],l=[];for(e=e+"",t=t+"";(r=f1.exec(e))&&(i=tw.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),c[s]?c[s]+=a:c[++s]=a),(r=r[0])===(i=i[0])?c[s]?c[s]+=i:c[++s]=i:(c[++s]=null,l.push({i:s,x:$v(r,i)})),n=tw.lastIndex;return n<t.length&&(a=t.slice(n),c[s]?c[s]+=a:c[++s]=a),c.length<2?l[0]?jhe(l[0].x):_he(t):(t=l.length,function(u){for(var d=0,h;d<t;++d)c[(h=l[d]).i]=h.x(u);return c.join("")})}function eh(e,t){var n=typeof t,r;return t==null||n==="boolean"?mE(t):(n==="number"?$v:n==="string"?(r=Gf(t))?(t=r,xA):She:t instanceof Gf?xA:t instanceof Date?bhe:yhe(t)?vhe:Array.isArray(t)?xhe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?whe:$v)(e,t)}function gE(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ehe(e,t){t===void 0&&(t=e,e=eh);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(s){var c=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[c](s-c)}}function Nhe(e){return function(){return e}}function Iv(e){return+e}var bA=[0,1];function Xr(e){return e}function p1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Nhe(isNaN(t)?NaN:.5)}function Phe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function khe(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=p1(i,r),a=n(s,a)):(r=p1(r,i),a=n(a,s)),function(c){return a(r(c))}}function Che(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=p1(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(c){var l=Wp(e,c,1,r)-1;return a[l](i[l](c))}}function Kp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Cx(){var e=bA,t=bA,n=eh,r,i,a,s=Xr,c,l,u;function d(){var f=Math.min(e.length,t.length);return s!==Xr&&(s=Phe(e[0],e[f-1])),c=f>2?Che:khe,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(l||(l=c(e.map(r),t,n)))(r(s(f)))}return h.invert=function(f){return s(i((u||(u=c(t,e.map(r),$v)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Iv),d()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=gE,d()},h.clamp=function(f){return arguments.length?(s=f?!0:Xr,d()):s!==Xr},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,p){return r=f,i=p,d()}}function vE(){return Cx()(Xr,Xr)}function Ahe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Mv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function cd(e){return e=Mv(Math.abs(e)),e?e[1]:NaN}function The(e,t){return function(n,r){for(var i=n.length,a=[],s=0,c=e[0],l=0;i>0&&c>0&&(l+c+1>r&&(c=Math.max(1,r-l)),a.push(n.substring(i-=c,i+c)),!((l+=c+1)>r));)c=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Ohe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Rhe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wf(e){if(!(t=Rhe.exec(e)))throw new Error("invalid format: "+e);var t;return new yE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Wf.prototype=yE.prototype;function yE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}yE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $he(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var X4;function Ihe(e,t){var n=Mv(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(X4=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Mv(e,Math.max(0,t+a-1))[0]}function wA(e,t){var n=Mv(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _A={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ahe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wA(e*100,t),r:wA,s:Ihe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jA(e){return e}var SA=Array.prototype.map,EA=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Mhe(e){var t=e.grouping===void 0||e.thousands===void 0?jA:The(SA.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?jA:Ohe(SA.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Wf(h);var f=h.fill,p=h.align,m=h.sign,g=h.symbol,v=h.zero,x=h.width,b=h.comma,w=h.precision,_=h.trim,j=h.type;j==="n"?(b=!0,j="g"):_A[j]||(w===void 0&&(w=12),_=!0,j="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",N=g==="$"?r:/[%p]/.test(j)?s:"",P=_A[j],k=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function T(A){var O=S,D=N,L,G,H;if(j==="c")D=P(A)+D,A="";else{A=+A;var K=A<0||1/A<0;if(A=isNaN(A)?l:P(Math.abs(A),w),_&&(A=$he(A)),K&&+A==0&&m!=="+"&&(K=!1),O=(K?m==="("?m:c:m==="-"||m==="("?"":m)+O,D=(j==="s"?EA[8+X4/3]:"")+D+(K&&m==="("?")":""),k){for(L=-1,G=A.length;++L<G;)if(H=A.charCodeAt(L),48>H||H>57){D=(H===46?i+A.slice(L+1):A.slice(L))+D,A=A.slice(0,L);break}}}b&&!v&&(A=t(A,1/0));var Z=O.length+A.length+D.length,q=Z<x?new Array(x-Z+1).join(f):"";switch(b&&v&&(A=t(q+A,q.length?x-D.length:1/0),q=""),p){case"<":A=O+A+D+q;break;case"=":A=O+q+A+D;break;case"^":A=q.slice(0,Z=q.length>>1)+O+A+D+q.slice(Z);break;default:A=q+O+A+D;break}return a(A)}return T.toString=function(){return h+""},T}function d(h,f){var p=u((h=Wf(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(cd(f)/3)))*3,g=Math.pow(10,-m),v=EA[8+m/3];return function(x){return p(g*x)+v}}return{format:u,formatPrefix:d}}var og,xE,Z4;Dhe({thousands:",",grouping:[3],currency:["$",""]});function Dhe(e){return og=Mhe(e),xE=og.format,Z4=og.formatPrefix,og}function Lhe(e){return Math.max(0,-cd(Math.abs(e)))}function Bhe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cd(t)/3)))*3-cd(Math.abs(e)))}function Fhe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,cd(t)-cd(e))+1}function J4(e,t,n,r){var i=u1(e,t,n),a;switch(r=Wf(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Bhe(i,s))&&(r.precision=a),Z4(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Fhe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Lhe(i))&&(r.precision=a-(r.type==="%")*2);break}}return xE(r)}function hc(e){var t=e.domain;return e.ticks=function(n){var r=t();return c1(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return J4(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,s=r[i],c=r[a],l,u,d=10;for(c<s&&(u=s,s=c,c=u,u=i,i=a,a=u);d-- >0;){if(u=l1(s,c,n),u===l)return r[i]=s,r[a]=c,t(r);if(u>0)s=Math.floor(s/u)*u,c=Math.ceil(c/u)*u;else if(u<0)s=Math.ceil(s*u)/u,c=Math.floor(c*u)/u;else break;l=u}return e},e}function Dv(){var e=vE();return e.copy=function(){return Kp(e,Dv())},aa.apply(e,arguments),hc(e)}function Q4(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Iv),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Q4(e).unknown(t)},e=arguments.length?Array.from(e,Iv):[0,1],hc(n)}function e3(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),e[n]=t.floor(i),e[r]=t.ceil(a),e}function NA(e){return Math.log(e)}function PA(e){return Math.exp(e)}function zhe(e){return-Math.log(-e)}function Uhe(e){return-Math.exp(-e)}function Hhe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vhe(e){return e===10?Hhe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Ghe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function kA(e){return(t,n)=>-e(-t,n)}function bE(e){const t=e(NA,PA),n=t.domain;let r=10,i,a;function s(){return i=Ghe(r),a=Vhe(r),n()[0]<0?(i=kA(i),a=kA(a),e(zhe,Uhe)):e(NA,PA),t}return t.base=function(c){return arguments.length?(r=+c,s()):r},t.domain=function(c){return arguments.length?(n(c),s()):n()},t.ticks=c=>{const l=n();let u=l[0],d=l[l.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=i(u),p=i(d),m,g;const v=c==null?10:+c;let x=[];if(!(r%1)&&p-f<v){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(m=1;m<r;++m)if(g=f<0?m/a(-f):m*a(f),!(g<u)){if(g>d)break;x.push(g)}}else for(;f<=p;++f)for(m=r-1;m>=1;--m)if(g=f>0?m/a(-f):m*a(f),!(g<u)){if(g>d)break;x.push(g)}x.length*2<v&&(x=c1(u,d,v))}else x=c1(f,p,Math.min(p-f,v)).map(a);return h?x.reverse():x},t.tickFormat=(c,l)=>{if(c==null&&(c=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Wf(l)).precision==null&&(l.trim=!0),l=xE(l)),c===1/0)return l;const u=Math.max(1,r*c/t.ticks().length);return d=>{let h=d/a(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=u?l(d):""}},t.nice=()=>n(e3(n(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),t}function t3(){const e=bE(Cx()).domain([1,10]);return e.copy=()=>Kp(e,t3()).base(e.base()),aa.apply(e,arguments),e}function CA(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function AA(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function wE(e){var t=1,n=e(CA(t),AA(t));return n.constant=function(r){return arguments.length?e(CA(t=+r),AA(t)):t},hc(n)}function n3(){var e=wE(Cx());return e.copy=function(){return Kp(e,n3()).constant(e.constant())},aa.apply(e,arguments)}function TA(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Whe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function qhe(e){return e<0?-e*e:e*e}function _E(e){var t=e(Xr,Xr),n=1;function r(){return n===1?e(Xr,Xr):n===.5?e(Whe,qhe):e(TA(n),TA(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},hc(t)}function jE(){var e=_E(Cx());return e.copy=function(){return Kp(e,jE()).exponent(e.exponent())},aa.apply(e,arguments),e}function Khe(){return jE.apply(null,arguments).exponent(.5)}function OA(e){return Math.sign(e)*e*e}function Yhe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function r3(){var e=vE(),t=[0,1],n=!1,r;function i(a){var s=Yhe(e(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return e.invert(OA(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Iv)).map(OA)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return r3(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},aa.apply(i,arguments),hc(i)}function i3(){var e=[],t=[],n=[],r;function i(){var s=0,c=Math.max(1,t.length);for(n=new Array(c-1);++s<c;)n[s-1]=ehe(e,s/c);return a}function a(s){return s==null||isNaN(s=+s)?r:t[Wp(n,s)]}return a.invertExtent=function(s){var c=t.indexOf(s);return c<0?[NaN,NaN]:[c>0?n[c-1]:e[0],c<n.length?n[c]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let c of s)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(Yo),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return i3().domain(e).range(t).unknown(r)},aa.apply(a,arguments)}function a3(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[Wp(r,l,0,n)]:a}function c(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,c()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,c()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return a3().domain([e,t]).range(i).unknown(a)},aa.apply(hc(s),arguments)}function s3(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Wp(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return s3().domain(e).range(t).unknown(n)},aa.apply(i,arguments)}const nw=new Date,rw=new Date;function lr(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),c=i.ceil(a);return a-s<c-a?s:c},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,c)=>{const l=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<s)||!(c>0))return l;let u;do l.push(u=new Date(+a)),t(a,c),e(a);while(u<a&&a<s);return l},i.filter=a=>lr(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,c)=>{if(s>=s)if(c<0)for(;++c<=0;)for(;t(s,-1),!a(s););else for(;--c>=0;)for(;t(s,1),!a(s););}),n&&(i.count=(a,s)=>(nw.setTime(+a),rw.setTime(+s),e(nw),e(rw),Math.floor(n(nw,rw))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Lv=lr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Lv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?lr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Lv);Lv.range;const Ts=1e3,Yi=Ts*60,Os=Yi*60,Ks=Os*24,SE=Ks*7,RA=Ks*30,iw=Ks*365,Jc=lr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ts)},(e,t)=>(t-e)/Ts,e=>e.getUTCSeconds());Jc.range;const EE=lr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ts)},(e,t)=>{e.setTime(+e+t*Yi)},(e,t)=>(t-e)/Yi,e=>e.getMinutes());EE.range;const NE=lr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Yi)},(e,t)=>(t-e)/Yi,e=>e.getUTCMinutes());NE.range;const PE=lr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ts-e.getMinutes()*Yi)},(e,t)=>{e.setTime(+e+t*Os)},(e,t)=>(t-e)/Os,e=>e.getHours());PE.range;const kE=lr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Os)},(e,t)=>(t-e)/Os,e=>e.getUTCHours());kE.range;const Yp=lr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yi)/Ks,e=>e.getDate()-1);Yp.range;const Ax=lr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ks,e=>e.getUTCDate()-1);Ax.range;const o3=lr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ks,e=>Math.floor(e/Ks));o3.range;function Tl(e){return lr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Yi)/SE)}const Tx=Tl(0),Bv=Tl(1),Xhe=Tl(2),Zhe=Tl(3),ld=Tl(4),Jhe=Tl(5),Qhe=Tl(6);Tx.range;Bv.range;Xhe.range;Zhe.range;ld.range;Jhe.range;Qhe.range;function Ol(e){return lr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/SE)}const Ox=Ol(0),Fv=Ol(1),efe=Ol(2),tfe=Ol(3),ud=Ol(4),nfe=Ol(5),rfe=Ol(6);Ox.range;Fv.range;efe.range;tfe.range;ud.range;nfe.range;rfe.range;const CE=lr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());CE.range;const AE=lr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());AE.range;const Ys=lr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ys.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:lr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ys.range;const Xs=lr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:lr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Xs.range;function c3(e,t,n,r,i,a){const s=[[Jc,1,Ts],[Jc,5,5*Ts],[Jc,15,15*Ts],[Jc,30,30*Ts],[a,1,Yi],[a,5,5*Yi],[a,15,15*Yi],[a,30,30*Yi],[i,1,Os],[i,3,3*Os],[i,6,6*Os],[i,12,12*Os],[r,1,Ks],[r,2,2*Ks],[n,1,SE],[t,1,RA],[t,3,3*RA],[e,1,iw]];function c(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const p=h&&typeof h.range=="function"?h:l(u,d,h),m=p?p.range(u,+d+1):[];return f?m.reverse():m}function l(u,d,h){const f=Math.abs(d-u)/h,p=hE(([,,v])=>v).right(s,f);if(p===s.length)return e.every(u1(u/iw,d/iw,h));if(p===0)return Lv.every(Math.max(u1(u,d,h),1));const[m,g]=s[f/s[p-1][2]<s[p][2]/f?p-1:p];return m.every(g)}return[c,l]}const[ife,afe]=c3(Xs,AE,Ox,o3,kE,NE),[sfe,ofe]=c3(Ys,CE,Tx,Yp,PE,EE);function aw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function sw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ah(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function cfe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,c=e.months,l=e.shortMonths,u=Th(i),d=Oh(i),h=Th(a),f=Oh(a),p=Th(s),m=Oh(s),g=Th(c),v=Oh(c),x=Th(l),b=Oh(l),w={a:K,A:Z,b:q,B:le,c:null,d:BA,e:BA,f:Tfe,g:zfe,G:Hfe,H:kfe,I:Cfe,j:Afe,L:l3,m:Ofe,M:Rfe,p:_e,q:re,Q:UA,s:HA,S:$fe,u:Ife,U:Mfe,V:Dfe,w:Lfe,W:Bfe,x:null,X:null,y:Ffe,Y:Ufe,Z:Vfe,"%":zA},_={a:de,A:Se,b:nt,B:St,c:null,d:FA,e:FA,f:Kfe,g:ipe,G:spe,H:Gfe,I:Wfe,j:qfe,L:d3,m:Yfe,M:Xfe,p:Ee,q:se,Q:UA,s:HA,S:Zfe,u:Jfe,U:Qfe,V:epe,w:tpe,W:npe,x:null,X:null,y:rpe,Y:ape,Z:ope,"%":zA},j={a:T,A,b:O,B:D,c:L,d:DA,e:DA,f:Sfe,g:MA,G:IA,H:LA,I:LA,j:bfe,L:jfe,m:xfe,M:wfe,p:k,q:yfe,Q:Nfe,s:Pfe,S:_fe,u:ffe,U:pfe,V:mfe,w:hfe,W:gfe,x:G,X:H,y:MA,Y:IA,Z:vfe,"%":Efe};w.x=S(n,w),w.X=S(r,w),w.c=S(t,w),_.x=S(n,_),_.X=S(r,_),_.c=S(t,_);function S(X,ne){return function(ae){var W=[],Re=-1,Pe=0,Ve=X.length,Ct,qt,tr;for(ae instanceof Date||(ae=new Date(+ae));++Re<Ve;)X.charCodeAt(Re)===37&&(W.push(X.slice(Pe,Re)),(qt=$A[Ct=X.charAt(++Re)])!=null?Ct=X.charAt(++Re):qt=Ct==="e"?" ":"0",(tr=ne[Ct])&&(Ct=tr(ae,qt)),W.push(Ct),Pe=Re+1);return W.push(X.slice(Pe,Re)),W.join("")}}function N(X,ne){return function(ae){var W=Ah(1900,void 0,1),Re=P(W,X,ae+="",0),Pe,Ve;if(Re!=ae.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(ne&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(Pe=sw(Ah(W.y,0,1)),Ve=Pe.getUTCDay(),Pe=Ve>4||Ve===0?Fv.ceil(Pe):Fv(Pe),Pe=Ax.offset(Pe,(W.V-1)*7),W.y=Pe.getUTCFullYear(),W.m=Pe.getUTCMonth(),W.d=Pe.getUTCDate()+(W.w+6)%7):(Pe=aw(Ah(W.y,0,1)),Ve=Pe.getDay(),Pe=Ve>4||Ve===0?Bv.ceil(Pe):Bv(Pe),Pe=Yp.offset(Pe,(W.V-1)*7),W.y=Pe.getFullYear(),W.m=Pe.getMonth(),W.d=Pe.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),Ve="Z"in W?sw(Ah(W.y,0,1)).getUTCDay():aw(Ah(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(Ve+5)%7:W.w+W.U*7-(Ve+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,sw(W)):aw(W)}}function P(X,ne,ae,W){for(var Re=0,Pe=ne.length,Ve=ae.length,Ct,qt;Re<Pe;){if(W>=Ve)return-1;if(Ct=ne.charCodeAt(Re++),Ct===37){if(Ct=ne.charAt(Re++),qt=j[Ct in $A?ne.charAt(Re++):Ct],!qt||(W=qt(X,ae,W))<0)return-1}else if(Ct!=ae.charCodeAt(W++))return-1}return W}function k(X,ne,ae){var W=u.exec(ne.slice(ae));return W?(X.p=d.get(W[0].toLowerCase()),ae+W[0].length):-1}function T(X,ne,ae){var W=p.exec(ne.slice(ae));return W?(X.w=m.get(W[0].toLowerCase()),ae+W[0].length):-1}function A(X,ne,ae){var W=h.exec(ne.slice(ae));return W?(X.w=f.get(W[0].toLowerCase()),ae+W[0].length):-1}function O(X,ne,ae){var W=x.exec(ne.slice(ae));return W?(X.m=b.get(W[0].toLowerCase()),ae+W[0].length):-1}function D(X,ne,ae){var W=g.exec(ne.slice(ae));return W?(X.m=v.get(W[0].toLowerCase()),ae+W[0].length):-1}function L(X,ne,ae){return P(X,t,ne,ae)}function G(X,ne,ae){return P(X,n,ne,ae)}function H(X,ne,ae){return P(X,r,ne,ae)}function K(X){return s[X.getDay()]}function Z(X){return a[X.getDay()]}function q(X){return l[X.getMonth()]}function le(X){return c[X.getMonth()]}function _e(X){return i[+(X.getHours()>=12)]}function re(X){return 1+~~(X.getMonth()/3)}function de(X){return s[X.getUTCDay()]}function Se(X){return a[X.getUTCDay()]}function nt(X){return l[X.getUTCMonth()]}function St(X){return c[X.getUTCMonth()]}function Ee(X){return i[+(X.getUTCHours()>=12)]}function se(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var ne=S(X+="",w);return ne.toString=function(){return X},ne},parse:function(X){var ne=N(X+="",!1);return ne.toString=function(){return X},ne},utcFormat:function(X){var ne=S(X+="",_);return ne.toString=function(){return X},ne},utcParse:function(X){var ne=N(X+="",!0);return ne.toString=function(){return X},ne}}}var $A={"-":"",_:" ",0:"0"},yr=/^\s*\d+/,lfe=/^%/,ufe=/[\\^$*+?|[\]().{}]/g;function Vt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function dfe(e){return e.replace(ufe,"\\$&")}function Th(e){return new RegExp("^(?:"+e.map(dfe).join("|")+")","i")}function Oh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function hfe(e,t,n){var r=yr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ffe(e,t,n){var r=yr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pfe(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function mfe(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function gfe(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function IA(e,t,n){var r=yr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function MA(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function vfe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yfe(e,t,n){var r=yr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function xfe(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function DA(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function bfe(e,t,n){var r=yr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function LA(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wfe(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function _fe(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jfe(e,t,n){var r=yr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Sfe(e,t,n){var r=yr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Efe(e,t,n){var r=lfe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Nfe(e,t,n){var r=yr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Pfe(e,t,n){var r=yr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function BA(e,t){return Vt(e.getDate(),t,2)}function kfe(e,t){return Vt(e.getHours(),t,2)}function Cfe(e,t){return Vt(e.getHours()%12||12,t,2)}function Afe(e,t){return Vt(1+Yp.count(Ys(e),e),t,3)}function l3(e,t){return Vt(e.getMilliseconds(),t,3)}function Tfe(e,t){return l3(e,t)+"000"}function Ofe(e,t){return Vt(e.getMonth()+1,t,2)}function Rfe(e,t){return Vt(e.getMinutes(),t,2)}function $fe(e,t){return Vt(e.getSeconds(),t,2)}function Ife(e){var t=e.getDay();return t===0?7:t}function Mfe(e,t){return Vt(Tx.count(Ys(e)-1,e),t,2)}function u3(e){var t=e.getDay();return t>=4||t===0?ld(e):ld.ceil(e)}function Dfe(e,t){return e=u3(e),Vt(ld.count(Ys(e),e)+(Ys(e).getDay()===4),t,2)}function Lfe(e){return e.getDay()}function Bfe(e,t){return Vt(Bv.count(Ys(e)-1,e),t,2)}function Ffe(e,t){return Vt(e.getFullYear()%100,t,2)}function zfe(e,t){return e=u3(e),Vt(e.getFullYear()%100,t,2)}function Ufe(e,t){return Vt(e.getFullYear()%1e4,t,4)}function Hfe(e,t){var n=e.getDay();return e=n>=4||n===0?ld(e):ld.ceil(e),Vt(e.getFullYear()%1e4,t,4)}function Vfe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Vt(t/60|0,"0",2)+Vt(t%60,"0",2)}function FA(e,t){return Vt(e.getUTCDate(),t,2)}function Gfe(e,t){return Vt(e.getUTCHours(),t,2)}function Wfe(e,t){return Vt(e.getUTCHours()%12||12,t,2)}function qfe(e,t){return Vt(1+Ax.count(Xs(e),e),t,3)}function d3(e,t){return Vt(e.getUTCMilliseconds(),t,3)}function Kfe(e,t){return d3(e,t)+"000"}function Yfe(e,t){return Vt(e.getUTCMonth()+1,t,2)}function Xfe(e,t){return Vt(e.getUTCMinutes(),t,2)}function Zfe(e,t){return Vt(e.getUTCSeconds(),t,2)}function Jfe(e){var t=e.getUTCDay();return t===0?7:t}function Qfe(e,t){return Vt(Ox.count(Xs(e)-1,e),t,2)}function h3(e){var t=e.getUTCDay();return t>=4||t===0?ud(e):ud.ceil(e)}function epe(e,t){return e=h3(e),Vt(ud.count(Xs(e),e)+(Xs(e).getUTCDay()===4),t,2)}function tpe(e){return e.getUTCDay()}function npe(e,t){return Vt(Fv.count(Xs(e)-1,e),t,2)}function rpe(e,t){return Vt(e.getUTCFullYear()%100,t,2)}function ipe(e,t){return e=h3(e),Vt(e.getUTCFullYear()%100,t,2)}function ape(e,t){return Vt(e.getUTCFullYear()%1e4,t,4)}function spe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ud(e):ud.ceil(e),Vt(e.getUTCFullYear()%1e4,t,4)}function ope(){return"+0000"}function zA(){return"%"}function UA(e){return+e}function HA(e){return Math.floor(+e/1e3)}var Jl,f3,p3;cpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cpe(e){return Jl=cfe(e),f3=Jl.format,Jl.parse,p3=Jl.utcFormat,Jl.utcParse,Jl}function lpe(e){return new Date(e)}function upe(e){return e instanceof Date?+e:+new Date(+e)}function TE(e,t,n,r,i,a,s,c,l,u){var d=vE(),h=d.invert,f=d.domain,p=u(".%L"),m=u(":%S"),g=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),b=u("%b %d"),w=u("%B"),_=u("%Y");function j(S){return(l(S)<S?p:c(S)<S?m:s(S)<S?g:a(S)<S?v:r(S)<S?i(S)<S?x:b:n(S)<S?w:_)(S)}return d.invert=function(S){return new Date(h(S))},d.domain=function(S){return arguments.length?f(Array.from(S,upe)):f().map(lpe)},d.ticks=function(S){var N=f();return e(N[0],N[N.length-1],S??10)},d.tickFormat=function(S,N){return N==null?j:u(N)},d.nice=function(S){var N=f();return(!S||typeof S.range!="function")&&(S=t(N[0],N[N.length-1],S??10)),S?f(e3(N,S)):d},d.copy=function(){return Kp(d,TE(e,t,n,r,i,a,s,c,l,u))},d}function dpe(){return aa.apply(TE(sfe,ofe,Ys,CE,Tx,Yp,PE,EE,Jc,f3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hpe(){return aa.apply(TE(ife,afe,Xs,AE,Ox,Ax,kE,NE,Jc,p3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Rx(){var e=0,t=1,n,r,i,a,s=Xr,c=!1,l;function u(h){return h==null||isNaN(h=+h)?l:s(i===0?.5:(h=(a(h)-n)*i,c?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(h){return arguments.length?(c=!!h,u):c},u.interpolator=function(h){return arguments.length?(s=h,u):s};function d(h){return function(f){var p,m;return arguments.length?([p,m]=f,s=h(p,m),u):[s(0),s(1)]}}return u.range=d(eh),u.rangeRound=d(gE),u.unknown=function(h){return arguments.length?(l=h,u):l},function(h){return a=h,n=h(e),r=h(t),i=n===r?0:1/(r-n),u}}function fc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function m3(){var e=hc(Rx()(Xr));return e.copy=function(){return fc(e,m3())},to.apply(e,arguments)}function g3(){var e=bE(Rx()).domain([1,10]);return e.copy=function(){return fc(e,g3()).base(e.base())},to.apply(e,arguments)}function v3(){var e=wE(Rx());return e.copy=function(){return fc(e,v3()).constant(e.constant())},to.apply(e,arguments)}function OE(){var e=_E(Rx());return e.copy=function(){return fc(e,OE()).exponent(e.exponent())},to.apply(e,arguments)}function fpe(){return OE.apply(null,arguments).exponent(.5)}function y3(){var e=[],t=Xr;function n(r){if(r!=null&&!isNaN(r=+r))return t((Wp(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Yo),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Qde(e,a/r))},n.copy=function(){return y3(t).domain(e)},to.apply(n,arguments)}function $x(){var e=0,t=.5,n=1,r=1,i,a,s,c,l,u=Xr,d,h=!1,f;function p(g){return isNaN(g=+g)?f:(g=.5+((g=+d(g))-a)*(r*g<r*a?c:l),u(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,n]=g,i=d(e=+e),a=d(t=+t),s=d(n=+n),c=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,p):[e,t,n]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(u=g,p):u};function m(g){return function(v){var x,b,w;return arguments.length?([x,b,w]=v,u=Ehe(g,[x,b,w]),p):[u(0),u(.5),u(1)]}}return p.range=m(eh),p.rangeRound=m(gE),p.unknown=function(g){return arguments.length?(f=g,p):f},function(g){return d=g,i=g(e),a=g(t),s=g(n),c=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,p}}function x3(){var e=hc($x()(Xr));return e.copy=function(){return fc(e,x3())},to.apply(e,arguments)}function b3(){var e=bE($x()).domain([.1,1,10]);return e.copy=function(){return fc(e,b3()).base(e.base())},to.apply(e,arguments)}function w3(){var e=wE($x());return e.copy=function(){return fc(e,w3()).constant(e.constant())},to.apply(e,arguments)}function RE(){var e=_E($x());return e.copy=function(){return fc(e,RE()).exponent(e.exponent())},to.apply(e,arguments)}function ppe(){return RE.apply(null,arguments).exponent(.5)}const VA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Uf,scaleDiverging:x3,scaleDivergingLog:b3,scaleDivergingPow:RE,scaleDivergingSqrt:ppe,scaleDivergingSymlog:w3,scaleIdentity:Q4,scaleImplicit:d1,scaleLinear:Dv,scaleLog:t3,scaleOrdinal:fE,scalePoint:hf,scalePow:jE,scaleQuantile:i3,scaleQuantize:a3,scaleRadial:r3,scaleSequential:m3,scaleSequentialLog:g3,scaleSequentialPow:OE,scaleSequentialQuantile:y3,scaleSequentialSqrt:fpe,scaleSequentialSymlog:v3,scaleSqrt:Khe,scaleSymlog:n3,scaleThreshold:s3,scaleTime:dpe,scaleUtc:hpe,tickFormat:J4},Symbol.toStringTag,{value:"Module"}));var mpe=Gd;function gpe(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(s!=null&&(c===void 0?s===s&&!mpe(s):n(s,c)))var c=s,l=a}return l}var Ix=gpe;function vpe(e,t){return e>t}var _3=vpe,ype=Ix,xpe=_3,bpe=Qd;function wpe(e){return e&&e.length?ype(e,bpe,xpe):void 0}var _pe=wpe;const Mx=cn(_pe);function jpe(e,t){return e<t}var j3=jpe,Spe=Ix,Epe=j3,Npe=Qd;function Ppe(e){return e&&e.length?Spe(e,Npe,Epe):void 0}var kpe=Ppe;const Dx=cn(kpe);var Cpe=qS,Ape=us,Tpe=T4,Ope=ui;function Rpe(e,t){var n=Ope(e)?Cpe:Tpe;return n(e,Ape(t))}var $pe=Rpe,Ipe=C4,Mpe=$pe;function Dpe(e,t){return Ipe(Mpe(e,t),1)}var Lpe=Dpe;const Bpe=cn(Lpe);var Fpe=cE;function zpe(e,t){return Fpe(e,t)}var Upe=zpe;const Xp=cn(Upe);var th=1e9,Hpe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IE,En=!0,ta="[DecimalError] ",fl=ta+"Invalid argument: ",$E=ta+"Exponent out of range: ",nh=Math.floor,Bc=Math.pow,Vpe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ai,fr=1e7,wn=7,S3=9007199254740991,zv=nh(S3/wn),$e={};$e.absoluteValue=$e.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$e.comparedTo=$e.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};$e.decimalPlaces=$e.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*wn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};$e.dividedBy=$e.div=function(e){return zs(this,new this.constructor(e))};$e.dividedToIntegerBy=$e.idiv=function(e){var t=this,n=t.constructor;return ln(zs(t,new n(e),0,1),n.precision)};$e.equals=$e.eq=function(e){return!this.cmp(e)};$e.exponent=function(){return Jn(this)};$e.greaterThan=$e.gt=function(e){return this.cmp(e)>0};$e.greaterThanOrEqualTo=$e.gte=function(e){return this.cmp(e)>=0};$e.isInteger=$e.isint=function(){return this.e>this.d.length-2};$e.isNegative=$e.isneg=function(){return this.s<0};$e.isPositive=$e.ispos=function(){return this.s>0};$e.isZero=function(){return this.s===0};$e.lessThan=$e.lt=function(e){return this.cmp(e)<0};$e.lessThanOrEqualTo=$e.lte=function(e){return this.cmp(e)<1};$e.logarithm=$e.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Ai))throw Error(ta+"NaN");if(n.s<1)throw Error(ta+(n.s?"NaN":"-Infinity"));return n.eq(Ai)?new r(0):(En=!1,t=zs(qf(n,a),qf(e,a),a),En=!0,ln(t,i))};$e.minus=$e.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?P3(t,e):E3(t,(e.s=-e.s,e))};$e.modulo=$e.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(ta+"NaN");return n.s?(En=!1,t=zs(n,e,0,1).times(e),En=!0,n.minus(t)):ln(new r(n),i)};$e.naturalExponential=$e.exp=function(){return N3(this)};$e.naturalLogarithm=$e.ln=function(){return qf(this)};$e.negated=$e.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$e.plus=$e.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?E3(t,e):P3(t,(e.s=-e.s,e))};$e.precision=$e.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(fl+e);if(t=Jn(i)+1,r=i.d.length-1,n=r*wn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};$e.squareRoot=$e.sqrt=function(){var e,t,n,r,i,a,s,c=this,l=c.constructor;if(c.s<1){if(!c.s)return new l(0);throw Error(ta+"NaN")}for(e=Jn(c),En=!1,i=Math.sqrt(+c),i==0||i==1/0?(t=Za(c.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=nh((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new l(t)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(zs(c,a,s+2)).times(.5),Za(a.d).slice(0,s)===(t=Za(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(ln(a,n+1,0),a.times(a).eq(c)){r=a;break}}else if(t!="9999")break;s+=4}return En=!0,ln(r,n)};$e.times=$e.mul=function(e){var t,n,r,i,a,s,c,l,u,d=this,h=d.constructor,f=d.d,p=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,l=f.length,u=p.length,l<u&&(a=f,f=p,p=a,s=l,l=u,u=s),a=[],s=l+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)c=a[i]+p[r]*f[i-r-1]+t,a[i--]=c%fr|0,t=c/fr|0;a[i]=(a[i]+t)%fr|0}for(;!a[--s];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,En?ln(e,h.precision):e};$e.toDecimalPlaces=$e.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(as(e,0,th),t===void 0?t=r.rounding:as(t,0,8),ln(n,e+Jn(n)+1,t))};$e.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Nl(r,!0):(as(e,0,th),t===void 0?t=i.rounding:as(t,0,8),r=ln(new i(r),e+1,t),n=Nl(r,!0,e+1)),n};$e.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Nl(i):(as(e,0,th),t===void 0?t=a.rounding:as(t,0,8),r=ln(new a(i),e+Jn(i)+1,t),n=Nl(r.abs(),!1,e+Jn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};$e.toInteger=$e.toint=function(){var e=this,t=e.constructor;return ln(new t(e),Jn(e)+1,t.rounding)};$e.toNumber=function(){return+this};$e.toPower=$e.pow=function(e){var t,n,r,i,a,s,c=this,l=c.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Ai);if(c=new l(c),!c.s){if(e.s<1)throw Error(ta+"Infinity");return c}if(c.eq(Ai))return c;if(r=l.precision,e.eq(Ai))return ln(c,r);if(t=e.e,n=e.d.length-1,s=t>=n,a=c.s,s){if((n=d<0?-d:d)<=S3){for(i=new l(Ai),t=Math.ceil(r/wn+4),En=!1;n%2&&(i=i.times(c),WA(i.d,t)),n=nh(n/2),n!==0;)c=c.times(c),WA(c.d,t);return En=!0,e.s<0?new l(Ai).div(i):ln(i,r)}}else if(a<0)throw Error(ta+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,c.s=1,En=!1,i=e.times(qf(c,r+u)),En=!0,i=N3(i),i.s=a,i};$e.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=Jn(i),r=Nl(i,n<=a.toExpNeg||n>=a.toExpPos)):(as(e,1,th),t===void 0?t=a.rounding:as(t,0,8),i=ln(new a(i),e,t),n=Jn(i),r=Nl(i,e<=n||n<=a.toExpNeg,e)),r};$e.toSignificantDigits=$e.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(as(e,1,th),t===void 0?t=r.rounding:as(t,0,8)),ln(new r(n),e,t)};$e.toString=$e.valueOf=$e.val=$e.toJSON=$e[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Jn(e),n=e.constructor;return Nl(e,t<=n.toExpNeg||t>=n.toExpPos)};function E3(e,t){var n,r,i,a,s,c,l,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),En?ln(t,h):t;if(l=e.d,u=t.d,s=e.e,i=t.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,c=u.length):(r=u,i=s,c=l.length),s=Math.ceil(h/wn),c=s>c?s+1:c+1,a>c&&(a=c,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(c=l.length,a=u.length,c-a<0&&(a=c,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/fr|0,l[a]%=fr;for(n&&(l.unshift(n),++i),c=l.length;l[--c]==0;)l.pop();return t.d=l,t.e=i,En?ln(t,h):t}function as(e,t,n){if(e!==~~e||e<t||e>n)throw Error(fl+e)}function Za(e){var t,n,r,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)r=e[t]+"",n=wn-r.length,n&&(a+=ko(n)),a+=r;s=e[t],r=s+"",n=wn-r.length,n&&(a+=ko(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var zs=function(){function e(r,i){var a,s=0,c=r.length;for(r=r.slice();c--;)a=r[c]*i+s,r[c]=a%fr|0,s=a/fr|0;return s&&r.unshift(s),r}function t(r,i,a,s){var c,l;if(a!=s)l=a>s?1:-1;else for(c=l=0;c<a;c++)if(r[c]!=i[c]){l=r[c]>i[c]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*fr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var c,l,u,d,h,f,p,m,g,v,x,b,w,_,j,S,N,P,k=r.constructor,T=r.s==i.s?1:-1,A=r.d,O=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(ta+"Division by zero");for(l=r.e-i.e,N=O.length,j=A.length,p=new k(T),m=p.d=[],u=0;O[u]==(A[u]||0);)++u;if(O[u]>(A[u]||0)&&--l,a==null?b=a=k.precision:s?b=a+(Jn(r)-Jn(i))+1:b=a,b<0)return new k(0);if(b=b/wn+2|0,u=0,N==1)for(d=0,O=O[0],b++;(u<j||d)&&b--;u++)w=d*fr+(A[u]||0),m[u]=w/O|0,d=w%O|0;else{for(d=fr/(O[0]+1)|0,d>1&&(O=e(O,d),A=e(A,d),N=O.length,j=A.length),_=N,g=A.slice(0,N),v=g.length;v<N;)g[v++]=0;P=O.slice(),P.unshift(0),S=O[0],O[1]>=fr/2&&++S;do d=0,c=t(O,g,N,v),c<0?(x=g[0],N!=v&&(x=x*fr+(g[1]||0)),d=x/S|0,d>1?(d>=fr&&(d=fr-1),h=e(O,d),f=h.length,v=g.length,c=t(h,g,f,v),c==1&&(d--,n(h,N<f?P:O,f))):(d==0&&(c=d=1),h=O.slice()),f=h.length,f<v&&h.unshift(0),n(g,h,v),c==-1&&(v=g.length,c=t(O,g,N,v),c<1&&(d++,n(g,N<v?P:O,v))),v=g.length):c===0&&(d++,g=[0]),m[u++]=d,c&&g[0]?g[v++]=A[_]||0:(g=[A[_]],v=1);while((_++<j||g[0]!==void 0)&&b--)}return m[0]||m.shift(),p.e=l,ln(p,s?a+Jn(p)+1:a)}}();function N3(e,t){var n,r,i,a,s,c,l=0,u=0,d=e.constructor,h=d.precision;if(Jn(e)>16)throw Error($E+Jn(e));if(!e.s)return new d(Ai);for(En=!1,c=h,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(r=Math.log(Bc(2,u))/Math.LN10*2+5|0,c+=r,n=i=a=new d(Ai),d.precision=c;;){if(i=ln(i.times(e),c),n=n.times(++l),s=a.plus(zs(i,n,c)),Za(s.d).slice(0,c)===Za(a.d).slice(0,c)){for(;u--;)a=ln(a.times(a),c);return d.precision=h,t==null?(En=!0,ln(a,h)):a}a=s}}function Jn(e){for(var t=e.e*wn,n=e.d[0];n>=10;n/=10)t++;return t}function ow(e,t,n){if(t>e.LN10.sd())throw En=!0,n&&(e.precision=n),Error(ta+"LN10 precision limit exceeded");return ln(new e(e.LN10),t)}function ko(e){for(var t="";e--;)t+="0";return t}function qf(e,t){var n,r,i,a,s,c,l,u,d,h=1,f=10,p=e,m=p.d,g=p.constructor,v=g.precision;if(p.s<1)throw Error(ta+(p.s?"NaN":"-Infinity"));if(p.eq(Ai))return new g(0);if(t==null?(En=!1,u=v):u=t,p.eq(10))return t==null&&(En=!0),ow(g,u);if(u+=f,g.precision=u,n=Za(m),r=n.charAt(0),a=Jn(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Za(p.d),r=n.charAt(0),h++;a=Jn(p),r>1?(p=new g("0."+n),a++):p=new g(r+"."+n.slice(1))}else return l=ow(g,u+2,v).times(a+""),p=qf(new g(r+"."+n.slice(1)),u-f).plus(l),g.precision=v,t==null?(En=!0,ln(p,v)):p;for(c=s=p=zs(p.minus(Ai),p.plus(Ai),u),d=ln(p.times(p),u),i=3;;){if(s=ln(s.times(d),u),l=c.plus(zs(s,new g(i),u)),Za(l.d).slice(0,u)===Za(c.d).slice(0,u))return c=c.times(2),a!==0&&(c=c.plus(ow(g,u+2,v).times(a+""))),c=zs(c,new g(h),u),g.precision=v,t==null?(En=!0,ln(c,v)):c;c=l,i+=2}}function GA(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=nh(n/wn),e.d=[],r=(n+1)%wn,n<0&&(r+=wn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=wn;r<i;)e.d.push(+t.slice(r,r+=wn));t=t.slice(r),r=wn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),En&&(e.e>zv||e.e<-zv))throw Error($E+n)}else e.s=0,e.e=0,e.d=[0];return e}function ln(e,t,n){var r,i,a,s,c,l,u,d,h=e.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=t-s,r<0)r+=wn,i=t,u=h[d=0];else{if(d=Math.ceil((r+1)/wn),a=h.length,d>=a)return e;for(u=a=h[d],s=1;a>=10;a/=10)s++;r%=wn,i=r-wn+s}if(n!==void 0&&(a=Bc(10,s-i-1),c=u/a%10|0,l=t<0||h[d+1]!==void 0||u%a,l=n<4?(c||l)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||l||n==6&&(r>0?i>0?u/Bc(10,s-i):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return l?(a=Jn(e),h.length=1,t=t-a-1,h[0]=Bc(10,(wn-t%wn)%wn),e.e=nh(-t/wn)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=Bc(10,wn-r),h[d]=i>0?(u/Bc(10,s-i)%Bc(10,i)|0)*a:0),l)for(;;)if(d==0){(h[0]+=a)==fr&&(h[0]=1,++e.e);break}else{if(h[d]+=a,h[d]!=fr)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(En&&(e.e>zv||e.e<-zv))throw Error($E+Jn(e));return e}function P3(e,t){var n,r,i,a,s,c,l,u,d,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),En?ln(t,p):t;if(l=e.d,h=t.d,r=t.e,u=e.e,l=l.slice(),s=u-r,s){for(d=s<0,d?(n=l,s=-s,c=h.length):(n=h,r=u,c=l.length),i=Math.max(Math.ceil(p/wn),c)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,c=h.length,d=i<c,d&&(c=i),i=0;i<c;i++)if(l[i]!=h[i]){d=l[i]<h[i];break}s=0}for(d&&(n=l,l=h,h=n,t.s=-t.s),c=l.length,i=h.length-c;i>0;--i)l[c++]=0;for(i=h.length;i>s;){if(l[--i]<h[i]){for(a=i;a&&l[--a]===0;)l[a]=fr-1;--l[a],l[i]+=fr}l[i]-=h[i]}for(;l[--c]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=r,En?ln(t,p):t):new f(0)}function Nl(e,t,n){var r,i=Jn(e),a=Za(e.d),s=a.length;return t?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+ko(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+ko(-i-1)+a,n&&(r=n-s)>0&&(a+=ko(r))):i>=s?(a+=ko(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+ko(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=ko(r))),e.s<0?"-"+a:a}function WA(e,t){if(e.length>t)return e.length=t,!0}function k3(e){var t,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(fl+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return GA(s,a.toString())}else if(typeof a!="string")throw Error(fl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Vpe.test(a))GA(s,a);else throw Error(fl+a)}if(i.prototype=$e,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=k3,i.config=i.set=Gpe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Gpe(e){if(!e||typeof e!="object")throw Error(ta+"Object expected");var t,n,r,i=["precision",1,th,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(nh(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(fl+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(fl+n+": "+r);return this}var IE=k3(Hpe);Ai=new IE(1);const on=IE;function Wpe(e){return Xpe(e)||Ype(e)||Kpe(e)||qpe()}function qpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kpe(e,t){if(e){if(typeof e=="string")return m1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m1(e,t)}}function Ype(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Xpe(e){if(Array.isArray(e))return m1(e)}function m1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zpe=function(t){return t},C3={},A3=function(t){return t===C3},qA=function(t){return function n(){return arguments.length===0||arguments.length===1&&A3(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Jpe=function e(t,n){return t===1?n:qA(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(c){return c!==C3}).length;return s>=t?n.apply(void 0,i):e(t-s,qA(function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var d=i.map(function(h){return A3(h)?l.shift():h});return n.apply(void 0,Wpe(d).concat(l))}))})},Lx=function(t){return Jpe(t.length,t)},g1=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},Qpe=Lx(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),eme=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Zpe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(c,l){return l(c)},a.apply(void 0,arguments))}},v1=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},T3=function(t){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(c,l){return c===n[l]})||(n=a,r=t.apply(void 0,a)),r}};function tme(e){var t;return e===0?t=1:t=Math.floor(new on(e).abs().log(10).toNumber())+1,t}function nme(e,t,n){for(var r=new on(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var rme=Lx(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),ime=Lx(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),ame=Lx(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Bx={rangeStep:nme,getDigitCount:tme,interpolateNumber:rme,uninterpolateNumber:ime,uninterpolateTruncation:ame};function y1(e){return cme(e)||ome(e)||O3(e)||sme()}function sme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ome(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function cme(e){if(Array.isArray(e))return x1(e)}function Kf(e,t){return dme(e)||ume(e,t)||O3(e,t)||lme()}function lme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O3(e,t){if(e){if(typeof e=="string")return x1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x1(e,t)}}function x1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ume(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=e[Symbol.iterator](),c;!(r=(c=s.next()).done)&&(n.push(c.value),!(t&&n.length===t));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function dme(e){if(Array.isArray(e))return e}function R3(e){var t=Kf(e,2),n=t[0],r=t[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function $3(e,t,n){if(e.lte(0))return new on(0);var r=Bx.getDigitCount(e.toNumber()),i=new on(10).pow(r),a=e.div(i),s=r!==1?.05:.1,c=new on(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=c.mul(i);return t?l:new on(Math.ceil(l))}function hme(e,t,n){var r=1,i=new on(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new on(10).pow(Bx.getDigitCount(e)-1),i=new on(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new on(Math.floor(e)))}else e===0?i=new on(Math.floor((t-1)/2)):n||(i=new on(Math.floor(e)));var s=Math.floor((t-1)/2),c=eme(Qpe(function(l){return i.add(new on(l-s).mul(r)).toNumber()}),g1);return c(0,t)}function I3(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new on(0),tickMin:new on(0),tickMax:new on(0)};var a=$3(new on(t).sub(e).div(n-1),r,i),s;e<=0&&t>=0?s=new on(0):(s=new on(e).add(t).div(2),s=s.sub(new on(s).mod(a)));var c=Math.ceil(s.sub(e).div(a).toNumber()),l=Math.ceil(new on(t).sub(s).div(a).toNumber()),u=c+l+1;return u>n?I3(e,t,n,r,i+1):(u<n&&(l=t>0?l+(n-u):l,c=t>0?c:c+(n-u)),{step:a,tickMin:s.sub(new on(c).mul(a)),tickMax:s.add(new on(l).mul(a))})}function fme(e){var t=Kf(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),c=R3([n,r]),l=Kf(c,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(y1(g1(0,i-1).map(function(){return 1/0}))):[].concat(y1(g1(0,i-1).map(function(){return-1/0})),[d]);return n>r?v1(h):h}if(u===d)return hme(u,i,a);var f=I3(u,d,s,a),p=f.step,m=f.tickMin,g=f.tickMax,v=Bx.rangeStep(m,g.add(new on(.1).mul(p)),p);return n>r?v1(v):v}function pme(e,t){var n=Kf(e,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=R3([r,i]),c=Kf(s,2),l=c[0],u=c[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var d=Math.max(t,2),h=$3(new on(u).sub(l).div(d-1),a,0),f=[].concat(y1(Bx.rangeStep(new on(l),new on(u).sub(new on(.99).mul(h)),h)),[u]);return r>i?v1(f):f}var mme=T3(fme),gme=T3(pme),vme="Invariant failed";function Pl(e,t){throw new Error(vme)}var yme=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function dd(e){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dd(e)}function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uv.apply(this,arguments)}function xme(e,t){return jme(e)||_me(e,t)||wme(e,t)||bme()}function bme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wme(e,t){if(e){if(typeof e=="string")return KA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KA(e,t)}}function KA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _me(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function jme(e){if(Array.isArray(e))return e}function Sme(e,t){if(e==null)return{};var n=Eme(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Eme(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Nme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L3(r.key),r)}}function kme(e,t,n){return t&&Pme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cme(e,t,n){return t=Hv(t),Ame(e,M3()?Reflect.construct(t,n||[],Hv(e).constructor):t.apply(e,n))}function Ame(e,t){if(t&&(dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tme(e)}function Tme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M3=function(){return!!e})()}function Hv(e){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hv(e)}function Ome(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b1(e,t)}function b1(e,t){return b1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},b1(e,t)}function D3(e,t,n){return t=L3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L3(e){var t=Rme(e,"string");return dd(t)=="symbol"?t:t+""}function Rme(e,t){if(dd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zp=function(e){function t(){return Nme(this,t),Cme(this,t,arguments)}return Ome(t,e),kme(t,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,c=r.dataKey,l=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=Sme(r,yme),p=Ye(f,!1);this.props.direction==="x"&&d.type!=="number"&&Pl();var m=l.map(function(g){var v=u(g,c),x=v.x,b=v.y,w=v.value,_=v.errorVal;if(!_)return null;var j=[],S,N;if(Array.isArray(_)){var P=xme(_,2);S=P[0],N=P[1]}else S=N=_;if(a==="vertical"){var k=d.scale,T=b+i,A=T+s,O=T-s,D=k(w-S),L=k(w+N);j.push({x1:L,y1:A,x2:L,y2:O}),j.push({x1:D,y1:T,x2:L,y2:T}),j.push({x1:D,y1:A,x2:D,y2:O})}else if(a==="horizontal"){var G=h.scale,H=x+i,K=H-s,Z=H+s,q=G(w-S),le=G(w+N);j.push({x1:K,y1:le,x2:Z,y2:le}),j.push({x1:H,y1:q,x2:H,y2:le}),j.push({x1:K,y1:q,x2:Z,y2:q})}return R.createElement(Ht,Uv({className:"recharts-errorBar",key:"bar-".concat(j.map(function(_e){return"".concat(_e.x1,"-").concat(_e.x2,"-").concat(_e.y1,"-").concat(_e.y2)}))},p),j.map(function(_e){return R.createElement("line",Uv({},_e,{key:"line-".concat(_e.x1,"-").concat(_e.x2,"-").concat(_e.y1,"-").concat(_e.y2)}))}))});return R.createElement(Ht,{className:"recharts-errorBars"},m)}}])}(R.Component);D3(Zp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});D3(Zp,"displayName","ErrorBar");function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Cc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(n),!0).forEach(function(r){$me(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $me(e,t,n){return t=Ime(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ime(e){var t=Mme(e,"string");return Yf(t)=="symbol"?t:t+""}function Mme(e,t){if(Yf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B3=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,s=Si(n,Ko);if(!s)return null;var c=Ko.defaultProps,l=c!==void 0?Cc(Cc({},c),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,p=h.props,m=p.sectors||p.data||[];return d.concat(m.map(function(g){return{type:s.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,p=f!==void 0?Cc(Cc({},f),h.props):{},m=p.dataKey,g=p.name,v=p.legendType,x=p.hide;return{inactive:x,dataKey:m,type:l.iconType||v||"square",color:ME(h),value:g||m,payload:p}}),Cc(Cc(Cc({},l),Ko.getWithHeight(s,i)),{},{payload:u,item:s})};function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function XA(e){return Fme(e)||Bme(e)||Lme(e)||Dme()}function Dme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lme(e,t){if(e){if(typeof e=="string")return w1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w1(e,t)}}function Bme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fme(e){if(Array.isArray(e))return w1(e)}function w1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(r){Tu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tu(e,t,n){return t=zme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zme(e){var t=Ume(e,"string");return Xf(t)=="symbol"?t:t+""}function Ume(e,t){if(Xf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function or(e,t,n){return gt(e)||gt(t)?n:cr(t)?Oi(e,t,n):ct(t)?t(e):n}function ff(e,t,n,r){var i=Bpe(e,function(c){return or(c,t)});if(n==="number"){var a=i.filter(function(c){return we(c)||parseFloat(c)});return a.length?[Dx(a),Mx(a)]:[1/0,-1/0]}var s=r?i.filter(function(c){return!gt(c)}):i;return s.map(function(c){return cr(c)||c instanceof Date?c:""})}var Hme=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,c=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(c<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<c;u++){var d=u>0?i[u-1].coordinate:i[c-1].coordinate,h=i[u].coordinate,f=u>=c-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Kr(h-d)!==Kr(f-h)){var m=[];if(Kr(f-h)===Kr(l[1]-l[0])){p=f;var g=h+l[1]-l[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{p=d;var v=f+l[1]-l[0];m[0]=Math.min(h,(v+h)/2),m[1]=Math.max(h,(v+h)/2)}var x=[Math.min(h,(p+h)/2),Math.max(h,(p+h)/2)];if(t>x[0]&&t<=x[1]||t>=m[0]&&t<=m[1]){s=i[u].index;break}}else{var b=Math.min(d,f),w=Math.max(d,f);if(t>(b+h)/2&&t<=(w+h)/2){s=i[u].index;break}}}else for(var _=0;_<c;_++)if(_===0&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<c-1&&t>(r[_].coordinate+r[_-1].coordinate)/2&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_===c-1&&t>(r[_].coordinate+r[_-1].coordinate)/2){s=r[_].index;break}return s},ME=function(t){var n,r=t,i=r.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Tn(Tn({},t.type.defaultProps),t.props):t.props,s=a.stroke,c=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:c;break;default:l=c;break}return l},Vme=function(t){var n=t.barSize,r=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},c=Object.keys(a),l=0,u=c.length;l<u;l++)for(var d=a[c[l]].stackGroups,h=Object.keys(d),f=0,p=h.length;f<p;f++){var m=d[h[f]],g=m.items,v=m.cateAxisId,x=g.filter(function(N){return Fs(N.type).indexOf("Bar")>=0});if(x&&x.length){var b=x[0].type.defaultProps,w=b!==void 0?Tn(Tn({},b),x[0].props):x[0].props,_=w.barSize,j=w[v];s[j]||(s[j]=[]);var S=gt(_)?n:_;s[j].push({item:x[0],stackList:x.slice(1),barSize:gt(S)?void 0:Yr(S,r,0)})}}return s},Gme=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,a=t.sizeList,s=a===void 0?[]:a,c=t.maxBarSize,l=s.length;if(l<1)return null;var u=Yr(n,i,0,!0),d,h=[];if(s[0].barSize===+s[0].barSize){var f=!1,p=i/l,m=s.reduce(function(_,j){return _+j.barSize||0},0);m+=(l-1)*u,m>=i&&(m-=(l-1)*u,u=0),m>=i&&p>0&&(f=!0,p*=.9,m=l*p);var g=(i-m)/2>>0,v={offset:g-u,size:0};d=s.reduce(function(_,j){var S={item:j.item,position:{offset:v.offset+v.size+u,size:f?p:j.barSize}},N=[].concat(XA(_),[S]);return v=N[N.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(P){N.push({item:P,position:v})}),N},h)}else{var x=Yr(r,i,0,!0);i-2*x-(l-1)*u<=0&&(u=0);var b=(i-2*x-(l-1)*u)/l;b>1&&(b>>=0);var w=c===+c?Math.min(b,c):b;d=s.reduce(function(_,j,S){var N=[].concat(XA(_),[{item:j.item,position:{offset:x+(b+u)*S+(b-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(P){N.push({item:P,position:N[N.length-1].position})}),N},h)}return d},Wme=function(t,n,r,i){var a=r.children,s=r.width,c=r.margin,l=s-(c.left||0)-(c.right||0),u=B3({children:a,legendWidth:l});if(u){var d=i||{},h=d.width,f=d.height,p=u.align,m=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&p!=="center"&&we(t[p]))return Tn(Tn({},t),{},Tu({},p,t[p]+(h||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&m!=="middle"&&we(t[m]))return Tn(Tn({},t),{},Tu({},m,t[m]+(f||0)))}return t},qme=function(t,n,r){return gt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},F3=function(t,n,r,i,a){var s=n.props.children,c=Ri(s,Zp).filter(function(u){return qme(i,a,u.props.direction)});if(c&&c.length){var l=c.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=or(d,r);if(gt(h))return u;var f=Array.isArray(h)?[Dx(h),Mx(h)]:[h,h],p=l.reduce(function(m,g){var v=or(d,g,0),x=f[0]-Math.abs(Array.isArray(v)?v[0]:v),b=f[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(x,m[0]),Math.max(b,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},Kme=function(t,n,r,i,a){var s=n.map(function(c){return F3(t,c,r,a,i)}).filter(function(c){return!gt(c)});return s&&s.length?s.reduce(function(c,l){return[Math.min(c[0],l[0]),Math.max(c[1],l[1])]},[1/0,-1/0]):null},z3=function(t,n,r,i,a){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&F3(t,l,u,i)||ff(t,u,r,a)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var c={};return s.reduce(function(l,u){for(var d=0,h=u.length;d<h;d++)c[u[d]]||(c[u[d]]=!0,l.push(u[d]));return l},[])},U3=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},H3=function(t,n,r,i){if(i)return t.map(function(l){return l.coordinate});var a,s,c=t.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||c.push(n),s||c.push(r),c},Rs=function(t,n,r){if(!t)return null;var i=t.scale,a=t.duplicateDomain,s=t.type,c=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?Kr(c[0]-c[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:i(f)+u,value:h,offset:u}});return d.filter(function(h){return!Vp(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,f){return{coordinate:i(h)+u,value:h,index:f,offset:u}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,f){return{coordinate:i(h)+u,value:a?a[h]:h,index:f,offset:u}})},cw=new WeakMap,cg=function(t,n){if(typeof n!="function")return t;cw.has(t)||cw.set(t,new WeakMap);var r=cw.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},V3=function(t,n,r){var i=t.scale,a=t.type,s=t.layout,c=t.axisType;if(i==="auto")return s==="radial"&&c==="radiusAxis"?{scale:Uf(),realScaleType:"band"}:s==="radial"&&c==="angleAxis"?{scale:Dv(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:hf(),realScaleType:"point"}:a==="category"?{scale:Uf(),realScaleType:"band"}:{scale:Dv(),realScaleType:"linear"};if(jl(i)){var l="scale".concat(wx(i));return{scale:(VA[l]||hf)(),realScaleType:VA[l]?l:"point"}}return ct(i)?{scale:i}:{scale:hf(),realScaleType:"point"}},JA=1e-4,G3=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),a=Math.min(i[0],i[1])-JA,s=Math.max(i[0],i[1])+JA,c=t(n[0]),l=t(n[r-1]);(c<a||c>s||l<a||l>s)&&t.domain([n[0],n[r-1]])}},Yme=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},Xme=function(t,n){if(!n||n.length!==2||!we(n[0])||!we(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!we(t[0])||t[0]<r)&&(a[0]=r),(!we(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Zme=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,s=0,c=0;c<n;++c){var l=Vp(t[c][r][1])?t[c][r][0]:t[c][r][1];l>=0?(t[c][r][0]=a,t[c][r][1]=a+l,a=t[c][r][1]):(t[c][r][0]=s,t[c][r][1]=s+l,s=t[c][r][1])}},Jme=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var c=Vp(t[s][r][1])?t[s][r][0]:t[s][r][1];c>=0?(t[s][r][0]=a,t[s][r][1]=a+c,a=t[s][r][1]):(t[s][r][0]=0,t[s][r][1]=0)}},Qme={sign:Zme,expand:yne,none:rd,silhouette:xne,wiggle:bne,positive:Jme},ege=function(t,n,r){var i=n.map(function(c){return c.props.dataKey}),a=Qme[r],s=vne().keys(i).value(function(c,l){return+or(c,l,0)}).order(W_).offset(a);return s(t)},tge=function(t,n,r,i,a,s){if(!t)return null;var c=s?n.reverse():n,l={},u=c.reduce(function(h,f){var p,m=(p=f.type)!==null&&p!==void 0&&p.defaultProps?Tn(Tn({},f.type.defaultProps),f.props):f.props,g=m.stackId,v=m.hide;if(v)return h;var x=m[r],b=h[x]||{hasStack:!1,stackGroups:{}};if(cr(g)){var w=b.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};w.items.push(f),b.hasStack=!0,b.stackGroups[g]=w}else b.stackGroups[Xd("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return Tn(Tn({},h),{},Tu({},x,b))},l),d={};return Object.keys(u).reduce(function(h,f){var p=u[f];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,v){var x=p.stackGroups[v];return Tn(Tn({},g),{},Tu({},v,{numericAxisId:r,cateAxisId:i,items:x.items,stackedData:ege(t,x.items,a)}))},m)}return Tn(Tn({},h),{},Tu({},f,p))},d)},W3=function(t,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,c=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=mme(u,a,c);return t.domain([Dx(d),Mx(d)]),{niceTicks:d}}if(a&&i==="number"){var h=t.domain(),f=gme(h,a,c);return{niceTicks:f}}return null};function QA(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,a=e.index,s=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!gt(i[t.dataKey])){var c=gv(n,"value",i[t.dataKey]);if(c)return c.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=or(i,gt(s)?t.dataKey:s);return gt(l)?null:t.scale(l)}var eT=function(t){var n=t.axis,r=t.ticks,i=t.offset,a=t.bandSize,s=t.entry,c=t.index;if(n.type==="category")return r[c]?r[c].coordinate+i:null;var l=or(s,n.dataKey,n.domain[c]);return gt(l)?null:n.scale(l)-a/2+i},nge=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},rge=function(t,n){var r,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Tn(Tn({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(cr(a)){var s=n[a];if(s){var c=s.items.indexOf(t);return c>=0?s.stackedData[c]:null}}return null},ige=function(t){return t.reduce(function(n,r){return[Dx(r.concat([n[0]]).filter(we)),Mx(r.concat([n[1]]).filter(we))]},[1/0,-1/0])},q3=function(t,n,r){return Object.keys(t).reduce(function(i,a){var s=t[a],c=s.stackedData,l=c.reduce(function(u,d){var h=ige(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},tT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_1=function(t,n,r){if(ct(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(we(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(tT.test(t[0])){var a=+tT.exec(t[0])[1];i[0]=n[0]-a}else ct(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(we(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if(nT.test(t[1])){var s=+nT.exec(t[1])[1];i[1]=n[1]+s}else ct(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},Vv=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var a=uE(n,function(h){return h.coordinate}),s=1/0,c=1,l=a.length;c<l;c++){var u=a[c],d=a[c-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},rT=function(t,n,r){return!t||!t.length||Xp(t,Oi(r,"type.defaultProps.domain"))?n:t},K3=function(t,n){var r=t.type.defaultProps?Tn(Tn({},t.type.defaultProps),t.props):t.props,i=r.dataKey,a=r.name,s=r.unit,c=r.formatter,l=r.tooltipType,u=r.chartType,d=r.hide;return Tn(Tn({},Ye(t,!1)),{},{dataKey:i,unit:s,formatter:c,name:a||i,color:ME(t),value:or(n,i),type:l,payload:n,chartType:u,hide:d})};function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function iT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ps(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iT(Object(n),!0).forEach(function(r){Y3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Y3(e,t,n){return t=age(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function age(e){var t=sge(e,"string");return Zf(t)=="symbol"?t:t+""}function sge(e,t){if(Zf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oge(e,t){return dge(e)||uge(e,t)||lge(e,t)||cge()}function cge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lge(e,t){if(e){if(typeof e=="string")return aT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aT(e,t)}}function aT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function dge(e){if(Array.isArray(e))return e}var Gv=Math.PI/180,hge=function(t){return t*180/Math.PI},mn=function(t,n,r,i){return{x:t+Math.cos(-Gv*i)*r,y:n+Math.sin(-Gv*i)*r}},X3=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},fge=function(t,n,r,i,a){var s=t.width,c=t.height,l=t.startAngle,u=t.endAngle,d=Yr(t.cx,s,s/2),h=Yr(t.cy,c,c/2),f=X3(s,c,r),p=Yr(t.innerRadius,f,0),m=Yr(t.outerRadius,f,f*.8),g=Object.keys(n);return g.reduce(function(v,x){var b=n[x],w=b.domain,_=b.reversed,j;if(gt(b.range))i==="angleAxis"?j=[l,u]:i==="radiusAxis"&&(j=[p,m]),_&&(j=[j[1],j[0]]);else{j=b.range;var S=j,N=oge(S,2);l=N[0],u=N[1]}var P=V3(b,a),k=P.realScaleType,T=P.scale;T.domain(w).range(j),G3(T);var A=W3(T,Ps(Ps({},b),{},{realScaleType:k})),O=Ps(Ps(Ps({},b),A),{},{range:j,radius:m,realScaleType:k,scale:T,cx:d,cy:h,innerRadius:p,outerRadius:m,startAngle:l,endAngle:u});return Ps(Ps({},v),{},Y3({},x,O))},{})},pge=function(t,n){var r=t.x,i=t.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},mge=function(t,n){var r=t.x,i=t.y,a=n.cx,s=n.cy,c=pge({x:r,y:i},{x:a,y:s});if(c<=0)return{radius:c};var l=(r-a)/c,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:c,angle:hge(u),angleInRadian:u}},gge=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},vge=function(t,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),c=Math.min(a,s);return t+c*360},sT=function(t,n){var r=t.x,i=t.y,a=mge({x:r,y:i},n),s=a.radius,c=a.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var d=gge(n),h=d.startAngle,f=d.endAngle,p=c,m;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}return m?Ps(Ps({},n),{},{radius:s,angle:vge(p,n)}):null},Z3=function(t){return!y.isValidElement(t)&&!ct(t)&&typeof t!="boolean"?t.className:""};function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}var yge=["offset"];function xge(e){return jge(e)||_ge(e)||wge(e)||bge()}function bge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wge(e,t){if(e){if(typeof e=="string")return j1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j1(e,t)}}function _ge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jge(e){if(Array.isArray(e))return j1(e)}function j1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sge(e,t){if(e==null)return{};var n=Ege(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ege(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(n),!0).forEach(function(r){Nge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nge(e,t,n){return t=Pge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pge(e){var t=kge(e,"string");return Jf(t)=="symbol"?t:t+""}function kge(e,t){if(Jf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qf(){return Qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qf.apply(this,arguments)}var Cge=function(t){var n=t.value,r=t.formatter,i=gt(t.children)?n:t.children;return ct(r)?r(i):i},Age=function(t,n){var r=Kr(n-t),i=Math.min(Math.abs(n-t),360);return r*i},Tge=function(t,n,r){var i=t.position,a=t.viewBox,s=t.offset,c=t.className,l=a,u=l.cx,d=l.cy,h=l.innerRadius,f=l.outerRadius,p=l.startAngle,m=l.endAngle,g=l.clockWise,v=(h+f)/2,x=Age(p,m),b=x>=0?1:-1,w,_;i==="insideStart"?(w=p+b*s,_=g):i==="insideEnd"?(w=m-b*s,_=!g):i==="end"&&(w=m+b*s,_=g),_=x<=0?_:!_;var j=mn(u,d,v,w),S=mn(u,d,v,w+(_?1:-1)*359),N="M".concat(j.x,",").concat(j.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(S.x,",").concat(S.y),P=gt(t.id)?Xd("recharts-radial-line-"):t.id;return R.createElement("text",Qf({},r,{dominantBaseline:"central",className:ut("recharts-radial-bar-label",c)}),R.createElement("defs",null,R.createElement("path",{id:P,d:N})),R.createElement("textPath",{xlinkHref:"#".concat(P)},n))},Oge=function(t){var n=t.viewBox,r=t.offset,i=t.position,a=n,s=a.cx,c=a.cy,l=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,f=(d+h)/2;if(i==="outside"){var p=mn(s,c,u+r,f),m=p.x,g=p.y;return{x:m,y:g,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,x=mn(s,c,v,f),b=x.x,w=x.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Rge=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,a=t.position,s=n,c=s.x,l=s.y,u=s.width,d=s.height,h=d>=0?1:-1,f=h*i,p=h>0?"end":"start",m=h>0?"start":"end",g=u>=0?1:-1,v=g*i,x=g>0?"end":"start",b=g>0?"start":"end";if(a==="top"){var w={x:c+u/2,y:l-h*i,textAnchor:"middle",verticalAnchor:p};return ir(ir({},w),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var _={x:c+u/2,y:l+d+f,textAnchor:"middle",verticalAnchor:m};return ir(ir({},_),r?{height:Math.max(r.y+r.height-(l+d),0),width:u}:{})}if(a==="left"){var j={x:c-v,y:l+d/2,textAnchor:x,verticalAnchor:"middle"};return ir(ir({},j),r?{width:Math.max(j.x-r.x,0),height:d}:{})}if(a==="right"){var S={x:c+u+v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return ir(ir({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:d}:{})}var N=r?{width:u,height:d}:{};return a==="insideLeft"?ir({x:c+v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},N):a==="insideRight"?ir({x:c+u-v,y:l+d/2,textAnchor:x,verticalAnchor:"middle"},N):a==="insideTop"?ir({x:c+u/2,y:l+f,textAnchor:"middle",verticalAnchor:m},N):a==="insideBottom"?ir({x:c+u/2,y:l+d-f,textAnchor:"middle",verticalAnchor:p},N):a==="insideTopLeft"?ir({x:c+v,y:l+f,textAnchor:b,verticalAnchor:m},N):a==="insideTopRight"?ir({x:c+u-v,y:l+f,textAnchor:x,verticalAnchor:m},N):a==="insideBottomLeft"?ir({x:c+v,y:l+d-f,textAnchor:b,verticalAnchor:p},N):a==="insideBottomRight"?ir({x:c+u-v,y:l+d-f,textAnchor:x,verticalAnchor:p},N):Wd(a)&&(we(a.x)||Xc(a.x))&&(we(a.y)||Xc(a.y))?ir({x:c+Yr(a.x,u),y:l+Yr(a.y,d),textAnchor:"end",verticalAnchor:"end"},N):ir({x:c+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},N)},$ge=function(t){return"cx"in t&&we(t.cx)};function pr(e){var t=e.offset,n=t===void 0?5:t,r=Sge(e,yge),i=ir({offset:n},r),a=i.viewBox,s=i.position,c=i.value,l=i.children,u=i.content,d=i.className,h=d===void 0?"":d,f=i.textBreakAll;if(!a||gt(c)&&gt(l)&&!y.isValidElement(u)&&!ct(u))return null;if(y.isValidElement(u))return y.cloneElement(u,i);var p;if(ct(u)){if(p=y.createElement(u,i),y.isValidElement(p))return p}else p=Cge(i);var m=$ge(a),g=Ye(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Tge(i,p,g);var v=m?Oge(i):Rge(i);return R.createElement(El,Qf({className:ut("recharts-label",h)},g,v,{breakAll:f}),p)}pr.displayName="Label";var J3=function(t){var n=t.cx,r=t.cy,i=t.angle,a=t.startAngle,s=t.endAngle,c=t.r,l=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,f=t.y,p=t.top,m=t.left,g=t.width,v=t.height,x=t.clockWise,b=t.labelViewBox;if(b)return b;if(we(g)&&we(v)){if(we(h)&&we(f))return{x:h,y:f,width:g,height:v};if(we(p)&&we(m))return{x:p,y:m,width:g,height:v}}return we(h)&&we(f)?{x:h,y:f,width:0,height:0}:we(n)&&we(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||l||c||0,clockWise:x}:t.viewBox?t.viewBox:{}},Ige=function(t,n){return t?t===!0?R.createElement(pr,{key:"label-implicit",viewBox:n}):cr(t)?R.createElement(pr,{key:"label-implicit",viewBox:n,value:t}):y.isValidElement(t)?t.type===pr?y.cloneElement(t,{key:"label-implicit",viewBox:n}):R.createElement(pr,{key:"label-implicit",content:t,viewBox:n}):ct(t)?R.createElement(pr,{key:"label-implicit",content:t,viewBox:n}):Wd(t)?R.createElement(pr,Qf({viewBox:n},t,{key:"label-implicit"})):null:null},Mge=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,a=J3(t),s=Ri(i,pr).map(function(l,u){return y.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var c=Ige(t.label,n||a);return[c].concat(xge(s))};pr.parseViewBox=J3;pr.renderCallByParent=Mge;function Dge(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Lge=Dge;const Bge=cn(Lge);function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}var Fge=["valueAccessor"],zge=["data","dataKey","clockWise","id","textBreakAll"];function Uge(e){return Wge(e)||Gge(e)||Vge(e)||Hge()}function Hge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vge(e,t){if(e){if(typeof e=="string")return S1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S1(e,t)}}function Gge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wge(e){if(Array.isArray(e))return S1(e)}function S1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wv(){return Wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wv.apply(this,arguments)}function cT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(n),!0).forEach(function(r){qge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qge(e,t,n){return t=Kge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kge(e){var t=Yge(e,"string");return ep(t)=="symbol"?t:t+""}function Yge(e,t){if(ep(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uT(e,t){if(e==null)return{};var n=Xge(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Zge=function(t){return Array.isArray(t.value)?Bge(t.value):t.value};function Us(e){var t=e.valueAccessor,n=t===void 0?Zge:t,r=uT(e,Fge),i=r.data,a=r.dataKey,s=r.clockWise,c=r.id,l=r.textBreakAll,u=uT(r,zge);return!i||!i.length?null:R.createElement(Ht,{className:"recharts-label-list"},i.map(function(d,h){var f=gt(a)?n(d,h):or(d&&d.payload,a),p=gt(c)?{}:{id:"".concat(c,"-").concat(h)};return R.createElement(pr,Wv({},Ye(d,!0),u,p,{parentViewBox:d.parentViewBox,value:f,textBreakAll:l,viewBox:pr.parseViewBox(gt(s)?d:lT(lT({},d),{},{clockWise:s})),key:"label-".concat(h),index:h}))}))}Us.displayName="LabelList";function Jge(e,t){return e?e===!0?R.createElement(Us,{key:"labelList-implicit",data:t}):R.isValidElement(e)||ct(e)?R.createElement(Us,{key:"labelList-implicit",data:t,content:e}):Wd(e)?R.createElement(Us,Wv({data:t},e,{key:"labelList-implicit"})):null:null}function Qge(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=Ri(r,Us).map(function(s,c){return y.cloneElement(s,{data:t,key:"labelList-".concat(c)})});if(!n)return i;var a=Jge(e.label,t);return[a].concat(Uge(i))}Us.renderCallByParent=Qge;function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}function E1(){return E1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E1.apply(this,arguments)}function dT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(n),!0).forEach(function(r){eve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eve(e,t,n){return t=tve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tve(e){var t=nve(e,"string");return tp(t)=="symbol"?t:t+""}function nve(e,t){if(tp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rve=function(t,n){var r=Kr(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},lg=function(t){var n=t.cx,r=t.cy,i=t.radius,a=t.angle,s=t.sign,c=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,d=l*(c?1:-1)+i,h=Math.asin(l/d)/Gv,f=u?a:a+s*h,p=mn(n,r,d,f),m=mn(n,r,i,f),g=u?a-s*h:a,v=mn(n,r,d*Math.cos(h*Gv),g);return{center:p,circleTangency:m,lineTangency:v,theta:h}},Q3=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.startAngle,c=t.endAngle,l=rve(s,c),u=s+l,d=mn(n,r,a,s),h=mn(n,r,a,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var p=mn(n,r,i,s),m=mn(n,r,i,u);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},ive=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.cornerRadius,c=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=Kr(d-u),f=lg({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:s,cornerIsExternal:l}),p=f.circleTangency,m=f.lineTangency,g=f.theta,v=lg({cx:n,cy:r,radius:a,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:l}),x=v.circleTangency,b=v.lineTangency,w=v.theta,_=l?Math.abs(u-d):Math.abs(u-d)-g-w;if(_<0)return c?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Q3({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var j="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(_>180),",").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var S=lg({cx:n,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),N=S.circleTangency,P=S.lineTangency,k=S.theta,T=lg({cx:n,cy:r,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),A=T.circleTangency,O=T.lineTangency,D=T.theta,L=l?Math.abs(u-d):Math.abs(u-d)-k-D;if(L<0&&s===0)return"".concat(j,"L").concat(n,",").concat(r,"Z");j+="L".concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(h>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,"Z")}else j+="L".concat(n,",").concat(r,"Z");return j},ave={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},eB=function(t){var n=hT(hT({},ave),t),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,c=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(s<a||d===h)return null;var p=ut("recharts-sector",f),m=s-a,g=Yr(c,m,0,!0),v;return g>0&&Math.abs(d-h)<360?v=ive({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}):v=Q3({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:h}),R.createElement("path",E1({},Ye(n,!0),{className:p,d:v,role:"img"}))};function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}function N1(){return N1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N1.apply(this,arguments)}function fT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(n),!0).forEach(function(r){sve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sve(e,t,n){return t=ove(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ove(e){var t=cve(e,"string");return np(t)=="symbol"?t:t+""}function cve(e,t){if(np(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(np(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mT={curveBasisClosed:sne,curveBasisOpen:one,curveBasis:ane,curveBumpX:Gte,curveBumpY:Wte,curveLinearClosed:cne,curveLinear:jx,curveMonotoneX:lne,curveMonotoneY:une,curveNatural:dne,curveStep:hne,curveStepAfter:pne,curveStepBefore:fne},ug=function(t){return t.x===+t.x&&t.y===+t.y},Rh=function(t){return t.x},$h=function(t){return t.y},lve=function(t,n){if(ct(t))return t;var r="curve".concat(wx(t));return(r==="curveMonotone"||r==="curveBump")&&n?mT["".concat(r).concat(n==="vertical"?"Y":"X")]:mT[r]||jx},uve=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,s=t.baseLine,c=t.layout,l=t.connectNulls,u=l===void 0?!1:l,d=lve(r,c),h=u?a.filter(function(g){return ug(g)}):a,f;if(Array.isArray(s)){var p=u?s.filter(function(g){return ug(g)}):s,m=h.map(function(g,v){return pT(pT({},g),{},{base:p[v]})});return c==="vertical"?f=eg().y($h).x1(Rh).x0(function(g){return g.base.x}):f=eg().x(Rh).y1($h).y0(function(g){return g.base.y}),f.defined(ug).curve(d),f(m)}return c==="vertical"&&we(s)?f=eg().y($h).x1(Rh).x0(s):we(s)?f=eg().x(Rh).y1($h).y0(s):f=KL().x(Rh).y($h),f.defined(ug).curve(d),f(h)},qv=function(t){var n=t.className,r=t.points,i=t.path,a=t.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?uve(t):i;return y.createElement("path",N1({},Ye(t,!1),vv(t),{className:ut("recharts-curve",n),d:s,ref:a}))},tB={exports:{}},dve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hve=dve,fve=hve;function nB(){}function rB(){}rB.resetWarningCache=nB;var pve=function(){function e(r,i,a,s,c,l){if(l!==fve){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rB,resetWarningCache:nB};return n.PropTypes=n,n};tB.exports=pve();var mve=tB.exports;const Yt=cn(mve);var gve=Object.getOwnPropertyNames,vve=Object.getOwnPropertySymbols,yve=Object.prototype.hasOwnProperty;function gT(e,t){return function(r,i,a){return e(r,i,a)&&t(r,i,a)}}function dg(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var a=i.cache,s=a.get(n),c=a.get(r);if(s&&c)return s===r&&c===n;a.set(n,r),a.set(r,n);var l=e(n,r,i);return a.delete(n),a.delete(r),l}}function xve(e){return e!=null?e[Symbol.toStringTag]:void 0}function vT(e){return gve(e).concat(vve(e))}var bve=Object.hasOwn||function(e,t){return yve.call(e,t)};function Rl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var wve="__v",_ve="__o",jve="_owner",yT=Object.getOwnPropertyDescriptor,xT=Object.keys;function Sve(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Eve(e,t){return Rl(e.getTime(),t.getTime())}function Nve(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Pve(e,t){return e===t}function bT(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.entries(),s,c,l=0;(s=a.next())&&!s.done;){for(var u=t.entries(),d=!1,h=0;(c=u.next())&&!c.done;){if(i[h]){h++;continue}var f=s.value,p=c.value;if(n.equals(f[0],p[0],l,h,e,t,n)&&n.equals(f[1],p[1],f[0],p[0],e,t,n)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}var kve=Rl;function Cve(e,t,n){var r=xT(e),i=r.length;if(xT(t).length!==i)return!1;for(;i-- >0;)if(!iB(e,t,n,r[i]))return!1;return!0}function Ih(e,t,n){var r=vT(e),i=r.length;if(vT(t).length!==i)return!1;for(var a,s,c;i-- >0;)if(a=r[i],!iB(e,t,n,a)||(s=yT(e,a),c=yT(t,a),(s||c)&&(!s||!c||s.configurable!==c.configurable||s.enumerable!==c.enumerable||s.writable!==c.writable)))return!1;return!0}function Ave(e,t){return Rl(e.valueOf(),t.valueOf())}function Tve(e,t){return e.source===t.source&&e.flags===t.flags}function wT(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.values(),s,c;(s=a.next())&&!s.done;){for(var l=t.values(),u=!1,d=0;(c=l.next())&&!c.done;){if(!i[d]&&n.equals(s.value,c.value,s.value,c.value,e,t,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Ove(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Rve(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function iB(e,t,n,r){return(r===jve||r===_ve||r===wve)&&(e.$$typeof||t.$$typeof)?!0:bve(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var $ve="[object Arguments]",Ive="[object Boolean]",Mve="[object Date]",Dve="[object Error]",Lve="[object Map]",Bve="[object Number]",Fve="[object Object]",zve="[object RegExp]",Uve="[object Set]",Hve="[object String]",Vve="[object URL]",Gve=Array.isArray,_T=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,jT=Object.assign,Wve=Object.prototype.toString.call.bind(Object.prototype.toString);function qve(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,c=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,f=e.areUrlsEqual,p=e.unknownTagComparators;return function(g,v,x){if(g===v)return!0;if(g==null||v==null)return!1;var b=typeof g;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?s(g,v,x):b==="function"?i(g,v,x):!1;var w=g.constructor;if(w!==v.constructor)return!1;if(w===Object)return c(g,v,x);if(Gve(g))return t(g,v,x);if(_T!=null&&_T(g))return h(g,v,x);if(w===Date)return n(g,v,x);if(w===RegExp)return u(g,v,x);if(w===Map)return a(g,v,x);if(w===Set)return d(g,v,x);var _=Wve(g);if(_===Mve)return n(g,v,x);if(_===zve)return u(g,v,x);if(_===Lve)return a(g,v,x);if(_===Uve)return d(g,v,x);if(_===Fve)return typeof g.then!="function"&&typeof v.then!="function"&&c(g,v,x);if(_===Vve)return f(g,v,x);if(_===Dve)return r(g,v,x);if(_===$ve)return c(g,v,x);if(_===Ive||_===Bve||_===Hve)return l(g,v,x);if(p){var j=p[_];if(!j){var S=xve(g);S&&(j=p[S])}if(j)return j(g,v,x)}return!1}}function Kve(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?Ih:Sve,areDatesEqual:Eve,areErrorsEqual:Nve,areFunctionsEqual:Pve,areMapsEqual:r?gT(bT,Ih):bT,areNumbersEqual:kve,areObjectsEqual:r?Ih:Cve,arePrimitiveWrappersEqual:Ave,areRegExpsEqual:Tve,areSetsEqual:r?gT(wT,Ih):wT,areTypedArraysEqual:r?Ih:Ove,areUrlsEqual:Rve,unknownTagComparators:void 0};if(n&&(i=jT({},i,n(i))),t){var a=dg(i.areArraysEqual),s=dg(i.areMapsEqual),c=dg(i.areObjectsEqual),l=dg(i.areSetsEqual);i=jT({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:c,areSetsEqual:l})}return i}function Yve(e){return function(t,n,r,i,a,s,c){return e(t,n,c)}}function Xve(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,a=e.strict;if(r)return function(l,u){var d=r(),h=d.cache,f=h===void 0?t?new WeakMap:void 0:h,p=d.meta;return n(l,u,{cache:f,equals:i,meta:p,strict:a})};if(t)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return n(l,u,s)}}var Zve=pc();pc({strict:!0});pc({circular:!0});pc({circular:!0,strict:!0});pc({createInternalComparator:function(){return Rl}});pc({strict:!0,createInternalComparator:function(){return Rl}});pc({circular:!0,createInternalComparator:function(){return Rl}});pc({circular:!0,createInternalComparator:function(){return Rl},strict:!0});function pc(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,a=e.strict,s=a===void 0?!1:a,c=Kve(e),l=qve(c),u=r?r(l):Yve(l);return Xve({circular:n,comparator:l,createState:i,equals:u,strict:s})}function Jve(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function ST(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):Jve(i)};requestAnimationFrame(r)}function P1(e){"@babel/helpers - typeof";return P1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P1(e)}function Qve(e){return rye(e)||nye(e)||tye(e)||eye()}function eye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tye(e,t){if(e){if(typeof e=="string")return ET(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ET(e,t)}}function ET(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rye(e){if(Array.isArray(e))return e}function iye(){var e={},t=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,c=Qve(s),l=c[0],u=c.slice(1);if(typeof l=="number"){ST(i.bind(null,u),l);return}i(l),ST(i.bind(null,u));return}P1(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function NT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NT(Object(n),!0).forEach(function(r){aB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aB(e,t,n){return t=aye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aye(e){var t=sye(e,"string");return rp(t)==="symbol"?t:String(t)}function sye(e,t){if(rp(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(rp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oye=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},cye=function(t){return t},lye=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},pf=function(t,n){return Object.keys(n).reduce(function(r,i){return PT(PT({},r),{},aB({},i,t(i,n[i])))},{})},kT=function(t,n,r){return t.map(function(i){return"".concat(lye(i)," ").concat(n,"ms ").concat(r)}).join(",")};function uye(e,t){return fye(e)||hye(e,t)||sB(e,t)||dye()}function dye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function fye(e){if(Array.isArray(e))return e}function pye(e){return vye(e)||gye(e)||sB(e)||mye()}function mye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sB(e,t){if(e){if(typeof e=="string")return k1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k1(e,t)}}function gye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vye(e){if(Array.isArray(e))return k1(e)}function k1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kv=1e-4,oB=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},cB=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},CT=function(t,n){return function(r){var i=oB(t,n);return cB(i,r)}},yye=function(t,n){return function(r){var i=oB(t,n),a=[].concat(pye(i.map(function(s,c){return s*c}).slice(1)),[0]);return cB(a,r)}},AT=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],c=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,c=1;break;case"ease":i=.25,a=.1,s=.25,c=1;break;case"ease-in":i=.42,a=0,s=1,c=1;break;case"ease-out":i=.42,a=0,s=.58,c=1;break;case"ease-in-out":i=0,a=0,s=.58,c=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=uye(u,4);i=d[0],a=d[1],s=d[2],c=d[3]}}}var h=CT(i,s),f=CT(a,c),p=yye(i,s),m=function(x){return x>1?1:x<0?0:x},g=function(x){for(var b=x>1?1:x,w=b,_=0;_<8;++_){var j=h(w)-b,S=p(w);if(Math.abs(j-b)<Kv||S<Kv)return f(w);w=m(w-j/S)}return f(w)};return g.isStepper=!1,g},xye=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,s=t.dt,c=s===void 0?17:s,l=function(d,h,f){var p=-(d-h)*r,m=f*a,g=f+(p-m)*c/1e3,v=f*c/1e3+d;return Math.abs(v-h)<Kv&&Math.abs(g)<Kv?[h,0]:[v,g]};return l.isStepper=!0,l.dt=c,l},bye=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return AT(i);case"spring":return xye();default:if(i.split("(")[0]==="cubic-bezier")return AT(i)}return typeof i=="function"?i:null};function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}function TT(e){return jye(e)||_ye(e)||lB(e)||wye()}function wye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jye(e){if(Array.isArray(e))return A1(e)}function OT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OT(Object(n),!0).forEach(function(r){C1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C1(e,t,n){return t=Sye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sye(e){var t=Eye(e,"string");return ip(t)==="symbol"?t:String(t)}function Eye(e,t){if(ip(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ip(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nye(e,t){return Cye(e)||kye(e,t)||lB(e,t)||Pye()}function Pye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lB(e,t){if(e){if(typeof e=="string")return A1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A1(e,t)}}function A1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function Cye(e){if(Array.isArray(e))return e}var Yv=function(t,n,r){return t+(n-t)*r},T1=function(t){var n=t.from,r=t.to;return n!==r},Aye=function e(t,n,r){var i=pf(function(a,s){if(T1(s)){var c=t(s.from,s.to,s.velocity),l=Nye(c,2),u=l[0],d=l[1];return jr(jr({},s),{},{from:u,velocity:d})}return s},n);return r<1?pf(function(a,s){return T1(s)?jr(jr({},s),{},{velocity:Yv(s.velocity,i[a].velocity,r),from:Yv(s.from,i[a].from,r)}):s},n):e(t,i,r-1)};const Tye=function(e,t,n,r,i){var a=oye(e,t),s=a.reduce(function(v,x){return jr(jr({},v),{},C1({},x,[e[x],t[x]]))},{}),c=a.reduce(function(v,x){return jr(jr({},v),{},C1({},x,{from:e[x],velocity:0,to:t[x]}))},{}),l=-1,u,d,h=function(){return null},f=function(){return pf(function(x,b){return b.from},c)},p=function(){return!Object.values(c).filter(T1).length},m=function(x){u||(u=x);var b=x-u,w=b/n.dt;c=Aye(n,c,w),i(jr(jr(jr({},e),t),f())),u=x,p()||(l=requestAnimationFrame(h))},g=function(x){d||(d=x);var b=(x-d)/r,w=pf(function(j,S){return Yv.apply(void 0,TT(S).concat([n(b)]))},s);if(i(jr(jr(jr({},e),t),w)),b<1)l=requestAnimationFrame(h);else{var _=pf(function(j,S){return Yv.apply(void 0,TT(S).concat([n(1)]))},s);i(jr(jr(jr({},e),t),_))}};return h=n.isStepper?m:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(l)}}};function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}var Oye=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Rye(e,t){if(e==null)return{};var n=$ye(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $ye(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function lw(e){return Lye(e)||Dye(e)||Mye(e)||Iye()}function Iye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mye(e,t){if(e){if(typeof e=="string")return O1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O1(e,t)}}function Dye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lye(e){if(Array.isArray(e))return O1(e)}function O1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RT(Object(n),!0).forEach(function(r){rf(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rf(e,t,n){return t=uB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uB(r.key),r)}}function zye(e,t,n){return t&&Fye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uB(e){var t=Uye(e,"string");return hd(t)==="symbol"?t:String(t)}function Uye(e,t){if(hd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R1(e,t)}function R1(e,t){return R1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},R1(e,t)}function Vye(e){var t=Gye();return function(){var r=Xv(e),i;if(t){var a=Xv(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return $1(this,i)}}function $1(e,t){if(t&&(hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I1(e)}function I1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xv(e){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xv(e)}var ss=function(e){Hye(n,e);var t=Vye(n);function n(r,i){var a;Bye(this,n),a=t.call(this,r,i);var s=a.props,c=s.isActive,l=s.attributeName,u=s.from,d=s.to,h=s.steps,f=s.children,p=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(I1(a)),a.changeStyle=a.changeStyle.bind(I1(a)),!c||p<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:d}),$1(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof f=="function")return a.state={style:u},$1(a);a.state={style:l?rf({},l,u):u}}else a.state={style:{}};return a}return zye(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,c=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,f=this.state.style;if(c){if(!s){var p={style:l?rf({},l,d):d};this.state&&f&&(l&&f[l]!==d||!l&&f!==d)&&this.setState(p);return}if(!(Zve(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||u?h:i.to;if(this.state&&f){var v={style:l?rf({},l,g):g};(l&&f[l]!==g||!l&&f!==g)&&this.setState(v)}this.runAnimation(ga(ga({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,c=i.to,l=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,p=Tye(s,c,bye(u),l,this.changeStyle),m=function(){a.stopJSAnimation=p()};this.manager.start([f,d,m,l,h])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,c=i.begin,l=i.onAnimationStart,u=s[0],d=u.style,h=u.duration,f=h===void 0?0:h,p=function(g,v,x){if(x===0)return g;var b=v.duration,w=v.easing,_=w===void 0?"ease":w,j=v.style,S=v.properties,N=v.onAnimationEnd,P=x>0?s[x-1]:v,k=S||Object.keys(j);if(typeof _=="function"||_==="spring")return[].concat(lw(g),[a.runJSAnimation.bind(a,{from:P.style,to:j,duration:b,easing:_}),b]);var T=kT(k,b,_),A=ga(ga(ga({},P.style),j),{},{transition:T});return[].concat(lw(g),[A,b,N]).filter(cye)};return this.manager.start([l].concat(lw(s.reduce(p,[d,Math.max(f,c)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=iye());var a=i.begin,s=i.duration,c=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var g=c?rf({},c,l):l,v=kT(Object.keys(g),s,u);m.start([d,a,ga(ga({},g),{},{transition:v}),s,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var c=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Rye(i,Oye),u=y.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!c||u===0||s<=0)return a;var h=function(p){var m=p.props,g=m.style,v=g===void 0?{}:g,x=m.className,b=y.cloneElement(p,ga(ga({},l),{},{style:ga(ga({},v),d),className:x}));return b};return u===1?h(y.Children.only(a)):R.createElement("div",null,y.Children.map(a,function(f){return h(f)}))}}]),n}(y.PureComponent);ss.displayName="Animate";ss.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ss.propTypes={from:Yt.oneOfType([Yt.object,Yt.string]),to:Yt.oneOfType([Yt.object,Yt.string]),attributeName:Yt.string,duration:Yt.number,begin:Yt.number,easing:Yt.oneOfType([Yt.string,Yt.func]),steps:Yt.arrayOf(Yt.shape({duration:Yt.number.isRequired,style:Yt.object.isRequired,easing:Yt.oneOfType([Yt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Yt.func]),properties:Yt.arrayOf("string"),onAnimationEnd:Yt.func})),children:Yt.oneOfType([Yt.node,Yt.func]),isActive:Yt.bool,canBegin:Yt.bool,onAnimationEnd:Yt.func,shouldReAnimate:Yt.bool,onAnimationStart:Yt.func,onAnimationReStart:Yt.func};function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zv.apply(this,arguments)}function Wye(e,t){return Xye(e)||Yye(e,t)||Kye(e,t)||qye()}function qye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kye(e,t){if(e){if(typeof e=="string")return $T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $T(e,t)}}function $T(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function Xye(e){if(Array.isArray(e))return e}function IT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(n),!0).forEach(function(r){Zye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zye(e,t,n){return t=Jye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jye(e){var t=Qye(e,"string");return ap(t)=="symbol"?t:t+""}function Qye(e,t){if(ap(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DT=function(t,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),c=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,p=4;f<p;f++)h[f]=a[f]>s?s:a[f];d="M".concat(t,",").concat(n+c*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+l*h[0],",").concat(n)),d+="L ".concat(t+r-l*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+c*h[1])),d+="L ".concat(t+r,",").concat(n+i-c*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-l*h[2],",").concat(n+i)),d+="L ".concat(t+l*h[3],",").concat(n+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+i-c*h[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);d="M ".concat(t,",").concat(n+c*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+l*m,",").concat(n,`
            L `).concat(t+r-l*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+r,",").concat(n+c*m,`
            L `).concat(t+r,",").concat(n+i-c*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+r-l*m,",").concat(n+i,`
            L `).concat(t+l*m,",").concat(n+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t,",").concat(n+i-c*m," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},exe=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,a=n.x,s=n.y,c=n.width,l=n.height;if(Math.abs(c)>0&&Math.abs(l)>0){var u=Math.min(a,a+c),d=Math.max(a,a+c),h=Math.min(s,s+l),f=Math.max(s,s+l);return r>=u&&r<=d&&i>=h&&i<=f}return!1},txe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DE=function(t){var n=MT(MT({},txe),t),r=y.useRef(),i=y.useState(-1),a=Wye(i,2),s=a[0],c=a[1];y.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&c(_)}catch{}},[]);var l=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,p=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,x=n.isAnimationActive,b=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var w=ut("recharts-rectangle",p);return b?R.createElement(ss,{canBegin:s>0,from:{width:d,height:h,x:l,y:u},to:{width:d,height:h,x:l,y:u},duration:g,animationEasing:m,isActive:b},function(_){var j=_.width,S=_.height,N=_.x,P=_.y;return R.createElement(ss,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:x,easing:m},R.createElement("path",Zv({},Ye(n,!0),{className:w,d:DT(N,P,j,S,f),ref:r})))}):R.createElement("path",Zv({},Ye(n,!0),{className:w,d:DT(l,u,d,h,f)}))},nxe=["points","className","baseLinePoints","connectNulls"];function gu(){return gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gu.apply(this,arguments)}function rxe(e,t){if(e==null)return{};var n=ixe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ixe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function LT(e){return cxe(e)||oxe(e)||sxe(e)||axe()}function axe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sxe(e,t){if(e){if(typeof e=="string")return M1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M1(e,t)}}function oxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cxe(e){if(Array.isArray(e))return M1(e)}function M1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var BT=function(t){return t&&t.x===+t.x&&t.y===+t.y},lxe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){BT(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),BT(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},mf=function(t,n){var r=lxe(t);n&&(r=[r.reduce(function(a,s){return[].concat(LT(a),LT(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,c,l){return"".concat(s).concat(l===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},uxe=function(t,n,r){var i=mf(t,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(mf(n.reverse(),r).slice(1))},dxe=function(t){var n=t.points,r=t.className,i=t.baseLinePoints,a=t.connectNulls,s=rxe(t,nxe);if(!n||!n.length)return null;var c=ut("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",u=uxe(n,i,a);return R.createElement("g",{className:c},R.createElement("path",gu({},Ye(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),l?R.createElement("path",gu({},Ye(s,!0),{fill:"none",d:mf(n,a)})):null,l?R.createElement("path",gu({},Ye(s,!0),{fill:"none",d:mf(i,a)})):null)}var d=mf(n,a);return R.createElement("path",gu({},Ye(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:c,d}))};function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D1.apply(this,arguments)}var Fx=function(t){var n=t.cx,r=t.cy,i=t.r,a=t.className,s=ut("recharts-dot",a);return n===+n&&r===+r&&i===+i?y.createElement("circle",D1({},Ye(t,!1),vv(t),{className:s,cx:n,cy:r,r:i})):null};function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}var hxe=["x","y","top","left","width","height","className"];function L1(){return L1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L1.apply(this,arguments)}function FT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fxe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FT(Object(n),!0).forEach(function(r){pxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pxe(e,t,n){return t=mxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mxe(e){var t=gxe(e,"string");return sp(t)=="symbol"?t:t+""}function gxe(e,t){if(sp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vxe(e,t){if(e==null)return{};var n=yxe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yxe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var xxe=function(t,n,r,i,a,s){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},bxe=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,s=t.top,c=s===void 0?0:s,l=t.left,u=l===void 0?0:l,d=t.width,h=d===void 0?0:d,f=t.height,p=f===void 0?0:f,m=t.className,g=vxe(t,hxe),v=fxe({x:r,y:a,top:c,left:u,width:h,height:p},g);return!we(r)||!we(a)||!we(h)||!we(p)||!we(c)||!we(u)?null:R.createElement("path",L1({},Ye(v,!0),{className:ut("recharts-cross",m),d:xxe(r,a,h,p,c,u)}))},wxe=Ix,_xe=_3,jxe=us;function Sxe(e,t){return e&&e.length?wxe(e,jxe(t),_xe):void 0}var Exe=Sxe;const Nxe=cn(Exe);var Pxe=Ix,kxe=us,Cxe=j3;function Axe(e,t){return e&&e.length?Pxe(e,kxe(t),Cxe):void 0}var Txe=Axe;const Oxe=cn(Txe);var Rxe=["cx","cy","angle","ticks","axisLine"],$xe=["ticks","tick","angle","tickFormatter","stroke"];function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function gf(){return gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gf.apply(this,arguments)}function zT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ac(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zT(Object(n),!0).forEach(function(r){zx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UT(e,t){if(e==null)return{};var n=Ixe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ixe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Mxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hB(r.key),r)}}function Dxe(e,t,n){return t&&HT(e.prototype,t),n&&HT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lxe(e,t,n){return t=Jv(t),Bxe(e,dB()?Reflect.construct(t,n||[],Jv(e).constructor):t.apply(e,n))}function Bxe(e,t){if(t&&(fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fxe(e)}function Fxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dB=function(){return!!e})()}function Jv(e){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jv(e)}function zxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B1(e,t)}function B1(e,t){return B1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},B1(e,t)}function zx(e,t,n){return t=hB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hB(e){var t=Uxe(e,"string");return fd(t)=="symbol"?t:t+""}function Uxe(e,t){if(fd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ux=function(e){function t(){return Mxe(this,t),Lxe(this,t,arguments)}return zxe(t,e),Dxe(t,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,c=a.cx,l=a.cy;return mn(c,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,c=r.ticks,l=Nxe(c,function(d){return d.coordinate||0}),u=Oxe(c,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,c=r.ticks,l=r.axisLine,u=UT(r,Rxe),d=c.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),h=mn(i,a,d[0],s),f=mn(i,a,d[1],s),p=Ac(Ac(Ac({},Ye(u,!1)),{},{fill:"none"},Ye(l,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return R.createElement("line",gf({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,c=i.angle,l=i.tickFormatter,u=i.stroke,d=UT(i,$xe),h=this.getTickTextAnchor(),f=Ye(d,!1),p=Ye(s,!1),m=a.map(function(g,v){var x=r.getTickValueCoord(g),b=Ac(Ac(Ac(Ac({textAnchor:h,transform:"rotate(".concat(90-c,", ").concat(x.x,", ").concat(x.y,")")},f),{},{stroke:"none",fill:u},p),{},{index:v},x),{},{payload:g});return R.createElement(Ht,gf({className:ut("recharts-polar-radius-axis-tick",Z3(s)),key:"tick-".concat(g.coordinate)},Sl(r.props,g,v)),t.renderTickItem(s,b,l?l(g.value,v):g.value))});return R.createElement(Ht,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:R.createElement(Ht,{className:ut("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),pr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return R.isValidElement(r)?s=R.cloneElement(r,i):ct(r)?s=r(i):s=R.createElement(El,gf({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(y.PureComponent);zx(Ux,"displayName","PolarRadiusAxis");zx(Ux,"axisType","radiusAxis");zx(Ux,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function Wc(){return Wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wc.apply(this,arguments)}function VT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(n),!0).forEach(function(r){Hx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pB(r.key),r)}}function Vxe(e,t,n){return t&&GT(e.prototype,t),n&&GT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gxe(e,t,n){return t=Qv(t),Wxe(e,fB()?Reflect.construct(t,n||[],Qv(e).constructor):t.apply(e,n))}function Wxe(e,t){if(t&&(pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qxe(e)}function qxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fB=function(){return!!e})()}function Qv(e){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qv(e)}function Kxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F1(e,t)}function F1(e,t){return F1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},F1(e,t)}function Hx(e,t,n){return t=pB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pB(e){var t=Yxe(e,"string");return pd(t)=="symbol"?t:t+""}function Yxe(e,t){if(pd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xxe=Math.PI/180,WT=1e-5,Vx=function(e){function t(){return Hxe(this,t),Gxe(this,t,arguments)}return Kxe(t,e),Vxe(t,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,c=i.radius,l=i.orientation,u=i.tickSize,d=u||8,h=mn(a,s,c,r.coordinate),f=mn(a,s,c+(l==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*Xxe),s;return a>WT?s=i==="outer"?"start":"end":a<-WT?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,c=r.axisLine,l=r.axisLineType,u=Tc(Tc({},Ye(this.props,!1)),{},{fill:"none"},Ye(c,!1));if(l==="circle")return R.createElement(Fx,Wc({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var d=this.props.ticks,h=d.map(function(f){return mn(i,a,s,f.coordinate)});return R.createElement(dxe,Wc({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,c=i.tickLine,l=i.tickFormatter,u=i.stroke,d=Ye(this.props,!1),h=Ye(s,!1),f=Tc(Tc({},d),{},{fill:"none"},Ye(c,!1)),p=a.map(function(m,g){var v=r.getTickLineCoord(m),x=r.getTickTextAnchor(m),b=Tc(Tc(Tc({textAnchor:x},d),{},{stroke:"none",fill:u},h),{},{index:g,payload:m,x:v.x2,y:v.y2});return R.createElement(Ht,Wc({className:ut("recharts-polar-angle-axis-tick",Z3(s)),key:"tick-".concat(m.coordinate)},Sl(r.props,m,g)),c&&R.createElement("line",Wc({className:"recharts-polar-angle-axis-tick-line"},f,v)),s&&t.renderTickItem(s,b,l?l(m.value,g):m.value))});return R.createElement(Ht,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:R.createElement(Ht,{className:ut("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return R.isValidElement(r)?s=R.cloneElement(r,i):ct(r)?s=r(i):s=R.createElement(El,Wc({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(y.PureComponent);Hx(Vx,"displayName","PolarAngleAxis");Hx(Vx,"axisType","angleAxis");Hx(Vx,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Zxe=y4,Jxe=Zxe(Object.getPrototypeOf,Object),Qxe=Jxe,ebe=Qs,tbe=Qxe,nbe=eo,rbe="[object Object]",ibe=Function.prototype,abe=Object.prototype,mB=ibe.toString,sbe=abe.hasOwnProperty,obe=mB.call(Object);function cbe(e){if(!nbe(e)||ebe(e)!=rbe)return!1;var t=tbe(e);if(t===null)return!0;var n=sbe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&mB.call(n)==obe}var lbe=cbe;const ube=cn(lbe);var dbe=Qs,hbe=eo,fbe="[object Boolean]";function pbe(e){return e===!0||e===!1||hbe(e)&&dbe(e)==fbe}var mbe=pbe;const gbe=cn(mbe);function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ey.apply(this,arguments)}function vbe(e,t){return wbe(e)||bbe(e,t)||xbe(e,t)||ybe()}function ybe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xbe(e,t){if(e){if(typeof e=="string")return qT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qT(e,t)}}function qT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bbe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function wbe(e){if(Array.isArray(e))return e}function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function YT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(r){_be(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _be(e,t,n){return t=jbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jbe(e){var t=Sbe(e,"string");return op(t)=="symbol"?t:t+""}function Sbe(e,t){if(op(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XT=function(t,n,r,i,a){var s=r-i,c;return c="M ".concat(t,",").concat(n),c+="L ".concat(t+r,",").concat(n),c+="L ".concat(t+r-s/2,",").concat(n+a),c+="L ".concat(t+r-s/2-i,",").concat(n+a),c+="L ".concat(t,",").concat(n," Z"),c},Ebe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Nbe=function(t){var n=YT(YT({},Ebe),t),r=y.useRef(),i=y.useState(-1),a=vbe(i,2),s=a[0],c=a[1];y.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&c(w)}catch{}},[]);var l=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,p=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,x=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var b=ut("recharts-trapezoid",p);return x?R.createElement(ss,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:l,y:u},duration:g,animationEasing:m,isActive:x},function(w){var _=w.upperWidth,j=w.lowerWidth,S=w.height,N=w.x,P=w.y;return R.createElement(ss,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:m},R.createElement("path",ey({},Ye(n,!0),{className:b,d:XT(N,P,_,j,S),ref:r})))}):R.createElement("g",null,R.createElement("path",ey({},Ye(n,!0),{className:b,d:XT(l,u,d,h,f)})))},Pbe=["option","shapeType","propTransformer","activeClassName","isActive"];function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function kbe(e,t){if(e==null)return{};var n=Cbe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Cbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ZT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ty(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(n),!0).forEach(function(r){Abe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Abe(e,t,n){return t=Tbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tbe(e){var t=Obe(e,"string");return cp(t)=="symbol"?t:t+""}function Obe(e,t){if(cp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rbe(e,t){return ty(ty({},t),e)}function $be(e,t){return e==="symbols"}function JT(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return R.createElement(DE,n);case"trapezoid":return R.createElement(Nbe,n);case"sector":return R.createElement(eB,n);case"symbols":if($be(t))return R.createElement(nE,n);break;default:return null}}function Ibe(e){return y.isValidElement(e)?e.props:e}function gB(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?Rbe:r,a=e.activeClassName,s=a===void 0?"recharts-active-shape":a,c=e.isActive,l=kbe(e,Pbe),u;if(y.isValidElement(t))u=y.cloneElement(t,ty(ty({},l),Ibe(t)));else if(ct(t))u=t(l);else if(ube(t)&&!gbe(t)){var d=i(t,l);u=R.createElement(JT,{shapeType:n,elementProps:d})}else{var h=l;u=R.createElement(JT,{shapeType:n,elementProps:h})}return c?R.createElement(Ht,{className:s},u):u}function Gx(e,t){return t!=null&&"trapezoids"in e.props}function Wx(e,t){return t!=null&&"sectors"in e.props}function lp(e,t){return t!=null&&"points"in e.props}function Mbe(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&a}function Dbe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function Lbe(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function Bbe(e,t){var n;return Gx(e,t)?n=Mbe:Wx(e,t)?n=Dbe:lp(e,t)&&(n=Lbe),n}function Fbe(e,t){var n;return Gx(e,t)?n="trapezoids":Wx(e,t)?n="sectors":lp(e,t)&&(n="points"),n}function zbe(e,t){if(Gx(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Wx(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return lp(e,t)?t.payload:{}}function Ube(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=Fbe(n,t),a=zbe(n,t),s=r.filter(function(l,u){var d=Xp(a,l),h=n.props[i].filter(function(m){var g=Bbe(n,t);return g(m,t)}),f=n.props[i].indexOf(h[h.length-1]),p=u===f;return d&&p}),c=r.indexOf(s[s.length-1]);return c}var Bg;function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}function vu(){return vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vu.apply(this,arguments)}function QT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QT(Object(n),!0).forEach(function(r){qi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yB(r.key),r)}}function Vbe(e,t,n){return t&&eO(e.prototype,t),n&&eO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gbe(e,t,n){return t=ny(t),Wbe(e,vB()?Reflect.construct(t,n||[],ny(e).constructor):t.apply(e,n))}function Wbe(e,t){if(t&&(md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qbe(e)}function qbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vB=function(){return!!e})()}function ny(e){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ny(e)}function Kbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z1(e,t)}function z1(e,t){return z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z1(e,t)}function qi(e,t,n){return t=yB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yB(e){var t=Ybe(e,"string");return md(t)=="symbol"?t:t+""}function Ybe(e,t){if(md(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var no=function(e){function t(n){var r;return Hbe(this,t),r=Gbe(this,t,[n]),qi(r,"pieRef",null),qi(r,"sectorRefs",[]),qi(r,"id",Xd("recharts-pie-")),qi(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ct(i)&&i()}),qi(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ct(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Kbe(t,e),Vbe(t,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,c=a.labelLine,l=a.dataKey,u=a.valueKey,d=Ye(this.props,!1),h=Ye(s,!1),f=Ye(c,!1),p=s&&s.offsetRadius||20,m=r.map(function(g,v){var x=(g.startAngle+g.endAngle)/2,b=mn(g.cx,g.cy,g.outerRadius+p,x),w=hn(hn(hn(hn({},d),g),{},{stroke:"none"},h),{},{index:v,textAnchor:t.getTextAnchor(b.x,g.cx)},b),_=hn(hn(hn(hn({},d),g),{},{fill:"none",stroke:g.fill},f),{},{index:v,points:[mn(g.cx,g.cy,g.outerRadius,x),b]}),j=l;return gt(l)&&gt(u)?j="value":gt(l)&&(j=u),R.createElement(Ht,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},c&&t.renderLabelLineItem(c,_,"line"),t.renderLabelItem(s,w,or(g,j)))});return R.createElement(Ht,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,c=a.blendStroke,l=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=i.isActiveIndex(d),f=l&&i.hasActiveIndex()?l:null,p=h?s:f,m=hn(hn({},u),{},{stroke:c?u.fill:u.stroke,tabIndex:-1});return R.createElement(Ht,vu({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Sl(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),R.createElement(gB,vu({option:p,isActive:h,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,c=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state,f=h.prevSectors,p=h.prevIsAnimationActive;return R.createElement(ss,{begin:c,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,v=[],x=a&&a[0],b=x.startAngle;return a.forEach(function(w,_){var j=f&&f[_],S=_>0?Oi(w,"paddingAngle",0):0;if(j){var N=Ni(j.endAngle-j.startAngle,w.endAngle-w.startAngle),P=hn(hn({},w),{},{startAngle:b+S,endAngle:b+N(g)+S});v.push(P),b=P.endAngle}else{var k=w.endAngle,T=w.startAngle,A=Ni(0,k-T),O=A(g),D=hn(hn({},w),{},{startAngle:b+S,endAngle:b+O+S});v.push(D),b=D.endAngle}}),R.createElement(Ht,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var c=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Xp(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,c=i.className,l=i.label,u=i.cx,d=i.cy,h=i.innerRadius,f=i.outerRadius,p=i.isAnimationActive,m=this.state.isAnimationFinished;if(a||!s||!s.length||!we(u)||!we(d)||!we(h)||!we(f))return null;var g=ut("recharts-pie",c);return R.createElement(Ht,{tabIndex:this.props.rootTabIndex,className:g,ref:function(x){r.pieRef=x}},this.renderSectors(),l&&this.renderLabels(s),pr.renderCallByParent(this.props,null,!1),(!p||m)&&Us.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(R.isValidElement(r))return R.cloneElement(r,i);if(ct(r))return r(i);var s=ut("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return R.createElement(qv,vu({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(R.isValidElement(r))return R.cloneElement(r,i);var s=a;if(ct(r)&&(s=r(i),R.isValidElement(s)))return s;var c=ut("recharts-pie-label-text",typeof r!="boolean"&&!ct(r)?r.className:"");return R.createElement(El,vu({},i,{alignmentBaseline:"middle",className:c}),s)}}])}(y.PureComponent);Bg=no;qi(no,"displayName","Pie");qi(no,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Al.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});qi(no,"parseDeltaAngle",function(e,t){var n=Kr(t-e),r=Math.min(Math.abs(t-e),360);return n*r});qi(no,"getRealPieData",function(e){var t=e.data,n=e.children,r=Ye(e,!1),i=Ri(n,kx);return t&&t.length?t.map(function(a,s){return hn(hn(hn({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return hn(hn({},r),a.props)}):[]});qi(no,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,i=t.width,a=t.height,s=X3(i,a),c=r+Yr(e.cx,i,i/2),l=n+Yr(e.cy,a,a/2),u=Yr(e.innerRadius,s,0),d=Yr(e.outerRadius,s,s*.8),h=e.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:c,cy:l,innerRadius:u,outerRadius:d,maxRadius:h}});qi(no,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?hn(hn({},t.type.defaultProps),t.props):t.props,i=Bg.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,c=r.endAngle,l=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,p=Math.abs(r.minAngle),m=Bg.parseCoordinateOfPie(r,n),g=Bg.parseDeltaAngle(s,c),v=Math.abs(g),x=u;gt(u)&&gt(h)?($a(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):gt(u)&&($a(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=h);var b=i.filter(function(P){return or(P,x,0)!==0}).length,w=(v>=360?b:b-1)*l,_=v-b*p-w,j=i.reduce(function(P,k){var T=or(k,x,0);return P+(we(T)?T:0)},0),S;if(j>0){var N;S=i.map(function(P,k){var T=or(P,x,0),A=or(P,d,k),O=(we(T)?T:0)/j,D;k?D=N.endAngle+Kr(g)*l*(T!==0?1:0):D=s;var L=D+Kr(g)*((T!==0?p:0)+O*_),G=(D+L)/2,H=(m.innerRadius+m.outerRadius)/2,K=[{name:A,value:T,payload:P,dataKey:x,type:f}],Z=mn(m.cx,m.cy,H,G);return N=hn(hn(hn({percent:O,cornerRadius:a,name:A,tooltipPayload:K,midAngle:G,middleRadius:H,tooltipPosition:Z},P),m),{},{value:or(P,x),startAngle:D,endAngle:L,payload:P,paddingAngle:Kr(g)*l}),N})}return hn(hn({},m),{},{sectors:S,data:i})});var Xbe=Math.ceil,Zbe=Math.max;function Jbe(e,t,n,r){for(var i=-1,a=Zbe(Xbe((t-e)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=e,e+=n;return s}var Qbe=Jbe,e0e=D4,tO=1/0,t0e=17976931348623157e292;function n0e(e){if(!e)return e===0?e:0;if(e=e0e(e),e===tO||e===-tO){var t=e<0?-1:1;return t*t0e}return e===e?e:0}var xB=n0e,r0e=Qbe,i0e=Px,uw=xB;function a0e(e){return function(t,n,r){return r&&typeof r!="number"&&i0e(t,n,r)&&(n=r=void 0),t=uw(t),n===void 0?(n=t,t=0):n=uw(n),r=r===void 0?t<n?1:-1:uw(r),r0e(t,n,r,e)}}var s0e=a0e,o0e=s0e,c0e=o0e(),l0e=c0e;const ry=cn(l0e);function up(e){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},up(e)}function nO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(n),!0).forEach(function(r){bB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bB(e,t,n){return t=u0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u0e(e){var t=d0e(e,"string");return up(t)=="symbol"?t:t+""}function d0e(e,t){if(up(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h0e=["Webkit","Moz","O","ms"],f0e=function(t,n){var r=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=h0e.reduce(function(a,s){return rO(rO({},a),{},bB({},s+r,n))},{});return i[t]=n,i};function gd(e){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gd(e)}function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iy.apply(this,arguments)}function iO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_B(r.key),r)}}function m0e(e,t,n){return t&&aO(e.prototype,t),n&&aO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g0e(e,t,n){return t=ay(t),v0e(e,wB()?Reflect.construct(t,n||[],ay(e).constructor):t.apply(e,n))}function v0e(e,t){if(t&&(gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y0e(e)}function y0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wB=function(){return!!e})()}function ay(e){return ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ay(e)}function x0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U1(e,t)}function U1(e,t){return U1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},U1(e,t)}function ji(e,t,n){return t=_B(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _B(e){var t=b0e(e,"string");return gd(t)=="symbol"?t:t+""}function b0e(e,t){if(gd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var w0e=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,a=t.x,s=t.width,c=t.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=hf().domain(ry(0,l)).range([a,a+s-c]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},sO=function(t){return t.changedTouches&&!!t.changedTouches.length},vd=function(e){function t(n){var r;return p0e(this,t),r=g0e(this,t,[n]),ji(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ji(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ji(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,c=i.startIndex;s==null||s({endIndex:a,startIndex:c})}),r.detachDragEndListener()}),ji(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ji(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ji(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ji(r,"handleSlideDragStart",function(i){var a=sO(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return x0e(t,e),m0e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,c=this.props,l=c.gap,u=c.data,d=u.length-1,h=Math.min(i,a),f=Math.max(i,a),p=t.getIndexInRange(s,h),m=t.getIndexInRange(s,f);return{startIndex:p-p%l,endIndex:m===d?d:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,c=i.dataKey,l=or(a[r],c,r);return ct(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,c=i.endX,l=this.props,u=l.x,d=l.width,h=l.travellerWidth,f=l.startIndex,p=l.endIndex,m=l.onChange,g=r.pageX-a;g>0?g=Math.min(g,u+d-h-c,u+d-h-s):g<0&&(g=Math.max(g,u-s,u-c));var v=this.getIndex({startX:s+g,endX:c+g});(v.startIndex!==f||v.endIndex!==p)&&m&&m(v),this.setState({startX:s+g,endX:c+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=sO(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,c=i.endX,l=i.startX,u=this.state[s],d=this.props,h=d.x,f=d.width,p=d.travellerWidth,m=d.onChange,g=d.gap,v=d.data,x={startX:this.state.startX,endX:this.state.endX},b=r.pageX-a;b>0?b=Math.min(b,h+f-p-u):b<0&&(b=Math.max(b,h-u)),x[s]=u+b;var w=this.getIndex(x),_=w.startIndex,j=w.endIndex,S=function(){var P=v.length-1;return s==="startX"&&(c>l?_%g===0:j%g===0)||c<l&&j===P||s==="endX"&&(c>l?j%g===0:_%g===0)||c>l&&j===P};this.setState(ji(ji({},s,u+b),"brushMoveStartX",r.pageX),function(){m&&S()&&m(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,c=s.scaleValues,l=s.startX,u=s.endX,d=this.state[i],h=c.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=c.length)){var p=c[f];i==="startX"&&p>=u||i==="endX"&&p<=l||this.setState(ji({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,c=r.height,l=r.fill,u=r.stroke;return R.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:s,height:c})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,c=r.height,l=r.data,u=r.children,d=r.padding,h=y.Children.only(u);return h?R.cloneElement(h,{x:i,y:a,width:s,height:c,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,c=this,l=this.props,u=l.y,d=l.travellerWidth,h=l.height,f=l.traveller,p=l.ariaLabel,m=l.data,g=l.startIndex,v=l.endIndex,x=Math.max(r,this.props.x),b=dw(dw({},Ye(this.props,!1)),{},{x,y:u,width:d,height:h}),w=p||"Min value: ".concat((a=m[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=m[v])===null||s===void 0?void 0:s.name);return R.createElement(Ht,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),c.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,i))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,b))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,c=a.height,l=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return R.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:s,width:h,height:c})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,c=r.height,l=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,p=5,m={pointerEvents:"none",fill:u};return R.createElement(Ht,{className:"recharts-brush-texts"},R.createElement(El,iy({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-p,y:s+c/2},m),this.getTextOfTick(i)),R.createElement(El,iy({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+l+p,y:s+c/2},m),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,c=r.x,l=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,p=f.startX,m=f.endX,g=f.isTextActive,v=f.isSlideMoving,x=f.isTravellerMoving,b=f.isTravellerFocused;if(!i||!i.length||!we(c)||!we(l)||!we(u)||!we(d)||u<=0||d<=0)return null;var w=ut("recharts-brush",a),_=R.Children.count(s)===1,j=f0e("userSelect","none");return R.createElement(Ht,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||v||x||b||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,c=r.height,l=r.stroke,u=Math.floor(a+c/2)-1;return R.createElement(R.Fragment,null,R.createElement("rect",{x:i,y:a,width:s,height:c,fill:l,stroke:"none"}),R.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),R.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return R.isValidElement(r)?a=R.cloneElement(r,i):ct(r)?a=r(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,c=r.x,l=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return dw({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:c,prevWidth:s},a&&a.length?w0e({data:a,width:s,x:c,travellerWidth:l,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||c!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([c,c+s-l]);var f=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:c,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,c=a-1;c-s>1;){var l=Math.floor((s+c)/2);r[l]>i?c=l:s=l}return i>=r[c]?c:s}}])}(y.PureComponent);ji(vd,"displayName","Brush");ji(vd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var _0e=lE;function j0e(e,t){var n;return _0e(e,function(r,i,a){return n=t(r,i,a),!n}),!!n}var S0e=j0e,E0e=u4,N0e=us,P0e=S0e,k0e=ui,C0e=Px;function A0e(e,t,n){var r=k0e(e)?E0e:P0e;return n&&C0e(e,t,n)&&(t=void 0),r(e,N0e(t))}var T0e=A0e;const O0e=cn(T0e);var rs=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},oO=O4;function R0e(e,t,n){t=="__proto__"&&oO?oO(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var $0e=R0e,I0e=$0e,M0e=A4,D0e=us;function L0e(e,t){var n={};return t=D0e(t),M0e(e,function(r,i,a){I0e(n,i,t(r,i,a))}),n}var B0e=L0e;const F0e=cn(B0e);function z0e(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var U0e=z0e,H0e=lE;function V0e(e,t){var n=!0;return H0e(e,function(r,i,a){return n=!!t(r,i,a),n}),n}var G0e=V0e,W0e=U0e,q0e=G0e,K0e=us,Y0e=ui,X0e=Px;function Z0e(e,t,n){var r=Y0e(e)?W0e:q0e;return n&&X0e(e,t,n)&&(t=void 0),r(e,K0e(t))}var J0e=Z0e;const jB=cn(J0e);var Q0e=["x","y"];function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H1.apply(this,arguments)}function cO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(n),!0).forEach(function(r){ewe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ewe(e,t,n){return t=twe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function twe(e){var t=nwe(e,"string");return dp(t)=="symbol"?t:t+""}function nwe(e,t){if(dp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rwe(e,t){if(e==null)return{};var n=iwe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function iwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function awe(e,t){var n=e.x,r=e.y,i=rwe(e,Q0e),a="".concat(n),s=parseInt(a,10),c="".concat(r),l=parseInt(c,10),u="".concat(t.height||i.height),d=parseInt(u,10),h="".concat(t.width||i.width),f=parseInt(h,10);return Mh(Mh(Mh(Mh(Mh({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:f,name:t.name,radius:t.radius})}function lO(e){return R.createElement(gB,H1({shapeType:"rectangle",propTransformer:awe,activeClassName:"recharts-active-bar"},e))}var swe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof t=="number")return t;var a=we(r)||Aee(r);return a?t(r,i):(a||Pl(),n)}},owe=["value","background"],SB;function yd(e){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(e)}function cwe(e,t){if(e==null)return{};var n=lwe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function sy(){return sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sy.apply(this,arguments)}function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(n),!0).forEach(function(r){Ho(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NB(r.key),r)}}function dwe(e,t,n){return t&&dO(e.prototype,t),n&&dO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hwe(e,t,n){return t=oy(t),fwe(e,EB()?Reflect.construct(t,n||[],oy(e).constructor):t.apply(e,n))}function fwe(e,t){if(t&&(yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pwe(e)}function pwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EB=function(){return!!e})()}function oy(e){return oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oy(e)}function mwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V1(e,t)}function V1(e,t){return V1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},V1(e,t)}function Ho(e,t,n){return t=NB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NB(e){var t=gwe(e,"string");return yd(t)=="symbol"?t:t+""}function gwe(e,t){if(yd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ia=function(e){function t(){var n;uwe(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=hwe(this,t,[].concat(i)),Ho(n,"state",{isAnimationFinished:!1}),Ho(n,"id",Xd("recharts-bar-")),Ho(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Ho(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return mwe(t,e),dwe(t,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,c=a.dataKey,l=a.activeIndex,u=a.activeBar,d=Ye(this.props,!1);return r&&r.map(function(h,f){var p=f===l,m=p?u:s,g=Kn(Kn(Kn({},d),h),{},{isActive:p,option:m,index:f,dataKey:c,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return R.createElement(Ht,sy({className:"recharts-bar-rectangle"},Sl(i.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),R.createElement(lO,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,c=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,f=this.state.prevData;return R.createElement(ss,{begin:l,duration:u,isActive:c,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,g=a.map(function(v,x){var b=f&&f[x];if(b){var w=Ni(b.x,v.x),_=Ni(b.y,v.y),j=Ni(b.width,v.width),S=Ni(b.height,v.height);return Kn(Kn({},v),{},{x:w(m),y:_(m),width:j(m),height:S(m)})}if(s==="horizontal"){var N=Ni(0,v.height),P=N(m);return Kn(Kn({},v),{},{y:v.y+v.height-P,height:P})}var k=Ni(0,v.width),T=k(m);return Kn(Kn({},v),{},{width:T})});return R.createElement(Ht,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Xp(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,c=i.activeIndex,l=Ye(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,f=cwe(u,owe);if(!h)return null;var p=Kn(Kn(Kn(Kn(Kn({},f),{},{fill:"#eee"},h),l),Sl(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return R.createElement(lO,sy({key:"background-bar-".concat(d),option:r.props.background,isActive:d===c},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,c=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,h=Ri(d,Zp);if(!h)return null;var f=u==="vertical"?s[0].height/2:s[0].width/2,p=function(v,x){var b=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:b,errorVal:or(v,x)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return R.createElement(Ht,m,h.map(function(g){return R.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:s,xAxis:c,yAxis:l,layout:u,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,c=r.xAxis,l=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,p=r.isAnimationActive,m=r.background,g=r.id;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,x=ut("recharts-bar",s),b=c&&c.allowDataOverflow,w=l&&l.allowDataOverflow,_=b||w,j=gt(g)?this.id:g;return R.createElement(Ht,{className:x},b||w?R.createElement("defs",null,R.createElement("clipPath",{id:"clipPath-".concat(j)},R.createElement("rect",{x:b?u:u-h/2,y:w?d:d-f/2,width:b?h:h*2,height:w?f:f*2}))):null,R.createElement(Ht,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(j,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,j),(!p||v)&&Us.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(y.PureComponent);SB=Ia;Ho(Ia,"displayName","Bar");Ho(Ia,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Al.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ho(Ia,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,a=e.xAxis,s=e.yAxis,c=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,f=e.offset,p=Yme(r,n);if(!p)return null;var m=t.layout,g=n.type.defaultProps,v=g!==void 0?Kn(Kn({},g),n.props):n.props,x=v.dataKey,b=v.children,w=v.minPointSize,_=m==="horizontal"?s:a,j=u?_.scale.domain():null,S=nge({numericAxis:_}),N=Ri(b,kx),P=h.map(function(k,T){var A,O,D,L,G,H;u?A=Xme(u[d+T],j):(A=or(k,x),Array.isArray(A)||(A=[S,A]));var K=swe(w,SB.defaultProps.minPointSize)(A[1],T);if(m==="horizontal"){var Z,q=[s.scale(A[0]),s.scale(A[1])],le=q[0],_e=q[1];O=eT({axis:a,ticks:c,bandSize:i,offset:p.offset,entry:k,index:T}),D=(Z=_e??le)!==null&&Z!==void 0?Z:void 0,L=p.size;var re=le-_e;if(G=Number.isNaN(re)?0:re,H={x:O,y:s.y,width:L,height:s.height},Math.abs(K)>0&&Math.abs(G)<Math.abs(K)){var de=Kr(G||K)*(Math.abs(K)-Math.abs(G));D-=de,G+=de}}else{var Se=[a.scale(A[0]),a.scale(A[1])],nt=Se[0],St=Se[1];if(O=nt,D=eT({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:k,index:T}),L=St-nt,G=p.size,H={x:a.x,y:D,width:a.width,height:G},Math.abs(K)>0&&Math.abs(L)<Math.abs(K)){var Ee=Kr(L||K)*(Math.abs(K)-Math.abs(L));L+=Ee}}return Kn(Kn(Kn({},k),{},{x:O,y:D,width:L,height:G,value:u?A:A[1],payload:k,background:H},N&&N[T]&&N[T].props),{},{tooltipPayload:[K3(n,k)],tooltipPosition:{x:O+L/2,y:D+G/2}})});return Kn({data:P,layout:m},f)});function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function vwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PB(r.key),r)}}function ywe(e,t,n){return t&&hO(e.prototype,t),n&&hO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(n),!0).forEach(function(r){qx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qx(e,t,n){return t=PB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PB(e){var t=xwe(e,"string");return hp(t)=="symbol"?t:t+""}function xwe(e,t){if(hp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kB=function(t,n,r,i,a){var s=t.width,c=t.height,l=t.layout,u=t.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:c-r.bottom,bottomMirror:c-r.bottom},f=!!Si(u,Ia);return d.reduce(function(p,m){var g=n[m],v=g.orientation,x=g.domain,b=g.padding,w=b===void 0?{}:b,_=g.mirror,j=g.reversed,S="".concat(v).concat(_?"Mirror":""),N,P,k,T,A;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var O=x[1]-x[0],D=1/0,L=g.categoricalDomain.sort(Ree);if(L.forEach(function(Se,nt){nt>0&&(D=Math.min((Se||0)-(L[nt-1]||0),D))}),Number.isFinite(D)){var G=D/O,H=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(N=G*H/2),g.padding==="no-gap"){var K=Yr(t.barCategoryGap,G*H),Z=G*H/2;N=Z-K-(Z-K)/H*K}}}i==="xAxis"?P=[r.left+(w.left||0)+(N||0),r.left+r.width-(w.right||0)-(N||0)]:i==="yAxis"?P=l==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(N||0),r.top+r.height-(w.bottom||0)-(N||0)]:P=g.range,j&&(P=[P[1],P[0]]);var q=V3(g,a,f),le=q.scale,_e=q.realScaleType;le.domain(x).range(P),G3(le);var re=W3(le,Ea(Ea({},g),{},{realScaleType:_e}));i==="xAxis"?(A=v==="top"&&!_||v==="bottom"&&_,k=r.left,T=h[S]-A*g.height):i==="yAxis"&&(A=v==="left"&&!_||v==="right"&&_,k=h[S]-A*g.width,T=r.top);var de=Ea(Ea(Ea({},g),re),{},{realScaleType:_e,x:k,y:T,scale:le,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return de.bandSize=Vv(de,re),!g.hide&&i==="xAxis"?h[S]+=(A?-1:1)*de.height:g.hide||(h[S]+=(A?-1:1)*de.width),Ea(Ea({},p),{},qx({},m,de))},{})},CB=function(t,n){var r=t.x,i=t.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},bwe=function(t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2;return CB({x:n,y:r},{x:i,y:a})},AB=function(){function e(t){vwe(this,e),this.scale=t}return ywe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(n)+c}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();qx(AB,"EPS",1e-4);var LE=function(t){var n=Object.keys(t).reduce(function(r,i){return Ea(Ea({},r),{},qx({},i,AB.create(t[i])))},{});return Ea(Ea({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,c=a.position;return F0e(i,function(l,u){return n[u].apply(l,{bandAware:s,position:c})})},isInRange:function(i){return jB(i,function(a,s){return n[s].isInRange(a)})}})};function wwe(e){return(e%180+180)%180}var _we=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=wwe(i),s=a*Math.PI/180,c=Math.atan(r/n),l=s>c&&s<Math.PI-c?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},jwe=us,Swe=Gp,Ewe=Ex;function Nwe(e){return function(t,n,r){var i=Object(t);if(!Swe(t)){var a=jwe(n);t=Ewe(t),n=function(c){return a(i[c],c,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:void 0}}var Pwe=Nwe,kwe=xB;function Cwe(e){var t=kwe(e),n=t%1;return t===t?n?t-n:t:0}var Awe=Cwe,Twe=S4,Owe=us,Rwe=Awe,$we=Math.max;function Iwe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:Rwe(n);return i<0&&(i=$we(r+i,0)),Twe(e,Owe(t),i)}var Mwe=Iwe,Dwe=Pwe,Lwe=Mwe,Bwe=Dwe(Lwe),Fwe=Bwe;const zwe=cn(Fwe);var Uwe=MQ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),BE=y.createContext(void 0),FE=y.createContext(void 0),TB=y.createContext(void 0),OB=y.createContext({}),RB=y.createContext(void 0),$B=y.createContext(0),IB=y.createContext(0),pO=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=t.clipPathId,c=t.children,l=t.width,u=t.height,d=Uwe(a);return R.createElement(BE.Provider,{value:r},R.createElement(FE.Provider,{value:i},R.createElement(OB.Provider,{value:a},R.createElement(TB.Provider,{value:d},R.createElement(RB.Provider,{value:s},R.createElement($B.Provider,{value:u},R.createElement(IB.Provider,{value:l},c)))))))},Hwe=function(){return y.useContext(RB)},MB=function(t){var n=y.useContext(BE);n==null&&Pl();var r=n[t];return r==null&&Pl(),r},Vwe=function(){var t=y.useContext(BE);return To(t)},Gwe=function(){var t=y.useContext(FE),n=zwe(t,function(r){return jB(r.domain,Number.isFinite)});return n||To(t)},DB=function(t){var n=y.useContext(FE);n==null&&Pl();var r=n[t];return r==null&&Pl(),r},Wwe=function(){var t=y.useContext(TB);return t},qwe=function(){return y.useContext(OB)},zE=function(){return y.useContext(IB)},UE=function(){return y.useContext($B)};function xd(e){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xd(e)}function Kwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ywe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BB(r.key),r)}}function Xwe(e,t,n){return t&&Ywe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zwe(e,t,n){return t=cy(t),Jwe(e,LB()?Reflect.construct(t,n||[],cy(e).constructor):t.apply(e,n))}function Jwe(e,t){if(t&&(xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qwe(e)}function Qwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LB=function(){return!!e})()}function cy(e){return cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cy(e)}function e_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G1(e,t)}function G1(e,t){return G1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},G1(e,t)}function mO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(n),!0).forEach(function(r){HE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HE(e,t,n){return t=BB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BB(e){var t=t_e(e,"string");return xd(t)=="symbol"?t:t+""}function t_e(e,t){if(xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function n_e(e,t){return s_e(e)||a_e(e,t)||i_e(e,t)||r_e()}function r_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i_e(e,t){if(e){if(typeof e=="string")return vO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vO(e,t)}}function vO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function s_e(e){if(Array.isArray(e))return e}function W1(){return W1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W1.apply(this,arguments)}var o_e=function(t,n){var r;return R.isValidElement(t)?r=R.cloneElement(t,n):ct(t)?r=t(n):r=R.createElement("line",W1({},n,{className:"recharts-reference-line-line"})),r},c_e=function(t,n,r,i,a,s,c,l,u){var d=a.x,h=a.y,f=a.width,p=a.height;if(r){var m=u.y,g=t.y.apply(m,{position:s});if(rs(u,"discard")&&!t.y.isInRange(g))return null;var v=[{x:d+f,y:g},{x:d,y:g}];return l==="left"?v.reverse():v}if(n){var x=u.x,b=t.x.apply(x,{position:s});if(rs(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:h+p},{x:b,y:h}];return c==="top"?w.reverse():w}if(i){var _=u.segment,j=_.map(function(S){return t.apply(S,{position:s})});return rs(u,"discard")&&O0e(j,function(S){return!t.isInRange(S)})?null:j}return null};function l_e(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,a=e.yAxisId,s=e.shape,c=e.className,l=e.alwaysShow,u=Hwe(),d=MB(i),h=DB(a),f=Wwe();if(!u||!f)return null;$a(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=LE({x:d.scale,y:h.scale}),m=cr(t),g=cr(n),v=r&&r.length===2,x=c_e(p,m,g,v,f,e.position,d.orientation,h.orientation,e);if(!x)return null;var b=n_e(x,2),w=b[0],_=w.x,j=w.y,S=b[1],N=S.x,P=S.y,k=rs(e,"hidden")?"url(#".concat(u,")"):void 0,T=gO(gO({clipPath:k},Ye(e,!0)),{},{x1:_,y1:j,x2:N,y2:P});return R.createElement(Ht,{className:ut("recharts-reference-line",c)},o_e(s,T),pr.renderCallByParent(e,bwe({x1:_,y1:j,x2:N,y2:P})))}var VE=function(e){function t(){return Kwe(this,t),Zwe(this,t,arguments)}return e_e(t,e),Xwe(t,[{key:"render",value:function(){return R.createElement(l_e,this.props)}}])}(R.Component);HE(VE,"displayName","ReferenceLine");HE(VE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q1.apply(this,arguments)}function bd(e){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bd(e)}function yO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(n),!0).forEach(function(r){Kx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zB(r.key),r)}}function h_e(e,t,n){return t&&d_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function f_e(e,t,n){return t=ly(t),p_e(e,FB()?Reflect.construct(t,n||[],ly(e).constructor):t.apply(e,n))}function p_e(e,t){if(t&&(bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m_e(e)}function m_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FB=function(){return!!e})()}function ly(e){return ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ly(e)}function g_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K1(e,t)}function K1(e,t){return K1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},K1(e,t)}function Kx(e,t,n){return t=zB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zB(e){var t=v_e(e,"string");return bd(t)=="symbol"?t:t+""}function v_e(e,t){if(bd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var y_e=function(t){var n=t.x,r=t.y,i=t.xAxis,a=t.yAxis,s=LE({x:i.scale,y:a.scale}),c=s.apply({x:n,y:r},{bandAware:!0});return rs(t,"discard")&&!s.isInRange(c)?null:c},Yx=function(e){function t(){return u_e(this,t),f_e(this,t,arguments)}return g_e(t,e),h_e(t,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,c=r.alwaysShow,l=r.clipPathId,u=cr(i),d=cr(a);if($a(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=y_e(this.props);if(!h)return null;var f=h.x,p=h.y,m=this.props,g=m.shape,v=m.className,x=rs(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=xO(xO({clipPath:x},Ye(this.props,!0)),{},{cx:f,cy:p});return R.createElement(Ht,{className:ut("recharts-reference-dot",v)},t.renderDot(g,b),pr.renderCallByParent(this.props,{x:f-s,y:p-s,width:2*s,height:2*s}))}}])}(R.Component);Kx(Yx,"displayName","ReferenceDot");Kx(Yx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Kx(Yx,"renderDot",function(e,t){var n;return R.isValidElement(e)?n=R.cloneElement(e,t):ct(e)?n=e(t):n=R.createElement(Fx,q1({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Y1(){return Y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y1.apply(this,arguments)}function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}function bO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bO(Object(n),!0).forEach(function(r){Xx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function x_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HB(r.key),r)}}function w_e(e,t,n){return t&&b_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function __e(e,t,n){return t=uy(t),j_e(e,UB()?Reflect.construct(t,n||[],uy(e).constructor):t.apply(e,n))}function j_e(e,t){if(t&&(wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S_e(e)}function S_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UB=function(){return!!e})()}function uy(e){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uy(e)}function E_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X1(e,t)}function X1(e,t){return X1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},X1(e,t)}function Xx(e,t,n){return t=HB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HB(e){var t=N_e(e,"string");return wd(t)=="symbol"?t:t+""}function N_e(e,t){if(wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var P_e=function(t,n,r,i,a){var s=a.x1,c=a.x2,l=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var f=LE({x:d.scale,y:h.scale}),p={x:t?f.x.apply(s,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},m={x:n?f.x.apply(c,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return rs(a,"discard")&&(!f.isInRange(p)||!f.isInRange(m))?null:CB(p,m)},Zx=function(e){function t(){return x_e(this,t),__e(this,t,arguments)}return E_e(t,e),w_e(t,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,c=r.y2,l=r.className,u=r.alwaysShow,d=r.clipPathId;$a(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=cr(i),f=cr(a),p=cr(s),m=cr(c),g=this.props.shape;if(!h&&!f&&!p&&!m&&!g)return null;var v=P_e(h,f,p,m,this.props);if(!v&&!g)return null;var x=rs(this.props,"hidden")?"url(#".concat(d,")"):void 0;return R.createElement(Ht,{className:ut("recharts-reference-area",l)},t.renderRect(g,wO(wO({clipPath:x},Ye(this.props,!0)),v)),pr.renderCallByParent(this.props,v))}}])}(R.Component);Xx(Zx,"displayName","ReferenceArea");Xx(Zx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Xx(Zx,"renderRect",function(e,t){var n;return R.isValidElement(e)?n=R.cloneElement(e,t):ct(e)?n=e(t):n=R.createElement(DE,Y1({},t,{className:"recharts-reference-area-rect"})),n});function VB(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function k_e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return _we(r,n)}function C_e(e,t,n){var r=n==="width",i=e.x,a=e.y,s=e.width,c=e.height;return t===1?{start:r?i:a,end:r?i+s:a+c}:{start:r?i+s:a+c,end:r?i:a}}function dy(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function A_e(e,t){return VB(e,t+1)}function T_e(e,t,n,r,i){for(var a=(r||[]).slice(),s=t.start,c=t.end,l=0,u=1,d=s,h=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:VB(r,u)};var g=l,v,x=function(){return v===void 0&&(v=n(m,g)),v},b=m.coordinate,w=l===0||dy(e,b,x,d,c);w||(l=0,d=s,u+=1),w&&(d=b+e*(x()/2+i),l+=u)},f;u<=a.length;)if(f=h(),f)return f.v;return[]}function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function _O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(n),!0).forEach(function(r){O_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O_e(e,t,n){return t=R_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R_e(e){var t=$_e(e,"string");return fp(t)=="symbol"?t:t+""}function $_e(e,t){if(fp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I_e(e,t,n,r,i){for(var a=(r||[]).slice(),s=a.length,c=t.start,l=t.end,u=function(f){var p=a[f],m,g=function(){return m===void 0&&(m=n(p,f)),m};if(f===s-1){var v=e*(p.coordinate+e*g()/2-l);a[f]=p=Ar(Ar({},p),{},{tickCoord:v>0?p.coordinate-v*e:p.coordinate})}else a[f]=p=Ar(Ar({},p),{},{tickCoord:p.coordinate});var x=dy(e,p.tickCoord,g,c,l);x&&(l=p.tickCoord-e*(g()/2+i),a[f]=Ar(Ar({},p),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function M_e(e,t,n,r,i,a){var s=(r||[]).slice(),c=s.length,l=t.start,u=t.end;if(a){var d=r[c-1],h=n(d,c-1),f=e*(d.coordinate+e*h/2-u);s[c-1]=d=Ar(Ar({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var p=dy(e,d.tickCoord,function(){return h},l,u);p&&(u=d.tickCoord-e*(h/2+i),s[c-1]=Ar(Ar({},d),{},{isShow:!0}))}for(var m=a?c-1:c,g=function(b){var w=s[b],_,j=function(){return _===void 0&&(_=n(w,b)),_};if(b===0){var S=e*(w.coordinate-e*j()/2-l);s[b]=w=Ar(Ar({},w),{},{tickCoord:S<0?w.coordinate-S*e:w.coordinate})}else s[b]=w=Ar(Ar({},w),{},{tickCoord:w.coordinate});var N=dy(e,w.tickCoord,j,l,u);N&&(l=w.tickCoord+e*(j()/2+i),s[b]=Ar(Ar({},w),{},{isShow:!0}))},v=0;v<m;v++)g(v);return s}function GE(e,t,n){var r=e.tick,i=e.ticks,a=e.viewBox,s=e.minTickGap,c=e.orientation,l=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!i||!i.length||!r)return[];if(we(l)||Al.isSsr)return A_e(i,typeof l=="number"&&we(l)?l:0);var f=[],p=c==="top"||c==="bottom"?"width":"height",m=d&&p==="width"?df(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(w,_){var j=ct(u)?u(w.value,_):w.value;return p==="width"?k_e(df(j,{fontSize:t,letterSpacing:n}),m,h):df(j,{fontSize:t,letterSpacing:n})[p]},v=i.length>=2?Kr(i[1].coordinate-i[0].coordinate):1,x=C_e(a,v,p);return l==="equidistantPreserveStart"?T_e(v,x,g,i,s):(l==="preserveStart"||l==="preserveStartEnd"?f=M_e(v,x,g,i,s,l==="preserveStartEnd"):f=I_e(v,x,g,i,s),f.filter(function(b){return b.isShow}))}var D_e=["viewBox"],L_e=["viewBox"],B_e=["ticks"];function _d(e){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(e)}function yu(){return yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yu.apply(this,arguments)}function jO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(n),!0).forEach(function(r){WE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hw(e,t){if(e==null)return{};var n=F_e(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function F_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function z_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WB(r.key),r)}}function U_e(e,t,n){return t&&SO(e.prototype,t),n&&SO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function H_e(e,t,n){return t=hy(t),V_e(e,GB()?Reflect.construct(t,n||[],hy(e).constructor):t.apply(e,n))}function V_e(e,t){if(t&&(_d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G_e(e)}function G_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GB=function(){return!!e})()}function hy(e){return hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hy(e)}function W_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z1(e,t)}function Z1(e,t){return Z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Z1(e,t)}function WE(e,t,n){return t=WB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WB(e){var t=q_e(e,"string");return _d(t)=="symbol"?t:t+""}function q_e(e,t){if(_d(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var rh=function(e){function t(n){var r;return z_e(this,t),r=H_e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return W_e(t,e),U_e(t,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=hw(r,D_e),c=this.props,l=c.viewBox,u=hw(c,L_e);return!Cu(a,l)||!Cu(s,u)||!Cu(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,c=i.width,l=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,f=i.tickMargin,p,m,g,v,x,b,w=h?-1:1,_=r.tickSize||d,j=we(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=m=r.coordinate,v=s+ +!h*l,g=v-w*_,b=g-w*f,x=j;break;case"left":g=v=r.coordinate,m=a+ +!h*c,p=m-w*_,x=p-w*f,b=j;break;case"right":g=v=r.coordinate,m=a+ +h*c,p=m+w*_,x=p+w*f,b=j;break;default:p=m=r.coordinate,v=s+ +h*l,g=v+w*_,b=g+w*f,x=j;break}return{line:{x1:p,y1:g,x2:m,y2:v},tick:{x,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,c=r.height,l=r.orientation,u=r.mirror,d=r.axisLine,h=rr(rr(rr({},Ye(this.props,!1)),Ye(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!u||l==="bottom"&&u);h=rr(rr({},h),{},{x1:i,y1:a+f*c,x2:i+s,y2:a+f*c})}else{var p=+(l==="left"&&!u||l==="right"&&u);h=rr(rr({},h),{},{x1:i+p*s,y1:a,x2:i+p*s,y2:a+c})}return R.createElement("line",yu({},h,{className:ut("recharts-cartesian-axis-line",Oi(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,c=this.props,l=c.tickLine,u=c.stroke,d=c.tick,h=c.tickFormatter,f=c.unit,p=GE(rr(rr({},this.props),{},{ticks:r}),i,a),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=Ye(this.props,!1),x=Ye(d,!1),b=rr(rr({},v),{},{fill:"none"},Ye(l,!1)),w=p.map(function(_,j){var S=s.getTickLineCoord(_),N=S.line,P=S.tick,k=rr(rr(rr(rr({textAnchor:m,verticalAnchor:g},v),{},{stroke:"none",fill:u},x),P),{},{index:j,payload:_,visibleTicksCount:p.length,tickFormatter:h});return R.createElement(Ht,yu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Sl(s.props,_,j)),l&&R.createElement("line",yu({},b,N,{className:ut("recharts-cartesian-axis-tick-line",Oi(l,"className"))})),d&&t.renderTickItem(d,k,"".concat(ct(h)?h(_.value,j):_.value).concat(f||"")))});return R.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,c=i.height,l=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,f=h.ticks,p=hw(h,B_e),m=f;return ct(l)&&(m=f&&f.length>0?l(this.props):l(p)),s<=0||c<=0||!m||!m.length?null:R.createElement(Ht,{className:ut("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),pr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,c=ut(i.className,"recharts-cartesian-axis-tick-value");return R.isValidElement(r)?s=R.cloneElement(r,rr(rr({},i),{},{className:c})):ct(r)?s=r(rr(rr({},i),{},{className:c})):s=R.createElement(El,yu({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(y.Component);WE(rh,"displayName","CartesianAxis");WE(rh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var K_e=["x1","y1","x2","y2","key"],Y_e=["offset"];function kl(e){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}function EO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EO(Object(n),!0).forEach(function(r){X_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X_e(e,t,n){return t=Z_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z_e(e){var t=J_e(e,"string");return kl(t)=="symbol"?t:t+""}function J_e(e,t){if(kl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qc.apply(this,arguments)}function NO(e,t){if(e==null)return{};var n=Q_e(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Q_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var e1e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,a=t.y,s=t.width,c=t.height,l=t.ry;return R.createElement("rect",{x:i,y:a,ry:l,width:s,height:c,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function qB(e,t){var n;if(R.isValidElement(e))n=R.cloneElement(e,t);else if(ct(e))n=e(t);else{var r=t.x1,i=t.y1,a=t.x2,s=t.y2,c=t.key,l=NO(t,K_e),u=Ye(l,!1);u.offset;var d=NO(u,Y_e);n=R.createElement("line",Qc({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:c}))}return n}function t1e(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,l){var u=Tr(Tr({},e),{},{x1:t,y1:c,x2:t+n,y2:c,key:"line-".concat(l),index:l});return qB(i,u)});return R.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function n1e(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,a=e.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,l){var u=Tr(Tr({},e),{},{x1:c,y1:t,x2:c,y2:t+n,key:"line-".concat(l),index:l});return qB(i,u)});return R.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function r1e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,a=e.width,s=e.height,c=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var d=c.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==d[0]&&d.unshift(0);var h=d.map(function(f,p){var m=!d[p+1],g=m?i+s-f:d[p+1]-f;if(g<=0)return null;var v=p%t.length;return R.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:g,width:a,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return R.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function i1e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,a=e.x,s=e.y,c=e.width,l=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==d[0]&&d.unshift(0);var h=d.map(function(f,p){var m=!d[p+1],g=m?a+c-f:d[p+1]-f;if(g<=0)return null;var v=p%r.length;return R.createElement("rect",{key:"react-".concat(p),x:f,y:s,width:g,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return R.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var a1e=function(t,n){var r=t.xAxis,i=t.width,a=t.height,s=t.offset;return H3(GE(Tr(Tr(Tr({},rh.defaultProps),r),{},{ticks:Rs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},s1e=function(t,n){var r=t.yAxis,i=t.width,a=t.height,s=t.offset;return H3(GE(Tr(Tr(Tr({},rh.defaultProps),r),{},{ticks:Rs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Ql={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Vo(e){var t,n,r,i,a,s,c=zE(),l=UE(),u=qwe(),d=Tr(Tr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ql.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Ql.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Ql.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Ql.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Ql.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:Ql.verticalFill,x:we(e.x)?e.x:u.left,y:we(e.y)?e.y:u.top,width:we(e.width)?e.width:u.width,height:we(e.height)?e.height:u.height}),h=d.x,f=d.y,p=d.width,m=d.height,g=d.syncWithTicks,v=d.horizontalValues,x=d.verticalValues,b=Vwe(),w=Gwe();if(!we(p)||p<=0||!we(m)||m<=0||!we(h)||h!==+h||!we(f)||f!==+f)return null;var _=d.verticalCoordinatesGenerator||a1e,j=d.horizontalCoordinatesGenerator||s1e,S=d.horizontalPoints,N=d.verticalPoints;if((!S||!S.length)&&ct(j)){var P=v&&v.length,k=j({yAxis:w?Tr(Tr({},w),{},{ticks:P?v:w.ticks}):void 0,width:c,height:l,offset:u},P?!0:g);$a(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(kl(k),"]")),Array.isArray(k)&&(S=k)}if((!N||!N.length)&&ct(_)){var T=x&&x.length,A=_({xAxis:b?Tr(Tr({},b),{},{ticks:T?x:b.ticks}):void 0,width:c,height:l,offset:u},T?!0:g);$a(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(kl(A),"]")),Array.isArray(A)&&(N=A)}return R.createElement("g",{className:"recharts-cartesian-grid"},R.createElement(e1e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),R.createElement(t1e,Qc({},d,{offset:u,horizontalPoints:S,xAxis:b,yAxis:w})),R.createElement(n1e,Qc({},d,{offset:u,verticalPoints:N,xAxis:b,yAxis:w})),R.createElement(r1e,Qc({},d,{horizontalPoints:S})),R.createElement(i1e,Qc({},d,{verticalPoints:N})))}Vo.displayName="CartesianGrid";var o1e=["type","layout","connectNulls","ref"],c1e=["key"];function jd(e){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jd(e)}function PO(e,t){if(e==null)return{};var n=l1e(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function l1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vf(){return vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vf.apply(this,arguments)}function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(n),!0).forEach(function(r){Na(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eu(e){return f1e(e)||h1e(e)||d1e(e)||u1e()}function u1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d1e(e,t){if(e){if(typeof e=="string")return J1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J1(e,t)}}function h1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function f1e(e){if(Array.isArray(e))return J1(e)}function J1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YB(r.key),r)}}function m1e(e,t,n){return t&&CO(e.prototype,t),n&&CO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g1e(e,t,n){return t=fy(t),v1e(e,KB()?Reflect.construct(t,n||[],fy(e).constructor):t.apply(e,n))}function v1e(e,t){if(t&&(jd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y1e(e)}function y1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KB=function(){return!!e})()}function fy(e){return fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fy(e)}function x1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q1(e,t)}function Q1(e,t){return Q1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Q1(e,t)}function Na(e,t,n){return t=YB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YB(e){var t=b1e(e,"string");return jd(t)=="symbol"?t:t+""}function b1e(e,t){if(jd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $s=function(e){function t(){var n;p1e(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=g1e(this,t,[].concat(i)),Na(n,"state",{isAnimationFinished:!0,totalLength:0}),Na(n,"generateSimpleStrokeDasharray",function(s,c){return"".concat(c,"px ").concat(s-c,"px")}),Na(n,"getStrokeDasharray",function(s,c,l){var u=l.reduce(function(x,b){return x+b});if(!u)return n.generateSimpleStrokeDasharray(c,s);for(var d=Math.floor(s/u),h=s%u,f=c-s,p=[],m=0,g=0;m<l.length;g+=l[m],++m)if(g+l[m]>h){p=[].concat(eu(l.slice(0,m)),[h-g]);break}var v=p.length%2===0?[0,f]:[f];return[].concat(eu(t.repeat(l,d)),eu(p),v).map(function(x){return"".concat(x,"px")}).join(", ")}),Na(n,"id",Xd("recharts-line-")),Na(n,"pathRef",function(s){n.mainCurve=s}),Na(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Na(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return x1e(t,e),m1e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,c=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,h=Ri(d,Zp);if(!h)return null;var f=function(g,v){return{x:g.x,y:g.y,value:g.value,errorVal:or(g.payload,v)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return R.createElement(Ht,p,h.map(function(m){return R.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:s,xAxis:c,yAxis:l,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var c=this.props,l=c.dot,u=c.points,d=c.dataKey,h=Ye(this.props,!1),f=Ye(l,!0),p=u.map(function(g,v){var x=bi(bi(bi({key:"dot-".concat(v),r:3},h),f),{},{index:v,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return t.renderDotItem(l,x)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return R.createElement(Ht,vf({className:"recharts-line-dots",key:"dots"},m),p)}},{key:"renderCurveStatically",value:function(r,i,a,s){var c=this.props,l=c.type,u=c.layout,d=c.connectNulls;c.ref;var h=PO(c,o1e),f=bi(bi(bi({},Ye(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:l,layout:u,connectNulls:d});return R.createElement(qv,vf({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,c=s.points,l=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,h=s.animationDuration,f=s.animationEasing,p=s.animationId,m=s.animateNewValues,g=s.width,v=s.height,x=this.state,b=x.prevPoints,w=x.totalLength;return R.createElement(ss,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(b){var S=b.length/c.length,N=c.map(function(O,D){var L=Math.floor(D*S);if(b[L]){var G=b[L],H=Ni(G.x,O.x),K=Ni(G.y,O.y);return bi(bi({},O),{},{x:H(j),y:K(j)})}if(m){var Z=Ni(g*2,O.x),q=Ni(v/2,O.y);return bi(bi({},O),{},{x:Z(j),y:q(j)})}return bi(bi({},O),{},{x:O.x,y:O.y})});return a.renderCurveStatically(N,r,i)}var P=Ni(0,w),k=P(j),T;if(l){var A="".concat(l).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});T=a.getStrokeDasharray(k,w,A)}else T=a.generateSimpleStrokeDasharray(w,k);return a.renderCurveStatically(c,r,i,{strokeDasharray:T})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,c=a.isAnimationActive,l=this.state,u=l.prevPoints,d=l.totalLength;return c&&s&&s.length&&(!u&&d>0||!Xp(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,c=i.points,l=i.className,u=i.xAxis,d=i.yAxis,h=i.top,f=i.left,p=i.width,m=i.height,g=i.isAnimationActive,v=i.id;if(a||!c||!c.length)return null;var x=this.state.isAnimationFinished,b=c.length===1,w=ut("recharts-line",l),_=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,S=_||j,N=gt(v)?this.id:v,P=(r=Ye(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=P.r,T=k===void 0?3:k,A=P.strokeWidth,O=A===void 0?2:A,D=Uee(s)?s:{},L=D.clipDot,G=L===void 0?!0:L,H=T*2+O;return R.createElement(Ht,{className:w},_||j?R.createElement("defs",null,R.createElement("clipPath",{id:"clipPath-".concat(N)},R.createElement("rect",{x:_?f:f-p/2,y:j?h:h-m/2,width:_?p:p*2,height:j?m:m*2})),!G&&R.createElement("clipPath",{id:"clipPath-dots-".concat(N)},R.createElement("rect",{x:f-H/2,y:h-H/2,width:p+H,height:m+H}))):null,!b&&this.renderCurve(S,N),this.renderErrorBar(S,N),(b||s)&&this.renderDots(S,G,N),(!g||x)&&Us.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(eu(r),[0]):r,s=[],c=0;c<i;++c)s=[].concat(eu(s),eu(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(R.isValidElement(r))a=R.cloneElement(r,i);else if(ct(r))a=r(i);else{var s=i.key,c=PO(i,c1e),l=ut("recharts-line-dot",typeof r!="boolean"?r.className:"");a=R.createElement(Fx,vf({key:s},c,{className:l}))}return a}}])}(y.PureComponent);Na($s,"displayName","Line");Na($s,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Al.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Na($s,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,s=e.dataKey,c=e.bandSize,l=e.displayedData,u=e.offset,d=t.layout,h=l.map(function(f,p){var m=or(f,s);return d==="horizontal"?{x:QA({axis:n,ticks:i,bandSize:c,entry:f,index:p}),y:gt(m)?null:r.scale(m),value:m,payload:f}:{x:gt(m)?null:n.scale(m),y:QA({axis:r,ticks:a,bandSize:c,entry:f,index:p}),value:m,payload:f}});return bi({points:h,layout:d},u)});function Sd(e){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sd(e)}function w1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _1e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JB(r.key),r)}}function j1e(e,t,n){return t&&_1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S1e(e,t,n){return t=py(t),E1e(e,XB()?Reflect.construct(t,n||[],py(e).constructor):t.apply(e,n))}function E1e(e,t){if(t&&(Sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N1e(e)}function N1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XB=function(){return!!e})()}function py(e){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},py(e)}function P1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ej(e,t)}function ej(e,t){return ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ej(e,t)}function ZB(e,t,n){return t=JB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JB(e){var t=k1e(e,"string");return Sd(t)=="symbol"?t:t+""}function k1e(e,t){if(Sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function tj(){return tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tj.apply(this,arguments)}function C1e(e){var t=e.xAxisId,n=zE(),r=UE(),i=MB(t);return i==null?null:y.createElement(rh,tj({},i,{className:ut("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Rs(s,!0)}}))}var Ta=function(e){function t(){return w1e(this,t),S1e(this,t,arguments)}return P1e(t,e),j1e(t,[{key:"render",value:function(){return y.createElement(C1e,this.props)}}])}(y.Component);ZB(Ta,"displayName","XAxis");ZB(Ta,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function A1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T1e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tF(r.key),r)}}function O1e(e,t,n){return t&&T1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R1e(e,t,n){return t=my(t),$1e(e,QB()?Reflect.construct(t,n||[],my(e).constructor):t.apply(e,n))}function $1e(e,t){if(t&&(Ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I1e(e)}function I1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QB=function(){return!!e})()}function my(e){return my=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},my(e)}function M1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nj(e,t)}function nj(e,t){return nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nj(e,t)}function eF(e,t,n){return t=tF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tF(e){var t=D1e(e,"string");return Ed(t)=="symbol"?t:t+""}function D1e(e,t){if(Ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function rj(){return rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rj.apply(this,arguments)}var L1e=function(t){var n=t.yAxisId,r=zE(),i=UE(),a=DB(n);return a==null?null:y.createElement(rh,rj({},a,{className:ut("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(c){return Rs(c,!0)}}))},Ki=function(e){function t(){return A1e(this,t),R1e(this,t,arguments)}return M1e(t,e),O1e(t,[{key:"render",value:function(){return y.createElement(L1e,this.props)}}])}(y.Component);eF(Ki,"displayName","YAxis");eF(Ki,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function AO(e){return U1e(e)||z1e(e)||F1e(e)||B1e()}function B1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F1e(e,t){if(e){if(typeof e=="string")return ij(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ij(e,t)}}function z1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U1e(e){if(Array.isArray(e))return ij(e)}function ij(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var aj=function(t,n,r,i,a){var s=Ri(t,VE),c=Ri(t,Yx),l=[].concat(AO(s),AO(c)),u=Ri(t,Zx),d="".concat(i,"Id"),h=i[0],f=n;if(l.length&&(f=l.reduce(function(g,v){if(v.props[d]===r&&rs(v.props,"extendDomain")&&we(v.props[h])){var x=v.props[h];return[Math.min(g[0],x),Math.max(g[1],x)]}return g},f)),u.length){var p="".concat(h,"1"),m="".concat(h,"2");f=u.reduce(function(g,v){if(v.props[d]===r&&rs(v.props,"extendDomain")&&we(v.props[p])&&we(v.props[m])){var x=v.props[p],b=v.props[m];return[Math.min(g[0],x,b),Math.max(g[1],x,b)]}return g},f)}return a&&a.length&&(f=a.reduce(function(g,v){return we(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},f)),f},nF={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,h||l,f),m=n?n+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},c.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,m=new Array(p);f<p;f++)m[f]=h[f].fn;return m},c.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},c.prototype.emit=function(u,d,h,f,p,m){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],x=arguments.length,b,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,h),!0;case 4:return v.fn.call(v.context,d,h,f),!0;case 5:return v.fn.call(v.context,d,h,f,p),!0;case 6:return v.fn.call(v.context,d,h,f,p,m),!0}for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];v.fn.apply(v.context,b)}else{var _=v.length,j;for(w=0;w<_;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),x){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,d);break;case 3:v[w].fn.call(v[w].context,d,h);break;case 4:v[w].fn.call(v[w].context,d,h,f);break;default:if(!b)for(j=1,b=new Array(x-1);j<x;j++)b[j-1]=arguments[j];v[w].fn.apply(v[w].context,b)}}return!0},c.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},c.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},c.prototype.removeListener=function(u,d,h,f){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return s(this,p),this;var m=this._events[p];if(m.fn)m.fn===d&&(!f||m.once)&&(!h||m.context===h)&&s(this,p);else{for(var g=0,v=[],x=m.length;g<x;g++)(m[g].fn!==d||f&&!m[g].once||h&&m[g].context!==h)&&v.push(m[g]);v.length?this._events[p]=v.length===1?v[0]:v:s(this,p)}return this},c.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c})(nF);var H1e=nF.exports;const V1e=cn(H1e);var fw=new V1e,pw="recharts.syncMouseEvents";function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}function G1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W1e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rF(r.key),r)}}function q1e(e,t,n){return t&&W1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mw(e,t,n){return t=rF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rF(e){var t=K1e(e,"string");return pp(t)=="symbol"?t:t+""}function K1e(e,t){if(pp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Y1e=function(){function e(){G1e(this,e),mw(this,"activeIndex",0),mw(this,"coordinateList",[]),mw(this,"layout","horizontal")}return q1e(e,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,c=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=c??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,c=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+l+u,f=s+this.offset.top+c/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function X1e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&we(r)&&we(i))return!0}return!1}function Z1e(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function iF(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,a=e.endAngle,s=mn(t,n,r,i),c=mn(t,n,r,a);return{points:[s,c],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function J1e(e,t,n){var r,i,a,s;if(e==="horizontal")r=t.x,a=r,i=n.top,s=n.top+n.height;else if(e==="vertical")i=t.y,s=i,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var c=t.cx,l=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,f=mn(c,l,u,h),p=mn(c,l,d,h);r=f.x,i=f.y,a=p.x,s=p.y}else return iF(t);return[{x:r,y:i},{x:a,y:s}]}function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function TO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(n),!0).forEach(function(r){Q1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q1e(e,t,n){return t=eje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eje(e){var t=tje(e,"string");return mp(t)=="symbol"?t:t+""}function tje(e,t){if(mp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nje(e){var t,n,r=e.element,i=e.tooltipEventType,a=e.isActive,s=e.activeCoordinate,c=e.activePayload,l=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!s||f!=="ScatterChart"&&i!=="axis")return null;var m,g=qv;if(f==="ScatterChart")m=s,g=bxe;else if(f==="BarChart")m=Z1e(h,s,l,d),g=DE;else if(h==="radial"){var v=iF(s),x=v.cx,b=v.cy,w=v.radius,_=v.startAngle,j=v.endAngle;m={cx:x,cy:b,startAngle:_,endAngle:j,innerRadius:w,outerRadius:w},g=eB}else m={points:J1e(h,s,l)},g=qv;var S=hg(hg(hg(hg({stroke:"#ccc",pointerEvents:"none"},l),m),Ye(p,!1)),{},{payload:c,payloadIndex:u,className:ut("recharts-tooltip-cursor",p.className)});return y.isValidElement(p)?y.cloneElement(p,S):y.createElement(g,S)}var rje=["item"],ije=["children","className","width","height","style","compact","title","desc"];function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function xu(){return xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xu.apply(this,arguments)}function OO(e,t){return oje(e)||sje(e,t)||sF(e,t)||aje()}function aje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function oje(e){if(Array.isArray(e))return e}function RO(e,t){if(e==null)return{};var n=cje(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function lje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uje(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oF(r.key),r)}}function dje(e,t,n){return t&&uje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hje(e,t,n){return t=gy(t),fje(e,aF()?Reflect.construct(t,n||[],gy(e).constructor):t.apply(e,n))}function fje(e,t){if(t&&(Nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pje(e)}function pje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aF=function(){return!!e})()}function gy(e){return gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gy(e)}function mje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sj(e,t)}function sj(e,t){return sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sj(e,t)}function Pd(e){return yje(e)||vje(e)||sF(e)||gje()}function gje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sF(e,t){if(e){if(typeof e=="string")return oj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oj(e,t)}}function vje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yje(e){if(Array.isArray(e))return oj(e)}function oj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(n),!0).forEach(function(r){Je(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Je(e,t,n){return t=oF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oF(e){var t=xje(e,"string");return Nd(t)=="symbol"?t:t+""}function xje(e,t){if(Nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bje={xAxis:["bottom","top"],yAxis:["left","right"]},wje={width:"100%",height:"100%"},cF={x:0,y:0};function fg(e){return e}var _je=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},jje=function(t,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var s=a.coordinate,c=i.radius;return te(te(te({},i),mn(i.cx,i.cy,c,s)),{},{angle:s,radius:c})}var l=a.coordinate,u=i.angle;return te(te(te({},i),mn(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return cF},Jx=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(c,l){var u=l.props.data;return u&&u.length?[].concat(Pd(c),Pd(u)):c},[]);return s.length>0?s:t&&t.length&&we(i)&&we(a)?t.slice(i,a+1):[]};function lF(e){return e==="number"?[0,"auto"]:void 0}var cj=function(t,n,r,i){var a=t.graphicalItems,s=t.tooltipAxis,c=Jx(n,t);return r<0||!a||!a.length||r>=c.length?null:a.reduce(function(l,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(s.dataKey&&!s.allowDuplicatedCategory){var p=h===void 0?c:h;f=gv(p,s.dataKey,i)}else f=h&&h[r]||c[r];return f?[].concat(Pd(l),[K3(u,f)]):l},[])},IO=function(t,n,r,i){var a=i||{x:t.chartX,y:t.chartY},s=_je(a,r),c=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,d=Hme(s,c,u,l);if(d>=0&&u){var h=u[d]&&u[d].value,f=cj(t,n,d,h),p=jje(r,c,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:p}}return null},Sje=function(t,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,c=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=t.stackOffset,p=U3(d,a);return r.reduce(function(m,g){var v,x=g.type.defaultProps!==void 0?te(te({},g.type.defaultProps),g.props):g.props,b=x.type,w=x.dataKey,_=x.allowDataOverflow,j=x.allowDuplicatedCategory,S=x.scale,N=x.ticks,P=x.includeHidden,k=x[s];if(m[k])return m;var T=Jx(t.data,{graphicalItems:i.filter(function(re){var de,Se=s in re.props?re.props[s]:(de=re.type.defaultProps)===null||de===void 0?void 0:de[s];return Se===k}),dataStartIndex:l,dataEndIndex:u}),A=T.length,O,D,L;X1e(x.domain,_,b)&&(O=_1(x.domain,null,_),p&&(b==="number"||S!=="auto")&&(L=ff(T,w,"category")));var G=lF(b);if(!O||O.length===0){var H,K=(H=x.domain)!==null&&H!==void 0?H:G;if(w){if(O=ff(T,w,b),b==="category"&&p){var Z=Oee(O);j&&Z?(D=O,O=ry(0,A)):j||(O=rT(K,O,g).reduce(function(re,de){return re.indexOf(de)>=0?re:[].concat(Pd(re),[de])},[]))}else if(b==="category")j?O=O.filter(function(re){return re!==""&&!gt(re)}):O=rT(K,O,g).reduce(function(re,de){return re.indexOf(de)>=0||de===""||gt(de)?re:[].concat(Pd(re),[de])},[]);else if(b==="number"){var q=Kme(T,i.filter(function(re){var de,Se,nt=s in re.props?re.props[s]:(de=re.type.defaultProps)===null||de===void 0?void 0:de[s],St="hide"in re.props?re.props.hide:(Se=re.type.defaultProps)===null||Se===void 0?void 0:Se.hide;return nt===k&&(P||!St)}),w,a,d);q&&(O=q)}p&&(b==="number"||S!=="auto")&&(L=ff(T,w,"category"))}else p?O=ry(0,A):c&&c[k]&&c[k].hasStack&&b==="number"?O=f==="expand"?[0,1]:q3(c[k].stackGroups,l,u):O=z3(T,i.filter(function(re){var de=s in re.props?re.props[s]:re.type.defaultProps[s],Se="hide"in re.props?re.props.hide:re.type.defaultProps.hide;return de===k&&(P||!Se)}),b,d,!0);if(b==="number")O=aj(h,O,k,a,N),K&&(O=_1(K,O,_));else if(b==="category"&&K){var le=K,_e=O.every(function(re){return le.indexOf(re)>=0});_e&&(O=le)}}return te(te({},m),{},Je({},k,te(te({},x),{},{axisType:a,domain:O,categoricalDomain:L,duplicateDomain:D,originalDomain:(v=x.domain)!==null&&v!==void 0?v:G,isCategorical:p,layout:d})))},{})},Eje=function(t,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,c=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=Jx(t.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),p=f.length,m=U3(d,a),g=-1;return r.reduce(function(v,x){var b=x.type.defaultProps!==void 0?te(te({},x.type.defaultProps),x.props):x.props,w=b[s],_=lF("number");if(!v[w]){g++;var j;return m?j=ry(0,p):c&&c[w]&&c[w].hasStack?(j=q3(c[w].stackGroups,l,u),j=aj(h,j,w,a)):(j=_1(_,z3(f,r.filter(function(S){var N,P,k=s in S.props?S.props[s]:(N=S.type.defaultProps)===null||N===void 0?void 0:N[s],T="hide"in S.props?S.props.hide:(P=S.type.defaultProps)===null||P===void 0?void 0:P.hide;return k===w&&!T}),"number",d),i.defaultProps.allowDataOverflow),j=aj(h,j,w,a)),te(te({},v),{},Je({},w,te(te({axisType:a},i.defaultProps),{},{hide:!0,orientation:Oi(bje,"".concat(a,".").concat(g%2),null),domain:j,originalDomain:_,isCategorical:m,layout:d})))}return v},{})},Nje=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,c=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=t.children,h="".concat(i,"Id"),f=Ri(d,a),p={};return f&&f.length?p=Sje(t,{axes:f,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:c,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(p=Eje(t,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:c,dataStartIndex:l,dataEndIndex:u})),p},Pje=function(t){var n=To(t),r=Rs(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:uE(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Vv(n,r)}},MO=function(t){var n=t.children,r=t.defaultShowTooltip,i=Si(n,vd),a=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},kje=function(t){return!t||!t.length?!1:t.some(function(n){var r=Fs(n&&n.type);return r&&r.indexOf("Bar")>=0})},DO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Cje=function(t,n){var r=t.props,i=t.graphicalItems,a=t.xAxisMap,s=a===void 0?{}:a,c=t.yAxisMap,l=c===void 0?{}:c,u=r.width,d=r.height,h=r.children,f=r.margin||{},p=Si(h,vd),m=Si(h,Ko),g=Object.keys(l).reduce(function(j,S){var N=l[S],P=N.orientation;return!N.mirror&&!N.hide?te(te({},j),{},Je({},P,j[P]+N.width)):j},{left:f.left||0,right:f.right||0}),v=Object.keys(s).reduce(function(j,S){var N=s[S],P=N.orientation;return!N.mirror&&!N.hide?te(te({},j),{},Je({},P,Oi(j,"".concat(P))+N.height)):j},{top:f.top||0,bottom:f.bottom||0}),x=te(te({},v),g),b=x.bottom;p&&(x.bottom+=p.props.height||vd.defaultProps.height),m&&n&&(x=Wme(x,i,r,n));var w=u-x.left-x.right,_=d-x.top-x.bottom;return te(te({brushBottom:b},x),{},{width:Math.max(w,0),height:Math.max(_,0)})},Aje=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},qE=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,s=t.validateTooltipEventTypes,c=s===void 0?["axis"]:s,l=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,f=function(x,b){var w=b.graphicalItems,_=b.stackGroups,j=b.offset,S=b.updateId,N=b.dataStartIndex,P=b.dataEndIndex,k=x.barSize,T=x.layout,A=x.barGap,O=x.barCategoryGap,D=x.maxBarSize,L=DO(T),G=L.numericAxisName,H=L.cateAxisName,K=kje(w),Z=[];return w.forEach(function(q,le){var _e=Jx(x.data,{graphicalItems:[q],dataStartIndex:N,dataEndIndex:P}),re=q.type.defaultProps!==void 0?te(te({},q.type.defaultProps),q.props):q.props,de=re.dataKey,Se=re.maxBarSize,nt=re["".concat(G,"Id")],St=re["".concat(H,"Id")],Ee={},se=l.reduce(function(ur,br){var yn=b["".concat(br.axisType,"Map")],Lr=re["".concat(br.axisType,"Id")];yn&&yn[Lr]||br.axisType==="zAxis"||Pl();var je=yn[Lr];return te(te({},ur),{},Je(Je({},br.axisType,je),"".concat(br.axisType,"Ticks"),Rs(je)))},Ee),X=se[H],ne=se["".concat(H,"Ticks")],ae=_&&_[nt]&&_[nt].hasStack&&rge(q,_[nt].stackGroups),W=Fs(q.type).indexOf("Bar")>=0,Re=Vv(X,ne),Pe=[],Ve=K&&Vme({barSize:k,stackGroups:_,totalSize:Aje(se,H)});if(W){var Ct,qt,tr=gt(Se)?D:Se,Dn=(Ct=(qt=Vv(X,ne,!0))!==null&&qt!==void 0?qt:tr)!==null&&Ct!==void 0?Ct:0;Pe=Gme({barGap:A,barCategoryGap:O,bandSize:Dn!==Re?Dn:Re,sizeList:Ve[St],maxBarSize:tr}),Dn!==Re&&(Pe=Pe.map(function(ur){return te(te({},ur),{},{position:te(te({},ur.position),{},{offset:ur.position.offset-Dn/2})})}))}var Jr=q&&q.type&&q.type.getComposedData;Jr&&Z.push({props:te(te({},Jr(te(te({},se),{},{displayedData:_e,props:x,dataKey:de,item:q,bandSize:Re,barPosition:Pe,offset:j,stackedData:ae,layout:T,dataStartIndex:N,dataEndIndex:P}))),{},Je(Je(Je({key:q.key||"item-".concat(le)},G,se[G]),H,se[H]),"animationId",S)),childIndex:Gee(q,x.children),item:q})}),Z},p=function(x,b){var w=x.props,_=x.dataStartIndex,j=x.dataEndIndex,S=x.updateId;if(!X2({props:w}))return null;var N=w.children,P=w.layout,k=w.stackOffset,T=w.data,A=w.reverseStackOrder,O=DO(P),D=O.numericAxisName,L=O.cateAxisName,G=Ri(N,r),H=tge(T,G,"".concat(D,"Id"),"".concat(L,"Id"),k,A),K=l.reduce(function(re,de){var Se="".concat(de.axisType,"Map");return te(te({},re),{},Je({},Se,Nje(w,te(te({},de),{},{graphicalItems:G,stackGroups:de.axisType===D&&H,dataStartIndex:_,dataEndIndex:j}))))},{}),Z=Cje(te(te({},K),{},{props:w,graphicalItems:G}),b==null?void 0:b.legendBBox);Object.keys(K).forEach(function(re){K[re]=d(w,K[re],Z,re.replace("Map",""),n)});var q=K["".concat(L,"Map")],le=Pje(q),_e=f(w,te(te({},K),{},{dataStartIndex:_,dataEndIndex:j,updateId:S,graphicalItems:G,stackGroups:H,offset:Z}));return te(te({formattedGraphicalItems:_e,graphicalItems:G,offset:Z,stackGroups:H},le),K)},m=function(v){function x(b){var w,_,j;return lje(this,x),j=hje(this,x,[b]),Je(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Je(j,"accessibilityManager",new Y1e),Je(j,"handleLegendBBoxUpdate",function(S){if(S){var N=j.state,P=N.dataStartIndex,k=N.dataEndIndex,T=N.updateId;j.setState(te({legendBBox:S},p({props:j.props,dataStartIndex:P,dataEndIndex:k,updateId:T},te(te({},j.state),{},{legendBBox:S}))))}}),Je(j,"handleReceiveSyncEvent",function(S,N,P){if(j.props.syncId===S){if(P===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(N)}}),Je(j,"handleBrushChange",function(S){var N=S.startIndex,P=S.endIndex;if(N!==j.state.dataStartIndex||P!==j.state.dataEndIndex){var k=j.state.updateId;j.setState(function(){return te({dataStartIndex:N,dataEndIndex:P},p({props:j.props,dataStartIndex:N,dataEndIndex:P,updateId:k},j.state))}),j.triggerSyncEvent({dataStartIndex:N,dataEndIndex:P})}}),Je(j,"handleMouseEnter",function(S){var N=j.getMouseInfo(S);if(N){var P=te(te({},N),{},{isTooltipActive:!0});j.setState(P),j.triggerSyncEvent(P);var k=j.props.onMouseEnter;ct(k)&&k(P,S)}}),Je(j,"triggeredAfterMouseMove",function(S){var N=j.getMouseInfo(S),P=N?te(te({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(P),j.triggerSyncEvent(P);var k=j.props.onMouseMove;ct(k)&&k(P,S)}),Je(j,"handleItemMouseEnter",function(S){j.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Je(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),Je(j,"handleMouseMove",function(S){S.persist(),j.throttleTriggeredAfterMouseMove(S)}),Je(j,"handleMouseLeave",function(S){j.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};j.setState(N),j.triggerSyncEvent(N);var P=j.props.onMouseLeave;ct(P)&&P(N,S)}),Je(j,"handleOuterEvent",function(S){var N=Vee(S),P=Oi(j.props,"".concat(N));if(N&&ct(P)){var k,T;/.*touch.*/i.test(N)?T=j.getMouseInfo(S.changedTouches[0]):T=j.getMouseInfo(S),P((k=T)!==null&&k!==void 0?k:{},S)}}),Je(j,"handleClick",function(S){var N=j.getMouseInfo(S);if(N){var P=te(te({},N),{},{isTooltipActive:!0});j.setState(P),j.triggerSyncEvent(P);var k=j.props.onClick;ct(k)&&k(P,S)}}),Je(j,"handleMouseDown",function(S){var N=j.props.onMouseDown;if(ct(N)){var P=j.getMouseInfo(S);N(P,S)}}),Je(j,"handleMouseUp",function(S){var N=j.props.onMouseUp;if(ct(N)){var P=j.getMouseInfo(S);N(P,S)}}),Je(j,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Je(j,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseDown(S.changedTouches[0])}),Je(j,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseUp(S.changedTouches[0])}),Je(j,"handleDoubleClick",function(S){var N=j.props.onDoubleClick;if(ct(N)){var P=j.getMouseInfo(S);N(P,S)}}),Je(j,"handleContextMenu",function(S){var N=j.props.onContextMenu;if(ct(N)){var P=j.getMouseInfo(S);N(P,S)}}),Je(j,"triggerSyncEvent",function(S){j.props.syncId!==void 0&&fw.emit(pw,j.props.syncId,S,j.eventEmitterSymbol)}),Je(j,"applySyncEvent",function(S){var N=j.props,P=N.layout,k=N.syncMethod,T=j.state.updateId,A=S.dataStartIndex,O=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)j.setState(te({dataStartIndex:A,dataEndIndex:O},p({props:j.props,dataStartIndex:A,dataEndIndex:O,updateId:T},j.state)));else if(S.activeTooltipIndex!==void 0){var D=S.chartX,L=S.chartY,G=S.activeTooltipIndex,H=j.state,K=H.offset,Z=H.tooltipTicks;if(!K)return;if(typeof k=="function")G=k(Z,S);else if(k==="value"){G=-1;for(var q=0;q<Z.length;q++)if(Z[q].value===S.activeLabel){G=q;break}}var le=te(te({},K),{},{x:K.left,y:K.top}),_e=Math.min(D,le.x+le.width),re=Math.min(L,le.y+le.height),de=Z[G]&&Z[G].value,Se=cj(j.state,j.props.data,G),nt=Z[G]?{x:P==="horizontal"?Z[G].coordinate:_e,y:P==="horizontal"?re:Z[G].coordinate}:cF;j.setState(te(te({},S),{},{activeLabel:de,activeCoordinate:nt,activePayload:Se,activeTooltipIndex:G}))}else j.setState(S)}),Je(j,"renderCursor",function(S){var N,P=j.state,k=P.isTooltipActive,T=P.activeCoordinate,A=P.activePayload,O=P.offset,D=P.activeTooltipIndex,L=P.tooltipAxisBandSize,G=j.getTooltipEventType(),H=(N=S.props.active)!==null&&N!==void 0?N:k,K=j.props.layout,Z=S.key||"_recharts-cursor";return R.createElement(nje,{key:Z,activeCoordinate:T,activePayload:A,activeTooltipIndex:D,chartName:n,element:S,isActive:H,layout:K,offset:O,tooltipAxisBandSize:L,tooltipEventType:G})}),Je(j,"renderPolarAxis",function(S,N,P){var k=Oi(S,"type.axisType"),T=Oi(j.state,"".concat(k,"Map")),A=S.type.defaultProps,O=A!==void 0?te(te({},A),S.props):S.props,D=T&&T[O["".concat(k,"Id")]];return y.cloneElement(S,te(te({},D),{},{className:ut(k,D.className),key:S.key||"".concat(N,"-").concat(P),ticks:Rs(D,!0)}))}),Je(j,"renderPolarGrid",function(S){var N=S.props,P=N.radialLines,k=N.polarAngles,T=N.polarRadius,A=j.state,O=A.radiusAxisMap,D=A.angleAxisMap,L=To(O),G=To(D),H=G.cx,K=G.cy,Z=G.innerRadius,q=G.outerRadius;return y.cloneElement(S,{polarAngles:Array.isArray(k)?k:Rs(G,!0).map(function(le){return le.coordinate}),polarRadius:Array.isArray(T)?T:Rs(L,!0).map(function(le){return le.coordinate}),cx:H,cy:K,innerRadius:Z,outerRadius:q,key:S.key||"polar-grid",radialLines:P})}),Je(j,"renderLegend",function(){var S=j.state.formattedGraphicalItems,N=j.props,P=N.children,k=N.width,T=N.height,A=j.props.margin||{},O=k-(A.left||0)-(A.right||0),D=B3({children:P,formattedGraphicalItems:S,legendWidth:O,legendContent:u});if(!D)return null;var L=D.item,G=RO(D,rje);return y.cloneElement(L,te(te({},G),{},{chartWidth:k,chartHeight:T,margin:A,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),Je(j,"renderTooltip",function(){var S,N=j.props,P=N.children,k=N.accessibilityLayer,T=Si(P,Sr);if(!T)return null;var A=j.state,O=A.isTooltipActive,D=A.activeCoordinate,L=A.activePayload,G=A.activeLabel,H=A.offset,K=(S=T.props.active)!==null&&S!==void 0?S:O;return y.cloneElement(T,{viewBox:te(te({},H),{},{x:H.left,y:H.top}),active:K,label:G,payload:K?L:[],coordinate:D,accessibilityLayer:k})}),Je(j,"renderBrush",function(S){var N=j.props,P=N.margin,k=N.data,T=j.state,A=T.offset,O=T.dataStartIndex,D=T.dataEndIndex,L=T.updateId;return y.cloneElement(S,{key:S.key||"_recharts-brush",onChange:cg(j.handleBrushChange,S.props.onChange),data:k,x:we(S.props.x)?S.props.x:A.left,y:we(S.props.y)?S.props.y:A.top+A.height+A.brushBottom-(P.bottom||0),width:we(S.props.width)?S.props.width:A.width,startIndex:O,endIndex:D,updateId:"brush-".concat(L)})}),Je(j,"renderReferenceElement",function(S,N,P){if(!S)return null;var k=j,T=k.clipPathId,A=j.state,O=A.xAxisMap,D=A.yAxisMap,L=A.offset,G=S.type.defaultProps||{},H=S.props,K=H.xAxisId,Z=K===void 0?G.xAxisId:K,q=H.yAxisId,le=q===void 0?G.yAxisId:q;return y.cloneElement(S,{key:S.key||"".concat(N,"-").concat(P),xAxis:O[Z],yAxis:D[le],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:T})}),Je(j,"renderActivePoints",function(S){var N=S.item,P=S.activePoint,k=S.basePoint,T=S.childIndex,A=S.isRange,O=[],D=N.props.key,L=N.item.type.defaultProps!==void 0?te(te({},N.item.type.defaultProps),N.item.props):N.item.props,G=L.activeDot,H=L.dataKey,K=te(te({index:T,dataKey:H,cx:P.x,cy:P.y,r:4,fill:ME(N.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Ye(G,!1)),vv(G));return O.push(x.renderActiveDot(G,K,"".concat(D,"-activePoint-").concat(T))),k?O.push(x.renderActiveDot(G,te(te({},K),{},{cx:k.x,cy:k.y}),"".concat(D,"-basePoint-").concat(T))):A&&O.push(null),O}),Je(j,"renderGraphicChild",function(S,N,P){var k=j.filterFormatItem(S,N,P);if(!k)return null;var T=j.getTooltipEventType(),A=j.state,O=A.isTooltipActive,D=A.tooltipAxis,L=A.activeTooltipIndex,G=A.activeLabel,H=j.props.children,K=Si(H,Sr),Z=k.props,q=Z.points,le=Z.isRange,_e=Z.baseLine,re=k.item.type.defaultProps!==void 0?te(te({},k.item.type.defaultProps),k.item.props):k.item.props,de=re.activeDot,Se=re.hide,nt=re.activeBar,St=re.activeShape,Ee=!!(!Se&&O&&K&&(de||nt||St)),se={};T!=="axis"&&K&&K.props.trigger==="click"?se={onClick:cg(j.handleItemMouseEnter,S.props.onClick)}:T!=="axis"&&(se={onMouseLeave:cg(j.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:cg(j.handleItemMouseEnter,S.props.onMouseEnter)});var X=y.cloneElement(S,te(te({},k.props),se));function ne(br){return typeof D.dataKey=="function"?D.dataKey(br.payload):null}if(Ee)if(L>=0){var ae,W;if(D.dataKey&&!D.allowDuplicatedCategory){var Re=typeof D.dataKey=="function"?ne:"payload.".concat(D.dataKey.toString());ae=gv(q,Re,G),W=le&&_e&&gv(_e,Re,G)}else ae=q==null?void 0:q[L],W=le&&_e&&_e[L];if(St||nt){var Pe=S.props.activeIndex!==void 0?S.props.activeIndex:L;return[y.cloneElement(S,te(te(te({},k.props),se),{},{activeIndex:Pe})),null,null]}if(!gt(ae))return[X].concat(Pd(j.renderActivePoints({item:k,activePoint:ae,basePoint:W,childIndex:L,isRange:le})))}else{var Ve,Ct=(Ve=j.getItemByXY(j.state.activeCoordinate))!==null&&Ve!==void 0?Ve:{graphicalItem:X},qt=Ct.graphicalItem,tr=qt.item,Dn=tr===void 0?S:tr,Jr=qt.childIndex,ur=te(te(te({},k.props),se),{},{activeIndex:Jr});return[y.cloneElement(Dn,ur),null,null]}return le?[X,null,null]:[X,null]}),Je(j,"renderCustomized",function(S,N,P){return y.cloneElement(S,te(te({key:"recharts-customized-".concat(P)},j.props),j.state))}),Je(j,"renderMap",{CartesianGrid:{handler:fg,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:fg},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:fg},YAxis:{handler:fg},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:Xd("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=L4(j.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),j.state={},j}return mje(x,v),dje(x,[{key:"componentDidMount",value:function(){var w,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,_=w.children,j=w.data,S=w.height,N=w.layout,P=Si(_,Sr);if(P){var k=P.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,A=cj(this.state,j,k,T),O=this.state.tooltipTicks[k].coordinate,D=(this.state.offset.top+S)/2,L=N==="horizontal",G=L?{x:O,y:D}:{y:O,x:D},H=this.state.formattedGraphicalItems.find(function(Z){var q=Z.item;return q.type.name==="Scatter"});H&&(G=te(te({},G),H.props.points[k].tooltipPosition),A=H.props.points[k].tooltipPayload);var K={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:T,activePayload:A,activeCoordinate:G};this.setState(K),this.renderCursor(P),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,S;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){D_([Si(w.children,Sr)],[Si(this.props.children,Sr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Si(this.props.children,Sr);if(w&&typeof w.props.shared=="boolean"){var _=w.props.shared?"axis":"item";return c.indexOf(_)>=0?_:a}return a}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var _=this.container,j=_.getBoundingClientRect(),S=vde(j),N={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},P=j.width/_.offsetWidth||1,k=this.inRange(N.chartX,N.chartY,P);if(!k)return null;var T=this.state,A=T.xAxisMap,O=T.yAxisMap,D=this.getTooltipEventType(),L=IO(this.state,this.props.data,this.props.layout,k);if(D!=="axis"&&A&&O){var G=To(A).scale,H=To(O).scale,K=G&&G.invert?G.invert(N.chartX):null,Z=H&&H.invert?H.invert(N.chartY):null;return te(te({},N),{},{xValue:K,yValue:Z},L)}return L?te(te({},N),L):null}},{key:"inRange",value:function(w,_){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,N=w/j,P=_/j;if(S==="horizontal"||S==="vertical"){var k=this.state.offset,T=N>=k.left&&N<=k.left+k.width&&P>=k.top&&P<=k.top+k.height;return T?{x:N,y:P}:null}var A=this.state,O=A.angleAxisMap,D=A.radiusAxisMap;if(O&&D){var L=To(O);return sT({x:N,y:P},L)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,_=this.getTooltipEventType(),j=Si(w,Sr),S={};j&&_==="axis"&&(j.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=vv(this.props,this.handleOuterEvent);return te(te({},N),S)}},{key:"addListener",value:function(){fw.on(pw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){fw.removeListener(pw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,_,j){for(var S=this.state.formattedGraphicalItems,N=0,P=S.length;N<P;N++){var k=S[N];if(k.item===w||k.props.key===w.key||_===Fs(k.item.type)&&j===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,_=this.state.offset,j=_.left,S=_.top,N=_.height,P=_.width;return R.createElement("defs",null,R.createElement("clipPath",{id:w},R.createElement("rect",{x:j,y:S,height:N,width:P})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(_,j){var S=OO(j,2),N=S[0],P=S[1];return te(te({},_),{},Je({},N,P.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(_,j){var S=OO(j,2),N=S[0],P=S[1];return te(te({},_),{},Je({},N,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(w){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(w){var _=this.state,j=_.formattedGraphicalItems,S=_.activeItem;if(j&&j.length)for(var N=0,P=j.length;N<P;N++){var k=j[N],T=k.props,A=k.item,O=A.type.defaultProps!==void 0?te(te({},A.type.defaultProps),A.props):A.props,D=Fs(A.type);if(D==="Bar"){var L=(T.data||[]).find(function(Z){return exe(w,Z)});if(L)return{graphicalItem:k,payload:L}}else if(D==="RadialBar"){var G=(T.data||[]).find(function(Z){return sT(w,Z)});if(G)return{graphicalItem:k,payload:G}}else if(Gx(k,S)||Wx(k,S)||lp(k,S)){var H=Ube({graphicalItem:k,activeTooltipItem:S,itemData:O.data}),K=O.activeIndex===void 0?H:O.activeIndex;return{graphicalItem:te(te({},k),{},{childIndex:K}),payload:lp(k,S)?O.data[H]:k.props.data[H]}}}return null}},{key:"render",value:function(){var w=this;if(!X2(this))return null;var _=this.props,j=_.children,S=_.className,N=_.width,P=_.height,k=_.style,T=_.compact,A=_.title,O=_.desc,D=RO(_,ije),L=Ye(D,!1);if(T)return R.createElement(pO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},R.createElement(B_,xu({},L,{width:N,height:P,title:A,desc:O}),this.renderClipPath(),J2(j,this.renderMap)));if(this.props.accessibilityLayer){var G,H;L.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,L.role=(H=this.props.role)!==null&&H!==void 0?H:"application",L.onKeyDown=function(Z){w.accessibilityManager.keyboardEvent(Z)},L.onFocus=function(){w.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return R.createElement(pO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},R.createElement("div",xu({className:ut("recharts-wrapper",S),style:te({position:"relative",cursor:"default",width:N,height:P},k)},K,{ref:function(q){w.container=q}}),R.createElement(B_,xu({},L,{width:N,height:P,title:A,desc:O,style:wje}),this.renderClipPath(),J2(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);Je(m,"displayName",n),Je(m,"defaultProps",te({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Je(m,"getDerivedStateFromProps",function(v,x){var b=v.dataKey,w=v.data,_=v.children,j=v.width,S=v.height,N=v.layout,P=v.stackOffset,k=v.margin,T=x.dataStartIndex,A=x.dataEndIndex;if(x.updateId===void 0){var O=MO(v);return te(te(te({},O),{},{updateId:0},p(te(te({props:v},O),{},{updateId:0}),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:S,prevLayout:N,prevStackOffset:P,prevMargin:k,prevChildren:_})}if(b!==x.prevDataKey||w!==x.prevData||j!==x.prevWidth||S!==x.prevHeight||N!==x.prevLayout||P!==x.prevStackOffset||!Cu(k,x.prevMargin)){var D=MO(v),L={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},G=te(te({},IO(x,w,N)),{},{updateId:x.updateId+1}),H=te(te(te({},D),L),G);return te(te(te({},H),p(te({props:v},H),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:S,prevLayout:N,prevStackOffset:P,prevMargin:k,prevChildren:_})}if(!D_(_,x.prevChildren)){var K,Z,q,le,_e=Si(_,vd),re=_e&&(K=(Z=_e.props)===null||Z===void 0?void 0:Z.startIndex)!==null&&K!==void 0?K:T,de=_e&&(q=(le=_e.props)===null||le===void 0?void 0:le.endIndex)!==null&&q!==void 0?q:A,Se=re!==T||de!==A,nt=!gt(w),St=nt&&!Se?x.updateId:x.updateId+1;return te(te({updateId:St},p(te(te({props:v},x),{},{updateId:St,dataStartIndex:re,dataEndIndex:de}),x)),{},{prevChildren:_,dataStartIndex:re,dataEndIndex:de})}return null}),Je(m,"renderActiveDot",function(v,x,b){var w;return y.isValidElement(v)?w=y.cloneElement(v,x):ct(v)?w=v(x):w=R.createElement(Fx,x),R.createElement(Ht,{className:"recharts-active-dot",key:b},w)});var g=y.forwardRef(function(x,b){return R.createElement(m,xu({},x,{ref:b}))});return g.displayName=m.displayName,g},lj=qE({chartName:"LineChart",GraphicalChild:$s,axisComponents:[{axisType:"xAxis",AxisComp:Ta},{axisType:"yAxis",AxisComp:Ki}],formatAxisMap:kB}),vy=qE({chartName:"BarChart",GraphicalChild:Ia,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ta},{axisType:"yAxis",AxisComp:Ki}],formatAxisMap:kB}),Tje=qE({chartName:"PieChart",GraphicalChild:no,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Vx},{axisType:"radiusAxis",AxisComp:Ux}],formatAxisMap:fge,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Oje(){const{data:e}=ku({queryKey:["dashboard-daily-stats"],queryFn:async()=>{const{data:{session:s}}=await oe.auth.getSession();if(!s)throw new Error("Not authenticated");const c=await fetch("https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/bpmn-dashboard-api/analytics/daily",{headers:{Authorization:`Bearer ${s.access_token}`}});if(!c.ok)throw new Error("Failed to fetch daily stats");return c.json()}}),{data:t}=ku({queryKey:["dashboard-cache-performance"],queryFn:async()=>{const{data:{session:s}}=await oe.auth.getSession();if(!s)throw new Error("Not authenticated");const c=await fetch("https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/bpmn-dashboard-api/analytics/cache",{headers:{Authorization:`Bearer ${s.access_token}`}});if(!c.ok)throw new Error("Failed to fetch cache performance");return c.json()}}),{data:n}=ku({queryKey:["dashboard-error-summary"],queryFn:async()=>{const{data:{session:s}}=await oe.auth.getSession();if(!s)throw new Error("Not authenticated");const c=await fetch("https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/bpmn-dashboard-api/analytics/errors",{headers:{Authorization:`Bearer ${s.access_token}`}});if(!c.ok)throw new Error("Failed to fetch error summary");return c.json()}}),r=e?[...e].reverse():[],i=t?[...t].reverse():[],a=n?n.slice(0,10):[];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Daily Request Volume"}),o.jsx(Te,{children:"Total requests and success rate over the last 30 days"})]}),o.jsx(pe,{children:o.jsx(Uo,{width:"100%",height:350,children:o.jsxs(lj,{data:r,children:[o.jsx(Vo,{strokeDasharray:"3 3"}),o.jsx(Ta,{dataKey:"date",angle:-45,textAnchor:"end",height:80,tickFormatter:s=>new Date(s).toLocaleDateString()}),o.jsx(Ki,{yAxisId:"left"}),o.jsx(Ki,{yAxisId:"right",orientation:"right"}),o.jsx(Sr,{labelFormatter:s=>new Date(s).toLocaleDateString(),formatter:(s,c)=>c==="Success Rate"?[`${s}%`,c]:[s,c]}),o.jsx(Ko,{}),o.jsx($s,{yAxisId:"left",type:"monotone",dataKey:"total_requests",stroke:"#8884d8",name:"Total Requests",strokeWidth:2}),o.jsx($s,{yAxisId:"left",type:"monotone",dataKey:"successful_requests",stroke:"#82ca9d",name:"Successful",strokeWidth:2}),o.jsx($s,{yAxisId:"right",type:"monotone",dataKey:"cache_hit_rate_percent",stroke:"#ffc658",name:"Cache Hit Rate (%)",strokeWidth:2})]})})})]}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Average Response Time"}),o.jsx(Te,{children:"Generation duration trends"})]}),o.jsx(pe,{children:o.jsx(Uo,{width:"100%",height:300,children:o.jsxs(vy,{data:r,children:[o.jsx(Vo,{strokeDasharray:"3 3"}),o.jsx(Ta,{dataKey:"date",angle:-45,textAnchor:"end",height:80,tickFormatter:s=>new Date(s).toLocaleDateString()}),o.jsx(Ki,{}),o.jsx(Sr,{labelFormatter:s=>new Date(s).toLocaleDateString(),formatter:s=>[`${s}ms`,"Avg Duration"]}),o.jsx(Ia,{dataKey:"avg_duration_ms",fill:"#8884d8",name:"Avg Duration (ms)"})]})})})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Cache Performance"}),o.jsx(Te,{children:"Cache hit vs miss rates"})]}),o.jsx(pe,{children:o.jsx(Uo,{width:"100%",height:300,children:o.jsxs(vy,{data:i,children:[o.jsx(Vo,{strokeDasharray:"3 3"}),o.jsx(Ta,{dataKey:"date",angle:-45,textAnchor:"end",height:80,tickFormatter:s=>new Date(s).toLocaleDateString()}),o.jsx(Ki,{}),o.jsx(Sr,{labelFormatter:s=>new Date(s).toLocaleDateString()}),o.jsx(Ko,{}),o.jsx(Ia,{dataKey:"cache_hits",fill:"#82ca9d",name:"Cache Hits"}),o.jsx(Ia,{dataKey:"cache_misses",fill:"#ff7c7c",name:"Cache Misses"})]})})})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Top Errors"}),o.jsx(Te,{children:"Most frequent error messages (last 30 days)"})]}),o.jsx(pe,{children:o.jsx("div",{className:"space-y-3",children:a&&a.length>0?a.map((s,c)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-destructive/5 border border-destructive/20 rounded-md",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm line-clamp-2",children:s.error_message}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Last occurred: ",new Date(s.last_occurred).toLocaleString()]})]}),o.jsxs("div",{className:"ml-4 flex flex-col items-end gap-1",children:[o.jsx("span",{className:"text-lg font-bold text-destructive",children:s.error_count}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"occurrences"})]})]},c)):o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No errors in the last 30 days"})})})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Daily Cost Trend"}),o.jsx(Te,{children:"Estimated costs over time"})]}),o.jsx(pe,{children:o.jsx(Uo,{width:"100%",height:300,children:o.jsxs(lj,{data:r,children:[o.jsx(Vo,{strokeDasharray:"3 3"}),o.jsx(Ta,{dataKey:"date",angle:-45,textAnchor:"end",height:80,tickFormatter:s=>new Date(s).toLocaleDateString()}),o.jsx(Ki,{}),o.jsx(Sr,{labelFormatter:s=>new Date(s).toLocaleDateString(),formatter:s=>[`$${s==null?void 0:s.toFixed(6)}`,"Daily Cost"]}),o.jsx($s,{type:"monotone",dataKey:"total_cost_usd",stroke:"#82ca9d",name:"Daily Cost (USD)",strokeWidth:2})]})})})]})]})}function uF(){var n,r;const{data:e,isLoading:t}=ku({queryKey:["dashboard-metrics"],queryFn:async()=>{const{data:{session:i}}=await oe.auth.getSession();if(!i)throw new Error("Not authenticated");const a=await fetch("https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/bpmn-dashboard-api/metrics/overview",{headers:{Authorization:`Bearer ${i.access_token}`}});if(!a.ok)throw new Error("Failed to fetch metrics");return a.json()},refetchInterval:3e4});return o.jsxs(o.Fragment,{children:[o.jsx(Mr,{}),o.jsxs("div",{className:"container mx-auto py-8 px-4 space-y-8 mt-16",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold",children:"BPMN Analytics"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Monitor BPMN generation requests, performance metrics, and costs"})]})}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:[o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Total Requests"}),o.jsx(ev,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t?"...":((n=e==null?void 0:e.totalRequests)==null?void 0:n.toLocaleString())||"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Success Rate"}),o.jsx(vS,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t?"...":`${(e==null?void 0:e.successRate)||0}%`}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Successful generations"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Cache Hit Rate"}),o.jsx(JW,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t?"...":`${(e==null?void 0:e.cacheHitRate)||0}%`}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Served from cache"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Avg Duration"}),o.jsx(yS,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t?"...":`${(e==null?void 0:e.avgDurationMs)||0}ms`}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Generation time"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Total Cost"}),o.jsx(Ky,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t?"...":`$${((r=e==null?void 0:e.totalCostUsd)==null?void 0:r.toFixed(4))||"0.00"}`}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Recent Errors"}),o.jsx(qy,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t?"...":(e==null?void 0:e.recentErrors)||"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 7 days"})]})]})]}),o.jsxs(BS,{defaultValue:"requests",className:"space-y-4",children:[o.jsxs(tx,{children:[o.jsx(Ls,{value:"requests",children:"Requests"}),o.jsx(Ls,{value:"analytics",children:"Charts"})]}),o.jsx(Bs,{value:"requests",className:"space-y-4",children:o.jsx(QX,{})}),o.jsx(Bs,{value:"analytics",className:"space-y-4",children:o.jsx(Oje,{})})]})]})]})}const Rje=()=>{const e=Mi();return y.useEffect(()=>{(async()=>{try{const{data:{user:n}}=await oe.auth.getUser();if(!n){$.error("Please log in"),e("/auth");return}const{data:r,error:i}=await oe.from("vision_bpmn_jobs").select("bpmn_xml").eq("user_id",n.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).single();if(i||!(r!=null&&r.bpmn_xml)){$.error("No completed diagrams found"),e("/vision-ai");return}const a=localStorage.getItem("diagramType")||"bpmn",s=a==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(s,r.bpmn_xml);const c=a==="bpmn"?"BPMN":"P&ID";$.success(`${c} diagram loaded successfully!`),e("/")}catch(n){console.error("Error loading diagram:",n),$.error("Failed to load diagram"),e("/vision-ai")}})()},[e]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading your diagram..."})]})})},$je=()=>{const e=Md();return y.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background via-muted/30 to-background",children:o.jsxs("div",{className:"text-center px-6 slide-up",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"mb-4 text-8xl md:text-9xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"404"}),o.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-primary to-accent mx-auto rounded-full"})]}),o.jsx("h2",{className:"mb-4 text-2xl md:text-3xl font-semibold",children:"Page Not Found"}),o.jsx("p",{className:"mb-8 text-lg text-muted-foreground max-w-md mx-auto",children:"The page you're looking for doesn't exist or has been moved."}),o.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl font-medium",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Return to Home"]})]})})};function LO({className:e,...t}){return o.jsx("div",{className:ye("animate-pulse rounded-md bg-muted",e),...t})}function sa(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function tc(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ije(e,t){const n=sa(e);return isNaN(t)?tc(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const dF=6048e5,Mje=864e5;let Dje={};function Qx(){return Dje}function gp(e,t){var c,l,u,d;const n=Qx(),r=(t==null?void 0:t.weekStartsOn)??((l=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=sa(e),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function yy(e){return gp(e,{weekStartsOn:1})}function hF(e){const t=sa(e),n=t.getFullYear(),r=tc(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=yy(r),a=tc(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const s=yy(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function xy(e){const t=sa(e);return t.setHours(0,0,0,0),t}function BO(e){const t=sa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Lje(e,t){const n=xy(e),r=xy(t),i=+n-BO(n),a=+r-BO(r);return Math.round((i-a)/Mje)}function Bje(e){const t=hF(e),n=tc(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),yy(n)}function Fje(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function zje(e){if(!Fje(e)&&typeof e!="number")return!1;const t=sa(e);return!isNaN(Number(t))}function Uje(e){const t=sa(e),n=tc(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Hje={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Vje=(e,t,n)=>{let r;const i=Hje[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function gw(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Gje={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Wje={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qje={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Kje={date:gw({formats:Gje,defaultWidth:"full"}),time:gw({formats:Wje,defaultWidth:"full"}),dateTime:gw({formats:qje,defaultWidth:"full"})},Yje={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Xje=(e,t,n,r)=>Yje[e];function Dh(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,c=n!=null&&n.width?String(n.width):s;i=e.formattingValues[c]||e.formattingValues[s]}else{const s=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[c]||e.values[s]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const Zje={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Jje={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qje={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eSe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tSe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nSe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rSe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},iSe={ordinalNumber:rSe,era:Dh({values:Zje,defaultWidth:"wide"}),quarter:Dh({values:Jje,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Dh({values:Qje,defaultWidth:"wide"}),day:Dh({values:eSe,defaultWidth:"wide"}),dayPeriod:Dh({values:tSe,defaultWidth:"wide",formattingValues:nSe,defaultFormattingWidth:"wide"})};function Lh(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const s=a[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?sSe(c,h=>h.test(s)):aSe(c,h=>h.test(s));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(s.length);return{value:u,rest:d}}}function aSe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function sSe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function oSe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],a=t.match(e.parsePattern);if(!a)return null;let s=e.valueCallback?e.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const c=t.slice(i.length);return{value:s,rest:c}}}const cSe=/^(\d+)(th|st|nd|rd)?/i,lSe=/\d+/i,uSe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dSe={any:[/^b/i,/^(a|c)/i]},hSe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fSe={any:[/1/i,/2/i,/3/i,/4/i]},pSe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mSe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gSe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vSe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ySe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xSe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bSe={ordinalNumber:oSe({matchPattern:cSe,parsePattern:lSe,valueCallback:e=>parseInt(e,10)}),era:Lh({matchPatterns:uSe,defaultMatchWidth:"wide",parsePatterns:dSe,defaultParseWidth:"any"}),quarter:Lh({matchPatterns:hSe,defaultMatchWidth:"wide",parsePatterns:fSe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Lh({matchPatterns:pSe,defaultMatchWidth:"wide",parsePatterns:mSe,defaultParseWidth:"any"}),day:Lh({matchPatterns:gSe,defaultMatchWidth:"wide",parsePatterns:vSe,defaultParseWidth:"any"}),dayPeriod:Lh({matchPatterns:ySe,defaultMatchWidth:"any",parsePatterns:xSe,defaultParseWidth:"any"})},wSe={code:"en-US",formatDistance:Vje,formatLong:Kje,formatRelative:Xje,localize:iSe,match:bSe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _Se(e){const t=sa(e);return Lje(t,Uje(t))+1}function jSe(e){const t=sa(e),n=+yy(t)-+Bje(t);return Math.round(n/dF)+1}function fF(e,t){var d,h,f,p;const n=sa(e),r=n.getFullYear(),i=Qx(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,s=tc(e,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const c=gp(s,t),l=tc(e,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=gp(l,t);return n.getTime()>=c.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function SSe(e,t){var c,l,u,d;const n=Qx(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=fF(e,t),a=tc(e,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),gp(a,t)}function ESe(e,t){const n=sa(e),r=+gp(n,t)-+SSe(n,t);return Math.round(r/dF)+1}function tn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const bo={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return tn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):tn(n+1,2)},d(e,t){return tn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return tn(e.getHours()%12||12,t.length)},H(e,t){return tn(e.getHours(),t.length)},m(e,t){return tn(e.getMinutes(),t.length)},s(e,t){return tn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return tn(i,t.length)}},tu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},FO={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return bo.y(e,t)},Y:function(e,t,n,r){const i=fF(e,r),a=i>0?i:1-i;if(t==="YY"){const s=a%100;return tn(s,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):tn(a,t.length)},R:function(e,t){const n=hF(e);return tn(n,t.length)},u:function(e,t){const n=e.getFullYear();return tn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return tn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return tn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return bo.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return tn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=ESe(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):tn(i,t.length)},I:function(e,t,n){const r=jSe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):tn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):bo.d(e,t)},D:function(e,t,n){const r=_Se(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):tn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return tn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return tn(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return tn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=tu.noon:r===0?i=tu.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=tu.evening:r>=12?i=tu.afternoon:r>=4?i=tu.morning:i=tu.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return bo.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):bo.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):tn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):tn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):bo.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):bo.s(e,t)},S:function(e,t){return bo.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return UO(r);case"XXXX":case"XX":return Fc(r);case"XXXXX":case"XXX":default:return Fc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return UO(r);case"xxxx":case"xx":return Fc(r);case"xxxxx":case"xxx":default:return Fc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+zO(r,":");case"OOOO":default:return"GMT"+Fc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+zO(r,":");case"zzzz":default:return"GMT"+Fc(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return tn(r,t.length)},T:function(e,t,n){const r=e.getTime();return tn(r,t.length)}};function zO(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+t+tn(a,2)}function UO(e,t){return e%60===0?(e>0?"-":"+")+tn(Math.abs(e)/60,2):Fc(e,t)}function Fc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=tn(Math.trunc(r/60),2),a=tn(r%60,2);return n+i+t+a}const HO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},pF=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},NSe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return HO(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",HO(r,t)).replace("{{time}}",pF(i,t))},PSe={p:pF,P:NSe},kSe=/^D+$/,CSe=/^Y+$/,ASe=["D","DD","YY","YYYY"];function TSe(e){return kSe.test(e)}function OSe(e){return CSe.test(e)}function RSe(e,t,n){const r=$Se(e,t,n);if(console.warn(r),ASe.includes(e))throw new RangeError(r)}function $Se(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ISe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MSe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DSe=/^'([^]*?)'?$/,LSe=/''/g,BSe=/[a-zA-Z]/;function VO(e,t,n){var d,h,f,p;const r=Qx(),i=r.locale??wSe,a=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,c=sa(e);if(!zje(c))throw new RangeError("Invalid time value");let l=t.match(MSe).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=PSe[g];return v(m,i.formatLong)}return m}).join("").match(ISe).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:FSe(m)};if(FO[g])return{isToken:!0,value:m};if(g.match(BSe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(c,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(OSe(g)||TSe(g))&&RSe(g,t,String(e));const v=FO[g[0]];return v(c,g,i.localize,u)}).join("")}function FSe(e){const t=e.match(DSe);return t?t[1].replace(LSe,"'"):e}function zSe(e,t){return Ije(e,-t)}const GO=["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--accent))","hsl(var(--muted))"],USe=()=>{const[e,t]=y.useState(!0),[n,r]=y.useState([]),[i,a]=y.useState({totalVisits:0,uniquePages:0,topCountry:"",topDevice:""});y.useEffect(()=>{s()},[]);const s=async()=>{try{const{data:f,error:p}=await oe.from("visitor_tracking").select("*").order("created_at",{ascending:!1}).limit(1e3);if(p)throw p;f&&(r(f),c(f))}catch(f){console.error("Error fetching analytics:",f)}finally{t(!1)}},c=f=>{const p=new Set(f.map(b=>b.page_path)).size,m={},g={};f.forEach(b=>{b.country&&(m[b.country]=(m[b.country]||0)+1),b.device_type&&(g[b.device_type]=(g[b.device_type]||0)+1)});const v=Object.keys(m).sort((b,w)=>m[w]-m[b])[0]||"N/A",x=Object.keys(g).sort((b,w)=>g[w]-g[b])[0]||"N/A";a({totalVisits:f.length,uniquePages:p,topCountry:v,topDevice:x})},l=()=>{const f=Array.from({length:7},(p,m)=>{const g=xy(zSe(new Date,6-m));return{date:VO(g,"MMM dd"),visits:0}});return n.forEach(p=>{const m=VO(xy(new Date(p.created_at)),"MMM dd"),g=f.find(v=>v.date===m);g&&g.visits++}),f},u=()=>{const f={};return n.forEach(p=>{f[p.page_path]=(f[p.page_path]||0)+1}),Object.entries(f).sort((p,m)=>m[1]-p[1]).slice(0,5).map(([p,m])=>({page:p,count:m}))},d=()=>{const f={};return n.forEach(p=>{const m=p.device_type||"Unknown";f[m]=(f[m]||0)+1}),Object.entries(f).map(([p,m])=>({name:p,value:m}))},h=()=>{const f={};return n.forEach(p=>{const m=p.browser||"Unknown";f[m]=(f[m]||0)+1}),Object.entries(f).sort((p,m)=>m[1]-p[1]).slice(0,5).map(([p,m])=>({name:p,value:m}))};return e?o.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[o.jsx(Mr,{}),o.jsx(Bt,{className:"flex-1",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx(LO,{className:"h-12 w-64"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((f,p)=>o.jsx(LO,{className:"h-32"},p))})]})}),o.jsx(sv,{})]}):o.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[o.jsx(Mr,{}),o.jsx(Bt,{className:"flex-1 py-8",children:o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Analytics Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Visitor tracking and website statistics"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Total Visits"}),o.jsx(Da,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:i.totalVisits}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time visits"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Unique Pages"}),o.jsx(vS,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:i.uniquePages}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pages visited"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Top Country"}),o.jsx(hS,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:i.topCountry}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Most visitors"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Top Device"}),o.jsx(p7,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:i.topDevice}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Most used"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Visits Over Time"}),o.jsx(Te,{children:"Last 7 days"})]}),o.jsx(pe,{children:o.jsx(Uo,{width:"100%",height:300,children:o.jsxs(lj,{data:l(),children:[o.jsx(Vo,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),o.jsx(Ta,{dataKey:"date",stroke:"hsl(var(--muted-foreground))"}),o.jsx(Ki,{stroke:"hsl(var(--muted-foreground))"}),o.jsx(Sr,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),o.jsx($s,{type:"monotone",dataKey:"visits",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Top Pages"}),o.jsx(Te,{children:"Most visited pages"})]}),o.jsx(pe,{children:o.jsx(Uo,{width:"100%",height:300,children:o.jsxs(vy,{data:u(),children:[o.jsx(Vo,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),o.jsx(Ta,{dataKey:"page",stroke:"hsl(var(--muted-foreground))"}),o.jsx(Ki,{stroke:"hsl(var(--muted-foreground))"}),o.jsx(Sr,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),o.jsx(Ia,{dataKey:"count",fill:"hsl(var(--primary))"})]})})})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Device Distribution"}),o.jsx(Te,{children:"Visitors by device type"})]}),o.jsx(pe,{children:o.jsx(Uo,{width:"100%",height:300,children:o.jsxs(Tje,{children:[o.jsx(no,{data:d(),cx:"50%",cy:"50%",labelLine:!1,label:({name:f,percent:p})=>`${f} ${(p*100).toFixed(0)}%`,outerRadius:80,fill:"hsl(var(--primary))",dataKey:"value",children:d().map((f,p)=>o.jsx(kx,{fill:GO[p%GO.length]},`cell-${p}`))}),o.jsx(Sr,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}})]})})})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Browser Distribution"}),o.jsx(Te,{children:"Top 5 browsers"})]}),o.jsx(pe,{children:o.jsx(Uo,{width:"100%",height:300,children:o.jsxs(vy,{data:h(),layout:"vertical",children:[o.jsx(Vo,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),o.jsx(Ta,{type:"number",stroke:"hsl(var(--muted-foreground))"}),o.jsx(Ki,{dataKey:"name",type:"category",stroke:"hsl(var(--muted-foreground))"}),o.jsx(Sr,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),o.jsx(Ia,{dataKey:"value",fill:"hsl(var(--secondary))"})]})})})]})]})]})}),o.jsx(sv,{})]})},mF=()=>o.jsxs(o.Fragment,{children:[o.jsx(GG,{}),o.jsxs(Dd,{children:[o.jsx(et,{path:"/",element:o.jsx(pa,{children:o.jsx(Qq,{})})}),o.jsx(et,{path:"/features",element:o.jsx(pa,{children:o.jsx(tK,{})})}),o.jsx(et,{path:"/vision-ai",element:o.jsx(pa,{children:o.jsx(l5,{})})}),o.jsx(et,{path:"/pricing",element:o.jsx(pa,{children:o.jsx(wK,{})})}),o.jsx(et,{path:"/contact",element:o.jsx(pa,{children:o.jsx(HK,{})})}),o.jsx(et,{path:"/auth",element:o.jsx(pa,{children:o.jsx(N5,{})})}),o.jsx(et,{path:"/admin",element:o.jsx(pa,{children:o.jsx(EY,{})})}),o.jsx(et,{path:"/admin/bpmn-dashboard",element:o.jsx(pa,{children:o.jsx(uF,{})})}),o.jsx(et,{path:"/analytics",element:o.jsx(pa,{children:o.jsx(USe,{})})}),o.jsx(et,{path:"/load-diagram",element:o.jsx(pa,{children:o.jsx(Rje,{})})}),o.jsx(et,{path:"*",element:o.jsx(pa,{children:o.jsx($je,{})})})]})]}),HSe=()=>o.jsxs("div",{children:[o.jsx("h1",{children:"BPMN Subdomain"}),o.jsx("p",{children:"This is the BPMN subdomain."})]}),vw="prossmind_free_prompts",Bh=5,eb=e=>{const[t,n]=y.useState(Bh),[r,i]=y.useState(!1);return y.useEffect(()=>{if(e)n(1/0),i(!1);else{const s=localStorage.getItem(vw),c=s?parseInt(s,10):0,l=Math.max(0,Bh-c);n(l),i(l===0)}},[e]),{remainingPrompts:t,hasUsedAllPrompts:r,usePrompt:()=>{if(e)return!0;if(r)return!1;const s=localStorage.getItem(vw),c=s?parseInt(s,10):0;if(c>=Bh)return i(!0),n(0),!1;const l=c+1;return localStorage.setItem(vw,l.toString()),n(Bh-l),l>=Bh&&i(!0),!0},isUnlimited:e}};function Jp(e){Wj.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}Me(Jp,Wj);Jp.prototype._createModdle=function(e){var t=Wj.prototype._createModdle.call(this,e);return t.ids=new YH([32,36,1]),t};Jp.prototype._collectIds=function(e,t){var n=e.$model,r=n.ids,i;r.clear();for(i in t)r.claim(i,t[i])};var VSe=["c","C"],GSe=["v","V"],WSe=["y","Y"],gF=["z","Z"];function qSe(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Zi(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function sr(e,t){return e=jt(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function KE(e){return e.shiftKey}function KSe(e){return Zi(e)&&sr(VSe,e)}function YSe(e){return Zi(e)&&sr(GSe,e)}function XSe(e){return Zi(e)&&!KE(e)&&sr(gF,e)}function ZSe(e){return Zi(e)&&(sr(WSe,e)||sr(gF,e)&&KE(e))}var tb="keyboard.keydown",JSe="keyboard.keyup",QSe=1e3,vF="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function Dr(e,t){var n=this;this._config=e=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),e.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(vF));var r=e&&e.bind!==!1;t.on("canvas.init",function(i){n._target=i.svg,r&&n.bind(),n._fire("init")})}Dr.$inject=["config.keyboard","eventBus"];Dr.prototype._keydownHandler=function(e){this._keyHandler(e,tb)};Dr.prototype._keyupHandler=function(e){this._keyHandler(e,JSe)};Dr.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var r={keyEvent:e};n=this._eventBus.fire(t||tb,r),n&&e.preventDefault()}};Dr.prototype._isEventIgnored=function(e){return!1};Dr.prototype.bind=function(e){e&&console.error("unsupported argument <node>",new Error(vF)),this.unbind(),e=this._node=this._target,ot.bind(e,"keydown",this._keydownHandler),ot.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Dr.prototype.getBinding=function(){return this._node};Dr.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),ot.unbind(e,"keydown",this._keydownHandler),ot.unbind(e,"keyup",this._keyupHandler)),this._node=null};Dr.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Dr.prototype.addListener=function(e,t,n){Qi(e)&&(n=t,t=e,e=QSe),this._eventBus.on(n||tb,e,t)};Dr.prototype.removeListener=function(e,t){this._eventBus.off(t||tb,e)};Dr.prototype.hasModifier=qSe;Dr.prototype.isCmd=Zi;Dr.prototype.isShift=KE;Dr.prototype.isKey=sr;var eEe=500;function ih(e,t){var n=this;e.on("editorActions.init",eEe,function(r){var i=r.editorActions;n.registerBindings(t,i)})}ih.$inject=["eventBus","keyboard"];ih.prototype.registerBindings=function(e,t){function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("undo",function(r){var i=r.keyEvent;if(XSe(i))return t.trigger("undo"),!0}),n("redo",function(r){var i=r.keyEvent;if(ZSe(i))return t.trigger("redo"),!0}),n("copy",function(r){var i=r.keyEvent;if(KSe(i))return t.trigger("copy"),!0}),n("paste",function(r){var i=r.keyEvent;if(YSe(i))return t.trigger("paste"),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(sr(["+","Add","="],i)&&Zi(i))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(sr(["-","Subtract"],i)&&Zi(i))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(r){var i=r.keyEvent;if(sr("0",i)&&Zi(i))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(r){var i=r.keyEvent;if(sr(["Backspace","Delete","Del"],i))return t.trigger("removeSelection"),!0})};const YE={__init__:["keyboard","keyboardBindings"],keyboard:["type",Dr],keyboardBindings:["type",ih]};var tEe={moveSpeed:50,moveSpeedAccelerated:200};function yF(e,t,n){var r=this;this._config=ee({},tEe,e||{}),t.addListener(i);function i(a){var s=a.keyEvent,c=r._config;if(t.isCmd(s)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],s)){var l=t.isShift(s)?c.moveSpeedAccelerated:c.moveSpeed,u;switch(s.key){case"ArrowLeft":case"Left":u="left";break;case"ArrowUp":case"Up":u="up";break;case"ArrowRight":case"Right":u="right";break;case"ArrowDown":case"Down":u="down";break}return r.moveCanvas({speed:l,direction:u}),!0}}this.moveCanvas=function(a){var s=0,c=0,l=a.speed,u=l/Math.min(Math.sqrt(n.viewbox().scale),1);switch(a.direction){case"left":s=u;break;case"up":c=u;break;case"right":s=-u;break;case"down":c=-u;break}n.scroll({dx:s,dy:c})}}yF.$inject=["config.keyboardMove","keyboard","canvas"];const xF={__depends__:[YE],__init__:["keyboardMove"],keyboardMove:["type",yF]};var nEe=/^djs-cursor-.*$/;function nb(e){var t=Qn(document.body);t.removeMatching(nEe),e&&t.add("djs-cursor-"+e)}function bF(){nb(null)}var rEe=5e3;function wF(e,t){t=t||"element.click";function n(){return!1}return e.once(t,rEe,n),function(){e.off(t,n)}}function yf(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Ma(e,t){return{x:e.x-t.x,y:e.y-t.y}}var iEe=15;function _F(e,t){var n;function r(c){return s(c.originalEvent)}e.on("canvas.focus.changed",function(c){c.focused?e.on("element.mousedown",500,r):e.off("element.mousedown",r)});function i(c){var l=n.start,u=n.button,d=pl(c),h=Ma(d,l);if(!n.dragging&&aEe(h)>iEe&&(n.dragging=!0,u===0&&wF(e),nb("grab")),n.dragging){var f=n.last||n.start;h=Ma(d,f),t.scroll({dx:h.x,dy:h.y}),n.last=d}c.preventDefault()}function a(c){ot.unbind(document,"mousemove",i),ot.unbind(document,"mouseup",a),n=null,bF()}function s(c){if(!Tp(c.target,".djs-draggable")){var l=c.button;if(!(l>=2||c.ctrlKey||c.shiftKey||c.altKey))return n={button:l,start:pl(c)},ot.bind(document,"mousemove",i),ot.bind(document,"mouseup",a),!0}}this.isActive=function(){return!!n}}_F.$inject=["eventBus","canvas"];function aEe(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const jF={__init__:["moveCanvas"],moveCanvas:["type",_F]};function uj(e){return Math.log(e)/Math.log(10)}function SF(e,t){var n=uj(e.min),r=uj(e.max),i=Math.abs(n)+Math.abs(r);return i/t}function sEe(e,t){return Math.max(e.min,Math.min(e.max,t))}var oEe=Math.sign||function(e){return e>=0?1:-1},XE={min:.2,max:4},EF=10,cEe=.1,lEe=.75;function ds(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=ml(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||lEe;var r=this;t.on("canvas.focus.changed",function(i){r._init(i.focused&&e.enabled!==!1)})}ds.$inject=["config.zoomScroll","eventBus","canvas"];ds.prototype.scroll=function(t){this._canvas.scroll(t)};ds.prototype.reset=function(){this._canvas.zoom("fit-viewport")};ds.prototype.zoom=function(t,n){var r=SF(XE,EF*2);this._totalDelta+=t,Math.abs(this._totalDelta)>cEe&&(this._zoom(t,n,r),this._totalDelta=0)};ds.prototype._handleWheel=function(t){if(this._canvas.isFocused()){var n=this._container;t.preventDefault();var r=t.ctrlKey||XH()&&t.metaKey,i=t.shiftKey,a=-1*this._scale,s;if(r?a*=t.deltaMode===0?.02:.32:a*=t.deltaMode===0?1:16,r){var c=n.getBoundingClientRect(),l={x:t.clientX-c.left,y:t.clientY-c.top};s=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*oEe(t.deltaY)*a,this.zoom(s,l)}else i?s={dx:a*t.deltaY,dy:0}:s={dx:a*t.deltaX,dy:a*t.deltaY},this.scroll(s)}};ds.prototype.stepZoom=function(t,n){var r=SF(XE,EF);this._zoom(t,n,r)};ds.prototype._zoom=function(e,t,n){var r=this._canvas,i=e>0?1:-1,a=uj(r.zoom()),s=Math.round(a/n)*n;s+=n*i;var c=Math.pow(10,s);r.zoom(sEe(XE,c),t)};ds.prototype.toggle=function(t){var n=this._container,r=this._handleWheel,i=this._enabled;return typeof t>"u"&&(t=!i),i!==t&&ot[t?"bind":"unbind"](n,"wheel",r,!1),this._enabled=t,t};ds.prototype._init=function(e){this.toggle(e)};const NF={__init__:["zoomScroll"],zoomScroll:["type",ds]};function vp(e){Op.call(this,e)}Me(vp,Op);vp.prototype._navigationModules=[xF,jF,NF];vp.prototype._modules=[].concat(Op.prototype._modules,vp.prototype._navigationModules);function yw(e){return e&&e[e.length-1]}function WO(e){return e.y}function qO(e){return e.x}var uEe={left:qO,center:qO,right:function(e){return e.x+e.width},top:WO,middle:WO,bottom:function(e){return e.y+e.height}};function ah(e,t){this._modeling=e,this._rules=t}ah.$inject=["modeling","rules"];ah.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",r="width";return t.indexOf(e)!==-1&&(n="y",r="height"),{axis:n,dimension:r}};ah.prototype._isType=function(e,t){return t.indexOf(e)!==-1};ah.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),r=n.axis,i=n.dimension,a={},s={},c=!1,l,u,d;function h(f,p){return Math.round((f[r]+p[r]+p[i])/2)}if(this._isType(e,["left","top"]))a[e]=t[0][r];else if(this._isType(e,["right","bottom"]))d=yw(t),a[e]=d[r]+d[i];else if(this._isType(e,["center","middle"])){if(Y(t,function(f){var p=f[r]+Math.round(f[i]/2);s[p]?s[p].elements.push(f):s[p]={elements:[f],center:p}}),l=Gs(s,function(f){return f.elements.length>1&&(c=!0),f.elements.length}),c)return a[e]=yw(l).center,a;u=t[0],t=Gs(t,function(f){return f[r]+f[i]}),d=yw(t),a[e]=h(u,d)}return a};ah.prototype.trigger=function(e,t){var n=this._modeling,r,i=Et(e,function(l){return!(l.waypoints||l.host||l.labelTarget)});if(r=this._rules.allowed("elements.align",{elements:i}),jt(r)&&(i=r),!(i.length<2||!r)){var a=uEe[t],s=Gs(i,a),c=this._alignmentPosition(t,s);n.alignElements(s,c)}};const dEe={__init__:["alignElements"],alignElements:["type",ah]},hEe=new qj;function sh(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}sh.$inject=["eventBus"];sh.prototype.schedule=function(e,t=hEe.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};sh.prototype._schedule=function(e,t){const n=fEe();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{n.resolve(e())}catch(i){n.reject(i)}}catch(i){console.error("Scheduler#_schedule execution failed",i)}}),promise:n.promise}};sh.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};sh.prototype._cancel=function(e){clearTimeout(e.executionId)};function fEe(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}const pEe={scheduler:["type",sh]};var mEe="djs-element-hidden",pg=".entry",gEe=1e3,KO=8,vEe=300;function Mn(e,t,n,r){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=r,this._current=null,this._init()}Mn.$inject=["canvas","elementRegistry","eventBus","scheduler"];Mn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,r=n.length?n.length===1?n[0]:n:null;r?e.open(r,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,r=e._current;if(r){var i=r.target,a=jt(i)?i:[i],s=a.filter(function(l){return n.includes(l)});if(s.length){e.close();var c=a.filter(function(l){return e._elementRegistry.get(l.id)});c.length&&e._updateAndOpen(c.length>1?c:c[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,r=e._current,i=jt(r.target)?r.target:[r.target];i.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};Mn.prototype._createContainer=function(){var e=gr('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};Mn.prototype.registerProvider=function(e,t){t||(t=e,e=gEe),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};Mn.prototype.getEntries=function(e){var t=this._getProviders(),n=jt(e)?"getMultiElementContextPadEntries":"getContextPadEntries",r={};return Y(t,function(i){if(Qi(i[n])){var a=i[n](e);Qi(a)?r=a(r):Y(a,function(s,c){r[c]=s})}}),r};Mn.prototype.trigger=function(e,t,n){var r=this,i,a,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();if(i=Wr(s,"data-action"),a=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){r._mouseout=r.triggerEntry(i,"hover",a,n)},vEe);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(i,e,a,n)};Mn.prototype.triggerEntry=function(e,t,n,r){if(this.isShown()){var i=this._current.target,a=this._current.entries,s=a[e];if(s){var c=s.action;if(this._eventBus.fire("contextPad.trigger",{entry:s,event:n})!==!1){if(Qi(c)){if(t==="click")return c(n,i,r)}else if(c[t])return c[t](n,i,r);n.preventDefault()}}}};Mn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};Mn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Mn.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),r;Y(t,function(i,a){var s=i.group||"default",c=gr(i.html||'<div class="entry" draggable="true"></div>'),l;Wr(c,"data-action",a),l=$n("[data-group="+wf(s)+"]",n),l||(l=gr('<div class="group"></div>'),Wr(l,"data-group",s),n.appendChild(l)),l.appendChild(c),i.className&&yEe(c,i.className),i.title&&Wr(c,"title",i.title),i.imageUrl&&(r=gr("<img>"),Wr(r,"src",i.imageUrl),r.style.width="100%",r.style.height="100%",c.appendChild(r))}),Qn(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};Mn.prototype._createHtml=function(e){var t=this,n=gr('<div class="djs-context-pad"></div>');return Aa.bind(n,pg,"click",function(r){t.trigger("click",r)}),Aa.bind(n,pg,"dragstart",function(r){t.trigger("dragstart",r)}),Aa.bind(n,pg,"mouseover",function(r){t.trigger("mouseover",r)}),Aa.bind(n,pg,"mouseout",function(r){t.trigger("mouseout",r)}),ot.bind(n,"mousedown",function(r){r.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};Mn.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&bEe(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};Mn.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};Mn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return jt(e)!==jt(n)?!1:jt(e)?e.length===n.length&&Dy(e,function(r){return n.includes(r)}):n===e};Mn.prototype.isShown=function(){return this.isOpen()&&Qn(this._current.html).has("open")};Mn.prototype.show=function(){this.isOpen()&&(Qn(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};Mn.prototype.hide=function(){this.isOpen()&&(Qn(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};Mn.prototype._getPosition=function(e){if(!jt(e)&&Jt(e)){var t=this._canvas.viewbox(),n=xEe(e),r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale;return{left:r+KO*this._canvas.zoom(),top:i}}var a=this._canvas.getContainer(),s=a.getBoundingClientRect(),c=this._getTargetBounds(e);return{left:c.right-s.left+KO*this._canvas.zoom(),top:c.top-s.top}};Mn.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(r){r in n&&(t.style[r]=n[r]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};Mn.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,r=jt(n)?n:[n],i=r.some(function(a){return t._canvas.hasMarker(a,mEe)});i?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};Mn.prototype._getTargetBounds=function(e){var t=this,n=jt(e)?e:[e],r=n.map(function(i){return t._canvas.getGraphics(i)});return r.reduce(function(i,a){const s=a.getBoundingClientRect();return i.top=Math.min(i.top,s.top),i.right=Math.max(i.right,s.right),i.bottom=Math.max(i.bottom,s.bottom),i.left=Math.min(i.left,s.left),i.x=i.left,i.y=i.top,i.width=i.right-i.left,i.height=i.bottom-i.top,i},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function yEe(e,t){var n=Qn(e);t=jt(t)?t:t.split(/\s+/g),t.forEach(function(r){n.add(r)})}function xEe(e){return e.waypoints[e.waypoints.length-1]}function bEe(e,t){return e=jt(e)?e:[e],t=jt(t)?t:[t],e.length===t.length&&Dy(e,function(n){return t.includes(n)})}const PF={__depends__:[Kj,pEe,iM],contextPad:["type",Mn]};var rb,_n,kF,qc,YO,CF,AF,TF,ZE,dj,hj,yp={},OF=[],wEe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ib=Array.isArray;function Is(e,t){for(var n in t)e[n]=t[n];return e}function JE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function RF(e,t,n){var r,i,a,s={};for(a in t)a=="key"?r=t[a]:a=="ref"?i=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?rb.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return Fg(e,s,r,i,null)}function Fg(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++kF,__i:-1,__u:0};return i==null&&_n.vnode!=null&&_n.vnode(a),a}function ab(e){return e.children}function zg(e,t){this.props=e,this.context=t}function kd(e,t){if(t==null)return e.__?kd(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?kd(e):null}function $F(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return $F(e)}}function XO(e){(!e.__d&&(e.__d=!0)&&qc.push(e)&&!by.__r++||YO!=_n.debounceRendering)&&((YO=_n.debounceRendering)||CF)(by)}function by(){for(var e,t,n,r,i,a,s,c=1;qc.length;)qc.length>c&&qc.sort(AF),e=qc.shift(),c=qc.length,e.__d&&(n=void 0,r=void 0,i=(r=(t=e).__v).__e,a=[],s=[],t.__P&&((n=Is({},r)).__v=r.__v+1,_n.vnode&&_n.vnode(n),QE(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,a,i??kd(r),!!(32&r.__u),s),n.__v=r.__v,n.__.__k[n.__i]=n,DF(a,n,s),r.__e=r.__=null,n.__e!=i&&$F(n)));by.__r=0}function IF(e,t,n,r,i,a,s,c,l,u,d){var h,f,p,m,g,v,x,b=r&&r.__k||OF,w=t.length;for(l=_Ee(n,t,b,l,w),h=0;h<w;h++)(p=n.__k[h])!=null&&(f=p.__i==-1?yp:b[p.__i]||yp,p.__i=h,v=QE(e,p,f,i,a,s,c,l,u,d),m=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&eN(f.ref,null,p),d.push(p.ref,p.__c||m,p)),g==null&&m!=null&&(g=m),(x=!!(4&p.__u))||f.__k===p.__k?l=MF(p,l,e,x):typeof p.type=="function"&&v!==void 0?l=v:m&&(l=m.nextSibling),p.__u&=-7);return n.__e=g,l}function _Ee(e,t,n,r,i){var a,s,c,l,u,d=n.length,h=d,f=0;for(e.__k=new Array(i),a=0;a<i;a++)(s=t[a])!=null&&typeof s!="boolean"&&typeof s!="function"?(l=a+f,(s=e.__k[a]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Fg(null,s,null,null,null):ib(s)?Fg(ab,{children:s},null,null,null):s.constructor==null&&s.__b>0?Fg(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,c=null,(u=s.__i=jEe(s,n,l,h))!=-1&&(h--,(c=n[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(i>d?f--:i<d&&f++),typeof s.type!="function"&&(s.__u|=4)):u!=l&&(u==l-1?f--:u==l+1?f++:(u>l?f--:f++,s.__u|=4))):e.__k[a]=null;if(h)for(a=0;a<d;a++)(c=n[a])!=null&&!(2&c.__u)&&(c.__e==r&&(r=kd(c)),BF(c,c));return r}function MF(e,t,n,r){var i,a;if(typeof e.type=="function"){for(i=e.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=e,t=MF(i[a],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=kd(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function jEe(e,t,n,r){var i,a,s,c=e.key,l=e.type,u=t[n],d=u!=null&&(2&u.__u)==0;if(u===null&&e.key==null||d&&c==u.key&&l==u.type)return n;if(r>(d?1:0)){for(i=n-1,a=n+1;i>=0||a<t.length;)if((u=t[s=i>=0?i--:a++])!=null&&!(2&u.__u)&&c==u.key&&l==u.type)return s}return-1}function ZO(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||wEe.test(t)?n:n+"px"}function mg(e,t,n,r,i){var a,s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||ZO(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||ZO(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(TF,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=ZE,e.addEventListener(t,a?hj:dj,a)):e.removeEventListener(t,a?hj:dj,a);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function JO(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ZE++;else if(t.t<n.u)return;return n(_n.event?_n.event(t):t)}}}function QE(e,t,n,r,i,a,s,c,l,u){var d,h,f,p,m,g,v,x,b,w,_,j,S,N,P,k,T,A=t.type;if(t.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),a=[c=t.__e=n.__e]),(d=_n.__b)&&d(t);e:if(typeof A=="function")try{if(x=t.props,b="prototype"in A&&A.prototype.render,w=(d=A.contextType)&&r[d.__c],_=d?w?w.props.value:d.__:r,n.__c?v=(h=t.__c=n.__c).__=h.__E:(b?t.__c=h=new A(x,_):(t.__c=h=new zg(x,_),h.constructor=A,h.render=EEe),w&&w.sub(h),h.props=x,h.state||(h.state={}),h.context=_,h.__n=r,f=h.__d=!0,h.__h=[],h._sb=[]),b&&h.__s==null&&(h.__s=h.state),b&&A.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Is({},h.__s)),Is(h.__s,A.getDerivedStateFromProps(x,h.__s))),p=h.props,m=h.state,h.__v=t,f)b&&A.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),b&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(b&&A.getDerivedStateFromProps==null&&x!==p&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(x,_),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(x,h.__s,_)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(h.props=x,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(O){O&&(O.__=t)}),j=0;j<h._sb.length;j++)h.__h.push(h._sb[j]);h._sb=[],h.__h.length&&s.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(x,h.__s,_),b&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(p,m,g)})}if(h.context=_,h.props=x,h.__P=e,h.__e=!1,S=_n.__r,N=0,b){for(h.state=h.__s,h.__d=!1,S&&S(t),d=h.render(h.props,h.state,h.context),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[]}else do h.__d=!1,S&&S(t),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++N<25);h.state=h.__s,h.getChildContext!=null&&(r=Is(Is({},r),h.getChildContext())),b&&!f&&h.getSnapshotBeforeUpdate!=null&&(g=h.getSnapshotBeforeUpdate(p,m)),k=d,d!=null&&d.type===ab&&d.key==null&&(k=LF(d.props.children)),c=IF(e,ib(k)?k:[k],t,n,r,i,a,s,c,l,u),h.base=t.__e,t.__u&=-161,h.__h.length&&s.push(h),v&&(h.__E=h.__=null)}catch(O){if(t.__v=null,l||a!=null)if(O.then){for(t.__u|=l?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else{for(T=a.length;T--;)JE(a[T]);fj(t)}else t.__e=n.__e,t.__k=n.__k,O.then||fj(t);_n.__e(O,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=SEe(n.__e,t,n,r,i,a,s,l,u);return(d=_n.diffed)&&d(t),128&t.__u?void 0:c}function fj(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(fj)}function DF(e,t,n){for(var r=0;r<n.length;r++)eN(n[r],n[++r],n[++r]);_n.__c&&_n.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(a){a.call(i)})}catch(a){_n.__e(a,i.__v)}})}function LF(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ib(e)?e.map(LF):Is({},e)}function SEe(e,t,n,r,i,a,s,c,l){var u,d,h,f,p,m,g,v=n.props,x=t.props,b=t.type;if(b=="svg"?i="http://www.w3.org/2000/svg":b=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(u=0;u<a.length;u++)if((p=a[u])&&"setAttribute"in p==!!b&&(b?p.localName==b:p.nodeType==3)){e=p,a[u]=null;break}}if(e==null){if(b==null)return document.createTextNode(x);e=document.createElementNS(i,b,x.is&&x),c&&(_n.__m&&_n.__m(t,a),c=!1),a=null}if(b==null)v===x||c&&e.data==x||(e.data=x);else{if(a=a&&rb.call(e.childNodes),v=n.props||yp,!c&&a!=null)for(v={},u=0;u<e.attributes.length;u++)v[(p=e.attributes[u]).name]=p.value;for(u in v)if(p=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")h=p;else if(!(u in x)){if(u=="value"&&"defaultValue"in x||u=="checked"&&"defaultChecked"in x)continue;mg(e,u,null,p,i)}}for(u in x)p=x[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?m=p:u=="checked"?g=p:c&&typeof p!="function"||v[u]===p||mg(e,u,p,v[u],i);if(d)c||h&&(d.__html==h.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(h&&(e.innerHTML=""),IF(t.type=="template"?e.content:e,ib(f)?f:[f],t,n,r,b=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,s,a?a[0]:n.__k&&kd(n,0),c,l),a!=null)for(u=a.length;u--;)JE(a[u]);c||(u="value",b=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[u]||b=="progress"&&!m||b=="option"&&m!=v[u])&&mg(e,u,m,v[u],i),u="checked",g!=null&&g!=e[u]&&mg(e,u,g,v[u],i))}return e}function eN(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){_n.__e(i,n)}}function BF(e,t,n){var r,i;if(_n.unmount&&_n.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||eN(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){_n.__e(a,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&BF(r[i],t,n||typeof e.type!="function");n||JE(e.__e),e.__c=e.__=e.__e=void 0}function EEe(e,t,n){return this.constructor(e,n)}function FF(e,t,n){var r,i,a,s;t==document&&(t=document.documentElement),_n.__&&_n.__(e,t),i=(r=!1)?null:t.__k,a=[],s=[],QE(t,e=t.__k=RF(ab,null,[e]),i||yp,yp,t.namespaceURI,i?null:t.firstChild?rb.call(t.childNodes):null,a,i?i.__e:t.firstChild,r,s),DF(a,e,s)}rb=OF.slice,_n={__e:function(e,t,n,r){for(var i,a,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(c){e=c}throw e}},kF=0,zg.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Is({},this.state),typeof e=="function"&&(e=e(Is({},n),this.props)),e&&Is(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),XO(this))},zg.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),XO(this))},zg.prototype.render=ab,qc=[],CF=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,AF=function(e,t){return e.__v.__b-t.__v.__b},by.__r=0,TF=/(PointerCapture)$|Capture$/i,ZE=0,dj=JO(!1),hj=JO(!0);var zF=function(e,t,n,r){var i;t[0]=0;for(var a=1;a<t.length;a++){var s=t[a++],c=t[a]?(t[0]|=s?1:2,n[t[a++]]):t[++a];s===3?r[0]=c:s===4?r[1]=Object.assign(r[1]||{},c):s===5?(r[1]=r[1]||{})[t[++a]]=c:s===6?r[1][t[++a]]+=c+"":s?(i=e.apply(c,zF(e,c,n,["",null])),r.push(i),c[0]?t[0]|=2:(t[a-2]=0,t[a]=i)):r.push(c)}return r},QO=new Map;function NEe(e){var t=QO.get(this);return t||(t=new Map,QO.set(this,t)),(t=zF(this,t.get(e)||(t.set(e,t=function(n){for(var r,i,a=1,s="",c="",l=[0],u=function(f){a===1&&(f||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,f,s):a===3&&(f||s)?(l.push(3,f,s),a=2):a===2&&s==="..."&&f?l.push(4,f,0):a===2&&s&&!f?l.push(5,0,!0,s):a>=5&&((s||!f&&a===5)&&(l.push(a,0,s,i),a=6),f&&(l.push(a,f,0,i),a=6)),s=""},d=0;d<n.length;d++){d&&(a===1&&u(),u(d));for(var h=0;h<n[d].length;h++)r=n[d][h],a===1?r==="<"?(u(),l=[l],a=3):s+=r:a===4?s==="--"&&r===">"?(a=1,s=""):s=r+s[0]:c?r===c?c="":s+=r:r==='"'||r==="'"?c=r:r===">"?(u(),a=1):a&&(r==="="?(a=5,i=s,s=""):r==="/"&&(a<5||n[d][h+1]===">")?(u(),a===3&&(l=l[0]),a=l,(l=l[0]).push(2,0,a),a=0):r===" "||r==="	"||r===`
`||r==="\r"?(u(),a=2):s+=r),a===3&&s==="!--"&&(a=4,l=l[0])}return u(),l}(e)),t),arguments,[])).length>1?t:t[0]}var Cn=NEe.bind(RF),Cd,On,xw,eR,xp=0,UF=[],Vn=_n,tR=Vn.__b,nR=Vn.__r,rR=Vn.diffed,iR=Vn.__c,aR=Vn.unmount,sR=Vn.__;function sb(e,t){Vn.__h&&Vn.__h(On,e,xp||t),xp=0;var n=On.__H||(On.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function bw(e){return xp=1,PEe(VF,e)}function PEe(e,t,n){var r=sb(Cd++,2);if(r.t=e,!r.__c&&(r.__=[VF(void 0,t),function(c){var l=r.__N?r.__N[0]:r.__[0],u=r.t(l,c);l!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=On,!On.__f)){var i=function(c,l,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!a||a.call(this,c,l,u);var h=r.__c.props!==c;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(h=!0)}}),a&&a.call(this,c,l,u)||h};On.__f=!0;var a=On.shouldComponentUpdate,s=On.componentWillUpdate;On.componentWillUpdate=function(c,l,u){if(this.__e){var d=a;a=void 0,i(c,l,u),a=d}s&&s.call(this,c,l,u)},On.shouldComponentUpdate=i}return r.__N||r.__}function pj(e,t){var n=sb(Cd++,3);!Vn.__s&&tN(n.__H,t)&&(n.__=e,n.u=t,On.__H.__h.push(n))}function mj(e,t){var n=sb(Cd++,4);!Vn.__s&&tN(n.__H,t)&&(n.__=e,n.u=t,On.__h.push(n))}function HF(e){return xp=5,Ou(function(){return{current:e}},[])}function Ou(e,t){var n=sb(Cd++,7);return tN(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Fh(e,t){return xp=8,Ou(function(){return e},t)}function kEe(){for(var e;e=UF.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ug),e.__H.__h.forEach(gj),e.__H.__h=[]}catch(t){e.__H.__h=[],Vn.__e(t,e.__v)}}Vn.__b=function(e){On=null,tR&&tR(e)},Vn.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),sR&&sR(e,t)},Vn.__r=function(e){nR&&nR(e),Cd=0;var t=(On=e.__c).__H;t&&(xw===On?(t.__h=[],On.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Ug),t.__h.forEach(gj),t.__h=[],Cd=0)),xw=On},Vn.diffed=function(e){rR&&rR(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(UF.push(t)!==1&&eR===Vn.requestAnimationFrame||((eR=Vn.requestAnimationFrame)||CEe)(kEe)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),xw=On=null},Vn.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ug),n.__h=n.__h.filter(function(r){return!r.__||gj(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],Vn.__e(r,n.__v)}}),iR&&iR(e,t)},Vn.unmount=function(e){aR&&aR(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ug(r)}catch(i){t=i}}),n.__H=void 0,t&&Vn.__e(t,n.__v))};var oR=typeof requestAnimationFrame=="function";function CEe(e){var t,n=function(){clearTimeout(r),oR&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);oR&&(t=requestAnimationFrame(n))}function Ug(e){var t=On,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),On=t}function gj(e){var t=On;e.__c=e.__(),On=t}function tN(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function VF(e,t){return typeof t=="function"?t(e):t}function AEe(e){const{headerEntries:t,onSelect:n,selectedEntry:r,setSelectedEntry:i,title:a}=e,s=Ou(()=>TEe(t),[t]),c=u=>u.action&&!u.disabled,l=(u,d)=>{if(c(d))return n(u,d)};return Cn`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${a}>${a}</h3>
      ${s.map(u=>Cn`
        <ul key=${u.id} class="djs-popup-header-group" data-header-group=${u.id}>

          ${u.entries.map(d=>Cn`
            <li key=${d.id}>
              <${c(d)?"button":"span"}
                class=${OEe(d,d===r)}
                onClick=${h=>l(h,d)}
                title=${d.title||d.label}
                data-id=${d.id}
                aria-disabled=${d.disabled||void 0}
                onMouseEnter=${()=>c(d)&&i(d)}
                onMouseLeave=${()=>c(d)&&i(null)}
                onFocus=${()=>c(d)&&i(d)}
                onBlur=${()=>c(d)&&i(null)}
              >
                ${d.imageUrl&&Cn`<img class="djs-popup-entry-icon" src=${d.imageUrl} alt="" />`||d.imageHtml&&Cn`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:d.imageHtml}} />`}
                ${d.label?Cn`
                  <span class="djs-popup-label">${d.label}</span>
                `:null}
              </${d.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function TEe(e){return e.reduce((t,n)=>{const r=n.group||"default",i=t.find(a=>a.id===r);return i?i.entries.push(n):t.push({id:r,entries:[n]}),t},[])}function OEe(e,t){return ut("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function REe(e){const{entry:t,selected:n,onMouseEnter:r,onMouseLeave:i,onAction:a}=e,s=(c,l)=>{if(!t.disabled)return a(c,t,l)};return Cn`
    <li
      class=${ut("entry",{selected:n,disabled:t.disabled})}
      data-id=${t.id}
      title=${t.title||t.label}
      aria-disabled=${t.disabled||void 0}
      tabIndex="0"
      onClick=${s}
      onFocus=${r}
      onBlur=${i}
      onMouseEnter=${r}
      onMouseLeave=${i}
      onDragStart=${c=>s(c,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${ut("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&Cn`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&Cn`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?Cn`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&Cn`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&Cn`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${c=>c.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function $Ee(e){const{selectedEntry:t,setSelectedEntry:n,groupedEntries:r,...i}=e,a=HF();return mj(()=>{const s=a.current;if(!s)return;const c=s.querySelector(".selected");c&&IEe(c)},[t]),Cn`
    <div class="djs-popup-results" ref=${a}>
      ${r.map(s=>Cn`
        ${s.name&&Cn`
          <div key=${s.id} class="entry-header" title=${s.name}>
            ${s.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${s.id}>
          ${s.entries.map(c=>Cn`
            <${REe}
              key=${c.id}
              entry=${c}
              selected=${c===t}
              onMouseEnter=${()=>n(c)}
              onMouseLeave=${()=>n(null)}
              ...${i}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function IEe(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function MEe(e){const{onClose:t,onSelect:n,className:r,headerEntries:i,position:a,title:s,width:c,scale:l,search:u,emptyPlaceholder:d,searchFn:h,entries:f,onOpened:p,onClosed:m}=e,g=Ou(()=>Ei(u)?f.length>5:!1,[u,f]),[v,x]=bw(""),b=Fh((D,L)=>{if(!g)return D;if(!L.trim())return D.filter(({rank:H=0})=>H>=0);const G=D.filter(({searchable:H})=>H!==!1);return h(G,L,{keys:["label","search","description"]}).map(({item:H})=>H)},[g]),[w,_]=bw(b(f,v)),[j,S]=bw(w[0]),N=Ou(()=>BEe(w),[w]),P=Fh(D=>{S(D[0]),_(D)},[_,S]);pj(()=>{P(b(f,v))},[v,f]);const k=Fh(D=>{const L=LEe(N);let H=L.indexOf(j)+D;H<0&&(H=L.length-1),H>=L.length&&(H=0),S(L[H])},[N,j,S]),T=Fh(D=>{if(D.key==="Enter"&&j)return j.disabled?void 0:n(D,j);if(D.key==="ArrowUp")return k(-1),D.preventDefault();if(D.key==="ArrowDown")return k(1),D.preventDefault()},[n,j,k]),A=Fh(D=>{aM(D.target,"input")&&x(()=>D.target.value)},[x]);pj(()=>(p(),()=>{m()}),[]);const O=Ou(()=>s||i.length>0,[s,i]);return Cn`
    <${cR}
      onClose=${t}
      onKeyup=${A}
      onKeydown=${T}
      className=${r}
      position=${a}
      width=${c}
      scale=${l}
    >
      ${O&&Cn`
        <${AEe}
          headerEntries=${i}
          onSelect=${n}
          selectedEntry=${j}
          setSelectedEntry=${S}
          title=${s}
        />
      `}
      ${f.length>0&&Cn`
        <div class="djs-popup-body">

          ${g&&Cn`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${s}" />
          </div>
          `}

          <${$Ee}
            groupedEntries=${N}
            selectedEntry=${j}
            setSelectedEntry=${S}
            onAction=${n}
          />
        </div>
      `}
    ${d&&w.length===0&&Cn`
      <div class="djs-popup-no-results">${Qi(d)?d(v):d}</div>
    `}
    </${cR}>
  `}function cR(e){const{onClose:t,onKeydown:n,onKeyup:r,className:i,children:a,position:s}=e,c=HF();return mj(()=>{if(typeof s!="function")return;const l=c.current,u=s(l);l.style.left=`${u.x}px`,l.style.top=`${u.y}px`},[c.current,s]),mj(()=>{const l=c.current;if(!l)return;(l.querySelector("input")||l).focus()},[]),pj(()=>{const l=d=>{if(d.key==="Escape")return d.preventDefault(),t()},u=d=>{if(!Tp(d.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",l),document.body.addEventListener("click",u),()=>{document.documentElement.removeEventListener("keydown",l),document.body.removeEventListener("click",u)}},[]),Cn`
    <div
      class=${ut("djs-popup",i)}
      style=${DEe(e)}
      onKeydown=${n}
      onKeyup=${r}
      ref=${c}
      tabIndex="-1"
    >
      ${a}
    </div>
  `}function DEe(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}function LEe(e){const t=[];return e.forEach(n=>{n.entries.forEach(r=>{t.push(r)})}),t}function BEe(e){const t=[],n=a=>t.find(s=>a.id===s.id),r=a=>!!n(a),i=a=>typeof a=="string"?{id:a}:a;return e.forEach(a=>{const s=a.group?i(a.group):{id:"default"};r(s)?n(s).entries.push(a):t.push({...s,entries:[a]})}),t}var FEe="data-id",GF=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],zEe=1e3;function jn(e,t,n,r){this._eventBus=t,this._canvas=n,this._search=r,this._current=null;var i=Ei(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:i},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",a=>{const s=this.isOpen()&&this._current.target;a.element===s&&this.refresh()})}jn.$inject=["config.popupMenu","eventBus","canvas","search"];jn.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:r,emptyPlaceholder:i,options:a}=this._current,s=Object.entries(n).map(([f,p])=>({id:f,...p})),c=Object.entries(r).map(([f,p])=>({id:f,...p})),l=e&&(f=>this._ensureVisible(f,e)),u=this._updateScale(this._current.container);FF(Cn`
      <${MEe}
        onClose=${f=>this.close(f)}
        onSelect=${(f,p,m)=>this.trigger(f,p,m)}
        position=${l}
        className=${t}
        entries=${s}
        headerEntries=${c}
        emptyPlaceholder=${i}
        scale=${u}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        searchFn=${this._search}
        ...${{...a}}
      />
    `,this._current.container)};jn.prototype.open=function(e,t,n,r){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:i,headerEntries:a,emptyPlaceholder:s}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:i,headerEntries:a,emptyPlaceholder:s,container:this._createContainer({provider:t}),options:r},this._emit("open"),this._bindAutoClose(),this._render()};jn.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:r,emptyPlaceholder:i}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:r,emptyPlaceholder:i},this._emit("refresh"),this._render()};jn.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const r=this._getEntries(e,n),i=this._getHeaderEntries(e,n),a=this._getEmptyPlaceholder(n);return{entries:r,headerEntries:i,emptyPlaceholder:a,empty:!(Object.keys(r).length||Object.keys(i).length)}};jn.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._canvas.restoreFocus(),this._current=null)};jn.prototype.reset=function(){const e=this._current.container;FF(null,e),Wu(e)};jn.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};jn.prototype._onOpened=function(){this._emit("opened")};jn.prototype._onClosed=function(){this._emit("closed")};jn.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const r=gr(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(r),r};jn.prototype._bindAutoClose=function(){this._eventBus.once(GF,this.close,this)};jn.prototype._unbindAutoClose=function(){this._eventBus.off(GF,this.close,this)};jn.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,r,i=e;return t!==!0&&(t===!1?(n=1,r=1):(n=t.min,r=t.max),Ei(n)&&e<n&&(i=n),Ei(r)&&e>r&&(i=r)),i};jn.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect(),i={},a=t.x,s=t.y;return t.x+r.width>n.width&&(i.x=!0),t.y+r.height>n.height&&(i.y=!0),i.x&&i.y?(a=t.x-r.width,s=t.y-r.height):i.x?(a=t.x-r.width,s=t.y):i.y&&t.y<r.height?(a=t.x,s=10):i.y&&(a=t.x,s=t.y-r.height),t.y<n.top&&(s=t.y+r.height),{x:a,y:s}};jn.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};jn.prototype.registerProvider=function(e,t,n){n||(n=t,t=zEe),this._eventBus.on("popupMenu.getProviders."+e,t,function(r){r.providers.push(n)})};jn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};jn.prototype._getEntries=function(e,t){var n={};return Y(t,function(r){if(!r.getPopupMenuEntries){Y(r.getEntries(e),function(a){var s=a.id;if(!s)throw new Error("entry ID is missing");n[s]=Js(a,["id"])});return}var i=r.getPopupMenuEntries(e);Qi(i)?n=i(n):Y(i,function(a,s){n[s]=a})}),n};jn.prototype._getHeaderEntries=function(e,t){var n={};return Y(t,function(r){if(!r.getPopupMenuHeaderEntries){if(!r.getHeaderEntries)return;Y(r.getHeaderEntries(e),function(a){var s=a.id;if(!s)throw new Error("entry ID is missing");n[s]=Js(a,["id"])});return}var i=r.getPopupMenuHeaderEntries(e);Qi(i)?n=i(n):Y(i,function(a,s){n[s]=a})}),n};jn.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>Qi(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};jn.prototype.isOpen=function(){return!!this._current};jn.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let i=Tp(e.delegateTarget||e.target,".entry",!0),a=Wr(i,FEe);t={id:a,...this._getEntry(a)}}const r=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(Qi(r)){if(n==="click")return r(e,t)}else if(r[n])return r[n](e,t)}};jn.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};function UEe(e,t,n){const{keys:r}=n;if(t=t.trim().toLowerCase(),!t)throw new Error("<pattern> must not be empty");const i=t.trim().toLowerCase().split(/\s+/);return e.flatMap(a=>{const s=HEe(a,i,r);return s?{item:a,tokens:s}:[]}).sort(VEe(r))}function HEe(e,t,n){const{matchedWords:r,tokens:i}=n.reduce((a,s)=>{const c=e[s],{tokens:l,matchedWords:u}=jt(c)?c.reduce((d,h)=>{const{tokens:f,matchedWords:p}=dR(h,t);return{tokens:[...d.tokens,f],matchedWords:{...d.matchedWords,...p}}},{matchedWords:{},tokens:[]}):dR(c,t);return{tokens:{...a.tokens,[s]:l},matchedWords:{...a.matchedWords,...u}}},{matchedWords:{},tokens:{}});return Object.keys(r).length!==t.length?null:i}function VEe(e){return(t,n)=>{let r=0,i=1;for(const a of e){const s=GEe(t.tokens[a],n.tokens[a]);if(s!==0){r+=s*i,i*=.9;continue}const c=WEe(t.item[a],n.item[a]);if(c!==0){r+=c*i,i*=.9;continue}}return r}}function GEe(e,t){return lR(t)-lR(e)}function lR(e){return e.reduce((t,n)=>t+WF(n),0)}function WF(e){if(jt(e))return Math.max(...e.map(WF));const t=Math.log(e.value.length);return e.match?(e.start?e.end?131.9:7.87:e.wordStart?2.19:1)*t:-.07*t}function uR(e=""){return jt(e)?e.join(", "):e}function WEe(e,t){return uR(e).localeCompare(uR(t))}function dR(e,t){if(!e)return{tokens:[],matchedWords:{}};const n=[],r={},i=t.map(qEe),a=[`(?<all>${i.join("\\s+")})`,...i].join("|"),s=new RegExp(a,"ig");let c,l=0;for(;c=s.exec(e);){const[u]=c,d=c.index,h=c.index+u.length,f=d===0,p=h===e.length,m=!!c.groups.all,g=f||/\s/.test(e.charAt(d-1)),v=p||/\s/.test(e.charAt(h));c.index>l&&n.push({value:e.slice(l,c.index),index:l}),n.push({value:u,index:c.index,match:!0,wordStart:g,wordEnd:v,start:f,end:p,all:m});const x=m?t:[u];for(const b of x)r[b.toLowerCase()]=!0;l=c.index+u.length}return l<e.length&&n.push({value:e.slice(l),index:l}),{tokens:n,matchedWords:r}}function qEe(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}const qF={search:["value",UEe]},nN={__depends__:[qF],__init__:["popupMenu"],popupMenu:["type",jn]};var KF={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},KEe=900;function oh(e,t,n,r){e.registerProvider(KEe,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=r}oh.$inject=["contextPad","popupMenu","translate","canvas"];oh.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&ee(t,this._getEntries(e)),t};oh.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};oh.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${KF.align}</div>`,action:{click:function(t,n){var r=e._getMenuPosition(n);ee(r,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",r)}}}}};oh.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,r=n.getBoundingClientRect(),i={x:r.left,y:r.bottom+t};return i};var YEe=["left","center","right","top","middle","bottom"];function Qp(e,t,n,r){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",this)}Qp.$inject=["popupMenu","alignElements","translate","rules"];Qp.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&ee(t,this._getEntries(e)),t};Qp.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Qp.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,r=this._popupMenu,i={};return Y(YEe,function(a){i["align-elements-"+a]={group:"align",title:n("Align elements "+a),className:"bjs-align-elements-menu-entry",imageHtml:KF[a],action:function(){t.trigger(e,a),r.close()}}}),i};function oa(e){me.call(this,e),this.init()}oa.$inject=["eventBus"];Me(oa,me);oa.prototype.addRule=function(e,t,n){var r=this;typeof e=="string"&&(e=[e]),e.forEach(function(i){r.canExecute(i,t,function(a,s,c){return n(a)},!0)})};oa.prototype.init=function(){};function ob(e){oa.call(this,e)}ob.$inject=["eventBus"];Me(ob,oa);ob.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=Et(t,function(r){return!(r.waypoints||r.host||r.labelTarget)});return n=Ly(n),n.length<2?!1:n})};const XEe={__depends__:[dEe,PF,nN],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",oh],alignElementsMenuProvider:["type",Qp],bpmnAlignElements:["type",ob]};var ZEe=10,YF=50,JEe=250;function rN(e,t,n,r){for(var i;i=QEe(e,n,t);)n=r(t,n,i);return n}function iN(e){return function(t,n,r){var i={x:n.x,y:n.y};return["x","y"].forEach(function(a){var s=e[a];if(s){var c=a==="x"?"width":"height",l=s.margin,u=s.minDistance;l<0?i[a]=Math.min(r[a]+l-t[c]/2,n[a]-u+l):i[a]=Math.max(r[a]+r[c]+l+t[c]/2,n[a]+u+l)}}),i}}function QEe(e,t,n){var r={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},i=tNe(e);return gn(i,function(a){if(a===n)return!1;var s=Nr(a,r,ZEe);return s==="intersect"})}function eNe(e,t){t||(t={});function n(m){return m.source===e?1:-1}var r=t.defaultDistance||YF,i=t.direction||"e",a=t.filter,s=t.getWeight||n,c=t.maxDistance||JEe,l=t.reference||"start";a||(a=iNe);function u(m,g){return i==="n"?l==="start"?He(m).top-He(g).bottom:l==="center"?He(m).top-tt(g).y:He(m).top-He(g).top:i==="w"?l==="start"?He(m).left-He(g).right:l==="center"?He(m).left-tt(g).x:He(m).left-He(g).left:i==="s"?l==="start"?He(g).top-He(m).bottom:l==="center"?tt(g).y-He(m).bottom:He(g).bottom-He(m).bottom:l==="start"?He(g).left-He(m).right:l==="center"?tt(g).x-He(m).right:He(g).right-He(m).right}var d=e.incoming.filter(a).map(function(m){var g=s(m),v=g<0?u(m.source,e):u(e,m.source);return{id:m.source.id,distance:v,weight:g}}),h=e.outgoing.filter(a).map(function(m){var g=s(m),v=g>0?u(e,m.target):u(m.target,e);return{id:m.target.id,distance:v,weight:g}}),f=d.concat(h).reduce(function(m,g){return m[g.id+"__weight_"+g.weight]=g,m},{}),p=rc(f,function(m,g){var v=g.distance,x=g.weight;return v<0||v>c||(m[String(v)]||(m[String(v)]=0),m[String(v)]+=1*x,(!m.distance||m[m.distance]<m[String(v)])&&(m.distance=v)),m},{});return p.distance||r}function tNe(e){var t=ww(e);return e.host&&(t=t.concat(ww(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,r){return n.concat(ww(r))},[]))),t}function ww(e){return rNe(e).concat(nNe(e))}function nNe(e){return e.incoming.map(function(t){return t.source})}function rNe(e){return e.outgoing.map(function(t){return t.target})}function iNe(){return!0}var aNe=100;function XF(e,t,n){e.on("autoPlace",aNe,function(r){var i=r.shape,a=r.source;return sNe(a,i)}),e.on("autoPlace.end",function(r){n.scrollToElement(r.shape)}),this.append=function(r,i,a){e.fire("autoPlace.start",{source:r,shape:i});var s=e.fire("autoPlace",{source:r,shape:i}),c=t.appendShape(r,i,s,r.parent,a);return e.fire("autoPlace.end",{source:r,shape:c}),c}}XF.$inject=["eventBus","modeling","canvas"];function sNe(e,t,n){n||(n={});var r=n.defaultDistance||YF,i=tt(e),a=He(e);return{x:a.right+r+t.width/2,y:i.y}}function ZF(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}ZF.$inject=["eventBus","selection"];const oNe={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",XF],autoPlaceSelectionBehavior:["type",ZF]};function Ad(e,t){for(By(t)&&(t=[t]);e=e.parent;)if(mt(e,t))return e;return null}function JF(e,t){var n=Ad(e,"bpmn:Process");if(n)return!0;var r=["bpmn:Participant","bpmn:Lane"];if(n=Ad(e,r),n)return vr(n);if(mt(e,r))return vr(e);var i;for(i=Ce(e);i&&!C(i,"bpmn:Process");i=i.$parent);if(!t)return!0;var a=t.find(function(s){var c=Ce(s);return c&&c.get("processRef")===i});return a?vr(a):!0}function QF(e,t,n){var r=JF(e,n);if(C(t,"bpmn:TextAnnotation"))return lNe(e,t,r);if(mt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return uNe(e,t,r);if(C(t,"bpmn:FlowNode"))return cNe(e,t,r)}function cNe(e,t,n){var r=He(e),i=tt(e),a=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},s=eNe(e,{filter:function(p){return C(p,"bpmn:SequenceFlow")},direction:a.directionHint}),c=30,l=a.minDistance,u=a.baseOrientation;C(e,"bpmn:BoundaryEvent")&&(u=Nr(e,e.host,-25),u.indexOf(a.boundaryOrientation)!==-1&&(c*=-1));var d=n?{x:r.right+s+t.width/2,y:i.y+hR(u,l,a)}:{x:i.x+hR(u,l,a),y:r.bottom+s+t.height/2},h={margin:c,minDistance:l},f=n?{y:h}:{x:h};return rN(e,t,d,iN(f))}function hR(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function lNe(e,t,n){var r=He(e),i=n?{x:r.right+t.width/2,y:r.top-50-t.height/2}:{x:r.right+50+t.width/2,y:r.bottom+t.height/2};Jt(e)&&(i=tt(e),n?(i.x+=100,i.y-=50):(i.x+=100,i.y+=50));var a={margin:n?-30:30,minDistance:20},s=n?{y:a}:{x:a};return rN(e,t,i,iN(s))}function uNe(e,t,n){var r=He(e),i=n?{x:r.right-10+t.width/2,y:r.bottom+40+t.width/2}:{x:r.left-40-t.width/2,y:r.bottom-10+t.height/2},a={margin:30,minDistance:30},s=n?{x:a}:{y:a};return rN(e,t,i,iN(s))}function e6(e,t){e.on("autoPlace",function(n){var r=n.shape,i=n.source;return QF(i,r,t)})}e6.$inject=["eventBus","elementRegistry"];const aN={__depends__:[oNe],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",e6]};function ro(e,t,n,r){me.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=r;var i=this;this.postExecuted(["shape.create"],function(a){var s=a.context,c=s.hints||{},l=s.shape,u=s.parent||s.newParent;c.autoResize!==!1&&i._expand([l],u)}),this.postExecuted(["elements.move"],function(a){var s=a.context,c=Yj(Fy(s.closure.topLevel)),l=s.hints,u=l?l.autoResize:!0;if(u!==!1){var d=zy(c,function(h){return h.parent.id});Y(d,function(h,f){jt(u)&&(h=h.filter(function(p){return gn(u,Ms({id:p.id}))})),i._expand(h,f)})}}),this.postExecuted(["shape.toggleCollapse"],function(a){var s=a.context,c=s.hints,l=s.shape;c&&c.autoResize===!1||l.collapsed||i._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(a){var s=a.context,c=s.hints,l=s.shape,u=l.parent;c&&c.autoResize===!1||u&&i._expand([l],u)})}ro.$inject=["eventBus","elementRegistry","modeling","rules"];Me(ro,me);ro.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),r=this.getPadding(t),i=He(qr(e)),a=He(t),s={};return i.top-a.top<r.top&&(s.top=i.top-n.top),i.left-a.left<r.left&&(s.left=i.left-n.left),a.right-i.right<r.right&&(s.right=i.right+n.right),a.bottom-i.bottom<r.bottom&&(s.bottom=i.bottom+n.bottom),Xj(ee({},a,s))};ro.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var r=this._getOptimalBounds(e,t);if(dNe(r,t)){var i=hNe(is(t,["x","y","width","height"]),r);this.resize(t,r,{autoResize:i});var a=t.parent;a&&this._expand([t],a)}}};ro.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};ro.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};ro.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function dNe(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function hNe(e,t){var n="";return e=He(e),t=He(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function cb(e){e.invoke(ro,this)}cb.$inject=["injector"];Me(cb,ro);cb.prototype.resize=function(e,t,n){C(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function em(e){oa.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}em.$inject=["eventBus"];Me(em,oa);em.prototype.canResize=function(e,t){return!1};function lb(e,t){em.call(this,e),this._modeling=t}Me(lb,em);lb.$inject=["eventBus","modeling"];lb.prototype.canResize=function(e,t){if(C(t.di,"bpmndi:BPMNPlane")||!C(t,"bpmn:Participant")&&!C(t,"bpmn:Lane")&&!C(t,"bpmn:SubProcess"))return!1;var n=!0;return Y(e,function(r){if(C(r,"bpmn:Lane")||kt(r)){n=!1;return}}),n};const fNe={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",cb],bpmnAutoResizeProvider:["type",lb]};var fR=1500;function t6(e,t,n){var r=this,i=n.get("dragging",!1);function a(s){if(!s.hover){var c=s.originalEvent,l=r._findTargetGfx(c),u=l&&e.get(l);l&&u&&(s.stopPropagation(),i.hover({element:u,gfx:l}),i.move(c))}}i&&t.on("drag.start",function(s){t.once("drag.move",fR,function(c){a(c)})}),function(){var s,c;t.on("element.hover",function(l){s=l.gfx,c=l.element}),t.on("element.hover",fR,function(l){c&&t.fire("element.out",{element:c,gfx:s})}),t.on("element.out",function(){s=null,c=null})}(),this._findTargetGfx=function(s){var c,l;if(s instanceof MouseEvent)return c=pl(s),l=document.elementFromPoint(c.x,c.y),pNe(l)}}t6.$inject=["elementRegistry","eventBus","injector"];function pNe(e){return Tp(e,"svg, .djs-element",!0)}const mNe={__init__:["hoverFix"],hoverFix:["type",t6]};var nu=Math.round,pR="djs-drag-active";function Oc(e){e.preventDefault()}function gNe(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function vNe(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function n6(e,t,n,r){var i={threshold:5,trapClick:!0},a;function s(w){var _=t.viewbox(),j=t._container.getBoundingClientRect();return{x:_.x+(w.x-j.left)/_.scale,y:_.y+(w.y-j.top)/_.scale}}function c(w,_){_=_||a;var j=e.createEvent(ee({},_.payload,_.data,{isTouch:_.isTouch}));return e.fire("drag."+w,j)===!1?!1:e.fire(_.prefix+"."+w,j)}function l(w){var _=w.filter(function(j){return r.get(j.id)});_.length&&n.select(_)}function u(w,_){var j=a.payload,S=a.displacement,N=a.globalStart,P=pl(w),k=Ma(P,N),T=a.localStart,A=s(P),O=Ma(A,T);if(!a.active&&(_||vNe(k)>a.threshold)){if(ee(j,{x:nu(T.x+S.x),y:nu(T.y+S.y),dx:0,dy:0},{originalEvent:w}),c("start")===!1)return v();a.active=!0,a.keepSelection||(j.previousSelection=n.get(),n.select(null)),a.cursor&&nb(a.cursor),t.addMarker(t.getRootElement(),pR)}x0(w),a.active&&(ee(j,{x:nu(A.x+S.x),y:nu(A.y+S.y),dx:nu(O.x),dy:nu(O.y)},{originalEvent:w}),c("move"))}function d(w){var _,j=!0;a.active&&(w&&(a.payload.originalEvent=w,x0(w)),j=c("end")),j===!1&&c("rejected"),_=x(j!==!0),c("ended",_)}function h(w){sr("Escape",w)&&(Oc(w),v())}function f(w){var _;a.active&&(_=wF(e),setTimeout(_,400),Oc(w)),d(w)}function p(w){u(w)}function m(w){var _=a.payload;_.hoverGfx=w.gfx,_.hover=w.element,c("hover")}function g(w){c("out");var _=a.payload;_.hoverGfx=null,_.hover=null}function v(w){var _;if(a){var j=a.active;j&&c("cancel"),_=x(w),j&&c("canceled",_)}}function x(w){var _,j;c("cleanup"),bF(),a.trapClick?j=f:j=d,ot.unbind(document,"mousemove",u),ot.unbind(document,"dragstart",Oc),ot.unbind(document,"selectstart",Oc),ot.unbind(document,"mousedown",j,!0),ot.unbind(document,"mouseup",j,!0),ot.unbind(document,"keyup",h),ot.unbind(document,"touchstart",p,!0),ot.unbind(document,"touchcancel",v,!0),ot.unbind(document,"touchmove",u,!0),ot.unbind(document,"touchend",d,!0),e.off("element.hover",m),e.off("element.out",g),t.removeMarker(t.getRootElement(),pR);var S=a.payload.previousSelection;return w!==!1&&S&&!n.get().length&&l(S),_=a,a=null,_}function b(w,_,j,S){a&&v(!1),typeof _=="string"&&(S=j,j=_,_=null),S=ee({},i,S||{});var N=S.data||{},P,k,T,A,O;S.trapClick?A=f:A=d,w?(P=sM(w)||w,k=pl(w),x0(w),P.type==="dragstart"&&Oc(P)):(P=null,k={x:0,y:0}),T=s(k),_||(_=T),O=gNe(P),a=ee({prefix:j,data:N,payload:{},globalStart:k,displacement:Ma(_,T),localStart:T,isTouch:O},S),S.manual||(O?(ot.bind(document,"touchstart",p,!0),ot.bind(document,"touchcancel",v,!0),ot.bind(document,"touchmove",u,!0),ot.bind(document,"touchend",d,!0)):(ot.bind(document,"mousemove",u),ot.bind(document,"dragstart",Oc),ot.bind(document,"selectstart",Oc),ot.bind(document,"mousedown",A,!0),ot.bind(document,"mouseup",A,!0)),ot.bind(document,"keyup",h),e.on("element.hover",m),e.on("element.out",g)),c("init"),S.autoActivate&&u(w,!0)}e.on("diagram.destroy",v),this.init=b,this.move=u,this.hover=m,this.out=g,this.end=d,this.cancel=v,this.context=function(){return a},this.setOptions=function(w){ee(i,w)}}n6.$inject=["eventBus","canvas","selection","elementRegistry"];const io={__depends__:[mNe,os],dragging:["type",n6]};function ch(e,t,n){this._canvas=n,this._opts=ee({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var r=this;t.on("drag.move",function(i){var a=r._toBorderPoint(i);r.startScroll(a)}),t.on(["drag.cleanup"],function(){r.stopScroll()})}ch.$inject=["config.autoScroll","eventBus","canvas"];ch.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,r=this,i=t.getContainer().getBoundingClientRect(),a=[e.x,e.y,i.width-e.x,i.height-e.y];this.stopScroll();for(var s=0,c=0,l=0;l<4;l++)yNe(a[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?s=n.scrollStep:l==1?c=n.scrollStep:l==2?s=-n.scrollStep:l==3&&(c=-n.scrollStep));(s!==0||c!==0)&&(t.scroll({dx:s,dy:c}),this._scrolling=setTimeout(function(){r.startScroll(e)},n.scrollRepeatTimeout))};function yNe(e,t,n){return t<e&&e<n}ch.prototype.stopScroll=function(){clearTimeout(this._scrolling)};ch.prototype.setOptions=function(e){this._opts=ee({},this._opts,e)};ch.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=pl(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const xNe={__depends__:[io],__init__:["autoScroll"],autoScroll:["type",ch]};function sN(e){this._commandStack=e.get("commandStack",!1)}sN.$inject=["injector"];sN.prototype.allowed=function(e,t){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(e,t)),n===void 0?!0:n};const hs={__init__:["rules"],rules:["type",sN]};var gg=Math.round,bNe=Math.max;function wNe(e,t){var n=e.x,r=e.y;return[["M",n,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function _Ne(e){var t=[];return e.forEach(function(n,r){t.push([r===0?"M":"L",n.x,n.y])}),t}var r6=10;function jNe(e,t){var n,r;for(n=0;r=e[n];n++)if(oM(r,t)<=r6)return{point:e[n],bendpoint:!0,index:n};return null}function SNe(e,t){var n=ZH(wNe(t,r6),_Ne(e)),r=n[0],i=n[n.length-1],a;return r?r!==i?r.segment2!==i.segment2?(a=bNe(r.segment2,i.segment2)-1,{point:e[a],bendpoint:!0,index:a}):{point:{x:gg(r.x+i.x)/2,y:gg(r.y+i.y)/2},index:r.segment2}:{point:{x:gg(r.x),y:gg(r.y)},index:r.segment2}:null}function vj(e,t){return jNe(e,t)||SNe(e,t)}function i6(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function mR(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function ENe(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function NNe(e,t,n){var r=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],i=r[0].n*t[0]+r[1].n*t[1],a=r[0].lambda*t[0]+r[1].lambda*t[1];return-i/a}function oN(e,t){var n=t[0],r=t[1],i={x:r.x-n.x,y:r.y-n.y},a=NNe([n.x,n.y],[i.x,i.y],[e.x,e.y]);return{x:n.x+a*i.x,y:n.y+a*i.y}}function a6(e,t){var n=oN(e,t),r={x:n.x-e.x,y:n.y-e.y};return i6(r)}function wy(e,t){return i6({x:e.x-t.x,y:e.y-t.y})}var s6="djs-bendpoint",o6="djs-segment-dragger";function PNe(e,t){var n=pl(t),r=e._container.getBoundingClientRect(),i;i={x:r.left,y:r.top};var a=e.viewbox();return{x:a.x+(n.x-i.x)/a.scale,y:a.y+(n.y-i.y)/a.scale}}function yj(e,t,n){var r=PNe(e,n),i=vj(t,r);return i}function xj(e,t){var n=Ne("g");nn(n).add(s6),ke(e,n);var r=Ne("circle");fe(r,{cx:0,cy:0,r:4}),nn(r).add("djs-visual"),ke(n,r);var i=Ne("circle");return fe(i,{cx:0,cy:0,r:10}),nn(i).add("djs-hit"),ke(n,i),t&&nn(n).add(t),n}function kNe(e,t,n,r){var i=Ne("g");ke(e,i);var a=18,s=6,c=11,l=ANe(t,n,r),u=s+c,d=Ne("rect");fe(d,{x:-a/2,y:-s/2,width:a,height:s}),nn(d).add("djs-visual"),ke(i,d);var h=Ne("rect");return fe(h,{x:-l/2,y:-u/2,width:l,height:u}),nn(h).add("djs-hit"),ke(i,h),JH(i,r==="v"?90:0),i}function c6(e,t,n){var r=Ne("g"),i=Fw(t,n),a=As(t,n);return ke(e,r),kNe(r,t,n,a),nn(r).add(o6),nn(r).add(a==="h"?"horizontal":"vertical"),Or(r,i.x,i.y),r}function bj(e){return Math.abs(Math.round(e*2/3))}function CNe(e,t){var n=TNe(e,t);return oN(e,n)}function ANe(e,t,n){var r=t.x-e.x,i=t.y-e.y;return bj(n==="h"?r:i)}function TNe(e,t){for(var n=t.waypoints,r=1/0,i,a=0;a<n.length-1;a++){var s=n[a],c=n[a+1],l=a6(e,[s,c]);l<r&&(r=l,i=a)}return[n[i],n[i+1]]}function l6(e,t,n,r,i){function a(w,_,j){var S=w.index,N=w.point,P,k,T,A,O,D;return S<=0||w.bendpoint?!1:(P=_[S-1],k=_[S],T=Fw(P,k),A=As(P,k),O=Math.abs(N.x-T.x),D=Math.abs(N.y-T.y),A&&O<=j&&D<=j)}function s(w,_){var j=w.waypoints,S,N,P,k;return _.index<=0||_.bendpoint||(S={start:j[_.index-1],end:j[_.index]},N=As(S.start,S.end),!N)?null:(N==="h"?P=S.end.x-S.start.x:P=S.end.y-S.start.y,k=bj(P)/2,k)}function c(w,_){var j=_.waypoints,S=yj(t,j,w),N;if(S)return N=s(_,S),a(S,j,N)?i.start(w,_,S.index):r.start(w,_,S.index,!S.bendpoint),!0}function l(w,_,j){ot.bind(w,_,function(S){n.triggerMouseEvent(_,S,j),S.stopPropagation()})}function u(w,_){var j=t.getLayer("overlays"),S=$n('.djs-bendpoints[data-element-id="'+wf(w.id)+'"]',j);return!S&&_&&(S=Ne("g"),fe(S,{"data-element-id":w.id}),nn(S).add("djs-bendpoints"),ke(j,S),l(S,"mousedown",w),l(S,"click",w),l(S,"dblclick",w)),S}function d(w,_){return $n('.djs-segment-dragger[data-segment-idx="'+w+'"]',_)}function h(w,_){_.waypoints.forEach(function(j,S){var N=xj(w);ke(w,N),Or(N,j.x,j.y)}),xj(w,"floating")}function f(w,_){for(var j=_.waypoints,S,N,P,k=1;k<j.length;k++)S=j[k-1],N=j[k],As(S,N)&&(P=c6(w,S,N),fe(P,{"data-segment-idx":k}),l(P,"mousemove",_))}function p(w){Y(ck("."+s6,w),function(_){Rr(_)})}function m(w){Y(ck("."+o6,w),function(_){Rr(_)})}function g(w){var _=u(w);return _||(_=u(w,!0),h(_,w),f(_,w)),_}function v(w){var _=u(w);_&&(m(_),p(_),f(_,w),h(_,w))}function x(w,_){var j=$n(".floating",w),S=_.point;j&&Or(j,S.x,S.y)}function b(w,_,j){var S=d(_.index,w),N=j[_.index-1],P=j[_.index],k=_.point,T=Fw(N,P),A=As(N,P),O,D;S&&(O=ONe(S),D={x:k.x-T.x,y:k.y-T.y},A==="v"&&(D={x:D.y,y:D.x}),Or(O,D.x,D.y))}e.on("connection.changed",function(w){v(w.element)}),e.on("connection.remove",function(w){var _=u(w.element);_&&Rr(_)}),e.on("element.marker.update",function(w){var _=w.element,j;_.waypoints&&(j=g(_),w.add?nn(j).add(w.marker):nn(j).remove(w.marker))}),e.on("element.mousemove",function(w){var _=w.element,j=_.waypoints,S,N;if(j){if(S=u(_,!0),N=yj(t,j,w.originalEvent),!N)return;x(S,N),N.bendpoint||b(S,N,j)}}),e.on("element.mousedown",function(w){if(Zj(w)){var _=w.originalEvent,j=w.element;if(j.waypoints)return c(_,j)}}),e.on("selection.changed",function(w){var _=w.newSelection,j=_[0];j&&j.waypoints&&g(j)}),e.on("element.hover",function(w){var _=w.element;_.waypoints&&(g(_),n.registerEvent(w.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(w){n.unregisterEvent(w.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(w){var _=w.element,j=w.newId;if(_.waypoints){var S=u(_);S&&fe(S,{"data-element-id":j})}}),this.addHandles=g,this.updateHandles=v,this.getBendpointsContainer=u,this.getSegmentDragger=d}l6.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function ONe(e){return $n(".djs-visual",e)}var gR=Math.round,zc="reconnectStart",Uc="reconnectEnd",zh="updateWaypoints";function cN(e,t,n,r,i,a){this._injector=e,this.start=function(s,c,l,u){var d=n.getGraphics(c),h=c.source,f=c.target,p=c.waypoints,m;!u&&l===0?m=zc:!u&&l===p.length-1?m=Uc:m=zh;var g=m===zh?"connection.updateWaypoints":"connection.reconnect",v=i.allowed(g,{connection:c,source:h,target:f});v===!1&&(v=i.allowed(g,{connection:c,source:f,target:h})),v!==!1&&r.init(s,"bendpoint.move",{data:{connection:c,connectionGfx:d,context:{allowed:v,bendpointIndex:l,connection:c,source:h,target:f,insert:u,type:m}}})},t.on("bendpoint.move.hover",function(s){var c=s.context,l=c.connection,u=l.source,d=l.target,h=s.hover,f=c.type;c.hover=h;var p;if(h){var m=f===zh?"connection.updateWaypoints":"connection.reconnect";if(p=c.allowed=i.allowed(m,{connection:l,source:f===zc?h:u,target:f===Uc?h:d}),p){c.source=f===zc?h:u,c.target=f===Uc?h:d;return}p===!1&&(p=c.allowed=i.allowed(m,{connection:l,source:f===Uc?h:d,target:f===zc?h:u})),p&&(c.source=f===Uc?h:d,c.target=f===zc?h:u)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(s){var c=s.context,l=c.type;c.hover=null,c.source=null,c.target=null,l!==zh&&(c.allowed=!1)}),t.on("bendpoint.move.end",function(s){var c=s.context,l=c.allowed,u=c.bendpointIndex,d=c.connection,h=c.insert,f=d.waypoints.slice(),p=c.source,m=c.target,g=c.type,v=c.hints||{},x={x:gR(s.x),y:gR(s.y)};if(!l)return!1;g===zh?(h?f.splice(u,0,x):f[u]=x,v.bendpointMove={insert:h,bendpointIndex:u},f=this.cropWaypoints(d,f),a.updateWaypoints(d,QH(f),v)):(g===zc?(v.docking="source",_y(c)&&(v.docking="target",v.newWaypoints=f.reverse())):g===Uc&&(v.docking="target",_y(c)&&(v.docking="source",v.newWaypoints=f.reverse())),a.reconnect(d,p,m,x,v))},this)}cN.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];cN.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var r=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=r,t};function _y(e){var t=e.hover,n=e.source,r=e.target,i=e.type;if(i===zc)return t&&r&&t===r&&n!==r;if(i===Uc)return t&&n&&t===n&&n!==r}var RNe="reconnectStart",$Ne="reconnectEnd",vR="updateWaypoints",Uh="connect-ok",vg="connect-not-ok",yR="connect-hover",xR="djs-updating",bR="djs-dragging",wR=1100;function u6(e,t,n,r){this._injector=t;var i=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(a){var s=a.context,c=s.bendpointIndex,l=s.connection,u=s.insert,d=l.waypoints,h=d.slice();s.waypoints=d,u&&h.splice(c,0,{x:a.x,y:a.y}),l.waypoints=h;var f=s.draggerGfx=xj(r.getLayer("overlays"));nn(f).add("djs-dragging"),r.addMarker(l,bR),r.addMarker(l,xR)}),n.on("bendpoint.move.hover",function(a){var s=a.context,c=s.allowed,l=s.hover,u=s.type;if(l){if(r.addMarker(l,yR),u===vR)return;c?(r.removeMarker(l,vg),r.addMarker(l,Uh)):c===!1&&(r.removeMarker(l,Uh),r.addMarker(l,vg))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],wR,function(a){var s=a.context,c=s.hover,l=s.target;c&&(r.removeMarker(c,yR),r.removeMarker(c,l?Uh:vg))}),n.on("bendpoint.move.move",function(a){var s=a.context,c=s.allowed,l=s.bendpointIndex,u=s.draggerGfx,d=s.hover,h=s.type,f=s.connection,p=f.source,m=f.target,g=f.waypoints.slice(),v={x:a.x,y:a.y},x=s.hints||{},b={};i&&(x.connectionStart&&(b.connectionStart=x.connectionStart),x.connectionEnd&&(b.connectionEnd=x.connectionEnd),h===RNe?_y(s)?(b.connectionEnd=b.connectionEnd||v,b.source=m,b.target=d||p,g=g.reverse()):(b.connectionStart=b.connectionStart||v,b.source=d||p,b.target=m):h===$Ne?_y(s)?(b.connectionStart=b.connectionStart||v,b.source=d||m,b.target=p,g=g.reverse()):(b.connectionEnd=b.connectionEnd||v,b.source=p,b.target=d||m):(b.noCropping=!0,b.noLayout=!0,g[l]=v),h===vR&&(g=e.cropWaypoints(f,g)),b.waypoints=g,i.drawPreview(s,c,b)),Or(u,a.x,a.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],wR,function(a){var s=a.context,c=s.connection,l=s.draggerGfx,u=s.hover,d=s.target,h=s.waypoints;c.waypoints=h,Rr(l),r.removeMarker(c,xR),r.removeMarker(c,bR),u&&(r.removeMarker(u,Uh),r.removeMarker(u,d?Uh:vg)),i&&i.cleanUp(s)})}u6.$inject=["bendpointMove","injector","eventBus","canvas"];var _R="connect-hover",jR="djs-updating";function SR(e,t,n){return lN(e,t,e[t]+n)}function lN(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function INe(e,t,n,r){var i=Math.max(t[r],n[r]),a=Math.min(t[r],n[r]),s=20,c=Math.min(Math.max(a+s,e[r]),i-s);return lN(t,r,c)}function d6(e){return e==="x"?"y":"x"}function ER(e,t,n){var r,i;return e.original?e.original:(r=tt(t),i=d6(n),lN(e,i,r[i]))}function h6(e,t,n,r,i,a){var s=e.get("connectionDocking",!1);this.start=function(h,f,p){var m,g=n.getGraphics(f),v=p-1,x=p,b=f.waypoints,w=b[v],_=b[x],j=yj(n,b,h),S,N,P;S=As(w,_),S&&(N=S==="v"?"x":"y",v===0&&(w=ER(w,f.source,N)),x===b.length-1&&(_=ER(_,f.target,N)),j?P=j.point:P={x:(w.x+_.x)/2,y:(w.y+_.y)/2},m={connection:f,segmentStartIndex:v,segmentEndIndex:x,segmentStart:w,segmentEnd:_,axis:N,dragPosition:P},r.init(h,P,"connectionSegment.move",{cursor:N==="x"?"resize-ew":"resize-ns",data:{connection:f,connectionGfx:g,context:m}}))};function c(h,f){if(!s)return f;var p=h.waypoints,m;return h.waypoints=f,m=s.getCroppedWaypoints(h),h.waypoints=p,m}function l(h){i.update("connection",h.connection,h.connectionGfx)}function u(h,f,p){var m=h.newWaypoints,g=h.segmentStartIndex+f,v=m[g],x=h.segmentEndIndex+f,b=m[x],w=d6(h.axis),_=INe(p,v,b,w);Or(h.draggerGfx,_.x,_.y)}function d(h,f){var p=0,m=h.filter(function(g,v){return cM(h[v-1],h[v+1],g)?(p=v<=f?p-1:p,!1):!0});return{waypoints:m,segmentOffset:p}}t.on("connectionSegment.move.start",function(h){var f=h.context,p=h.connection,m=n.getLayer("overlays");f.originalWaypoints=p.waypoints.slice(),f.draggerGfx=c6(m,f.segmentStart,f.segmentEnd),nn(f.draggerGfx).add("djs-dragging"),n.addMarker(p,jR)}),t.on("connectionSegment.move.move",function(h){var f=h.context,p=f.connection,m=f.segmentStartIndex,g=f.segmentEndIndex,v=f.segmentStart,x=f.segmentEnd,b=f.axis,w=f.originalWaypoints.slice(),_=SR(v,b,h["d"+b]),j=SR(x,b,h["d"+b]),S=w.length,N=0;w[m]=_,w[g]=j;var P,k;m<2&&(P=Nr(p.source,_),m===1?P==="intersect"&&(w.shift(),w[0]=_,N--):P!=="intersect"&&(w.unshift(v),N++)),g>S-3&&(k=Nr(p.target,j),g===S-2?k==="intersect"&&(w.pop(),w[w.length-1]=j):k!=="intersect"&&w.push(x)),f.newWaypoints=p.waypoints=c(p,w),u(f,N,h),f.newSegmentStartIndex=m+N,l(h)}),t.on("connectionSegment.move.hover",function(h){h.context.hover=h.hover,n.addMarker(h.hover,_R)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(h){var f=h.context.hover;f&&n.removeMarker(f,_R)}),t.on("connectionSegment.move.cleanup",function(h){var f=h.context,p=f.connection;f.draggerGfx&&Rr(f.draggerGfx),n.removeMarker(p,jR)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(h){var f=h.context,p=f.connection;p.waypoints=f.originalWaypoints,l(h)}),t.on("connectionSegment.move.end",function(h){var f=h.context,p=f.connection,m=f.newWaypoints,g=f.newSegmentStartIndex;m=m.map(function(j){return{original:j.original,x:Math.round(j.x),y:Math.round(j.y)}});var v=d(m,g),x=v.waypoints,b=c(p,x),w=v.segmentOffset,_={segmentMove:{segmentStartIndex:f.segmentStartIndex,newSegmentStartIndex:g+w}};a.updateWaypoints(p,b,_)})}h6.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var MNe=Math.abs,NR=Math.round;function DNe(e,t,n){n=n===void 0?10:n;var r,i;for(r=0;r<t.length;r++)if(i=t[r],MNe(i-e)<=n)return i}function f6(e){return{x:e.x,y:e.y}}function p6(e){return{x:e.x+e.width,y:e.y+e.height}}function Xi(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:NR(e.x+e.width/2),y:NR(e.y+e.height/2)}}function Td(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function Rn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var r,i=e[t],a=e.snapped=e.snapped||{};return n===!1?a[t]=!1:(a[t]=!0,r=n-i,e[t]+=r,e["d"+t]+=r),i}function m6(e){return e.children||[]}var LNe=Math.abs,PR=Math.round,_w=10;function g6(e){function t(a,s){if(jt(a)){for(var c=a.length;c--;)if(LNe(a[c]-s)<=_w)return a[c]}else{a=+a;var l=s%a;if(l<_w)return s-l;if(l>a-_w)return s-l+a}return s}function n(a,s){if(a.waypoints)return CNe(s,a);if(a.width)return{x:PR(a.width/2+a.x),y:PR(a.height/2+a.y)}}function r(a){var s=a.context,c=s.snapPoints,l=s.connection,u=l.waypoints,d=s.segmentStart,h=s.segmentStartIndex,f=s.segmentEnd,p=s.segmentEndIndex,m=s.axis;if(c)return c;var g=[u[h-1],d,f,u[p+1]];return h<2&&g.unshift(n(l.source,a)),p>u.length-3&&g.unshift(n(l.target,a)),s.snapPoints=c={horizontal:[],vertical:[]},Y(g,function(v){v&&(v=v.original||v,m==="y"&&c.horizontal.push(v.y),m==="x"&&c.vertical.push(v.x))}),c}e.on("connectionSegment.move.move",1500,function(a){var s=r(a),c=a.x,l=a.y,u,d;if(s){u=t(s.vertical,c),d=t(s.horizontal,l);var h=c-u,f=l-d;ee(a,{dx:a.dx-h,dy:a.dy-f,x:u,y:d}),(h||s.vertical.indexOf(c)!==-1)&&Rn(a,"x",u),(f||s.horizontal.indexOf(l)!==-1)&&Rn(a,"y",d)}});function i(a){var s=a.snapPoints,c=a.connection.waypoints,l=a.bendpointIndex;if(s)return s;var u=[c[l-1],c[l+1]];return a.snapPoints=s={horizontal:[],vertical:[]},Y(u,function(d){d&&(d=d.original||d,s.horizontal.push(d.y),s.vertical.push(d.x))}),s}e.on(["connect.hover","connect.move","connect.end"],1500,function(a){var s=a.context,c=s.hover,l=c&&n(c,a);!Jt(c)||!l||!l.x||!l.y||(Rn(a,"x",l.x),Rn(a,"y",l.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(a){var s=a.context,c=i(s),l=s.hover,u=l&&n(l,a),d=a.x,h=a.y,f,p;if(c){f=t(u?c.vertical.concat([u.x]):c.vertical,d),p=t(u?c.horizontal.concat([u.y]):c.horizontal,h);var m=d-f,g=h-p;ee(a,{dx:a.dx-m,dy:a.dy-g,x:a.x-m,y:a.y-g}),(m||c.vertical.indexOf(d)!==-1)&&Rn(a,"x",f),(g||c.horizontal.indexOf(h)!==-1)&&Rn(a,"y",p)}})}g6.$inject=["eventBus"];const BNe={__depends__:[io,hs],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",l6],bendpointMove:["type",cN],bendpointMovePreview:["type",u6],connectionSegmentMove:["type",h6],bendpointSnapping:["type",g6]};function v6(e,t,n,r){function i(s,c){return r.allowed("connection.create",{source:s,target:c})}function a(s,c){return i(c,s)}e.on("connect.hover",function(s){var c=s.context,l=c.start,u=s.hover,d;if(c.hover=u,d=c.canExecute=i(l,u),!zw(d)){if(d!==!1){c.source=l,c.target=u;return}d=c.canExecute=a(l,u),!zw(d)&&d!==!1&&(c.source=u,c.target=l)}}),e.on(["connect.out","connect.cleanup"],function(s){var c=s.context;c.hover=null,c.source=null,c.target=null,c.canExecute=!1}),e.on("connect.end",function(s){var c=s.context,l=c.canExecute,u=c.connectionStart,d={x:s.x,y:s.y},h=c.source,f=c.target;if(!l)return!1;var p=null,m={connectionStart:wj(c)?d:u,connectionEnd:wj(c)?u:d};Ws(l)&&(p=l),c.connection=n.connect(h,f,p,m)}),this.start=function(s,c,l,u){Ws(l)||(u=l,l=tt(c)),t.init(s,"connect",{autoActivate:u,data:{shape:c,context:{start:c,connectionStart:l}}})}}v6.$inject=["eventBus","dragging","modeling","rules"];function wj(e){var t=e.hover,n=e.source,r=e.target;return t&&n&&t===n&&n!==r}var FNe=1100,zNe=900,kR="connect-ok",CR="connect-not-ok";function y6(e,t,n){var r=e.get("connectionPreview",!1);r&&t.on("connect.move",function(i){var a=i.context,s=a.canExecute,c=a.hover,l=a.source,u=a.start,d=a.startPosition,h=a.target,f=a.connectionStart||d,p=a.connectionEnd||{x:i.x,y:i.y},m=f,g=p;wj(a)&&(m=p,g=f),r.drawPreview(a,s,{source:l||u,target:h||c,connectionStart:m,connectionEnd:g})}),t.on("connect.hover",zNe,function(i){var a=i.context,s=i.hover,c=a.canExecute;c!==null&&n.addMarker(s,c?kR:CR)}),t.on(["connect.out","connect.cleanup"],FNe,function(i){var a=i.hover;a&&(n.removeMarker(a,kR),n.removeMarker(a,CR))}),r&&t.on("connect.cleanup",function(i){r.cleanUp(i.context)})}y6.$inject=["injector","eventBus","canvas"];const uN={__depends__:[os,hs,io],__init__:["connectPreview"],connect:["type",v6],connectPreview:["type",y6]};var UNe="djs-dragger";function ao(e,t,n,r){this._canvas=t,this._graphicsFactory=n,this._elementFactory=r,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}ao.$inject=["injector","canvas","graphicsFactory","elementFactory"];ao.prototype.drawPreview=function(e,t,n){n=n||{};var r=e.connectionPreviewGfx,i=e.getConnection,a=n.source,s=n.target,c=n.waypoints,l=n.connectionStart,u=n.connectionEnd,d=n.noLayout,h=n.noCropping,f=n.noNoop,p,m=this;if(r||(r=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Uy(r),i||(i=e.getConnection=HNe(function(g,v,x){return m.getConnection(g,v,x)})),t&&(p=i(t,a,s)),!p){!f&&this.drawNoopPreview(r,n);return}p.waypoints=c||[],this._layouter&&!d&&(p.waypoints=this._layouter.layoutConnection(p,{source:a,target:s,connectionStart:l,connectionEnd:u,waypoints:n.waypoints||p.waypoints})),(!p.waypoints||!p.waypoints.length)&&(p.waypoints=[a?tt(a):l,s?tt(s):u]),this._connectionDocking&&(a||s)&&!h&&(p.waypoints=this._connectionDocking.getCroppedWaypoints(p,a,s)),this._graphicsFactory.drawConnection(r,p,{stroke:"var(--element-dragger-color)"})};ao.prototype.drawNoopPreview=function(e,t){var n=t.source,r=t.target,i=t.connectionStart||tt(n),a=t.connectionEnd||tt(r),s=this.cropWaypoints(i,a,n,r),c=this.createNoopConnection(s[0],s[1]);ke(e,c)};ao.prototype.cropWaypoints=function(e,t,n,r){var i=this._graphicsFactory,a=n&&i.getShapePath(n),s=r&&i.getShapePath(r),c=i.getConnectionPath({waypoints:[e,t]});return e=n&&Uw(a,c,!0)||e,t=r&&Uw(s,c,!1)||t,[e,t]};ao.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Rr(e.connectionPreviewGfx)};ao.prototype.getConnection=function(e){var t=VNe(e);return this._elementFactory.createConnection(t)};ao.prototype.createConnectionPreviewGfx=function(){var e=Ne("g");return fe(e,{pointerEvents:"none"}),nn(e).add(UNe),ke(this._canvas.getActiveLayer(),e),e};ao.prototype.createNoopConnection=function(e,t){return e9([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function HNe(e){var t={};return function(n){var r=JSON.stringify(n),i=t[r];return i||(i=t[r]=e.apply(null,arguments)),i}}function VNe(e){return Ws(e)?e:{}}const GNe={__init__:["connectionPreview"],connectionPreview:["type",ao]},WNe=new qj("ps");var qNe=["marker-start","marker-mid","marker-end"],KNe=["circle","ellipse","line","path","polygon","polyline","path","rect"];function mc(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._styles=r}mc.$inject=["elementRegistry","eventBus","canvas","styles"];mc.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};mc.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};mc.prototype.addDragger=function(e,t,n,r="djs-dragger"){n=n||this.getGfx(e);var i=lM(n),a=n.getBoundingClientRect();return this._cloneMarkers(ju(i),r),fe(i,this._styles.cls(r,[],{x:a.top,y:a.left})),ke(t,i),fe(i,"data-preview-support-element-id",e.id),i};mc.prototype.addFrame=function(e,t){var n=Ne("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return ke(t,n),fe(n,"data-preview-support-element-id",e.id),n};mc.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var r=this;e.childNodes&&e.childNodes.forEach(i=>{r._cloneMarkers(i,t,n)}),JNe(e)&&qNe.forEach(function(i){if(fe(e,i)){var a=YNe(e,i,r._canvas.getContainer());a&&r._cloneMarker(n,e,a,i,t)}})};mc.prototype._cloneMarker=function(e,t,n,r,i="djs-dragger"){var a=[n.id,i,WNe.next()].join("-"),s=$n("marker#"+n.id,e);e=e||this._canvas._svg;var c=s||lM(n);c.id=a,nn(c).add(i);var l=$n(":scope > defs",e);l||(l=Ne("defs"),ke(e,l)),ke(l,c);var u=ZNe(c.id);fe(t,r,u)};function YNe(e,t,n){var r=XNe(fe(e,t));return $n("marker#"+r,n||document)}function XNe(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function ZNe(e){return"url(#"+e+")"}function JNe(e){return KNe.indexOf(e.nodeName)!==-1}const lh={__init__:["previewSupport"],previewSupport:["type",mc]},yg="complex-preview";class x6{constructor(t,n,r){this._canvas=t,this._graphicsFactory=n,this._previewSupport=r,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:r=[],removed:i=[],resized:a=[]}=t,s=this._canvas.getLayer(yg);n.filter(c=>!QNe(c)).forEach(c=>{let l;Jt(c)?(l=this._graphicsFactory._createContainer("connection",Ne("g")),this._graphicsFactory.drawConnection(ju(l),c)):(l=this._graphicsFactory._createContainer("shape",Ne("g")),this._graphicsFactory.drawShape(ju(l),c),Or(l,c.x,c.y)),this._previewSupport.addDragger(c,s,l)}),r.forEach(({element:c,delta:l})=>{this._previewSupport.addDragger(c,s,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"]);const u=this._previewSupport.addDragger(c,s);Jt(c)?Or(u,l.x,l.y):Or(u,c.x+l.x,c.y+l.y)}),i.forEach(c=>{this._previewSupport.addDragger(c,s,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"])}),a.forEach(({shape:c,bounds:l})=>{this._canvas.addMarker(c,"djs-hidden"),this._markers.push([c,"djs-hidden"]),this._previewSupport.addDragger(c,s,void 0,"djs-dragging");const u=this._graphicsFactory._createContainer("shape",Ne("g"));this._graphicsFactory.drawShape(ju(u),c,{width:l.width,height:l.height}),Or(u,l.x,l.y),this._previewSupport.addDragger(c,s,u)})}cleanUp(){Uy(this._canvas.getLayer(yg)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(yg)}hide(){this._canvas.hideLayer(yg)}}x6.$inject=["canvas","graphicsFactory","previewSupport"];function QNe(e){return e.hidden}const ePe={__depends__:[lh],__init__:["complexPreview"],complexPreview:["type",x6]};var dN=["top","bottom","left","right"],xg=10;function hN(e,t){me.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(i){var a=i.context,s=a.connection,c=s.source,l=s.target,u=a.hints||{};u.createElementsBehavior!==!1&&(n(c),n(l))}),this.postExecuted(["label.create"],function(i){var a=i.context,s=a.shape,c=a.hints||{};c.createElementsBehavior!==!1&&n(s.labelTarget)}),this.postExecuted(["elements.create"],function(i){var a=i.context,s=a.elements,c=a.hints||{};c.createElementsBehavior!==!1&&s.forEach(function(l){n(l)})});function n(i){if(Hy(i)&&!Jt(i)){var a=rPe(i);a&&r(i,a)}}function r(i,a){var s=tt(i),c=i.label,l=tt(c);if(c.parent){var u=He(i),d;switch(a){case"top":d={x:s.x,y:u.top-xg-c.height/2};break;case"left":d={x:u.left-xg-c.width/2,y:s.y};break;case"bottom":d={x:s.x,y:u.bottom+xg+c.height/2};break;case"right":d={x:u.right+xg+c.width/2,y:s.y};break}var h=Ma(d,l);t.moveShape(c,h)}}}Me(hN,me);hN.$inject=["eventBus","modeling"];function tPe(e){var t=e.host,n=tt(e),r=Nr(n,t),i;r.indexOf("-")>=0?i=r.split("-"):i=[r];var a=dN.filter(function(s){return i.indexOf(s)===-1});return a}function nPe(e){var t=tt(e),n=[].concat(e.incoming.map(function(r){return r.waypoints[r.waypoints.length-2]}),e.outgoing.map(function(r){return r.waypoints[1]})).map(function(r){return b6(t,r)});return n}function rPe(e){var t=tt(e.label),n=tt(e),r=b6(n,t);if(iPe(r)){var i=nPe(e);if(e.host){var a=tPe(e);i=i.concat(a)}var s=dN.filter(function(c){return i.indexOf(c)===-1});if(s.indexOf(r)===-1)return s[0]}}function b6(e,t){return Nr(t,e,5)}function iPe(e){return dN.indexOf(e)!==-1}function fN(e){me.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,r=t.shape;t.position||(C(r,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-r.height/2}:t.position={x:n.x+n.width+80+r.width/2,y:n.y+n.height/2})},!0)}Me(fN,me);fN.$inject=["eventBus"];function pN(e,t){e.invoke(me,this),this.postExecute("shape.move",function(n){var r=n.newParent,i=n.shape,a=Et(i.incoming.concat(i.outgoing),function(s){return C(s,"bpmn:Association")});Y(a,function(s){t.moveConnection(s,{x:0,y:0},r)})},!0)}Me(pN,me);pN.$inject=["injector","modeling"];var AR=500;function ub(e,t){t.invoke(me,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",AR,function(r){var i=r.elements;i=i.filter(function(a){var s=a.host;return TR(a,s)}),i.length===1&&i.map(function(a){return i.indexOf(a)}).forEach(function(a){var s=i[a];r.elements[a]=n._replaceShape(i[a],s)})},!0),this.preExecute("elements.move",AR,function(r){var i=r.shapes,a=r.newHost;if(i.length===1){var s=i[0];TR(s,a)&&(r.shapes=[n._replaceShape(s,a)])}},!0)}ub.$inject=["bpmnReplace","injector"];Me(ub,me);ub.prototype._replaceShape=function(e,t){var n=aPe(e),r={type:"bpmn:BoundaryEvent",host:t};return n&&(r.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})};function aPe(e){var t=Ce(e),n=t.eventDefinitions;return n&&n[0]}function TR(e,t){return!kt(e)&&mt(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function mN(e,t){me.call(this,e);function n(r){return Et(r.attachers,function(i){return C(i,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(r){var i=r.context.source,a=r.context.target,s=n(a);C(i,"bpmn:EventBasedGateway")&&C(a,"bpmn:ReceiveTask")&&s.length>0&&t.removeElements(s)}),this.postExecute("connection.reconnect",function(r){var i=r.context.oldSource,a=r.context.newSource;C(i,"bpmn:Gateway")&&C(a,"bpmn:EventBasedGateway")&&Y(a.outgoing,function(s){var c=s.target,l=n(c);C(c,"bpmn:ReceiveTask")&&l.length>0&&t.removeElements(l)})})}mN.$inject=["eventBus","modeling"];Me(mN,me);function gN(e,t,n){me.call(this,e),this.preExecute("shape.replace",c,!0),this.postExecuted("shape.replace",l,!0),this.preExecute("connection.create",i,!0),this.postExecuted("connection.delete",r,!0),this.postExecuted("connection.reconnect",a,!0),this.postExecuted("element.updateProperties",s,!0);function r(v){const x=v.source,b=v.target;ru(x)&&Hh(b)&&d(b)}function i(v){const x=v.connection,b=v.source,w=v.target;ru(b)&&bg(w)&&(u(w),f(b,[x]))}function a(v){const x=v.newTarget,b=v.oldSource,w=v.oldTarget;if(w!==x){const _=b;Hh(w)&&d(w),ru(_)&&bg(x)&&u(x)}}function s(v){const{element:x}=v;Hh(x)?(h(x),p(x)):bg(x)&&m(x)}function c(v){const{newData:x,oldShape:b}=v;if(ru(v.oldShape)&&x.eventDefinitionType!=="bpmn:CompensateEventDefinition"||x.type!=="bpmn:BoundaryEvent"){const w=b.outgoing.find(({target:_})=>Hh(_));w&&w.target&&(v._connectionTarget=w.target)}else if(!ru(v.oldShape)&&x.eventDefinitionType==="bpmn:CompensateEventDefinition"&&x.type==="bpmn:BoundaryEvent"){const w=b.outgoing.find(({target:_})=>bg(_));w&&w.target&&(v._connectionTarget=w.target),g(b)}}function l(v){const{_connectionTarget:x,newShape:b}=v;x&&t.connect(b,x)}function u(v){t.updateProperties(v,{isForCompensation:!0})}function d(v){t.updateProperties(v,{isForCompensation:void 0})}function h(v){for(const x of v.incoming)n.canConnect(x.source,v)||t.removeConnection(x);for(const x of v.outgoing)n.canConnect(v,x.target)||t.removeConnection(x)}function f(v,x){v.outgoing.filter(_=>C(_,"bpmn:Association")).filter(_=>Hh(_.target)&&!x.includes(_)).forEach(_=>t.removeConnection(_))}function p(v){const x=v.attachers.slice();x.length&&t.removeElements(x)}function m(v){const x=v.incoming.filter(b=>ru(b.source));t.removeElements(x)}function g(v){const x=v.outgoing.filter(b=>C(b,"bpmn:SequenceFlow"));t.removeElements(x)}}Me(gN,me);gN.$inject=["eventBus","modeling","bpmnRules"];function Hh(e){const t=Ce(e);return t&&t.get("isForCompensation")}function ru(e){return e&&C(e,"bpmn:BoundaryEvent")&&Jj(e,"bpmn:CompensateEventDefinition")}function bg(e){return e&&C(e,"bpmn:Activity")&&!$r(e)}function vN(e){e.invoke(me,this),this.preExecute("shape.create",1500,function(t){var n=t.context,r=n.parent,i=n.shape;C(r,"bpmn:Lane")&&!C(i,"bpmn:Lane")&&(n.parent=Ad(r,"bpmn:Participant"))})}vN.$inject=["injector"];Me(vN,me);function yN(e,t){me.call(this,e),this.preExecute("shape.create",function(n){var s;var r=n.context,i=r.shape;if(C(i,"bpmn:DataObjectReference")&&i.type!=="label"){var a=t.create("bpmn:DataObject");a.isCollection=((s=i.businessObject.dataObjectRef)==null?void 0:s.isCollection)||!1,i.businessObject.dataObjectRef=a}})}yN.$inject=["eventBus","bpmnFactory"];Me(yN,me);var _j=20,jj=20,w6=30,wg=2e3;function xN(e,t,n){me.call(this,t),t.on(["create.start","shape.move.start"],wg,function(i){var a=i.context,s=a.shape,c=e.getRootElement();if(!(!C(s,"bpmn:Participant")||!C(c,"bpmn:Process")||!c.children.length)){var l=c.children.filter(function(h){return!C(h,"bpmn:Group")&&!kt(h)&&!Jt(h)});if(l.length){var u=qr(l),d=sPe(s,u);ee(s,d),a.createConstraints=oPe(s,u)}}}),t.on("create.start",wg,function(i){var a=i.context,s=a.shape,c=e.getRootElement(),l=e.getGraphics(c);function u(d){d.element=c,d.gfx=l}C(s,"bpmn:Participant")&&C(c,"bpmn:Process")&&(t.on("element.hover",wg,u),t.once("create.cleanup",function(){t.off("element.hover",u)}))});function r(){var i=e.getRootElement();return C(i,"bpmn:Collaboration")?i:n.makeCollaboration()}this.preExecute("elements.create",wg,function(i){var a=i.elements,s=i.parent,c=cPe(a),l;c&&C(s,"bpmn:Process")&&(i.parent=r(),l=i.hints=i.hints||{},l.participant=c,l.process=s,l.processRef=Ce(c).get("processRef"))},!0),this.preExecute("shape.create",function(i){var a=i.parent,s=i.shape;C(s,"bpmn:Participant")&&C(a,"bpmn:Process")&&(i.parent=r(),i.process=a,i.processRef=Ce(s).get("processRef"))},!0),this.execute("shape.create",function(i){var a=i.hints||{},s=i.process||a.process,c=i.shape,l=a.participant;s&&(!l||c===l)&&Ce(c).set("processRef",Ce(s))},!0),this.revert("shape.create",function(i){var a=i.hints||{},s=i.process||a.process,c=i.processRef||a.processRef,l=i.shape,u=a.participant;s&&(!u||l===u)&&Ce(l).set("processRef",c)},!0),this.postExecute("shape.create",function(i){var a=i.hints||{},s=i.process||i.hints.process,c=i.shape,l=a.participant;if(s){var u=s.children.slice();l?c===l&&n.moveElements(u,{x:0,y:0},l):n.moveElements(u,{x:0,y:0},c)}},!0)}xN.$inject=["canvas","eventBus","modeling"];Me(xN,me);function sPe(e,t){t={width:t.width+_j*2+w6,height:t.height+jj*2};var n=Math.max(e.width,t.width),r=Math.max(e.height,t.height);return{x:-n/2,y:-r/2,width:n,height:r}}function oPe(e,t){return t=He(t),{bottom:t.top+e.height/2-jj,left:t.right-e.width/2+_j,top:t.bottom-e.height/2+jj,right:t.left+e.width/2-_j-w6}}function cPe(e){return gn(e,function(t){return C(t,"bpmn:Participant")})}var OR="__targetRef_placeholder";function bN(e,t){me.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],RR(a)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],RR(a));function n(s,c,l){var u=s.get("dataInputAssociations");return gn(u,function(d){return d!==l&&d.targetRef===c})}function r(s,c){var l=s.get("properties"),u=gn(l,function(d){return d.name===OR});return!u&&c&&(u=t.create("bpmn:Property",{name:OR}),er(l,u)),u}function i(s,c){var l=r(s);l&&(n(s,l,c)||qn(s.get("properties"),l))}function a(s){var c=s.context,l=c.connection,u=l.businessObject,d=l.target,h=d&&d.businessObject,f=c.newTarget,p=f&&f.businessObject,m=c.oldTarget||c.target,g=m&&m.businessObject,v=l.businessObject,x;g&&g!==h&&i(g,u),p&&p!==h&&i(p,u),h?(x=r(h,!0),v.targetRef=x):v.targetRef=null}}bN.$inject=["eventBus","bpmnFactory"];Me(bN,me);function RR(e){return function(t){var n=t.context,r=n.connection;if(C(r,"bpmn:DataInputAssociation"))return e(t)}}function db(e){this._bpmnUpdater=e}db.$inject=["bpmnUpdater"];db.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.newSemanticParent,i=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};db.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.oldSemanticParent,i=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};function wN(e,t,n,r){me.call(this,r),t.registerHandler("dataStore.updateContainment",db);function i(){return n.filter(function(c){return C(c,"bpmn:Participant")&&Ce(c).processRef})[0]}function a(c){return c.children.filter(function(l){return C(l,"bpmn:DataStoreReference")&&!l.labelTarget})}function s(c,l){var u=c.businessObject||c;if(l=l||i(),l){var d=l.businessObject||l;t.execute("dataStore.updateContainment",{dataStoreBo:u,dataStoreDi:Gt(c),newSemanticParent:d.processRef||d,newDiParent:Gt(l)})}}this.preExecute("shape.create",function(c){var l=c.context,u=l.shape;C(u,"bpmn:DataStoreReference")&&u.type!=="label"&&(l.hints||(l.hints={}),l.hints.autoResize=!1)}),this.preExecute("elements.move",function(c){var l=c.context,u=l.shapes,d=u.filter(function(h){return C(h,"bpmn:DataStoreReference")});d.length&&(l.hints||(l.hints={}),l.hints.autoResize=u.filter(function(h){return!C(h,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(c){var l=c.context,u=l.shape,d=u.parent;C(u,"bpmn:DataStoreReference")&&u.type!=="label"&&C(d,"bpmn:Collaboration")&&s(u)}),this.postExecute("shape.move",function(c){var l=c.context,u=l.shape,d=l.oldParent,h=u.parent;if(!C(d,"bpmn:Collaboration")&&C(u,"bpmn:DataStoreReference")&&u.type!=="label"&&C(h,"bpmn:Collaboration")){var f=C(d,"bpmn:Participant")?d:uPe(d,"bpmn:Participant");s(u,f)}}),this.postExecute("shape.delete",function(c){var l=c.context,u=l.shape,d=e.getRootElement();mt(u,["bpmn:Participant","bpmn:SubProcess"])&&C(d,"bpmn:Collaboration")&&a(d).filter(function(h){return lPe(h,u)}).forEach(function(h){s(h)})}),this.postExecute("canvas.updateRoot",function(c){var l=c.context,u=l.oldRoot,d=l.newRoot,h=a(u);h.forEach(function(f){C(d,"bpmn:Process")&&s(f,d)})})}wN.$inject=["canvas","commandStack","elementRegistry","eventBus"];Me(wN,me);function lPe(e,t){for(var n=e.businessObject||e,r=t.businessObject||t;n.$parent;){if(n.$parent===r.processRef||r)return!0;n=n.$parent}return!1}function uPe(e,t){for(;e.parent;){if(C(e.parent,t))return e.parent;e=e.parent}}var jy=Math.max,Sy=Math.min,dPe=20;function _6(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function hPe(e,t,n){var r=n.x,i=n.y,a={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(a.y=e.y+i,a.height=e.height-i):t.indexOf("s")!==-1&&(a.height=e.height+i),t.indexOf("e")!==-1?a.width=e.width+r:t.indexOf("w")!==-1&&(a.x=e.x+r,a.width=e.width-r),a}function fPe(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function _g(e,t,n){var r=t[e],i=n.min&&n.min[e],a=n.max&&n.max[e];return wt(i)&&(r=(/top|left/.test(e)?Sy:jy)(r,i)),wt(a)&&(r=(/top|left/.test(e)?jy:Sy)(r,a)),r}function pPe(e,t){if(!t)return e;var n=He(e);return Xj({top:_g("top",n,t),right:_g("right",n,t),bottom:_g("bottom",n,t),left:_g("left",n,t)})}function mPe(e,t,n,r){var i=He(t),a={top:/n/.test(e)?i.bottom-n.height:i.top,left:/w/.test(e)?i.right-n.width:i.left,bottom:/s/.test(e)?i.top+n.height:i.bottom,right:/e/.test(e)?i.left+n.width:i.right},s=r?He(r):a,c={top:Sy(a.top,s.top),left:Sy(a.left,s.left),bottom:jy(a.bottom,s.bottom),right:jy(a.right,s.right)};return Xj(c)}function Vh(e,t){return typeof e<"u"?e:dPe}function gPe(e,t){var n,r,i,a;return typeof t=="object"?(n=Vh(t.left),r=Vh(t.right),i=Vh(t.top),a=Vh(t.bottom)):n=r=i=a=Vh(t),{x:e.x-n,y:e.y-i,width:e.width+n+r,height:e.height+i+a}}function vPe(e){return!(e.waypoints||e.type==="label")}function j6(e,t){var n;if(e.length===void 0?n=Et(e.children,vPe):n=e,n.length)return gPe(qr(n),t)}var wo=Math.abs;function yPe(e,t){return _6(He(t),He(e))}var xPe=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],Hi=30;function hb(e,t){return t=t||[],e.children.filter(function(n){C(n,"bpmn:Lane")&&(hb(n,t),t.push(n))}),t}function gc(e){return e.children.filter(function(t){return C(t,"bpmn:Lane")})}function Wi(e){return Ad(e,xPe)||e}function bPe(e,t){var n=Wi(e),r=C(n,"bpmn:Process")?[]:[n],i=hb(n,r),a=He(e),s=He(t),c=yPe(e,t),l=[],u=vr(e);return i.forEach(function(d){if(d!==e){var h=u?0:c.top,f=u?c.right:0,p=u?0:c.bottom,m=u?c.left:0,g=He(d);c.top&&(wo(g.bottom-a.top)<10&&(p=s.top-g.bottom),wo(g.top-a.top)<5&&(h=s.top-g.top)),c.left&&(wo(g.right-a.left)<10&&(f=s.left-g.right),wo(g.left-a.left)<5&&(m=s.left-g.left)),c.bottom&&(wo(g.top-a.bottom)<10&&(h=s.bottom-g.top),wo(g.bottom-a.bottom)<5&&(p=s.bottom-g.bottom)),c.right&&(wo(g.left-a.right)<10&&(m=s.right-g.left),wo(g.right-a.right)<5&&(f=s.right-g.right)),(h||f||p||m)&&l.push({shape:d,newBounds:fPe(d,{top:h,right:f,bottom:p,left:m})})}}),l}var wPe=500;function _N(e,t){me.call(this,e);function n(r,i){var a=vr(r),s=gc(i),c=[],l=[],u=[],d=[];if(Vy(s,function(v){return a?v.y>r.y?l.push(v):c.push(v):v.x>r.x?d.push(v):u.push(v),v.children}),!!s.length){var h;a?l.length&&c.length?h=r.height/2:h=r.height:d.length&&u.length?h=r.width/2:h=r.width;var f,p,m,g;c.length&&(f=t.calculateAdjustments(c,"y",h,r.y-10),t.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:h},"s")),l.length&&(p=t.calculateAdjustments(l,"y",-h,r.y+r.height+10),t.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:-h},"n")),u.length&&(m=t.calculateAdjustments(u,"x",h,r.x-10),t.makeSpace(m.movingShapes,m.resizingShapes,{x:h,y:0},"e")),d.length&&(g=t.calculateAdjustments(d,"x",-h,r.x+r.width+10),t.makeSpace(g.movingShapes,g.resizingShapes,{x:-h,y:0},"w"))}}this.postExecuted("shape.delete",wPe,function(r){var i=r.context,a=i.hints,s=i.shape,c=i.oldParent;C(s,"bpmn:Lane")&&(a&&a.nested||n(s,c))})}_N.$inject=["eventBus","spaceTool"];Me(_N,me);var $R=500;function fb(e,t){t.invoke(me,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",$R,function(r){var i=r.elements;i.filter(function(a){var s=a.host;return IR(a,s)}).map(function(a){return i.indexOf(a)}).forEach(function(a){r.elements[a]=n._replaceShape(i[a])})},!0),this.preExecute("elements.move",$R,function(r){var i=r.shapes,a=r.newHost;i.forEach(function(s,c){var l=s.host;IR(s,jPe(i,l)?l:a)&&(i[c]=n._replaceShape(s))})},!0)}fb.$inject=["bpmnReplace","injector"];Me(fb,me);fb.prototype._replaceShape=function(e){var t=_Pe(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function _Pe(e){var t=Ce(e),n=t.eventDefinitions;return n&&n[0]}function IR(e,t){return!kt(e)&&C(e,"bpmn:BoundaryEvent")&&!t}function jPe(e,t){return e.indexOf(t)!==-1}function jN(e,t,n){me.call(this,e);function r(i,a,s){var c=a.waypoints,l,u,d,h,f,p,m,g=i.outgoing.slice(),v=i.incoming.slice(),x;wt(s.width)?x=tt(s):x=s;var b=vj(c,x);if(b){if(l=c.slice(0,b.index),u=c.slice(b.index+(b.bendpoint?1:0)),!l.length||!u.length)return;d=b.bendpoint?c[b.index]:x,(l.length===1||!MR(i,l[l.length-1]))&&l.push(DR(d)),(u.length===1||!MR(i,u[0]))&&u.unshift(DR(d))}h=a.source,f=a.target,t.canConnect(h,i,a)&&(n.reconnectEnd(a,i,l||x),p=a),t.canConnect(i,f,a)&&(p?m=n.connect(i,f,{type:a.type,waypoints:u}):(n.reconnectStart(a,i,u||x),m=a));var w=[].concat(p&&Et(v,function(_){return _.source===p.source})||[],m&&Et(g,function(_){return _.target===m.target})||[]);w.length&&n.removeElements(w)}this.preExecute("elements.move",function(i){var a=i.newParent,s=i.shapes,c=i.delta,l=s[0];if(!(!l||!a)){a&&a.waypoints&&(i.newParent=a=a.parent);var u=tt(l),d={x:u.x+c.x,y:u.y+c.y},h=gn(a.children,function(f){var p=t.canInsert(s,f);return p&&vj(f.waypoints,d)});h&&(i.targetFlow=h,i.position=d)}},!0),this.postExecuted("elements.move",function(i){var a=i.shapes,s=i.targetFlow,c=i.position;s&&r(a[0],s,c)},!0),this.preExecute("shape.create",function(i){var a=i.parent,s=i.shape;t.canInsert(s,a)&&(i.targetFlow=a,i.parent=a.parent)},!0),this.postExecuted("shape.create",function(i){var a=i.shape,s=i.targetFlow,c=i.position;s&&r(a,s,c)},!0)}Me(jN,me);jN.$inject=["eventBus","bpmnRules","modeling"];function MR(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function DR(e){return ee({},e)}function SN(e,t){me.call(this,e),this.preExecuted("connection.create",function(n){var r=n.context,i=r.connection,a=r.source,s=r.target,c=r.hints;if(!(c&&c.createElementsBehavior===!1)&&iu(i)){var l=[];C(a,"bpmn:EventBasedGateway")?l=s.incoming.filter(u=>u!==i&&iu(u)):l=s.incoming.filter(u=>u!==i&&iu(u)&&C(u.source,"bpmn:EventBasedGateway")),l.forEach(function(u){t.removeConnection(u)})}}),this.preExecuted("shape.replace",function(n){var r=n.context,i=r.newShape;if(C(i,"bpmn:EventBasedGateway")){var a=i.outgoing.filter(iu).reduce(function(s,c){return s.includes(c.target)?s:s.concat(c.target)},[]);a.forEach(function(s){s.incoming.filter(iu).forEach(function(c){const l=s.incoming.filter(iu).filter(function(u){return u.source===i});(c.source!==i||l.length>1)&&t.removeConnection(c)})})}})}SN.$inject=["eventBus","modeling"];Me(SN,me);function iu(e){return C(e,"bpmn:SequenceFlow")}var jg=1500,LR=2e3;function S6(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],jg,function(r){var i=r.context,a=i.shape||r.shape,s=r.hover;C(s,"bpmn:Lane")&&!mt(a,["bpmn:Lane","bpmn:Participant"])&&(r.hover=Wi(s),r.hoverGfx=e.getGraphics(r.hover));var c=n.getRootElement();s!==c&&(a.labelTarget||mt(a,["bpmn:Group","bpmn:TextAnnotation"]))&&(r.hover=c,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],jg,function(r){var i=r.hover;C(i,"bpmn:Lane")&&(r.hover=Wi(i)||i,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["bendpoint.move.hover"],jg,function(r){var i=r.context,a=r.hover,s=i.type;C(a,"bpmn:Lane")&&/reconnect/.test(s)&&(r.hover=Wi(a)||a,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.start"],jg,function(r){var i=r.context,a=i.start;C(a,"bpmn:Lane")&&(i.start=Wi(a)||a)}),t.on("shape.move.start",LR,function(r){var i=r.shape;C(i,"bpmn:Lane")&&(r.shape=Wi(i)||i)}),t.on("spaceTool.move",LR,function(r){var i=r.hover;i&&C(i,"bpmn:Lane")&&(r.hover=Wi(i))})}S6.$inject=["elementRegistry","eventBus","canvas"];function SPe(e){return e.create("bpmn:Category")}function EPe(e){return e.create("bpmn:CategoryValue")}function NPe(e,t,n){return er(t.get("categoryValue"),e),e.$parent=t,er(n.get("rootElements"),t),t.$parent=n,e}function PPe(e){var t=e.$parent;return t&&(qn(t.get("categoryValue"),e),e.$parent=null),e}function kPe(e){var t=e.$parent;return t&&(qn(t.get("rootElements"),e),e.$parent=null),e}var BR=770;function EN(e,t,n,r,i,a){i.invoke(me,this);function s(){return n.filter(function(m){return C(m,"bpmn:Group")})}function c(m,g){return m.some(function(v){var x=Ce(v),b=x.categoryValueRef&&x.categoryValueRef.$parent;return b===g})}function l(m,g){return m.some(function(v){var x=Ce(v);return x.categoryValueRef===g})}function u(m,g,v){var x=s().filter(function(b){return b.businessObject!==v});g&&!c(x,g)&&kPe(g),m&&!l(x,m)&&PPe(m)}function d(m,g){return NPe(m,g,t.getDefinitions())}function h(m,g){var v=Ce(m),x=v.categoryValueRef;x||(x=v.categoryValueRef=g.categoryValue=g.categoryValue||EPe(e));var b=x.$parent;b||(b=x.$parent=g.category=g.category||SPe(e)),d(x,b,t.getDefinitions())}function f(m,g){var v=g.category,x=g.categoryValue,b=Ce(m);x?(b.categoryValueRef=null,u(x,v,b)):u(null,b.categoryValueRef.$parent,b)}this.execute("label.create",function(m){var g=m.context,v=g.labelTarget;C(v,"bpmn:Group")&&h(v,g)}),this.revert("label.create",function(m){var g=m.context,v=g.labelTarget;C(v,"bpmn:Group")&&f(v,g)}),this.execute("shape.delete",function(m){var g=m.context,v=g.shape,x=Ce(v);if(!(!C(v,"bpmn:Group")||v.labelTarget)){var b=g.categoryValue=x.categoryValueRef,w;b&&(w=g.category=b.$parent,u(b,w,x),x.categoryValueRef=null)}}),this.reverted("shape.delete",function(m){var g=m.context,v=g.shape;if(!(!C(v,"bpmn:Group")||v.labelTarget)){var x=g.category,b=g.categoryValue,w=Ce(v);b&&(w.categoryValueRef=b,d(b,x))}}),this.execute("shape.create",function(m){var g=m.context,v=g.shape;!C(v,"bpmn:Group")||v.labelTarget||Ce(v).categoryValueRef&&h(v,g)}),this.reverted("shape.create",function(m){var g=m.context,v=g.shape;!C(v,"bpmn:Group")||v.labelTarget||Ce(v).categoryValueRef&&f(v,g)});function p(m,g){var v=e.create(m.$type);return a.copyElement(m,v,null,g)}r.on("copyPaste.copyElement",BR,function(m){var g=m.descriptor,v=m.element;if(!(!C(v,"bpmn:Group")||v.labelTarget)){var x=Ce(v);if(x.categoryValueRef){var b=x.categoryValueRef;g.categoryValue=p(b,!0),b.$parent&&(g.category=p(b.$parent,!0))}}}),r.on("copyPaste.pasteElement",BR,function(m){var g=m.descriptor,v=g.businessObject,x=g.categoryValue,b=g.category;x&&(x=v.categoryValueRef=p(x)),b&&(x.$parent=p(b)),delete g.category,delete g.categoryValue})}EN.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];Me(EN,me);function Sj(e,t,n,r){var i,a,s,c,l;return i=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y),i==0?null:(a=e.y-n.y,s=e.x-n.x,l=(r.x-n.x)*a-(r.y-n.y)*s,c=l/i,{x:Math.round(e.x+c*(t.x-e.x)),y:Math.round(e.y+c*(t.y-e.y))})}function E6(e){function t(r,i,a){var s={x:a.x,y:a.y-50},c={x:a.x-50,y:a.y},l=Sj(r,i,a,s),u=Sj(r,i,a,c),d;l&&u?FR(l,a)>FR(u,a)?d=u:d=l:d=l||u,r.original=d}function n(r){var i=r.waypoints;t(i[0],i[1],tt(r.source)),t(i[i.length-1],i[i.length-2],tt(r.target))}e.on("bpmnElement.added",function(r){var i=r.element;i.waypoints&&n(i)})}E6.$inject=["eventBus"];function FR(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function NN(e){me.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var r=n.context.shape,i=Ce(r),a=Gt(r);if(mt(i,t)){var s=a.get("isHorizontal");s===void 0&&(s=!0),a.set("isHorizontal",s)}})}NN.$inject=["eventBus"];Me(NN,me);var N6=Math.sqrt,P6=Math.min,CPe=Math.max,zR=Math.abs;function UR(e){return Math.pow(e,2)}function Gh(e,t){return N6(UR(e.x-t.x)+UR(e.y-t.y))}function APe(e,t){var n=0,r,i,a,s,c,l,u,d,h,f,p;for(n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],VR(r,i)?u=[r]:(a=Gh(e,r),s=Gh(e,i),l=P6(a,s),u=TPe(r,i,e,l)),u.length<1)throw new Error("expected between [1, 2] circle -> line intersections");u.length===1&&(d={type:"bendpoint",position:u[0],segmentIndex:n,bendpointIndex:VR(r,u[0])?n:n+1}),u.length===2&&(c=RPe(u[0],u[1]),d={type:"segment",position:c,segmentIndex:n,relativeLocation:Gh(r,c)/Gh(r,i)}),h=Gh(d.position,e),(!p||f>h)&&(p=d,f=h)}return p}function TPe(e,t,n,r){var i=t.x-e.x,a=t.y-e.y,s=n.x-e.x,c=n.y-e.y,l=i*i+a*a,u=i*s+a*c,d=s*s+c*c-r*r,h=u/l,f=d/l,p=h*h-f;if(p<0&&p>-1e-6&&(p=0),p<0)return[];var m=N6(p),g=-h+m,v=-h-m,x={x:e.x-i*g,y:e.y-a*g};if(p===0)return[x];var b={x:e.x-i*v,y:e.y-a*v};return[x,b].filter(function(w){return OPe(w,e,t)})}function OPe(e,t,n){return HR(e.x,t.x,n.x)&&HR(e.y,t.y,n.y)}function HR(e,t,n){return e>=P6(t,n)-Ey&&e<=CPe(t,n)+Ey}function RPe(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var Ey=.1;function VR(e,t){return zR(e.x-t.x)<=Ey&&zR(e.y-t.y)<=Ey}function $Pe(e,t,n,r){var i=n.segmentIndex,a=t.length-e.length;if(r.segmentMove){var s=r.segmentMove.segmentStartIndex,c=r.segmentMove.newSegmentStartIndex;return i===s?c:i>=c?i+a<c?c:i+a:i}if(r.bendpointMove){var l=r.bendpointMove.insert,u=r.bendpointMove.bendpointIndex,d;if(a===0)return i;if(i>=u&&(d=l?i+1:i-1),i<u&&(d=i,l&&n.type!=="bendpoint"&&u-1===i)){var h=C6(t,u);h<n.relativeLocation&&d++}return d}return a===0?i:r.connectionStart&&i===0?0:r.connectionEnd&&i===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function k6(e,t,n,r){var i=0,a=0,s={point:e,delta:{x:0,y:0}},c=APe(e,n),l=c.segmentIndex,u=$Pe(n,t,c,r);if(u<0||u>t.length-2||u===null)return s;var d=GR(n,l),h=GR(t,u),f=c.position,p=MPe(d,f),m=IPe(d,h);if(c.type==="bendpoint"){var g=t.length-n.length,v=c.bendpointIndex,x=n[v];if(t.indexOf(x)!==-1)return s;if(g===0){var b=t[v];return i=b.x-c.position.x,a=b.y-c.position.y,{delta:{x:i,y:a},point:{x:e.x+i,y:e.y+a}}}g<0&&v!==0&&v<n.length-1&&(p=C6(n,v))}var w={x:(h[1].x-h[0].x)*p+h[0].x,y:(h[1].y-h[0].y)*p+h[0].y},_=ENe({x:e.x-f.x,y:e.y-f.y},m);return i=w.x+_.x-e.x,a=w.y+_.y-e.y,{point:_f(w),delta:_f({x:i,y:a})}}function C6(e,t){var n=wy(e[t-1],e[t]),r=wy(e[t],e[t+1]),i=n/(n+r);return i}function IPe(e,t){var n=mR(e),r=mR(t);return r-n}function GR(e,t){return[e[t],e[t+1]]}function MPe(e,t){var n=wy(e[0],e[1]),r=wy(e[0],t);return n===0?0:r/n}function DPe(e,t,n,r){var i=tt(e);return k6(i,t,n,r).delta}function tm(e,t,n){var r=yf(t),i=yf(n),a=Ma(e,r),s={x:a.x*(n.width/t.width),y:a.y*(n.height/t.height)};return _f({x:i.x+s.x,y:i.y+s.y})}function WR(e,t,n){var r=yf(e),i=yf(t),a=yf(n),s=Ma(e,r),c=Ma(r,i),l=LPe(r,t,n);if(l)return l;var u={x:c.x*(n.width/t.width),y:c.y*(n.height/t.height)},d={x:a.x+u.x,y:a.y+u.y};return _f({x:d.x+s.x-e.x,y:d.y+s.y-e.y})}function LPe(e,t,n){var r=He(t),i=He(n);if(BPe(r,i))return null;var a=Nr(t,e),s,c,l;if(a==="top")s={x:0,y:i.bottom-r.bottom};else if(a==="bottom")s={x:0,y:i.top-r.top};else if(a==="right")s={x:i.left-r.left,y:0};else if(a==="left")s={x:i.right-r.right,y:0};else return null;return c={x:e.x+s.x,y:e.y+s.y},l=Nr(n,c),l!==a?null:s}function BPe(e,t){return FPe(e,t)||zPe(e,t)}function FPe(e,t){return e.right!==t.right&&e.left!==t.left}function zPe(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var qR="name",KR="text";function PN(e,t,n,r){me.call(this,e),this.postExecute("element.updateProperties",i),this.postExecute("element.updateModdleProperties",s=>{Ce(s.context.element)===s.context.moddleElement&&i(s)});function i(s){var c=s.context,l=c.element,u=c.properties;if(qR in u&&t.updateLabel(l,u[qR]),KR in u&&C(l,"bpmn:TextAnnotation")){var d=r.getTextAnnotationBounds({x:l.x,y:l.y,width:l.width,height:l.height},u[KR]||"");t.updateLabel(l,u.text,d)}}this.postExecute(["shape.create","connection.create"],function(s){var c=s.context,l=c.hints||{};if(l.createElementsBehavior!==!1){var u=c.shape||c.connection;kt(u)||!qu(u)||gl(u)&&t.updateLabel(u,gl(u))}}),this.postExecute("shape.delete",function(s){var c=s.context,l=c.labelTarget,u=c.hints||{};l&&u.unsetLabel!==!1&&t.updateLabel(l,null,null,{removeShape:!1})});function a(s){var c=s.context,l=c.connection,u=l.label,d=ee({},c.hints),h=c.newWaypoints||l.waypoints,f=c.oldWaypoints;return typeof d.startChanged>"u"&&(d.startChanged=!!d.connectionStart),typeof d.endChanged>"u"&&(d.endChanged=!!d.connectionEnd),DPe(u,h,f,d)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(s){var c=s.context,l=c.hints||{};if(l.labelBehavior!==!1){var u=c.connection,d=u.label,h;!d||!d.parent||(h=a(s),t.moveShape(d,h))}}),this.postExecute(["shape.replace"],function(s){var c=s.context,l=c.newShape,u=c.oldShape,d=Ce(l);d&&qu(d)&&u.label&&l.label&&(l.label.x=u.label.x,l.label.y=u.label.y)}),this.postExecute("shape.resize",function(s){var c=s.context,l=c.shape,u=c.newBounds,d=c.oldBounds;if(Hy(l)){var h=l.label,f=tt(h),p=VPe(d),m=HPe(f,p),g=UPe(m,d,u);t.moveShape(h,g)}})}Me(PN,me);PN.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function UPe(e,t,n){var r=tm(e,t,n);return _f(Ma(r,e))}function HPe(e,t){if(t.length){var n=GPe(e,t);return oN(e,n)}}function VPe(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function GPe(e,t){var n=t.map(function(i){return{line:i,distance:a6(e,i)}}),r=Gs(n,"distance");return r[0].line}function WPe(e,t,n,r){return k6(e,t,n,r).point}function kN(e,t){me.call(this,e);function n(r,i){var a=r.context,s=a.connection,c=ee({},a.hints),l=a.newWaypoints||s.waypoints,u=a.oldWaypoints;return typeof c.startChanged>"u"&&(c.startChanged=!!c.connectionStart),typeof c.endChanged>"u"&&(c.endChanged=!!c.connectionEnd),WPe(i,l,u,c)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(r){var i=r.context,a=i.connection,s=a.outgoing,c=a.incoming;c.forEach(function(l){var u=l.waypoints[l.waypoints.length-1],d=n(r,u),h=[].concat(l.waypoints.slice(0,-1),[d]);t.updateWaypoints(l,h)}),s.forEach(function(l){var u=l.waypoints[0],d=n(r,u),h=[].concat([d],l.waypoints.slice(1));t.updateWaypoints(l,h)})}),this.postExecute(["connection.move"],function(r){var i=r.context,a=i.connection,s=a.outgoing,c=a.incoming,l=i.delta;c.forEach(function(u){var d=u.waypoints[u.waypoints.length-1],h={x:d.x+l.x,y:d.y+l.y},f=[].concat(u.waypoints.slice(0,-1),[h]);t.updateWaypoints(u,f)}),s.forEach(function(u){var d=u.waypoints[0],h={x:d.x+l.x,y:d.y+l.y},f=[].concat([h],u.waypoints.slice(1));t.updateWaypoints(u,f)})})}Me(kN,me);kN.$inject=["eventBus","modeling"];function pb(e,t,n){var r=gb(e),i=T6(r,t),a=r[0];return i.length?i[i.length-1]:tm(a.original||a,n,t)}function mb(e,t,n){var r=gb(e),i=T6(r,t),a=r[r.length-1];return i.length?i[0]:tm(a.original||a,n,t)}function CN(e,t,n){var r=gb(e),i=A6(t,n),a=r[0];return tm(a.original||a,i,t)}function AN(e,t,n){var r=gb(e),i=A6(t,n),a=r[r.length-1];return tm(a.original||a,i,t)}function A6(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function gb(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function T6(e,t){var n=Ti(e,KPe);return Et(n,function(r){return qPe(r,t)})}function qPe(e,t){return Nr(t,e,1)==="intersect"}function KPe(e){return e.original||e}function TN(e,t){me.call(this,e),this.postExecute("shape.replace",function(n){var r=n.oldShape,i=n.newShape;if(YPe(r,i)){var a=XPe(r);a.incoming.forEach(function(s){var c=mb(s,i,r);t.reconnectEnd(s,i,c)}),a.outgoing.forEach(function(s){var c=pb(s,i,r);t.reconnectStart(s,i,c)})}},!0)}TN.$inject=["eventBus","modeling"];Me(TN,me);function YPe(e,t){return C(e,"bpmn:Participant")&&Mt(e)&&C(t,"bpmn:Participant")&&!Mt(t)}function XPe(e){var t=Rp([e],!1),n=[],r=[];return t.forEach(function(i){i!==e&&(i.incoming.forEach(function(a){C(a,"bpmn:MessageFlow")&&n.push(a)}),i.outgoing.forEach(function(a){C(a,"bpmn:MessageFlow")&&r.push(a)}))},[]),{incoming:n,outgoing:r}}const ZPe=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function O6(e){const t=Ce(e);if(!C(t,"bpmn:BoundaryEvent")&&!(C(t,"bpmn:StartEvent")&&$r(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:ZPe.some(r=>C(n[0],r))}function R6(e){return C(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function ON(e,t){e.invoke(me,this),this.postExecuted("shape.replace",function(n){const r=n.context.oldShape,i=n.context.newShape,a=n.context.hints;if(!O6(i))return;const s=R6(i);if(a.targetElement&&a.targetElement[s]!==void 0)return;const l=Ce(r).get(s),u=Ce(i).get(s);l!==u&&t.updateProperties(i,{[s]:l})})}ON.$inject=["injector","modeling"];Me(ON,me);function RN(e,t){me.call(this,e),this.preExecute("shape.resize",function(n){var r=n.shape,i=Gt(r),a=i&&i.get("label"),s=a&&a.get("bounds");s&&t.updateModdleProperties(r,a,{bounds:void 0})},!0)}Me(RN,me);RN.$inject=["eventBus","modeling"];function $N(e,t,n){me.call(this,e),this.preExecute("shape.delete",function(r){var i=r.context.shape;if(!(i.incoming.length!==1||i.outgoing.length!==1)){var a=i.incoming[0],s=i.outgoing[0];if(!(!C(a,"bpmn:SequenceFlow")||!C(s,"bpmn:SequenceFlow"))&&t.canConnect(a.source,s.target,a)){var c=JPe(a.waypoints,s.waypoints);n.reconnectEnd(a,s.target,c)}}})}Me($N,me);$N.$inject=["eventBus","bpmnRules","modeling"];function au(e){return e.original||e}function JPe(e,t){var n=Sj(au(e[e.length-2]),au(e[e.length-1]),au(t[1]),au(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[au(e[0]),au(t[t.length-1])]}function IN(e,t){me.call(this,e),this.preExecute("shape.delete",function(n){var r=n.shape,i=r.parent;C(r,"bpmn:Participant")&&(n.collaborationRoot=i)},!0),this.postExecute("shape.delete",function(n){var r=n.collaborationRoot;if(r&&!r.businessObject.participants.length){var i=t.makeProcess(),a=r.children.slice();t.moveElements(a,{x:0,y:0},i)}},!0)}IN.$inject=["eventBus","modeling"];Me(IN,me);function MN(e,t,n,r){me.call(this,e);var i=r.get("dragging",!1);function a(l){var u=l.source,d=l.target,h=l.parent;if(h){var f,p;C(l,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(u,d)||(p=!0),n.canConnectMessageFlow(u,d)&&(f="bpmn:MessageFlow")),C(l,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(u,d)||(p=!0),n.canConnectSequenceFlow(u,d)&&(f="bpmn:SequenceFlow")),p&&t.removeConnection(l),f&&t.connect(u,d,{type:f,waypoints:l.waypoints.slice()})}}function s(l){var u=l.context,d=u.connection,h=u.newSource||d.source,f=u.newTarget||d.target,p,m;p=n.canConnect(h,f),!(!p||p.type===d.type)&&(m=t.connect(h,f,{type:p.type,associationDirection:p.associationDirection,waypoints:d.waypoints.slice()}),d.parent&&t.removeConnection(d),u.connection=m,i&&c(d,m))}function c(l,u){var d=i.context(),h=d&&d.payload.previousSelection,f;!h||!h.length||(f=h.indexOf(l),f!==-1&&h.splice(f,1,u))}this.postExecuted("elements.move",function(l){var u=l.closure,d=u.allConnections;Y(d,a)},!0),this.preExecute("connection.reconnect",s),this.postExecuted("element.updateProperties",function(l){var u=l.context,d=u.properties,h=u.element,f=h.businessObject,p;d.default&&(p=gn(h.outgoing,Ms({id:h.businessObject.default.id})),p&&t.updateProperties(p,{conditionExpression:void 0})),d.conditionExpression&&f.sourceRef.default===f&&t.updateProperties(h.source,{default:void 0})})}Me(MN,me);MN.$inject=["eventBus","modeling","bpmnRules","injector"];function vb(e,t,n,r,i,a){r.invoke(me,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=a,this.postExecuted(["elements.create"],500,function(s){var c=s.context,l=c.parent,u=c.elements,d=rc(u,function(h,f){var p=t.canReplace([f],f.host||f.parent||l);return p?h.concat(p.replacements):h},[]);d.length&&this._replaceElements(u,d)},this),this.postExecuted(["elements.move"],500,function(s){var c=s.context,l=c.newParent,u=c.newHost,d=[];Y(c.closure.topLevel,function(f){$r(f)?d=d.concat(f.children):d=d.concat(f)}),d.length===1&&u&&(l=u);var h=t.canReplace(d,l);h&&this._replaceElements(d,h.replacements,u)},this),this.postExecute(["shape.replace"],1500,function(s){var c=s.context,l=c.oldShape,u=c.newShape,d=l.attachers,h;d&&d.length&&(h=t.canReplace(d,u),this._replaceElements(d,h.replacements))},this),this.postExecuted(["shape.replace"],1500,function(s){var c=s.context,l=c.oldShape,u=c.newShape;i.unclaimId(l.businessObject.id,l.businessObject),i.updateProperties(u,{id:l.id})})}Me(vb,me);vb.prototype._replaceElements=function(e,t){var n=this._elementRegistry,r=this._bpmnReplace,i=this._selection;Y(t,function(a){var s={type:a.newElementType},c=n.get(a.oldElementId),l=e.indexOf(c);e[l]=r.replaceElement(c,s,{select:!1})}),t&&i.select(e)};vb.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var QPe=1500,eke={width:140,height:120},DN={width:300,height:60},LN={width:60,height:300},Hg={width:300,height:150},Vg={width:150,height:300},$6={width:140,height:120},I6={width:50,height:30};function M6(e){e.on("resize.start",QPe,function(t){var n=t.context,r=n.shape,i=n.direction,a=n.balanced;(C(r,"bpmn:Lane")||C(r,"bpmn:Participant"))&&(n.resizeConstraints=ake(r,i,a)),C(r,"bpmn:SubProcess")&&Mt(r)&&(n.minDimensions=$6),C(r,"bpmn:TextAnnotation")&&(n.minDimensions=I6)})}M6.$inject=["eventBus"];var _o=Math.abs,tke=Math.min,nke=Math.max;function D6(e,t,n,r){var i=e[t];e[t]=i===void 0?n:r(n,i)}function su(e,t,n){return D6(e,t,n,tke)}function ou(e,t,n){return D6(e,t,n,nke)}var rke={top:20,left:50,right:20,bottom:20},ike={top:50,left:20,right:20,bottom:20};function ake(e,t,n){var r=Wi(e),i=!0,a=!0,s=hb(r,[r]),c=He(e),l={},u={},d=vr(e),h=d?DN:LN;/n/.test(t)?u.top=c.bottom-h.height:/e/.test(t)?u.right=c.left+h.width:/s/.test(t)?u.bottom=c.top+h.height:/w/.test(t)&&(u.left=c.right-h.width),s.forEach(function(m){var g=He(m);d?(g.top<c.top-10&&(i=!1),g.bottom>c.bottom+10&&(a=!1)):(g.left<c.left-10&&(i=!1),g.right>c.right+10&&(a=!1)),/n/.test(t)&&(n&&_o(c.top-g.bottom)<10&&ou(l,"top",g.top+h.height),_o(c.top-g.top)<5&&su(u,"top",g.bottom-h.height)),/e/.test(t)&&(n&&_o(c.right-g.left)<10&&su(l,"right",g.right-h.width),_o(c.right-g.right)<5&&ou(u,"right",g.left+h.width)),/s/.test(t)&&(n&&_o(c.bottom-g.top)<10&&su(l,"bottom",g.bottom-h.height),_o(c.bottom-g.bottom)<5&&ou(u,"bottom",g.top+h.height)),/w/.test(t)&&(n&&_o(c.left-g.right)<10&&ou(l,"left",g.left+h.width),_o(c.left-g.left)<5&&su(u,"left",g.right-h.width))});var f=r.children.filter(function(m){return!m.hidden&&!m.waypoints&&(C(m,"bpmn:FlowElement")||C(m,"bpmn:Artifact"))}),p=d?rke:ike;return f.forEach(function(m){var g=He(m);/n/.test(t)&&(!d||i)&&su(u,"top",g.top-p.top),/e/.test(t)&&(d||a)&&ou(u,"right",g.right+p.right),/s/.test(t)&&(!d||a)&&ou(u,"bottom",g.bottom+p.bottom),/w/.test(t)&&(d||i)&&su(u,"left",g.left-p.left)}),{min:u,max:l}}var YR=1001;function L6(e,t){e.on("resize.start",YR+500,function(n){var r=n.context,i=r.shape;(C(i,"bpmn:Lane")||C(i,"bpmn:Participant"))&&(r.balanced=!jf(n))}),e.on("resize.end",YR,function(n){var r=n.context,i=r.shape,a=r.canExecute,s=r.newBounds;if(C(i,"bpmn:Lane")||C(i,"bpmn:Participant"))return a&&(s=uM(s),t.resizeLane(i,s,r.balanced)),!1})}L6.$inject=["eventBus","modeling"];var ske=500;function BN(e,t,n,r,i){n.invoke(me,this);function a(d){return mt(d,["bpmn:ReceiveTask","bpmn:SendTask"])||oke(d,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function s(d){var h=e.getDefinitions(),f=h.get("rootElements");return!!gn(f,Ms({id:d.id}))}function c(d){if(C(d,"bpmn:ErrorEventDefinition"))return"errorRef";if(C(d,"bpmn:EscalationEventDefinition"))return"escalationRef";if(C(d,"bpmn:MessageEventDefinition"))return"messageRef";if(C(d,"bpmn:SignalEventDefinition"))return"signalRef"}function l(d){if(mt(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.get("messageRef");var h=d.get("eventDefinitions"),f=h[0];return f.get(c(f))}function u(d,h){if(mt(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.set("messageRef",h);var f=d.get("eventDefinitions"),p=f[0];return p.set(c(p),h)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(d){var h=d.shape||d.element;if(a(h)){var f=Ce(h),p=l(f),m;p&&!s(p)&&(m=e.getDefinitions().get("rootElements"),er(m,p),d.addedRootElement=p)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(d){var h=d.addedRootElement;if(h){var f=e.getDefinitions().get("rootElements");qn(f,h)}},!0),t.on("copyPaste.copyElement",function(d){var h=d.descriptor,f=d.element;if(!(f.labelTarget||!a(f))){var p=Ce(f),m=l(p);m&&(h.referencedRootElement=m)}}),t.on("copyPaste.pasteElement",ske,function(d){var h=d.descriptor,f=h.businessObject,p=h.referencedRootElement;p&&(s(p)||(p=r.copyElement(p,i.create(p.$type))),u(f,p),delete h.referencedRootElement)})}BN.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];Me(BN,me);function oke(e,t){return jt(t)||(t=[t]),$p(t,function(n){return Jj(e,n)})}var B6=Math.max;function F6(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,r=t.axis,i=t.start,a={};return Y(n,function(s){var c=s.id;C(s,"bpmn:Participant")&&(a[c]=lke(s,r,i)),C(s,"bpmn:Lane")&&(a[c]=vr(s)?DN:LN),C(s,"bpmn:SubProcess")&&Mt(s)&&(a[c]=$6),C(s,"bpmn:TextAnnotation")&&(a[c]=I6),C(s,"bpmn:Group")&&(a[c]=eke)}),a})}F6.$inject=["eventBus"];function cke(e){return e==="x"}function lke(e,t,n){var r=vr(e);if(!hke(e))return r?Hg:Vg;var i=cke(t),a={};return i?r?a=Hg:a={width:dke(e,n,i),height:Vg.height}:r?a={width:Hg.width,height:uke(e,n,i)}:a=Vg,a}function uke(e,t,n){var r;return r=fke(e,t,n),B6(Hg.height,r)}function dke(e,t,n){var r;return r=pke(e,t,n),B6(Vg.width,r)}function hke(e){return!!gc(e).length}function fke(e,t,n){var r=gc(e),i;return i=FN(r,t,n),e.height-i.height+DN.height}function pke(e,t,n){var r=gc(e),i;return i=FN(r,t,n),e.width-i.width+LN.width}function FN(e,t,n){var r,i,a;for(r=0;r<e.length;r++)if(i=e[r],!n&&t>=i.y&&t<=i.y+i.height||n&&t>=i.x&&t<=i.x+i.width)return a=gc(i),a.length?FN(a,t,n):i}var XR=400,mke=600,ZR={x:180,y:160};function vc(e,t,n,r,i,a,s){me.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=r,this._bpmnFactory=i,this._bpmnjs=a,this._elementRegistry=s;var c=this;function l(h){return C(h,"bpmn:SubProcess")&&!Mt(h)}function u(h){var f=h.shape,p=h.newRootElement,m=Ce(f);p=c._addDiagram(p||m),h.newRootElement=e.addRootElement(p)}function d(h){var f=h.shape,p=Ce(f);c._removeDiagram(p);var m=h.newRootElement=s.get(cu(p));e.removeRootElement(m)}this.executed("shape.create",function(h){var f=h.shape;l(f)&&u(h)},!0),this.postExecuted("shape.create",function(h){var f=h.shape,p=h.newRootElement;!p||!f.children||(c._showRecursively(f.children),c._moveChildrenToShape(f,p))},!0),this.reverted("shape.create",function(h){var f=h.shape;l(f)&&d(h)},!0),this.preExecuted("shape.delete",function(h){var f=h.shape;if(l(f)){var p=s.get(cu(f));p&&n.removeElements(p.children.slice())}},!0),this.executed("shape.delete",function(h){var f=h.shape;l(f)&&d(h)},!0),this.reverted("shape.delete",function(h){var f=h.shape;l(f)&&u(h)},!0),this.preExecuted("shape.replace",function(h){var f=h.oldShape,p=h.newShape;!l(f)||!l(p)||(h.oldRoot=e.removeRootElement(cu(f)))},!0),this.postExecuted("shape.replace",function(h){var f=h.newShape,p=h.oldRoot,m=e.findRoot(cu(f));if(!(!p||!m)){var g=p.children;n.moveElements(g,{x:0,y:0},m)}},!0),this.executed("element.updateProperties",function(h){var f=h.element;if(C(f,"bpmn:SubProcess")){var p=h.properties,m=h.oldProperties,g=m.id,v=p.id;if(g!==v){if(Mg(f)){s.updateId(f,Nc(v)),s.updateId(g,v);return}var x=s.get(Nc(g));x&&s.updateId(Nc(g),Nc(v))}}},!0),this.reverted("element.updateProperties",function(h){var f=h.element;if(C(f,"bpmn:SubProcess")){var p=h.properties,m=h.oldProperties,g=m.id,v=p.id;if(g!==v){if(Mg(f)){s.updateId(f,Nc(g)),s.updateId(v,g);return}var x=s.get(Nc(v));x&&s.updateId(x,Nc(g))}}},!0),t.on("element.changed",function(h){var f=h.element;if(Mg(f)){var p=f,m=s.get(lk(p));!m||m===p||t.fire("element.changed",{element:m})}}),this.executed("shape.toggleCollapse",XR,function(h){var f=h.shape;C(f,"bpmn:SubProcess")&&(Mt(f)?d(h):(u(h),c._showRecursively(f.children)))},!0),this.reverted("shape.toggleCollapse",XR,function(h){var f=h.shape;C(f,"bpmn:SubProcess")&&(Mt(f)?d(h):(u(h),c._showRecursively(f.children)))},!0),this.postExecuted("shape.toggleCollapse",mke,function(h){var f=h.shape;if(C(f,"bpmn:SubProcess")){var p=h.newRootElement;p&&(Mt(f)?c._moveChildrenToShape(p,f):c._moveChildrenToShape(f,p))}},!0),t.on("copyPaste.createTree",function(h){var f=h.element,p=h.children;if(l(f)){var m=cu(f),g=s.get(m);g&&p.push.apply(p,g.children)}}),t.on("copyPaste.copyElement",function(h){var f=h.descriptor,p=h.element,m=h.elements,g=p.parent,v=C(Gt(g),"bpmndi:BPMNPlane");if(v){var x=lk(g),b=gn(m,function(w){return w.id===x});b&&(f.parent=b.id)}}),t.on("copyPaste.pasteElement",function(h){var f=h.descriptor;f.parent&&(l(f.parent)||f.parent.hidden)&&(f.hidden=!0)})}Me(vc,me);vc.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,r=e.children,i;if(r){r=r.concat(r.reduce(function(u,d){return d.label&&d.label.parent!==e?u.concat(d.label):u},[]));var a=r.filter(function(u){return!u.hidden});if(!a.length){n.moveElements(r,{x:0,y:0},t,{autoResize:!1});return}var s=qr(a);if(!t.x)i={x:ZR.x-s.x,y:ZR.y-s.y};else{var c=tt(t),l=tt(s);i={x:c.x-l.x,y:c.y-l.y}}n.moveElements(r,i,t,{autoResize:!1})}};vc.prototype._showRecursively=function(e,t){var n=this,r=[];return e.forEach(function(i){i.hidden=!!t,r=r.concat(i),i.children&&(r=r.concat(n._showRecursively(i.children,i.collapsed||t)))}),r};vc.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};vc.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,r=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),i=t.create("bpmndi:BPMNDiagram",{plane:r});r.$parent=i;var a=n.createRoot({id:cu(e),type:e.$type,di:r,businessObject:e,collapsed:!0});return a};vc.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,r=gn(n,function(i){return i.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(r),1),r};vc.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function zN(e,t){e.invoke(me,this),this.postExecuted("shape.replace",function(n){var r=n.context.oldShape,i=n.context.newShape;if(!(!C(i,"bpmn:SubProcess")||C(i,"bpmn:AdHocSubProcess")||!(C(r,"bpmn:Task")||C(r,"bpmn:CallActivity"))||!Mt(i))){var a=gke(i);t.createShape({type:"bpmn:StartEvent"},a,i)}})}zN.$inject=["injector","modeling"];Me(zN,me);function gke(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function UN(e){me.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;C(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&C(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}Me(UN,me);UN.$inject=["eventBus"];function HN(e,t){me.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var r=n.shape;if(Mt(r))return;var i=Rp(r);i.forEach(function(s){var c=s.incoming.slice(),l=s.outgoing.slice();Y(c,function(u){a(u,!0)}),Y(l,function(u){a(u,!1)})});function a(s,c){i.indexOf(s.source)!==-1&&i.indexOf(s.target)!==-1||(c?t.reconnectEnd(s,r,tt(r)):t.reconnectStart(s,r,tt(r)))}},!0)}Me(HN,me);HN.$inject=["eventBus","modeling"];var jw=500;function VN(e,t,n){me.call(this,e);function r(s){s.length&&s.forEach(function(c){c.type==="label"&&!c.businessObject.name&&(c.hidden=!0)})}function i(s,c){var l=s.children,u=c,d,h;return d=vke(l).concat([s]),h=j6(d),h?(u.width=Math.max(h.width,u.width),u.height=Math.max(h.height,u.height),u.x=h.x+(h.width-u.width)/2,u.y=h.y+(h.height-u.height)/2):(u.x=s.x+(s.width-u.width)/2,u.y=s.y+(s.height-u.height)/2),u}function a(s,c){return{x:s.x+(s.width-c.width)/2,y:s.y+(s.height-c.height)/2,width:c.width,height:c.height}}this.executed(["shape.toggleCollapse"],jw,function(s){var c=s.context,l=c.shape;C(l,"bpmn:SubProcess")&&(l.collapsed?Gt(l).isExpanded=!1:(r(l.children),Gt(l).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],jw,function(s){var c=s.context,l=c.shape;l.collapsed?Gt(l).isExpanded=!1:Gt(l).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],jw,function(s){var c=s.context.shape,l=t.getDefaultSize(c),u;c.collapsed?u=a(c,l):u=i(c,l),n.resizeShape(c,u,null,{autoResize:c.collapsed?!1:"nwse"})})}Me(VN,me);VN.$inject=["eventBus","elementFactory","modeling"];function vke(e){return e.filter(function(t){return!t.hidden})}function GN(e,t,n,r){t.invoke(me,this),this.preExecute("shape.delete",function(i){var a=i.context,s=a.shape,c=s.businessObject;kt(s)||(C(s,"bpmn:Participant")&&Mt(s)&&n.ids.unclaim(c.processRef.id),r.unclaimId(c.id,c))}),this.preExecute("connection.delete",function(i){var a=i.context,s=a.connection,c=s.businessObject;r.unclaimId(c.id,c)}),this.preExecute("canvas.updateRoot",function(){var i=e.getRootElement(),a=i.businessObject;C(i,"bpmn:Collaboration")&&n.ids.unclaim(a.id)})}Me(GN,me);GN.$inject=["canvas","injector","moddle","modeling"];function WN(e,t){me.call(this,e),this.preExecute("connection.delete",function(n){var r=n.context,i=r.connection,a=i.source;yke(i,a)&&t.updateProperties(a,{default:null})})}Me(WN,me);WN.$inject=["eventBus","modeling"];function yke(e,t){if(!C(e,"bpmn:SequenceFlow"))return!1;var n=Ce(t),r=Ce(e);return n.get("default")===r}var xke=500,bke=5e3;function qN(e,t){me.call(this,e);var n;function r(){return n=n||new wke,n.enter(),n}function i(){if(!n)throw new Error("out of bounds release");return n}function a(){if(!n)throw new Error("out of bounds release");var c=n.leave();return c&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),c}var s=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(s,bke,function(c){r()}),this.postExecuted(s,xke,function(c){a()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(c){var l=c.context,u=l.shape,d=i();u.labelTarget||(C(u,"bpmn:Lane")&&d.addLane(u),C(u,"bpmn:FlowNode")&&d.addFlowNode(u))})}qN.$inject=["eventBus","modeling"];Me(qN,me);function wke(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function KN(e,t){me.call(this,e),this.postExecuted("elements.create",function(n){const r=n.context,i=r.elements;for(const a of i)_ke(a)&&!Ske(a)&&t.updateProperties(a,{isForCompensation:void 0})})}Me(KN,me);KN.$inject=["eventBus","modeling"];function _ke(e){const t=Ce(e);return t&&t.isForCompensation}function jke(e){return e&&C(e,"bpmn:BoundaryEvent")&&Jj(e,"bpmn:CompensateEventDefinition")}function Ske(e){return e.incoming.filter(n=>jke(n.source)).length>0}const Eke={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",hN],appendBehavior:["type",fN],associationBehavior:["type",pN],attachEventBehavior:["type",ub],boundaryEventBehavior:["type",mN],compensateBoundaryEventBehaviour:["type",gN],createBehavior:["type",vN],createDataObjectBehavior:["type",yN],createParticipantBehavior:["type",xN],dataInputAssociationBehavior:["type",bN],dataStoreBehavior:["type",wN],deleteLaneBehavior:["type",_N],detachEventBehavior:["type",fb],dropOnFlowBehavior:["type",jN],eventBasedGatewayBehavior:["type",SN],fixHoverBehavior:["type",S6],groupBehavior:["type",EN],importDockingFix:["type",E6],isHorizontalFix:["type",NN],labelBehavior:["type",PN],layoutConnectionBehavior:["type",kN],messageFlowBehavior:["type",TN],nonInterruptingBehavior:["type",ON],removeElementBehavior:["type",$N],removeEmbeddedLabelBoundsBehavior:["type",RN],removeParticipantBehavior:["type",IN],replaceConnectionBehavior:["type",MN],replaceElementBehaviour:["type",vb],resizeBehavior:["type",M6],resizeLaneBehavior:["type",L6],rootElementReferenceBehavior:["type",BN],spaceToolBehavior:["type",F6],subProcessPlaneBehavior:["type",vc],subProcessStartEventBehavior:["type",zN],textAnnotationBehavior:["type",UN],toggleCollapseConnectionBehaviour:["type",HN],toggleElementCollapseBehaviour:["type",VN],unclaimIdBehavior:["type",GN],unsetDefaultFlowBehavior:["type",WN],updateFlowNodeRefsBehavior:["type",qN],setCompensationActivityAfterPasteBehavior:["type",KN]};function z6(e,t){var n=Nr(e,t,-15);return n!=="intersect"?n:null}function xr(e){oa.call(this,e)}Me(xr,oa);xr.$inject=["eventBus"];xr.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return Nke(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,r=e.hints||{},i=r.targetParent,a=r.targetAttach;if(a)return!1;i&&(n.parent=i);try{return Gg(t,n)}finally{i&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,r=e.target;return Gg(n,r,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return X6(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,r=e.target;return Jt(r)&&!Ny(t,r)?!1:Dy(t,function(i){return Jt(i)?Gg(i.source,i.target,i):i.host?xf(i,i.host,null,n):kj(i,r,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,r=e.position;return xf(n,t,null,r)||K6(n,t,r)||Y6(n,t)||Ny(n,t)}),this.addRule("shape.create",function(e){return kj(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return xf(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return t8(n,t)})};xr.prototype.canConnectMessageFlow=Q6;xr.prototype.canConnectSequenceFlow=e8;xr.prototype.canConnectDataAssociation=XN;xr.prototype.canConnectAssociation=Z6;xr.prototype.canConnectCompensationAssociation=J6;xr.prototype.canMove=Y6;xr.prototype.canAttach=xf;xr.prototype.canReplace=K6;xr.prototype.canDrop=Od;xr.prototype.canInsert=Ny;xr.prototype.canCreate=kj;xr.prototype.canConnect=Gg;xr.prototype.canResize=X6;xr.prototype.canCopy=t8;function Nke(e){return Ej(e)?null:mt(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Ej(e){return!e||kt(e)}function Pke(e,t){return e===t}function JR(e){do{if(C(e,"bpmn:Process"))return Ce(e);if(C(e,"bpmn:Participant"))return Ce(e).processRef||Ce(e)}while(e=e.parent)}function Nj(e){return C(e,"bpmn:TextAnnotation")}function YN(e){return C(e,"bpmn:Group")&&!e.labelTarget}function U6(e){return C(e,"bpmn:BoundaryEvent")&&Ja(e,"bpmn:CompensateEventDefinition")}function yb(e){return Ce(e).isForCompensation}function kke(e,t){var n=JR(e),r=JR(t);return n===r}function Cke(e){return C(e,"bpmn:InteractionNode")&&!C(e,"bpmn:BoundaryEvent")&&(!C(e,"bpmn:Event")||C(e,"bpmn:ThrowEvent")&&V6(e,"bpmn:MessageEventDefinition"))}function Ake(e){return C(e,"bpmn:InteractionNode")&&!yb(e)&&(!C(e,"bpmn:Event")||C(e,"bpmn:CatchEvent")&&V6(e,"bpmn:MessageEventDefinition"))&&!(C(e,"bpmn:BoundaryEvent")&&!Ja(e,"bpmn:MessageEventDefinition"))}function QR(e){for(var t=e;t=t.parent;){if(C(t,"bpmn:FlowElementsContainer"))return Ce(t);if(C(t,"bpmn:Participant"))return Ce(t).processRef}return null}function H6(e,t){var n=QR(e),r=QR(t);return n===r}function Ja(e,t){var n=Ce(e);return!!gn(n.eventDefinitions||[],function(r){return C(r,t)})}function V6(e,t){var n=Ce(e);return(n.eventDefinitions||[]).every(function(r){return C(r,t)})}function Tke(e){return C(e,"bpmn:FlowNode")&&!C(e,"bpmn:EndEvent")&&!$r(e)&&!(C(e,"bpmn:IntermediateThrowEvent")&&Ja(e,"bpmn:LinkEventDefinition"))&&!U6(e)&&!yb(e)}function Oke(e){return C(e,"bpmn:FlowNode")&&!C(e,"bpmn:StartEvent")&&!C(e,"bpmn:BoundaryEvent")&&!$r(e)&&!(C(e,"bpmn:IntermediateCatchEvent")&&Ja(e,"bpmn:LinkEventDefinition"))&&!yb(e)}function Rke(e){return C(e,"bpmn:ReceiveTask")||C(e,"bpmn:IntermediateCatchEvent")&&(Ja(e,"bpmn:MessageEventDefinition")||Ja(e,"bpmn:TimerEventDefinition")||Ja(e,"bpmn:ConditionalEventDefinition")||Ja(e,"bpmn:SignalEventDefinition"))}function $ke(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function Pj(e,t){var n=$ke(t);return n.indexOf(e)!==-1}function Gg(e,t,n){if(Ej(e)||Ej(t))return null;if(!C(n,"bpmn:DataAssociation")){if(Q6(e,t))return{type:"bpmn:MessageFlow"};if(e8(e,t))return{type:"bpmn:SequenceFlow"}}var r=XN(e,t);return r||(J6(e,t)?{type:"bpmn:Association",associationDirection:"One"}:Z6(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function Od(e,t){return kt(e)||YN(e)?!0:C(t,"bpmn:Participant")&&!Mt(t)?!1:C(e,"bpmn:Participant")?C(t,"bpmn:Process")||C(t,"bpmn:Collaboration"):mt(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:C(e,"bpmn:Lane")?C(t,"bpmn:Participant")||C(t,"bpmn:Lane"):C(e,"bpmn:BoundaryEvent")&&!Ike(e)?!1:C(e,"bpmn:FlowElement")&&!C(e,"bpmn:DataStoreReference")?C(t,"bpmn:FlowElementsContainer")?Mt(t):mt(t,["bpmn:Participant","bpmn:Lane"]):C(e,"bpmn:DataStoreReference")&&C(t,"bpmn:Collaboration")?$p(Ce(t).get("participants"),function(n){return!!n.get("processRef")}):mt(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?mt(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):C(e,"bpmn:MessageFlow")?C(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function Ike(e){return Ce(e).cancelActivity&&(G6(e)||W6(e))}function Mke(e){return!kt(e)&&C(e,"bpmn:BoundaryEvent")}function Dke(e){return C(e,"bpmn:Lane")}function Lke(e){return Mke(e)||C(e,"bpmn:IntermediateThrowEvent")&&G6(e)?!0:C(e,"bpmn:IntermediateCatchEvent")&&W6(e)}function G6(e){var t=Ce(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function W6(e){return q6(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function q6(e,t){return t.some(function(n){return Ja(e,n)})}function Bke(e){return C(e,"bpmn:ReceiveTask")&&gn(e.incoming,function(t){return C(t.source,"bpmn:EventBasedGateway")})}function xf(e,t,n,r){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var i=e[0];return kt(i)||!Lke(i)||$r(t)||!C(t,"bpmn:Activity")||yb(t)||r&&!z6(r,t)||Bke(t)?!1:"attach"}function K6(e,t,n){if(!t)return!1;var r={replacements:[]};return Y(e,function(i){$r(t)||C(i,"bpmn:StartEvent")&&i.type!=="label"&&Od(i,t)&&(t9(i)||r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),(n9(i)||r9(i)||i9(i))&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),q6(i,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&C(t,"bpmn:SubProcess")&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"})),C(t,"bpmn:Transaction")||Ja(i,"bpmn:CancelEventDefinition")&&i.type!=="label"&&(C(i,"bpmn:EndEvent")&&Od(i,t)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:EndEvent"}),C(i,"bpmn:BoundaryEvent")&&xf(i,t,null,n)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:BoundaryEvent"}))}),r.replacements.length?r:!1}function Y6(e,t){return $p(e,Dke)?!1:t?e.every(function(n){return Od(n,t)}):!0}function kj(e,t,n,r){return t?kt(e)||YN(e)?!0:Pke(n,t)||n&&Pj(n,t)?!1:Od(e,t)||Ny(e,t):!1}function X6(e,t){return C(e,"bpmn:SubProcess")?Mt(e)&&(!t||t.width>=100&&t.height>=80):!!(C(e,"bpmn:Lane")||C(e,"bpmn:Participant")||Nj(e)||YN(e))}function Fke(e,t){var n=Nj(e),r=Nj(t);return(n||r)&&n!==r}function Z6(e,t){return Pj(t,e)||Pj(e,t)?!1:Fke(e,t)?!0:!!XN(e,t)}function J6(e,t){return H6(e,t)&&U6(e)&&C(t,"bpmn:Activity")&&!Uke(t,e)&&!$r(t)}function Q6(e,t){return e$(e)&&!e$(t)?!1:Cke(e)&&Ake(t)&&!kke(e,t)}function e8(e,t){return Tke(e)&&Oke(t)&&H6(e,t)&&!(C(e,"bpmn:EventBasedGateway")&&!Rke(t))}function XN(e,t){return mt(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&mt(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:mt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&mt(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Ny(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:mt(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!kt(t)&&C(e,"bpmn:FlowNode")&&!C(e,"bpmn:BoundaryEvent")&&Od(e,t.parent)}function zke(e,t){return e&&t&&e.indexOf(t)!==-1}function t8(e,t){return kt(t)?!0:!(C(t,"bpmn:Lane")&&!zke(e,t.parent))}function e$(e){return Ad(e,"bpmn:Process")||Ad(e,"bpmn:Collaboration")}function Uke(e,t){return e.attachers.includes(t)}const Hke={__depends__:[hs],__init__:["bpmnRules"],bpmnRules:["type",xr]};var Vke=2e3;function n8(e,t){e.on("saveXML.start",Vke,n);function n(){var r=t.getRootElements();Y(r,function(i){var a=Gt(i),s,c;s=Rp([i],!1),s=Et(s,function(l){return l!==i&&!l.labelTarget}),c=Ti(s,Gt),a.set("planeElement",c)})}}n8.$inject=["eventBus","canvas"];const Gke={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",n8]};function xb(e){me.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var r=n.context,i=r.shape||r.connection,a=r.parent,s=t.getOrdering(i,a);s&&(s.parent!==void 0&&(r.parent=s.parent),r.parentIndex=s.index)}),this.preExecute(["shape.move","connection.move"],function(n){var r=n.context,i=r.shape||r.connection,a=r.newParent||i.parent,s=t.getOrdering(i,a);s&&(s.parent!==void 0&&(r.newParent=s.parent),r.newParentIndex=s.index)})}xb.prototype.getOrdering=function(e,t){return null};Me(xb,me);function ZN(e,t){xb.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(s){if(s.labelTarget)return{level:10};var c=gn(n,function(l){return mt(s,[l.type])});return c&&c.order||{level:1}}function i(s){var c=s.order;if(c||(s.order=c=r(s)),!c)throw new Error(`no order for <${s.id}>`);return c}function a(s,c,l){for(var u=c;u&&!mt(u,l);)u=u.parent;if(!u)throw new Error(`no parent for <${s.id}> in <${c&&c.id}>`);return u}this.getOrdering=function(s,c){if(s.labelTarget||C(s,"bpmn:TextAnnotation"))return{parent:t.findRoot(c)||t.getRootElement(),index:-1};var l=i(s);l.containers&&(c=a(s,c,l.containers));var u=c.children.indexOf(s),d=a9(c.children,function(h){return!s.labelTarget&&h.labelTarget?!1:l.level<i(h).level});return d!==-1&&u!==-1&&u<d&&(d-=1),{index:d,parent:c}}}ZN.$inject=["eventBus","canvas"];Me(ZN,xb);const Wke={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",ZN]};function nm(){}nm.prototype.get=function(){return this._data};nm.prototype.set=function(e){this._data=e};nm.prototype.clear=function(){var e=this._data;return delete this._data,e};nm.prototype.isEmpty=function(){return!this._data};const qke={clipboard:["type",nm]};var Kke="drop-ok",t$="drop-not-ok",n$="attach-ok",r$="new-parent",i$="create",Yke=2e3;function r8(e,t,n,r,i){function a(l,u,d,h,f){if(!u)return!1;l=Et(l,function(b){var w=b.labelTarget;return!b.parent&&!(kt(b)&&l.indexOf(w)!==-1)});var p=gn(l,function(b){return!Jt(b)}),m=!1,g=!1,v=!1;s$(l)&&(m=i.allowed("shape.attach",{position:d,shape:p,target:u})),m||(s$(l)?v=i.allowed("shape.create",{position:d,shape:p,source:h,target:u}):v=i.allowed("elements.create",{elements:l,position:d,target:u}));var x=f.connectionTarget;return v||m?(p&&h&&(g=i.allowed("connection.create",{source:x===h?p:h,target:x===h?h:p,hints:{targetParent:u,targetAttach:m}})),{attach:m,connect:g}):v===null||m===null?null:!1}function s(l,u){[n$,Kke,t$,r$].forEach(function(d){d===u?e.addMarker(l,d):e.removeMarker(l,d)})}n.on(["create.move","create.hover"],function(l){var u=l.context,d=u.elements,h=l.hover,f=u.source,p=u.hints||{};if(!h){u.canExecute=!1,u.target=null;return}a$(l);var m={x:l.x,y:l.y},g=u.canExecute=h&&a(d,h,m,f,p);h&&g!==null&&(u.target=h,g&&g.attach?s(h,n$):s(h,g?r$:t$))}),n.on(["create.end","create.out","create.cleanup"],function(l){var u=l.hover;u&&s(u,null)}),n.on("create.end",function(l){var u=l.context,d=u.source,h=u.shape,f=u.elements,p=u.target,m=u.canExecute,g=m&&m.attach,v=m&&m.connect,x=u.hints||{};if(m===!1||!p)return!1;a$(l);var b={x:l.x,y:l.y};v?h=r.appendShape(d,h,b,p,{attach:g,connection:v===!0?{}:v,connectionTarget:x.connectionTarget}):(f=r.createElements(f,b,p,ee({},x,{attach:g})),h=gn(f,function(w){return!Jt(w)})),ee(u,{elements:f,shape:h}),ee(l,{elements:f,shape:h})});function c(){var l=t.context();l&&l.prefix===i$&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",c),n.once(["create.cancel","create.end"],Yke,function(){n.off("elements.changed",c)})}),this.start=function(l,u,d){jt(u)||(u=[u]);var h=gn(u,function(m){return!Jt(m)});if(h){d=ee({elements:u,hints:{},shape:h},d||{}),Y(u,function(m){wt(m.x)||(m.x=0),wt(m.y)||(m.y=0)});var f=Et(u,function(m){return!m.hidden}),p=qr(f);Y(u,function(m){Jt(m)&&(m.waypoints=Ti(m.waypoints,function(g){return{x:g.x-p.x-p.width/2,y:g.y-p.y-p.height/2}})),ee(m,{x:m.x-p.x-p.width/2,y:m.y-p.y-p.height/2})}),t.init(l,i$,{cursor:"grabbing",autoActivate:!0,data:{shape:h,elements:u,context:d}})}}}r8.$inject=["canvas","dragging","eventBus","modeling","rules"];function a$(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function s$(e){return e&&e.length===1&&!Jt(e[0])}var Xke=750;function i8(e,t,n,r,i){function a(s){var c=Ne("g");fe(c,i.cls("djs-drag-group",["no-events"]));var l=Ne("g");return s.forEach(function(u){var d;u.hidden||(u.waypoints?(d=n._createContainer("connection",l),n.drawConnection(ju(d),u)):(d=n._createContainer("shape",l),n.drawShape(ju(d),u),Or(d,u.x,u.y)),r.addDragger(u,c,d))}),c}t.on("create.move",Xke,function(s){var c=s.hover,l=s.context,u=l.elements,d=l.dragGroup;d||(d=l.dragGroup=a(u));var h;c?(d.parentNode||(h=e.getActiveLayer(),ke(h,d)),Or(d,s.x,s.y)):Rr(d)}),t.on("create.cleanup",function(s){var c=s.context,l=c.dragGroup;l&&Rr(l)})}i8.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const bb={__depends__:[io,lh,hs,os],__init__:["create","createPreview"],create:["type",r8],createPreview:["type",i8]};function JN(e){var t=this;this._lastMoveEvent=null;function n(r){t._lastMoveEvent=r}e.on("canvas.init",function(r){var i=t._svg=r.svg;i.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}JN.$inject=["eventBus"];JN.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||Zke(0,0)};function Zke(e,t){var n=document.createEvent("MouseEvent"),r=e,i=t,a=e,s=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,r,i,a,s,!1,!1,!1,!1,0,null),n}const rm={__init__:["mouse"],mouse:["type",JN]};function Ba(e,t,n,r,i,a,s,c){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=r,this._eventBus=i,this._modeling=a,this._mouse=s,this._rules=c,i.on("copyPaste.copyElement",function(l){var u=l.descriptor,d=l.element,h=l.elements;u.priority=1,u.id=d.id;var f=gn(h,function(p){return p===d.parent});f&&(u.parent=d.parent.id),Jke(d)&&(u.priority=2,u.host=d.host.id),Jt(d)&&(u.priority=3,u.source=d.source.id,u.target=d.target.id,u.waypoints=Qke(d)),kt(d)&&(u.priority=4,u.labelTarget=d.labelTarget.id),Y(["x","y","width","height"],function(p){wt(d[p])&&(u[p]=d[p])}),u.hidden=d.hidden,u.collapsed=d.collapsed}),i.on("copyPaste.pasteElements",function(l){var u=l.hints;ee(u,{createElementsBehavior:!1})})}Ba.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];Ba.prototype.copy=function(e){var t,n;return jt(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(jt(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};Ba.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var r=this._createElements(t);if(e&&e.element&&e.point)return this._paste(r,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),r,{hints:n||{}})}};Ba.prototype._paste=function(e,t,n,r){Y(e,function(a){wt(a.x)||(a.x=0),wt(a.y)||(a.y=0)});var i=qr(e);return Y(e,function(a){Jt(a)&&(a.waypoints=Ti(a.waypoints,function(s){return{x:s.x-i.x-i.width/2,y:s.y-i.y-i.height/2}})),ee(a,{x:a.x-i.x-i.width/2,y:a.y-i.y-i.height/2})}),this._modeling.createElements(e,n,t,ee({},r))};Ba.prototype._createElements=function(e){var t=this,n=this._eventBus,r={},i=[];return Y(e,function(a,s){a=Gs(a,"priority"),Y(a,function(c){var l=ee({},Js(c,["priority"]));r[c.parent]?l.parent=r[c.parent]:delete l.parent,n.fire("copyPaste.pasteElement",{cache:r,descriptor:l});var u;if(Jt(l)){l.source=r[c.source],l.target=r[c.target],u=r[c.id]=t.createConnection(l),i.push(u);return}if(kt(l)){l.labelTarget=r[l.labelTarget],u=r[c.id]=t.createLabel(l),i.push(u);return}l.host&&(l.host=r[l.host]),u=r[c.id]=t.createShape(l),i.push(u)})}),i};Ba.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Js(e,["id"]));return t};Ba.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Js(e,["id"]));return t};Ba.prototype.createShape=function(e){var t=this._elementFactory.createShape(Js(e,["id"]));return t};Ba.prototype.hasRelations=function(e,t){var n,r,i;return!(Jt(e)&&(r=gn(t,Ms({id:e.source.id})),i=gn(t,Ms({id:e.target.id})),!r||!i)||kt(e)&&(n=gn(t,Ms({id:e.labelTarget.id})),!n))};Ba.prototype.createTree=function(e){var t=this._rules,n=this,r={},i=[],a=Ly(e);function s(u,d){return t.allowed("element.copy",{element:u,elements:d})}function c(u,d){var h=gn(i,function(f){return u===f.element});if(!h){i.push({element:u,depth:d});return}h.depth<d&&(i=l(h,i),i.push({element:h.element,depth:d}))}function l(u,d){var h=d.indexOf(u);return h!==-1&&d.splice(h,1),d}return Vy(a,function(u,d,h){if(kt(u))return;Y(u.labels,function(m){c(m,h)});function f(m){m&&m.length&&Y(m,function(g){Y(g.labels,function(v){c(v,h)}),c(g,h)})}Y([u.attachers,u.incoming,u.outgoing],f),c(u,h);var p=[];return u.children&&(p=u.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:u,children:p}),p}),e=Ti(i,function(u){return u.element}),i=Ti(i,function(u){return u.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:u.descriptor,element:u.element,elements:e}),u}),i=Gs(i,function(u){return u.descriptor.priority}),e=Ti(i,function(u){return u.element}),Y(i,function(u){var d=u.depth;if(!n.hasRelations(u.element,e)){c$(u.element,e);return}if(!s(u.element,e)){c$(u.element,e);return}r[d]||(r[d]=[]),r[d].push(u.descriptor)}),r};function Jke(e){return!!e.host}function Qke(e){return Ti(e.waypoints,function(t){return t=o$(t),t.original&&(t.original=o$(t.original)),t})}function o$(e){return ee({},e)}function c$(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const e2e={__depends__:[qke,bb,rm,hs],__init__:["copyPaste"],copyPaste:["type",Ba]};function Sw(e,t,n){jt(n)||(n=[n]),Y(n,function(r){dM(e[r])||(t[r]=e[r])})}var Ew=750;function a8(e,t,n){function r(l,u){var d=e.create(l.$type);return n.copyElement(l,d,null,u)}t.on("copyPaste.copyElement",Ew,function(l){var u=l.descriptor,d=l.element,h=Ce(d);if(kt(d))return u;var f=u.businessObject=r(h,!0),p=u.di=r(Gt(d),!0);p.bpmnElement=f,Sw(f,u,"name"),Sw(p,u,"isExpanded"),h.default&&(u.default=h.default.id)});var i="-bpmn-js-refs";function a(l){return l[i]=l[i]||{}}function s(l,u){l[i]=u}function c(l,u,d){var h=Ce(l);return l.default&&(d[l.default]={element:h,property:"default"}),l.host&&(Ce(l).attachedToRef=Ce(u[l.host])),Js(d,rc(d,function(f,p,m){var g=p.element,v=p.property;return m===l.id&&(g.set(v,h),f.push(l.id)),f},[]))}t.on("copyPaste.pasteElement",function(l){var u=l.cache,d=l.descriptor,h=d.businessObject,f=d.di;if(kt(d)){d.businessObject=Ce(u[d.labelTarget]),d.di=Gt(u[d.labelTarget]);return}h=d.businessObject=r(h),f=d.di=r(f),f.bpmnElement=h,Sw(d,h,["isExpanded","name"]),d.type=h.$type}),t.on("copyPaste.copyElement",Ew,function(l){var u=l.descriptor,d=l.element;if(C(d,"bpmn:Participant")){var h=Ce(d);h.processRef&&(u.processRef=r(h.processRef,!0))}}),t.on("copyPaste.pasteElement",function(l){var u=l.descriptor,d=u.processRef;d&&(u.processRef=r(d))}),t.on("copyPaste.pasteElement",Ew,function(l){var u=l.cache,d=l.descriptor;s(u,c(d,u,a(u)))})}a8.$inject=["bpmnFactory","eventBus","moddleCopy"];const t2e=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"],n2e=["errorRef","escalationRef","messageRef","signalRef","dataObjectRef"];function im(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",r=>{const{propertyNames:i}=r;if(!(!i||!i.length))return Gs(i,a=>a==="extensionElements")}),e.on("moddleCopy.canCopyProperty",r=>{const{parent:i,property:a,propertyName:s}=r,c=Ws(i)&&i.$descriptor;if(s&&n2e.includes(s))return a;if(s&&t2e.includes(s)||s&&c&&!gn(c.properties,Ms({name:s})))return!1}),e.on("moddleCopy.canSetCopiedProperty",r=>{const{property:i}=r;if(C(i,"bpmn:ExtensionElements")&&(!i.values||!i.values.length))return!1})}im.$inject=["eventBus","bpmnFactory","moddle"];im.prototype.copyElement=function(e,t,n,r=!1){n&&!jt(n)&&(n=[n]),n=n||Cj(e.$descriptor);const i=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:r});return i===!1||(jt(i)&&(n=i),Y(n,a=>{let s;Fo(e,a)&&(s=e.get(a));const c=this.copyProperty(s,t,a,r);!Ei(c)||this._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:c,propertyName:a})===!1||t.set(a,c)})),t};im.prototype.copyProperty=function(e,t,n,r=!1){let i=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:r});if(i===!1)return;if(i)return Ws(i)&&i.$type&&!i.$parent&&(i.$parent=t),i;const a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?e&&this._copyId(e,t,r):jt(e)?rc(e,(s,c)=>{const l=this.copyProperty(c,t,n,r);return l?s.concat(l):s},[]):Ws(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(i=this._bpmnFactory.create(e.$type),i.$parent=t,i=this.copyElement(e,i,null,r),i):e};im.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function Cj(e,t){return rc(e.properties,(n,r)=>t&&r.default?n:n.concat(r.name),[])}const s8={__depends__:[e2e],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",a8],moddleCopy:["type",im]};var l$=Math.round;function QN(e,t){this._modeling=e,this._eventBus=t}QN.$inject=["modeling","eventBus"];QN.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var r=this._modeling,i=this._eventBus;i.fire("replace.start",{element:e,attrs:t,hints:n});var a=t.width||e.width,s=t.height||e.height,c=t.x||e.x,l=t.y||e.y,u=l$(c+a/2),d=l$(l+s/2),h=r.replaceShape(e,ee({},t,{x:u,y:d,width:a,height:s}),n);return i.fire("replace.end",{element:e,newElement:h,hints:n}),h};function o8(e,t){t.on("replace.end",500,function(n){const{newElement:r,hints:i={}}=n;i.select!==!1&&e.select(r)})}o8.$inject=["selection","eventBus"];const r2e={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",o8],replace:["type",QN]};function i2e(e,t,n){jt(n)||(n=[n]),Y(n,function(r){dM(e[r])||(t[r]=e[r])})}var a2e=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function s2e(e,t){var n=e&&Fo(e,"collapsed")?e.collapsed:!Mt(e),r;return t&&(Fo(t,"collapsed")||Fo(t,"isExpanded"))?r=Fo(t,"collapsed")?t.collapsed:!t.isExpanded:r=n,n!==r}function c8(e,t,n,r,i,a){function s(c,l,u){u=u||{};var d=l.type,h=c.businessObject;if(Sg(h)&&(d==="bpmn:SubProcess"||d==="bpmn:AdHocSubProcess")&&s2e(c,l))return r.toggleCollapse(c),c;var f=e.create(d),p={type:d,businessObject:f};p.di={},d==="bpmn:ExclusiveGateway"&&(p.di.isMarkerVisible=!0),i2e(c.di,p.di,["fill","stroke","background-color","border-color","color"]);var m=Cj(h.$descriptor),g=Cj(f.$descriptor,!0),v=o2e(m,g);ee(f,is(l,a2e));var x=Et(v,function(_){return _==="eventDefinitions"?u$(c,l.eventDefinitionType):_==="loopCharacteristics"?!$r(f):Fo(f,_)||_==="processRef"&&l.isExpanded===!1||_==="triggeredByEvent"?!1:_==="isForCompensation"?!$r(f):!0});if(f=n.copyElement(h,f,x),l.eventDefinitionType&&(u$(f,l.eventDefinitionType)||(p.eventDefinitionType=l.eventDefinitionType,p.eventDefinitionAttrs=l.eventDefinitionAttrs)),C(h,"bpmn:Activity")){if(Sg(h))p.isExpanded=Mt(c);else if(l&&Fo(l,"isExpanded")){p.isExpanded=l.isExpanded;var b=t.getDefaultSize(f,{isExpanded:p.isExpanded});p.width=b.width,p.height=b.height,p.x=c.x-(p.width-c.width)/2,p.y=c.y-(p.height-c.height)/2}Mt(c)&&!C(h,"bpmn:Task")&&p.isExpanded&&(p.width=c.width,p.height=c.height)}if(Sg(h)&&!Sg(f)&&(u.moveChildren=!1),C(h,"bpmn:Participant")){l.isExpanded===!0?f.processRef=e.create("bpmn:Process"):u.moveChildren=!1;var w=vr(c);Gt(c).isHorizontal||(Gt(p).isHorizontal=w),p.width=w?c.width:t.getDefaultSize(p).width,p.height=w?t.getDefaultSize(p).height:c.height}return a.allowed("shape.resize",{shape:f})||(p.height=t.getDefaultSize(p).height,p.width=t.getDefaultSize(p).width),f.name=h.name,mt(h,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&mt(f,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(f.default=h.default),l.host&&!C(h,"bpmn:BoundaryEvent")&&C(f,"bpmn:BoundaryEvent")&&(p.host=l.host),(p.type==="bpmn:DataStoreReference"||p.type==="bpmn:DataObjectReference")&&(p.x=c.x+(c.width-p.width)/2),i.replaceElement(c,p,{...u,targetElement:l})}this.replaceElement=s}c8.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function Sg(e){return C(e,"bpmn:SubProcess")}function u$(e,t){var n=Ce(e);return t&&n.get("eventDefinitions").some(function(r){return C(r,t)})}function o2e(e,t){return e.filter(function(n){return t.includes(n)})}const l8={__depends__:[s8,r2e,os],bpmnReplace:["type",c8]};var c2e=250;function $l(e){this._eventBus=e,this._tools=[],this._active=null}$l.$inject=["eventBus"];$l.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};$l.prototype.isActive=function(e){return e&&this._active===e};$l.prototype.length=function(e){return this._tools.length};$l.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};$l.prototype.bindEvents=function(e,t){var n=this._eventBus,r=[];n.on(t.tool+".init",function(i){var a=i.context;if(!a.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),Y(t,function(i){r.push(i+".ended"),r.push(i+".canceled")}),n.on(r,c2e,function(i){this._active&&(l2e(i)||this.setActive(null))},this)};function l2e(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Tp(t,'.group[data-group="tools"]')}const wb={__depends__:[io],__init__:["toolManager"],toolManager:["type",$l]};function u2e(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function d2e(e,t){var n=[];return Y(e.concat(t),function(r){var i=r.incoming,a=r.outgoing;Y(i.concat(a),function(s){var c=s.source,l=s.target;(Wh(e,c)||Wh(e,l)||Wh(t,c)||Wh(t,l))&&(Wh(n,s)||n.push(s))})}),n}function Wh(e,t){return e.indexOf(t)!==-1}function h2e(e,t,n){var r=e.x,i=e.y,a=e.width,s=e.height,c=n.x,l=n.y;switch(t){case"n":return{x:r,y:i+l,width:a,height:s-l};case"s":return{x:r,y:i,width:a,height:s+l};case"w":return{x:r+c,y:i,width:a-c,height:s};case"e":return{x:r,y:i,width:a+c,height:s};default:throw new Error("unknown direction: "+t)}}var Nw=Math.abs,f2e=Math.round,js={x:"width",y:"height"},u8="crosshair",jo={n:"top",w:"left",s:"bottom",e:"right"},p2e=1500,Eg={n:"s",w:"e",s:"n",e:"w"},Ng=20;function ca(e,t,n,r,i,a,s){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=r,this._rules=i,this._toolManager=a,this._mouse=s;var c=this;a.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){c.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",p2e,function(l){var u=l.context,d=u.initialized;d||(d=u.initialized=c.init(l,u)),d&&h$(l)}),n.on("spaceTool.end",function(l){var u=l.context,d=u.axis,h=u.direction,f=u.movingShapes,p=u.resizingShapes,m=u.start;if(u.initialized){h$(l);var g={x:0,y:0};g[d]=f2e(l["d"+d]),c.makeSpace(f,p,g,h,m),n.once("spaceTool.ended",function(v){c.activateSelection(v.originalEvent,!0,!0)})}})}ca.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];ca.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:u8,data:{context:{reactivate:n}},trapClick:!1})};ca.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:u8,data:{context:{}}})};ca.prototype.makeSpace=function(e,t,n,r,i){return this._modeling.createSpace(e,t,n,r,i)};ca.prototype.init=function(e,t){var n=Nw(e.dx)>Nw(e.dy)?"x":"y",r=e["d"+n],i=e[n]-r;if(Nw(r)<5)return!1;r<0&&(r*=-1),jf(e)&&(r*=-1);var a=u2e(n,r),s=this._canvas.getRootElement();!Hw(e)&&e.hover&&(s=e.hover);var c=[...Rp(s,!0),...s.attachers||[]],l=this.calculateAdjustments(c,n,r,i),u=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:a,shapes:l.resizingShapes,start:i}),d=m2e(l,n,a,i,u);return ee(t,l,{axis:n,direction:a,spaceToolConstraints:d,start:i}),nb("resize-"+(n==="x"?"ew":"ns")),!0};ca.prototype.calculateAdjustments=function(e,t,n,r){var i=this._rules,a=[],s=[],c=[],l=[];function u(f){a.includes(f)||a.push(f);var p=f.label;p&&!a.includes(p)&&a.push(p)}function d(f){s.includes(f)||s.push(f)}Y(e,function(f){if(!(!f.parent||kt(f))){if(Jt(f)){l.push(f);return}var p=f[t],m=p+f[js[t]];if(g2e(f)&&(n>0&&tt(f)[t]>r||n<0&&tt(f)[t]<r)){c.push(f);return}if(n>0&&p>r||n<0&&m<r){u(f);return}if(p<r&&m>r&&i.allowed("shape.resize",{shape:f})){d(f);return}}}),Y(a,function(f){var p=f.attachers;p&&Y(p,function(m){u(m)})});var h=a.concat(s);return Y(c,function(f){var p=f.host;el(h,p)&&u(f)}),h=a.concat(s),Y(l,function(f){var p=f.source,m=f.target,g=f.label;el(h,p)&&el(h,m)&&g&&u(g)}),{movingShapes:a,resizingShapes:s}};ca.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};ca.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function d$(e){return{top:e.top-Ng,right:e.right+Ng,bottom:e.bottom+Ng,left:e.left-Ng}}function h$(e){var t=e.context,n=t.spaceToolConstraints;if(n){var r,i;wt(n.left)&&(r=Math.max(e.x,n.left),e.dx=e.dx+r-e.x,e.x=r),wt(n.right)&&(r=Math.min(e.x,n.right),e.dx=e.dx+r-e.x,e.x=r),wt(n.top)&&(i=Math.max(e.y,n.top),e.dy=e.dy+i-e.y,e.y=i),wt(n.bottom)&&(i=Math.min(e.y,n.bottom),e.dy=e.dy+i-e.y,e.y=i)}}function m2e(e,t,n,r,i){var a=e.movingShapes,s=e.resizingShapes;if(s.length){var c={},l,u;return Y(s,function(d){var h=d.attachers,f=d.children,p=He(d),m=Et(f,function(T){return!Jt(T)&&!kt(T)&&!el(a,T)&&!el(s,T)}),g=Et(f,function(T){return!Jt(T)&&!kt(T)&&el(a,T)}),v,x,b,w=[],_=[],j,S,N,P;m.length&&(x=d$(He(qr(m))),v=r-p[jo[n]]+x[jo[n]],n==="n"?c.bottom=u=wt(u)?Math.min(u,v):v:n==="w"?c.right=u=wt(u)?Math.min(u,v):v:n==="s"?c.top=l=wt(l)?Math.max(l,v):v:n==="e"&&(c.left=l=wt(l)?Math.max(l,v):v)),g.length&&(b=d$(He(qr(g))),v=r-b[jo[Eg[n]]]+p[jo[Eg[n]]],n==="n"?c.bottom=u=wt(u)?Math.min(u,v):v:n==="w"?c.right=u=wt(u)?Math.min(u,v):v:n==="s"?c.top=l=wt(l)?Math.max(l,v):v:n==="e"&&(c.left=l=wt(l)?Math.max(l,v):v)),h&&h.length&&(h.forEach(function(T){el(a,T)?w.push(T):_.push(T)}),w.length&&(j=He(qr(w.map(tt))),S=p[jo[Eg[n]]]-(j[jo[Eg[n]]]-r)),_.length&&(N=He(qr(_.map(tt))),P=N[jo[n]]-(p[jo[n]]-r)),n==="n"?(v=Math.min(S||1/0,P||1/0),c.bottom=u=wt(u)?Math.min(u,v):v):n==="w"?(v=Math.min(S||1/0,P||1/0),c.right=u=wt(u)?Math.min(u,v):v):n==="s"?(v=Math.max(S||-1/0,P||-1/0),c.top=l=wt(l)?Math.max(l,v):v):n==="e"&&(v=Math.max(S||-1/0,P||-1/0),c.left=l=wt(l)?Math.max(l,v):v));var k=i&&i[d.id];k&&(n==="n"?(v=r+d[js[t]]-k[js[t]],c.bottom=u=wt(u)?Math.min(u,v):v):n==="w"?(v=r+d[js[t]]-k[js[t]],c.right=u=wt(u)?Math.min(u,v):v):n==="s"?(v=r-d[js[t]]+k[js[t]],c.top=l=wt(l)?Math.max(l,v):v):n==="e"&&(v=r-d[js[t]]+k[js[t]],c.left=l=wt(l)?Math.max(l,v):v))}),c}}function el(e,t){return e.indexOf(t)!==-1}function g2e(e){return!!e.host}var Pw="djs-dragging",f$="djs-resizing",v2e=250,Pg=Math.max;function d8(e,t,n,r,i){function a(s,c){Y(s,function(l){i.addDragger(l,c),n.addMarker(l,Pw)})}e.on("spaceTool.selection.start",function(s){var c=n.getLayer("space"),l=s.context,u={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},d=Ne("g");fe(d,r.cls("djs-crosshair-group",["no-events"])),ke(c,d);var h=Ne("path");fe(h,"d",u.x),nn(h).add("djs-crosshair"),ke(d,h);var f=Ne("path");fe(f,"d",u.y),nn(f).add("djs-crosshair"),ke(d,f),l.crosshairGroup=d}),e.on("spaceTool.selection.move",function(s){var c=s.context.crosshairGroup;Or(c,s.x,s.y)}),e.on("spaceTool.selection.cleanup",function(s){var c=s.context,l=c.crosshairGroup;l&&Rr(l)}),e.on("spaceTool.move",v2e,function(s){var c=s.context,l=c.line,u=c.axis,d=c.movingShapes,h=c.resizingShapes;if(c.initialized){if(!c.dragGroup){var f=n.getLayer("space");l=Ne("path"),fe(l,"d","M0,0 L0,0"),nn(l).add("djs-crosshair"),ke(f,l),c.line=l;var p=Ne("g");fe(p,r.cls("djs-drag-group",["no-events"])),ke(n.getActiveLayer(),p),a(d,p);var m=c.movingConnections=t.filter(function(_){var j=!1;Y(d,function(k){Y(k.outgoing,function(T){_===T&&(j=!0)})});var S=!1;Y(d,function(k){Y(k.incoming,function(T){_===T&&(S=!0)})});var N=!1;Y(h,function(k){Y(k.outgoing,function(T){_===T&&(N=!0)})});var P=!1;return Y(h,function(k){Y(k.incoming,function(T){_===T&&(P=!0)})}),Jt(_)&&(j||N)&&(S||P)});a(m,p),c.dragGroup=p}if(!c.frameGroup){var g=Ne("g");fe(g,r.cls("djs-frame-group",["no-events"])),ke(n.getActiveLayer(),g);var v=[];Y(h,function(_){var j=i.addFrame(_,g),S=j.getBBox();v.push({element:j,initialBounds:S}),n.addMarker(_,f$)}),c.frameGroup=g,c.frames=v}var x={x:"M"+s.x+", -10000 L"+s.x+", 10000",y:"M -10000, "+s.y+" L 10000, "+s.y};fe(l,{d:x[u]});var b={x:"y",y:"x"},w={x:s.dx,y:s.dy};w[b[c.axis]]=0,Or(c.dragGroup,w.x,w.y),Y(c.frames,function(_){var j=_.element,S=_.initialBounds,N,P;c.direction==="e"?fe(j,{width:Pg(S.width+w.x,5)}):(N=Pg(S.width-w.x,5),fe(j,{width:N,x:S.x+S.width-N})),c.direction==="s"?fe(j,{height:Pg(S.height+w.y,5)}):(P=Pg(S.height-w.y,5),fe(j,{height:P,y:S.y+S.height-P}))})}}),e.on("spaceTool.cleanup",function(s){var c=s.context,l=c.movingShapes,u=c.movingConnections,d=c.resizingShapes,h=c.line,f=c.dragGroup,p=c.frameGroup;Y(l,function(m){n.removeMarker(m,Pw)}),Y(u,function(m){n.removeMarker(m,Pw)}),f&&(Rr(h),Rr(f)),Y(d,function(m){n.removeMarker(m,f$)}),p&&Rr(p)})}d8.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const y2e={__init__:["spaceToolPreview"],__depends__:[io,hs,wb,lh,rm],spaceTool:["type",ca],spaceToolPreview:["type",d8]};function _b(e,t){e.invoke(ca,this),this._canvas=t}_b.$inject=["injector","canvas"];Me(_b,ca);_b.prototype.calculateAdjustments=function(e,t,n,r){var i=this._canvas.getRootElement(),a=e[0]===i?null:e[0],s=[];a&&(s=Fy(hM(i.children.filter(u=>C(u,"bpmn:Artifact")),qr(a))));const c=[...e,...s];var l=ca.prototype.calculateAdjustments.call(this,c,t,n,r);return l.resizingShapes=l.resizingShapes.filter(function(u){return!(C(u,"bpmn:TextAnnotation")||x2e(u)&&(t==="y"&&vr(u)||t==="x"&&!vr(u)))}),l};function x2e(e){return C(e,"bpmn:Participant")&&!Ce(e).processRef}const h8={__depends__:[y2e],spaceTool:["type",_b]};function Sn(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Sn.$inject=["eventBus","injector"];Sn.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};Sn.prototype.canExecute=function(e,t){const n={command:e,context:t},r=this._getHandler(e);let i=this._fire(e,"canExecute",n);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(t))}return i};Sn.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};Sn.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Sn.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Sn.prototype.register=function(e,t){this._setHandler(e,t)};Sn.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};Sn.prototype.canUndo=function(){return!!this._getUndoAction()};Sn.prototype.canRedo=function(){return!!this._getRedoAction()};Sn.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Sn.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Sn.prototype._internalUndo=function(e){const t=e.command,n=e.context,r=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};Sn.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const r=t?[e+"."+t,t]:[e];let i;n=this._eventBus.createEvent(n);for(const a of r)if(i=this._eventBus.fire("commandStack."+a,n),n.cancelBubble)break;return i};Sn.prototype._createId=function(){return this._uid++};Sn.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};Sn.prototype._internalExecute=function(e,t){const n=e.command,r=e.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),i.preExecute&&i.preExecute(r),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),i.execute&&this._markDirty(i.execute(r)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),i.postExecute&&i.postExecute(r),this._fire(n,"postExecuted",e)),this._popAction()};Sn.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)};Sn.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:s9("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};Sn.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=jt(e)?e:[e],t.dirty=t.dirty.concat(e))};Sn.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};Sn.prototype._revertedAction=function(e){this._stackIdx--};Sn.prototype._getHandler=function(e){return this._handlerMap[e]};Sn.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const b2e={commandStack:["type",Sn]};function Xo(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var w2e=250,p$=1400;function eP(e,t,n){me.call(this,t);var r=e.get("movePreview",!1);t.on("shape.move.start",p$,function(i){var a=i.context,s=a.shapes,c=a.validatedShapes;a.shapes=m$(s),a.validatedShapes=m$(c)}),r&&t.on("shape.move.start",w2e,function(i){var a=i.context,s=a.shapes,c=[];Y(s,function(l){Y(l.labels,function(u){!u.hidden&&a.shapes.indexOf(u)===-1&&c.push(u),l.labelTarget&&c.push(l)})}),Y(c,function(l){r.makeDraggable(a,l,!0)})}),this.preExecuted("elements.move",p$,function(i){var a=i.context,s=a.closure,c=s.enclosedElements,l=[];Y(c,function(u){Y(u.labels,function(d){c[d.id]||l.push(d)})}),s.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(i){var a=i.context,s=a.connection||a.shape;Xo(s.labels,function(c){n.removeShape(c,{nested:!0})})}),this.execute("shape.delete",function(i){var a=i.context,s=a.shape,c=s.labelTarget;c&&(a.labelTargetIndex=Qj(c.labels,s),a.labelTarget=c,s.labelTarget=null)}),this.revert("shape.delete",function(i){var a=i.context,s=a.shape,c=a.labelTarget,l=a.labelTargetIndex;c&&(er(c.labels,s,l),s.labelTarget=c)})}Me(eP,me);eP.$inject=["injector","eventBus","modeling"];function m$(e){return Et(e,function(t){return e.indexOf(t.labelTarget)===-1})}const _2e={__init__:["labelSupport"],labelSupport:["type",eP]};var j2e=251,g$=1401,v$="attach-ok";function tP(e,t,n,r,i){me.call(this,t);var a=e.get("movePreview",!1);t.on("shape.move.start",g$,function(s){var c=s.context,l=c.shapes,u=c.validatedShapes;c.shapes=S2e(l),c.validatedShapes=E2e(u)}),a&&t.on("shape.move.start",j2e,function(s){var c=s.context,l=c.shapes,u=Aj(l);Y(u,function(d){a.makeDraggable(c,d,!0),Y(d.labels,function(h){a.makeDraggable(c,h,!0)})})}),a&&t.on("shape.move.start",function(s){var c=s.context,l=c.shapes;if(l.length===1){var u=l[0],d=u.host;d&&(n.addMarker(d,v$),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(d,v$)}))}}),this.preExecuted("elements.move",g$,function(s){var c=s.context,l=c.closure,u=c.shapes,d=Aj(u);Y(d,function(h){l.add(h,l.topLevel[h.host.id])})}),this.postExecuted("elements.move",function(s){var c=s.context,l=c.shapes,u=c.newHost,d;u&&l.length!==1||(u?d=l:d=Et(l,function(h){var f=h.host;return N2e(h)&&!P2e(l,f)}),Y(d,function(h){i.updateAttachment(h,u)}))}),this.postExecuted("elements.move",function(s){var c=s.context.shapes;Y(c,function(l){Y(l.attachers,function(u){Y(u.outgoing.slice(),function(d){var h=r.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});h||i.removeConnection(d)}),Y(u.incoming.slice(),function(d){var h=r.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});h||i.removeConnection(d)})})})}),this.postExecute("shape.create",function(s){var c=s.context,l=c.shape,u=c.host;u&&i.updateAttachment(l,u)}),this.postExecute("shape.replace",function(s){var c=s.context,l=c.oldShape,u=c.newShape;Xo(l.attachers,function(d){var h=r.allowed("elements.move",{target:u,shapes:[d]});h==="attach"?i.updateAttachment(d,u):i.removeShape(d)}),u.attachers.length&&Y(u.attachers,function(d){var h=WR(d,l,u);i.moveShape(d,h,d.parent)})}),this.postExecute("shape.resize",function(s){var c=s.context,l=c.shape,u=c.oldBounds,d=c.newBounds,h=l.attachers,f=c.hints||{};f.attachSupport!==!1&&Y(h,function(p){var m=WR(p,u,d);i.moveShape(p,m,p.parent),Y(p.labels,function(g){i.moveShape(g,m,g.parent)})})}),this.preExecute("shape.delete",function(s){var c=s.context.shape;Xo(c.attachers,function(l){i.removeShape(l)}),c.host&&i.updateAttachment(c,null)})}Me(tP,me);tP.$inject=["injector","eventBus","canvas","rules","modeling"];function Aj(e){return Yj(Ti(e,function(t){return t.attachers||[]}))}function S2e(e){var t=Aj(e);return o9("id",e,t)}function E2e(e){var t=zy(e,"id");return Et(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function N2e(e){return!!e.host}function P2e(e,t){return e.indexOf(t)!==-1}const k2e={__depends__:[hs],__init__:["attachSupport"],attachSupport:["type",tP]};function la(e){this._model=e}la.$inject=["moddle"];la.prototype._needsId=function(e){return mt(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};la.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;C(e,"bpmn:Activity")?t="Activity":C(e,"bpmn:Event")?t="Event":C(e,"bpmn:Gateway")?t="Gateway":mt(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};la.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};la.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};la.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",ee({bpmnElement:e,bounds:this.createDiBounds()},t))};la.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};la.prototype.createDiWaypoints=function(e){var t=this;return Ti(e,function(n){return t.createDiWaypoint(n)})};la.prototype.createDiWaypoint=function(e){return this.create("dc:Point",is(e,["x","y"]))};la.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",ee({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};la.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",ee({bpmnElement:e},t))};function di(e,t,n){me.call(this,e),this._bpmnFactory=t;var r=this;function i(p){var m=p.context,g=m.hints||{},v;!m.cropped&&g.createElementsBehavior!==!1&&(v=m.connection,v.waypoints=n.getCroppedWaypoints(v),m.cropped=!0)}this.executed(["connection.layout","connection.create"],i),this.reverted(["connection.layout"],function(p){delete p.context.cropped});function a(p){var m=p.context;r.updateParent(m.shape||m.connection,m.oldParent)}function s(p){var m=p.context,g=m.shape||m.connection,v=m.parent||m.newParent;r.updateParent(g,v)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],ni(a)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],ni(s));function c(p){var m=p.context,g=m.oldRoot,v=g.children;Y(v,function(x){C(x,"bpmn:BaseElement")&&r.updateParent(x)})}this.executed(["canvas.updateRoot"],c),this.reverted(["canvas.updateRoot"],c);function l(p){var m=p.context.shape;C(m,"bpmn:BaseElement")&&r.updateBounds(m)}this.executed(["shape.move","shape.create","shape.resize"],ni(function(p){p.context.shape.type!=="label"&&l(p)})),this.reverted(["shape.move","shape.create","shape.resize"],ni(function(p){p.context.shape.type!=="label"&&l(p)})),e.on("shape.changed",function(p){p.element.type==="label"&&l({context:{shape:p.element}})});function u(p){r.updateConnection(p.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],ni(u)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],ni(u));function d(p){r.updateConnectionWaypoints(p.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],ni(d)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],ni(d)),this.executed("connection.reconnect",ni(function(p){var m=p.context,g=m.connection,v=m.oldSource,x=m.newSource,b=Ce(g),w=Ce(v),_=Ce(x);b.conditionExpression&&!mt(_,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(m.oldConditionExpression=b.conditionExpression,delete b.conditionExpression),v!==x&&w.default===b&&(m.oldDefault=w.default,delete w.default)})),this.reverted("connection.reconnect",ni(function(p){var m=p.context,g=m.connection,v=m.oldSource,x=m.newSource,b=Ce(g),w=Ce(v),_=Ce(x);m.oldConditionExpression&&(b.conditionExpression=m.oldConditionExpression),m.oldDefault&&(w.default=m.oldDefault,delete _.default)}));function h(p){r.updateAttachment(p.context)}this.executed(["element.updateAttachment"],ni(h)),this.reverted(["element.updateAttachment"],ni(h)),this.executed("element.updateLabel",ni(f)),this.reverted("element.updateLabel",ni(f));function f(p){const{element:m}=p.context,g=gl(m),v=Gt(m),x=v&&v.get("label");qu(m)||Mg(m)||(g&&!x?v.set("label",t.create("bpmndi:BPMNLabel")):!g&&x&&v.set("label",void 0))}}Me(di,me);di.$inject=["eventBus","bpmnFactory","connectionDocking"];di.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,r=t.host;n.attachedToRef=r&&r.businessObject};di.prototype.updateParent=function(e,t){if(!kt(e)&&!(C(e,"bpmn:DataStoreReference")&&e.parent&&C(e.parent,"bpmn:Collaboration"))){var n=e.parent,r=e.businessObject,i=Gt(e),a=n&&n.businessObject,s=Gt(n);C(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(r,a,t&&t.businessObject),C(e,"bpmn:DataOutputAssociation")&&(e.source?a=e.source.businessObject:a=null),C(e,"bpmn:DataInputAssociation")&&(e.target?a=e.target.businessObject:a=null),this.updateSemanticParent(r,a),C(e,"bpmn:DataObjectReference")&&r.dataObjectRef&&this.updateSemanticParent(r.dataObjectRef,a),this.updateDiParent(i,s)}};di.prototype.updateBounds=function(e){var t=Gt(e),n=A2e(e);if(n){var r=Ma(n,t.get("bounds"));ee(n,{x:e.x+r.x,y:e.y+r.y})}var i=kt(e)?this._getLabel(t):t,a=i.bounds;a||(a=this._bpmnFactory.createDiBounds(),i.set("bounds",a)),ee(a,{x:e.x,y:e.y,width:e.width,height:e.height})};di.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var r,i;C(n,"bpmn:Lane")&&(r=n.get("flowNodeRef"),qn(r,e)),C(t,"bpmn:Lane")&&(i=t.get("flowNodeRef"),er(i,e))}};di.prototype.updateDiConnection=function(e,t,n){var r=Gt(e),i=Gt(t),a=Gt(n);r.sourceElement&&r.sourceElement.bpmnElement!==Ce(t)&&(r.sourceElement=t&&i),r.targetElement&&r.targetElement.bpmnElement!==Ce(n)&&(r.targetElement=n&&a)};di.prototype.updateDiParent=function(e,t){if(t&&!C(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(qn(n,e),e.$parent=null)}};function C2e(e){for(;e&&!C(e,"bpmn:Definitions");)e=e.$parent;return e}di.prototype.getLaneSet=function(e){var t,n;return C(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(C(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};di.prototype.updateSemanticParent=function(e,t,n){var r;if(e.$parent!==t&&!((C(e,"bpmn:DataInput")||C(e,"bpmn:DataOutput"))&&(C(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(C(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),r="lanes";else if(C(e,"bpmn:FlowElement")){if(t){if(C(t,"bpmn:Participant"))t=t.processRef;else if(C(t,"bpmn:Lane"))do t=t.$parent.$parent;while(C(t,"bpmn:Lane"))}r="flowElements"}else if(C(e,"bpmn:Artifact")){for(;t&&!C(t,"bpmn:Process")&&!C(t,"bpmn:SubProcess")&&!C(t,"bpmn:Collaboration");)if(C(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;r="artifacts"}else if(C(e,"bpmn:MessageFlow"))r="messageFlows";else if(C(e,"bpmn:Participant")){r="participants";var i=e.processRef,a;i&&(a=C2e(e.$parent||t),e.$parent&&(qn(a.get("rootElements"),i),i.$parent=null),t&&(er(a.get("rootElements"),i),i.$parent=a))}else C(e,"bpmn:DataOutputAssociation")?r="dataOutputAssociations":C(e,"bpmn:DataInputAssociation")&&(r="dataInputAssociations");if(!r)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var s;if(e.$parent&&(s=e.$parent.get(r),qn(s,e)),t?(s=t.get(r),s.push(e),e.$parent=t):e.$parent=null,n){var c=n.get(r);qn(s,e),t&&(c||(c=[],t.set(r,c)),c.push(e))}}};di.prototype.updateConnectionWaypoints=function(e){var t=Gt(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};di.prototype.updateConnection=function(e){var t=e.connection,n=Ce(t),r=t.source,i=Ce(r),a=t.target,s=Ce(t.target),c;if(C(n,"bpmn:DataAssociation"))C(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=i,c=e.parent||e.newParent||s,this.updateSemanticParent(n,s,c)):C(n,"bpmn:DataOutputAssociation")&&(c=e.parent||e.newParent||i,this.updateSemanticParent(n,i,c),n.targetRef=s);else{var l=C(n,"bpmn:SequenceFlow");n.sourceRef!==i&&(l&&(qn(n.sourceRef&&n.sourceRef.get("outgoing"),n),i&&i.get("outgoing")&&i.get("outgoing").push(n)),n.sourceRef=i),n.targetRef!==s&&(l&&(qn(n.targetRef&&n.targetRef.get("incoming"),n),s&&s.get("incoming")&&s.get("incoming").push(n)),n.targetRef=s)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,r,a)};di.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function ni(e){return function(t){var n=t.context,r=n.shape||n.connection||n.element;C(r,"bpmn:BaseElement")&&e(t)}}function A2e(e){if(C(e,"bpmn:Activity")){var t=Gt(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function yc(e,t){eS.call(this),this._bpmnFactory=e,this._moddle=t}Me(yc,eS);yc.$inject=["bpmnFactory","moddle"];yc.prototype._baseCreate=eS.prototype.create;yc.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,ee({type:"label",di:n},c9,t))}return this.createElement(e,t)};yc.prototype.createElement=function(e,t){t=ee({},t||{});var n,r=t.businessObject,i=t.di;if(!r){if(!t.type)throw new Error("no shape type specified");r=this._bpmnFactory.create(t.type),l9(r)}if(!O2e(i)){var a=ee({},i||{},{id:r.id+"_di"});e==="root"?i=this._bpmnFactory.createDiPlane(r,a):e==="connection"?i=this._bpmnFactory.createDiEdge(r,a):i=this._bpmnFactory.createDiShape(r,a)}C(r,"bpmn:Group")&&(t=ee({isFrame:!0},t)),t=T2e(r,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Tj(i,t,"isExpanded")),mt(r,["bpmn:Lane","bpmn:Participant"])&&(t=Tj(i,t,"isHorizontal")),C(r,"bpmn:SubProcess")&&(t.collapsed=!Mt(r,i)),C(r,"bpmn:ExclusiveGateway")&&(Fo(i,"isMarkerVisible")?i.isMarkerVisible===void 0&&(i.isMarkerVisible=!1):i.isMarkerVisible=!0),Ei(t.triggeredByEvent)&&(r.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Ei(t.cancelActivity)&&(r.cancelActivity=t.cancelActivity,delete t.cancelActivity);var s,c;return t.eventDefinitionType&&(s=r.get("eventDefinitions")||[],c=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(c.condition=this._bpmnFactory.create("bpmn:FormalExpression")),s.push(c),c.$parent=r,r.eventDefinitions=s,delete t.eventDefinitionType),n=this.getDefaultSize(r,i),t=ee({id:r.id},n,t,{businessObject:r,di:i}),this._baseCreate(e,t)};yc.prototype.getDefaultSize=function(e,t){var n=Ce(e);if(t=t||Gt(e),C(n,"bpmn:SubProcess"))return Mt(n,t)?{width:350,height:200}:{width:100,height:80};if(C(n,"bpmn:Task"))return{width:100,height:80};if(C(n,"bpmn:Gateway"))return{width:50,height:50};if(C(n,"bpmn:Event"))return{width:36,height:36};if(C(n,"bpmn:Participant")){var r=t.isHorizontal===void 0||t.isHorizontal===!0;return Mt(n,t)?r?{width:600,height:250}:{width:250,height:600}:r?{width:400,height:60}:{width:60,height:400}}return C(n,"bpmn:Lane")?{width:400,height:100}:C(n,"bpmn:DataObjectReference")?{width:36,height:50}:C(n,"bpmn:DataStoreReference")?{width:50,height:50}:C(n,"bpmn:TextAnnotation")?{width:100,height:30}:C(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};yc.prototype.createParticipantShape=function(e){return Ws(e)||(e={isExpanded:e}),e=ee({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function T2e(e,t,n){return Y(n,function(r){t=Tj(e,t,r)}),t}function Tj(e,t,n){return t[n]===void 0?t:(e[n]=t[n],Js(t,[n]))}function O2e(e){return mt(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function jb(e,t){this._modeling=e,this._canvas=t}jb.$inject=["modeling","canvas"];jb.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,r=e.alignment;Y(n,function(i){var a={x:0,y:0};Ei(r.left)?a.x=r.left-i.x:Ei(r.right)?a.x=r.right-i.width-i.x:Ei(r.center)?a.x=r.center-Math.round(i.width/2)-i.x:Ei(r.top)?a.y=r.top-i.y:Ei(r.bottom)?a.y=r.bottom-i.height-i.y:Ei(r.middle)&&(a.y=r.middle-Math.round(i.height/2)-i.y),t.moveElements([i],a,i.parent)})};jb.prototype.postExecute=function(e){};function Sb(e){this._modeling=e}Sb.$inject=["modeling"];Sb.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,r=e.shape,i=e.hints||{};r=e.shape=this._modeling.createShape(r,e.position,n,{attach:i.attach}),e.shape=r};Sb.prototype.postExecute=function(e){var t=e.hints||{};R2e(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function R2e(e,t){return $p(e.outgoing,function(n){return n.target===t})}function Eb(e,t){this._canvas=e,this._layouter=t}Eb.$inject=["canvas","layouter"];Eb.prototype.execute=function(e){var t=e.connection,n=e.source,r=e.target,i=e.parent,a=e.parentIndex,s=e.hints;if(!n||!r)throw new Error("source and target required");if(!i)throw new Error("parent required");return t.source=n,t.target=r,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,s)),this._canvas.addConnection(t,i,a),t};Eb.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var kg=Math.round;function nP(e){this._modeling=e}nP.$inject=["modeling"];nP.prototype.preExecute=function(e){var t=e.elements,n=e.parent,r=e.parentIndex,i=e.position,a=e.hints,s=this._modeling;Y(t,function(h){wt(h.x)||(h.x=0),wt(h.y)||(h.y=0)});var c=Et(t,function(h){return!h.hidden}),l=qr(c);Y(t,function(h){Jt(h)&&(h.waypoints=Ti(h.waypoints,function(f){return{x:kg(f.x-l.x-l.width/2+i.x),y:kg(f.y-l.y-l.height/2+i.y)}})),ee(h,{x:kg(h.x-l.x-l.width/2+i.x),y:kg(h.y-l.y-l.height/2+i.y)})});var u=Ly(t),d={};Y(t,function(h){if(Jt(h)){d[h.id]=wt(r)?s.createConnection(d[h.source.id],d[h.target.id],r,h,h.parent||n,a):s.createConnection(d[h.source.id],d[h.target.id],h,h.parent||n,a);return}var f=ee({},a);u.indexOf(h)===-1&&(f.autoResize=!1),kt(h)&&(f=Js(f,["attach"])),d[h.id]=wt(r)?s.createShape(h,is(h,["x","y","width","height"]),h.parent||n,r,f):s.createShape(h,is(h,["x","y","width","height"]),h.parent||n,f)}),e.elements=Fy(d)};var y$=Math.round;function xc(e){this._canvas=e}xc.$inject=["canvas"];xc.prototype.execute=function(e){var t=e.shape,n=e.position,r=e.parent,i=e.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?ee(t,n):ee(t,{x:n.x-y$(t.width/2),y:n.y-y$(t.height/2)}),this._canvas.addShape(t,r,i),t};xc.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function am(e){xc.call(this,e)}Me(am,xc);am.$inject=["canvas"];var $2e=xc.prototype.execute;am.prototype.execute=function(e){var t=e.shape;return M2e(t),t.labelTarget=e.labelTarget,$2e.call(this,e)};var I2e=xc.prototype.revert;am.prototype.revert=function(e){return e.shape.labelTarget=null,I2e.call(this,e)};function M2e(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function sm(e,t){this._canvas=e,this._modeling=t}sm.$inject=["canvas","modeling"];sm.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;Xo(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),Xo(n.outgoing,function(r){t.removeConnection(r,{nested:!0})})};sm.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Qj(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};sm.prototype.revert=function(e){var t=e.connection,n=e.parent,r=e.parentIndex;return t.source=e.source,t.target=e.target,er(n.children,t,r),this._canvas.addConnection(t,n),t};function rP(e,t){this._modeling=e,this._elementRegistry=t}rP.$inject=["modeling","elementRegistry"];rP.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,r=e.elements;Y(r,function(i){n.get(i.id)&&(i.waypoints?t.removeConnection(i):t.removeShape(i))})};function om(e,t){this._canvas=e,this._modeling=t}om.$inject=["canvas","modeling"];om.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Xo(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),Xo(n.outgoing,function(r){t.removeConnection(r,{nested:!0})}),Xo(n.children,function(r){Jt(r)?t.removeConnection(r,{nested:!0}):t.removeShape(r,{nested:!0})})};om.prototype.execute=function(e){var t=this._canvas,n=e.shape,r=n.parent;return e.oldParent=r,e.oldParentIndex=Qj(r.children,n),t.removeShape(n),n};om.prototype.revert=function(e){var t=this._canvas,n=e.shape,r=e.oldParent,i=e.oldParentIndex;return er(r.children,n,i),t.addShape(n,r),n};function Nb(e){this._modeling=e}Nb.$inject=["modeling"];var x$={x:"y",y:"x"};Nb.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,r=e.axis,i=e.dimension;function a(v,x){v.range.min=Math.min(x[r],v.range.min),v.range.max=Math.max(x[r]+x[i],v.range.max)}function s(v){return v[r]+v[i]/2}function c(v){return v.length-1}function l(v){return v.max-v.min}function u(v,x){var b={y:0};b[r]=v-s(x),b[r]&&(b[x$[r]]=0,t.moveElements([x],b,x.parent))}var d=n[0],h=c(n),f=n[h],p,m,g=0;Y(n,function(v,x){var b,w,_;if(v.elements.length<2){x&&x!==n.length-1&&(a(v,v.elements[0]),g+=l(v.range));return}b=Gs(v.elements,r),w=b[0],x===h&&(w=b[c(b)]),_=s(w),v.range=null,Y(b,function(j){if(u(_,j),v.range===null){v.range={min:j[r],max:j[r]+j[i]};return}a(v,j)}),x&&x!==n.length-1&&(g+=l(v.range))}),m=Math.abs(f.range.min-d.range.max),p=Math.round((m-g)/(n.length-1)),!(p<n.length-1)&&Y(n,function(v,x){var b={},w;v===d||v===f||(w=n[x-1],v.range.max=0,Y(v.elements,function(_,j){b[x$[r]]=0,b[r]=w.range.max-_[r]+p,v.range.min!==_[r]&&(b[r]+=_[r]-v.range.min),b[r]&&t.moveElements([_],b,_.parent),v.range.max=Math.max(_[r]+_[i],j?v.range.max:0)}))})};Nb.prototype.postExecute=function(e){};function Pb(e,t){this._layouter=e,this._canvas=t}Pb.$inject=["layouter","canvas"];Pb.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return ee(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};Pb.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function iP(){}iP.prototype.execute=function(e){var t=e.connection,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,a=t.parent;return e.oldParent=a,e.oldParentIndex=qn(a.children,t),er(r.children,t,i),t.parent=r,Y(t.waypoints,function(s){s.x+=n.x,s.y+=n.y,s.original&&(s.original.x+=n.x,s.original.y+=n.y)}),t};iP.prototype.revert=function(e){var t=e.connection,n=t.parent,r=e.oldParent,i=e.oldParentIndex,a=e.delta;return qn(n.children,t),er(r.children,t,i),t.parent=r,Y(t.waypoints,function(s){s.x-=a.x,s.y-=a.y,s.original&&(s.original.x-=a.x,s.original.y-=a.y)}),t};function aP(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}aP.prototype.add=function(e,t){return this.addAll([e],t)};aP.prototype.addAll=function(e,t){var n=u9(e,!!t,this);return ee(this,n),this};function cm(e){this._modeling=e}cm.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};cm.prototype.moveClosure=function(e,t,n,r,i){var a=this._modeling,s=e.allShapes,c=e.allConnections,l=e.enclosedConnections,u=e.topLevel,d=!1;i&&i.parent===n&&(d=!0),Y(s,function(h){a.moveShape(h,t,u[h.id]&&!d&&n,{recurse:!1,layout:!1})}),Y(c,function(h){var f=!!s[h.source.id],p=!!s[h.target.id];l[h.id]&&f&&p?a.moveConnection(h,t,u[h.id]&&!d&&n):a.layoutConnection(h,{connectionStart:f&&CN(h,h.source,t),connectionEnd:p&&AN(h,h.target,t)})})};cm.prototype.getClosure=function(e){return new aP().addAll(e,!0)};function kb(e){this._helper=new cm(e)}kb.$inject=["modeling"];kb.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};kb.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Il(e){this._modeling=e,this._helper=new cm(e)}Il.$inject=["modeling"];Il.prototype.execute=function(e){var t=e.shape,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,a=t.parent;return e.oldBounds=is(t,["x","y","width","height"]),e.oldParent=a,e.oldParentIndex=qn(a.children,t),er(r.children,t,i),ee(t,{parent:r,x:t.x+n.x,y:t.y+n.y}),t};Il.prototype.postExecute=function(e){var t=e.shape,n=e.delta,r=e.hints,i=this._modeling;r.layout!==!1&&(Y(t.incoming,function(a){i.layoutConnection(a,{connectionEnd:AN(a,t,n)})}),Y(t.outgoing,function(a){i.layoutConnection(a,{connectionStart:CN(a,t,n)})})),r.recurse!==!1&&this.moveChildren(e)};Il.prototype.revert=function(e){var t=e.shape,n=e.oldParent,r=e.oldParentIndex,i=e.delta;return er(n.children,t,r),ee(t,{parent:n,x:t.x-i.x,y:t.y-i.y}),t};Il.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};Il.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function lm(e){this._modeling=e}lm.$inject=["modeling"];lm.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,r=e.connection,i=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return jt(i)&&(e.oldWaypoints=r.waypoints,r.waypoints=i),t&&(e.oldSource=r.source,r.source=t),n&&(e.oldTarget=r.target,r.target=n),r};lm.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,r=e.newTarget,i=e.dockingOrPoints,a=e.hints||{},s={};a.connectionStart&&(s.connectionStart=a.connectionStart),a.connectionEnd&&(s.connectionEnd=a.connectionEnd),a.layoutConnection!==!1&&(n&&(!r||a.docking==="source")&&(s.connectionStart=s.connectionStart||b$(jt(i)?i[0]:i)),r&&(!n||a.docking==="target")&&(s.connectionEnd=s.connectionEnd||b$(jt(i)?i[i.length-1]:i)),a.newWaypoints&&(s.waypoints=a.newWaypoints),this._modeling.layoutConnection(t,s))};lm.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,r=e.oldWaypoints,i=e.connection;return t&&(i.source=t),n&&(i.target=n),r&&(i.waypoints=r),i};function b$(e){return e.original||e}function so(e,t){this._modeling=e,this._rules=t}so.$inject=["modeling","rules"];so.prototype.preExecute=function(e){var t=this,n=this._modeling,r=this._rules,i=e.oldShape,a=e.newData,s=e.hints||{},c;function l(m,g,v){return r.allowed("connection.reconnect",{connection:v,source:m,target:g})}var u={x:a.x,y:a.y},d={x:i.x,y:i.y,width:i.width,height:i.height};c=e.newShape=e.newShape||t.createShape(a,u,i.parent,s),i.host&&n.updateAttachment(c,i.host);var h;s.moveChildren!==!1&&(h=i.children.slice(),n.moveElements(h,{x:0,y:0},c,s));var f=i.incoming.slice(),p=i.outgoing.slice();Y(f,function(m){var g=m.source,v=l(g,c,m);v&&t.reconnectEnd(m,c,mb(m,c,d),s)}),Y(p,function(m){var g=m.target,v=l(c,g,m);v&&t.reconnectStart(m,c,pb(m,c,d),s)})};so.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};so.prototype.execute=function(e){};so.prototype.revert=function(e){};so.prototype.createShape=function(e,t,n,r){return this._modeling.createShape(e,t,n,r)};so.prototype.reconnectStart=function(e,t,n,r){this._modeling.reconnectStart(e,t,n,r)};so.prototype.reconnectEnd=function(e,t,n,r){this._modeling.reconnectEnd(e,t,n,r)};function um(e){this._modeling=e}um.$inject=["modeling"];um.prototype.execute=function(e){var t=e.shape,n=e.newBounds,r=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(r&&(n.width<r.width||n.height<r.height))throw new Error("width and height cannot be less than minimum height and width");if(!r&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},ee(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};um.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,r=e.oldBounds,i=e.hints||{};i.layout!==!1&&(Y(n.incoming,function(a){t.layoutConnection(a,{connectionEnd:mb(a,n,r)})}),Y(n.outgoing,function(a){t.layoutConnection(a,{connectionStart:pb(a,n,r)})}))};um.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return ee(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function bc(e){this._modeling=e}bc.$inject=["modeling"];bc.prototype.preExecute=function(e){var t=e.delta,n=e.direction,r=e.movingShapes,i=e.resizingShapes,a=e.start,s={};this.moveShapes(r,t),Y(i,function(c){s[c.id]=L2e(c)}),this.resizeShapes(i,t,n),this.updateConnectionWaypoints(d2e(r,i),t,n,a,r,i,s)};bc.prototype.execute=function(){};bc.prototype.revert=function(){};bc.prototype.moveShapes=function(e,t){var n=this;Y(e,function(r){n._modeling.moveShape(r,t,null,{autoResize:!1,layout:!1,recurse:!1})})};bc.prototype.resizeShapes=function(e,t,n){var r=this;Y(e,function(i){var a=h2e(i,n,t);r._modeling.resizeShape(i,a,null,{attachSupport:!1,autoResize:!1,layout:!1})})};bc.prototype.updateConnectionWaypoints=function(e,t,n,r,i,a,s){var c=this,l=i.concat(a);Y(e,function(u){var d=u.source,h=u.target,f=D2e(u),p=f8(n),m={};So(l,d)&&So(l,h)?(f=Ti(f,function(g){return _$(g,r,n)&&(g[p]=g[p]+t[p]),g.original&&_$(g.original,r,n)&&(g.original[p]=g.original[p]+t[p]),g}),c._modeling.updateWaypoints(u,f,{labelBehavior:!1})):(So(l,d)||So(l,h))&&(So(i,d)?m.connectionStart=CN(u,d,t):So(i,h)?m.connectionEnd=AN(u,h,t):So(a,d)?m.connectionStart=pb(u,d,s[d.id]):So(a,h)&&(m.connectionEnd=mb(u,h,s[h.id])),c._modeling.layoutConnection(u,m))})};function w$(e){return ee({},e)}function D2e(e){return Ti(e.waypoints,function(t){return t=w$(t),t.original&&(t.original=w$(t.original)),t})}function f8(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function _$(e,t,n){var r=f8(n);if(/e|s/.test(n))return e[r]>t;if(/n|w/.test(n))return e[r]<t}function So(e,t){return e.indexOf(t)!==-1}function L2e(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Cb(e){this._modeling=e}Cb.$inject=["modeling"];Cb.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=p8(n),t.collapsed=!t.collapsed;var r=m8(n,t.collapsed);return[t].concat(r)};Cb.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,r=t.children,i=g8(r,n);return t.collapsed=!t.collapsed,[t].concat(i)};function p8(e){var t={};return Y(e,function(n){t[n.id]=n.hidden,n.children&&(t=ee({},t,p8(n.children)))}),t}function m8(e,t){var n=[];return Y(e,function(r){r.hidden=t,n=n.concat(r),r.children&&(n=n.concat(m8(r.children,r.collapsed||t)))}),n}function g8(e,t){var n=[];return Y(e,function(r){r.hidden=t[r.id],n=n.concat(r),r.children&&(n=n.concat(g8(r.children,t)))}),n}function Ab(e){this._modeling=e}Ab.$inject=["modeling"];Ab.prototype.execute=function(e){var t=e.shape,n=e.newHost,r=t.host;return e.oldHost=r,e.attacherIdx=v8(r,t),y8(n,t),t.host=n,t};Ab.prototype.revert=function(e){var t=e.shape,n=e.newHost,r=e.oldHost,i=e.attacherIdx;return t.host=r,v8(n,t),y8(r,t,i),t};function v8(e,t){return qn(e&&e.attachers,t)}function y8(e,t,n){if(e){var r=e.attachers;r||(e.attachers=r=[]),er(r,t,n)}}function sP(){}sP.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};sP.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function Wt(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var r=this;e.on("diagram.init",function(){r.registerHandlers(n)})}Wt.$inject=["eventBus","elementFactory","commandStack"];Wt.prototype.getHandlers=function(){return{"shape.append":Sb,"shape.create":xc,"shape.delete":om,"shape.move":Il,"shape.resize":um,"shape.replace":so,"shape.toggleCollapse":Cb,spaceTool:bc,"label.create":am,"connection.create":Eb,"connection.delete":sm,"connection.move":iP,"connection.layout":Pb,"connection.updateWaypoints":sP,"connection.reconnect":lm,"elements.create":nP,"elements.move":kb,"elements.delete":rP,"elements.distribute":Nb,"elements.align":jb,"element.updateAttachment":Ab}};Wt.prototype.registerHandlers=function(e){Y(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};Wt.prototype.moveShape=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=null);var a={shape:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("shape.move",a)};Wt.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};Wt.prototype.moveElements=function(e,t,n,r){r=r||{};var i=r.attach,a=n,s;i===!0?(s=n,a=n.parent):i===!1&&(s=null);var c={shapes:e,delta:t,newParent:a,newHost:s,hints:r};this._commandStack.execute("elements.move",c)};Wt.prototype.moveConnection=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=void 0);var a={connection:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("connection.move",a)};Wt.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};Wt.prototype.createConnection=function(e,t,n,r,i,a){typeof n=="object"&&(a=i,i=r,r=n,n=void 0),r=this._create("connection",r);var s={source:e,target:t,parent:i,parentIndex:n,connection:r,hints:a};return this._commandStack.execute("connection.create",s),s.connection};Wt.prototype.createShape=function(e,t,n,r,i){typeof r!="number"&&(i=r,r=void 0),i=i||{};var a=i.attach,s,c;e=this._create("shape",e),a?(s=n.parent,c=n):s=n;var l={position:t,shape:e,parent:s,parentIndex:r,host:c,hints:i};return this._commandStack.execute("shape.create",l),l.shape};Wt.prototype.createElements=function(e,t,n,r,i){jt(e)||(e=[e]),typeof r!="number"&&(i=r,r=void 0),i=i||{};var a={position:t,elements:e,parent:n,parentIndex:r,hints:i};return this._commandStack.execute("elements.create",a),a.elements};Wt.prototype.createLabel=function(e,t,n,r){n=this._create("label",n);var i={labelTarget:e,position:t,parent:r||e.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape};Wt.prototype.appendShape=function(e,t,n,r,i){i=i||{},t=this._create("shape",t);var a={source:e,position:n,target:r,shape:t,connection:i.connection,connectionParent:i.connectionParent,hints:i};return this._commandStack.execute("shape.append",a),a.shape};Wt.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};Wt.prototype.distributeElements=function(e,t,n){var r={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",r)};Wt.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};Wt.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};Wt.prototype.replaceShape=function(e,t,n){var r={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape};Wt.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};Wt.prototype.resizeShape=function(e,t,n,r){var i={shape:e,newBounds:t,minBounds:n,hints:r};this._commandStack.execute("shape.resize",i)};Wt.prototype.createSpace=function(e,t,n,r,i){var a={delta:n,direction:r,movingShapes:e,resizingShapes:t,start:i};this._commandStack.execute("spaceTool",a)};Wt.prototype.updateWaypoints=function(e,t,n){var r={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)};Wt.prototype.reconnect=function(e,t,n,r,i){var a={connection:e,newSource:t,newTarget:n,dockingOrPoints:r,hints:i||{}};this._commandStack.execute("connection.reconnect",a)};Wt.prototype.reconnectStart=function(e,t,n,r){r||(r={}),this.reconnect(e,t,e.target,n,ee(r,{docking:"source"}))};Wt.prototype.reconnectEnd=function(e,t,n,r){r||(r={}),this.reconnect(e,e.source,t,n,ee(r,{docking:"target"}))};Wt.prototype.connect=function(e,t,n,r){return this.createConnection(e,t,n||{},e.parent,r)};Wt.prototype._create=function(e,t){return d9(t)?t:this._elementFactory.create(e,t)};Wt.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function dm(e){this._elementRegistry=e}dm.$inject=["elementRegistry"];dm.prototype.execute=function(e){var t=e.element,n=e.moddleElement,r=e.properties;if(!n)throw new Error("<moddleElement> required");var i=e.changed||this._getVisualReferences(n).concat(t),a=e.oldProperties||B2e(n,Vw(r));return x8(n,r),e.oldProperties=a,e.changed=i,i};dm.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,r=e.changed;return x8(n,t),r};dm.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return C(e,"bpmn:DataObject")?F2e(e,t):[]};function B2e(e,t){return rc(t,function(n,r){return n[r]=e.get(r),n},{})}function x8(e,t){Y(t,function(n,r){e.set(r,n)})}function F2e(e,t){return t.filter(function(n){return C(n,"bpmn:DataObjectReference")&&Ce(n).dataObjectRef===e})}var qh="default",Hs="id",b8="di",z2e={width:0,height:0};function hm(e,t,n,r){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=r}hm.$inject=["elementRegistry","moddle","modeling","textRenderer"];hm.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var r=this._elementRegistry,i=this._moddle.ids,a=t.businessObject,s=W2e(e.properties),c=e.oldProperties||U2e(t,s);return w8(s,a)&&(i.unclaim(a[Hs]),r.updateId(t,s[Hs]),i.claim(s[Hs],a)),qh in s&&(s[qh]&&n.push(r.get(s[qh].id)),a[qh]&&n.push(r.get(a[qh].id))),_8(t,s),e.oldProperties=c,e.changed=n,n};hm.prototype.postExecute=function(e){var t=e.element,n=t.label,r=n&&Ce(n).name;if(r){var i=this._textRenderer.getExternalLabelBounds(n,r);this._modeling.resizeShape(n,i,z2e)}};hm.prototype.revert=function(e){var t=e.element,n=e.properties,r=e.oldProperties,i=t.businessObject,a=this._elementRegistry,s=this._moddle.ids;return _8(t,r),w8(n,i)&&(s.unclaim(n[Hs]),a.updateId(t,r[Hs]),s.claim(r[Hs],i)),e.changed};function w8(e,t){return Hs in e&&e[Hs]!==t[Hs]}function U2e(e,t){var n=Vw(t),r=e.businessObject,i=Gt(e);return rc(n,function(a,s){return s!==b8?a[s]=r.get(s):a[s]=H2e(i,Vw(t.di)),a},{})}function H2e(e,t){return rc(t,function(n,r){return n[r]=e&&e.get(r),n},{})}function _8(e,t){var n=e.businessObject,r=Gt(e);Y(t,function(i,a){a!==b8?n.set(a,i):r&&V2e(r,i)})}function V2e(e,t){Y(t,function(n,r){e.set(r,n)})}var G2e=["default"];function W2e(e){var t=ee({},e);return G2e.forEach(function(n){n in e&&(t[n]=Ce(t[n]))}),t}function Tb(e,t){this._canvas=e,this._modeling=t}Tb.$inject=["canvas","modeling"];Tb.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=t.getRootElement(),a=i.businessObject,s=a.$parent,c=Gt(i);return t.setRootElement(n),t.removeRootElement(i),er(s.rootElements,r),r.$parent=s,qn(s.rootElements,a),a.$parent=null,i.di=null,c.bpmnElement=r,n.di=c,e.oldRoot=i,[]};Tb.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=e.oldRoot,a=i.businessObject,s=r.$parent,c=Gt(n);return t.setRootElement(i),t.removeRootElement(n),qn(s.rootElements,r),r.$parent=null,er(s.rootElements,a),a.$parent=s,n.di=null,c.bpmnElement=a,i.di=c,[]};function oP(e,t){this._modeling=e,this._spaceTool=t}oP.$inject=["modeling","spaceTool"];oP.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,r=e.shape,i=e.location,a=Wi(r),s=a===r,c=s?r:r.parent,l=gc(c),u=vr(r);if(u?i==="left"?i="top":i==="right"&&(i="bottom"):i==="top"?i="left":i==="bottom"&&(i="right"),!l.length){var d=u?{x:r.x+Hi,y:r.y,width:r.width-Hi,height:r.height}:{x:r.x,y:r.y+Hi,width:r.width,height:r.height-Hi};n.createShape({type:"bpmn:Lane",isHorizontal:u},d,c)}var h=[];Vy(a,function(_){return h.push(_),_.label&&h.push(_.label),_===r?[]:Et(_.children,function(j){return j!==r})});var f,p,m,g,v;i==="top"?(f=-120,p=r.y,m=p+10,g="n",v="y"):i==="left"?(f=-120,p=r.x,m=p+10,g="w",v="x"):i==="bottom"?(f=120,p=r.y+r.height,m=p-10,g="s",v="y"):i==="right"&&(f=120,p=r.x+r.width,m=p-10,g="e",v="x");var x=t.calculateAdjustments(h,v,f,m),b=u?{x:0,y:f}:{x:f,y:0};t.makeSpace(x.movingShapes,x.resizingShapes,b,g,m);var w=u?{x:r.x+(s?Hi:0),y:p-(i==="top"?120:0),width:r.width-(s?Hi:0),height:120}:{x:p-(i==="left"?120:0),y:r.y+(s?Hi:0),width:120,height:r.height-(s?Hi:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:u},w,c)};function cP(e){this._modeling=e}cP.$inject=["modeling"];cP.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,r=e.count,i=gc(n),a=i.length;if(a>r)throw new Error(`more than <${r}> child lanes`);var s=vr(n),c=s?n.height:n.width,l=Math.round(c/r),u,d,h,f;for(f=0;f<r;f++)f===r-1?u=c-l*f:u=l,d=s?{x:n.x+Hi,y:n.y+f*l,width:n.width-Hi,height:u}:{x:n.x+f*l,y:n.y+Hi,width:u,height:n.height-Hi},f<a?t.resizeShape(i[f],d):(h={type:"bpmn:Lane",isHorizontal:s},t.createShape(h,d,n))};function fm(e,t){this._modeling=e,this._spaceTool=t}fm.$inject=["modeling","spaceTool"];fm.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,r=e.balanced;r!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};fm.prototype.resizeBalanced=function(e,t){var n=this._modeling,r=bPe(e,t);n.resizeShape(e,t),r.forEach(function(i){n.resizeShape(i.shape,i.newBounds)})};fm.prototype.resizeSpace=function(e,t){var n=this._spaceTool,r=He(e),i=He(t),a=_6(i,r),s=Wi(e),c=[],l=[];Vy(s,function(m){return c.push(m),(C(m,"bpmn:Lane")||C(m,"bpmn:Participant"))&&l.push(m),m.children});var u,d,h,f,p;(a.bottom||a.top)&&(u=a.bottom||a.top,d=e.y+(a.bottom?e.height:0)+(a.bottom?-10:10),h=a.bottom?"s":"n",f=a.top>0||a.bottom<0?-u:u,p=n.calculateAdjustments(c,"y",f,d),n.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:u},h)),(a.left||a.right)&&(u=a.right||a.left,d=e.x+(a.right?e.width:0)+(a.right?-10:100),h=a.right?"e":"w",f=a.left>0||a.right<0?-u:u,p=n.calculateAdjustments(l,"x",f,d),n.makeSpace(p.movingShapes,p.resizingShapes,{x:u,y:0},h))};var bp="flowNodeRef",lP="lanes";function pm(e){this._elementRegistry=e}pm.$inject=["elementRegistry"];pm.prototype._computeUpdates=function(e,t){var n=[],r=[],i={},a=[];function s(d,h){var f=He(h),p={x:d.x+d.width/2,y:d.y+d.height/2};return p.x>f.left&&p.x<f.right&&p.y>f.top&&p.y<f.bottom}function c(d){n.indexOf(d)===-1&&(a.push(d),n.push(d))}function l(d){var h=Wi(d);return i[h.id]||(i[h.id]=hb(h)),i[h.id]}function u(d){if(!d.parent)return[];var h=l(d);return h.filter(function(f){return s(d,f)}).map(function(f){return f.businessObject})}return t.forEach(function(d){var h=Wi(d);if(!(!h||n.indexOf(h)!==-1)){var f=h.children.filter(function(p){return C(p,"bpmn:FlowNode")});f.forEach(c),n.push(h)}}),e.forEach(c),a.forEach(function(d){var h=d.businessObject,f=h.get(lP),p=f.slice(),m=u(d);r.push({flowNode:h,remove:p,add:m})}),t.forEach(function(d){var h=d.businessObject;d.parent||h.get(bp).forEach(function(f){r.push({flowNode:f,remove:[h],add:[]})})}),r};pm.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var r=n.flowNode,i=r.get(lP);n.remove.forEach(function(a){qn(i,a),qn(a.get(bp),r)}),n.add.forEach(function(a){er(i,a),er(a.get(bp),r)})}),[]};pm.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var r=n.flowNode,i=r.get(lP);n.add.forEach(function(a){qn(i,a),qn(a.get(bp),r)}),n.remove.forEach(function(a){er(i,a),er(a.get(bp),r)})}),[]};function Ob(e){this._moddle=e}Ob.$inject=["moddle"];Ob.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.claim(n,r):t.unclaim(n),[]};Ob.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.unclaim(n):t.claim(n,r),[]};var q2e={fill:void 0,stroke:void 0};function uP(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(By(t)){var n=K2e(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}uP.$inject=["commandStack"];uP.prototype.postExecute=function(e){var t=e.elements,n=e.colors||q2e,r=this,i={};"fill"in n&&ee(i,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&ee(i,{"border-color":this._normalizeColor(n.stroke)}),Y(t,function(a){var s=Jt(a)?is(i,["border-color"]):i,c=Gt(a);if(Y2e(s),kt(a))r._commandStack.execute("element.updateModdleProperties",{element:a,moddleElement:c.label,properties:{color:i["border-color"]}});else{if(!mt(c,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;r._commandStack.execute("element.updateProperties",{element:a,properties:{di:s}})}})};function K2e(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function Y2e(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var X2e={width:0,height:0};function j8(e,t,n){function r(l,u){var d=l.label||l,h=l.labelTarget||l;return h9(d,u),[d,h]}function i(l){var u=l.element,d=u.businessObject,h=l.newLabel;if(!kt(u)&&qu(u)&&!Hy(u)&&!j$(h)){var f=7,p=fM(u);p={x:p.x,y:p.y+f},e.createLabel(u,p,{id:d.id+"_label",businessObject:d,di:u.di})}}function a(l){return l.oldLabel=gl(l.element),r(l.element,l.newLabel)}function s(l){return r(l.element,l.oldLabel)}function c(l){var u=l.element,d=u.label||u,h=l.newLabel,f=l.newBounds,p=l.hints||{};if(!(!kt(d)&&!C(d,"bpmn:TextAnnotation"))){if(kt(d)&&j$(h)){p.removeShape!==!1&&e.removeShape(d,{unsetLabel:!1});return}var m=gl(u);typeof f>"u"&&(f=t.getExternalLabelBounds(d,m)),f&&e.resizeShape(d,f,X2e)}}this.preExecute=i,this.execute=a,this.revert=s,this.postExecute=c}j8.$inject=["modeling","textRenderer","bpmnFactory"];function j$(e){return!e||!e.trim()}function Pr(e,t,n,r){Wt.call(this,e,t,n),this._bpmnRules=r}Me(Pr,Wt);Pr.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];Pr.prototype.getHandlers=function(){var e=Wt.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=dm,e["element.updateProperties"]=hm,e["canvas.updateRoot"]=Tb,e["lane.add"]=oP,e["lane.resize"]=fm,e["lane.split"]=cP,e["lane.updateRefs"]=pm,e["id.updateClaim"]=Ob,e["element.setColor"]=uP,e["element.updateLabel"]=j8,e};Pr.prototype.updateLabel=function(e,t,n,r){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:r||{}})};Pr.prototype.connect=function(e,t,n,r){var i=this._bpmnRules;if(n||(n=i.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,r)};Pr.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};Pr.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};Pr.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};Pr.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};Pr.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};Pr.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};Pr.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};Pr.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};Pr.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};Pr.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};Pr.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function S8(){}S8.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||tt(t.source||e.source),t.connectionEnd||tt(t.target||e.target)]};var Cg=20,Z2e=5,Py=Math.round,S$=20,J2e={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function Q2e(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function eCe(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function E8(e,t,n){var r=Nr(t,e,Z2e),i=n.split(":")[0],a=Py((t.x-e.x)/2+e.x),s=Py((t.y-e.y)/2+e.y),c,l,u=eCe(i,r),d=/h|r|l/.test(i),h=!1,f=!1;return u?(c=d?{x:a,y:e.y}:{x:e.x,y:s},l=d?"h:h":"v:v"):(h=Q2e(r,i),l=d?"h:v":"v:h",h?d?(f=s===e.y,c={x:e.x+Cg*(/l/.test(i)?-1:1),y:f?s+Cg:s}):(f=a===e.x,c={x:f?a+Cg:a,y:e.y+Cg*(/t/.test(i)?-1:1)}):c={x:a,y:s}),{waypoints:dP(e,c,l).concat(c),directions:l,turnNextDirections:f}}function tCe(e,t,n){return E8(e,t,n)}function nCe(e,t,n){var r=E8(t,e,E$(n));return{waypoints:r.waypoints.slice().reverse(),directions:E$(r.directions),turnNextDirections:r.turnNextDirections}}function rCe(e,t){var n=e.directions.split(":")[1],r=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(r=r=="h"?"v":"h");var i=n+":"+r,a=dP(e.waypoints[e.waypoints.length-1],t.waypoints[0],i);return{waypoints:a,directions:i}}function E$(e){return e.split(":").reverse().join(":")}function iCe(e,t,n){var r=Py((t.x-e.x)/2+e.x),i=Py((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:r,y:e.y},{x:r,y:t.y}];if(n==="v:v")return[{x:e.x,y:i},{x:t.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function dP(e,t,n){if(n=n||"h:h",!fCe(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(N8(n)){var r=tCe(e,t,n),i=nCe(e,t,n),a=rCe(r,i);return[].concat(r.waypoints,a.waypoints,i.waypoints)}return iCe(e,t,n)}function aCe(e,t,n){var r=dP(e,t,n);return r.unshift(e),r.push(t),P8(r)}function sCe(e,t,n,r,i){var a=i&&i.preferredLayouts||[],s=f9(a,"straight")[0]||"h:h",c=J2e[s]||0,l=Nr(e,t,c),u=hCe(l,s);n=n||tt(e),r=r||tt(t);var d=u.split(":"),h=P$(n,e,d[0],pCe(l)),f=P$(r,t,d[1],l);return aCe(h,f,u)}function oCe(e,t,n,r,i,a){jt(n)&&(i=n,a=r,n=tt(e),r=tt(t)),a=ee({preferredLayouts:[]},a),i=i||[];var s=a.preferredLayouts,c=s.indexOf("straight")!==-1,l;return l=c&&lCe(e,t,n,r,a),l||(l=a.connectionEnd&&dCe(t,e,r,i),l)||(l=a.connectionStart&&uCe(e,t,n,i),l)?l:!a.connectionStart&&!a.connectionEnd&&i&&i.length?i:sCe(e,t,n,r,a)}function cCe(e,t,n){return e>=t&&e<=n}function N$(e,t,n){var r={x:"width",y:"height"};return cCe(t[e],n[e],n[e]+n[r[e]])}function lCe(e,t,n,r,i){var a={},s,c;return c=Nr(e,t),/^(top|bottom|left|right)$/.test(c)?(/top|bottom/.test(c)&&(s="x"),/left|right/.test(c)&&(s="y"),i.preserveDocking==="target"?N$(s,r,e)?(a[s]=r[s],[{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y,original:{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y}},{x:r.x,y:r.y}]):null:N$(s,n,t)?(a[s]=n[s],[{x:n.x,y:n.y},{x:a.x!==void 0?a.x:r.x,y:a.y!==void 0?a.y:r.y,original:{x:a.x!==void 0?a.x:r.x,y:a.y!==void 0?a.y:r.y}}]):null):null}function uCe(e,t,n,r){return hP(e,t,n,r)}function dCe(e,t,n,r){var i=r.slice().reverse();return i=hP(e,t,n,i),i?i.reverse():null}function hP(e,t,n,r){function i(d){return d.length<3?!0:d.length>4?!1:!!gn(d,function(h,f){var p=d[f-1];return p&&oM(h,p)<3})}function a(d,h,f){var p=As(h,d);switch(p){case"v":return{x:f.x,y:d.y};case"h":return{x:d.x,y:f.y}}return{x:d.x,y:d.y}}function s(d,h,f){var p;for(p=d.length-2;p!==0;p--)if(uk(d[p],h,S$)||uk(d[p],f,S$))return d.slice(p);return d}if(i(r))return null;var c=r[0],l=r.slice(),u;return l[0]=n,l[1]=a(l[1],c,n),u=s(l,e,t),u!==l&&(l=hP(e,t,n,u)),l&&As(l)?null:l}function hCe(e,t){if(N8(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function fCe(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function N8(e){return e&&/t|r|b|l/.test(e)}function pCe(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function P$(e,t,n,r){if(n==="h"&&(n=/left/.test(r)?"l":"r"),n==="v"&&(n=/top/.test(r)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function P8(e){return e.reduce(function(t,n,r){var i=t[t.length-1],a=e[r+1];return cM(i,a,n,0)||t.push(n),t},[])}var mCe=-10,gCe=40,vCe={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},yCe={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},fP={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},af={top:"t",right:"r",bottom:"b",left:"l"};function Rb(e){this._elementRegistry=e}Me(Rb,S8);Rb.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,r=t.target||e.target,i=t.waypoints||e.waypoints,a=t.connectionStart,s=t.connectionEnd,c=this._elementRegistry,l,u;if(a||(a=k$(i&&i[0],n)),s||(s=k$(i&&i[i.length-1],r)),(C(e,"bpmn:Association")||C(e,"bpmn:DataAssociation"))&&i&&!C$(n,r))return[].concat([a],i.slice(1,-1),[s]);var d=JF(n,c)?vCe:yCe;return C(e,"bpmn:MessageFlow")?l=bCe(n,r,d):(C(e,"bpmn:SequenceFlow")||C$(n,r))&&(n===r?l={preferredLayouts:NCe(n,e,d)}:C(n,"bpmn:BoundaryEvent")?l={preferredLayouts:PCe(n,r,s,d)}:wp(n)||wp(r)?l={preferredLayouts:d.subProcess,preserveDocking:_Ce(n)}:C(n,"bpmn:Gateway")?l={preferredLayouts:d.fromGateway}:C(r,"bpmn:Gateway")?l={preferredLayouts:d.toGateway}:l={preferredLayouts:d.default}),l&&(l=ee(l,t),u=P8(oCe(n,r,a,s,i,l))),u||[a,s]};function xCe(e){var t=e.host;return Nr(tt(e),t,mCe)}function bCe(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:wCe(e,t)}}function wCe(e,t){return C(t,"bpmn:Participant")?"source":C(e,"bpmn:Participant")?"target":wp(t)?"source":wp(e)||C(t,"bpmn:Event")?"target":C(e,"bpmn:Event")?"source":null}function _Ce(e){return wp(e)?"target":"source"}function k$(e,t){return e?e.original||e:tt(t)}function C$(e,t){return C(t,"bpmn:Activity")&&C(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function wp(e){return C(e,"bpmn:SubProcess")&&Mt(e)}function tl(e,t){return e===t}function jCe(e,t){return t.indexOf(e)!==-1}function Rd(e){var t=/right|left/.exec(e);return t&&t[0]}function $d(e){var t=/top|bottom/.exec(e);return t&&t[0]}function A$(e,t){return fP[e]===t}function SCe(e,t){var n=Rd(e),r=fP[n];return t.indexOf(r)!==-1}function ECe(e,t){var n=$d(e),r=fP[n];return t.indexOf(r)!==-1}function k8(e){return e==="right"||e==="left"}function NCe(e,t,n){var r=t.waypoints,i=r&&r.length&&Nr(r[0],e);return i==="top"?n.loop.fromTop:i==="right"?n.loop.fromRight:i==="left"?n.loop.fromLeft:n.loop.fromBottom}function PCe(e,t,n,r){var i=tt(e),a=tt(t),s=xCe(e),c,l,u=tl(e.host,t),d=jCe(s,["top","right","bottom","left"]),h=Nr(a,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return u?kCe(s,d,e,t,n,r):(c=CCe(s,h,d,r.isHorizontal),l=ACe(s,h,d,r.isHorizontal),[c+":"+l])}function kCe(e,t,n,r,i,a){var s=t?e:a.isHorizontal?$d(e):Rd(e),c=af[s],l;return t?k8(e)?l=T$("y",n,r,i)?"h":a.boundaryLoop.alternateHorizontalSide:l=T$("x",n,r,i)?"v":a.boundaryLoop.alternateVerticalSide:l=a.boundaryLoop.default,[c+":"+l]}function T$(e,t,n,r){var i=gCe;return!(kw(e,r,n,i)||kw(e,r,{x:n.x+n.width,y:n.y+n.height},i)||kw(e,r,tt(t),i))}function kw(e,t,n,r){return Math.abs(t[e]-n[e])<r}function CCe(e,t,n,r){if(n)return af[e];var i=$d(e),a=Rd(e),s=$d(t),c=Rd(t);if(r){if(tl(i,s)||A$(a,c))return af[i]}else if(tl(a,c)||A$(i,s))return af[a];return af[r?a:i]}function ACe(e,t,n,r){return n?k8(e)?SCe(e,t)||tl(e,t)?"h":"v":ECe(e,t)||tl(e,t)?"v":"h":r?tl($d(e),$d(t))?"h":"v":tl(Rd(e),Rd(t))?"v":"h"}Rb.$inject=["elementRegistry"];function O$(e){return ee({original:e.point.original||e.point},e.actual)}function wc(e,t){this._elementRegistry=e,this._graphicsFactory=t}wc.$inject=["elementRegistry","graphicsFactory"];wc.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var r=this.getDockingPoint(e,t,!0),i=this.getDockingPoint(e,n),a=e.waypoints.slice(r.idx+1,i.idx);return a.unshift(O$(r)),a.push(O$(i)),a};wc.prototype.getDockingPoint=function(e,t,n){var r=e.waypoints,i,a,s;return i=n?0:r.length-1,a=r[i],s=this._getIntersection(t,e,n),{point:a,actual:s||a,idx:i}};wc.prototype._getIntersection=function(e,t,n){var r=this._getShapePath(e),i=this._getConnectionPath(t);return Uw(r,i,n)};wc.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};wc.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};wc.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const C8={__init__:["modeling","bpmnUpdater"],__depends__:[Eke,Hke,Gke,Wke,l8,b2e,_2e,k2e,os,pM,h8],bpmnFactory:["type",la],bpmnUpdater:["type",di],elementFactory:["type",yc],modeling:["type",Pr],layouter:["type",Rb],connectionDocking:["type",wc]},R$=Math.round;function $b(e,t,n,r,i,a){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=r,this._layouter=i,this._rules=a}$b.prototype.create=function(e,t,n){const r=this._complexPreview,i=this._connectionDocking,a=this._elementFactory,s=this._eventBus,c=this._layouter,l=this._rules,u=a.createShape(ee({type:t},n)),d=s.fire("autoPlace",{source:e,shape:u});if(!d)return;ee(u,{x:d.x-R$(u.width/2),y:d.y-R$(u.height/2)});const h=l.allowed("connection.create",{source:e,target:u,hints:{targetParent:e.parent}});let f=null;h&&(f=a.createConnection(h),f.waypoints=c.layoutConnection(f,{source:e,target:u}),f.waypoints=i.getCroppedWaypoints(f,e,u)),r.create({created:[u,f].filter(p=>!zw(p))})};$b.prototype.cleanUp=function(){this._complexPreview.cleanUp()};$b.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const TCe={__depends__:[aN,ePe,C8],__init__:["appendPreview"],appendPreview:["type",$b]};var $$=Math.min,I$=Math.max;function Cw(e){e.preventDefault()}function bf(e){e.stopPropagation()}function OCe(e){return e.nodeType===Node.TEXT_NODE}function RCe(e){return[].slice.call(e)}function Fa(e){this.container=e.container,this.parent=gr('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=$n("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=ml(this.autoResize,this),this.handlePaste=ml(this.handlePaste,this)}Fa.prototype.create=function(e,t,n,r){var i=this,a=this.parent,s=this.content,c=this.container;r=this.options=r||{},t=this.style=t||{};var l=is(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);ee(a.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},l);var u=is(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return ee(s.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},u),r.centerVertically&&ee(s.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},u),s.innerText=n,ot.bind(s,"keydown",this.keyHandler),ot.bind(s,"mousedown",bf),ot.bind(s,"paste",i.handlePaste),r.autoResize&&ot.bind(s,"input",this.autoResize),r.resizable&&this.resizable(t),c.appendChild(a),this.setSelection(s.lastChild,s.lastChild&&s.lastChild.length),a};Fa.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var r;if(e.clipboardData?r=e.clipboardData.getData("text/plain"):r=window.clipboardData.getData("Text"),this.insertText(r),t.autoResize){var i=this.autoResize(n);i&&this.resizeHandler(i)}};Fa.prototype.insertText=function(e){e=$Ce(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};Fa.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,r=t.endContainer,i=t.startOffset,a=t.endOffset,s=t.commonAncestorContainer,c=RCe(s.childNodes),l,u;if(OCe(s)){var d=n.textContent;n.textContent=d.substring(0,i)+e+d.substring(a),l=n,u=i+e.length}else if(n===this.content&&r===this.content){var h=document.createTextNode(e);this.content.insertBefore(h,c[i]),l=h,u=h.textContent.length}else{var f=c.indexOf(n),p=c.indexOf(r);c.forEach(function(m,g){g===f?m.textContent=n.textContent.substring(0,i)+e+r.textContent.substring(a):g>f&&g<=p&&Wu(m)}),l=n,u=i+e.length}l&&u!==void 0&&setTimeout(function(){self.setSelection(l,u)})};Fa.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var r=e.getBoundingClientRect(),i=t.scrollHeight;e.style.height=i+"px",this.resizeHandler({width:r.width,height:r.height,dx:0,dy:i-r.height})}};Fa.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,i=parseInt(this.style.minHeight)||0,a=parseInt(this.style.maxWidth)||1/0,s=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=gr('<div class="djs-direct-editing-resize-handle"></div>');var c,l,u,d,h=function(m){Cw(m),bf(m),c=m.clientX,l=m.clientY;var g=t.getBoundingClientRect();u=g.width,d=g.height,ot.bind(document,"mousemove",f),ot.bind(document,"mouseup",p)},f=function(m){Cw(m),bf(m);var g=$$(I$(u+m.clientX-c,r),a),v=$$(I$(d+m.clientY-l,i),s);t.style.width=g+"px",t.style.height=v+"px",e.resizeHandler({width:u,height:d,dx:m.clientX-c,dy:m.clientY-l})},p=function(m){Cw(m),bf(m),ot.unbind(document,"mousemove",f,!1),ot.unbind(document,"mouseup",p,!1)};ot.bind(n,"mousedown",h)}ee(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};Fa.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),ot.unbind(t,"keydown",this.keyHandler),ot.unbind(t,"mousedown",bf),ot.unbind(t,"input",this.autoResize),ot.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Wu(n)),Wu(e)};Fa.prototype.getValue=function(){return this.content.innerText.trim()};Fa.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};Fa.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)};function $Ce(e){return e.replace(/\r\n|\r|\n/g,`
`)}function ua(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new Fa({container:t.getContainer(),keyHandler:ml(this._handleKey,this),resizeHandler:ml(this._handleResize,this)})}ua.$inject=["eventBus","canvas"];ua.prototype.registerProvider=function(e){this._providers.push(e)};ua.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};ua.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};ua.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};ua.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};ua.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,r=this.$textbox.getBoundingClientRect(),i=this.getValue(),a=e.context.text;(i!==a||r.height!==n.height||r.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,i,e.context.text,{x:r.left-t.left,y:r.top-t.top,width:r.width,height:r.height})),this._fire("complete"),this.close()}};ua.prototype.getValue=function(){return this._textbox.getValue()};ua.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};ua.prototype._handleResize=function(e){this._fire("resize",e)};ua.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=gn(this._providers,function(r){return(t=r.activate(e))?r:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const A8={__depends__:[Kj],__init__:["directEditing"],directEditing:["type",ua]};function ICe(e){return function(t){var n=t.target,r=Ce(e),i=r.eventDefinitions&&r.eventDefinitions[0],a=r.$type===n.type,s=(i&&i.$type)===n.eventDefinitionType,c=!!n.triggeredByEvent==!!r.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===Mt(e);return!a||!s||!c||!l}}var MCe=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],DCe=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],LCe=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],BCe=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],FCe=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],zCe=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],UCe=[{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}}],T8=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],HCe=T8,M$=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}],VCe=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],GCe=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],WCe=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],qCe=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],KCe=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],YCe=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],XCe={"bpmn:MessageEventDefinition":[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}}],"bpmn:TimerEventDefinition":[{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}}],"bpmn:ConditionalEventDefinition":[{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}}],"bpmn:SignalEventDefinition":[{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],"bpmn:ErrorEventDefinition":[{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}}],"bpmn:EscalationEventDefinition":[{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}}],"bpmn:CompensateEventDefinition":[{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}}]};const D$={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function da(e,t,n,r,i,a,s,c){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=r,this._bpmnReplace=i,this._rules=a,this._translate=s,this._moddleCopy=c,this._register()}da.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];da.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};da.prototype.getPopupMenuEntries=function(e){var c;var t=e.businessObject,n=this._rules,r=[],i,a=[];if(jt(e)||!n.allowed("shape.replace",{element:e}))return{};var s=ICe(e);return C(t,"bpmn:DataObjectReference")?this._createEntries(e,VCe):C(t,"bpmn:DataStoreReference")&&!C(e.parent,"bpmn:Collaboration")?this._createEntries(e,GCe):(C(t,"bpmn:Event")&&!C(t,"bpmn:BoundaryEvent")&&(i=(c=t.get("eventDefinitions")[0])==null?void 0:c.$type,r=XCe[i]||[],!$r(t.$parent)&&C(t.$parent,"bpmn:SubProcess")&&(r=Et(r,function(l){return l.target.type!=="bpmn:StartEvent"}))),C(t,"bpmn:StartEvent")&&!C(t.$parent,"bpmn:SubProcess")?(a=Et(MCe.concat(r),s),this._createEntries(e,a)):C(t,"bpmn:Participant")?(a=Et(YCe,function(l){return Mt(e)!==l.target.isExpanded}),this._createEntries(e,a)):C(t,"bpmn:StartEvent")&&$r(t.$parent)?(a=Et(qCe.concat(r),function(l){var u=l.target,d=u.isInterrupting!==!1,h=t.isInterrupting===d;return s(l)||!s(l)&&!h}),this._createEntries(e,a)):C(t,"bpmn:StartEvent")&&!$r(t.$parent)&&C(t.$parent,"bpmn:SubProcess")?(a=Et(DCe.concat(r),s),this._createEntries(e,a)):C(t,"bpmn:EndEvent")?(a=Et(BCe.concat(r),function(l){var u=l.target;return u.eventDefinitionType=="bpmn:CancelEventDefinition"&&!C(t.$parent,"bpmn:Transaction")?!1:s(l)}),this._createEntries(e,a)):C(t,"bpmn:BoundaryEvent")?(a=Et(WCe,function(l){var u=l.target;if(u.eventDefinitionType=="bpmn:CancelEventDefinition"&&!C(t.attachedToRef,"bpmn:Transaction"))return!1;var d=u.cancelActivity!==!1,h=t.cancelActivity==d;return s(l)||!s(l)&&!h}),this._createEntries(e,a)):C(t,"bpmn:IntermediateCatchEvent")||C(t,"bpmn:IntermediateThrowEvent")?(a=Et(LCe.concat(r),s),this._createEntries(e,a)):C(t,"bpmn:Gateway")?(a=Et(FCe,s),this._createEntries(e,a)):C(t,"bpmn:Transaction")?(a=Et(T8,s),this._createEntries(e,a)):$r(t)&&Mt(e)?(a=Et(HCe,s),this._createEntries(e,a)):C(t,"bpmn:AdHocSubProcess")&&Mt(e)?(a=Et(UCe,s),this._createEntries(e,a)):C(t,"bpmn:SubProcess")&&Mt(e)?(a=Et(zCe,s),this._createEntries(e,a)):C(t,"bpmn:SubProcess")&&!Mt(e)?(a=Et(M$,function(l){var u=l.target.type===e.type,d=l.target.isExpanded===!0;return u===d}),this._createEntries(e,a)):C(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,KCe):C(t,"bpmn:FlowNode")?(a=Et(M$,s),this._createEntries(e,a)):{})};da.prototype.getPopupMenuHeaderEntries=function(e){var t={};return C(e,"bpmn:Activity")&&!$r(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),C(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),C(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),O6(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};da.prototype._createEntries=function(e,t){var n={},r=this;return Y(t,function(i){n[i.actionName]=r._createEntry(i,e)}),n};da.prototype._createSequenceFlowEntries=function(e,t){var n=Ce(e),r={},i=this._modeling,a=this._moddle,s=this;return Y(t,function(c){switch(c.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(C(n.sourceRef,"bpmn:ExclusiveGateway")||C(n.sourceRef,"bpmn:InclusiveGateway")||C(n.sourceRef,"bpmn:ComplexGateway")||C(n.sourceRef,"bpmn:Activity"))&&(r={...r,[c.actionName]:s._createEntry(c,e,function(){i.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&C(n.sourceRef,"bpmn:Activity")&&(r={...r,[c.actionName]:s._createEntry(c,e,function(){var l=a.create("bpmn:FormalExpression",{body:""});i.updateProperties(e,{conditionExpression:l})})});break;default:C(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(r={...r,[c.actionName]:s._createEntry(c,e,function(){i.updateProperties(e,{conditionExpression:void 0})})}),(C(n.sourceRef,"bpmn:ExclusiveGateway")||C(n.sourceRef,"bpmn:InclusiveGateway")||C(n.sourceRef,"bpmn:ComplexGateway")||C(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(r={...r,[c.actionName]:s._createEntry(c,e,function(){i.updateProperties(e.source,{default:void 0})})})}}),r};da.prototype._createEntry=function(e,t,n){var r=this._translate,i=this._bpmnReplace.replaceElement,a=function(){return i(t,e.target)},s=e.label;return s&&typeof s=="function"&&(s=s(t)),n=n||a,{label:r(s),className:e.className,action:n}};da.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function r(u,d){if(d.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}var h=e.businessObject.get("loopCharacteristics");h&&C(h,d.options.loopCharacteristics)?t._modeling.updateModdleProperties(e,h,{isSequential:d.options.isSequential}):(h=t._moddle.create(d.options.loopCharacteristics,{isSequential:d.options.isSequential}),t._modeling.updateProperties(e,{loopCharacteristics:h}))}var i=Ce(e),a=i.loopCharacteristics,s,c,l;return a&&(s=a.isSequential,c=a.isSequential===void 0,l=a.isSequential!==void 0&&!a.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:l,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:s,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:c,action:r,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};da.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,r=e.businessObject.dataObjectRef;if(!r)return{};function i(s,c){t._modeling.updateModdleProperties(e,r,{isCollection:!c.active})}var a=r.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:a,action:i}}};da.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,r=this._translate;function i(s,c){var l=c.active,u;l||(u=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:u})}var a=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:r("Participant multiplicity"),active:!!a,action:i}}};da.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=Ce(e),r=this,i=R6(e),a=C(e,"bpmn:BoundaryEvent")?D$["intermediate-event-non-interrupting"]:D$["start-event-non-interrupting"],s=!n[i];return{"toggle-non-interrupting":{imageHtml:a,title:t("Toggle non-interrupting"),active:s,action:function(){r._modeling.updateProperties(e,{[i]:!!s})}}}};const ZCe={__depends__:[nN,l8,aN],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",da]};function mm(e,t,n,r,i,a,s,c,l,u,d,h,f){e=e||{},r.registerProvider(this),this._contextPad=r,this._modeling=i,this._elementFactory=a,this._connect=s,this._create=c,this._popupMenu=l,this._canvas=u,this._rules=d,this._translate=h,this._eventBus=n,this._appendPreview=f,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(p){var m=p.context,g=m.shape;if(!(!jf(p)||!r.isOpen(g))){var v=r.getEntries(g);v.replace&&v.replace.action.click(p,g)}}),n.on("contextPad.close",function(){f.cleanUp()})}mm.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];mm.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&ee(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(r,i){t.removeElements(i.slice())}}}}),n};mm.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return jt(t)?Dy(e,n=>t.includes(n)):t};mm.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,r=this._elementFactory,i=this._connect,a=this._create,s=this._popupMenu,c=this._autoPlace,l=this._translate,u=this._appendPreview,d={};if(e.type==="label")return this._isDeleteAllowed([e])&&ee(d,m()),d;var h=e.businessObject;function f(w,_){i.start(w,_)}function p(w,_){n.removeElements([_])}function m(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:l("Delete"),action:{click:p}}}}function g(w){var _=5,j=t.getPad(w).html,S=j.getBoundingClientRect(),N={x:S.left,y:S.bottom+_};return N}function v(w,_,j,S){function N(T,A){var O=r.createShape(ee({type:w},S));a.start(T,O,{source:A})}var P=c?function(T,A){var O=r.createShape(ee({type:w},S));c.append(A,O)}:N,k=c?function(T,A){return u.create(A,w,S),()=>{u.cleanUp()}}:null;return{group:"model",className:_,title:j,action:{dragstart:N,click:P,hover:k}}}function x(w){return function(_,j){n.splitLane(j,w),t.open(j,!0)}}if(mt(h,["bpmn:Lane","bpmn:Participant"])&&Mt(e)){var b=gc(e);ee(d,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:l("Add lane above"),action:{click:function(w,_){n.addLane(_,"top")}}}}),b.length<2&&((vr(e)?e.height>=120:e.width>=120)&&ee(d,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:l("Divide into two lanes"),action:{click:x(2)}}}),(vr(e)?e.height>=180:e.width>=180)&&ee(d,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:l("Divide into three lanes"),action:{click:x(3)}}})),ee(d,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:l("Add lane below"),action:{click:function(w,_){n.addLane(_,"bottom")}}}})}return C(h,"bpmn:FlowNode")&&(C(h,"bpmn:EventBasedGateway")?ee(d,{"append.receive-task":v("bpmn:ReceiveTask","bpmn-icon-receive-task",l("Append receive task")),"append.message-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",l("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",l("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",l("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",l("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):L$(h,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?ee(d,{"append.compensation-activity":v("bpmn:Task","bpmn-icon-task",l("Append compensation activity"),{isForCompensation:!0})}):!C(h,"bpmn:EndEvent")&&!h.isForCompensation&&!L$(h,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!$r(h)&&ee(d,{"append.end-event":v("bpmn:EndEvent","bpmn-icon-end-event-none",l("Append end event")),"append.gateway":v("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",l("Append gateway")),"append.append-task":v("bpmn:Task","bpmn-icon-task",l("Append task")),"append.intermediate-event":v("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",l("Append intermediate/boundary event"))})),s.isEmpty(e,"bpmn-replace")||ee(d,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:l("Change element"),action:{click:function(w,_){var j=ee(g(_),{cursor:{x:w.x,y:w.y}});s.open(_,"bpmn-replace",j,{title:l("Change element"),width:300,search:!0})}}}}),C(h,"bpmn:SequenceFlow")&&ee(d,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),C(h,"bpmn:MessageFlow")&&ee(d,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),mt(h,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ee(d,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect to other element"),action:{click:f,dragstart:f}}}),C(h,"bpmn:TextAnnotation")&&ee(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using association"),action:{click:f,dragstart:f}}}),mt(h,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ee(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using data input association"),action:{click:f,dragstart:f}}}),C(h,"bpmn:Group")&&ee(d,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),this._isDeleteAllowed([e])&&ee(d,m()),d};function L$(e,t,n){var r=e.$instanceOf(t),i=!1,a=e.eventDefinitions||[];return Y(a,function(s){s.$type===n&&(i=!0)}),r&&i}const JCe={__depends__:[TCe,A8,PF,os,uN,bb,ZCe],__init__:["contextPadProvider"],contextPadProvider:["type",mm]};var QCe={horizontal:["x","width"],vertical:["y","height"]},B$=5;function oo(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var r=t.allowed("elements.distribute",{elements:n});return jt(r)?r:r?n:[]})}oo.$inject=["modeling","rules"];oo.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};oo.prototype.trigger=function(e,t){var n=this._modeling,r,i;if(!(e.length<3)&&(this._setOrientation(t),i=this._filterElements(e),r=this._createGroups(i),!(r.length<=2)))return n.distributeElements(r,this._axis,this._dimension),r};oo.prototype._filterElements=function(e){var t=this._filters,n=this._axis,r=this._dimension,i=[].concat(e);return t.length?(Y(t,function(a){i=a(i,n,r)}),i):e};oo.prototype._createGroups=function(e){var t=[],n=this,r=this._axis,i=this._dimension;if(!r)throw new Error('must have a defined "axis" and "dimension"');var a=Gs(e,r);return Y(a,function(s,c){var l=n._findRange(s,r,i),u,d=t[t.length-1];d&&n._hasIntersection(d.range,l)?t[t.length-1].elements.push(s):(u={range:l,elements:[s]},t.push(u))}),t};oo.prototype._setOrientation=function(e){var t=QCe[e];this._axis=t[0],this._dimension=t[1]};oo.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};oo.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+B$,max:t+n-B$}};const eAe={__init__:["distributeElements"],distributeElements:["type",oo]};function Ib(e){oa.call(this,e)}Ib.$inject=["eventBus"];Me(Ib,oa);Ib.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=Et(t,function(n){var r=mt(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||r)}),t=Ly(t),t.length<3?!1:t})};var F$={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},tAe=900;function gm(e,t,n,r){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",tAe,this)}gm.$inject=["popupMenu","distributeElements","translate","rules"];gm.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&ee(t,this._getEntries(e)),t};gm.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};gm.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,r=this._popupMenu,i={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:F$.horizontal,action:function(a,s){t.trigger(e,"horizontal"),r.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:F$.vertical,action:function(a,s){t.trigger(e,"vertical"),r.close()}}};return i};const nAe={__depends__:[nN,eAe],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Ib],distributeElementsMenuProvider:["type",gm]};var O8="is not a registered action",rAe="is already registered";function ha(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}ha.$inject=["eventBus","injector"];ha.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),r=e.get("selection",!1),i=e.get("zoomScroll",!1),a=e.get("copyPaste",!1),s=e.get("canvas",!1),c=e.get("rules",!1),l=e.get("keyboardMove",!1),u=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),a&&r&&this.register("copy",function(){var d=r.get();if(d.length)return a.copy(d)}),a&&this.register("paste",function(){a.paste()}),i&&this.register("stepZoom",function(d){i.stepZoom(d.value)}),s&&this.register("zoom",function(d){s.zoom(d.value)}),n&&r&&c&&this.register("removeSelection",function(){var d=r.get();if(d.length){var h=c.allowed("elements.delete",{elements:d}),f;h!==!1&&(jt(h)?f=h:f=d,f.length&&n.removeElements(f.slice()))}}),l&&this.register("moveCanvas",function(d){l.moveCanvas(d)}),u&&this.register("moveSelection",function(d){u.moveSelection(d.direction,d.accelerated)})};ha.prototype.trigger=function(e,t){if(!this._actions[e])throw pP(e,O8);return this._actions[e](t)};ha.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);Y(e,function(r,i){n._registerAction(i,r)})};ha.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw pP(e,rAe);this._actions[e]=t};ha.prototype.unregister=function(e){if(!this.isRegistered(e))throw pP(e,O8);this._actions[e]=void 0};ha.prototype.getActions=function(){return Object.keys(this._actions)};ha.prototype.isRegistered=function(e){return!!this._actions[e]};function pP(e,t){return new Error(e+" "+t)}const iAe={__init__:["editorActions"],editorActions:["type",ha]};function Mb(e){e.invoke(ha,this)}Me(Mb,ha);Mb.$inject=["injector"];Mb.prototype._registerDefaultActions=function(e){ha.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),r=e.get("selection",!1),i=e.get("spaceTool",!1),a=e.get("lassoTool",!1),s=e.get("handTool",!1),c=e.get("globalConnect",!1),l=e.get("distributeElements",!1),u=e.get("alignElements",!1),d=e.get("directEditing",!1),h=e.get("searchPad",!1),f=e.get("modeling",!1),p=e.get("contextPad",!1);t&&n&&r&&this._registerAction("selectElements",function(){var m=t.getRootElement(),g=n.filter(function(v){return v!==m});return r.select(g),g}),i&&this._registerAction("spaceTool",function(){i.toggle()}),a&&this._registerAction("lassoTool",function(){a.toggle()}),s&&this._registerAction("handTool",function(){s.toggle()}),c&&this._registerAction("globalConnectTool",function(){c.toggle()}),r&&l&&this._registerAction("distributeElements",function(m){var g=r.get(),v=m.type;g.length&&l.trigger(g,v)}),r&&u&&this._registerAction("alignElements",function(m){var g=r.get(),v=[],x=m.type;g.length&&(v=Et(g,function(b){return!C(b,"bpmn:Lane")}),u.trigger(v,x))}),r&&f&&this._registerAction("setColor",function(m){var g=r.get();g.length&&f.setColor(g,m)}),r&&d&&this._registerAction("directEditing",function(){var m=r.get();m.length&&d.activate(m[0])}),h&&this._registerAction("find",function(){h.toggle()}),t&&f&&this._registerAction("moveToOrigin",function(){var m=t.getRootElement(),g,v;C(m,"bpmn:Collaboration")?v=n.filter(function(x){return C(x.parent,"bpmn:Collaboration")}):v=n.filter(function(x){return x!==m&&!C(x.parent,"bpmn:SubProcess")}),g=qr(v),f.moveElements(v,{x:-g.x,y:-g.y},m)}),r&&p&&this._registerAction("replaceElement",function(m){p.triggerEntry("replace","click",m)})};const aAe={__depends__:[iAe],editorActions:["type",Mb]};function R8(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,r=t.shape;mt(r,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}R8.$inject=["eventBus"];var Wg=10;function Aw(e,t,n){return n||(n="round"),Math[n](e/t)*t}var sAe=1200,oAe=800;function _c(e,t,n){var r=!n||n.active!==!1;this._eventBus=t;var i=this;t.on("diagram.init",oAe,function(){i.setActive(r)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],sAe,function(a){var s=a.originalEvent;if(!(!i.active||s&&Zi(s))){var c=a.context,l=c.gridSnappingContext;l||(l=c.gridSnappingContext={}),["x","y"].forEach(function(u){var d={},h=lAe(a,u,e);h&&(d.offset=h);var f=cAe(a,u);f&&ee(d,f),Td(a,u)||i.snapEvent(a,u,d)})}})}_c.prototype.snapEvent=function(e,t,n){var r=this.snapValue(e[t],n);Rn(e,t,r)};_c.prototype.getGridSpacing=function(){return Wg};_c.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=Aw(e,Wg);var r,i;return t&&t.min&&(r=t.min,wt(r)&&(r=Aw(r+n,Wg,"ceil"),e=Math.max(e,r))),t&&t.max&&(i=t.max,wt(i)&&(i=Aw(i+n,Wg,"floor"),e=Math.min(e,i))),e-=n,e};_c.prototype.isActive=function(){return this.active};_c.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};_c.prototype.toggleActive=function(){this.setActive(!this.active)};_c.$inject=["elementRegistry","eventBus","config.gridSnapping"];function cAe(e,t){var n=e.context,r=n.createConstraints,i=n.resizeConstraints||{},a=n.gridSnappingContext,s=a.snapConstraints;if(s&&s[t])return s[t];s||(s=a.snapConstraints={}),s[t]||(s[t]={});var c=n.direction;r&&(qg(t)?(s.x.min=r.left,s.x.max=r.right):(s.y.min=r.top,s.y.max=r.bottom));var l=i.min,u=i.max;return l&&(qg(t)?U$(c)?s.x.max=l.left:s.x.min=l.right:z$(c)?s.y.max=l.top:s.y.min=l.bottom),u&&(qg(t)?U$(c)?s.x.min=u.left:s.x.max=u.right:z$(c)?s.y.min=u.top:s.y.max=u.bottom),s[t]}function lAe(e,t,n){var r=e.context,i=e.shape,a=r.gridSnappingContext,s=a.snapLocation,c=a.snapOffset;return c&&wt(c[t])||(c||(c=a.snapOffset={}),wt(c[t])||(c[t]=0),!i)||(n.get(i.id)||(qg(t)?c[t]+=i[t]+i.width/2:c[t]+=i[t]+i.height/2),!s)||(t==="x"?/left/.test(s)?c[t]-=i.width/2:/right/.test(s)&&(c[t]+=i.width/2):/top/.test(s)?c[t]-=i.height/2:/bottom/.test(s)&&(c[t]+=i.height/2)),c[t]}function qg(e){return e==="x"}function z$(e){return e.indexOf("n")!==-1}function U$(e){return e.indexOf("w")!==-1}function Ml(e,t){me.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(r){var i=r.context,a=i.hints||{},s=a.autoResize;if(s){var c=i.shape,l=i.newBounds;By(s)?i.newBounds=n.snapComplex(l,s):i.newBounds=n.snapSimple(c,l)}})}Ml.$inject=["eventBus","gridSnapping","modeling"];Me(Ml,me);Ml.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Ml.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Ml.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,r=/w/.test(t),i=/e/.test(t),a={};return a.width=n.snapValue(e.width,{min:e.width}),i&&(r?(a.x=n.snapValue(e.x,{max:e.x}),a.width+=n.snapValue(e.x-a.x,{min:e.x-a.x})):e.x=e.x+e.width-a.width),ee(e,a),e};Ml.prototype.snapVertically=function(e,t){var n=this._gridSnapping,r=/n/.test(t),i=/s/.test(t),a={};return a.height=n.snapValue(e.height,{min:e.height}),r&&(i?(a.y=n.snapValue(e.y,{max:e.y}),a.height+=n.snapValue(e.y-a.y,{min:e.y-a.y})):e.y=e.y+e.height-a.height),ee(e,a),e};var uAe=2e3;function $8(e,t){e.on(["spaceTool.move","spaceTool.end"],uAe,function(n){var r=n.context;if(r.initialized){var i=r.axis,a;i==="x"?(a=t.snapValue(n.dx),n.x=n.x+a-n.dx,n.dx=a):(a=t.snapValue(n.dy),n.y=n.y+a-n.dy,n.dy=a)}})}$8.$inject=["eventBus","gridSnapping"];const dAe={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Ml],gridSnappingSpaceToolBehavior:["type",$8]},hAe={__depends__:[dAe],__init__:["gridSnapping"],gridSnapping:["type",_c]};var fAe=2e3;function I8(e,t,n){e.on("autoPlace",fAe,function(r){var i=r.source,a=tt(i),s=r.shape,c=QF(i,s,n);return["x","y"].forEach(function(l){var u={};c[l]!==a[l]&&(c[l]>a[l]?u.min=c[l]:u.max=c[l],C(s,"bpmn:TextAnnotation")&&(pAe(l)?u.offset=-s.width/2:u.offset=-s.height/2),c[l]=t.snapValue(c[l],u))}),c})}I8.$inject=["eventBus","gridSnapping","elementRegistry"];function pAe(e){return e==="x"}var mAe=1750;function M8(e,t,n){t.on(["create.start","shape.move.start"],mAe,function(r){var i=r.context,a=i.shape,s=e.getRootElement();if(!(!C(a,"bpmn:Participant")||!C(s,"bpmn:Process")||!s.children.length)){var c=i.createConstraints;c&&(a.width=n.snapValue(a.width,{min:a.width}),a.height=n.snapValue(a.height,{min:a.height}))}})}M8.$inject=["canvas","eventBus","gridSnapping"];var gAe=3e3;function Db(e,t,n){me.call(this,e),this._gridSnapping=t;var r=this;this.postExecuted(["connection.create","connection.layout"],gAe,function(i){var a=i.context,s=a.connection,c=a.hints||{},l=s.waypoints;c.connectionStart||c.connectionEnd||c.createElementsBehavior===!1||vAe(l)&&n.updateWaypoints(s,r.snapMiddleSegments(l))})}Db.$inject=["eventBus","gridSnapping","modeling"];Me(Db,me);Db.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var r=1;r<e.length-2;r++)n=bAe(t,e[r],e[r+1]),e[r]=n[0],e[r+1]=n[1];return e};function vAe(e){return e.length>3}function yAe(e){return e==="h"}function xAe(e){return e==="v"}function bAe(e,t,n){var r=As(t,n),i={};return yAe(r)&&(i.y=e.snapValue(t.y)),xAe(r)&&(i.x=e.snapValue(t.x)),("x"in i||"y"in i)&&(t=ee({},t,i),n=ee({},n,i)),[t,n]}const wAe={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",I8],gridSnappingParticipantBehavior:["type",M8],gridSnappingLayoutConnectionBehavior:["type",Db]},_Ae={__depends__:[hAe,wAe],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",R8]};var jAe=30,D8=30;function vm(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(r){var i=r.element,a=r.gfx;if(C(i,"bpmn:Lane"))return n._createParticipantHit(i,a);if(C(i,"bpmn:Participant"))return Mt(i)?n._createParticipantHit(i,a):n._createDefaultHit(i,a);if(C(i,"bpmn:SubProcess"))return Mt(i)?n._createSubProcessHit(i,a):n._createDefaultHit(i,a)})}vm.$inject=["eventBus","interactionEvents"];vm.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};vm.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=vr(e)?{width:jAe,height:e.height}:{width:e.width,height:D8};return this._interactionEvents.createBoxHit(t,"all",n),!0};vm.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:D8}),!0};const SAe={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",vm]};function Lb(e){e.invoke(ih,this)}Me(Lb,ih);Lb.$inject=["injector"];Lb.prototype.registerBindings=function(e,t){ih.prototype.registerBindings.call(this,e,t);function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("selectElements",function(r){var i=r.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0}),n("find",function(r){var i=r.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0}),n("spaceTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["s","S"],i))return t.trigger("spaceTool"),!0}),n("lassoTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["l","L"],i))return t.trigger("lassoTool"),!0}),n("handTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["h","H"],i))return t.trigger("handTool"),!0}),n("globalConnectTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["c","C"],i))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["e","E"],i))return t.trigger("directEditing"),!0}),n("replaceElement",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["r","R"],i))return t.trigger("replaceElement",i),!0})};const EAe={__depends__:[YE],__init__:["keyboardBindings"],keyboardBindings:["type",Lb]};var NAe={moveSpeed:1,moveSpeedAccelerated:10},PAe=1500,H$="left",V$="up",G$="right",W$="down",kAe={ArrowLeft:H$,Left:H$,ArrowUp:V$,Up:V$,ArrowRight:G$,Right:G$,ArrowDown:W$,Down:W$},CAe={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function L8(e,t,n,r,i){var a=this;this._config=ee({},NAe,e||{}),t.addListener(PAe,function(s){var c=s.keyEvent,l=kAe[c.key];if(l&&!t.isCmd(c)){var u=t.isShift(c);return a.moveSelection(l,u),!0}}),this.moveSelection=function(s,c){var l=i.get();if(l.length){var u=this._config[c?"moveSpeedAccelerated":"moveSpeed"],d=CAe[s](u),h=r.allowed("elements.move",{shapes:l});h&&n.moveElements(l,d)}}}L8.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const AAe={__depends__:[YE,os],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",L8]};var q$=10;function ym(e,t,n,r){this._dragging=r,this._rules=t;var i=this;function a(l,u){var d=l.shape,h=l.direction,f=l.resizeConstraints,p;l.delta=u,p=hPe(d,h,u),l.newBounds=pPe(p,f),l.canExecute=i.canResize(l)}function s(l){var u=l.resizeConstraints,d=l.minBounds;u===void 0&&(d===void 0&&(d=i.computeMinResizeBox(l)),l.resizeConstraints={min:He(d)})}function c(l){var u=l.shape,d=l.canExecute,h=l.newBounds;if(d){if(h=uM(h),!TAe(u,h))return;n.resizeShape(u,h)}}e.on("resize.start",function(l){s(l.context)}),e.on("resize.move",function(l){var u={x:l.dx,y:l.dy};a(l.context,u)}),e.on("resize.end",function(l){c(l.context)})}ym.prototype.canResize=function(e){var t=this._rules,n=is(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};ym.prototype.activate=function(e,t,n){var r=this._dragging,i,a;if(typeof n=="string"&&(n={direction:n}),i=ee({shape:t},n),a=i.direction,!a)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(e,B8(t,a),"resize",{autoActivate:!0,cursor:OAe(a),data:{shape:t,context:i}})};ym.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,r,i;return r=e.minDimensions||{width:q$,height:q$},i=j6(t,e.childrenBoxPadding),mPe(n,t,r,i)};ym.$inject=["eventBus","rules","modeling","dragging"];function TAe(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function B8(e,t){var n=tt(e),r=He(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function OAe(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var K$="djs-resizing",Y$="resize-not-ok",RAe=500;function F8(e,t,n){function r(a){var s=a.shape,c=a.newBounds,l=a.frame;l||(l=a.frame=n.addFrame(s,t.getActiveLayer()),t.addMarker(s,K$)),c.width>5&&fe(l,{x:c.x,width:c.width}),c.height>5&&fe(l,{y:c.y,height:c.height}),a.canExecute?nn(l).remove(Y$):nn(l).add(Y$)}function i(a){var s=a.shape,c=a.frame;c&&Rr(a.frame),t.removeMarker(s,K$)}e.on("resize.move",RAe,function(a){r(a.context)}),e.on("resize.cleanup",function(a){i(a.context)})}F8.$inject=["eventBus","canvas","previewSupport"];var Ag=-6,Tg=8,Og=20,Kh="djs-resizer",$Ae=["n","w","s","e","nw","ne","se","sw"];function jc(e,t,n,r){this._resize=r,this._canvas=t;var i=this;e.on("selection.changed",function(a){var s=a.newSelection;i.removeResizers(),s.length===1&&Y(s,ml(i.addResizer,i))}),e.on("shape.changed",function(a){var s=a.element;n.isSelected(s)&&(i.removeResizers(),i.addResizer(s))})}jc.prototype.makeDraggable=function(e,t,n){var r=this._resize;function i(a){Zj(a)&&r.activate(a,e,n)}ot.bind(t,"mousedown",i),ot.bind(t,"touchstart",i)};jc.prototype._createResizer=function(e,t,n,r){var i=this._getResizersParent(),a=IAe(r),s=Ne("g");nn(s).add(Kh),nn(s).add(Kh+"-"+e.id),nn(s).add(Kh+"-"+r),ke(i,s);var c=Ne("rect");fe(c,{x:-Tg/2+a.x,y:-Tg/2+a.y,width:Tg,height:Tg}),nn(c).add(Kh+"-visual"),ke(s,c);var l=Ne("rect");return fe(l,{x:-Og/2+a.x,y:-Og/2+a.y,width:Og,height:Og}),nn(l).add(Kh+"-hit"),ke(s,l),p9(s,t,n),s};jc.prototype.createResizer=function(e,t){var n=B8(e,t),r=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,r,t)};jc.prototype.addResizer=function(e){var t=this;Jt(e)||!this._resize.canResize({shape:e})||Y($Ae,function(n){t.createResizer(e,n)})};jc.prototype.removeResizers=function(){var e=this._getResizersParent();Uy(e)};jc.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};jc.$inject=["eventBus","canvas","selection","resize"];function IAe(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-Ag:e.indexOf("w")!==-1&&(t.x=Ag),e.indexOf("s")!==-1?t.y=-Ag:e.indexOf("n")!==-1&&(t.y=Ag),t}const z8={__depends__:[hs,io,lh],__init__:["resize","resizePreview","resizeHandles"],resize:["type",ym],resizePreview:["type",F8],resizeHandles:["type",jc]};var MAe=2e3;function xm(e,t,n,r,i,a,s){this._bpmnFactory=t,this._canvas=n,this._modeling=i,this._textRenderer=s,r.registerProvider(this),e.on("element.dblclick",function(l){c(l.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){r.isActive()&&r.complete()}),e.on(["shape.remove","connection.remove"],MAe,function(l){r.isActive(l.element)&&r.cancel()}),e.on(["commandStack.changed"],function(l){r.isActive()&&r.cancel()}),e.on("directEditing.activate",function(l){a.removeResizers()}),e.on("create.end",500,function(l){var u=l.context,d=u.shape,h=l.context.canExecute,f=l.isTouch;f||h&&(u.hints&&u.hints.createElementsBehavior===!1||c(d))}),e.on("autoPlace.end",500,function(l){c(l.shape)});function c(l,u){(u||mt(l,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||mP(l))&&r.activate(l)}}xm.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];xm.prototype.activate=function(e){var t=gl(e);if(t!==void 0){var n={text:t},r=this.getEditingBBox(e);ee(n,r);var i={},a=n.style||{};return ee(a,{backgroundColor:null,border:null}),(mt(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||mP(e))&&ee(i,{centerVertically:!0}),qu(e)&&(ee(i,{autoResize:!0}),ee(a,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),C(e,"bpmn:TextAnnotation")&&(ee(i,{resizable:!0,autoResize:!0}),ee(a,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),ee(n,{options:i,style:a}),n}};xm.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,r=t.getAbsoluteBBox(n),i={x:r.x+r.width/2,y:r.y+r.height/2},a={x:r.x,y:r.y},s=t.zoom(),c=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),u=l.fontSize*s,d=l.lineHeight,h=c.fontSize*s,f=c.lineHeight,p={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(C(e,"bpmn:Lane")||BAe(e)){var m=vr(e),g=m?{width:r.height,height:30*s,x:r.x-r.height/2+15*s,y:i.y-30*s/2}:{width:r.width,height:30*s};ee(a,g),ee(p,{fontSize:h+"px",lineHeight:f,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:m?"rotate(-90deg)":null})}if(LAe(e)){var v=vr(e),x=v?{width:r.width,height:r.height}:{width:r.height,height:r.width,x:i.x-r.height/2,y:i.y-r.width/2};ee(a,x),ee(p,{fontSize:h+"px",lineHeight:f,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:v?null:"rotate(-90deg)"})}(mt(e,["bpmn:Task","bpmn:CallActivity"])||mP(e))&&(ee(a,{width:r.width,height:r.height}),ee(p,{fontSize:h+"px",lineHeight:f,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"})),DAe(e)&&(ee(a,{width:r.width,x:r.x}),ee(p,{fontSize:h+"px",lineHeight:f,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"}));var b=90*s,w=7*s,_=4*s;if(n.labelTarget&&(ee(a,{width:b,height:r.height+w+_,x:i.x-b/2,y:r.y-w}),ee(p,{fontSize:u+"px",lineHeight:d,paddingTop:w+"px",paddingBottom:_+"px"})),qu(n)&&!Hy(n)&&!kt(n)){var j=fM(e),S=t.getAbsoluteBBox({x:j.x,y:j.y,width:0,height:0}),N=u+w+_;ee(a,{width:b,height:N,x:S.x-b/2,y:S.y-N/2}),ee(p,{fontSize:u+"px",lineHeight:d,paddingTop:w+"px",paddingBottom:_+"px"})}return C(e,"bpmn:TextAnnotation")&&(ee(a,{width:r.width,height:r.height,minWidth:30*s,minHeight:10*s}),ee(p,{textAlign:"left",paddingTop:5*s+"px",paddingBottom:7*s+"px",paddingLeft:7*s+"px",paddingRight:5*s+"px",fontSize:h+"px",lineHeight:f})),{bounds:a,style:p}};xm.prototype.update=function(e,t,n,r){var i,a;C(e,"bpmn:TextAnnotation")&&(a=this._canvas.getAbsoluteBBox(e),i={x:e.x,y:e.y,width:e.width/a.width*r.width,height:e.height/a.height*r.height}),FAe(t)&&(t=null),this._modeling.updateLabel(e,t,i)};function mP(e){return C(e,"bpmn:SubProcess")&&!Mt(e)}function DAe(e){return C(e,"bpmn:SubProcess")&&Mt(e)}function LAe(e){return C(e,"bpmn:Participant")&&!Mt(e)}function BAe(e){return C(e,"bpmn:Participant")&&Mt(e)}function FAe(e){return!e||!e.trim()}var X$="djs-element-hidden",Z$="djs-label-hidden";function U8(e,t,n){var r=this,i=t.getDefaultLayer(),a,s,c;e.on("directEditing.activate",function(l){var u=l.active;if(a=u.element.label||u.element,C(a,"bpmn:TextAnnotation")){s=t.getAbsoluteBBox(a),c=Ne("g");var d=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:a.height,position:{mx:0,my:0}}),h=r.path=Ne("path");fe(h,{d,strokeWidth:2,stroke:zAe(a)}),ke(c,h),ke(i,c),Or(c,a.x,a.y)}C(a,"bpmn:TextAnnotation")||a.labelTarget?t.addMarker(a,X$):(C(a,"bpmn:Task")||C(a,"bpmn:CallActivity")||C(a,"bpmn:SubProcess")||C(a,"bpmn:Participant")||C(a,"bpmn:Lane"))&&t.addMarker(a,Z$)}),e.on("directEditing.resize",function(l){if(C(a,"bpmn:TextAnnotation")){var u=l.height,d=l.dy,h=Math.max(a.height/s.height*(u+d),0),f=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:h,position:{mx:0,my:0}});fe(r.path,{d:f})}}),e.on(["directEditing.complete","directEditing.cancel"],function(l){var u=l.active;u&&(t.removeMarker(u.element.label||u.element,X$),t.removeMarker(a,Z$)),a=void 0,s=void 0,c&&(Rr(c),c=void 0)})}U8.$inject=["eventBus","canvas","pathMap"];function zAe(e,t){var n=Gt(e);return n.get("stroke")||t||"black"}const UAe={__depends__:[pM,z8,A8],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",xm],labelEditingPreview:["type",U8]};var HAe=new qj("tt");function VAe(e){var t=gr('<div class="djs-tooltip-container" />');return tS(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function GAe(e,t,n){tS(e,{left:t+"px",top:n+"px"})}function gP(e,t){e.style.display=t===!1?"none":""}var H8="djs-tooltip",Tw="."+H8;function Zr(e,t){this._eventBus=e,this._canvas=t,this._ids=HAe,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=VAe(t.getContainer());var n=this;Aa.bind(this._tooltipRoot,Tw,"mousedown",function(r){r.stopPropagation()}),Aa.bind(this._tooltipRoot,Tw,"mouseover",function(r){n.trigger("mouseover",r)}),Aa.bind(this._tooltipRoot,Tw,"mouseout",function(r){n.trigger("mouseout",r)}),this._init()}Zr.$inject=["eventBus","canvas"];Zr.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=ee({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};Zr.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,r=this.get(Wr(n,"data-tooltip-id"));r&&(e==="mouseover"&&r.timeout&&this.clearTimeout(r),e==="mouseout"&&r.timeout&&(r.timeout=1e3,this.setTimeout(r)))};Zr.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};Zr.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};Zr.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};Zr.prototype.remove=function(e){var t=this.get(e);t&&(Wu(t.html),Wu(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};Zr.prototype.show=function(){gP(this._tooltipRoot)};Zr.prototype.hide=function(){gP(this._tooltipRoot,!1)};Zr.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,r="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=r,this._tooltipRoot.style["-ms-transform"]=r};Zr.prototype._addTooltip=function(e){var t=e.id,n=e.html,r,i=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),By(n)&&(n=gr(n)),r=gr('<div data-tooltip-id="'+t+'" class="'+H8+'">'),tS(r,{position:"absolute"}),r.appendChild(n),e.type&&Qn(r).add("djs-tooltip-"+e.type),e.className&&Qn(r).add(e.className),e.htmlContainer=r,i.appendChild(r),this._tooltips[t]=e,this._updateTooltip(e)};Zr.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;GAe(n,t.x,t.y)};Zr.prototype._updateTooltipVisibilty=function(e){Y(this._tooltips,function(t){var n=t.show,r=t.htmlContainer,i=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(i=!1),gP(r,i))})};Zr.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const WAe={__init__:["tooltips"],tooltips:["type",Zr]};var qAe="flow elements must be children of pools/participants",KAe="Data object must be placed within a pool/participant.";function V8(e,t,n){function r(i,a,s){t.add({position:{x:i.x+5,y:i.y+5},type:"error",timeout:2e3,html:"<div>"+a+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(i){var a=i.context,s=a.shape,c=a.target;C(c,"bpmn:Collaboration")&&(C(s,"bpmn:FlowNode")?r(i,n(qAe)):C(s,"bpmn:DataObjectReference")&&r(i,n(KAe)))})}V8.$inject=["eventBus","tooltips","translate"];const YAe={__depends__:[WAe],__init__:["modelingFeedback"],modelingFeedback:["type",V8]};var XAe=500,ZAe=1e3;function Dl(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),r=this;function i(a){var s=Ne("rect");return fe(s,ee({x:0,y:0,rx:4,width:100,height:100},n)),s}e.on(["shape.added","shape.changed"],XAe,function(a){var s=a.element,c=a.gfx,l=$n(".djs-outline",c);l||(l=r.getOutline(s)||i(),ke(c,l)),r.updateShapeOutline(l,s)}),e.on(["connection.added","connection.changed"],function(a){var s=a.element,c=a.gfx,l=$n(".djs-outline",c);l||(l=i(),ke(c,l)),r.updateConnectionOutline(l,s)})}Dl.prototype.updateShapeOutline=function(e,t){var n=!1,r=this._getProviders();r.length&&Y(r,function(i){n=n||i.updateOutline(t,e)}),n||fe(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};Dl.prototype.updateConnectionOutline=function(e,t){var n=qr(t);fe(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};Dl.prototype.registerProvider=function(e,t){t||(t=e,e=ZAe),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};Dl.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Dl.prototype.getOutline=function(e){var t,n=this._getProviders();return Y(n,function(r){Qi(r.getOutline)&&(t=t||r.getOutline(e))}),t};Dl.$inject=["eventBus","styles","elementRegistry"];var Rg=6;function vP(e,t,n){this._canvas=t;var r=this;e.on("element.changed",function(i){n.isSelected(i.element)&&r._updateMultiSelectionOutline(n.get())}),e.on("selection.changed",function(i){var a=i.newSelection;r._updateMultiSelectionOutline(a)})}vP.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Uy(t);var n=e.length>1,r=this._canvas.getContainer();if(nn(r)[n?"add":"remove"]("djs-multi-select"),!!n){var i=JAe(qr(e)),a=Ne("rect");fe(a,ee({rx:3},i)),nn(a).add("djs-selection-outline"),ke(t,a)}};vP.$inject=["eventBus","canvas","selection"];function JAe(e){return{x:e.x-Rg,y:e.y-Rg,width:e.width+Rg*2,height:e.height+Rg*2}}const G8={__depends__:[os],__init__:["outline","multiSelectionOutline"],outline:["type",Dl],multiSelectionOutline:["type",vP]};var QAe=500,eTe=1250,tTe=1500,ky=Math.round;function nTe(e){return{x:e.x+ky(e.width/2),y:e.y+ky(e.height/2)}}function W8(e,t,n,r,i){function a(c,l,u,d){return i.allowed("elements.move",{shapes:c,delta:l,position:u,target:d})}e.on("shape.move.start",tTe,function(c){var l=c.context,u=c.shape,d=r.get().slice();d.indexOf(u)===-1&&(d=[u]),d=rTe(d),ee(l,{shapes:d,validatedShapes:d,shape:u})}),e.on("shape.move.start",eTe,function(c){var l=c.context,u=l.validatedShapes,d;if(d=l.canExecute=a(u),!d)return!1}),e.on("shape.move.move",QAe,function(c){var l=c.context,u=l.validatedShapes,d=c.hover,h={x:c.dx,y:c.dy},f={x:c.x,y:c.y},p;if(p=a(u,h,f,d),l.delta=h,l.canExecute=p,p===null){l.target=null;return}l.target=d}),e.on("shape.move.end",function(c){var l=c.context,u=l.delta,d=l.canExecute,h=d==="attach",f=l.shapes;if(d===!1)return!1;u.x=ky(u.x),u.y=ky(u.y),!(u.x===0&&u.y===0)&&n.moveElements(f,u,l.target,{primaryShape:l.shape,attach:h})}),e.on("element.mousedown",function(c){if(Zj(c)){var l=sM(c);if(!l)throw new Error("must supply DOM mousedown event");return s(l,c.element)}});function s(c,l,u,d){if(Ws(u)&&(d=u,u=!1),!(l.waypoints||!l.parent)&&!nn(c.target).has("djs-hit-no-move")){var h=nTe(l);return t.init(c,h,"shape.move",{cursor:"grabbing",autoActivate:u,data:{shape:l,context:d||{}}}),!0}}this.start=s}W8.$inject=["eventBus","dragging","modeling","selection","rules"];function rTe(e){var t=zy(e,"id");return Et(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var J$=499,Ow="djs-dragging",Q$="drop-ok",eI="drop-not-ok",tI="new-parent",nI="attach-ok";function q8(e,t,n,r){function i(l){var u=a(l),d=iTe(u);return d}function a(l){var u=Rp(l,!0),d=u.flatMap(p=>(p.incoming||[]).concat(p.outgoing||[])),h=u.concat(d),f=[...new Set(h)];return f}function s(l,u){[nI,Q$,eI,tI].forEach(function(d){d===u?t.addMarker(l,d):t.removeMarker(l,d)})}function c(l,u,d){r.addDragger(u,l.dragGroup),d&&t.addMarker(u,Ow),l.allDraggedElements?l.allDraggedElements.push(u):l.allDraggedElements=[u]}e.on("shape.move.start",J$,function(l){var u=l.context,d=u.shapes,h=u.allDraggedElements,f=i(d);if(!u.dragGroup){var p=Ne("g");fe(p,n.cls("djs-drag-group",["no-events"]));var m=t.getActiveLayer();ke(m,p),u.dragGroup=p}f.forEach(function(g){r.addDragger(g,u.dragGroup)}),h?h=Yj([h,a(d)]):h=a(d),Y(h,function(g){t.addMarker(g,Ow)}),u.allDraggedElements=h,u.differentParents=aTe(d)}),e.on("shape.move.move",J$,function(l){var u=l.context,d=u.dragGroup,h=u.target,f=u.shape.parent,p=u.canExecute;h&&(p==="attach"?s(h,nI):u.canExecute&&f&&h.id!==f.id?s(h,tI):s(h,u.canExecute?Q$:eI)),Or(d,l.dx,l.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(l){var u=l.context,d=u.target;d&&s(d,null)}),e.on("shape.move.cleanup",function(l){var u=l.context,d=u.allDraggedElements,h=u.dragGroup;Y(d,function(f){t.removeMarker(f,Ow)}),h&&Rr(h)}),this.makeDraggable=c}q8.$inject=["eventBus","canvas","styles","previewSupport"];function iTe(e){var t=Et(e,function(n){return Jt(n)?gn(e,Ms({id:n.source.id}))&&gn(e,Ms({id:n.target.id})):!0});return t}function aTe(e){return m9(zy(e,function(t){return t.parent&&t.parent.id}))!==1}const sTe={__depends__:[Kj,os,G8,hs,io,lh],__init__:["move","movePreview"],move:["type",W8],movePreview:["type",q8]};var K8=".djs-palette-toggle",Y8=".entry",oTe=K8+", "+Y8,Oj="djs-palette-",cTe="shown",Rj="open",rI="two-column",lTe=1e3;function In(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(r){var i=r.tool;n.updateToolHighlight(i)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}In.$inject=["eventBus","canvas"];In.prototype.registerProvider=function(e,t){t||(t=e,e=lTe),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};In.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(dTe,{})};In.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};In.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),r=this._container=gr(In.HTML_MARKUP);n.appendChild(r),Qn(n).add(Oj+cTe),Aa.bind(r,oTe,"click",function(i){var a=i.delegateTarget;if(aM(a,K8))return e.toggle();e.trigger("click",i)}),ot.bind(r,"mousedown",function(i){i.stopPropagation()}),Aa.bind(r,Y8,"dragstart",function(i){e.trigger("dragstart",i)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:r})};In.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};In.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,r=this._eventBus,i,a=Qn(n),s=Qn(t);"twoColumn"in e?i=e.twoColumn:i=this._needsCollapse(t.clientHeight,this._entries||{}),a.toggle(rI,i),s.toggle(Oj+rI,i),"open"in e&&(a.toggle(Rj,e.open),s.toggle(Oj+Rj,e.open)),r.fire("palette.changed",{twoColumn:i,open:this.isOpen()})};In.prototype._update=function(){var e=$n(".djs-palette-entries",this._container),t=this._entries=this.getEntries();mM(e),Y(t,function(n,r){var i=n.group||"default",a=$n("[data-group="+wf(i)+"]",e);a||(a=gr('<div class="group"></div>'),Wr(a,"data-group",i),e.appendChild(a));var s=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=gr(s);if(a.appendChild(c),!n.separator&&(Wr(c,"data-action",r),n.title&&Wr(c,"title",n.title),n.className&&uTe(c,n.className),n.imageUrl)){var l=gr("<img>");Wr(l,"src",n.imageUrl),c.appendChild(l)}}),this.open()};In.prototype.trigger=function(e,t,n){var r,i,a=t.delegateTarget||t.target;return a?(r=Wr(a,"data-action"),i=t.originalEvent||t,this.triggerEntry(r,e,i,n)):t.preventDefault()};In.prototype.triggerEntry=function(e,t,n,r){var i=this._entries,a,s;if(a=i[e],!!a&&(s=a.action,this._eventBus.fire("palette.trigger",{entry:a,event:n})!==!1)){if(Qi(s)){if(t==="click")return s(n,r)}else if(s[t])return s[t](n,r);n.preventDefault()}};In.prototype._layoutChanged=function(){this._toggleState({})};In.prototype._needsCollapse=function(e,t){var n=50,r=Object.keys(t).length*46;return e<r+n};In.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};In.prototype.open=function(){this._toggleState({open:!0})};In.prototype.toggle=function(){this.isOpen()?this.close():this.open()};In.prototype.isActiveTool=function(e){return e&&this._activeTool===e};In.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=$n(".djs-palette-entries",this._container),this._toolsContainer=$n("[data-group=tools]",t)),n=this._toolsContainer,Y(n.children,function(r){var i=r.getAttribute("data-action");if(i){var a=Qn(r);i=i.replace("-tool",""),a.contains("entry")&&i===e?a.add("highlighted-entry"):a.remove("highlighted-entry")}})};In.prototype.isOpen=function(){return Qn(this._container).has(Rj)};In.prototype._getParentContainer=function(){return this._canvas.getContainer()};In.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function uTe(e,t){var n=Qn(e),r=jt(t)?t:t.split(/\s+/g);r.forEach(function(i){n.add(i)})}function dTe(e,t){var n=t.getPaletteEntries();return Qi(n)?n(e):(Y(n,function(r,i){e[i]=r}),e)}const hTe={__init__:["palette"],palette:["type",In]};var X8="crosshair";function Ll(e,t,n,r,i,a,s){this._selection=i,this._dragging=n,this._mouse=s;var c=this,l={create:function(u){var d=t.getActiveLayer(),h;h=u.frame=Ne("rect"),fe(h,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),ke(d,h)},update:function(u){var d=u.frame,h=u.bbox;fe(d,{x:h.x,y:h.y,width:h.width,height:h.height})},remove:function(u){u.frame&&Rr(u.frame)}};a.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(u){var d=u.originalEvent.target;!u.hover&&!(d instanceof SVGElement)||e.once("lasso.selection.ended",function(){c.activateLasso(u.originalEvent,!0)})}),e.on("lasso.end",0,function(u){var d=u.context,h=Rw(u),f=r.filter(function(m){return m}),p=Hw(u);c.select(f,h,p?d.selection:[])}),e.on("lasso.start",function(u){var d=u.context;d.bbox=Rw(u),l.create(d),d.selection=i.get()}),e.on("lasso.move",function(u){var d=u.context;d.bbox=Rw(u),l.update(d)}),e.on("lasso.cleanup",function(u){var d=u.context;l.remove(d)}),e.on("element.mousedown",1500,function(u){if(Hw(u))return c.activateLasso(u.originalEvent),!0})}Ll.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];Ll.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:X8,data:{context:{}}})};Ll.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:X8,data:{context:{}},keepSelection:!0})};Ll.prototype.select=function(e,t,n=[]){var r=hM(e,t);this._selection.select([...n,...Fy(r)])};Ll.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Ll.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Rw(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},r;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?r={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?r={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?r={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?r={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:r={x:n.x,y:n.y,width:0,height:0},r}const fTe={__depends__:[wb,rm],__init__:["lassoTool"],lassoTool:["type",Ll]};var $w=1500,Z8="grab";function uh(e,t,n,r,i,a){this._dragging=n,this._mouse=a;var s=this,c=r.get("keyboard",!1);i.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",$w,function(l){if(jf(l))return s.activateMove(l.originalEvent,!0),!1}),c&&c.addListener($w,function(l){if(!(!iI(l.keyEvent)||s.isActive())){var u=s._mouse.getLastMoveEvent();s.activateMove(u,!!u)}},"keyboard.keydown"),c&&c.addListener($w,function(l){!iI(l.keyEvent)||!s.isActive()||s.toggle()},"keyboard.keyup"),e.on("hand.end",function(l){var u=l.originalEvent.target;if(!l.hover&&!(u instanceof SVGElement))return!1;e.once("hand.ended",function(){s.activateMove(l.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(l){var u=t.viewbox().scale;t.scroll({dx:l.dx*u,dy:l.dy*u})}),e.on("hand.move.end",function(l){var u=l.context,d=u.reactivate;return!jf(l)&&d&&e.once("hand.move.ended",function(h){s.activateHand(h.originalEvent,!0,!0)}),!1})}uh.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];uh.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:Z8,data:{context:n||{}}})};uh.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:Z8,data:{context:{reactivate:n}}})};uh.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};uh.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function iI(e){return sr("Space",e)}const pTe={__depends__:[wb,rm],__init__:["handTool"],handTool:["type",uh]};var aI="connect-ok",sI="connect-not-ok";function dh(e,t,n,r,i,a,s){var c=this;this._dragging=t,this._rules=a,this._mouse=s,i.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(l){var u=l.context,d=l.hover,h=u.canStartConnect=c.canStartConnect(d);h!==null&&(u.startTarget=d,r.addMarker(d,h?aI:sI))}),e.on(["global-connect.out","global-connect.cleanup"],function(l){var u=l.context.startTarget,d=l.context.canStartConnect;u&&r.removeMarker(u,d?aI:sI)}),e.on(["global-connect.ended"],function(l){var u=l.context,d=u.startTarget,h={x:l.x,y:l.y},f=c.canStartConnect(d);if(f)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,d,h)}),!1})}dh.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];dh.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};dh.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};dh.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};dh.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const mTe={__depends__:[uN,hs,io,wb,rm],globalConnect:["type",dh]};function yP(e,t,n,r,i,a,s,c){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=r,this._lassoTool=i,this._handTool=a,this._globalConnect=s,this._translate=c,e.registerProvider(this)}yP.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];yP.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,r=this._spaceTool,i=this._lassoTool,a=this._handTool,s=this._globalConnect,c=this._translate;function l(h,f,p,m,g){function v(x){var b=n.createShape(ee({type:h},g));t.start(x,b)}return{group:f,className:p,title:m,action:{dragstart:v,click:v}}}function u(h){var f=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),p=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:f});t.start(h,[f,p],{hints:{autoSelect:[f]}})}function d(h){t.start(h,n.createParticipantShape())}return ee(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate hand tool"),action:{click:function(h){a.activateHand(h)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate lasso tool"),action:{click:function(h){i.activateSelection(h)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate create/remove space tool"),action:{click:function(h){r.activateSelection(h)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate global connect tool"),action:{click:function(h){s.start(h)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",c("Create start event")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",c("Create intermediate/boundary event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",c("Create end event")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",c("Create gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",c("Create task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",c("Create data object reference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",c("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:c("Create expanded sub-process"),action:{dragstart:u,click:u}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:c("Create pool/participant"),action:{dragstart:d,click:d}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",c("Create group"))}),e};const gTe={__depends__:[hTe,bb,h8,fTe,pTe,mTe,gM],__init__:["paletteProvider"],paletteProvider:["type",yP]};var vTe=250;function xP(e,t,n,r,i){me.call(this,e);function a(c){var l=c.canExecute.replacements;Y(l,function(u){var d=u.oldElementId,h={type:u.newElementType};if(!c.visualReplacements[d]){var f=t.get(d);ee(h,{x:f.x,y:f.y});var p=n.createShape(h);r.addShape(p,f.parent);var m=$n('[data-element-id="'+wf(f.id)+'"]',c.dragGroup);m&&fe(m,{display:"none"});var g=i.addDragger(p,c.dragGroup);c.visualReplacements[d]=g,r.removeShape(p)}})}function s(c){var l=c.visualReplacements;Y(l,function(u,d){var h=$n('[data-element-id="'+wf(d)+'"]',c.dragGroup);h&&fe(h,{display:"inline"}),u.remove(),l[d]&&delete l[d]})}e.on("shape.move.move",vTe,function(c){var l=c.context,u=l.canExecute;l.visualReplacements||(l.visualReplacements={}),u&&u.replacements?a(l):s(l)})}xP.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];Me(xP,me);const yTe={__depends__:[lh],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",xP]};var xTe=1250,Iw=40,bTe=20,wTe=10,oI=20,J8=["x","y"],_Te=Math.abs;function Q8(e){e.on(["connect.hover","connect.move","connect.end"],xTe,function(t){var n=t.context,r=n.canExecute,i=n.start,a=n.hover,s=n.source,c=n.target;t.originalEvent&&Zi(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),r&&a&&jTe(t,a,PTe(a)),a&&NTe(r,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=Xi(i),mt(a,["bpmn:Event","bpmn:Gateway"])&&cI(t,Xi(a)),mt(a,["bpmn:Task","bpmn:SubProcess"])&&STe(t,a),C(s,"bpmn:BoundaryEvent")&&c===s.host&&ETe(t)):ez(r,"bpmn:MessageFlow")?(C(i,"bpmn:Event")&&(n.connectionStart=Xi(i)),C(a,"bpmn:Event")&&cI(t,Xi(a))):n.connectionStart=n.initialConnectionStart)})}Q8.$inject=["eventBus"];function jTe(e,t,n){J8.forEach(function(r){var i=tz(r,t);e[r]<t[r]+n?Rn(e,r,t[r]+n):e[r]>t[r]+i-n&&Rn(e,r,t[r]+i-n)})}function STe(e,t){var n=Xi(t);J8.forEach(function(r){kTe(e,t,r)&&Rn(e,r,n[r])})}function ETe(e){var t=e.context,n=t.source,r=t.target;if(!CTe(t)){var i=Xi(n),a=Nr(i,r,-10),s=[];/top|bottom/.test(a)&&s.push("x"),/left|right/.test(a)&&s.push("y"),s.forEach(function(c){var l=e[c],u;_Te(l-i[c])<Iw&&(l>i[c]?u=i[c]+Iw:u=i[c]-Iw,Rn(e,c,u))})}}function cI(e,t){Rn(e,"x",t.x),Rn(e,"y",t.y)}function ez(e,t){return e&&e.type===t}function NTe(e,t){return $p(t,function(n){return ez(e,n)})}function tz(e,t){return e==="x"?t.width:t.height}function PTe(e){return C(e,"bpmn:Task")?wTe:bTe}function kTe(e,t,n){return e[n]>t[n]+oI&&e[n]<t[n]+tz(n,t)-oI}function CTe(e){var t=e.hover,n=e.source;return t&&n&&t===n}function Sc(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}Sc.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};Sc.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};Sc.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};Sc.prototype.getSnapLocations=function(){return this._snapLocations};Sc.prototype.setSnapLocations=function(e){this._snapLocations=e};Sc.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Bb,n.initDefaults(this._defaultSnaps)),n};function Bb(){this._snapValues={}}Bb.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};Bb.prototype.snap=function(e,t,n,r){var i=this._snapValues[t];return i&&DNe(e[n],i[n],r)};Bb.prototype.initDefaults=function(e){var t=this;Y(e||{},function(n,r){Y(n,function(i){t.add(r,i)})})};var ATe=1250;function fs(e,t,n){var r=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(i){r.initSnap(i)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],ATe,function(i){var a=i.context,s=a.shape,c=a.snapContext,l=a.target;if(!(i.originalEvent&&Zi(i.originalEvent))&&!(Td(i)||!l)){var u=c.pointsForTarget(l);u.initialized||(u=r.addSnapTargetPoints(u,s,l),u.initialized=!0),n.snap(i,u)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}fs.$inject=["elementRegistry","eventBus","snapping"];fs.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,r=n.shape,i=n.snapContext;i||(i=n.snapContext=new Sc);var a;t.get(r.id)?a=Xi(r,e):a={x:e.x+Xi(r).x,y:e.y+Xi(r).y};var s={x:a.x-r.width/2,y:a.y-r.height/2},c={x:a.x+r.width/2,y:a.y+r.height/2};return i.setSnapOrigin("mid",{x:a.x-e.x,y:a.y-e.y}),kt(r)||(i.setSnapOrigin("top-left",{x:s.x-e.x,y:s.y-e.y}),i.setSnapOrigin("bottom-right",{x:c.x-e.x,y:c.y-e.y})),i};fs.prototype.addSnapTargetPoints=function(e,t,n){var r=this.getSnapTargets(t,n);return Y(r,function(i){if(kt(i)){kt(t)&&e.add("mid",Xi(i));return}if(Jt(i)){if(i.waypoints.length<3)return;var a=i.waypoints.slice(1,-1);Y(a,function(s){e.add("mid",s)});return}e.add("mid",Xi(i))}),!wt(t.x)||!wt(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",Xi(t)),e};fs.prototype.getSnapTargets=function(e,t){return m6(t).filter(function(n){return!TTe(n)})};function TTe(e){return!!e.hidden}var lI=1500;function hh(e,t){t.invoke(fs,this),e.on(["create.move","create.end"],lI,ITe),e.on(["create.move","create.end","shape.move.move","shape.move.end"],lI,function(n){var r=n.context,i=r.canExecute,a=r.target,s=i&&(i==="attach"||i.attach);s&&!Td(n)&&OTe(n,a)})}Me(hh,fs);hh.$inject=["eventBus","injector"];hh.prototype.initSnap=function(e){var t=fs.prototype.initSnap.call(this,e),n=e.shape,r=!!this._elementRegistry.get(n.id);return Y(n.outgoing,function(i){var a=i.waypoints[0];a=a.original||a,t.setSnapOrigin(i.id+"-docking",dI(a,r,e))}),Y(n.incoming,function(i){var a=i.waypoints[i.waypoints.length-1];a=a.original||a,t.setSnapOrigin(i.id+"-docking",dI(a,r,e))}),C(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};hh.prototype.addSnapTargetPoints=function(e,t,n){fs.prototype.addSnapTargetPoints.call(this,e,t,n);var r=this.getSnapTargets(t,n);Y(r,function(a){($Te(a)||RTe([t,a],"bpmn:TextAnnotation"))&&(e.add("top-left",f6(a)),e.add("bottom-right",p6(a)))});var i=this._elementRegistry;return Y(t.incoming,function(a){if(i.get(t.id)){uI(r,a.source)||e.add("mid",tt(a.source));var s=a.waypoints[0];e.add(a.id+"-docking",s.original||s)}}),Y(t.outgoing,function(a){if(i.get(t.id)){uI(r,a.target)||e.add("mid",tt(a.target));var s=a.waypoints[a.waypoints.length-1];e.add(a.id+"-docking",s.original||s)}}),C(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};hh.prototype.getSnapTargets=function(e,t){return fs.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!C(n,"bpmn:Lane")})};function OTe(e,t){var n=He(t),r=z6(e,t),i=e.context,a=i.shape,s;a.parent?s={x:0,y:0}:s=tt(a),/top/.test(r)?Rn(e,"y",n.top-s.y):/bottom/.test(r)&&Rn(e,"y",n.bottom-s.y),/left/.test(r)?Rn(e,"x",n.left-s.x):/right/.test(r)&&Rn(e,"x",n.right-s.x)}function RTe(e,t){return e.every(function(n){return C(n,t)})}function $Te(e){return C(e,"bpmn:SubProcess")&&Mt(e)?!0:C(e,"bpmn:Participant")}function ITe(e){var t=e.context,n=t.createConstraints;if(n){var r=n.top,i=n.right,a=n.bottom,s=n.left;(s&&s>=e.x||i&&i<=e.x)&&Rn(e,"x",e.x),(r&&r>=e.y||a&&a<=e.y)&&Rn(e,"y",e.y)}}function uI(e,t){return e.indexOf(t)!==-1}function dI(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var MTe=1250;function bm(e,t){var n=this;e.on(["resize.start"],function(r){n.initSnap(r)}),e.on(["resize.move","resize.end"],MTe,function(r){var i=r.context,a=i.shape,s=a.parent,c=i.direction,l=i.snapContext;if(!(r.originalEvent&&Zi(r.originalEvent))&&!Td(r)){var u=l.pointsForTarget(s);u.initialized||(u=n.addSnapTargetPoints(u,a,s,c),u.initialized=!0),BTe(c)&&Rn(r,"x",r.x),FTe(c)&&Rn(r,"y",r.y),t.snap(r,u)}}),e.on(["resize.cleanup"],function(){t.hide()})}bm.prototype.initSnap=function(e){var t=e.context,n=t.shape,r=t.direction,i=t.snapContext;i||(i=t.snapContext=new Sc);var a=nz(n,r);return i.setSnapOrigin("corner",{x:a.x-e.x,y:a.y-e.y}),i};bm.prototype.addSnapTargetPoints=function(e,t,n,r){var i=this.getSnapTargets(t,n);return Y(i,function(a){e.add("corner",p6(a)),e.add("corner",f6(a))}),e.add("corner",nz(t,r)),e};bm.$inject=["eventBus","snapping"];bm.prototype.getSnapTargets=function(e,t){return m6(t).filter(function(n){return!DTe(n,e)&&!Jt(n)&&!LTe(n)&&!kt(n)})};function nz(e,t){var n=tt(e),r=He(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function DTe(e,t){return e.host===t}function LTe(e){return!!e.hidden}function BTe(e){return e==="n"||e==="s"}function FTe(e){return e==="e"||e==="w"}var zTe=7,UTe=1e3;function Ec(e){this._canvas=e,this._asyncHide=g9(ml(this.hide,this),UTe)}Ec.$inject=["canvas"];Ec.prototype.snap=function(e,t){var n=e.context,r=n.snapContext,i=r.getSnapLocations(),a={x:Td(e,"x"),y:Td(e,"y")};Y(i,function(s){var c=r.getSnapOrigin(s),l={x:e.x+c.x,y:e.y+c.y};if(Y(["x","y"],function(u){var d;a[u]||(d=t.snap(l,s,u,zTe),d!==void 0&&(a[u]={value:d,originValue:d-c[u]}))}),a.x&&a.y)return!1}),this.showSnapLine("vertical",a.x&&a.x.value),this.showSnapLine("horizontal",a.y&&a.y.value),Y(["x","y"],function(s){var c=a[s];Ws(c)&&Rn(e,s,c.originValue)})};Ec.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=Ne("path");return fe(n,{d:"M0,0 L0,0"}),nn(n).add("djs-snap-line"),ke(t,n),{update:function(r){wt(r)?e==="horizontal"?fe(n,{d:"M-100000,"+r+" L+100000,"+r,display:""}):fe(n,{d:"M "+r+",-100000 L "+r+", +100000",display:""}):fe(n,{display:"none"})}}};Ec.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};Ec.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};Ec.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};Ec.prototype.hide=function(){Y(this._snapLines,function(e){e.update()})};const HTe={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",fs],resizeSnapping:["type",bm],snapping:["type",Ec]},VTe={__depends__:[HTe],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",Q8],createMoveSnapping:["type",hh]};var rz=300;function Ze(e,t,n,r){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=r,this._container=this._getBoxHtml(),this._searchInput=$n(Ze.INPUT_SELECTOR,this._container),this._resultsContainer=$n(Ze.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}Ze.$inject=["canvas","eventBus","selection","translate"];Ze.prototype._bindEvents=function(){var e=this;function t(n,r,i,a){e._eventMaps.push({el:n,type:i,listener:Aa.bind(n,r,i,a)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,Ze.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,Ze.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,Ze.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,Ze.INPUT_SELECTOR,"keydown",function(n){sr("ArrowUp",n)&&n.preventDefault(),sr("ArrowDown",n)&&n.preventDefault()}),t(this._container,Ze.INPUT_SELECTOR,"keyup",function(n){if(sr("Escape",n))return e.close();if(sr("Enter",n)){var r=e._getCurrentResult();return r?e._select(r):e.close(!1)}if(sr("ArrowUp",n))return e._scrollToDirection(!0);if(sr("ArrowDown",n))return e._scrollToDirection();sr(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};Ze.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){Aa.unbind(e.el,e.type,e.listener)})};Ze.prototype._search=function(e){var t=this;if(this._clearResults(),!!e.trim()){var n=this._searchProvider.find(e);if(n=n.filter(function(i){return!t._canvas.getRootElements().includes(i.element)}),!n.length){this._selection.select(null);return}n.forEach(function(i){var a=i.element.id,s=t._createResultNode(i,a);t._results[a]={element:i.element,node:s}});var r=$n(Ze.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(r),this._preselect(r)}};Ze.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};Ze.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,r=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<r&&(this._resultsContainer.scrollTop=r)}};Ze.prototype._clearResults=function(){mM(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};Ze.prototype._getCurrentResult=function(){return $n(Ze.RESULT_SELECTED_SELECTOR,this._resultsContainer)};Ze.prototype._createResultNode=function(e,t){var n=gr(Ze.RESULT_HTML);return e.primaryTokens.length>0&&hI(n,e.primaryTokens,Ze.RESULT_PRIMARY_HTML),hI(n,e.secondaryTokens,Ze.RESULT_SECONDARY_HTML),Wr(n,Ze.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};Ze.prototype.registerProvider=function(e){this._searchProvider=e};Ze.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._selection.select(null),this._bindEvents(),this._open=!0,Qn(this._canvas.getContainer()).add("djs-search-open"),Qn(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};Ze.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,Qn(this._canvas.getContainer()).remove("djs-search-open"),Qn(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"),this._canvas.restoreFocus())};Ze.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Ze.prototype.isOpen=function(){return this._open};Ze.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&Qn(t).remove(Ze.RESULT_SELECTED_CLASS);var n=Wr(e,Ze.RESULT_ID_ATTRIBUTE),r=this._results[n].element;Qn(e).add(Ze.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(r,{top:rz}),this._selection.select(r),this._eventBus.fire("searchPad.preselected",r)}};Ze.prototype._select=function(e){var t=Wr(e,Ze.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:rz}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};Ze.prototype._getBoxHtml=function(){const e=gr(Ze.BOX_HTML),t=$n(Ze.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function hI(e,t,n){var r=GTe(t),i=gr(n);i.innerHTML=r,e.appendChild(i)}function GTe(e){var t="";return e.forEach(function(n){var r=v9(n.value||n.matched||n.normal),i=n.match||n.matched;i?t+='<b class="'+Ze.RESULT_HIGHLIGHT_CLASS+'">'+r+"</b>":t+=r}),t!==""?t:null}Ze.CONTAINER_SELECTOR=".djs-search-container";Ze.INPUT_SELECTOR=".djs-search-input input";Ze.RESULTS_CONTAINER_SELECTOR=".djs-search-results";Ze.RESULT_SELECTOR=".djs-search-result";Ze.RESULT_SELECTED_CLASS="djs-search-result-selected";Ze.RESULT_SELECTED_SELECTOR="."+Ze.RESULT_SELECTED_CLASS;Ze.RESULT_ID_ATTRIBUTE="data-result-id";Ze.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";Ze.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;Ze.RESULT_HTML='<div class="djs-search-result"></div>';Ze.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';Ze.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const WTe={__depends__:[gM,iM,os],searchPad:["type",Ze]};function bP(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._search=r,t.registerProvider(this)}bP.$inject=["elementRegistry","searchPad","canvas","search"];bP.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(r){return!kt(r)&&!t.includes(r)});return this._search(n.map(r=>({element:r,label:gl(r),id:r.id})),e,{keys:["label","id"]}).map(qTe)};function qTe(e){const{item:{element:t},tokens:n}=e;return{element:t,primaryTokens:n.label,secondaryTokens:n.id}}const KTe={__depends__:[WTe,qF],__init__:["bpmnSearch"],bpmnSearch:["type",bP]},YTe="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",XTe="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",ZTe={width:36,height:50},JTe={width:50,height:50};function fI(e,t,n){return Ne("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const Co=5;function Fb(e,t){this._styles=t,e.registerProvider(this)}Fb.$inject=["outline","styles"];Fb.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!kt(e))return C(e,"bpmn:Gateway")?(n=Ne("rect"),ee(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),fe(n,ee({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):mt(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=Ne("rect"),fe(n,ee({x:-Co,y:-Co,rx:14,width:e.width+Co*2,height:e.height+Co*2},t))):C(e,"bpmn:EndEvent")?(n=Ne("circle"),fe(n,ee({cx:e.width/2,cy:e.height/2,r:e.width/2+Co+1},t))):C(e,"bpmn:Event")?(n=Ne("circle"),fe(n,ee({cx:e.width/2,cy:e.height/2,r:e.width/2+Co},t))):C(e,"bpmn:DataObjectReference")&&pI(e,"bpmn:DataObjectReference")?n=fI(YTe,{x:-6,y:-6},t):C(e,"bpmn:DataStoreReference")&&pI(e,"bpmn:DataStoreReference")&&(n=fI(XTe,{x:-6,y:-6},t)),n};Fb.prototype.updateOutline=function(e,t){if(!kt(e))return mt(e,["bpmn:SubProcess","bpmn:Group"])?(fe(t,{width:e.width+Co*2,height:e.height+Co*2}),!0):!!mt(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function pI(e,t){var n;return t==="bpmn:DataObjectReference"?n=ZTe:t==="bpmn:DataStoreReference"&&(n=JTe),e.width===n.width&&e.height===n.height}const QTe={__depends__:[G8],__init__:["outlineProvider"],outlineProvider:["type",Fb]};var eOe='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Ji(e){Jp.call(this,e)}Me(Ji,Jp);Ji.Viewer=Op;Ji.NavigatedViewer=vp;Ji.prototype.createDiagram=function(){return this.importXML(eOe)};Ji.prototype._interactionModules=[xF,jF,NF];Ji.prototype._modelingModules=[XEe,aN,xNe,fNe,BNe,uN,GNe,JCe,s8,bb,nAe,aAe,_Ae,SAe,EAe,AAe,UAe,C8,YAe,sTe,gTe,yTe,z8,VTe,KTe,QTe];Ji.prototype._modules=[].concat(Op.prototype._modules,Ji.prototype._interactionModules,Ji.prototype._modelingModules);const tOe=100,nOe=60;class rOe extends y9{constructor(n,r,i){super(n,5e3);Sh(this,"bpmnRenderer");Sh(this,"styles");Sh(this,"_createDefs",!1);Sh(this,"isPidMode",!1);this.bpmnRenderer=r,this.styles=i||{},this._createDefs=!1,this.isPidMode=!1,n.on("import.done",()=>{var s,c;const a=(s=r==null?void 0:r.get)==null?void 0:s.call(r,"canvas",!1);if(a){a.getRootElement();const l=(c=r==null?void 0:r.get)==null?void 0:c.call(r,"elementRegistry",!1);if(l){const d=l.getAll().some(h=>{const f=h.businessObject;if(!f)return!1;const p=f.$attrs||{};return!!(p["pid:symbol"]||p["pid:type"]||p["pid:category"])});this.isPidMode=d}}}),n.on("canvas.viewbox.changed",({element:a})=>{})}canRender(n){var d,h;const r=n.businessObject;if(!r||n.type==="label"||(d=n.id)!=null&&d.includes("_label")||(h=n.id)!=null&&h.includes("_di"))return!1;if(!this.isPidMode){const f=r.$attrs||{};return!!(f["pid:symbol"]||f["pid:type"]||f["pid:category"])}const i=r.name||"",a=(n.type||"").toLowerCase(),s=r.$attrs||{},c=!!(s["pid:symbol"]||s["pid:type"]||s["pid:category"]),l=a.includes("task")||a.includes("exclusivegateway")||a.includes("dataobjectreference")||a.includes("subprocess")||a.includes("startevent"),u=a.includes("sequenceflow")||a.includes("messageflow");return!!(c||l&&i||u)}drawShape(n,r){const i=r.businessObject,a=(i==null?void 0:i.$attrs)||{};let s=a["pid:symbol"]||"unknown";if(a["pid:category"],s==="unknown"&&this.isPidMode){const d=((i==null?void 0:i.name)||"").toLowerCase(),h=r.type||"";d.includes("tank")||d.includes("vessel")||d.includes("drum")?s="tank":d.includes("pump")?s="pump":d.includes("filter")?s="filter":d.includes("valve")?s=h.includes("Gateway")?"valve_control":"valve_gate":d.includes("transmitter")||d.includes("transducer")?d.includes("level")?s="transmitter_level":d.includes("flow")?s="transmitter_flow":d.includes("pressure")?s="transmitter_pressure":s="transmitter_level":d.includes("controller")?s="controller_pid":d.includes("analyzer")?s="analyzer":(d.includes("exchanger")||d.includes("heater")||d.includes("cooler"))&&(s="heat_exchanger"),s.includes("transmitter")||s.includes("analyzer")}this._ensureDefs(n);const c=Ne("g");fe(c,{class:"pid-renderer-group"}),ke(n,c),setTimeout(()=>{Array.from(n.children).forEach(d=>{if(d!==c&&d.tagName==="g"){const h=d.querySelector(".djs-visual")||d;h&&!h.classList.contains("pid-renderer-group")&&h.setAttribute("style","display: none !important;")}})},0);const l=r.width&&r.width>0?r.width:tOe,u=r.height&&r.height>0?r.height:nOe;switch(s){case"tank":case"mixing_tank":case"storage_tank":this._drawTank(c,l,u);break;case"pump":case"pump_centrifugal":this._drawPump(c,l,u);break;case"filter":case"separator":this._drawFilter(c,l,u);break;case"heat_exchanger":case"condenser":this._drawHeatExchanger(c,l,u);break;case"reactor":this._drawRectWithDoubleLine(c,l,u);break;case"valve_control":case"valve_gate":case"valve_globe":case"valve_ball":case"valve_butterfly":case"valve_check":case"valve_pressure_relief":case"valve_solenoid":case"valve_diaphragm":case"valve_manual":this._drawValve(c,l,u,s);break;case"transmitter_temp":case"transmitter_pressure":case"transmitter_flow":case"transmitter_level":case"transmitter_analyzer":case"indicator_temp":case"indicator_pressure":case"indicator_flow":case"indicator_level":case"flow_meter":case"pressure_gauge":this._drawInstrument(c,l,u,s);break;case"controller_pid":case"controller_plc":case"controller_dcs":case"controller_local":case"controller_remote":case"controller_manual":this._drawController(c,l,u,s);break;case"actuator_electric":case"actuator_pneumatic":case"actuator_hydraulic":case"motor":case"fan":this._drawActuator(c,l,u,s);break;case"junction":case"tee_connection":case"analyzer_chamber":case"relay":case"control_panel":case"display":case"instrument_bubble":this._drawSmallSymbol(c,l,u,s);break;default:if(this.isPidMode)this._drawRoundedRect(c,l,u,{fill:"#e8f4f8",stroke:"#333",rx:8});else return this.bpmnRenderer.drawShape(n,r)}if(i&&i.name){const d=Ne("text");fe(d,{x:l/2,y:u+14,"text-anchor":"middle","font-family":"Arial, Helvetica, sans-serif","font-size":"12px",fill:"#222","font-weight":"normal"}),d.textContent=i.name,ke(c,d)}return c}drawConnection(n,r){const i=r.businessObject,a=(i==null?void 0:i.$attrs)&&i.$attrs["pid:category"]||"process",s=(i==null?void 0:i.$attrs)&&i.$attrs["pid:style"]||"",c=a==="signal"?"#999":a==="electrical"?"#666":"#000",l=s==="dashed"||a==="signal"?"4 3":a==="electrical"?"2 2":null;this._ensureDefs(n);const u=Ne("path");if(r.waypoints&&r.waypoints.length>0){const d=r.waypoints.map((h,f)=>f===0?`M ${h.x} ${h.y}`:`L ${h.x} ${h.y}`).join(" ");fe(u,{d})}else fe(u,{d:"M0 0 L10 10"});return fe(u,{stroke:c,"stroke-width":1.5,fill:"none"}),l&&fe(u,{"stroke-dasharray":l}),a==="process"?fe(u,{"marker-end":"url(#pid-arrow)"}):fe(u,{"marker-end":"url(#pid-arrow-small)"}),ke(n,u),u}_drawRoundedRect(n,r,i,a={}){const s=Ne("rect");return fe(s,{x:0,y:0,width:r,height:i,rx:a.rx||10,ry:a.rx||10,fill:a.fill||"#b3d9ff",stroke:a.stroke||"#333","stroke-width":a.strokeWidth||2}),ke(n,s),s}_drawRectWithDoubleLine(n,r,i){this._drawRoundedRect(n,r,i,{fill:"#fff",stroke:"#333",rx:4,strokeWidth:2});const a=Ne("rect");fe(a,{x:6,y:6,width:r-12,height:i-12,rx:3,stroke:"#333","stroke-width":1,fill:"none"}),ke(n,a)}_drawPump(n,r,i){const a=Math.min(r,i)*.35,s=a+8,c=i/2,l=Ne("circle");fe(l,{cx:s,cy:c,r:a,stroke:"#333","stroke-width":2,fill:"#e6f2ff"}),ke(n,l);const u=Ne("polygon"),d=s+a*.2,h=c-8,f=c+8;fe(u,{points:`${d},${c} ${d+22},${h} ${d+22},${f}`,fill:"#333"}),ke(n,u)}_drawTank(n,r,i){const a=r*.15,s=i*.15,c=Ne("rect");fe(c,{x:a,y:s,width:r-2*a,height:i-2*s,fill:"#b3d9ff",stroke:"#333","stroke-width":2}),ke(n,c);const l=Ne("ellipse");fe(l,{cx:r/2,cy:s,rx:a,ry:s,fill:"#b3d9ff",stroke:"#333","stroke-width":2}),ke(n,l);const u=Ne("ellipse");fe(u,{cx:r/2,cy:i-s,rx:a,ry:s*.7,fill:"#b3d9ff",stroke:"#333","stroke-width":2}),ke(n,u);const d=Ne("line");fe(d,{x1:a+5,y1:i*.6,x2:r-a-5,y2:i*.6,stroke:"#666","stroke-width":1,"stroke-dasharray":"3 3"}),ke(n,d)}_drawFilter(n,r,i){const a=Ne("rect");fe(a,{x:0,y:0,width:r,height:i,rx:6,fill:"#eaf7ea",stroke:"#333","stroke-width":2}),ke(n,a);const s=5,c=r/(s+1);for(let l=1;l<=s;l++){const u=c*l,d=Ne("line");fe(d,{x1:u-8,y1:8,x2:u+8,y2:i-8,stroke:"#333","stroke-width":1.5}),ke(n,d)}}_drawHeatExchanger(n,r,i){const a=Math.min(r,i)*.22,s=a+8,c=r-a-8,l=i/2,u=Ne("circle");fe(u,{cx:s,cy:l,r:a,stroke:"#333","stroke-width":1.5,fill:"#fff"}),ke(n,u);const d=Ne("circle");fe(d,{cx:c,cy:l,r:a,stroke:"#333","stroke-width":1.5,fill:"#fff"}),ke(n,d);const h=Ne("line");fe(h,{x1:s+a,y1:l,x2:c-a,y2:l,stroke:"#333","stroke-width":1.2}),ke(n,h)}_drawValve(n,r,i,a){const s=Math.min(r,i)*.6,c=r/2,l=i/2,u=s/2,d=`${c},${l-u} ${c+u},${l} ${c},${l+u} ${c-u},${l}`,h=Ne("polygon");if(fe(h,{points:d,stroke:"#000","stroke-width":2,fill:"none"}),ke(n,h),a==="valve_control"){const f=Ne("line");fe(f,{x1:c-u*.6,y1:l-u*.6,x2:c+u*.6,y2:l+u*.6,stroke:"#000","stroke-width":2}),ke(n,f);const p=Ne("line");fe(p,{x1:c+u*.6,y1:l-u*.6,x2:c-u*.6,y2:l+u*.6,stroke:"#000","stroke-width":2}),ke(n,p)}else if(a==="valve_check"){const f=Ne("path");fe(f,{d:`M ${c-u*.4} ${l} q ${u*.4} ${-u*.4} ${u*.8} 0`,stroke:"#000","stroke-width":1.8,fill:"none"}),ke(n,f)}else if(a==="valve_gate"){const f=Ne("line");fe(f,{x1:c,y1:l-u,x2:c,y2:l+u,stroke:"#000","stroke-width":1.6}),ke(n,f)}else{const f=Ne("circle");fe(f,{cx:c,cy:l,r:Math.max(3,u*.25),fill:"#000"}),ke(n,f)}}_drawInstrument(n,r,i,a){const s=Math.min(20,Math.min(r,i)*.25),c=s+4,l=i/2,u=Ne("circle");if(fe(u,{cx:c,cy:l,r:s,stroke:"#333","stroke-width":1.2,fill:"#fff"}),ke(n,u),a==="transmitter_analyzer"){const d=Ne("rect");fe(d,{x:c-s/2,y:l-s/2,width:s,height:s,rx:2,stroke:"#333","stroke-width":1,fill:"#fff"}),ke(n,d)}else if(a==="flow_meter"){const d=Ne("line");fe(d,{x1:c-s+2,y1:l,x2:c+s-2,y2:l,stroke:"#333","stroke-width":1.2}),ke(n,d)}else if(a==="pressure_gauge"){const d=Ne("line");fe(d,{x1:c,y1:l,x2:c+s*.6,y2:l-s*.4,stroke:"#333","stroke-width":1.2}),ke(n,d)}}_drawController(n,r,i,a){const s=Ne("rect");fe(s,{x:0,y:0,width:r,height:i,rx:8,stroke:"#333","stroke-width":1.6,fill:"#f9f9f9"}),ke(n,s);const c=r/2-18,l=i/2;for(let u=0;u<3;u++){const d=Ne("line");fe(d,{x1:c+u*12,y1:l-8,x2:c+u*12,y2:l+8,stroke:"#333","stroke-width":1}),ke(n,d)}}_drawActuator(n,r,i,a){if(a==="motor"){const s=r/2,c=i/2,l=Math.min(r,i)*.28,u=Ne("circle");fe(u,{cx:s,cy:c,r:l,stroke:"#333","stroke-width":1.6,fill:"#fff"}),ke(n,u);const d=Ne("text");fe(d,{x:s,y:c+5,"text-anchor":"middle","font-size":"12px",fill:"#333"}),d.textContent="M",ke(n,d)}else a==="actuator_pneumatic"?this._drawRoundedRect(n,r*.8,i*.5,{fill:"#fff",stroke:"#333",rx:6}):this._drawSmallSymbol(n,r,i,a)}_drawSmallSymbol(n,r,i,a){const s=r/2,c=i/2;if(a==="junction"||a==="tee_connection"){const l=Ne("circle");fe(l,{cx:s,cy:c,r:4,fill:"#333"}),ke(n,l)}else if(a==="analyzer_chamber"){const l=Ne("rect");fe(l,{x:s-12,y:c-10,width:24,height:20,rx:4,stroke:"#333",fill:"#fff"}),ke(n,l)}else{const l=Ne("circle");fe(l,{cx:s,cy:c,r:8,stroke:"#333",fill:"#fff"}),ke(n,l)}}_ensureDefs(n){let r=n;for(;r&&r.nodeName&&r.nodeName.toLowerCase()!=="svg";)r=r.parentNode;if(!r||this._createDefs)return;const i=Ne("defs"),a=Ne("marker");fe(a,{id:"pid-arrow",markerWidth:10,markerHeight:10,refX:8,refY:3.5,orient:"auto",markerUnits:"strokeWidth"});const s=Ne("path");fe(s,{d:"M0,0 L8,3.5 L0,7 Z",fill:"#000"}),ke(a,s),ke(i,a);const c=Ne("marker");fe(c,{id:"pid-arrow-small",markerWidth:8,markerHeight:8,refX:6,refY:3,orient:"auto",markerUnits:"strokeWidth"});const l=Ne("path");fe(l,{d:"M0,0 L6,3 L0,6 Z",fill:"#666"}),ke(c,l),ke(i,c),ke(r,i),this._createDefs=!0}}const iOe={__init__:["pidRenderer"],pidRenderer:["type",["eventBus","bpmnRenderer",rOe]]},Rc=zH,$c=UH,aOe=y.forwardRef(({className:e,inset:t,children:n,...r},i)=>o.jsxs(KI,{ref:i,className:ye("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,o.jsx(Yu,{className:"ml-auto h-4 w-4"})]}));aOe.displayName=KI.displayName;const sOe=y.forwardRef(({className:e,...t},n)=>o.jsx(YI,{ref:n,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));sOe.displayName=YI.displayName;const No=y.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(FH,{children:o.jsx(XI,{ref:r,sideOffset:t,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));No.displayName=XI.displayName;const Xt=y.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(ZI,{ref:r,className:ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));Xt.displayName=ZI.displayName;const oOe=y.forwardRef(({className:e,children:t,checked:n,...r},i)=>o.jsxs(JI,{ref:i,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(QI,{children:o.jsx(si,{className:"h-4 w-4"})})}),t]}));oOe.displayName=JI.displayName;const cOe=y.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(eM,{ref:r,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(QI,{children:o.jsx(YW,{className:"h-2 w-2 fill-current"})})}),t]}));cOe.displayName=eM.displayName;const Kg=y.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(tM,{ref:r,className:ye("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Kg.displayName=tM.displayName;const fu=y.forwardRef(({className:e,...t},n)=>o.jsx(nM,{ref:n,className:ye("-mx-1 my-1 h-px bg-muted",e),...t}));fu.displayName=nM.displayName;var zb="Collapsible",[lOe,iz]=Zs(zb),[uOe,wP]=lOe(zb),az=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:s,...c}=e,[l,u]=Zo({prop:r,defaultProp:i??!1,onChange:s,caller:zb});return o.jsx(uOe,{scope:n,disabled:a,contentId:Ld(),open:l,onOpenToggle:y.useCallback(()=>u(d=>!d),[u]),children:o.jsx(At.div,{"data-state":jP(l),"data-disabled":a?"":void 0,...c,ref:t})})});az.displayName=zb;var sz="CollapsibleTrigger",oz=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,i=wP(sz,n);return o.jsx(At.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":jP(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:lt(e.onClick,i.onOpenToggle)})});oz.displayName=sz;var _P="CollapsibleContent",cz=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=wP(_P,e.__scopeCollapsible);return o.jsx(nc,{present:n||i.open,children:({present:a})=>o.jsx(dOe,{...r,ref:t,present:a})})});cz.displayName=_P;var dOe=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=e,s=wP(_P,n),[c,l]=y.useState(r),u=y.useRef(null),d=vn(t,u),h=y.useRef(0),f=h.current,p=y.useRef(0),m=p.current,g=s.open||c,v=y.useRef(g),x=y.useRef(void 0);return y.useEffect(()=>{const b=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(b)},[]),ci(()=>{const b=u.current;if(b){x.current=x.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const w=b.getBoundingClientRect();h.current=w.height,p.current=w.width,v.current||(b.style.transitionDuration=x.current.transitionDuration,b.style.animationName=x.current.animationName),l(r)}},[s.open,r]),o.jsx(At.div,{"data-state":jP(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!g,...a,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...e.style},children:g&&i})});function jP(e){return e?"open":"closed"}var hOe=az,fOe=oz,pOe=cz,za="Accordion",mOe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[SP,gOe,vOe]=Gj(za),[Ub]=Zs(za,[vOe,iz]),EP=iz(),lz=R.forwardRef((e,t)=>{const{type:n,...r}=e,i=r,a=r;return o.jsx(SP.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?o.jsx(wOe,{...a,ref:t}):o.jsx(bOe,{...i,ref:t})})});lz.displayName=za;var[uz,yOe]=Ub(za),[dz,xOe]=Ub(za,{collapsible:!1}),bOe=R.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...s}=e,[c,l]=Zo({prop:n,defaultProp:r??"",onChange:i,caller:za});return o.jsx(uz,{scope:e.__scopeAccordion,value:R.useMemo(()=>c?[c]:[],[c]),onItemOpen:l,onItemClose:R.useCallback(()=>a&&l(""),[a,l]),children:o.jsx(dz,{scope:e.__scopeAccordion,collapsible:a,children:o.jsx(hz,{...s,ref:t})})})}),wOe=R.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=e,[s,c]=Zo({prop:n,defaultProp:r??[],onChange:i,caller:za}),l=R.useCallback(d=>c((h=[])=>[...h,d]),[c]),u=R.useCallback(d=>c((h=[])=>h.filter(f=>f!==d)),[c]);return o.jsx(uz,{scope:e.__scopeAccordion,value:s,onItemOpen:l,onItemClose:u,children:o.jsx(dz,{scope:e.__scopeAccordion,collapsible:!0,children:o.jsx(hz,{...a,ref:t})})})}),[_Oe,Hb]=Ub(za),hz=R.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...s}=e,c=R.useRef(null),l=vn(c,t),u=gOe(n),h=Iy(i)==="ltr",f=lt(e.onKeyDown,p=>{var P;if(!mOe.includes(p.key))return;const m=p.target,g=u().filter(k=>{var T;return!((T=k.ref.current)!=null&&T.disabled)}),v=g.findIndex(k=>k.ref.current===m),x=g.length;if(v===-1)return;p.preventDefault();let b=v;const w=0,_=x-1,j=()=>{b=v+1,b>_&&(b=w)},S=()=>{b=v-1,b<w&&(b=_)};switch(p.key){case"Home":b=w;break;case"End":b=_;break;case"ArrowRight":a==="horizontal"&&(h?j():S());break;case"ArrowDown":a==="vertical"&&j();break;case"ArrowLeft":a==="horizontal"&&(h?S():j());break;case"ArrowUp":a==="vertical"&&S();break}const N=b%x;(P=g[N].ref.current)==null||P.focus()});return o.jsx(_Oe,{scope:n,disabled:r,direction:i,orientation:a,children:o.jsx(SP.Slot,{scope:n,children:o.jsx(At.div,{...s,"data-orientation":a,ref:l,onKeyDown:r?void 0:f})})})}),Cy="AccordionItem",[jOe,NP]=Ub(Cy),fz=R.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...i}=e,a=Hb(Cy,n),s=yOe(Cy,n),c=EP(n),l=Ld(),u=r&&s.value.includes(r)||!1,d=a.disabled||e.disabled;return o.jsx(jOe,{scope:n,open:u,disabled:d,triggerId:l,children:o.jsx(hOe,{"data-orientation":a.orientation,"data-state":xz(u),...c,...i,ref:t,disabled:d,open:u,onOpenChange:h=>{h?s.onItemOpen(r):s.onItemClose(r)}})})});fz.displayName=Cy;var pz="AccordionHeader",mz=R.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=Hb(za,n),a=NP(pz,n);return o.jsx(At.h3,{"data-orientation":i.orientation,"data-state":xz(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});mz.displayName=pz;var $j="AccordionTrigger",gz=R.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=Hb(za,n),a=NP($j,n),s=xOe($j,n),c=EP(n);return o.jsx(SP.ItemSlot,{scope:n,children:o.jsx(fOe,{"aria-disabled":a.open&&!s.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...c,...r,ref:t})})});gz.displayName=$j;var vz="AccordionContent",yz=R.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=Hb(za,n),a=NP(vz,n),s=EP(n);return o.jsx(pOe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...s,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});yz.displayName=vz;function xz(e){return e?"open":"closed"}var SOe=lz,EOe=fz,NOe=mz,bz=gz,wz=yz;const Ij=SOe,bu=y.forwardRef(({className:e,...t},n)=>o.jsx(EOe,{ref:n,className:ye("border-b",e),...t}));bu.displayName="AccordionItem";const wu=y.forwardRef(({className:e,children:t,...n},r)=>o.jsx(NOe,{className:"flex",children:o.jsxs(bz,{ref:r,className:ye("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,o.jsx(_i,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));wu.displayName=bz.displayName;const _u=y.forwardRef(({className:e,children:t,...n},r)=>o.jsx(wz,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:o.jsx("div",{className:ye("pb-4 pt-0",e),children:t})}));_u.displayName=wz.displayName;const _z=y.forwardRef(({...e},t)=>o.jsx("nav",{ref:t,"aria-label":"breadcrumb",...e}));_z.displayName="Breadcrumb";const jz=y.forwardRef(({className:e,...t},n)=>o.jsx("ol",{ref:n,className:ye("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...t}));jz.displayName="BreadcrumbList";const Yg=y.forwardRef(({className:e,...t},n)=>o.jsx("li",{ref:n,className:ye("inline-flex items-center gap-1.5",e),...t}));Yg.displayName="BreadcrumbItem";const Mj=y.forwardRef(({asChild:e,className:t,...n},r)=>{const i=e?JM:"a";return o.jsx(i,{ref:r,className:ye("transition-colors hover:text-foreground",t),...n})});Mj.displayName="BreadcrumbLink";const Sz=y.forwardRef(({className:e,...t},n)=>o.jsx("span",{ref:n,role:"link","aria-disabled":"true","aria-current":"page",className:ye("font-normal text-foreground",e),...t}));Sz.displayName="BreadcrumbPage";const Dj=({children:e,className:t,...n})=>o.jsx("li",{role:"presentation","aria-hidden":"true",className:ye("[&>svg]:size-3.5",t),...n,children:e??o.jsx(Yu,{})});Dj.displayName="BreadcrumbSeparator";var Vb="Switch",[POe]=Zs(Vb),[kOe,COe]=POe(Vb),Ez=y.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:s,disabled:c,value:l="on",onCheckedChange:u,form:d,...h}=e,[f,p]=y.useState(null),m=vn(t,w=>p(w)),g=y.useRef(!1),v=f?d||!!f.closest("form"):!0,[x,b]=Zo({prop:i,defaultProp:a??!1,onChange:u,caller:Vb});return o.jsxs(kOe,{scope:n,checked:x,disabled:c,children:[o.jsx(At.button,{type:"button",role:"switch","aria-checked":x,"aria-required":s,"data-state":Cz(x),"data-disabled":c?"":void 0,disabled:c,value:l,...h,ref:m,onClick:lt(e.onClick,w=>{b(_=>!_),v&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),v&&o.jsx(kz,{control:f,bubbles:!g.current,name:r,value:l,checked:x,required:s,disabled:c,form:d,style:{transform:"translateX(-100%)"}})]})});Ez.displayName=Vb;var Nz="SwitchThumb",Pz=y.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=COe(Nz,n);return o.jsx(At.span,{"data-state":Cz(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});Pz.displayName=Nz;var AOe="SwitchBubbleInput",kz=y.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},a)=>{const s=y.useRef(null),c=vn(s,a),l=D5(n),u=HH(t);return y.useEffect(()=>{const d=s.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&p){const m=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(m)}},[l,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:c,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});kz.displayName=AOe;function Cz(e){return e?"checked":"unchecked"}var Az=Ez,TOe=Pz;const Vs=y.forwardRef(({className:e,...t},n)=>o.jsx(Az,{className:ye("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:o.jsx(TOe,{className:ye("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Vs.displayName=Az.displayName;var OOe=Symbol("radix.slottable");function ROe(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=OOe,t}var Tz="AlertDialog",[$Oe]=Zs(Tz,[rM]),co=rM(),Oz=e=>{const{__scopeAlertDialog:t,...n}=e,r=co(t);return o.jsx(Vj,{...r,...n,modal:!0})};Oz.displayName=Tz;var IOe="AlertDialogTrigger",MOe=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=co(n);return o.jsx(FI,{...i,...r,ref:t})});MOe.displayName=IOe;var DOe="AlertDialogPortal",Rz=e=>{const{__scopeAlertDialog:t,...n}=e,r=co(t);return o.jsx(Hj,{...r,...n})};Rz.displayName=DOe;var LOe="AlertDialogOverlay",$z=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=co(n);return o.jsx(Pp,{...i,...r,ref:t})});$z.displayName=LOe;var Ru="AlertDialogContent",[BOe,FOe]=$Oe(Ru),zOe=ROe("AlertDialogContent"),Iz=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,a=co(n),s=y.useRef(null),c=vn(t,s),l=y.useRef(null);return o.jsx(VH,{contentName:Ru,titleName:Mz,docsSlug:"alert-dialog",children:o.jsx(BOe,{scope:n,cancelRef:l,children:o.jsxs(kp,{role:"alertdialog",...a,...i,ref:c,onOpenAutoFocus:lt(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(zOe,{children:r}),o.jsx(HOe,{contentRef:s})]})})})});Iz.displayName=Ru;var Mz="AlertDialogTitle",Dz=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=co(n);return o.jsx(Cp,{...i,...r,ref:t})});Dz.displayName=Mz;var Lz="AlertDialogDescription",Bz=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=co(n);return o.jsx(Ap,{...i,...r,ref:t})});Bz.displayName=Lz;var UOe="AlertDialogAction",Fz=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=co(n);return o.jsx($y,{...i,...r,ref:t})});Fz.displayName=UOe;var zz="AlertDialogCancel",Uz=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=FOe(zz,n),a=co(n),s=vn(t,i);return o.jsx($y,{...a,...r,ref:s})});Uz.displayName=zz;var HOe=({contentRef:e})=>{const t=`\`${Ru}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ru}\` by passing a \`${Lz}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ru}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},VOe=Oz,GOe=Rz,Hz=$z,Vz=Iz,Gz=Fz,Wz=Uz,qz=Dz,Kz=Bz;const PP=VOe,WOe=GOe,Yz=y.forwardRef(({className:e,...t},n)=>o.jsx(Hz,{className:ye("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Yz.displayName=Hz.displayName;const Gb=y.forwardRef(({className:e,...t},n)=>o.jsxs(WOe,{children:[o.jsx(Yz,{}),o.jsx(Vz,{ref:n,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Gb.displayName=Vz.displayName;const Wb=({className:e,...t})=>o.jsx("div",{className:ye("flex flex-col space-y-2 text-center sm:text-left",e),...t});Wb.displayName="AlertDialogHeader";const qb=({className:e,...t})=>o.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qb.displayName="AlertDialogFooter";const Kb=y.forwardRef(({className:e,...t},n)=>o.jsx(qz,{ref:n,className:ye("text-lg font-semibold",e),...t}));Kb.displayName=qz.displayName;const Yb=y.forwardRef(({className:e,...t},n)=>o.jsx(Kz,{ref:n,className:ye("text-sm text-muted-foreground",e),...t}));Yb.displayName=Kz.displayName;const Xb=y.forwardRef(({className:e,...t},n)=>o.jsx(Gz,{ref:n,className:ye(dS(),e),...t}));Xb.displayName=Gz.displayName;const Zb=y.forwardRef(({className:e,...t},n)=>o.jsx(Wz,{ref:n,className:ye(dS({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Zb.displayName=Wz.displayName;const qOe=[{value:"auto",label:"Auto (match prompt language)"},{value:"en",label:"English"},{value:"es",label:"Espaol (Spanish)"},{value:"fr",label:"Franais (French)"},{value:"de",label:"Deutsch (German)"},{value:"pt",label:"Portugus (Portuguese)"},{value:"it",label:"Italiano (Italian)"}],Ay={auto:"Prompt language",en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",pt:"Portugus",it:"Italiano"},Xz={es:{start:"inicio",startevent:"evento de inicio",end:"fin",event:"evento",endevent:"evento final",approve:"aprobar",approval:"aprobacin",request:"solicitud",review:"revisin",task:"tarea",user:"usuario",service:"servicio",process:"proceso",data:"datos",validation:"validacin",payment:"pago",error:"error",handling:"gestin",customer:"cliente",support:"soporte",escalation:"escalamiento",decision:"decisin",gateway:"compuerta",branch:"rama",automation:"automatizacin",monitoring:"monitoreo",compliance:"cumplimiento"},fr:{start:"dbut",startevent:"vnement de dbut",end:"fin",event:"vnement",endevent:"vnement de fin",approve:"approuver",approval:"approbation",request:"demande",review:"revue",task:"tche",user:"utilisateur",service:"service",process:"processus",data:"donnes",validation:"validation",payment:"paiement",error:"erreur",handling:"gestion",customer:"client",support:"support",escalation:"escalade",decision:"dcision",gateway:"passerelle",branch:"branche",automation:"automatisation",compliance:"conformit"},de:{start:"start",startevent:"startereignis",end:"ende",event:"ereignis",endevent:"endereignis",approve:"genehmigen",approval:"genehmigung",request:"anfrage",review:"prfung",task:"aufgabe",user:"benutzer",service:"dienst",process:"prozess",data:"daten",validation:"validierung",payment:"zahlung",error:"fehler",handling:"bearbeitung",customer:"kunde",support:"support",escalation:"eskalation",decision:"entscheidung",gateway:"gateway",branch:"zweig",automation:"automatisierung",compliance:"compliance"},pt:{start:"incio",startevent:"evento inicial",end:"fim",event:"evento",endevent:"evento final",approve:"aprovar",approval:"aprovao",request:"solicitao",review:"reviso",task:"tarefa",user:"usurio",service:"servio",process:"processo",data:"dados",validation:"validao",payment:"pagamento",error:"erro",handling:"tratamento",customer:"cliente",support:"suporte",escalation:"escalonamento",decision:"deciso",gateway:"gateway",branch:"ramo",automation:"automao",compliance:"conformidade"},it:{start:"inizio",startevent:"evento iniziale",end:"fine",event:"evento",endevent:"evento finale",approve:"approvare",approval:"approvazione",request:"richiesta",review:"revisione",task:"attivit",user:"utente",service:"servizio",process:"processo",data:"dati",validation:"validazione",payment:"pagamento",error:"errore",handling:"gestione",customer:"cliente",support:"supporto",escalation:"escalation",decision:"decisione",gateway:"gateway",branch:"ramo",automation:"automazione",compliance:"conformit"}},KOe={es:[{pattern:/start event/gi,replacement:"Evento de Inicio"},{pattern:/end event/gi,replacement:"Evento Final"},{pattern:/user task/gi,replacement:"Tarea de Usuario"},{pattern:/service task/gi,replacement:"Tarea de Servicio"}],fr:[{pattern:/start event/gi,replacement:"vnement de dbut"},{pattern:/end event/gi,replacement:"vnement de fin"},{pattern:/user task/gi,replacement:"Tche utilisateur"},{pattern:/service task/gi,replacement:"Tche de service"}],de:[{pattern:/start event/gi,replacement:"Startereignis"},{pattern:/end event/gi,replacement:"Endereignis"},{pattern:/user task/gi,replacement:"Benutzeraufgabe"},{pattern:/service task/gi,replacement:"Serviceaufgabe"}],pt:[{pattern:/start event/gi,replacement:"Evento de Incio"},{pattern:/end event/gi,replacement:"Evento Final"},{pattern:/user task/gi,replacement:"Tarefa do Usurio"},{pattern:/service task/gi,replacement:"Tarefa de Servio"}],it:[{pattern:/start event/gi,replacement:"Evento Iniziale"},{pattern:/end event/gi,replacement:"Evento Finale"},{pattern:/user task/gi,replacement:"Attivit Utente"},{pattern:/service task/gi,replacement:"Attivit di Servizio"}]},mI="bpmn-language-preference",YOe=new Set(Object.keys(Xz)),XOe=e=>qOe.some(t=>t.value===e),ZOe=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z]/g,""),gI=(e,t)=>{var n;return e?e===e.toUpperCase()?t.toUpperCase():e[0]===((n=e[0])==null?void 0:n.toUpperCase())?t.charAt(0).toUpperCase()+t.slice(1):t:t},JOe=(e,t)=>{const n=Xz[t];if(!n)return null;const r=KOe[t];let i=e;return r&&r.forEach(({pattern:c,replacement:l})=>{i=i.replace(c,u=>gI(u,l))}),i.split(/(\s+|[-/(),:]+)/g).map(c=>{if(!c.trim()||/(\s+|[-/(),:]+)/.test(c))return c;const l=ZOe(c),u=n[l];return u?gI(c,u):c}).join("")},QOe=e=>{if(!e||e.trim().length===0)return"en";const t=e.toLowerCase();if(/[]/.test(e))return"de";const n={es:[/\b(es|est|estn|con|para|por|del|la|el|de|en|un|una|son|ser|hacer|tiene|tener|proceso|diagrama|crear|generar|tarea|aprobar|revisin|validacin)\b/i],fr:[/\b(est|sont|avec|pour|par|du|la|le|de|en|un|une|sont|tre|faire|a|avoir|processus|diagramme|crer|gnrer|tche|approuver|revue|validation)\b/i],de:[/\b(ist|sind|mit|fr|von|der|die|das|dem|den|des|ein|eine|einen|einem|einer|und|oder|prozess|prozesse|diagramm|erstellen|generieren|aufgabe|aktivitt)\b/i],it:[/\b(|sono|con|per|da|del|la|il|di|in|un|una|sono|essere|fare|ha|avere|processo|diagramma|creare|generare|compito)\b/i],pt:[/\b(|so|com|para|por|do|da|de|em|um|uma|so|ser|fazer|tem|ter|processo|diagrama|criar|gerar|tarefa)\b/i],ru:[/\b(||||||||||||)\b/i],ja:[/\b(|||||||||||)\b/i],ko:[/\b(|||||||||||)\b/i],zh:[/\b(||||||||||)\b/i],ar:[/\b(|||||||||||)\b/i],hi:[/\b(|||||||||)\b/i]},r={};for(const[s,c]of Object.entries(n)){r[s]=0;for(const l of c){const u=t.match(l);u&&(r[s]+=u.length)}}let i=0,a="en";for(const[s,c]of Object.entries(r))c>i&&(i=c,a=s);if(i===0){if(/[\u4e00-\u9fff]/.test(e))return"zh";if(/[\u3040-\u309f\u30a0-\u30ff]/.test(e))return"ja";if(/[\uac00-\ud7af]/.test(e))return"ko";if(/[\u0600-\u06ff]/.test(e))return"ar";if(/[\u0400-\u04ff]/.test(e))return"ru";if(/[\u0900-\u097f]/.test(e))return"hi"}return a},Zz=e=>e==="auto"?`LANGUAGE DIRECTIVE:
- Mirror the language used in the user's prompt and on the current canvas.
- If the existing diagram contains Spanish labels, every generated variant MUST also be Spanish.
- Never switch to English unless the prompt itself is English.`:`LANGUAGE DIRECTIVE:
CRITICAL: Use ${Ay[e]??e.toUpperCase()} for 100% of textual content (tasks, events, gateways, pools, lanes, annotations, documentation).
Do NOT include English translations or bilingual labels.`,eRe=(e,t)=>{const n=QOe(e),r={en:"en",es:"es",fr:"fr",de:"de",it:"it",pt:"pt"},i=n!=="en"&&r[n]?r[n]:t;if(t==="auto"&&n!=="en"&&r[n]){const a=Ay[r[n]]??n.toUpperCase();return`LANGUAGE DIRECTIVE:
CRITICAL: The existing diagram content is in ${a}. Generate ALL variants using ${a} for 100% of textual content (tasks, events, gateways, pools, lanes, annotations, documentation).
Do NOT switch to English. Do NOT include English translations or bilingual labels.
Every generated variant MUST match the language of the existing diagram.`}return Zz(i)},tRe=e=>{if(!e)return"";const t=[];let n=e;for(;n&&n.nodeType===1;){const r=n.tagName.toLowerCase();let i=1,a=!1;if(n.parentNode){const s=n.parentNode.childNodes;let c=0;for(let l=0;l<s.length;l++){const u=s[l];u.nodeType===1&&u.tagName===n.tagName&&(c+=1,u===n?(i=c,c>1&&(a=!0)):a=!0)}}t.unshift(a?`${r}[${i}]`:r),n=n.parentElement}return`/${t.join("/")}`},vI=(e,t=280)=>{if(!e)return;const n=e.replace(/\s+/g," ").trim();if(n)return n.length>t?`${n.slice(0,t)}...`:n},Mw=async e=>{const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(a=>a.toString(16).padStart(2,"0")).join("")},nRe=e=>{try{const n=new DOMParser().parseFromString(e,"application/xml");if(n.getElementsByTagName("parsererror").length>0)return{taskCount:0,decisionPoints:0,parallelBranches:0,errorHandlers:0,eventTypes:[],estimatedPaths:1};const i=n.querySelectorAll("task, userTask, serviceTask, manualTask, sendTask, receiveTask, scriptTask, businessRuleTask, callActivity").length,a=n.querySelectorAll("exclusiveGateway, parallelGateway, inclusiveGateway, eventBasedGateway"),s=a.length,l=n.querySelectorAll("parallelGateway").length,d=n.querySelectorAll("boundaryEvent errorEventDefinition, intermediateCatchEvent errorEventDefinition").length,h=[];n.querySelectorAll("startEvent, intermediateCatchEvent, intermediateThrowEvent, endEvent, boundaryEvent").forEach(m=>{m.querySelectorAll("messageEventDefinition, timerEventDefinition, errorEventDefinition, escalationEventDefinition, signalEventDefinition, conditionalEventDefinition").forEach(v=>{const x=v.tagName.replace("EventDefinition","").toLowerCase();x&&!h.includes(x)&&h.push(x)})});let p=1;return a.forEach(m=>{const g=m.tagName.toLowerCase();if(g.includes("exclusive"))p*=2;else if(g.includes("parallel")){const v=m.querySelectorAll("outgoing").length;p*=Math.max(2,v)}else g.includes("inclusive")&&(p*=2)}),{taskCount:i,decisionPoints:s,parallelBranches:l,errorHandlers:d,eventTypes:h.length>0?h:["none"],estimatedPaths:Math.max(1,p)}}catch(t){return console.error("Failed to calculate metrics:",t),{taskCount:0,decisionPoints:0,parallelBranches:0,errorHandlers:0,eventTypes:[],estimatedPaths:1}}},rRe=(e,t)=>{try{const r=new DOMParser().parseFromString(e,"application/xml");if(r.getElementsByTagName("parsererror").length>0)return t==="pid"?"Instrumentation and equipment interactions.":"Business process from start to finish.";const i=["bpmn:task","bpmn:userTask","bpmn:serviceTask","bpmn:manualTask","bpmn:sendTask","bpmn:receiveTask","bpmn:scriptTask","bpmn:businessRuleTask","bpmn:callActivity","task","userTask","serviceTask","manualTask","sendTask","receiveTask","scriptTask","businessRuleTask","callActivity"],a=[];if(i.forEach(d=>{const h=r.getElementsByTagName(d);for(let f=0;f<h.length;f++){const p=h[f].getAttribute("name");p&&!a.includes(p)&&a.push(p)}}),!a.length)return t==="pid"?"Instrumentation and equipment interactions.":"Business process from start to finish.";const s=20,c=a.length>s?a.slice(0,s):a,l=a.length>s?", and more.":".";return`${t==="pid"?"P&ID workflow covering: ":"Process steps include: "}${c.join(", ")}${l}`}catch(n){return console.error("Failed to extract process summary:",n),t==="pid"?"Instrumentation and equipment interactions.":"Business process from start to finish."}},Yh=[{id:"core-linear",title:"Core Linear Flow",description:"Straight-through execution with only essential activities.",complexity:"basic",instructions:{bpmn:"Generate the most streamlined BPMN possible for the process summary, keeping only critical tasks and a single happy path.",pid:"Focus on the principal equipment path and core instrumentation, omitting secondary loops or optional devices."}},{id:"human-centric",title:"Human-Centric Collaboration",description:"Highlights manual approvals and team handoffs.",complexity:"intermediate",instructions:{bpmn:"Emphasize manual approvals, include at least two swimlanes, and show review loops that require people to coordinate.",pid:"Highlight manual valves, operator checkpoints, and instrumentation that requires human acknowledgement before continuing."}},{id:"automation-lean",title:"Automation Lean",description:"Switches repetitive work to automated service steps.",complexity:"intermediate",instructions:{bpmn:"Transform repetitive or high-volume tasks into service tasks with system integrations and automated escalations.",pid:"Show controllers and transmitters automating monitoring tasks, including signal lines that close the loop automatically."}},{id:"parallel-efficiency",title:"Parallel Efficiency",description:"Optimizes throughput with parallel branches and event handling.",complexity:"advanced",instructions:{bpmn:"Introduce parallel gateways to split workload, use event-based gateways for exceptions, and add a compensation or rollback path.",pid:"Model redundant equipment paths in parallel with automated switchovers and interlock signals connecting the branches."}},{id:"compliance-audit",title:"Compliance & Audit Ready",description:"Adds control checkpoints, logging, and audit artefacts.",complexity:"advanced",instructions:{bpmn:"Layer in compliance checks, logging activities, and escalation paths. Attach data objects for evidence and audit trails.",pid:"Add monitoring instrumentation, safety valves, bypass lines, and annotations for regulatory checkpoints and alarms."}},{id:"experience-journey",title:"Customer Experience Journey",description:"Maps personas, SLAs, and service touchpoints end to end.",complexity:"intermediate",instructions:{bpmn:"Introduce swimlanes for customer-facing roles, note SLA timers, and highlight feedback or survey capture points along the path.",pid:"Call out operator interfaces, HMI panels, and alarm acknowledgements that connect process equipment to customer-impacting metrics."}},{id:"resilient-recovery",title:"Resilient Recovery Blueprint",description:"Builds failover branches, compensations, and escalation playbooks.",complexity:"advanced",instructions:{bpmn:"Layer event subprocesses for incidents, model compensation tasks, and show escalation to support teams with clear rollback steps.",pid:"Add redundancy loops, relief paths, and interlocks that trigger automated shutdown, including operator guidance annotations."}}],yI=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2),Ic=async(e,t,n="#ffffff")=>{const r=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(r);try{const a=new Image;a.crossOrigin="anonymous";const s=new Promise((h,f)=>{a.onload=()=>h(),a.onerror=p=>f(p)});a.src=i,await s;const c=document.createElement("canvas");c.width=a.naturalWidth||a.width||1200,c.height=a.naturalHeight||a.height||800;const l=c.getContext("2d");if(!l)throw new Error("Unable to create 2D canvas context");l.fillStyle=n,l.fillRect(0,0,c.width,c.height),l.drawImage(a,0,0);const u=c.toDataURL(t);return await(await fetch(u)).blob()}finally{URL.revokeObjectURL(i)}},qa=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},Jz=e=>{try{const n=new DOMParser().parseFromString(e,"application/xml");if(n.getElementsByTagName("parsererror").length>0)return{elementCount:0,complexity:"simple"};const r=n.querySelectorAll("task, userTask, serviceTask, manualTask, sendTask, receiveTask, scriptTask, businessRuleTask, callActivity"),i=n.querySelectorAll("exclusiveGateway, parallelGateway, inclusiveGateway, eventBasedGateway"),a=n.querySelectorAll("startEvent, intermediateCatchEvent, intermediateThrowEvent, endEvent, boundaryEvent"),s=n.querySelectorAll("sequenceFlow, messageFlow"),c=n.querySelectorAll("subProcess, callActivity"),l=r.length+i.length+a.length+s.length+c.length;let u;return l<=20?u="simple":l<=50?u="intermediate":l<=100?u="complex":u="very-complex",{elementCount:l,complexity:u}}catch(t){return console.error("Failed to calculate complexity:",t),{elementCount:0,complexity:"simple"}}},Qz=async(e,t,n)=>Promise.race([e,new Promise((r,i)=>setTimeout(()=>i(new Error(n)),t))]),Ss=async(e,t=5e3)=>{const n=document.createElement("div");n.style.position="fixed",n.style.left="-99999px",n.style.top="-99999px",n.style.width="1200px",n.style.height="800px",document.body.appendChild(n);try{const r=(async()=>{const a=new Ji({container:n});await a.importXML(e);const{svg:s}=await a.saveSVG();return a.destroy(),s})(),i=await Qz(r,t,"SVG rendering timed out");return document.body.removeChild(n),i}catch(r){throw n.parentNode&&document.body.removeChild(n),r}},iRe=async(e,t=5e3)=>{const n=document.createElement("div");n.style.position="fixed",n.style.left="-99999px",n.style.top="-99999px",n.style.width="2000px",n.style.height="1500px",document.body.appendChild(n);try{const r=(async()=>{const a=new Ji({container:n});await a.importXML(e),await new Promise(c=>setTimeout(c,800));const{svg:s}=await a.saveSVG();return a.destroy(),s})(),i=await Qz(r,t,"Canvas rendering timed out");return document.body.removeChild(n),i}catch(r){throw n.parentNode&&document.body.removeChild(n),r}},aRe=async(e,t)=>{try{return null}catch(n){return console.error("Server preview request failed:",n),null}},$g=(e,t)=>{try{const r=new DOMParser().parseFromString(e,"application/xml");if(r.getElementsByTagName("parsererror").length>0)throw new Error("Invalid XML");const i=Array.from(r.querySelectorAll("task, userTask, serviceTask")).slice(0,10),a=i.map(m=>m.getAttribute("name")||"Task").filter(Boolean),s=r.querySelectorAll("startEvent"),c=r.querySelectorAll("endEvent"),l=r.querySelectorAll("exclusiveGateway, parallelGateway, inclusiveGateway"),u=600,d=Math.max(400,a.length*60+100);let h=`<svg width="${u}" height="${d}" xmlns="http://www.w3.org/2000/svg" style="background: white;">
      <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
          <polygon points="0 0, 10 3, 0 6" fill="#1976d2" />
        </marker>
        <style>
          .task-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
          .start-end { fill: #c8e6c9; stroke: #388e3c; stroke-width: 2; }
          .gateway { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
          .text { font-family: Arial, sans-serif; font-size: 12px; fill: #333; }
          .title { font-size: 14px; font-weight: bold; fill: #1976d2; }
        </style>
      </defs>
      <text x="${u/2}" y="25" text-anchor="middle" class="title">${t}</text>
      <text x="${u/2}" y="45" text-anchor="middle" class="text" style="font-size: 10px; fill: #666;">Simplified Preview</text>
    `;s.length>0&&(h+=`<circle cx="50" cy="80" r="15" class="start-end" />
              <text x="50" y="85" text-anchor="middle" class="text" style="font-size: 10px;">Start</text>`);let f=120;a.forEach((m,g)=>{const x=m.length>25?m.substring(0,22)+"...":m;h+=`<rect x="90" y="${f-15}" width="120" height="30" rx="5" class="task-box" />
              <text x="150" y="${f+2}" text-anchor="middle" class="text">${x}</text>`,g<a.length-1&&(h+=`<line x1="150" y1="${f+15}" x2="150" y2="${f+45}" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />`),f+=60}),c.length>0&&(h+=`<circle cx="150" cy="${f}" r="15" class="start-end" />
              <text x="150" y="${f+5}" text-anchor="middle" class="text" style="font-size: 10px;">End</text>`),l.length>0&&(h+=`<text x="${u-100}" y="80" class="text" style="font-size: 10px; fill: #f57c00;">${l.length} Gateway${l.length>1?"s":""}</text>`);const p=i.length+l.length+s.length+c.length;return h+=`<text x="${u/2}" y="${d-20}" text-anchor="middle" class="text" style="font-size: 10px; fill: #666;">${p} elements total</text>`,h+="</svg>",h}catch{return`<svg width="400" height="200" xmlns="http://www.w3.org/2000/svg" style="background: white;">
      <text x="200" y="100" text-anchor="middle" font-family="Arial" font-size="14" fill="#666">${t}</text>
      <text x="200" y="120" text-anchor="middle" font-family="Arial" font-size="12" fill="#999">Diagram Preview</text>
    </svg>`}};function sRe(e,t,n){return new Promise(r=>{const i=setTimeout(()=>{r({data:null,error:new Error(`Function call timed out after ${n/1e3} seconds`)})},n);oe.functions.invoke(e,t).then(a=>{clearTimeout(i),r(a)}).catch(a=>{clearTimeout(i),r({data:null,error:a})})})}const Ty=new Map,oRe=5*60*1e3,cRe=e=>{const t=Ty.get(e);return t&&Date.now()-t.timestamp<oRe?t.svg:(t&&Ty.delete(e),null)},lRe=(e,t)=>{Ty.set(e,{svg:t,timestamp:Date.now()})},uRe=(e,t)=>{const n=e.slice(0,100)+t;return btoa(n).replace(/[^a-zA-Z0-9]/g,"")},Dw=({xml:e,title:t,onRetry:n,onDownloadAvailable:r})=>{const[i,a]=y.useState(null),[s,c]=y.useState(!0),[l,u]=y.useState(null),[d,h]=y.useState(null),[f,p]=y.useState(0),[m,g]=y.useState("svg");return y.useEffect(()=>{let v=!0;const x=Jz(e),b=uRe(e,t),w=cRe(b);if(w){a(w),c(!1),r&&r(!0);return}return(async()=>{c(!0),u(null),h(null),g("svg");try{let j=null,S=null;try{g("svg"),j=await Ss(e,5e3),console.log(` SVG render successful for ${t}`)}catch(N){S=N,console.warn(` SVG render failed for ${t}:`,N);try{g("canvas"),j=await iRe(e,5e3),console.log(` Canvas render successful for ${t}`)}catch(P){if(S=P,console.warn(` Canvas render failed for ${t}:`,P),x.complexity==="complex"||x.complexity==="very-complex"){g("server");try{const k=await aRe(e,t);if(k)j=k,console.log(` Server preview successful for ${t}`);else throw new Error("Server preview not available")}catch(k){S=k,console.warn(` Server preview failed for ${t}:`,k)}}if(!j){g("svg");try{j=$g(e,t),console.log(` Simplified preview generated for ${t}`)}catch(k){console.error(` Even simplified preview failed for ${t}:`,k),j=$g(e,t)}}}}if(v)if(j)a(j),lRe(b,j),g("svg"),r&&r(!0);else{const N=$g(e,t);a(N),r&&r(!0)}}catch(j){if(v)try{const S=$g(e,t);a(S),r&&r(!0)}catch(S){console.error(`Even simplified preview failed for ${t}:`,S);const N=`<svg width="400" height="200" xmlns="http://www.w3.org/2000/svg" style="background: white;">
              <text x="200" y="100" text-anchor="middle" font-family="Arial" font-size="14" fill="#666">${t}</text>
              <text x="200" y="120" text-anchor="middle" font-family="Arial" font-size="12" fill="#999">Diagram Preview</text>
            </svg>`;a(N),r&&r(!0)}console.error(`Failed to render preview for ${t}:`,j)}finally{v&&c(!1)}})(),()=>{v=!1}},[e,t,f,r]),o.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",style:{backgroundColor:"#ffffff"},children:s?o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx(Ir,{className:"h-8 w-8 animate-spin text-muted-foreground"}),m==="server"&&o.jsx("p",{className:"text-xs text-muted-foreground",children:"Generating server preview..."})]}):i?o.jsx("img",{src:`data:image/svg+xml;utf8,${encodeURIComponent(i)}`,alt:`${t} preview`,className:"h-full w-full object-contain"}):null})},kP=({xml:e,onSave:t,diagramType:n="bpmn",onRefine:r})=>{var QP,ek,tk;Mi();const i=y.useRef(null),a=y.useRef(null),[s,c]=y.useState(!1),[l,u]=y.useState(!1),[d,h]=y.useState(null),[f,p]=y.useState(!1),[m,g]=y.useState(!0),[v,x]=y.useState(!1),[b,w]=y.useState(!1),[_,j]=y.useState([]),[S,N]=y.useState(!1),[P,k]=y.useState([]),[T,A]=y.useState(!1),[O,D]=y.useState(null),[L,G]=y.useState({completed:0,total:0}),[H,K]=y.useState(new Map),[Z,q]=y.useState(5),[le,_e]=y.useState(0),re=y.useRef(null),[de,Se]=y.useState(null),[nt,St]=y.useState([]),[Ee,se]=y.useState(!1),[X,ne]=y.useState(null),[ae,W]=y.useState(null),Re=y.useRef(!0),Pe=y.useRef(!1),[Ve,Ct]=y.useState([]),[qt,tr]=y.useState(!1),[Dn,Jr]=y.useState(null),[ur,br]=y.useState(!1),yn=y.useRef([]),Lr=y.useRef(null),[je,Ge]=y.useState("auto"),[We,zt]=y.useState(!1),[ht,Le]=y.useState(!1),en=y.useRef(new Map),Tt=y.useRef("auto"),[kr,Lt]=y.useState(!1);y.useEffect(()=>{if(!(typeof window>"u"))try{const E=window.localStorage.getItem(mI);E&&XOe(E)&&Ge(E)}catch(E){console.warn("Unable to read saved language preference:",E)}},[]),y.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(mI,je)}catch(E){console.warn("Unable to persist language preference:",E)}},[je]);const fa=y.useMemo(()=>rRe(e,n),[e,n]),lo=y.useMemo(()=>Zz(je),[je]),dr=y.useCallback(()=>{if(a.current)try{const E=a.current.get("elementRegistry");if(!E)return;const I=new Map;E.getAll().forEach(M=>{var F;const z=(F=M==null?void 0:M.businessObject)==null?void 0:F.name;typeof z=="string"&&z.trim()&&I.set(M.id,z)}),en.current=I}catch(E){console.warn("Failed to capture diagram labels:",E)}},[]),Bl=y.useCallback(()=>{if(!(!a.current||!en.current.size))try{const E=a.current.get("modeling"),I=a.current.get("elementRegistry");if(!E||!I)return;en.current.forEach((M,z)=>{const F=I.get(z);if(F!=null&&F.businessObject&&F.businessObject.name!==M)try{E.updateProperties(F,{name:M})}catch(B){console.warn(`Failed to restore label for ${z}`,B)}}),Tt.current="auto"}catch(E){console.warn("Failed to restore original labels:",E)}},[]),fh=y.useCallback(async(E,I)=>{if(!a.current||E==="auto")return!0;if(E==="en")return Bl(),Tt.current="en",!0;if(!YOe.has(E))return I!=null&&I.silent||$.info(`Live translation not available for ${Ay[E]??E}.`),!1;en.current.size||dr();try{const M=a.current.get("modeling"),z=a.current.get("elementRegistry");return!M||!z?!1:(en.current.forEach((F,B)=>{const Q=z.get(B);if(!(Q!=null&&Q.businessObject))return;const he=JOe(F,E);if(!(!he||he===Q.businessObject.name))try{M.updateProperties(Q,{name:he})}catch(ge){console.warn(`Failed to translate label for ${B}`,ge)}}),Tt.current=E,!0)}catch(M){return console.warn("Failed to apply language adaptation:",M),!1}},[dr,Bl]);y.useEffect(()=>{if(!kr||!a.current)return;let E=!1;return(async()=>{zt(!0);try{je==="auto"?(Bl(),dr()):!await fh(je,{silent:!0})&&!E&&$.info(`Live translation not yet available for ${Ay[je]??je}.`)}catch(M){E||(console.error("Language adaptation failed:",M),$.error("Unable to adapt diagram language"))}finally{E||zt(!1)}})(),()=>{E=!0}},[je,kr,fh,Bl,dr]),y.useCallback(E=>{Ge(E)},[]);const _m=y.useCallback(E=>{const I=E.metrics||{parallelBranches:0,errorHandlers:0},M=E.complexity,z=[],F=[],B=[];return M==="basic"?(z.push("Simple and easy to understand"),z.push("Fast to implement and maintain"),z.push("Low complexity reduces errors"),F.push("Limited flexibility for complex scenarios"),F.push("No error handling or recovery paths"),F.push("Cannot model parallel or conditional flows"),B.push("Simple, linear processes"),B.push("Quick prototyping"),B.push("Training and documentation")):M==="intermediate"?(z.push("Balanced complexity and clarity"),z.push("Includes decision points and parallel flows"),z.push("Human and system interaction points"),I.errorHandlers>0&&z.push("Basic error handling included"),I.parallelBranches>0&&z.push("Optimized for efficiency"),F.push("May lack advanced error recovery"),F.push("Limited compliance checkpoints"),B.push("Standard business processes"),B.push("Process optimization"),B.push("Team collaboration workflows")):M==="advanced"&&(z.push("Comprehensive error handling and recovery"),z.push("Multiple execution paths"),z.push("Compliance and audit ready"),z.push("External system integration"),I.errorHandlers>1&&z.push("Robust error recovery mechanisms"),I.parallelBranches>2&&z.push("Highly optimized parallel execution"),F.push("Higher implementation complexity"),F.push("Requires more maintenance"),F.push("Steeper learning curve"),B.push("Enterprise-grade processes"),B.push("Compliance-critical workflows"),B.push("Complex multi-system integrations"),B.push("High-availability systems")),{strengths:z,weaknesses:F,useCases:B}},[]),Fl=y.useMemo(()=>{var I;if(!P.length)return null;const E=P.map(M=>{let z=0;const F=M.metrics||{taskCount:0,decisionPoints:0,parallelBranches:0,errorHandlers:0,estimatedPaths:1};return M.complexity==="intermediate"?z+=15:M.complexity==="basic"?z+=8:z+=5,F.taskCount>=3&&F.taskCount<=12?z+=8:F.taskCount>12&&F.taskCount<=20?z+=5:F.taskCount>0&&(z+=2),F.decisionPoints>=1&&F.decisionPoints<=3?z+=8:F.decisionPoints>3&&(z+=4),F.parallelBranches>0&&F.parallelBranches<=2?z+=6:F.parallelBranches>2&&(z+=3),F.errorHandlers>0&&(z+=5),F.errorHandlers>1&&(z+=2),F.estimatedPaths>=2&&F.estimatedPaths<=5?z+=4:F.estimatedPaths>5&&(z+=2),F.taskCount>25&&(z-=5),F.taskCount<2&&(z-=3),{model:M,score:z}});return E.sort((M,z)=>z.score-M.score),((I=E[0])==null?void 0:I.model)||P[0]},[P]),qe=y.useMemo(()=>{if(!P.length)return null;if(de){const E=P.find(I=>I.id===de);if(E)return E}return P[0]},[P,de]),Qr=y.useCallback(async()=>{if(a.current)try{const E=await a.current.saveXML({format:!0});if(E.xml)return E.xml}catch(E){console.error("Failed to capture current XML snapshot:",E)}return e},[e]),uo=y.useCallback(async()=>{if(f){N(!0);try{const{data:E,error:I}=await oe.from("user_profiles").select("user_id,email,created_at,last_login");if(I)throw I;const{data:M,error:z}=await oe.from("user_roles").select("user_id, role");if(z)throw z;const F=new Map;(M??[]).forEach(({user_id:Q,role:he})=>{const ge=F.get(Q)??[];F.set(Q,[...ge,he])});const B=(E??[]).map(({user_id:Q,email:he,created_at:ge,last_login:Ot})=>({userId:Q,email:he,roles:F.get(Q)??["user"],createdAt:ge,lastLogin:Ot}));j(B)}catch(E){console.error("Failed to load collaborators:",E),$.error("Unable to load collaborators right now")}finally{N(!1)}}},[f]),st=y.useCallback(E=>{yn.current=[...yn.current,E],Ct(yn.current.slice(-50))},[]),Dt=y.useCallback(async E=>{if(!(!d||yn.current.length===0))try{const I=await Qr(),{error:M}=await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"log",input_description:`system-use:${X??"unknown"}:${Date.now()}`,generated_bpmn_xml:I,alternative_models:JSON.parse(JSON.stringify([{events:yn.current,source:"system-tracking",capturedAt:new Date().toISOString()}]))});if(M)throw M;yn.current=[],Ct([]),E!=null&&E.silent||$.success("System usage log saved")}catch(I){console.error("Failed to persist system activities:",I),E!=null&&E.silent||$.error("Could not save system activity log")}},[d,X,Qr]),un=y.useCallback(()=>{var M;Lr.current&&Lr.current();const E=vI(((M=document.body)==null?void 0:M.innerText)??"");st({id:yI(),type:"visit",timestamp:new Date().toISOString(),details:{url:window.location.href,title:document.title,contentPreview:E,referrer:document.referrer||void 0}});const I=z=>{var B;const F=z.target;F&&st({id:yI(),type:"click",timestamp:new Date().toISOString(),details:{url:window.location.href,text:((B=F.innerText)==null?void 0:B.trim().slice(0,120))||void 0,tag:F.tagName.toLowerCase(),xpath:tRe(F),contentPreview:vI(F.textContent)}})};document.addEventListener("click",I,!0),Lr.current=()=>{document.removeEventListener("click",I,!0)}},[st]),hi=y.useCallback(async E=>{Lr.current&&(Lr.current(),Lr.current=null),await Dt(E),tr(!1)},[Dt]),fi=y.useCallback(E=>{if(!f){$.error("Only Process Managers can change editing lock");return}x(E),X&&localStorage.setItem(`bpmn-lock:${X}`,E?"locked":"unlocked"),$.success(E?"Collaborators are now in view-only mode":"Collaborators can edit this diagram")},[X,f]),Ua=y.useCallback(async E=>{if(f){if(E===(d==null?void 0:d.id)){$.info("You already have Process Manager rights.");return}try{const{error:I}=await oe.from("user_roles").insert({user_id:E,role:"admin"});if(I){if(I.code==="23505"){$.info("User already has Process Manager rights.");return}throw I}$.success("Process Manager access granted"),uo()}catch(I){console.error("Failed to grant access:",I),$.error("Unable to grant access")}}},[d==null?void 0:d.id,f,uo]),ps=y.useCallback(async E=>{if(f){if(E===(d==null?void 0:d.id)){$.error("You cannot remove your own Process Manager rights.");return}try{const{error:I}=await oe.from("user_roles").delete().match({user_id:E,role:"admin"});if(I)throw I;$.success("Process Manager access revoked"),uo()}catch(I){console.error("Failed to revoke access:",I),$.error("Unable to revoke access")}}},[d==null?void 0:d.id,f,uo]),Br=y.useCallback(async()=>{se(!0);try{let E=oe.from("bpmn_generations").select("id, created_at, input_description, input_type, alternative_models, generated_bpmn_xml, user_id").order("created_at",{ascending:!1}).limit(f?25:10);!f&&d&&(E=E.eq("user_id",d.id));const{data:I,error:M}=await E;if(M)throw M;St(I??[])}catch(E){console.error("Failed to load log history:",E),$.error("Unable to load BPMN history right now")}finally{se(!1)}},[d,f]),ei=y.useCallback(async(E=!1)=>{var I;if(!d){$.error("Please sign in to open Modelling Agent Mode");return}D(null),A(!0),k([]),Se(null),Jr(null),br(!1);try{const M=await Qr(),z=X??await Mw(M);if(X||ne(z),!E&&!Pe.current){const{data:J,error:Ie}=await oe.from("bpmn_generations").select("id, alternative_models, created_at").eq("user_id",d.id).eq("input_description",`modelling-agent:${z}`).not("alternative_models","is",null).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(Ie&&Ie.code!=="PGRST116"&&console.warn("Error checking cache:",Ie),J!=null&&J.alternative_models){const Ke=J.alternative_models;if(Array.isArray(Ke)&&Ke.length>0){console.log(`[Cache] Found ${Ke.length} cached alternatives`),k(Ke),Pe.current=!0,A(!1);return}}}const B=(J=>{const Ie=Yh.filter(bt=>bt.complexity==="basic"),Ke=Yh.filter(bt=>bt.complexity==="intermediate"),Kt=Yh.filter(bt=>bt.complexity==="advanced"),an=[];if(J===3)Ie.length>0&&an.push(Ie[0]),Ke.length>0&&an.push(Ke[0]),Kt.length>0&&an.push(Kt[0]);else if(J===5){Ie.length>0&&an.push(Ie[0]);for(let bt=0;bt<Math.min(2,Ke.length);bt++)an.push(Ke[bt]);for(let bt=0;bt<Math.min(2,Kt.length);bt++)an.push(Kt[bt])}else if(J===7){Ie.length>0&&an.push(Ie[0]);for(let bt=0;bt<Math.min(3,Ke.length);bt++)an.push(Ke[bt]);for(let bt=0;bt<Math.min(3,Kt.length);bt++)an.push(Kt[bt])}if(an.length<J){const bt=new Set(an.map(ti=>ti.id)),gi=Yh.filter(ti=>!bt.has(ti.id));an.push(...gi.slice(0,J-an.length))}return an.slice(0,J)})(Z);if(!B.length)throw new Error("No variant definitions available for generation.");const Q=B.length;G({completed:0,total:Q,current:void 0});const he=new Map;B.forEach(J=>{he.set(J.id,"queued")}),K(he);const ge=[];let Ot=0;const Rt=async(J,Ie)=>{var bt,gi,ti,gs;const Ke=Date.now();let Kt,an=0;try{K(Pn=>{const sn=new Map(Pn);return sn.set(J.id,"generating"),sn}),G({completed:Ot,total:Q,current:J.title});const Nn=n==="pid"?J.instructions.pid:J.instructions.bpmn,Di={basic:{maxElements:12,maxTasks:6,maxBranches:0,maxDecisionPoints:0,maxSubprocesses:0,maxDepth:1,description:"Minimal, straight-line flow with only essential activities"},intermediate:{maxElements:25,maxTasks:12,maxBranches:2,maxDecisionPoints:1,maxSubprocesses:1,maxDepth:2,description:"Balanced with some parallelism and decision points"},advanced:{maxElements:45,maxTasks:20,maxBranches:4,maxDecisionPoints:3,maxSubprocesses:2,maxDepth:3,description:"Complex with error handling, parallel flows, and subprocesses"}},Fr=Di[J.complexity]||Di.intermediate,zr=((Pn,sn)=>Pn.complexity==="basic"?`
CRITICAL: Generate a BEGINNER-LEVEL BPMN diagram - SIMPLE, LINEAR SEQUENCE ONLY.

MODE: BEGINNER
The complexity of the diagram must align with Beginner mode:
- Use ONLY basic tasks and events in a linear sequence
- AVOID branches, parallel flows, or advanced notations

MANDATORY STRUCTURE FOR BEGINNER TIER:
1. Start Event  Basic Task 1  Basic Task 2  Basic Task 3  ...  End Event
2. Use only simple <task> or <userTask> elements (no serviceTask, no manualTask)
3. Use only <startEvent> and <endEvent> (no intermediate events)
4. NO gateways (no XOR, AND, OR, or Inclusive gateways)
5. NO parallel branches
6. NO decision points
7. NO subprocesses
8. NO loops or backflows
9. NO pools or lanes
10. NO boundary events
11. NO BPMN artifacts (data objects, annotations, groups)
12. Simple linear sequence only
13. Maximum ${Fr.maxTasks} tasks total
14. Each task flows directly to the next task

EXAMPLE STRUCTURE:
<startEvent>  <task name="Task 1">  <task name="Task 2">  <task name="Task 3">  <endEvent>

DO NOT include:
- Any gateways (exclusiveGateway, parallelGateway, inclusiveGateway, eventBasedGateway)
- Any subprocesses (subProcess, callActivity)
- Any boundary events (boundaryEvent)
- Any intermediate events (intermediateCatchEvent, intermediateThrowEvent)
- Any loops or cycles
- Any pools or lanes
- Any BPMN artifacts (dataObject, dataStore, annotation, group)
- Any advanced notations

Generate ONLY a simple, linear sequential flow with basic tasks and events.`:Pn.complexity==="intermediate"?Pn.id==="automation-lean"?`
AUTOMATION LEAN: Transform repetitive/high-volume tasks into automated service tasks.

CRITICAL TRANSFORMATION:
- Identify repetitive, routine, or high-volume tasks in the process
- Convert these tasks to <serviceTask> elements (automated system tasks)
- Add system integrations: name service tasks with integration context (e.g., "Automated Data Validation", "System Notification", "Auto-Process Payment")
- Include automated escalations: use intermediate events or boundary events for automated error handling
- Keep userTask only for tasks requiring human judgment or approval
- Use 1-2 exclusiveGateway for decision points (automated routing)
- Include 1+ serviceTask for each repetitive task pattern identified
- 8-12 tasks total (mix of userTask and serviceTask)
- 2-3 execution paths

STRUCTURE: startEvent  [automated service tasks]  [decision gateways]  [user tasks for approvals]  endEvent
Focus on automation: maximize serviceTask usage for repetitive work.`:Pn.id==="human-centric"?`
HUMAN-CENTRIC COLLABORATION: Emphasize manual approvals and team coordination.

REQUIREMENTS:
- 2+ swimlanes (pools or lanes) representing different roles/departments
- Multiple userTask elements for manual work
- 1-2 exclusiveGateway for approval decisions
- Review loops: show tasks that require human review/approval before continuing
- Include intermediate events for notifications/handoffs between people
- 1 subprocess OR 1 intermediate event (message/timer/signal) for coordination
- 8-12 tasks total (mostly userTask)
- 2-3 execution paths showing different approval outcomes

STRUCTURE: startEvent  [swimlanes with user tasks]  [approval gateways]  [review loops]  endEvent
Focus on human collaboration: show handoffs, approvals, and coordination.`:Pn.id==="parallel-efficiency"?`
PARALLEL EFFICIENCY: Maximize concurrent execution of independent activities.

REQUIREMENTS:
- 1-2 parallelGateway pairs (AND split + AND join) for concurrent flows
- Identify tasks that can run simultaneously (no dependencies)
- Group independent tasks into parallel branches
- Use exclusiveGateway for decisions (1-2 decision points)
- Mix of userTask and serviceTask
- 1 subprocess OR 1 intermediate event for coordination
- 8-12 tasks total
- 2-3 parallel branches with 2-4 tasks each

STRUCTURE: startEvent  [parallelGateway split]  [concurrent branches]  [parallelGateway join]  endEvent
Focus on parallelism: maximize tasks running simultaneously.`:`
INTERMEDIATE BPMN: Include structure with decisions and parallel flows.

REQUIREMENTS:
- 1-2 exclusiveGateway (decision points) with 2-3 paths each
- 1 parallelGateway (AND) OR 1 subProcess
- Mix of userTask (human) and serviceTask (system)
- 1 subprocess OR 1 intermediate event (message/timer/signal)
- 8-12 tasks total
- 2-3 execution paths

STRUCTURE: startEvent  [gateways/subprocesses]  endEvent with decision branches and optional parallel flows.`:Pn.complexity==="advanced"?`
ADVANCED BPMN: Complex structure with error handling, compliance, and integration.

REQUIREMENTS:
- 2-3 gateways (XOR/Inclusive/Event-based) creating multiple paths
- 2-4 parallelGateway pairs (split + join)
- 1-2 subProcess elements
- 1+ boundaryEvent (error/escalation/timer) attached to task/subprocess
- 1+ recovery path (compensation/rollback/retry)
- 1+ compliance checkpoint (task/subprocess with "Compliance"/"Audit"/"Validation" in name)
- 1+ serviceTask for external system integration
- 2+ pools OR 2+ lanes
- 2+ BPMN artifacts (dataObject/dataStore/annotation/group)
- 15-20 tasks total
- 4+ execution paths

STRUCTURE: Complex routing with gateways, parallel flows, error handling, compliance checkpoints, and external integrations.`:"")(J,Nn),ys=J.complexity==="basic"?"BASIC: Simple sequential flow only. NO gateways, NO subprocesses, NO branching.":J.complexity==="intermediate"?"INTERMEDIATE: Must include 1+ gateway OR 1+ subprocess. Show structure and organization.":"ADVANCED: Must include 2-3 gateways, 2-4 parallel branches, 1-2 subprocesses, error handling, 4+ paths.",xs=eRe(fa||"",je);Kt=`VARIANT: ${J.title} (${J.complexity.toUpperCase()})
Description: ${J.description}

Process: ${fa}

${zr}

Constraints: Max ${Fr.maxElements} elements, ${Fr.maxTasks} tasks, ${Fr.maxBranches} branches, ${Fr.maxDecisionPoints} decisions, ${Fr.maxSubprocesses} subprocesses.

${ys}

${xs}

Generate valid BPMN 2.0 XML matching the ${J.complexity.toUpperCase()} tier. Include mandatory structures. Return ONLY XML, no markdown.

Seed: ${Date.now()}-${Math.random().toString(36).substring(7)}`,an=Kt.length;const Wa=zr.length,nk=(fa==null?void 0:fa.length)||0;console.group(`[Modelling Agent] Generating variant: ${J.title} (${J.complexity})`),console.log("Variant Details:",{id:J.id,title:J.title,complexity:J.complexity,description:J.description,index:Ie}),console.log("Prompt Metrics:",{totalLength:an,variantSpecificLength:Wa,processSummaryLength:nk,baseInstructionsLength:Nn.length,estimatedTokens:Math.ceil(an/4)}),console.log("Constraints:",Fr),console.log("Prompt Structure:",{hasVariantSpecific:Wa>0,hasProcessSummary:nk>0,hasBaseInstructions:Nn.length>0}),console.log(`Generating ${J.title} with skipCache=true, modelingAgentMode=true`);const fH=J.id==="automation-lean",h0=J.complexity==="advanced"?12e4:J.complexity==="intermediate"?fH?105e3:9e4:45e3,pH=Date.now(),{data:Ln,error:vi}=await sRe("generate-bpmn",{body:{prompt:Kt,diagramType:n,skipCache:!0,modelingAgentMode:!0}},h0),f0=Date.now()-pH;if(console.log("API Response:",{duration:`${f0}ms`,hasError:!!vi,hasData:!!Ln,hasBpmnXml:!!(Ln!=null&&Ln.bpmnXml),errorMessage:vi==null?void 0:vi.message,responseKeys:Ln?Object.keys(Ln):[]}),vi){console.error(`[Modelling Agent] API Error for ${J.title}:`,{error:vi.message,stack:vi instanceof Error?vi.stack:void 0,duration:`${f0}ms`,timeout:`${h0}ms`,isTimeout:(bt=vi.message)==null?void 0:bt.includes("timed out")});let Pn=vi.message;throw(gi=vi.message)!=null&&gi.includes("timed out")?Pn=`Request timed out after ${h0/1e3}s. ${J.complexity==="advanced"?"Advanced variants require more processing time. ":J.complexity==="intermediate"?"Intermediate variants may need additional time. ":""}Please try generating alternatives again, or generate them individually.`:(ti=vi.message)!=null&&ti.includes("rate limit")?Pn="API rate limit exceeded. Please wait a moment and try again. Generating multiple variants in parallel may hit rate limits.":(gs=vi.message)!=null&&gs.includes("429")&&(Pn="Too many requests. Please wait a moment and try again. Consider generating variants one at a time."),new Error(Pn)}if(!(Ln!=null&&Ln.bpmnXml))throw console.error(`[Modelling Agent] No BPMN XML returned for ${J.title}:`,{data:Ln,duration:`${f0}ms`,hasData:!!Ln,dataKeys:Ln?Object.keys(Ln):[]}),new Error(`No BPMN XML returned for ${J.title}. The AI model may not have generated valid output.`);const rk=Ln.bpmnXml.length;console.log("BPMN XML Received:",{length:rk,estimatedTokens:Math.ceil(rk/4),startsWithXml:Ln.bpmnXml.trim().startsWith("<?xml"),containsDefinitions:Ln.bpmnXml.includes("<bpmn:definitions")||Ln.bpmnXml.includes("<definitions")});const _h=Jz(Ln.bpmnXml),yi=nRe(Ln.bpmnXml),ik=J.complexity,Gl=[],Li=[],ak=J.complexity==="advanced"?60:J.complexity==="intermediate"?50:45;_h.elementCount>ak&&Li.push(`High element count (${_h.elementCount} > ${ak}) - may affect rendering performance`);try{const sn=new DOMParser().parseFromString(Ln.bpmnXml,"application/xml");sn.getElementsByTagName("parsererror").length>0&&Gl.push("Invalid XML structure"),sn.querySelectorAll("sequenceFlow").forEach((v0,sk)=>{const xH=v0.getAttribute("sourceRef"),bH=v0.getAttribute("targetRef");(!xH||!bH)&&Gl.push(`Flow ${sk} missing sourceRef or targetRef`)});const jh=sn.querySelectorAll("exclusiveGateway, parallelGateway, inclusiveGateway, eventBasedGateway"),Fm=sn.querySelectorAll("subProcess, callActivity"),gH=sn.querySelectorAll("boundaryEvent"),hIe=sn.querySelectorAll("parallelGateway"),fIe=sn.querySelectorAll("userTask"),vH=sn.querySelectorAll("serviceTask"),yH=sn.querySelectorAll("intermediateCatchEvent, intermediateThrowEvent"),p0=sn.querySelectorAll("participant"),m0=sn.querySelectorAll("lane"),pIe=sn.querySelectorAll("dataObject, dataObjectReference"),mIe=sn.querySelectorAll("textAnnotation"),gIe=sn.querySelectorAll("group"),g0=sn.querySelectorAll("dataObject, dataObjectReference, textAnnotation, group");J.complexity==="basic"?(jh.length>0&&Li.push(`BEGINNER tier should have no gateways, but found ${jh.length}`),Fm.length>0&&Li.push(`BEGINNER tier should have no subprocesses, but found ${Fm.length}`),yi.decisionPoints>0&&Li.push(`BEGINNER tier should have no decision points, but found ${yi.decisionPoints}`),(p0.length>1||m0.length>0)&&Li.push(`BEGINNER tier should have no pools/lanes, but found ${p0.length} pools and ${m0.length} lanes`),g0.length>0&&Li.push(`BEGINNER tier should have no BPMN artifacts, but found ${g0.length}`)):J.complexity==="intermediate"?jh.length===0&&Fm.length===0&&yH.length===0&&yi.parallelBranches===0&&Li.push("INTERMEDIATE tier should have at least 1 gateway, subprocess, intermediate event, or parallel branch"):J.complexity==="advanced"&&(jh.length>=1||Fm.length>=1||yi.parallelBranches>=1||Li.push("ADVANCED tier should have at least 1 gateway, subprocess, or parallel branch"),!(gH.length>0||g0.length>0||vH.length>0||p0.length>1||m0.length>1)&&jh.length<2&&Li.push("ADVANCED tier should include advanced features (error handling, artifacts, integration, or multiple pools/lanes)"))}catch{Gl.push("XML parsing failed")}console.log("Validation Results:",{errors:Gl.length,warnings:Li.length,elementCount:_h.elementCount,complexity:_h.complexity,metrics:{taskCount:yi.taskCount,decisionPoints:yi.decisionPoints,parallelBranches:yi.parallelBranches,errorHandlers:yi.errorHandlers,estimatedPaths:yi.estimatedPaths}}),Gl.length>0&&console.error(`[Modelling Agent] Validation errors for ${J.title}:`,Gl),Li.length>0&&(console.warn(`[Modelling Agent] Validation warnings for ${J.title}:`,Li),console.warn(`Generated structure: ${yi.decisionPoints} decision points, ${yi.parallelBranches} parallel branches, ${yi.taskCount} tasks`)),console.log(`[Model Generation] ${J.title}: Variant complexity="${J.complexity}", Assigned complexity="${ik}", Calculated complexity="${_h.complexity}"`);const mH=Date.now()-Ke;console.log(`[Modelling Agent] Successfully generated ${J.title} in ${mH}ms`),console.groupEnd();const Bm={id:`${J.id}-${Date.now()}-${Ie}`,title:J.title,description:J.description,complexity:ik,xml:Ln.bpmnXml,generatedAt:new Date().toISOString(),metrics:yi};return ge.push(Bm),Ot++,K(Pn=>{const sn=new Map(Pn);return sn.set(J.id,"completed"),sn}),k([...ge]),G({completed:Ot,total:Q,current:void 0}),de||Se(Bm.id),(async()=>{try{const Pn=[...ge,Bm],{data:sn}=await oe.from("bpmn_generations").select("id").eq("user_id",d.id).eq("input_description",`modelling-agent:${z}`).order("created_at",{ascending:!1}).limit(1).maybeSingle();sn!=null&&sn.id?await oe.from("bpmn_generations").update({alternative_models:JSON.parse(JSON.stringify(Pn)),updated_at:new Date().toISOString()}).eq("id",sn.id):await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"text",input_description:`modelling-agent:${z}`,generated_bpmn_xml:M,alternative_models:JSON.parse(JSON.stringify(Pn))}),console.log(`[Cache] Incrementally cached ${Pn.length} alternatives`)}catch(Pn){console.warn("Failed to cache alternatives incrementally:",Pn)}})(),Bm}catch(Nn){Ot++;const Di=Date.now()-Ke;return console.error(`[Modelling Agent] Failed to generate alternative "${J.title}":`,{variant:{id:J.id,title:J.title,complexity:J.complexity},error:{message:Nn instanceof Error?Nn.message:String(Nn),stack:Nn instanceof Error?Nn.stack:void 0,name:Nn instanceof Error?Nn.name:"Unknown"},duration:`${Di}ms`,promptLength:an,timestamp:new Date().toISOString()}),K(Fr=>{const vs=new Map(Fr);return vs.set(J.id,"failed"),vs}),G({completed:Ot,total:Q,current:void 0}),console.groupEnd(),(Ot===Q||Nn instanceof Error&&Nn.message.includes("rate limit"))&&$.error(`Could not generate: ${J.title}`,{description:Nn instanceof Error?Nn.message:"An unknown error occurred. The AI model might be overloaded or the request may have timed out."}),null}},dt=B.map((J,Ie)=>Rt(J,Ie));if(console.log(`[Modelling Agent] Starting parallel generation of ${Q} variants`),console.log("[Modelling Agent] All variants will start generating simultaneously:",B.map(J=>`${J.title} (${J.complexity})`).join(", ")),(await Promise.allSettled(dt)).forEach((J,Ie)=>{const Ke=B[Ie];J.status==="rejected"?console.error(`[Parallel Processing] Variant ${Ke.title} (${Ke.complexity}) failed:`,J.reason):J.status==="fulfilled"&&J.value?console.log(`[Parallel Processing] Variant ${Ke.title} (${Ke.complexity}) succeeded`):J.status==="fulfilled"&&!J.value&&console.warn(`[Parallel Processing] Variant ${Ke.title} (${Ke.complexity}) returned null (failed silently)`)}),console.log(`[Modelling Agent] Generation complete: ${ge.length} successful, ${Q-ge.length} failed`),ge.length<Q){const J=B.filter(Ie=>!ge.find(Ke=>Ke.title===Ie.title));console.warn("[Modelling Agent] Failed variants:",J.map(Ie=>Ie.title))}if(G({completed:Q,total:Q}),console.log(`[Modelling Agent] Final results: ${ge.length} successful out of ${Q} total variants`),ge.length<Q){const J=Q-ge.length,Ie=B.filter(Ke=>!ge.find(Kt=>Kt.title===Ke.title));console.warn(`[Modelling Agent] ${J} variants failed:`,Ie.map(Ke=>`${Ke.title} (${Ke.complexity})`)),ge.length>0&&$.warning(`${ge.length} of ${Q} variants generated`,{description:J>0?`${J} variants failed to generate. Check console for details.`:void 0,duration:5e3})}if(!ge.length){const Ie=`No alternative diagrams were produced. ${Q-ge.length} of ${Q} generations failed. Check the browser console for detailed error messages.`;throw console.error(`[Modelling Agent] ${Ie}`),new Error(Ie)}k(ge),Se(((I=ge[0])==null?void 0:I.id)??null),Pe.current=!0,console.log(`[Modelling Agent] Successfully generated ${ge.length} variants:`,ge.map(J=>J.title));try{const{data:J}=await oe.from("bpmn_generations").select("id").eq("user_id",d.id).eq("input_description",`modelling-agent:${z}`).order("created_at",{ascending:!1}).limit(1).maybeSingle();J!=null&&J.id?await oe.from("bpmn_generations").update({alternative_models:JSON.parse(JSON.stringify(ge)),updated_at:new Date().toISOString()}).eq("id",J.id):await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"text",input_description:`modelling-agent:${z}`,generated_bpmn_xml:M,alternative_models:JSON.parse(JSON.stringify(ge))}),console.log(`[Cache] Successfully cached ${ge.length} alternatives`)}catch(J){console.error("Failed to cache alternatives:",J)}}catch(M){console.error("Failed to prepare alternative models:",M),D(M instanceof Error?M.message:"An unexpected error occurred while preparing alternatives.")}finally{A(!1),G({completed:0,total:0})}},[d,X,n,fa,Qr,Z,lo]),RU=y.useCallback(E=>{let I=E;return I=I.replace(/bpmns:/gi,"bpmn:"),I=I.replace(/bpmndi\:BPMNShape/gi,"bpmndi:BPMNShape"),I=I.replace(/bpmndi\:BPMNEdge/gi,"bpmndi:BPMNEdge"),I=I.replace(/<(\s*)di:waypoint\s+([^>]*?)>/gi,(M,z,F)=>M.trim().endsWith("/>")?M:`<${z}di:waypoint ${F}/>`),I=I.replace(/<(\s*)di:waypoint\s*>/gi,"<$1di:waypoint/>"),I=I.replace(/<\s*bpmn:flowNodeRef[^>]*>[\s\S]*?<\/\s*bpmn:flowNodeRef\s*>/gi,""),I=I.replace(/<\s*bpmns:flowNodeRef[^>]*>[\s\S]*?<\/\s*bpmns:flowNodeRef\s*>/gi,""),I=I.replace(/<\/\s*bpmn:flowNodeRef\s*>/gi,""),I=I.replace(/<\/\s*bpmns:flowNodeRef\s*>/gi,""),I=I.replace(/<\s*bpmn:flowNodeRef[^>]*\/?\s*>/gi,""),I=I.replace(/<\s*bpmns:flowNodeRef[^>]*\/?\s*>/gi,""),I=I.replace(/<\s*\/\?xml/gi,"<?xml"),I=I.replace(/&(?!(?:amp|lt|gt|quot|apos|#\d+|#x[0-9a-fA-F]+);)/g,"&amp;"),I=I.replace(/<\/\s*[^>]*:flowNodeRef[^>]*>/gi,""),I.trim()},[]),RP=y.useCallback(async E=>{if(a.current)try{const I=RU(E.xml);Lt(!1),await a.current.importXML(I);const M=a.current.get("canvas");try{const z=M.getViewbox();if(z){const F=z.scale??1,B=z.width??0,Q=z.height??0;isFinite(F)&&isFinite(B)&&isFinite(Q)&&B>0&&Q>0&&F>0&&M.zoom("fit-viewport")}}catch(z){console.warn("Zoom error, continuing:",z)}Lm(z=>[...z,E.xml]),bh(z=>z+1),$.success(`${E.title} applied to the canvas`),r0(!1),dr(),Lt(!0)}catch(I){console.error("Failed to apply alternative model:",I),$.error("Unable to apply this alternative diagram"),Lt(!0)}},[dr]),t0=y.useCallback((E,I="bpmn")=>{const M=new Blob([E.xml],{type:"application/xml"}),z=URL.createObjectURL(M),F=document.createElement("a");F.href=z;const B=E.title.replace(/\s+/g,"_").toLowerCase();F.download=`${B}_${E.complexity}.${I}`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(z)},[]),$U=y.useCallback(async E=>{if(a.current)try{Lt(!1),await a.current.importXML(E.generated_bpmn_xml);const I=a.current.get("canvas");try{const M=I.getViewbox();M&&isFinite(M.scale)&&isFinite(M.width)&&isFinite(M.height)&&M.width>0&&M.height>0&&I.zoom("fit-viewport")}catch(M){console.warn("Zoom error, continuing:",M)}Lm(M=>[...M,E.generated_bpmn_xml]),bh(M=>M+1),$.success("Historical diagram loaded"),Sm(!1),dr(),Lt(!0)}catch(I){console.error("Failed to load historical diagram:",I),$.error("Unable to load this historical snapshot"),Lt(!0)}},[dr]),IU=y.useCallback((E,I)=>{const M=new Blob([E],{type:"application/xml"}),z=URL.createObjectURL(M),F=document.createElement("a");F.href=z,F.download=I.endsWith(".bpmn")?I:`${I}.bpmn`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(z)},[]),[MU,jm]=y.useState(!1),[DU,$P]=y.useState(!1),[n0,Sm]=y.useState(!1),[ph,r0]=y.useState(!1),[LU,BU]=y.useState(!1),[pi,Em]=y.useState(null),[IP,ho]=y.useState(null),[Nm,Ha]=y.useState(!1),[zl,MP]=y.useState(!1),[mh,i0]=y.useState({x:0,y:0}),FU=typeof window<"u"?Math.min(700,window.innerHeight-300):600,[DP,LP]=y.useState({width:280,height:FU}),[zU,UU]=y.useState(""),[xt,Va]=y.useState({quickDraw:!0,startEvents:!0,activities:!0,intermediateEvents:!1,endEvents:!1,gateways:!1,subprocesses:!0,pools:!0,dataObjects:!0,artifacts:!0}),gh=y.useRef({x:0,y:0}),Cr=y.useRef({width:0,height:0,x:0,y:0,clientX:0,clientY:0,edge:"",startLeft:0,startTop:0,startRight:0,startBottom:0}),a0=y.useRef(!1),[HU,BP]=y.useState(!1),nr=y.useRef(null),fo=y.useRef(null),VU=y.useRef({top:0,left:0}),[FP,zP]=y.useState(!0),[Ul,UP]=y.useState(!1),[Pm,GU]=y.useState(!1),[vh,km]=y.useState(!1),[yh,Cm]=y.useState(!0),[Am,WU]=y.useState(!1),[Tm,Om]=y.useState(!1),[Rm,s0]=y.useState(!1),[$m,xh]=y.useState(!1),[Im,Mm]=y.useState(!1),[o0,c0]=y.useState(!1),[HP,qU]=y.useState([]),[wr,KU]=y.useState(null),[VP,YU]=y.useState({x:0,y:0}),[Dm,Ga]=y.useState(!1),[GP,WP]=y.useState(!1),[qP,XU]=y.useState(!1),[po,bh]=y.useState(1),[mo,Lm]=y.useState([e]),[wh,l0]=y.useState(null);y.useEffect(()=>{e&&mo.length===1&&mo[0]!==e&&(Lm([e]),bh(1))},[e]),y.useEffect(()=>{let E=!0;return(async()=>{if(e)try{const M=await Mw(e);if(!E)return;ne(M);const z=localStorage.getItem(`bpmn-lock:${M}`);z==="locked"?x(!0):z==="unlocked"&&x(!1)}catch(M){console.error("Failed to compute diagram fingerprint:",M)}})(),()=>{E=!1}},[e]),y.useEffect(()=>{let E=!0;return(async()=>{try{const{data:{user:M},error:z}=await oe.auth.getUser();if(!E)return;if(z)throw z;if(h(M??null),!M){p(!1);return}const{data:F,error:B}=await oe.from("user_roles").select("role").eq("user_id",M.id);if(B)throw B;const Q=(F==null?void 0:F.some(he=>he.role==="admin"))??!1;p(Q)}catch(M){console.error("Failed to load user/role info:",M),E&&(h(null),p(!1))}})(),()=>{E=!1}},[]),y.useEffect(()=>{g(f||!v)},[f,v]),y.useEffect(()=>{Re.current=m},[m,dr]),y.useEffect(()=>{Pe.current=!1,k([])},[X]),y.useEffect(()=>{P.length?Se(E=>E&&P.some(I=>I.id===E)?E:P[0].id):Se(null)},[P]),y.useEffect(()=>{b&&uo()},[b,uo]),y.useEffect(()=>()=>{Lr.current&&Lr.current(),yn.current.length>0&&Dt({silent:!0})},[Dt]),y.useEffect(()=>{ph&&ei()},[ph,ei]),y.useEffect(()=>{ph||(Jr(null),br(!1))},[ph]),y.useEffect(()=>{n0&&Br()},[Br,n0]),y.useEffect(()=>{if(!ae)return;let E;const I=async()=>{const{data:F,error:B}=await oe.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",ae).single();if(B){console.error("Error checking job status:",B);return}if(F.status==="completed"&&F.bpmn_xml){if(a.current)try{Lt(!1),await a.current.importXML(F.bpmn_xml);const he=a.current.get("canvas");try{const ge=he.getViewbox();ge&&isFinite(ge.scale)&&isFinite(ge.width)&&isFinite(ge.height)&&ge.width>0&&ge.height>0&&he.zoom("fit-viewport")}catch(ge){console.warn("Zoom error, continuing:",ge)}$.success("BPMN diagram generated from your image!",{description:"Process extracted and visualized successfully"}),dr(),Lt(!0)}catch(he){console.error("Failed to import BPMN:",he),$.error("Failed to load generated diagram"),Lt(!0)}const Q=document.getElementById("vision-upload");Q&&(Q.value=""),jm(!1),ho(null),Ha(!1),W(null),E&&clearInterval(E)}else if(F.status==="failed"){const Q=F.error_message||"Processing failed. Please try again.";$.error("Vision AI processing failed",{description:Q});const he=document.getElementById("vision-upload");he&&(he.value=""),Ha(!1),ho(null),W(null),E&&clearInterval(E)}},M=oe.channel(`vision-job-${ae}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${ae}`},F=>{const B=F.new;if(console.log(" Vision job status update:",B.status),B.status==="completed"&&B.bpmn_xml){a.current&&(Lt(!1),a.current.importXML(B.bpmn_xml).then(()=>{const he=a.current.get("canvas");try{const ge=he.getViewbox();ge&&isFinite(ge.scale)&&isFinite(ge.width)&&isFinite(ge.height)&&ge.width>0&&ge.height>0&&he.zoom("fit-viewport")}catch(ge){console.warn("Zoom error, continuing:",ge)}$.success("BPMN diagram generated from your image!",{description:"Process extracted and visualized successfully"}),dr(),Lt(!0)}).catch(he=>{console.error("Failed to import BPMN:",he),$.error("Failed to load generated diagram"),Lt(!0)}));const Q=document.getElementById("vision-upload");Q&&(Q.value=""),jm(!1),ho(null),Ha(!1),W(null),E&&clearInterval(E)}else if(B.status==="failed"){const Q=B.error_message||"Processing failed. Please try again.";$.error("Vision AI processing failed",{description:Q});const he=document.getElementById("vision-upload");he&&(he.value=""),Ha(!1),ho(null),W(null),E&&clearInterval(E)}}).subscribe();E=window.setInterval(I,3e3),I();const z=window.setTimeout(()=>{E&&clearInterval(E),$.error("Processing timed out",{description:"Please try again or contact support"});const F=document.getElementById("vision-upload");F&&(F.value=""),Ha(!1),ho(null),W(null)},3e5);return()=>{clearTimeout(z),oe.removeChannel(M),E&&clearInterval(E)}},[ae,n,dr]),y.useEffect(()=>{if(!i.current||a.current)return;a.current=new Ji({container:i.current,additionalModules:[{__init__:["paletteProvider"],paletteProvider:["value",{getPaletteEntries:()=>({})}]},iOe]}),n==="pid"&&(a.current.get("eventBus").once("canvas.init",()=>{var B;try{const Q=(B=a.current)==null?void 0:B.get("pidRenderer",!1);Q&&(Q.isPidMode=!0)}catch{}}),setTimeout(()=>{var B;try{const Q=(B=a.current)==null?void 0:B.get("pidRenderer",!1);Q&&(Q.isPidMode=!0)}catch{}},50));const E=a.current.get("eventBus");E.on("commandStack.changed",()=>{var B;const F=(B=a.current)==null?void 0:B.get("commandStack");F&&(c(F.canUndo()),u(F.canRedo()))});const I=F=>{if(a.current)try{const B=a.current.get("modeling"),he=a.current.get("elementRegistry").get(F);if(he)if(typeof B.toggleCollapse=="function")B.toggleCollapse(he);else{const ge=he.businessObject,Ot=ge==null?void 0:ge.di,Rt=(Ot==null?void 0:Ot.isExpanded)!==!1;B.updateProperties(he,{isExpanded:!Rt})}}catch(B){console.error("Error toggling subprocess expansion:",B)}},M=F=>{const B=F.target;if(!B||!a.current)return;if(B.tagName==="circle"||B.tagName==="path"||B.classList.contains("djs-collapse-marker")||B.classList.contains("djs-expand-marker")||B.closest(".djs-collapse-marker")||B.closest(".djs-expand-marker")){const he=a.current.get("elementRegistry"),ge=a.current.get("canvas"),Ot=he.filter(Rt=>Rt.type==="bpmn:SubProcess");for(const Rt of Ot)if(Rt.id){const dt=ge.getGraphics(Rt);if(dt){const ze=dt.getBoundingClientRect(),J=F.clientX,Ie=F.clientY,Ke=J>=ze.left&&J<=ze.right&&Ie>=ze.bottom-30&&Ie<=ze.bottom+10;if(dt.contains(B)||Ke){I(Rt.id),F.stopPropagation(),F.preventDefault();return}}}}},z=i.current;return z&&z.addEventListener("click",M,!0),E.on("element.click",F=>{var Ot,Rt,dt,ze,J;const{element:B,originalEvent:Q,gfx:he}=F;if(B.type==="bpmn:SubProcess"&&B.id&&a.current)try{const Ie=a.current.get("canvas");if(he){const Ke=he,Kt=Q.target,an=Kt&&(Kt.tagName==="circle"||Kt.tagName==="path"||((Ot=Kt.classList)==null?void 0:Ot.contains("djs-collapse-marker"))||((Rt=Kt.classList)==null?void 0:Rt.contains("djs-expand-marker"))||((dt=Kt.closest)==null?void 0:dt.call(Kt,".djs-collapse-marker"))||((ze=Kt.closest)==null?void 0:ze.call(Kt,".djs-expand-marker"))),bt=Ke.getBoundingClientRect(),gi=Q.clientX,ti=Q.clientY,gs=gi>=bt.left&&gi<=bt.right&&ti>=bt.bottom-40&&ti<=bt.bottom+10&&gi>=bt.left+bt.width*.4&&gi<=bt.right-bt.width*.4;if(an||gs){I(B.id),Q.stopPropagation(),Q.preventDefault();return}}}catch(Ie){console.error("Error handling subprocess click:",Ie)}if(!Re.current){Ga(!1);return}if(B.type==="bpmn:Process"||B.waypoints){Ga(!1);return}const ge=(J=i.current)==null?void 0:J.getBoundingClientRect();ge&&(YU({x:Q.clientX-ge.left,y:Q.clientY-ge.top}),KU(B),Ga(!0))}),E.on("element.dblclick",F=>{const{element:B}=F;B.type==="bpmn:SubProcess"&&B.id&&I(B.id)}),E.on("interactionEvents.create",F=>{}),E.on("marker.click",F=>{const{element:B}=F;B.type==="bpmn:SubProcess"&&B.id&&I(B.id)}),E.on("shape.click",F=>{const{element:B,originalEvent:Q}=F;if(B.type==="bpmn:SubProcess"&&B.id&&Q){const he=Q.target;he&&(he.classList.contains("djs-collapse-marker")||he.closest(".djs-collapse-marker")||he.classList.contains("djs-expand-marker")||he.closest(".djs-expand-marker"))&&(I(B.id),Q.stopPropagation(),Q.preventDefault())}}),()=>{z&&z.removeEventListener("click",M,!0),a.current&&(a.current.destroy(),a.current=null)}},[]);const ZU=E=>{if(n!=="pid")return E;let I=E;I.includes('xmlns:pid="http://pid.extensions/schema"')||(I=I.replace(/(<bpmn:definitions[^>]*>)/,`$1
  xmlns:pid="http://pid.extensions/schema"`));const M=(z,F)=>{const B=(z||"").toLowerCase();let Q="",he="",ge="";return F.includes("task")||F.includes("Task")?B.includes("tank")||B.includes("vessel")||B.includes("drum")?(Q="equipment",he="tank",ge="mechanical"):B.includes("pump")?(Q="equipment",he="pump",ge="mechanical"):B.includes("filter")?(Q="equipment",he="filter",ge="mechanical"):B.includes("exchanger")||B.includes("heater")||B.includes("cooler")?(Q="equipment",he="heat_exchanger",ge="mechanical"):(Q="equipment",he="tank",ge="mechanical"):F.includes("exclusiveGateway")||F.includes("Gateway")?B.includes("valve")?(Q="valve",he=B.includes("control")?"valve_control":"valve_gate",ge="mechanical"):(Q="valve",he="valve_control",ge="mechanical"):F.includes("dataObjectReference")||F.includes("DataObject")?B.includes("analyzer")?(Q="instrument",he="analyzer",ge="control"):B.includes("transmitter")||B.includes("transducer")?(Q="instrument",B.includes("level")?he="transmitter_level":B.includes("flow")?he="transmitter_flow":B.includes("pressure")?he="transmitter_pressure":he="transmitter_level",ge="control"):(Q="instrument",he="transmitter_level",ge="control"):F.includes("subProcess")||F.includes("SubProcess")?(B.includes("controller"),Q="controller",he="controller_pid",ge="control"):F.includes("sequenceFlow")||F.includes("SequenceFlow")?(Q="line",ge="process"):(F.includes("messageFlow")||F.includes("MessageFlow"))&&(Q="line",ge="signal"),Q&&he&&ge?` pid:type="${Q}" pid:symbol="${he}" pid:category="${ge}"`:""};return I=I.replace(/(<bpmn:task[^>]*name="([^"]*)")([^>]*>)/g,(z,F,B,Q)=>{if(z.includes("pid:type"))return z;const he=M(B,"task");return F+he+Q}),I=I.replace(/(<bpmn:exclusiveGateway[^>]*name="([^"]*)")([^>]*>)/g,(z,F,B,Q)=>{if(z.includes("pid:type"))return z;const he=M(B,"exclusiveGateway");return F+he+Q}),I=I.replace(/(<bpmn:dataObjectReference[^>]*name="([^"]*)")([^>]*>)/g,(z,F,B,Q)=>{if(z.includes("pid:type"))return z;const he=M(B,"dataObjectReference");return F+he+Q}),I=I.replace(/(<bpmn:subProcess[^>]*name="([^"]*)")([^>]*>)/g,(z,F,B,Q)=>{if(z.includes("pid:type"))return z;const he=M(B,"subProcess");return F+he+Q}),I=I.replace(/(<bpmn:sequenceFlow[^>]*)([^/]*>)/g,(z,F,B)=>{if(z.includes("pid:type"))return z;const Q=M("","sequenceFlow");return F+Q+B}),I=I.replace(/(<bpmn:messageFlow[^>]*)([^/]*>)/g,(z,F,B)=>{if(z.includes("pid:type"))return z;const Q=M("","messageFlow");return F+Q+B}),I};y.useEffect(()=>{var M;if(!a.current||!e)return;if(n==="pid")try{const z=(M=a.current)==null?void 0:M.get("pidRenderer",!1);z&&(z.isPidMode=!0)}catch{}const I=ZU(e);Lt(!1),a.current.importXML(I).then(()=>{var F;const z=a.current.get("canvas");try{const B=z.getViewbox();B&&isFinite(B.scale)&&isFinite(B.width)&&isFinite(B.height)&&B.width>0&&B.height>0&&z.zoom("fit-viewport")}catch(B){console.warn("Zoom error, continuing:",B)}if(l0(null),n==="pid"){try{const Rt=(F=a.current)==null?void 0:F.get("pidRenderer",!1);Rt&&(Rt.isPidMode=!0,setTimeout(()=>{try{const dt=a.current.get("elementRegistry"),ze=a.current.get("draw",!1);dt.getAll().forEach(Ie=>{if(ze&&ze.update)try{ze.update(Ie)}catch{}})}catch{}},200))}catch{}const Q=a.current.get("elementRegistry").getAll();let he=0,ge=0;const Ot=(Rt,dt)=>{const ze=(Rt||"").toLowerCase();let J="",Ie="",Ke="";return dt.includes("task")||dt.includes("Task")?ze.includes("tank")||ze.includes("vessel")||ze.includes("drum")?(J="equipment",Ie="tank",Ke="mechanical"):ze.includes("pump")?(J="equipment",Ie="pump",Ke="mechanical"):ze.includes("filter")?(J="equipment",Ie="filter",Ke="mechanical"):ze.includes("exchanger")||ze.includes("heater")||ze.includes("cooler")?(J="equipment",Ie="heat_exchanger",Ke="mechanical"):(J="equipment",Ie="tank",Ke="mechanical"):dt.includes("exclusiveGateway")||dt.includes("Gateway")?(J="valve",Ie=ze.includes("control")?"valve_control":"valve_gate",Ke="mechanical"):dt.includes("dataObjectReference")||dt.includes("DataObject")?(J="instrument",ze.includes("analyzer")?Ie="analyzer":ze.includes("transmitter")||ze.includes("transducer")?ze.includes("level")?Ie="transmitter_level":ze.includes("flow")?Ie="transmitter_flow":ze.includes("pressure")?Ie="transmitter_pressure":Ie="transmitter_level":Ie="transmitter_level",Ke="control"):dt.includes("subProcess")||dt.includes("SubProcess")?(J="controller",Ie="controller_pid",Ke="control"):dt.includes("sequenceFlow")||dt.includes("SequenceFlow")?(J="line",Ke="process"):(dt.includes("messageFlow")||dt.includes("MessageFlow"))&&(J="line",Ke="signal"),{type:J,symbol:Ie,category:Ke}};Q.forEach(Rt=>{const dt=Rt.businessObject;if(!dt)return;if(dt.$attrs||(dt.$attrs={}),Object.keys(dt.$attrs).filter(J=>J.startsWith("pid:")).length>0)he++;else{const J=Ot(dt.name||"",Rt.type||"");J.type&&J.symbol&&J.category&&(dt.$attrs["pid:type"]=J.type,dt.$attrs["pid:symbol"]=J.symbol,dt.$attrs["pid:category"]=J.category,ge++)}}),(ge>0||he>0)&&setTimeout(()=>{try{const Rt=a.current.get("canvas"),dt=I;a.current.importXML(dt).then(()=>{try{const ze=Rt.getViewbox();ze&&isFinite(ze.scale)&&isFinite(ze.width)&&isFinite(ze.height)&&ze.width>0&&ze.height>0&&Rt.zoom("fit-viewport")}catch(ze){console.warn("Zoom error, continuing:",ze)}setTimeout(()=>{var Ke;const ze=a.current.get("elementRegistry"),J=a.current.get("graphicsFactory"),Ie=(Ke=a.current)==null?void 0:Ke.get("pidRenderer",!1);Ie&&(Ie.isPidMode=!0),J&&ze&&ze.getAll().forEach(Kt=>{try{const an=ze.getGraphics(Kt.id);an&&J.update&&J.update(Kt,an)}catch{}})},200)}).catch(ze=>{})}catch{}},500)}dr(),Lt(!0)}).catch(z=>{console.error("Error rendering diagram:",z);const F=z.message||"Failed to load diagram";l0(`Generation failed (Reason: ${F}). Try simplified prompt.`),n==="pid"?$.error("Generation failed (Reason: token limit). Try simplified prompt."):$.error("Failed to load BPMN diagram"),Lt(!0)})},[e,n,dr]);const JU=async()=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(a.current)try{const E=await a.current.saveXML({format:!0});if(E.xml){const I=po+1;bh(I);const M=[...mo,E.xml];if(Lm(M),t&&t(E.xml),d)try{const F=X??await Mw(E.xml);await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"text",input_description:`manual-save:${F}`,generated_bpmn_xml:E.xml})}catch(F){console.error("Failed to log manual save:",F)}const z=n==="bpmn"?"BPMN":"P&ID";$.success("Diagram saved to workspace",{description:`Saved as version v${I}`})}}catch(E){console.error("Error saving diagram:",E),$.error("Failed to save diagram")}},u0=async E=>{if(a.current)try{if((await a.current.saveXML({format:!0})).xml){const M=`PID_v${po}.${E}`;$.success(`Exported to ${M}`,{description:"Export functionality ready"})}}catch(I){console.error("Error exporting P&ID:",I),$.error("Failed to export diagram")}},QU=E=>{if(!m){$.error("Editing is locked by the Process Manager");return}E>=0&&E<mo.length&&(bh(E+1),t&&a.current&&(Lt(!1),a.current.importXML(mo[E]).then(()=>{const I=a.current.get("canvas");try{const M=I.getViewbox();M&&isFinite(M.scale)&&isFinite(M.width)&&isFinite(M.height)&&M.width>0&&M.height>0&&I.zoom("fit-viewport")}catch(M){console.warn("Zoom error, continuing:",M)}dr(),Lt(!0)}).catch(I=>{console.error("Failed to load historical version:",I),$.error("Unable to load this version"),Lt(!0)})))},KP=()=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(!a.current)return;const E=a.current.get("commandStack");E.canUndo()&&E.undo()},YP=()=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(!a.current)return;const E=a.current.get("commandStack");E.canRedo()&&E.redo()},eH=()=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(!a.current)return;const E=a.current.get("modeling"),I=a.current.get("elementRegistry"),z=a.current.get("canvas").getRootElement(),F=I.filter(B=>B.id!==z.id&&B.parent===z);E.removeElements(F),$.success("Canvas cleared!")},tH=y.useCallback(()=>{if(!m){$.error("Editing is locked by the Process Manager");return}const E=document.createElement("input");E.type="file",E.accept=".bpmn,.xml",E.onchange=async I=>{var z;const M=(z=I.target.files)==null?void 0:z[0];if(!(!M||!a.current))try{const F=await M.text();if(new DOMParser().parseFromString(F,"text/xml").querySelector("parsererror")){$.error("Invalid XML file");return}if(!F.includes("bpmn:")&&!F.includes("bpmn2:")&&!F.includes("bpmndi:")){$.error("File does not appear to be a valid BPMN diagram");return}Lt(!1),await a.current.importXML(F);const ge=a.current.get("canvas");try{const Ot=ge.getViewbox();if(Ot){const Rt=Ot.scale??1,dt=Ot.width??0,ze=Ot.height??0;isFinite(Rt)&&isFinite(dt)&&isFinite(ze)&&dt>0&&ze>0&&Rt>0&&ge.zoom("fit-viewport")}}catch(Ot){console.warn("Zoom error, continuing:",Ot)}$.success("Diagram imported successfully"),dr(),Lt(!0)}catch(F){console.error("Import error:",F),$.error("Failed to import diagram"),Lt(!0)}},E.click()},[m]),Hl=y.useCallback(async(E="bpmn")=>{if(!a.current)return;const z=`${n==="bpmn"?"BPMN":"P&ID"}_v${po}.${E==="jpeg"?"jpeg":E}`;try{if(E==="bpmn"||E==="xml"){const{xml:F}=await a.current.saveXML({format:!0}),B=new Blob([F],{type:"application/xml"});qa(B,z),$.success(`Exported ${z}`)}else{const{svg:F}=await a.current.saveSVG();if(E==="svg"){const B=new Blob([F],{type:"image/svg+xml"});qa(B,z),$.success(`Exported ${z}`)}else{const he=await Ic(F,E==="png"?"image/png":"image/jpeg",E==="png"?"rgba(255,255,255,0)":"#ffffff");qa(he,z),$.success(`Exported ${z}`)}}}catch(F){console.error("Export error:",F),$.error("Failed to export diagram")}},[n,po]),nH=y.useCallback(async()=>{if(a.current)try{const{xml:E}=await a.current.saveXML({format:!0});if(!E){$.error("No BPMN XML available");return}const I=n==="bpmn"?`Current BPMN Diagram (v${po})`:`Current P&ID Diagram (v${po})`;Em({title:I,xml:E,source:"canvas"})}catch(E){console.error("Error opening XML viewer:",E),$.error("Unable to open XML viewer")}},[n,po]),Vl=y.useCallback(E=>{if(!a.current)return!1;try{const I=a.current.get("canvas");if(typeof E=="number"&&(!isFinite(E)||E<=0))return console.warn("Invalid zoom value:",E),!1;if(E==="fit-viewport"){const M=I.getViewbox();if(M){const z=M.scale??1,F=M.width??0,B=M.height??0;if(!isFinite(z)||!isFinite(F)||!isFinite(B)||F<=0||B<=0||z<=0)return console.warn("Invalid viewbox values, skipping zoom:",M),!1}}return I.zoom(E),!0}catch(I){return console.error("Error applying zoom:",I),!1}},[]),XP=y.useCallback(()=>{if(a.current)try{const I=a.current.get("canvas").getViewbox();if(I&&isFinite(I.scale)&&I.scale>0){const M=Math.min(I.scale*1.2,3);isFinite(M)&&M>0&&Vl(M)}}catch(E){console.error("Error zooming in:",E)}},[Vl]),ZP=y.useCallback(()=>{if(a.current)try{const I=a.current.get("canvas").getViewbox();if(I&&isFinite(I.scale)&&I.scale>0){const M=Math.max(I.scale/1.2,.2);isFinite(M)&&M>0&&Vl(M)}}catch(E){console.error("Error zooming out:",E)}},[Vl]),d0=y.useCallback(()=>{Vl("fit-viewport")},[Vl]),rH=y.useCallback(()=>{var E;if(document.fullscreenElement)document.exitFullscreen().then(()=>{km(!1)}).catch(()=>{$.error("Failed to exit fullscreen mode")});else{const I=document.querySelector(".bpmn-viewer-root");I?I.requestFullscreen().then(()=>{km(!0),Cm(!0)}).catch(()=>{$.error("Failed to enter fullscreen mode")}):(E=i.current)==null||E.requestFullscreen().then(()=>{km(!0),Cm(!0)}).catch(()=>{$.error("Failed to enter fullscreen mode")})}},[]),iH=y.useCallback(()=>{if(a.current)try{const E=a.current.get("grid",!1);if(E)UP(!Ul),E.setVisible(!Ul);else{UP(!Ul);const I=i.current;if(I){const M=I.querySelector(".djs-container");M&&(Ul?M.style.backgroundImage="none":(M.style.backgroundImage="linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px)",M.style.backgroundSize="20px 20px"))}}}catch(E){console.error("Error toggling grid:",E)}},[Ul]),aH=y.useCallback(()=>{GU(!Pm),$.info(`Ruler ${Pm?"disabled":"enabled"}`)},[Pm]),JP=y.useCallback(()=>{if(!a.current)return;const E=[];try{const M=a.current.get("elementRegistry").getAll(),z=M.filter(B=>{var Q;return(Q=B.type)==null?void 0:Q.includes("StartEvent")}),F=M.filter(B=>{var Q;return(Q=B.type)==null?void 0:Q.includes("EndEvent")});z.length===0&&E.push({message:"No start event found. A BPMN diagram must have at least one start event."}),F.length===0&&E.push({message:"No end event found. A BPMN diagram should have at least one end event."}),M.forEach(B=>{var Q,he;(Q=B.type)!=null&&Q.includes("Task")&&!((he=B.businessObject)!=null&&he.name)&&E.push({message:`Task "${B.id}" has no name`,elementId:B.id})}),M.forEach(B=>{B.type&&!B.type.includes("Event")&&B.type.includes("Gateway")}),qU(E),c0(!0),E.length===0?$.success("Validation passed! No issues found."):$.warning(`Found ${E.length} validation issue(s)`)}catch(I){console.error("Validation error:",I),$.error("Failed to validate diagram")}},[]),sH=y.useCallback(()=>{if(a.current){WU(!Am);try{const E=a.current.get("canvas");Am?(E.isActive("hand-tool")&&E.toggle("hand-tool"),$.info("Pan mode deactivated.")):(E.toggle("hand-tool"),$.info("Pan mode activated. Click and drag to move the canvas."))}catch(E){console.error("Error toggling pan mode:",E)}}},[Am]),oH=y.useCallback(E=>{if(!(!a.current||!E.trim()))try{const I=a.current.get("elementRegistry"),M=a.current.get("canvas"),z=I.getAll(),F=E.toLowerCase(),B=z.filter(Q=>{var Rt,dt,ze,J;const he=((dt=(Rt=Q.businessObject)==null?void 0:Rt.name)==null?void 0:dt.toLowerCase())||"",ge=((ze=Q.id)==null?void 0:ze.toLowerCase())||"",Ot=((J=Q.type)==null?void 0:J.toLowerCase())||"";return he.includes(F)||ge.includes(F)||Ot.includes(F)});if(B.length>0){const Q=B[0];try{M.zoom(Q),$.success(`Found ${B.length} element(s) matching "${E}"`)}catch(he){console.warn("Zoom to element error:",he),$.success(`Found ${B.length} element(s) matching "${E}"`)}}else $.info(`No elements found matching "${E}"`)}catch(I){console.error("Search error:",I)}},[]),cH=async E=>{var M;if(!m){$.error("Editing is locked by the Process Manager"),E.target.value="";return}const I=(M=E.target.files)==null?void 0:M[0];if(!I){E.target.value="";return}if(!I.type.startsWith("image/")){$.error("Please upload an image file"),E.target.value="";return}ho(I),Ha(!0);try{const{data:{user:z},error:F}=await oe.auth.getUser();if(F||!z){$.error("Please log in to use Vision Modelling AI"),Ha(!1),ho(null),E.target.value="";return}let B=I;const{shouldCompressImage:Q,compressImage:he}=await Pu(async()=>{const{shouldCompressImage:Ie,compressImage:Ke}=await Promise.resolve().then(()=>l_);return{shouldCompressImage:Ie,compressImage:Ke}},void 0);if(Q(I))try{B=await he(I)}catch(Ie){console.warn("Image compression failed, using original:",Ie)}const{fileToBase64:ge}=await Pu(async()=>{const{fileToBase64:Ie}=await Promise.resolve().then(()=>l_);return{fileToBase64:Ie}},void 0),Ot=await ge(B,!1),Rt=`data:${B.type};base64,${Ot}`;$.info("Uploading image for analysis...");const{invokeFunction:dt}=await Pu(async()=>{const{invokeFunction:Ie}=await Promise.resolve().then(()=>TS);return{invokeFunction:Ie}},void 0),{data:ze,error:J}=await dt("vision-to-bpmn",{imageBase64:Rt,diagramType:n},{deduplicate:!0});if(J)throw J;if(ze!=null&&ze.jobId)W(ze.jobId),$.info("Processing started",{description:"Your image is being analyzed. This may take a moment..."});else throw new Error("No job ID received from server")}catch(z){console.error("Vision processing error:",z);const F=z instanceof Error?z.message:"Failed to process image. Please try again.";$.error("Failed to process image",{description:F}),Ha(!1),ho(null),E.target.value=""}},lH=async E=>{var M;const I=(M=E.target.files)==null?void 0:M[0];if(I){if(!d){$.error("Please sign in to archive logs");return}Ha(!0);try{const z=await I.text(),F=await Qr(),{error:B}=await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"log",input_description:`log-import:${I.name}`,generated_bpmn_xml:F,alternative_models:[{event:"log_import",fileName:I.name,size:I.size,preview:z.slice(0,1e3),importedAt:new Date().toISOString()}]});if(B)throw B;$.success("Log file imported successfully"),await Br(),Sm(!1)}catch(z){console.error("Log import error:",z),$.error("Failed to import log file")}finally{Ha(!1),E.target.value=""}}},uH=()=>{$.success("QR code generated! Share with collaborators.")},mi=y.useCallback(E=>{if(!m){$.error("Editing is locked by the Process Manager"),Ga(!1);return}if(!a.current||!wr)return;a.current.get("modeling");const I=a.current.get("bpmnReplace");try{let M=E,z;switch(E){case"start-event":M="bpmn:StartEvent";break;case"start-timer-event":M="bpmn:StartEvent",z="bpmn:TimerEventDefinition";break;case"start-message-event":M="bpmn:StartEvent",z="bpmn:MessageEventDefinition";break;case"intermediate-event":M="bpmn:IntermediateThrowEvent";break;case"intermediate-timer-event":M="bpmn:IntermediateCatchEvent",z="bpmn:TimerEventDefinition";break;case"end-event":M="bpmn:EndEvent";break;case"end-message-event":M="bpmn:EndEvent",z="bpmn:MessageEventDefinition";break;case"task":M="bpmn:Task";break;case"user-task":M="bpmn:UserTask";break;case"service-task":M="bpmn:ServiceTask";break;case"manual-task":M="bpmn:ManualTask";break;case"xor-gateway":M="bpmn:ExclusiveGateway";break;case"and-gateway":M="bpmn:ParallelGateway";break;case"or-gateway":M="bpmn:InclusiveGateway";break;default:E.startsWith("bpmn:")&&(M=E)}I.replaceElement(wr,{type:M,eventDefinitionType:z}),$.success("Element changed successfully!"),Ga(!1)}catch(M){console.error("Error changing element:",M),$.error("Failed to change element type")}},[m,wr]),dH=y.useCallback((E,I)=>{if(!m){$.error("Editing is locked by the Process Manager"),Ga(!1);return}if(!(!a.current||!wr))try{a.current.get("modeling").setColor([wr],{fill:E,stroke:E}),$.success(`Applied ${I} color`),Ga(!1)}catch(M){console.error("Error applying color:",M),$.error("Failed to apply color")}},[m,wr]),hH=[{name:"Bottleneck",color:"#FF5252",label:"Bottleneck (Red)"},{name:"Optimization",color:"#4CAF50",label:"Optimization (Green)"},{name:"Warning",color:"#FFC107",label:"Warning (Yellow)"},{name:"Standard",color:"#2196F3",label:"Standard (Blue)"},{name:"Inactive",color:"#9E9E9E",label:"Inactive (Gray)"},{name:"Special",color:"#9C27B0",label:"Special (Purple)"},{name:"Remove",color:"none",label:"Remove Color"}],it=y.useCallback(E=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(!a.current)return;const I=a.current.get("modeling"),M=a.current.get("elementFactory"),F=a.current.get("canvas").getRootElement();let B;const Q={x:300,y:200};switch(E){case"start-event":B=M.createShape({type:"bpmn:StartEvent"});break;case"start-timer-event":B=M.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"});break;case"start-message-event":B=M.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"});break;case"start-signal-event":B=M.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"});break;case"start-conditional-event":B=M.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"});break;case"intermediate-event":B=M.createShape({type:"bpmn:IntermediateThrowEvent"});break;case"intermediate-timer-event":B=M.createShape({type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"});break;case"intermediate-message-event":B=M.createShape({type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"});break;case"intermediate-signal-event":B=M.createShape({type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"});break;case"end-event":B=M.createShape({type:"bpmn:EndEvent"});break;case"end-message-event":B=M.createShape({type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"});break;case"end-error-event":B=M.createShape({type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"});break;case"end-terminate-event":B=M.createShape({type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"});break;case"task":B=M.createShape({type:"bpmn:Task"});break;case"user-task":B=M.createShape({type:"bpmn:UserTask"});break;case"service-task":B=M.createShape({type:"bpmn:ServiceTask"});break;case"manual-task":B=M.createShape({type:"bpmn:ManualTask"});break;case"script-task":B=M.createShape({type:"bpmn:ScriptTask"});break;case"send-task":B=M.createShape({type:"bpmn:SendTask"});break;case"receive-task":B=M.createShape({type:"bpmn:ReceiveTask"});break;case"business-rule-task":B=M.createShape({type:"bpmn:BusinessRuleTask"});break;case"call-activity":B=M.createShape({type:"bpmn:CallActivity"});break;case"xor-gateway":B=M.createShape({type:"bpmn:ExclusiveGateway"});break;case"and-gateway":B=M.createShape({type:"bpmn:ParallelGateway"});break;case"or-gateway":B=M.createShape({type:"bpmn:InclusiveGateway"});break;case"event-gateway":B=M.createShape({type:"bpmn:EventBasedGateway"});break;case"complex-gateway":B=M.createShape({type:"bpmn:ComplexGateway"});break;case"subprocess":B=M.createShape({type:"bpmn:SubProcess",isExpanded:!0});break;case"collapsed-subprocess":B=M.createShape({type:"bpmn:SubProcess",isExpanded:!1});break;case"event-subprocess":B=M.createShape({type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0});break;case"transaction":B=M.createShape({type:"bpmn:Transaction",isExpanded:!0});break;case"participant":B=M.createShape({type:"bpmn:Participant"});break;case"data-object":B=M.createShape({type:"bpmn:DataObjectReference"});break;case"data-store":B=M.createShape({type:"bpmn:DataStoreReference"});break;case"data-input":B=M.createShape({type:"bpmn:DataInput"});break;case"data-output":B=M.createShape({type:"bpmn:DataOutput"});break;case"text-annotation":B=M.createShape({type:"bpmn:TextAnnotation"});break;case"group":B=M.createShape({type:"bpmn:Group"});break;default:return}B&&(I.createShape(B,Q,F),$.success("Element added to canvas!"))},[m]);y.useEffect(()=>{const E=I=>{const M=I.target;Dm&&!M.closest(".context-menu")&&Ga(!1)};return Dm&&document.addEventListener("click",E),()=>{document.removeEventListener("click",E)}},[Dm]),y.useEffect(()=>{const E=()=>{km(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",E),()=>document.removeEventListener("fullscreenchange",E)},[]),y.useEffect(()=>{const E=()=>{if(nr.current){const M=nr.current.getBoundingClientRect();VU.current={top:M.top,left:M.left}}};E(),window.addEventListener("scroll",E,!0),window.addEventListener("resize",E);const I=nr.current;return I&&I.addEventListener("scroll",E),()=>{window.removeEventListener("scroll",E,!0),window.removeEventListener("resize",E),I&&I.removeEventListener("scroll",E)}},[zl]),y.useEffect(()=>{if(!zl)return;const E=()=>{if(nr.current){const M=nr.current.offsetHeight-140;M>400&&LP(z=>z.height>M||z.height<400?{...z,height:Math.max(400,Math.min(700,M))}:z)}};return E(),window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}},[zl]);const go=y.useCallback((E,I)=>{if(I.preventDefault(),I.stopPropagation(),!fo.current||!nr.current)return;a0.current=!0,BP(!0);const z=nr.current.getBoundingClientRect(),F=fo.current.getBoundingClientRect(),B=F.left-z.left,Q=F.top-z.top,he=F.right-z.left,ge=F.bottom-z.top,Ot=F.width,Rt=F.height;Cr.current={width:Ot,height:Rt,x:B,y:Q,clientX:I.clientX,clientY:I.clientY,edge:E,startLeft:B,startTop:Q,startRight:he,startBottom:ge};const dt=J=>{if(J.preventDefault(),!nr.current||!fo.current)return;const Ie=nr.current,Ke=Ie.getBoundingClientRect(),Kt=J.clientX-Ke.left,an=J.clientY-Ke.top,bt=200,gi=300,ti=Ie.offsetWidth,gs=Ie.offsetHeight;let Nn=Cr.current.width,Di=Cr.current.height,Fr=Cr.current.startLeft,vs=Cr.current.startTop;const zr=Cr.current.edge;if(zr==="right"||zr==="top-right"||zr==="bottom-right"){const ys=Math.min(ti,Kt),xs=Cr.current.startLeft+bt;Nn=Math.max(xs,Math.min(ti,ys))-Cr.current.startLeft,Fr=Cr.current.startLeft}else if(zr==="left"||zr==="top-left"||zr==="bottom-left"){const ys=Math.max(0,Kt),xs=Cr.current.startRight-bt,Wa=Math.max(0,Math.min(xs,ys));Nn=Cr.current.startRight-Wa,Fr=Wa}if(zr==="bottom"||zr==="bottom-left"||zr==="bottom-right"){const ys=Math.min(gs,an),xs=Cr.current.startTop+gi;Di=Math.max(xs,Math.min(gs,ys))-Cr.current.startTop,vs=Cr.current.startTop}else if(zr==="top"||zr==="top-left"||zr==="top-right"){const ys=Math.max(0,an),xs=Cr.current.startBottom-gi,Wa=Math.max(0,Math.min(xs,ys));Di=Cr.current.startBottom-Wa,vs=Wa}Fr+Nn>ti&&(Nn=ti-Fr),vs+Di>gs&&(Di=gs-vs),Nn=Math.max(bt,Nn),Di=Math.max(gi,Di),LP({width:Nn,height:Di}),i0({x:Fr,y:vs})},ze=()=>{a0.current=!1,BP(!1),document.removeEventListener("mousemove",dt),document.removeEventListener("mouseup",ze),document.body.style.cursor="",document.body.style.userSelect=""};document.body.style.cursor=E.includes("left")&&E.includes("top")?"nwse-resize":E.includes("right")&&E.includes("top")||E.includes("left")&&E.includes("bottom")?"nesw-resize":E.includes("right")&&E.includes("bottom")?"nwse-resize":E==="left"||E==="right"?"ew-resize":"ns-resize",document.body.style.userSelect="none",document.addEventListener("mousemove",dt),document.addEventListener("mouseup",ze)},[]),ms=n==="pid";return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        .shape-repository-scroll::-webkit-scrollbar {
          width: 8px;
        }
        .shape-repository-scroll::-webkit-scrollbar-track {
          background: transparent;
        }
        .shape-repository-scroll::-webkit-scrollbar-thumb {
          background-color: rgba(0, 0, 0, 0.5);
          border-radius: 4px;
        }
        .shape-repository-scroll::-webkit-scrollbar-thumb:hover {
          background-color: rgba(0, 0, 0, 0.7);
        }
      `}),o.jsxs("div",{className:"bpmn-viewer-root flex flex-col h-[calc(100vh-8rem)] bg-background",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-background",children:[o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ev,{className:"h-5 w-5 text-primary"}),o.jsx("span",{className:"font-bold text-lg",children:"PROSSMIND"}),o.jsx("span",{className:"text-sm text-muted-foreground font-normal",children:"DESIGN"})]})}),o.jsx("div",{className:"flex-1 flex justify-center",children:o.jsx(_z,{children:o.jsxs(jz,{children:[o.jsx(Yg,{children:o.jsx(Mj,{asChild:!0,children:o.jsx("a",{href:"/",className:"text-sm hover:text-primary",children:"Workspaces"})})}),o.jsx(Dj,{}),o.jsx(Yg,{children:o.jsx(Mj,{className:"text-sm hover:text-primary",children:"Generated default"})}),o.jsx(Dj,{}),o.jsx(Yg,{children:o.jsx(Sz,{className:`text-sm font-medium ${ms?"text-engineering-green":"text-primary"}`,children:ms?"* P&ID":"* BPMN"})})]})})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("a",{href:"/",className:"text-sm hover:text-primary",children:"Overview"}),o.jsx("a",{href:"/",className:"text-sm hover:text-primary",children:"Models"}),o.jsx("a",{href:"/",className:"text-sm hover:text-primary font-medium",children:"Editing"}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",children:o.jsx(kf,{className:"h-4 w-4"})})]})]}),(yh||!vh)&&o.jsxs("div",{className:`flex items-center gap-0.5 px-1 py-1 border-b bg-muted/30 overflow-x-auto ${ms?"border-engineering-green/20":"border-border"}`,children:[o.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:JU,className:"h-7 w-7 p-0 shrink-0",title:"Save",disabled:!m,children:o.jsx(j7,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:tH,className:"h-7 w-7 p-0 shrink-0",title:"Upload/Import",disabled:!m,children:o.jsx(O0,{className:"h-3.5 w-3.5"})}),o.jsxs(Rc,{children:[o.jsx($c,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 shrink-0",title:"Download/Export",children:o.jsx(vl,{className:"h-3.5 w-3.5"})})}),o.jsxs(No,{align:"start",children:[o.jsxs(Xt,{onClick:()=>Hl("bpmn"),children:[o.jsx(Gk,{className:"h-4 w-4 mr-2"}),"Export as .bpmn"]}),o.jsxs(Xt,{onClick:()=>Hl("xml"),children:[o.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Export as .xml"]}),o.jsxs(Xt,{onClick:()=>Hl("svg"),children:[o.jsx(ka,{className:"h-4 w-4 mr-2"}),"Export as .svg"]}),o.jsxs(Xt,{onClick:()=>Hl("png"),children:[o.jsx(ka,{className:"h-4 w-4 mr-2"}),"Export as .png"]}),o.jsxs(Xt,{onClick:()=>Hl("jpeg"),children:[o.jsx(ka,{className:"h-4 w-4 mr-2"}),"Export as .jpeg"]}),o.jsxs(Xt,{onClick:()=>Hl("jpg"),children:[o.jsx(ka,{className:"h-4 w-4 mr-2"}),"Export as .jpg"]})]})]}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 shrink-0",title:"View BPMN XML",onClick:nH,children:o.jsx(dl,{className:"h-3.5 w-3.5"})}),u_.showLanguagePreference,o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),o.jsx(V,{variant:"ghost",size:"sm",onClick:KP,className:"h-7 w-7 p-0 shrink-0",title:"Undo",disabled:!s||!m,children:o.jsx(Jk,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:YP,className:"h-7 w-7 p-0 shrink-0",title:"Redo",disabled:!l||!m,children:o.jsx(Xk,{className:"h-3.5 w-3.5"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),o.jsxs(Rc,{children:[o.jsx($c,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 shrink-0",title:"Zoom Controls",children:o.jsx(R0,{className:"h-3.5 w-3.5"})})}),o.jsxs(No,{align:"start",children:[o.jsxs(Xt,{onClick:XP,children:[o.jsx(R0,{className:"h-4 w-4 mr-2"}),"Zoom In"]}),o.jsxs(Xt,{onClick:ZP,children:[o.jsx(Qk,{className:"h-4 w-4 mr-2"}),"Zoom Out"]}),o.jsxs(Xt,{onClick:d0,children:[o.jsx(T0,{className:"h-4 w-4 mr-2"}),"Fit to Screen"]})]})]}),o.jsx(V,{variant:vh?"default":"ghost",size:"sm",onClick:rH,className:"h-7 w-7 p-0 shrink-0",title:"Fullscreen Mode",children:vh?o.jsx(f7,{className:"h-3.5 w-3.5"}):o.jsx(d7,{className:"h-3.5 w-3.5"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),o.jsx(V,{variant:Ul?"default":"ghost",size:"sm",onClick:iH,className:"h-7 w-7 p-0 shrink-0",title:"Toggle Grid",children:o.jsx(r7,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:Pm?"default":"ghost",size:"sm",onClick:aH,className:"h-7 w-7 p-0 shrink-0",title:"Toggle Ruler",children:o.jsx(_7,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:zl?"default":"ghost",size:"sm",onClick:()=>MP(!zl),className:"h-7 w-7 p-0 shrink-0",title:"Toggle Elements Palette",children:o.jsx(v7,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:d0,className:"h-7 w-7 p-0 shrink-0",title:"Fit Diagram to Screen",children:o.jsx(T0,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:JP,className:"h-7 w-7 p-0 shrink-0",title:"Validate Model",children:o.jsx(Jh,{className:"h-3.5 w-3.5"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),o.jsx(V,{variant:"ghost",size:"sm",onClick:eH,className:"h-7 w-7 p-0 shrink-0",title:"Clear canvas",disabled:!m,children:o.jsx(Fp,{className:"h-3.5 w-3.5"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),vh&&o.jsxs(o.Fragment,{children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Cm(!yh),className:"h-7 w-7 p-0 shrink-0",title:yh?"Hide Toolbar":"Show Toolbar",children:yh?o.jsx(du,{className:"h-3.5 w-3.5"}):o.jsx(du,{className:"h-3.5 w-3.5 rotate-180"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"})]}),o.jsxs(Rc,{children:[o.jsx($c,{asChild:!0,children:o.jsxs(V,{variant:"outline",size:"sm",className:"gap-1.5 h-7 px-2 shrink-0",children:[o.jsx(T7,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:"text-xs",children:"Tools"})]})}),o.jsxs(No,{align:"start",className:"w-64",children:[o.jsx(Kg,{children:ms?"Advanced P&ID Tools":"Advanced BPMN Tools"}),o.jsx(fu,{}),r&&o.jsxs(o.Fragment,{children:[o.jsx(Xt,{onClick:()=>{if(!m){$.error("Editing is locked by the Process Manager");return}r()},children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pf,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Refine Diagram"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"AI-powered diagram refinement"})]})]})}),o.jsx(fu,{})]}),o.jsx(Xt,{onClick:()=>r0(!0),children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nu,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Modelling Agent Mode"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Review 5-7 AI-generated alternatives"})]})]})}),o.jsx(Xt,{onClick:()=>Sm(!0),children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(A0,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Log Agent"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Review BPMN audit history"})]})]})}),o.jsx(Xt,{onClick:()=>jm(!0),children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(O0,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Vision Modelling AI"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Sketch to diagram"})]})]})}),o.jsx(fu,{}),o.jsx(Xt,{onClick:()=>$P(!0),children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yk,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Share via QR Code"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Invite collaborators"})]})]})})]})]}),r&&o.jsxs(V,{variant:"outline",size:"sm",className:"gap-1.5 h-7 px-2 shrink-0",onClick:()=>{if(!m){$.error("Editing is locked by the Process Manager");return}r()},title:"Refine diagram with AI",disabled:!m,children:[o.jsx(Pf,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:"text-xs",children:"Refine"})]}),o.jsx(Zt,{variant:m?f?"default":"secondary":"outline",className:"ml-1 shrink-0 text-xs",children:f?"Process Manager":m?"Editor mode":"View only"})]}),o.jsx("div",{className:"flex-1 flex justify-center min-w-0 shrink",children:o.jsxs("div",{className:"flex items-center gap-1 bg-background rounded-md border border-border p-0.5",children:[o.jsxs("div",{className:"px-2 py-0.5 bg-primary text-primary-foreground rounded text-xs font-medium flex items-center gap-1.5",children:[ms?"P&ID":"BPMN",o.jsx(V,{variant:"ghost",size:"sm",className:"h-3.5 w-3.5 p-0 hover:bg-primary-foreground/20",onClick:()=>{},children:o.jsx(Pa,{className:"h-2.5 w-2.5"})})]}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",title:"New Tab",children:o.jsx(lf,{className:"h-3 w-3"})})]})}),o.jsx("div",{className:"flex items-center gap-1 shrink-0",children:o.jsxs("div",{className:"relative",children:[o.jsx(Xu,{className:"absolute left-1.5 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),o.jsx(pn,{placeholder:"Q Quick Search...",className:"pl-7 pr-7 h-7 w-40 text-xs",onKeyDown:E=>{E.key==="Enter"&&oH(E.currentTarget.value)}}),o.jsx("kbd",{className:"absolute right-1.5 top-1/2 transform -translate-y-1/2 pointer-events-none inline-flex h-3.5 select-none items-center gap-0.5 rounded border bg-muted px-1 font-mono text-[9px] font-medium text-muted-foreground opacity-100",children:"K"})]})})]}),o.jsxs("div",{ref:nr,className:"flex flex-1 relative",style:{position:"relative",isolation:"isolate",overflow:"auto"},children:[zl&&o.jsxs(ce.div,{ref:fo,className:"absolute z-50 bg-white border border-border rounded-lg shadow-lg flex flex-col",style:{position:"absolute",left:0,top:0,width:`${DP.width}px`,height:`${DP.height}px`,minWidth:"240px",minHeight:"400px",maxWidth:nr.current?`${nr.current.offsetWidth-mh.x}px`:"none",maxHeight:nr.current?`${nr.current.offsetHeight-mh.y}px`:"none",display:"flex",flexDirection:"column",willChange:"transform"},drag:!HU,dragMomentum:!1,dragElastic:0,dragConstraints:nr,dragPropagation:!1,dragListener:!0,onDragStart:(E,I)=>{var F;if(a0.current||E.target.closest(".resize-handle"))return!1;const z=(F=E.originalEvent)==null?void 0:F.target;if(z!=null&&z.closest(".resize-handle"))return!1;gh.current={...mh}},onDrag:(E,I)=>{if(!nr.current||!fo.current)return;const M=nr.current,z=fo.current,F=z.offsetWidth,B=z.offsetHeight,Q=Math.max(0,M.offsetWidth-F),he=Math.max(0,M.offsetHeight-B),ge=Math.max(0,Math.min(Q,gh.current.x+I.offset.x)),Ot=Math.max(0,Math.min(he,gh.current.y+I.offset.y));i0({x:ge,y:Ot})},onDragEnd:(E,I)=>{if(!nr.current||!fo.current)return;const M=nr.current,z=fo.current,F=z.offsetWidth,B=z.offsetHeight,Q=Math.max(0,M.offsetWidth-F),he=Math.max(0,M.offsetHeight-B),ge=Math.max(0,Math.min(Q,gh.current.x+I.offset.x)),Ot=Math.max(0,Math.min(he,gh.current.y+I.offset.y));i0({x:ge,y:Ot})},initial:!1,animate:{x:mh.x,y:mh.y},children:[o.jsxs("div",{className:"p-3 border-b border-border bg-white rounded-t-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-semibold text-sm text-foreground",children:"Shape repository"}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>MP(!1),children:o.jsx(Pa,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Xu,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),o.jsx(pn,{placeholder:"Enter text to filter",value:zU,onChange:E=>UU(E.target.value),className:"pl-8 pr-8 h-8 text-xs"}),o.jsx(l7,{className:"absolute right-2.5 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"})]})]}),o.jsx("div",{className:"flex-1 bg-white overflow-y-auto shape-repository-scroll",style:{minHeight:0,scrollbarWidth:"thin",scrollbarColor:"rgba(0, 0, 0, 0.5) transparent"},children:o.jsxs("div",{className:"p-2 space-y-1",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,quickDraw:!xt.quickDraw}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Quick draw"}),xt.quickDraw?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.quickDraw&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("start-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Start event"})]}),o.jsxs("div",{onClick:()=>it("user-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"User task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"User task"})]}),o.jsxs("div",{onClick:()=>it("user-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Case task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Case task"})]}),o.jsxs("div",{onClick:()=>it("service-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Service task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Service task"})]}),o.jsxs("div",{onClick:()=>it("collapsed-subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Subprocess",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center",children:o.jsx("div",{className:"w-3 h-0.5 bg-foreground"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Subpro..."})]}),o.jsxs("div",{onClick:()=>it("call-activity"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Call activity",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Call activity"})]}),o.jsxs("div",{onClick:()=>it("xor-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Exclusive gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-amber-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"X"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Exclusive gateway"})]}),o.jsxs("div",{onClick:()=>it("intermediate-timer-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Timer boundary event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Timer boundary event"})]}),o.jsxs("div",{onClick:()=>it("end-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"End event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"End event"})]}),o.jsxs("div",{onClick:()=>it("participant"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Pool",children:[o.jsx("div",{className:"w-10 h-8 border-2 border-foreground rounded",children:o.jsx("div",{className:"w-1 h-full bg-foreground"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Pool"})]}),o.jsxs("div",{onClick:()=>it("participant"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Lane",children:[o.jsx("div",{className:"w-10 h-8 border-2 border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Lane"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,startEvents:!xt.startEvents}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Start events"}),xt.startEvents?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.startEvents&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("start-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Start event"})]}),o.jsxs("div",{onClick:()=>it("start-timer-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Timer start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Timer start event"})]}),o.jsxs("div",{onClick:()=>it("start-message-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Message start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Message start event"})]}),o.jsxs("div",{onClick:()=>it("start-signal-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Signal start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Signal start event"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,activities:!xt.activities}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Activities"}),xt.activities?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.activities&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("user-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"User task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"User task"})]}),o.jsxs("div",{onClick:()=>it("user-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Case task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Case task"})]}),o.jsxs("div",{onClick:()=>it("service-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Service task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Service task"})]}),o.jsxs("div",{onClick:()=>it("script-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Script task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Script task"})]}),o.jsxs("div",{onClick:()=>it("business-rule-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Business rule task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Business rule task"})]}),o.jsxs("div",{onClick:()=>it("receive-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Receive task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Receive task"})]}),o.jsxs("div",{onClick:()=>it("manual-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Manual task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Manual task"})]}),o.jsxs("div",{onClick:()=>it("send-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Email task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Email task"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,gateways:!xt.gateways}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Gateways"}),xt.gateways?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.gateways&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("xor-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Exclusive gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-amber-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"X"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Exclusive gateway"})]}),o.jsxs("div",{onClick:()=>it("and-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Parallel gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-purple-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"+"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Parallel gateway"})]}),o.jsxs("div",{onClick:()=>it("or-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Inclusive gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-indigo-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"O"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Inclusive gateway"})]}),o.jsxs("div",{onClick:()=>it("event-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Event-based gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-cyan-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs",children:""})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Event-based gateway"})]}),o.jsxs("div",{onClick:()=>it("complex-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Complex gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-pink-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"*"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Complex gateway"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,intermediateEvents:!xt.intermediateEvents}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Intermediate events"}),xt.intermediateEvents?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.intermediateEvents&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("intermediate-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Intermediate event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Intermediate event"})]}),o.jsxs("div",{onClick:()=>it("intermediate-timer-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Timer event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Timer event"})]}),o.jsxs("div",{onClick:()=>it("intermediate-message-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Message event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Message event"})]}),o.jsxs("div",{onClick:()=>it("intermediate-signal-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Signal event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Signal event"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,endEvents:!xt.endEvents}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"End events"}),xt.endEvents?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.endEvents&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("end-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"End event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"End event"})]}),o.jsxs("div",{onClick:()=>it("end-message-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Message end event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Message end event"})]}),o.jsxs("div",{onClick:()=>it("end-error-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Error end event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Error end event"})]}),o.jsxs("div",{onClick:()=>it("end-terminate-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Terminate end event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Terminate end event"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,subprocesses:!xt.subprocesses}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Subprocesses"}),xt.subprocesses?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.subprocesses&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Subprocess",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:"+"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Subprocess"})]}),o.jsxs("div",{onClick:()=>it("collapsed-subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Collapsed subprocess",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center",children:o.jsx("div",{className:"w-3 h-0.5 bg-foreground"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Collapsed subprocess"})]}),o.jsxs("div",{onClick:()=>it("event-subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Event subprocess",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-dashed border-foreground rounded flex items-center justify-center text-xs",children:"+"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Event subprocess"})]}),o.jsxs("div",{onClick:()=>it("transaction"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Transaction",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-double border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Transaction"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,pools:!xt.pools}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Pools & Lanes"}),xt.pools?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.pools&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("participant"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Pool",children:[o.jsx("div",{className:"w-10 h-8 border-2 border-foreground rounded",children:o.jsx("div",{className:"w-1 h-full bg-foreground"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Pool"})]}),o.jsxs("div",{onClick:()=>it("participant"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Lane",children:[o.jsx("div",{className:"w-10 h-8 border-2 border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Lane"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,dataObjects:!xt.dataObjects}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Data Objects"}),xt.dataObjects?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.dataObjects&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("data-object"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data object",children:[o.jsx("div",{className:"w-7 h-8 border-2 border-foreground",style:{clipPath:"polygon(0 10%, 70% 10%, 100% 0, 100% 100%, 0 100%)"}}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Data object"})]}),o.jsxs("div",{onClick:()=>it("data-store"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data store",children:[o.jsx("div",{className:"w-8 h-7 border-2 border-foreground rounded-sm"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Data store"})]}),o.jsxs("div",{onClick:()=>it("data-input"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data input",children:[o.jsx("div",{className:"w-7 h-8 border-2 border-foreground",style:{clipPath:"polygon(0 10%, 70% 10%, 100% 0, 100% 100%, 0 100%)"},children:o.jsx("div",{className:"text-[8px] mt-2 ml-1",children:""})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Data input"})]}),o.jsxs("div",{onClick:()=>it("data-output"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data output",children:[o.jsx("div",{className:"w-7 h-8 border-2 border-foreground",style:{clipPath:"polygon(0 10%, 70% 10%, 100% 0, 100% 100%, 0 100%)"},children:o.jsx("div",{className:"text-[8px] mt-2 ml-1",children:""})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Data output"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Va({...xt,artifacts:!xt.artifacts}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Artifacts"}),xt.artifacts?o.jsx(xa,{className:"h-3.5 w-3.5"}):o.jsx(_i,{className:"h-3.5 w-3.5"})]}),xt.artifacts&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>it("text-annotation"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Text annotation",children:[o.jsx("div",{className:"w-8 h-7 border-l-2 border-t-2 border-b-2 border-foreground"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Text annotation"})]}),o.jsxs("div",{onClick:()=>it("group"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Group",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-dashed border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Group"})]})]})]})]})}),o.jsxs("div",{className:"border-t border-border p-2 flex items-center justify-center gap-1 bg-white rounded-b-lg",children:[o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:XP,title:"Zoom In",children:o.jsx(R0,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:ZP,title:"Zoom Out",children:o.jsx(Qk,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:d0,title:"Fit to Screen",children:o.jsx(T0,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>xh(!0),title:"Settings",children:o.jsx(rv,{className:"h-3.5 w-3.5"})})]}),o.jsx("div",{className:"resize-handle absolute left-0 top-0 bottom-0 w-4 cursor-ew-resize hover:bg-primary/70 active:bg-primary z-[60] transition-colors",onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),go("left",E)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from left"}),o.jsx("div",{className:"resize-handle absolute right-0 top-0 bottom-0 w-4 cursor-ew-resize hover:bg-primary/70 active:bg-primary z-[60] transition-colors",onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),go("right",E)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from right"}),o.jsx("div",{className:"resize-handle absolute top-0 left-0 right-0 h-4 cursor-ns-resize hover:bg-primary/70 active:bg-primary z-[60] transition-colors",onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),go("top",E)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from top"}),o.jsx("div",{className:"resize-handle absolute bottom-0 left-0 right-0 h-4 cursor-ns-resize hover:bg-primary/70 active:bg-primary z-[60] transition-colors",onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),go("bottom",E)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from bottom"}),o.jsx("div",{className:"resize-handle absolute top-0 left-0 w-8 h-8 cursor-nwse-resize hover:bg-primary/70 active:bg-primary z-[60] rounded-tl-lg transition-colors",onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),go("top-left",E)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from top-left"}),o.jsx("div",{className:"resize-handle absolute top-0 right-0 w-8 h-8 cursor-nesw-resize hover:bg-primary/70 active:bg-primary z-[60] rounded-tr-lg transition-colors",onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),go("top-right",E)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from top-right"}),o.jsx("div",{className:"resize-handle absolute bottom-0 left-0 w-8 h-8 cursor-nesw-resize hover:bg-primary/70 active:bg-primary z-[60] rounded-bl-lg transition-colors",onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),go("bottom-left",E)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from bottom-left"}),o.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-8 h-8 cursor-nwse-resize hover:bg-primary/70 active:bg-primary z-[60] rounded-br-lg transition-colors",onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),go("bottom-right",E)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from bottom-right"})]}),o.jsxs("div",{className:"flex-1 relative flex flex-col overflow-hidden",children:[vh&&!yh&&o.jsx("div",{className:"absolute top-4 left-4 z-40",children:o.jsx(V,{variant:"default",size:"sm",onClick:()=>Cm(!0),className:"h-8 w-8 p-0 shadow-lg",title:"Show Toolbar",children:o.jsx(du,{className:"h-4 w-4 rotate-180"})})}),o.jsxs("div",{className:"absolute top-4 right-4 z-40 flex items-center gap-2 bg-background/95 backdrop-blur-sm border border-border rounded-lg shadow-lg p-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:KP,disabled:!m||!s,title:"Undo (Ctrl+Z)",className:"h-8 w-8 p-0",children:o.jsx(Jk,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:YP,disabled:!m||!l,title:"Redo (Ctrl+Y)",className:"h-8 w-8 p-0",children:o.jsx(Xk,{className:"h-4 w-4"})}),o.jsx("div",{className:"h-6 w-px bg-border mx-1"}),o.jsxs("span",{className:"text-xs text-muted-foreground px-2",children:["v",po,mo.length>1&&o.jsxs(Rc,{children:[o.jsx($c,{asChild:!0,children:o.jsxs("button",{className:"ml-1 text-primary hover:underline",children:[" v",mo.length]})}),o.jsx(No,{children:mo.map((E,I)=>o.jsxs(Xt,{onClick:()=>QU(I),children:["Version ",I+1]},I))})]})]})]}),wh&&o.jsx("div",{className:"w-full h-full bg-muted/50 border border-destructive/20 rounded-lg flex flex-col items-center justify-center p-8",children:o.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto",children:o.jsx(Pa,{className:"h-8 w-8 text-destructive"})}),o.jsx("h3",{className:"text-lg font-semibold",children:"Generation Failed"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:wh}),o.jsx(V,{onClick:()=>l0(null),variant:"outline",children:"Retry with Simplified Prompt"})]})}),o.jsx("div",{ref:i,style:{backgroundColor:"#ffffff",width:"100%",height:"100%",position:"relative"},className:`w-full h-full border rounded-lg shadow-sm ${wh?"hidden":""} ${ms?"border-engineering-green/30":"border-border"}`}),ms&&GP&&o.jsxs("div",{className:"absolute top-16 right-4 w-80 bg-background border border-engineering-green/20 rounded-lg shadow-lg z-40 max-h-[600px] overflow-y-auto",children:[o.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[o.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[o.jsx(Wk,{className:"h-4 w-4 text-engineering-green"}),"ISA S5.1 Symbols"]}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>WP(!1),children:o.jsx(Pa,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs(Ij,{type:"single",collapsible:!0,children:[o.jsxs(bu,{value:"equipment",children:[o.jsx(wu,{className:"text-sm",children:"Equipment"}),o.jsxs(_u,{className:"text-xs space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"TK-xxx:"})," Storage Tank"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"P-xxx:"})," Pump"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"V-xxx:"})," Pressure Vessel"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"E-xxx:"})," Heat Exchanger"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"R-xxx:"})," Reactor"]})]})]}),o.jsxs(bu,{value:"valves",children:[o.jsx(wu,{className:"text-sm",children:"Valves"}),o.jsxs(_u,{className:"text-xs space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"FCV-xxx:"})," Flow Control Valve"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"TCV-xxx:"})," Temperature Control Valve"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"PCV-xxx:"})," Pressure Control Valve"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"PSV-xxx:"})," Pressure Safety Valve"]})]})]}),o.jsxs(bu,{value:"instruments",children:[o.jsx(wu,{className:"text-sm",children:"Instruments"}),o.jsxs(_u,{className:"text-xs space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"FI:"})," Flow Indicator"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"TI:"})," Temperature Indicator"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"PI:"})," Pressure Indicator"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"LI:"})," Level Indicator"]})]})]})]}),o.jsx(Ij,{type:"single",collapsible:!0,children:o.jsxs(bu,{value:"advanced",children:[o.jsx(wu,{className:"text-sm",onClick:()=>XU(!qP),children:"Show Advanced Symbols"}),qP&&o.jsxs(_u,{className:"text-xs space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"FIC:"})," Flow Indicating Controller"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"TIC:"})," Temperature Indicating Controller"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"PIC:"})," Pressure Indicating Controller"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"LIC:"})," Level Indicating Controller"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Line Ratings:"})," 150# = ASME B16.5 Class 150"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Line Ratings:"})," 300# = ASME B16.5 Class 300"]})]})]})})]})]}),ms&&!wh&&o.jsx("div",{className:"absolute bottom-8 right-8 z-30",children:o.jsxs(Rc,{children:[o.jsx($c,{asChild:!0,children:o.jsxs(V,{className:"shadow-lg hover:shadow-xl bg-engineering-green hover:bg-engineering-green/90",children:["Export ",o.jsx(Gk,{className:"ml-2 h-4 w-4"})]})}),o.jsxs(No,{align:"end",children:[o.jsx(Xt,{onClick:()=>u0("svg"),children:"Export as SVG"}),o.jsx(Xt,{onClick:()=>u0("pdf"),children:"Export as PDF"}),o.jsx(Xt,{onClick:()=>u0("dwg"),children:"Export as DWG"})]})]})}),ms&&!GP&&!wh&&o.jsxs(V,{variant:"outline",size:"sm",className:"absolute top-16 right-4 z-30 bg-background/95 backdrop-blur-sm border-engineering-green/20 hover:bg-engineering-green/10",onClick:()=>WP(!0),children:[o.jsx(Wk,{className:"h-4 w-4 mr-2 text-engineering-green"}),"Show Legend"]})]}),FP&&o.jsxs("div",{className:"w-12 border-l border-border bg-muted/30 flex flex-col items-center py-2 gap-2",children:[o.jsx(V,{variant:Tm?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Diagram Overview",onClick:()=>Om(!Tm),children:o.jsx(Wn,{className:"h-4 w-4"})}),o.jsx(V,{variant:Rm?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Participants / Pools & Lanes",onClick:()=>s0(!Rm),children:o.jsx(Cf,{className:"h-4 w-4"})}),o.jsx(V,{variant:$m?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Execution Settings",onClick:()=>xh(!$m),children:o.jsx(rv,{className:"h-4 w-4"})}),o.jsx(V,{variant:o0?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Check Model / Validate",onClick:JP,children:o.jsx(si,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",title:"User / Role Panel",onClick:()=>$.info("User/Role panel - coming soon"),children:o.jsx(Cf,{className:"h-4 w-4"})}),o.jsx(V,{variant:Im?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Element Documentation",onClick:()=>Mm(!Im),children:o.jsx(Wn,{className:"h-4 w-4"})}),o.jsx(V,{variant:Am?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Pan / Navigate Tool",onClick:sH,children:o.jsx(i7,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Search",onClick:()=>{const E=document.querySelector('input[placeholder*="Quick Search"]');E&&E.focus()},children:o.jsx(e7,{className:"h-4 w-4"})}),o.jsx("div",{className:"flex-1"}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",onClick:()=>zP(!1),title:"Collapse Sidebar",children:o.jsx(du,{className:"h-4 w-4"})})]}),!FP&&o.jsx("div",{className:"w-8 border-l border-border bg-muted/30 flex items-center justify-center",children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>zP(!0),title:"Expand Sidebar",children:o.jsx(du,{className:"h-4 w-4 rotate-180"})})})]}),Dm&&wr&&o.jsxs("div",{className:"context-menu absolute bg-background border border-border rounded-lg shadow-lg z-50 p-3",style:{left:`${VP.x}px`,top:`${VP.y}px`,maxWidth:"280px"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b",children:[o.jsx("span",{className:"text-xs font-semibold",children:"Change to:"}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>Ga(!1),children:o.jsx(Pa,{className:"h-3 w-3"})})]}),o.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:[(((QP=wr.type)==null?void 0:QP.includes("Event"))||wr.type==="bpmn:StartEvent"||wr.type==="bpmn:EndEvent")&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"EVENTS"}),o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsxs("button",{onClick:()=>mi("start-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded text-xs",title:"Start Event",children:[o.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-600"}),o.jsx("span",{className:"text-[8px]",children:"Start"})]}),o.jsxs("button",{onClick:()=>mi("intermediate-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded text-xs",title:"Intermediate",children:[o.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-blue-600"}),o.jsx("span",{className:"text-[8px]",children:"Inter."})]}),o.jsxs("button",{onClick:()=>mi("end-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded text-xs",title:"End Event",children:[o.jsx("div",{className:"w-6 h-6 rounded-full border-4 border-red-600"}),o.jsx("span",{className:"text-[8px]",children:"End"})]})]})]}),((ek=wr.type)==null?void 0:ek.includes("Task"))&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"TASKS"}),o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsxs("button",{onClick:()=>mi("task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Task",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded"}),o.jsx("span",{className:"text-[8px]",children:"Task"})]}),o.jsxs("button",{onClick:()=>mi("user-task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"User Task",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),o.jsx("span",{className:"text-[8px]",children:"User"})]}),o.jsxs("button",{onClick:()=>mi("service-task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Service",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),o.jsx("span",{className:"text-[8px]",children:"Service"})]}),o.jsxs("button",{onClick:()=>mi("manual-task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Manual",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),o.jsx("span",{className:"text-[8px]",children:"Manual"})]})]})]}),((tk=wr.type)==null?void 0:tk.includes("Gateway"))&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"GATEWAYS"}),o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsxs("button",{onClick:()=>mi("xor-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"XOR",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-amber-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"X"})}),o.jsx("span",{className:"text-[8px]",children:"XOR"})]}),o.jsxs("button",{onClick:()=>mi("and-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"AND",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-purple-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"+"})}),o.jsx("span",{className:"text-[8px]",children:"AND"})]}),o.jsxs("button",{onClick:()=>mi("or-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"OR",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-indigo-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"O"})}),o.jsx("span",{className:"text-[8px]",children:"OR"})]})]})]}),o.jsxs("div",{className:"pt-2 border-t space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"CAMUNDA COLORS"}),o.jsx("div",{className:"grid grid-cols-3 gap-1",children:hH.map(E=>o.jsxs("button",{onClick:()=>{var I;if(E.color==="none")try{const M=(I=a.current)==null?void 0:I.get("modeling");M&&wr&&(M.setColor([wr],{fill:void 0,stroke:void 0}),$.success("Color removed"),Ga(!1))}catch(M){console.error("Error removing color:",M),$.error("Failed to remove color")}else dH(E.color,E.label)},className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded transition-colors",title:E.label,children:[E.color==="none"?o.jsx("div",{className:"w-6 h-6 border-2 border-dashed border-foreground rounded flex items-center justify-center",children:o.jsx(Pa,{className:"h-3 w-3"})}):o.jsx("div",{className:"w-6 h-6 rounded border-2 border-border",style:{backgroundColor:E.color}}),o.jsx("span",{className:"text-[8px] text-center leading-tight",children:E.name})]},E.name))})]}),o.jsxs("div",{className:"pt-2 border-t space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"CHANGE TO"}),o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsxs("button",{onClick:()=>mi("task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Task",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded"}),o.jsx("span",{className:"text-[8px]",children:"Task"})]}),o.jsxs("button",{onClick:()=>mi("start-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Event",children:[o.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-600"}),o.jsx("span",{className:"text-[8px]",children:"Event"})]}),o.jsxs("button",{onClick:()=>mi("xor-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Gateway",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-amber-600 transform rotate-45"}),o.jsx("span",{className:"text-[8px]",children:"Gateway"})]})]})]})]})]}),o.jsx(Xn,{open:MU,onOpenChange:jm,children:o.jsxs(Bn,{children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Vision Modelling AI - Process from Images"}),o.jsxs(Un,{children:["Upload images containing process information:",o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Handwritten notes"})," - sketches and text"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Whiteboard diagrams"})," - flow drawings and ideas"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Process sketches"})," - rough workflow designs"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Meeting notes"})," - captured process discussions"]})]}),o.jsx("p",{className:"mt-2 text-sm",children:"AI will extract text, analyze the content, and generate a professional BPMN diagram."})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center",children:[o.jsx(O0,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsxs(Nt,{htmlFor:"vision-upload",className:"cursor-pointer",children:[o.jsx("span",{className:"text-sm font-medium",children:"Click to upload image"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG - handwritten or printed content"})]}),o.jsx(pn,{id:"vision-upload",type:"file",accept:"image/*",className:"hidden",onChange:cH,disabled:Nm})]}),IP&&o.jsx("div",{className:"text-center text-sm",children:o.jsxs("p",{className:"text-foreground",children:["Selected: ",o.jsx("strong",{children:IP.name})]})}),Nm&&o.jsx("div",{className:"text-center space-y-2",children:o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx("p",{className:"font-medium",children:"Processing your image with AI..."}),o.jsx("p",{className:"text-xs mt-1",children:" Extracting text and analyzing content"}),o.jsx("p",{className:"text-xs",children:" Understanding process flow"}),o.jsx("p",{className:"text-xs",children:" Generating BPMN diagram"})]})})]})]})}),o.jsx(PP,{open:ur,onOpenChange:E=>{br(E),E||Jr(null)},children:o.jsxs(Gb,{children:[o.jsxs(Wb,{children:[o.jsx(Kb,{children:"Apply this alternative diagram?"}),o.jsx(Yb,{children:"The current canvas will be replaced with the selected alternative. You can always undo or regenerate additional options."})]}),Dn?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:Dn.title}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Dn.description})]}),o.jsx(Zt,{variant:Dn.complexity==="advanced"?"default":"secondary",children:Dn.complexity.toUpperCase()})]}),o.jsx(Ns,{className:"h-40 border rounded-md bg-muted/30",children:o.jsxs("pre",{className:"text-[11px] leading-4 p-3 whitespace-pre-wrap",children:[Dn.xml.slice(0,1600),Dn.xml.length>1600?`...

(Preview truncated)`:""]})})]}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"Select an alternative to preview and apply it."}),o.jsxs(qb,{children:[o.jsx(Zb,{children:"Not now"}),o.jsx(Xb,{disabled:!Dn,onClick:async()=>{Dn&&(await RP(Dn),Jr(null),br(!1))},children:"Apply diagram"})]})]})}),o.jsx(Xn,{open:DU,onOpenChange:$P,children:o.jsxs(Bn,{children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Share via QR Code"}),o.jsx(Un,{children:"Generate a QR code to invite collaborators with view or edit permissions"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"border rounded-lg p-8 text-center bg-muted/30",children:[o.jsx(Yk,{className:"h-32 w-32 mx-auto mb-4"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"QR Code will appear here"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{onClick:uH,className:"flex-1",children:"Generate QR Code"}),o.jsx(V,{variant:"outline",className:"flex-1",children:"Set Permissions"})]})]})]})}),o.jsx(Xn,{open:n0,onOpenChange:E=>{Sm(E)},children:o.jsxs(Bn,{className:"max-w-xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Log Agent"}),o.jsx(Un,{children:"Store and audit BPMN diagram history for compliance, recovery, and review"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center bg-muted/30",children:[o.jsx(A0,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsxs(Nt,{htmlFor:"log-upload",className:"cursor-pointer flex flex-col gap-1",children:[o.jsx("span",{className:"text-sm font-medium",children:"Click to upload log file"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV, JSON, TXT, or LOG format"})]}),o.jsx(pn,{id:"log-upload",type:"file",accept:".csv,.json,.txt,.log",className:"hidden",onChange:lH,disabled:Nm})]}),Nm&&o.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Analyzing log file..."}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(A0,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("p",{className:"text-sm font-medium",children:"Audit trail"})]}),o.jsxs(Zt,{variant:"outline",children:[nt.length," snapshots"]})]}),o.jsx(Ns,{className:"max-h-64 border rounded-md",children:o.jsx("div",{className:"divide-y",children:Ee?o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Loading audit trail..."}):nt.length?nt.map(E=>{const I=Array.isArray(E.alternative_models)?E.alternative_models[0]:void 0,M=I&&typeof I=="object"&&typeof I.preview=="string"?I.preview:void 0;return o.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:E.input_description??"Manual save"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:E.created_at?new Date(E.created_at).toLocaleString():"Timestamp unavailable"}),E.input_type&&o.jsx(Zt,{variant:"secondary",className:"mt-1 uppercase tracking-wide",children:E.input_type.replace(/[_-]/g," ")})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Rc,{children:[o.jsx($c,{asChild:!0,children:o.jsx(V,{size:"sm",variant:"outline",children:"Download as"})}),o.jsxs(No,{align:"end",className:"w-44",children:[o.jsx(Kg,{children:"Choose format"}),o.jsx(fu,{}),o.jsx(Xt,{onClick:()=>IU(E.generated_bpmn_xml,E.input_description??"diagram-log"),children:"BPMN (.bpmn)"}),o.jsx(Xt,{onClick:async()=>{try{const z=await Ss(E.generated_bpmn_xml),F=new Blob([z],{type:"image/svg+xml"});qa(F,`${E.input_description??"diagram-log"}.svg`)}catch{$.error("Failed to export SVG")}},children:"SVG (.svg)"}),o.jsx(Xt,{onClick:async()=>{try{const z=await Ss(E.generated_bpmn_xml),F=await Ic(z,"image/png");qa(F,`${E.input_description??"diagram-log"}.png`)}catch{$.error("Failed to export PNG")}},children:"PNG (.png)"}),o.jsx(Xt,{onClick:async()=>{try{const z=await Ss(E.generated_bpmn_xml),F=await Ic(z,"image/jpeg","#ffffff");qa(F,`${E.input_description??"diagram-log"}.jpg`)}catch{$.error("Failed to export JPG")}},children:"JPG (.jpg)"}),o.jsx(Xt,{onClick:async()=>{try{const z=await Ss(E.generated_bpmn_xml),F=await Ic(z,"image/png","#ffffff"),B=URL.createObjectURL(F),Q=window.open("","_blank");Q?(Q.document.write(`<html><head><title>${E.input_description??"diagram-log"}</title></head><body style="margin:0"><img src="${B}" style="width:100%;height:auto"/></body></html>`),Q.document.close(),setTimeout(()=>{try{Q.focus(),Q.print()}catch{}},300)):$.info("Popup blocked. Enable popups to save as PDF.")}catch{$.error("Failed to prepare PDF. Use 'Print to PDF' from the opened image.")}},children:"PDF (via Print)"})]})]}),o.jsx(V,{size:"sm",onClick:()=>$U(E),children:"Load"})]})]}),M&&o.jsx("pre",{className:"text-xs bg-muted/60 border rounded-md p-3 whitespace-pre-wrap max-h-32 overflow-auto",children:M})]},E.id)}):o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No historical logs archived yet."})})})]})]})]})}),o.jsx(Xn,{open:ph,onOpenChange:E=>{r0(E),E||D(null)},children:o.jsxs(Bn,{className:"max-w-[95vw] max-h-[95vh] w-[90vw] h-[90vh] overflow-hidden flex flex-col p-0",style:{maxWidth:"1400px",maxHeight:"900px",width:"90vw",height:"90vh",minWidth:"900px",minHeight:"650px"},children:[o.jsxs(Fn,{className:"px-6 pt-6 pb-4 flex-shrink-0 border-b",children:[o.jsx(zn,{children:"Modelling Agent Mode"}),o.jsx(Un,{children:"Compare 5-7 AI-generated BPMN variations, from streamlined to advanced, and apply the best fit"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-6 pb-6 space-y-6",style:{minHeight:0,scrollBehavior:"smooth"},children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"How many alternative diagrams would you like to generate?"}),o.jsx("div",{className:"flex gap-4",children:[3,5,7].map(E=>o.jsxs("label",{className:`flex items-center gap-2 cursor-pointer ${T?"opacity-50 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",name:"alternativeCount",value:E,checked:Z===E,onChange:()=>{T||q(E)},disabled:T,className:"w-4 h-4 text-primary focus:ring-2 focus:ring-primary focus:ring-offset-2","aria-label":`Generate ${E} alternatives`}),o.jsx("span",{className:"text-sm font-medium",children:E}),E===5&&o.jsx(Zt,{variant:"secondary",className:"text-[10px]",children:"Recommended"})]},E))}),o.jsxs("div",{className:"mt-1 space-y-1 text-xs text-muted-foreground",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"3 alternatives:"})," Quick comparison (fastest)"]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"5 alternatives:"})," Comprehensive options (recommended)"]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"7 alternatives:"})," Maximum variety (slowest)"]})]})]}),u_.showLanguagePreference]}),T?o.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-8",children:[o.jsx(Ir,{className:"h-8 w-8 animate-spin text-primary"}),o.jsxs("div",{className:"space-y-4 text-center w-full max-w-md",children:[o.jsxs("p",{className:"text-sm font-medium",children:["Generating ",L.total||Z," alternative ",n==="pid"?"P&ID":"BPMN"," models in parallel..."]}),L.total>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Progress: ",L.completed," / ",L.total]}),o.jsxs("span",{children:[L.total?Math.round(L.completed/L.total*100):0,"%"]})]}),o.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${L.total?Math.min(100,L.completed/L.total*100):0}%`}})}),o.jsx("div",{className:"space-y-1.5 text-left border rounded-lg p-3 bg-muted/30 max-h-64 overflow-y-auto",children:Yh.slice(0,L.total).map(E=>{var z;const I=H.get(E.id)||"queued",M=L.current===E.title;return o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[I==="completed"&&o.jsx(si,{className:"h-3.5 w-3.5 text-green-600 dark:text-green-400 flex-shrink-0"}),I==="generating"&&o.jsx(Ir,{className:"h-3.5 w-3.5 animate-spin text-primary flex-shrink-0"}),I==="failed"&&o.jsx(Jh,{className:"h-3.5 w-3.5 text-destructive flex-shrink-0"}),I==="queued"&&o.jsx("div",{className:"h-3.5 w-3.5 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"}),o.jsxs("span",{className:`flex-1 ${M?"font-medium text-primary":""} ${I==="failed"?"text-destructive":""}`,children:[E.title,I==="failed"&&" (generation failed)",I==="completed"&&((z=P.find(F=>F.title===E.title))==null?void 0:z.previewFailed)&&" (preview unavailable)"]})]},E.id)})})]}),P.length>0&&o.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:[" ",P.length," model",P.length!==1?"s":""," ready"]})]})]}):O?o.jsxs("div",{className:"border border-destructive/30 bg-destructive/10 rounded-lg p-4 space-y-3",children:[o.jsx("p",{className:"text-sm text-destructive font-medium",children:"Unable to prepare alternatives"}),o.jsx("p",{className:"text-xs text-destructive/80",children:O}),o.jsx(V,{size:"sm",variant:"outline",onClick:()=>ei(!0),children:"Retry"})]}):P.length?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[o.jsx("div",{className:"space-y-4",children:qe?o.jsxs("div",{className:"border rounded-lg p-5 space-y-4 bg-muted/40",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nu,{className:"h-4 w-4 text-primary"}),o.jsx("h4",{className:"text-base font-semibold",children:qe.title})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:qe.description})]}),o.jsx(Zt,{variant:qe.complexity==="advanced"?"default":"secondary",children:qe.complexity.toUpperCase()})]}),qe.generatedAt&&o.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Generated ",new Date(qe.generatedAt).toLocaleString()]}),Fl&&Fl.id===qe.id&&o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gradient-to-r from-primary/10 to-primary/5 border-2 border-primary/30 rounded-lg shadow-sm",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-semibold text-primary",children:"Recommended Variant"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Best balance of complexity, clarity, and functionality"})]})]}),qe.metrics&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-xs font-semibold text-foreground uppercase tracking-wide",children:"Key Performance Indicators"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Number of Tasks"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.taskCount})]}),o.jsxs("div",{className:"flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Decision Points"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.decisionPoints})]}),o.jsxs("div",{className:"flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Parallel Branches"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.parallelBranches})]}),o.jsxs("div",{className:"flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Error Handlers"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.errorHandlers})]}),o.jsxs("div",{className:"col-span-2 flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Estimated Execution Paths"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.estimatedPaths})]})]})]}),(()=>{const E=_m(qe);return o.jsxs("div",{className:"space-y-3 border-t pt-4",children:[o.jsx("p",{className:"text-xs font-semibold text-foreground uppercase tracking-wide",children:"Variant Analysis"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-green-600 dark:text-green-400 mb-2 flex items-center gap-1",children:[o.jsx("span",{children:""})," Strengths"]}),o.jsx("ul",{className:"space-y-1 text-muted-foreground",children:E.strengths.map((I,M)=>o.jsxs("li",{className:"flex items-start gap-1",children:[o.jsx("span",{className:"text-green-500 mt-0.5",children:""}),o.jsx("span",{children:I})]},M))})]}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-amber-600 dark:text-amber-400 mb-2 flex items-center gap-1",children:[o.jsx("span",{children:""})," Weaknesses"]}),o.jsx("ul",{className:"space-y-1 text-muted-foreground",children:E.weaknesses.map((I,M)=>o.jsxs("li",{className:"flex items-start gap-1",children:[o.jsx("span",{className:"text-amber-500 mt-0.5",children:""}),o.jsx("span",{children:I})]},M))})]}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-1",children:[o.jsx("span",{children:""})," Best Use Cases"]}),o.jsx("ul",{className:"space-y-1 text-muted-foreground",children:E.useCases.map((I,M)=>o.jsxs("li",{className:"flex items-start gap-1",children:[o.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),o.jsx("span",{children:I})]},M))})]})]})]})})(),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Diagram Preview"}),o.jsx("div",{className:"h-64 border rounded-md",style:{backgroundColor:"#ffffff"},"data-preview-container":!0,children:o.jsx(Dw,{xml:qe.xml,title:qe.title,onRetry:()=>{Se(qe.id)},onDownloadAvailable:E=>{E||k(I=>I.map(M=>M.id===qe.id?{...M,previewFailed:!0}:M))}})})]}),o.jsx("div",{className:"flex justify-between items-center gap-2 pt-2 border-t",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{size:"sm",variant:"outline",onClick:()=>{!qe&&P.length&&Se(P[0].id),Le(!0)},className:"flex items-center gap-2",children:[o.jsx(Da,{className:"h-4 w-4"}),"Preview"]}),o.jsxs(V,{size:"sm",variant:"outline",onClick:()=>Em({title:qe.title,xml:qe.xml,generatedAt:qe.generatedAt,complexity:qe.complexity,source:"alternative"}),className:"flex items-center gap-2",children:[o.jsx(dl,{className:"h-4 w-4"}),"View XML"]}),o.jsxs(Rc,{children:[o.jsx($c,{asChild:!0,children:o.jsxs(V,{size:"sm",variant:"outline",className:"flex items-center gap-2",children:[o.jsx(vl,{className:"h-4 w-4"}),"Download"]})}),o.jsxs(No,{align:"end",className:"w-44",children:[o.jsx(Kg,{children:"Choose format"}),o.jsx(fu,{}),o.jsx(Xt,{onClick:()=>t0(qe),children:"BPMN (.bpmn)"}),o.jsx(Xt,{onClick:()=>t0(qe,"xml"),children:"XML (.xml)"}),o.jsx(Xt,{onClick:async()=>{try{const E=await Ss(qe.xml),I=new Blob([E],{type:"image/svg+xml"});qa(I,`${qe.title}.svg`)}catch{$.error("Failed to export SVG")}},children:"SVG (.svg)"}),o.jsx(Xt,{onClick:async()=>{try{const E=await Ss(qe.xml),I=await Ic(E,"image/png");qa(I,`${qe.title}.png`)}catch{$.error("Failed to export PNG")}},children:"PNG (.png)"}),o.jsx(Xt,{onClick:async()=>{try{const E=await Ss(qe.xml),I=await Ic(E,"image/jpeg","#ffffff");qa(I,`${qe.title}.jpg`)}catch{$.error("Failed to export JPG")}},children:"JPG (.jpg)"}),o.jsx(Xt,{onClick:async()=>{try{const E=await Ss(qe.xml),I=await Ic(E,"image/png","#ffffff"),M=URL.createObjectURL(I),z=window.open("","_blank");z?(z.document.write(`<html><head><title>${qe.title}</title></head><body style="margin:0"><img src="${M}" style="width:100%;height:auto"/></body></html>`),z.document.close(),setTimeout(()=>{try{z.focus(),z.print()}catch{}},300)):$.info("Popup blocked. Enable popups to save as PDF.")}catch{$.error("Failed to prepare PDF. Use 'Print to PDF' from the opened image.")}},children:"PDF (via Print)"})]})]}),o.jsxs(V,{size:"sm",onClick:()=>{qe&&RP(qe)},className:"flex items-center gap-2",children:[o.jsx(si,{className:"h-4 w-4"}),"Apply"]})]})})]}):o.jsx("div",{className:"border rounded-lg p-6 text-center text-sm text-muted-foreground bg-muted/30",children:"Select an alternative from the list to preview and apply it."})}),o.jsxs("div",{className:"border rounded-lg p-3 bg-background/70 flex flex-col",style:{minHeight:"300px",maxHeight:"calc(100vh - 250px)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:["Alternatives (",P.length,")"]}),o.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Click to preview & confirm"})]}),P.length>3&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 h-1.5 bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary transition-all duration-200",style:{width:`${le}%`}})}),o.jsxs("span",{className:"text-[10px] text-muted-foreground min-w-[35px] text-right",children:[Math.round(le),"%"]})]}),o.jsxs(Ns,{className:"flex-1 pr-2 alternatives-panel-scroll",style:{scrollbarWidth:"thin",scrollbarColor:"rgba(52, 152, 219, 0.6) rgba(255, 255, 255, 0.05)",minHeight:"300px",maxHeight:"calc(100vh - 350px)"},onScroll:E=>{const I=E.target,{scrollTop:M,scrollHeight:z,clientHeight:F}=I,B=z>F?M/(z-F)*100:0;_e(Math.min(100,Math.max(0,B)))},children:[o.jsx("style",{children:`
                        .alternatives-panel-scroll::-webkit-scrollbar {
                          width: 10px;
                          height: 10px;
                        }
                        .alternatives-panel-scroll::-webkit-scrollbar-track {
                          background: rgba(255, 255, 255, 0.05);
                          border-radius: 10px;
                          margin: 5px 0;
                        }
                        .alternatives-panel-scroll::-webkit-scrollbar-thumb {
                          background: rgba(52, 152, 219, 0.6);
                          border-radius: 10px;
                          border: 2px solid transparent;
                          background-clip: padding-box;
                        }
                        .alternatives-panel-scroll::-webkit-scrollbar-thumb:hover {
                          background: rgba(52, 152, 219, 0.9);
                          background-clip: padding-box;
                        }
                        @media (max-width: 1200px) {
                          .alternatives-panel-scroll {
                            max-height: calc(100vh - 200px) !important;
                          }
                        }
                        @media (max-width: 768px) {
                          .alternatives-panel-scroll {
                            max-height: calc(100vh - 150px) !important;
                          }
                        }
                      `}),o.jsx("div",{ref:re,className:"space-y-3",style:{scrollBehavior:"smooth"},children:P.map((E,I)=>{const M=E.id===de;return o.jsxs("button",{type:"button",onClick:()=>Se(E.id),className:`w-full text-left border rounded-lg p-3 transition-all focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 flex-shrink-0 ${M?"border-primary bg-primary/10 shadow-lg":"border-border hover:shadow-md"}`,style:{minHeight:"280px",maxHeight:"none",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:E.title}),o.jsx(Zt,{variant:E.complexity==="advanced"?"default":E.complexity==="intermediate"?"secondary":"outline",className:"text-[10px] mt-1",children:E.complexity==="basic"?"BASIC":E.complexity==="intermediate"?"INTERMEDIATE":"ADVANCED"})]}),M&&o.jsx(si,{className:"h-5 w-5 text-primary flex-shrink-0"})]}),o.jsx("div",{className:"mt-2 rounded-md border overflow-hidden",style:{backgroundColor:"#ffffff",minHeight:"128px",maxHeight:"200px",height:"auto"},children:o.jsx(Dw,{xml:E.xml,title:E.title,onDownloadAvailable:z=>{z||k(F=>F.map(B=>B.id===E.id?{...B,previewFailed:!0}:B))}})}),E.metrics&&o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-1.5 text-[10px]",children:[o.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-muted-foreground",children:"Tasks:"}),o.jsx("span",{className:"font-semibold",children:E.metrics.taskCount})]}),o.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-muted-foreground",children:"Decisions:"}),o.jsx("span",{className:"font-semibold",children:E.metrics.decisionPoints})]}),o.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-muted-foreground",children:"Parallel:"}),o.jsx("span",{className:"font-semibold",children:E.metrics.parallelBranches})]}),o.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-muted-foreground",children:"Errors:"}),o.jsx("span",{className:"font-semibold",children:E.metrics.errorHandlers})]})]}),Fl&&Fl.id===E.id&&o.jsxs("div",{className:"mt-2 flex items-center gap-1.5 px-2 py-1 bg-primary/10 border border-primary/20 rounded text-[10px] text-primary",children:[o.jsx("span",{children:""}),o.jsx("span",{className:"font-semibold",children:"Recommended"})]}),E.previewFailed&&o.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[10px] text-yellow-600 dark:text-yellow-500",children:[o.jsx(Jh,{className:"h-3 w-3"}),o.jsx("span",{children:"Preview unavailable"})]})]},E.id)})})]}),P.length>3&&o.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-border",children:[o.jsx(V,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>{var E;(E=re.current)==null||E.scrollTo({top:0,behavior:"smooth"})},disabled:le===0,children:" Top"}),o.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[P.length," alternative",P.length!==1?"s":""]}),o.jsx(V,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>{re.current&&re.current.scrollTo({top:re.current.scrollHeight,behavior:"smooth"})},disabled:le>=99,children:"Bottom "})]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[o.jsx("span",{className:"text-xs text-muted-foreground",children:"Compare variants side by side, then apply the one that fits your requirements."}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{size:"sm",variant:"outline",onClick:()=>{Ty.clear(),k(E=>E.map(I=>({...I}))),$.info("Refreshing all previews...")},disabled:T,title:"Refresh all alternative previews",children:"Refresh All"}),o.jsx(V,{size:"sm",variant:"outline",onClick:()=>{confirm("This will replace current alternatives with a new set. Continue?")&&ei(!0)},disabled:T,title:"Generate a new set of alternative BPMN models with the same input",children:"Regenerate all variations"})]})]})]}):o.jsxs("div",{className:"border rounded-lg p-6 text-center bg-muted/40",children:[o.jsx(Nu,{className:"h-16 w-16 mx-auto mb-4 text-primary"}),o.jsx("p",{className:"text-sm font-medium mb-2",children:"Preparing alternatives"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"We will analyze the current diagram and assemble 5-7 tailored variations, from core flow to advanced designs."}),o.jsx(V,{className:"mt-4",onClick:()=>ei(!0),disabled:T,children:"Generate alternatives"})]})]})]})}),o.jsx(Xn,{open:ht,onOpenChange:Le,children:o.jsxs(Bn,{className:"max-w-5xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:qe?`Preview  ${qe.title}`:"Preview alternative"}),o.jsx(Un,{children:qe?`Complexity: ${qe.complexity.toUpperCase()}`:"Select an alternative to preview it."})]}),qe?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"border rounded-lg bg-muted/30 h-[420px]","data-preview-container":!0,children:o.jsx(Dw,{xml:qe.xml,title:qe.title,onRetry:()=>Se(qe.id),onDownloadAvailable:()=>{}})}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsxs(V,{variant:"outline",onClick:()=>{Le(!1),Em({title:qe.title,xml:qe.xml,generatedAt:qe.generatedAt,complexity:qe.complexity,source:"alternative"})},className:"flex items-center gap-2",children:[o.jsx(dl,{className:"h-4 w-4"}),"View XML"]}),o.jsx(V,{onClick:()=>t0(qe),children:"Download .bpmn"})]})]}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"Pick an alternative model to preview it."})]})}),o.jsx(Xn,{open:!!pi,onOpenChange:E=>{E||Em(null)},children:o.jsxs(Bn,{className:"max-w-3xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"BPMN XML"}),o.jsx(Un,{children:pi?`${pi.title}${pi.complexity?` (${pi.complexity.toUpperCase()})`:""}`:"Inspect the generated BPMN XML."})]}),pi&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Generated"," ",pi.generatedAt?new Date(pi.generatedAt).toLocaleString():pi.source==="canvas"?new Date().toLocaleString():"just now"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{size:"sm",variant:"outline",onClick:async()=>{try{if(typeof navigator>"u"||!navigator.clipboard)throw new Error("Clipboard API unavailable");await navigator.clipboard.writeText(pi.xml),$.success("XML copied to clipboard")}catch(E){console.error("Failed to copy XML:",E),$.error("Unable to copy XML")}},children:"Copy XML"}),o.jsx(V,{size:"sm",onClick:()=>{const E=new Blob([pi.xml],{type:"application/xml"}),I=`${(pi.title||"diagram").replace(/\s+/g,"_").toLowerCase()}.xml`;qa(E,I)},children:"Download XML"})]})]}),o.jsxs(Ns,{className:"max-h-[60vh] border rounded-md bg-muted/30",children:[o.jsx("pre",{className:"text-[11px] leading-5 p-4 whitespace-pre-wrap",children:pi.xml}),o.jsx(PS,{orientation:"vertical"})]})]})]})}),o.jsx(Xn,{open:LU,onOpenChange:E=>{BU(E)},children:o.jsxs(Bn,{className:"max-w-xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"System Use Modelling"}),o.jsx(Un,{children:"Capture visits, clicks, and on-page context to generate BPMN models from real usage"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"border rounded-lg p-4 bg-muted/40 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ev,{className:"h-10 w-10 text-primary"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold",children:"Detailed Behavior Tracking"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Log page visits, clicked elements, and page copy for downstream mining."})]})]}),o.jsx(Zt,{variant:qt?"default":"outline",children:qt?"Active":"Paused"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:qt?o.jsxs(o.Fragment,{children:[o.jsx(V,{variant:"destructive",className:"flex-1",onClick:()=>void hi(),children:"Stop Tracking"}),o.jsx(V,{variant:"outline",className:"flex-1",onClick:()=>void Dt(),disabled:Ve.length===0,children:"Save Snapshot"})]}):o.jsx(V,{className:"flex-1",onClick:()=>{if(!d){$.error("Please sign in to enable tracking");return}tr(!0),un(),$.success("System tracking enabled  capturing visits, clicks, and page context.")},children:"Enable Tracking"})}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:["Tracked activity (",Ve.length,")"]}),o.jsx(Ns,{className:"max-h-60 border rounded-md",children:o.jsx("div",{className:"divide-y",children:Ve.length?Ve.map(E=>o.jsxs("div",{className:"flex items-start gap-3 p-3",children:[E.type==="visit"?o.jsx(hS,{className:"h-4 w-4 mt-1 text-primary"}):o.jsx(g7,{className:"h-4 w-4 mt-1 text-primary"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium",children:E.type==="visit"?"Visited page":"User click"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(E.timestamp).toLocaleString()}),E.details.url&&o.jsx("p",{className:"text-xs break-all",children:E.details.url}),E.details.title&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Title: ",E.details.title]}),E.details.text&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:['"',E.details.text,'"']}),E.details.contentPreview&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Preview: ",E.details.contentPreview]}),E.details.tag&&o.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Element: ",E.details.tag,E.details.xpath?`  ${E.details.xpath}`:""]}),E.details.referrer&&o.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Referrer: ",E.details.referrer]})]})]},E.id)):o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No activity captured yet. Enable tracking to begin logging interactions."})})})]})]})]})}),o.jsx(Xn,{open:b,onOpenChange:E=>{if(E&&!f){$.error("Process Manager rights required");return}w(E)},children:o.jsxs(Bn,{className:"max-w-2xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Process Manager Console"}),o.jsx(Un,{children:"Exercise full editing control, lock or unlock the canvas, and grant or revoke collaborator rights."})]}),f?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"border rounded-lg p-4 flex items-center justify-between bg-muted/40",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Editing lock"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"When locked, collaborators can only view the diagram."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zt,{variant:v?"default":"outline",children:v?"Locked":"Unlocked"}),o.jsx(Vs,{id:"editing-lock",checked:v,onCheckedChange:E=>fi(E)})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(E7,{className:"h-4 w-4 text-primary"}),o.jsx("p",{className:"text-sm font-medium",children:"Collaborators"})]}),o.jsx(Zt,{variant:"outline",children:_.length})]}),o.jsx(Ns,{className:"max-h-72 border rounded-md",children:o.jsx("div",{className:"divide-y",children:S?o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Loading collaborators..."}):_.length?_.map(E=>{const I=E.roles.includes("admin");return o.jsxs("div",{className:"p-4 flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"text-sm font-medium flex items-center gap-2",children:[E.email,E.userId===(d==null?void 0:d.id)&&o.jsx(Zt,{variant:"outline",children:"You"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:I?"Process Manager":"Collaborator"}),o.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Last active:"," ",E.lastLogin?new Date(E.lastLogin).toLocaleString():"No activity recorded"]})]}),E.userId!==(d==null?void 0:d.id)&&(I?o.jsx(V,{variant:"outline",size:"sm",onClick:()=>ps(E.userId),children:"Remove access"}):o.jsx(V,{size:"sm",onClick:()=>Ua(E.userId),children:"Grant access"}))]},E.userId)}):o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No collaborators found."})})})]})]}):o.jsxs("div",{className:"border rounded-lg p-6 text-center bg-muted/40 space-y-2",children:[o.jsx("p",{className:"text-sm font-medium",children:"View-only access"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"You do not have Process Manager permissions. Please contact an administrator to update access rights."})]})]})}),Tm&&o.jsx(Xn,{open:Tm,onOpenChange:Om,children:o.jsxs(Bn,{className:"max-w-2xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Diagram Overview"}),o.jsx(Un,{children:"Edit process properties and metadata"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Nt,{children:"Process Name"}),o.jsx(pn,{placeholder:"Enter process name"})]}),o.jsxs("div",{children:[o.jsx(Nt,{children:"Process ID"}),o.jsx(pn,{placeholder:"process-id"})]}),o.jsxs("div",{children:[o.jsx(Nt,{children:"Description"}),o.jsx(ea,{placeholder:"Enter process description",rows:4})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(V,{variant:"outline",onClick:()=>Om(!1),children:"Cancel"}),o.jsx(V,{onClick:()=>{$.success("Properties saved"),Om(!1)},children:"Save"})]})]})]})}),Rm&&o.jsx(Xn,{open:Rm,onOpenChange:s0,children:o.jsxs(Bn,{className:"max-w-2xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Participants / Pools & Lanes"}),o.jsx(Un,{children:"Manage collaboration elements"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Manage pools, lanes, and participant assignments for your BPMN diagram."}),o.jsx(V,{onClick:()=>$.info("Add participant functionality - coming soon"),children:"Add Participant"}),o.jsx("div",{className:"flex justify-end gap-2",children:o.jsx(V,{variant:"outline",onClick:()=>s0(!1),children:"Close"})})]})]})}),$m&&o.jsx(Xn,{open:$m,onOpenChange:xh,children:o.jsxs(Bn,{className:"max-w-2xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Execution Settings"}),o.jsx(Un,{children:"Configure process engine options and metadata"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Nt,{children:"Process Version"}),o.jsx(pn,{type:"number",defaultValue:"1"})]}),o.jsxs("div",{children:[o.jsx(Nt,{children:"Process Namespace"}),o.jsx(pn,{placeholder:"http://example.org/bpmn"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Vs,{id:"executable"}),o.jsx(Nt,{htmlFor:"executable",children:"Executable Process"})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(V,{variant:"outline",onClick:()=>xh(!1),children:"Cancel"}),o.jsx(V,{onClick:()=>{$.success("Settings saved"),xh(!1)},children:"Save"})]})]})]})}),Im&&o.jsx(Xn,{open:Im,onOpenChange:Mm,children:o.jsxs(Bn,{className:"max-w-2xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Element Documentation"}),o.jsx(Un,{children:"Add documentation for the selected element"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs(Nt,{children:["Element: ",(wr==null?void 0:wr.id)||"None selected"]}),o.jsx(ea,{placeholder:"Enter element documentation",rows:6})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(V,{variant:"outline",onClick:()=>Mm(!1),children:"Cancel"}),o.jsx(V,{onClick:()=>{$.success("Documentation saved"),Mm(!1)},children:"Save"})]})]})]})}),o0&&o.jsx(Xn,{open:o0,onOpenChange:c0,children:o.jsxs(Bn,{className:"max-w-2xl",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Validation Results"}),o.jsx(Un,{children:"BPMN structural validation issues"})]}),o.jsxs("div",{className:"space-y-4",children:[HP.length===0?o.jsxs("div",{className:"text-center py-8 text-green-600",children:[o.jsx(si,{className:"h-12 w-12 mx-auto mb-2"}),o.jsx("p",{className:"font-semibold",children:"No validation issues found!"})]}):o.jsx(Ns,{className:"h-[400px]",children:o.jsx("div",{className:"space-y-2",children:HP.map((E,I)=>o.jsx("div",{className:"p-3 border border-destructive/20 rounded-lg bg-destructive/5",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Jh,{className:"h-4 w-4 text-destructive mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:E.message}),E.elementId&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Element ID: ",E.elementId]})]})]})},I))})}),o.jsx("div",{className:"flex justify-end gap-2",children:o.jsx(V,{variant:"outline",onClick:()=>c0(!1),children:"Close"})})]})]})})]})]})},dRe=({user:e,diagramType:t})=>{const n=Mi(),{hasUsedAllPrompts:r,usePrompt:i}=eb(!!e),[a,s]=y.useState(""),[c,l]=y.useState(!1),[u,d]=y.useState(null),[h,f]=y.useState(!1),[p,m]=y.useState("en-US"),[g,v]=y.useState(null),[x,b]=y.useState(!1),[w,_]=y.useState(""),[j,S]=y.useState(!1),[N,P]=y.useState("idle"),[k,T]=y.useState("idle"),[A,O]=y.useState(!1),[D,L]=y.useState(null),[G,H]=y.useState(!1),K=y.useRef(null),Z=y.useRef(null),q=y.useRef(null),le=t==="bpmn"?["Create a customer onboarding process","Design an order fulfillment workflow","Build a support ticket resolution process","Generate an employee hiring workflow","Create an invoice approval process"]:["Create a chemical reactor cooling system","Design a water treatment process flow","Build a distillation column control loop","Generate a pump and valve configuration","Create a heat exchanger system"];y.useEffect(()=>{const se=t==="bpmn"?"generatedBpmn":"generatedPid",X=localStorage.getItem(se);if(X){d(X),localStorage.removeItem(se),localStorage.removeItem("diagramType");const ne=t==="bpmn"?"BPMN":"P&ID";$.success(`Your generated ${ne} diagram is ready!`,{description:"You can now view and edit your process diagram"}),setTimeout(()=>{var ae;(ae=document.getElementById("bpmn-viewer"))==null||ae.scrollIntoView({behavior:"smooth",block:"start"})},500)}},[t]),y.useEffect(()=>{if(!D)return;let se;const X=async()=>{const{data:W,error:Re}=await oe.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",D).single();if(Re){console.error("Error checking job status:",Re);return}if(console.log("Job status:",W.status),W.status==="completed"&&W.bpmn_xml){const Pe=t==="bpmn"?"BPMN":"P&ID";d(W.bpmn_xml),T("idle"),l(!1),L(null),b(!1),v(null),$.success(`${Pe} diagram generated successfully!`),setTimeout(()=>{var Ve;(Ve=document.getElementById("bpmn-viewer"))==null||Ve.scrollIntoView({behavior:"smooth",block:"start"})},500),se&&clearInterval(se)}else if(W.status==="failed"){const Pe=W.error_message||"Processing failed. Please try again.";T("idle"),l(!1),L(null),$.error("Upload failed",{description:Pe,action:{label:"Retry",onClick:()=>{}},duration:1e4}),se&&clearInterval(se)}},ne=oe.channel(`job-${D}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${D}`},W=>{const Re=W.new;if(console.log("Realtime job status update:",Re.status),Re.status==="completed"&&Re.bpmn_xml){const Pe=t==="bpmn"?"BPMN":"P&ID";d(Re.bpmn_xml),T("idle"),l(!1),L(null),b(!1),v(null),$.success(`${Pe} diagram generated successfully!`),setTimeout(()=>{var Ve;(Ve=document.getElementById("bpmn-viewer"))==null||Ve.scrollIntoView({behavior:"smooth",block:"start"})},500),se&&clearInterval(se)}else if(Re.status==="failed"){const Pe=Re.error_message||"Processing failed. Please try again.";T("idle"),l(!1),L(null),$.error("Upload failed",{description:Pe,action:{label:"Retry",onClick:()=>{g&&St()}},duration:1e4}),se&&clearInterval(se)}}).subscribe();se=window.setInterval(X,3e3),X();const ae=window.setTimeout(()=>{se&&clearInterval(se);const W="Processing timed out - Please try refreshing the page or contact support";T("idle"),l(!1),L(null),$.error("Upload failed",{description:W,action:{label:"Retry",onClick:()=>{g&&St()}},duration:1e4})},3e5);return()=>{clearTimeout(ae),oe.removeChannel(ne),se&&clearInterval(se)}},[D,t,g]);const _e=async se=>{var ne,ae;if(c)return;if(!se.trim()){$.error("Please enter a process description");return}if(!e&&r){$.error("You've used all 5 free prompts. Please sign up to continue!"),n("/auth");return}if(!e&&!i()){$.error("You've used all 5 free prompts. Please sign up to continue!"),n("/auth");return}l(!0);const X=t==="bpmn"?"BPMN":"P&ID";T("reading"),await new Promise(W=>setTimeout(W,500)),T("generating");try{const{invokeFunction:W}=await Pu(async()=>{const{invokeFunction:Ve}=await Promise.resolve().then(()=>TS);return{invokeFunction:Ve}},void 0),{data:Re,error:Pe}=await W("generate-bpmn",{prompt:se,diagramType:t},{deduplicate:!0});if(Pe){console.error("Function error:",Pe),T("idle"),(ne=Pe.message)!=null&&ne.includes("429")?$.error("Rate limit exceeded. Please try again in a moment."):(ae=Pe.message)!=null&&ae.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):$.error(`Failed to generate ${X} model`);return}T("drawing"),await new Promise(Ve=>setTimeout(Ve,500)),Re!=null&&Re.bpmnXml?(d(Re.bpmnXml),T("idle"),$.success(`${X} model generated successfully!`)):(T("idle"),$.error("No diagram data received"))}catch(W){console.error("Error generating BPMN:",W),T("idle"),$.error("An error occurred while generating the model")}finally{l(!1)}},re=()=>{_e(a),s("")},de=se=>{s(se)},Se=async se=>{var Ve,Ct;const X="dataTransfer"in se?(Ve=se.dataTransfer.files)==null?void 0:Ve[0]:(Ct=se.target.files)==null?void 0:Ct[0];if(!X)return;const{data:{user:ne},error:ae}=await oe.auth.getUser();if(ae||!ne){$.error("Please log in to upload and analyze documents"),n("/auth");return}if(!["image/png","image/jpeg","image/jpg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(X.type)){$.error("Please upload an image, PDF, Word document, or text file");return}l(!0);const Re=t==="bpmn"?"BPMN":"P&ID";$.info(`Analyzing document and generating ${Re}...`);const Pe=new FileReader;Pe.onloadend=async()=>{const qt=Pe.result;v({name:X.name,type:X.type,base64:qt}),b(!0),l(!1),$.success(`File uploaded! Review the preview before generating ${Re}.`)},Pe.readAsDataURL(X)},nt=async()=>{if(h)Z.current&&Z.current.state==="recording"&&Z.current.stop(),q.current&&(q.current.getTracks().forEach(se=>se.stop()),q.current=null),f(!1),Z.current=null;else try{const se=await navigator.mediaDevices.getUserMedia({audio:!0});q.current=se;const X=new MediaRecorder(se),ne=[];X.ondataavailable=ae=>{ne.push(ae.data)},X.onstop=async()=>{const ae=new Blob(ne,{type:"audio/webm"}),W=new FileReader;W.readAsDataURL(ae),W.onloadend=async()=>{var Pe;const Re=(Pe=W.result)==null?void 0:Pe.toString().split(",")[1];try{const{data:Ve,error:Ct}=await oe.functions.invoke("speech-to-text",{body:{audio:Re,language:p}});if(Ct)throw Ct;Ve!=null&&Ve.text&&(s(Ve.text),$.success("Voice recorded successfully!"))}catch(Ve){console.error("Speech-to-text error:",Ve),$.error("Failed to convert speech to text.")}},q.current&&(q.current.getTracks().forEach(Re=>Re.stop()),q.current=null)},X.start(),Z.current=X,f(!0),$.info("Recording... Click again to stop")}catch(se){console.error("Error accessing microphone:",se),$.error("Could not access microphone. Please check permissions.")}},St=async()=>{if(g){l(!0),b(!1),T("reading"),await new Promise(se=>setTimeout(se,500)),T("generating");try{const{data:{user:se}}=await oe.auth.getUser();if(!se){T("idle"),$.error("Please log in to continue"),n("/auth");return}const X=g.base64.length*.75,ne=200*1024*1024;if(X>ne){T("idle"),l(!1),$.error("File too large",{description:"Maximum file size is 200 MB. Please select a smaller file."});return}const ae=$.loading("Processing your file...",{description:"This may take 30-60 seconds for complex diagrams"}),{data:W,error:Re}=await oe.functions.invoke("vision-to-bpmn",{body:{imageBase64:g.base64,diagramType:t}});if($.dismiss(ae),Re){console.error("Vision AI error:",Re),T("idle"),l(!1);const Pe=Re.message||"Failed to start diagram generation";$.error("Upload failed",{description:Pe,action:{label:"Retry",onClick:()=>{St()}},duration:1e4});return}if(!W||!W.jobId){T("idle"),l(!1),$.error("Upload failed",{description:"Failed to start processing",action:{label:"Retry",onClick:()=>{St()}},duration:1e4});return}L(W.jobId),T("generating"),$.info("Processing started",{description:"We'll notify you when your diagram is ready (this may take 1-2 minutes)"})}catch(se){console.error("Vision AI processing error:",se),T("idle"),l(!1);const X=se instanceof Error?se.message:"Network error - Please check your connection and try again";$.error("Upload failed",{description:X,action:{label:"Retry",onClick:()=>{St()}},duration:1e4})}}},Ee=async()=>{if(!u||!w.trim()){const ne=t==="bpmn"?"BPMN":"P&ID";$.error(`Please enter instructions to refine the ${ne}`);return}const{data:{user:se}}=await oe.auth.getUser();if(!se){const ne=t==="bpmn"?"BPMN":"P&ID";$.error(`Please log in to refine ${ne}`),n("/auth");return}S(!0);const X=t==="bpmn"?"BPMN":"P&ID";$.info(`Refining ${X} based on your instructions...`),P("analyzing"),await new Promise(ne=>setTimeout(ne,500)),P("refining");try{const{data:ne,error:ae}=await oe.functions.invoke("refine-bpmn",{body:{currentBpmnXml:u,instructions:w,userId:se.id,diagramType:t}});if(ae){console.error("Refinement error:",ae),P("idle");const W=ae.message||JSON.stringify(ae);W.includes("429")?$.error("Rate limit exceeded. Please try again in a moment."):W.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):W.includes("401")||W.includes("Authentication")?($.error("Authentication required. Please log in again."),n("/auth")):$.error(`Failed to refine ${X}: ${W}`);return}if(ne!=null&&ne.error){console.error("Refinement error in response:",ne.error),P("idle");const W=typeof ne.error=="string"?ne.error:JSON.stringify(ne.error);W.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):W.includes("401")||W.includes("Authentication")?($.error("Authentication required. Please log in again."),n("/auth")):$.error(`Failed to refine ${X}: ${W}`);return}if(ne!=null&&ne.bpmnXml){P("applying"),await new Promise(Re=>setTimeout(Re,300));const W=ne.bpmnXml.includes("</bpmn:definitions>")||ne.bpmnXml.includes("</definitions>");ne.bpmnXml.includes("<?xml")&&W?(d(ne.bpmnXml),P("idle"),$.success(`${X} refined successfully!`),_("")):(console.error("Received invalid diagram XML:",ne.bpmnXml.substring(0,200)),P("idle"),$.error("Received invalid diagram structure. Please try again."))}else console.error("No refined diagram received. Response:",ne),P("idle"),$.error("No refined diagram received. The function may not be deployed or there was an error.")}catch(ne){console.error("BPMN refinement error:",ne),P("idle");const ae=ne instanceof Error?ne.message:String(ne);ae.includes("Failed to fetch")||ae.includes("load the resource")?$.error("Network error: Unable to reach refine-bpmn function. Please check if the function is deployed."):$.error(`Failed to refine ${t==="bpmn"?"BPMN":"P&ID"}: ${ae}`)}finally{S(!1)}};return o.jsx("section",{className:"py-24 bg-muted/20 relative","data-section":"try-prossmind",children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs("div",{className:"text-center mb-12 slide-up",children:[o.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Try ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"ProssMind!"})]}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:t==="bpmn"?"Describe your business process, upload an image, PDF, Word doc, or text file - AI will generate a BPMN diagram for you":"Describe your P&ID process, upload an image, PDF, Word doc, or text file - AI will generate a P&ID diagram for you"})]}),o.jsxs("div",{className:"max-w-5xl mx-auto mt-12 space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-muted/50 to-muted/30 rounded-2xl p-8 border border-border/50 slide-up stagger-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:o.jsx(Pf,{className:"h-5 w-5 text-primary"})}),o.jsxs("h3",{className:"font-semibold text-lg",children:["Try these ",t==="bpmn"?"BPMN":"P&ID"," examples:"]})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:le.map((se,X)=>o.jsx(V,{variant:"outline",size:"sm",onClick:()=>de(se),className:"text-sm hover:bg-primary/10 hover:border-primary/50 transition-all whitespace-nowrap",disabled:c,style:{minWidth:"max-content",paddingLeft:"1.2em",paddingRight:"1.2em"},"aria-label":`Use suggestion: ${se}`,children:se},X))})]}),o.jsx("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl slide-up stagger-2",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs(BS,{defaultValue:"prompt",className:"w-full",children:[o.jsxs(tx,{className:"grid w-full grid-cols-3 bg-muted/50",children:[o.jsxs(Ls,{value:"prompt",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(pS,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Prompt"})]}),o.jsxs(Ls,{value:"voice",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(tv,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Voice"})]}),o.jsxs(Ls,{value:"attachment",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(nv,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Attachment"})]})]}),o.jsx(Bs,{value:"prompt",className:"mt-4",children:o.jsx(ea,{placeholder:`Describe your ${t==="bpmn"?"business process":"P&ID process"} step by step...`,value:a,onChange:se=>s(se.target.value),className:"min-h-[120px] resize-none border-muted",style:{paddingLeft:"1.2em",paddingRight:"1.2em"},disabled:c})}),o.jsx(Bs,{value:"voice",className:"mt-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cD,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs(es,{value:p,onValueChange:m,children:[o.jsx(Oa,{className:"w-[200px] h-8",children:o.jsx(ts,{placeholder:"Select language"})}),o.jsxs(Ra,{children:[o.jsx(Qe,{value:"en-US",children:"English (US)"}),o.jsx(Qe,{value:"en-GB",children:"English (UK)"}),o.jsx(Qe,{value:"es-ES",children:"Spanish"}),o.jsx(Qe,{value:"fr-FR",children:"French"}),o.jsx(Qe,{value:"de-DE",children:"German"}),o.jsx(Qe,{value:"it-IT",children:"Italian"}),o.jsx(Qe,{value:"pt-BR",children:"Portuguese (Brazil)"}),o.jsx(Qe,{value:"pt-PT",children:"Portuguese (Portugal)"}),o.jsx(Qe,{value:"ru-RU",children:"Russian"}),o.jsx(Qe,{value:"ja-JP",children:"Japanese"}),o.jsx(Qe,{value:"ko-KR",children:"Korean"}),o.jsx(Qe,{value:"zh-CN",children:"Chinese (Simplified)"}),o.jsx(Qe,{value:"zh-TW",children:"Chinese (Traditional)"}),o.jsx(Qe,{value:"ar-SA",children:"Arabic"}),o.jsx(Qe,{value:"hi-IN",children:"Hindi"})]})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Voice recognition language"})]}),o.jsx(V,{variant:"outline",onClick:nt,disabled:c,className:h?"text-red-500 border-red-500":"w-full",children:h?o.jsxs(o.Fragment,{children:[o.jsx(uD,{className:"h-4 w-4 mr-2 animate-pulse"}),"Click to Stop Recording"]}):o.jsxs(o.Fragment,{children:[o.jsx(tv,{className:"h-4 w-4 mr-2"}),"Start Voice Recording"]})})]})}),o.jsx(Bs,{value:"attachment",className:"mt-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{ref:K,type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:Se,className:"hidden"}),o.jsxs("div",{onDragOver:se=>{se.preventDefault(),H(!0)},onDragLeave:()=>H(!1),onDrop:se=>{se.preventDefault(),H(!1),Se(se)},className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${G?"border-primary bg-primary/5 scale-[1.02]":"border-border hover:border-primary/50"}`,children:[o.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(ka,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PNG/JPG"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Wn,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PDF"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(sD,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"DOCX"})]})]}),o.jsxs(V,{variant:"outline",onClick:()=>{var se;return(se=K.current)==null?void 0:se.click()},disabled:c,className:"w-full","aria-label":"Upload file",children:[o.jsx(nv,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload File"]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Drag and drop a file here or click to browse"})]})]})})]}),c&&k!=="idle"&&o.jsxs("div",{className:"space-y-3 p-4 bg-muted/50 rounded-lg border border-border",children:[o.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Processing your document..."}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:k==="reading"?"font-semibold":"text-muted-foreground",children:[k==="reading"&&o.jsx(Ir,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),k!=="reading"&&" ","Step 1: Reading prompt..."]}),k==="reading"&&o.jsx(Ds,{value:33,className:"w-24","aria-label":"Progress: 33%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:k==="generating"?"font-semibold":k==="drawing"?"text-muted-foreground":"",children:[k==="generating"&&o.jsx(Ir,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),k!=="generating"&&k!=="reading"&&" ","Step 2: Generating..."]}),k==="generating"&&o.jsx(Ds,{value:66,className:"w-24","aria-label":"Progress: 66%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:k==="drawing"?"font-semibold":"text-muted-foreground",children:[k==="drawing"&&o.jsx(Ir,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),k!=="drawing"&&k!=="generating"&&k!=="reading"&&" ","Step 3: Drawing Diagram..."]}),k==="drawing"&&o.jsx(Ds,{value:100,className:"w-24","aria-label":"Progress: 100%"})]})]}),o.jsxs(V,{onClick:re,className:"gap-2 shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all w-full",size:"lg",disabled:c||!a.trim(),"aria-label":`Generate ${t==="bpmn"?"BPMN":"P&ID"} diagram`,children:[c?"Generating...":`Generate ${t==="bpmn"?"BPMN":"P&ID"}`,o.jsx(mS,{className:"h-4 w-4","aria-hidden":"true"})]})]})}),x&&g&&o.jsxs("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Preview Uploaded File"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[o.jsxs("p",{className:"text-sm font-medium mb-2",children:["File: ",g.name]}),g.type.startsWith("image/")&&o.jsx("div",{className:"mt-4 max-h-96 overflow-auto",children:o.jsx("img",{src:g.base64,alt:"Preview",className:"max-w-full rounded border"})}),g.extractedText&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Extracted Content Preview:"}),o.jsx("div",{className:"bg-background rounded p-3 max-h-48 overflow-auto text-xs",children:g.extractedText})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{onClick:St,className:"flex-1",disabled:c,children:c?"Generating...":`Generate ${t==="bpmn"?"BPMN":"P&ID"} from this file`}),o.jsx(V,{variant:"outline",onClick:()=>{b(!1),v(null)},children:"Cancel"})]})]})]}),u&&o.jsx("div",{id:"bpmn-viewer",className:"mt-12",children:o.jsx(kP,{xml:u,onSave:d,diagramType:t,onRefine:()=>O(!0)})}),o.jsx(Xn,{open:A,onOpenChange:O,children:o.jsxs(Bn,{className:"sm:max-w-[500px]",children:[o.jsxs(Fn,{children:[o.jsxs(zn,{children:["Refine ",t==="bpmn"?"BPMN":"P&ID"," Diagram"]}),o.jsxs(Un,{children:["Describe the changes you'd like to make to your ",t==="bpmn"?"BPMN":"P&ID"," diagram"]})]}),o.jsx(ea,{value:w,onChange:se=>_(se.target.value),placeholder:`e.g., "Add a ${t==="bpmn"?"decision gateway":"control valve"} after the first ${t==="bpmn"?"task":"process unit"}"`,className:"min-h-[120px]"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx(V,{variant:"outline",onClick:()=>{O(!1),_("")},children:"Cancel"}),o.jsx(V,{onClick:Ee,disabled:j||!w.trim(),children:j?"Refining...":"Apply Changes"})]})]})})]})]})})};async function hRe(e){const{data:t,error:n}=await oe.from("vision_bpmn_jobs").select("bpmn_xml").eq("id",e).single();return n||!(t!=null&&t.bpmn_xml)?(console.error("Failed to load job result:",n),null):t.bpmn_xml}function fRe(){const[e,t]=y.useState(null),[n,r]=y.useState(null),{jobId:i}=PH();return y.useEffect(()=>{oe.auth.getSession().then(({data:{session:s}})=>{r((s==null?void 0:s.user)??null)});const{data:{subscription:a}}=oe.auth.onAuthStateChange((s,c)=>{r((c==null?void 0:c.user)??null)});return()=>a.unsubscribe()},[]),y.useEffect(()=>{i&&(async()=>{try{const s=await hRe(i);t(s)}catch(s){console.error("Error loading job result:",s)}})()},[i]),o.jsx(Bt,{children:o.jsxs("div",{className:"flex flex-col gap-8",children:[o.jsx(dRe,{user:n,diagramType:"pid"}),e&&o.jsx(kP,{xml:e,diagramType:"pid"})]})})}async function pRe(e){try{const{data:t,error:n}=await oe.from("projects").insert(e).select().single();return n?{data:null,error:new Error(n.message)}:{data:t,error:null}}catch(t){return{data:null,error:t instanceof Error?t:new Error("Unknown error")}}}async function mRe(e,t){try{let n=oe.from("projects").select("*").eq("user_id",e).order("last_accessed_at",{ascending:!1});t!=null&&t.diagramType&&t.diagramType!=="all"&&(n=n.eq("diagram_type",t.diagramType));const{data:r,error:i}=await n;return i?{data:null,error:new Error(i.message)}:{data:r,error:null}}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}async function gRe(e,t,n){try{const{data:r,error:i}=await oe.from("projects").update(n).eq("id",e).eq("user_id",t).select().single();return i?{data:null,error:new Error(i.message)}:{data:r,error:null}}catch(r){return{data:null,error:r instanceof Error?r:new Error("Unknown error")}}}async function vRe(e,t){try{const{error:n}=await oe.from("projects").delete().eq("id",e).eq("user_id",t);return n?{error:new Error(n.message)}:{error:null}}catch(n){return{error:n instanceof Error?n:new Error("Unknown error")}}}async function eU(e,t){try{const{error:n}=await oe.from("projects").update({last_accessed_at:new Date().toISOString()}).eq("id",e).eq("user_id",t);return n?{error:new Error(n.message)}:{error:null}}catch(n){return{error:n instanceof Error?n:new Error("Unknown error")}}}async function yRe(e,t=6){try{const{data:n,error:r}=await oe.from("projects").select("*").eq("user_id",e).order("last_accessed_at",{ascending:!1}).limit(t);return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}const xI=({user:e})=>{const t=Mi(),{remainingPrompts:n,isUnlimited:r}=eb(!0),[i,a]=y.useState([]),[s,c]=y.useState(!0);y.useEffect(()=>{const u=async()=>{c(!0);const{data:d,error:h}=await yRe(e.id,6);h?(console.error("Failed to load recent projects:",h),a([])):d&&a(d),c(!1)};e!=null&&e.id&&u()},[e==null?void 0:e.id]);const l=async u=>{await eU(u.id,e.id);const d=u.diagram_type==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(d,u.bpmn_xml),localStorage.setItem("diagramType",u.diagram_type),localStorage.setItem("currentProjectId",u.id);const h=u.diagram_type==="bpmn"?"/bpmn-generator":"/pid-generator";Gn(t,h)};return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Dashboard"}),o.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.email]})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[o.jsxs(ue,{className:"cursor-pointer hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 flex flex-col",onClick:()=>Gn(t,"/bpmn-generator"),children:[o.jsxs(ve,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx($i,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(be,{children:"New BPMN Diagram"})]}),o.jsx(Te,{className:"text-center",children:"Create a new business process diagram"})]}),o.jsx(pe,{className:"mt-auto",children:o.jsxs(V,{className:"w-full",onClick:u=>{u.stopPropagation(),Gn(t,"/bpmn-generator")},children:[o.jsx(lf,{className:"h-4 w-4 mr-2"}),"Create BPMN"]})})]}),o.jsxs(ue,{className:"cursor-pointer hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 flex flex-col",onClick:()=>Gn(t,"/pid-generator"),children:[o.jsxs(ve,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx(yl,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(be,{children:"New P&ID Diagram"})]}),o.jsx(Te,{className:"text-center",children:"Create a new piping and instrumentation diagram"})]}),o.jsx(pe,{className:"mt-auto",children:o.jsxs(V,{className:"w-full",onClick:u=>{u.stopPropagation(),Gn(t,"/pid-generator")},children:[o.jsx(lf,{className:"h-4 w-4 mr-2"}),"Create P&ID"]})})]}),o.jsxs(ue,{className:"cursor-pointer hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 flex flex-col",onClick:()=>Gn(t,"/vision-ai"),children:[o.jsxs(ve,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx(Da,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(be,{children:"Vision AI"})]}),o.jsx(Te,{className:"text-center",children:"Upload images to generate diagrams"})]}),o.jsx(pe,{className:"mt-auto",children:o.jsxs(V,{className:"w-full",onClick:u=>{u.stopPropagation(),Gn(t,"/vision-ai")},children:[o.jsx(lf,{className:"h-4 w-4 mr-2"}),"Upload Image"]})})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs(ue,{className:"flex flex-col hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:[o.jsxs(ve,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx("div",{className:"h-10 w-10 mb-4 flex items-center justify-center",children:o.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx("span",{className:"text-primary font-bold text-xl",children:""})})}),o.jsx(be,{children:"Usage Statistics"})]}),o.jsx(Te,{className:"text-center",children:"Your current plan usage"})]}),o.jsxs(pe,{className:"flex-1 flex flex-col",children:[o.jsxs("div",{className:"space-y-4 flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Free Prompts Remaining"}),o.jsx("span",{className:"text-2xl font-bold",children:r?"":n})]}),!r&&o.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:o.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${n/5*100}%`}})})]}),o.jsx("div",{className:"mt-auto pt-4",children:o.jsx(V,{variant:"outline",className:"w-full",onClick:()=>Gn(t,"/settings"),children:"View Plan Details"})})]})]}),o.jsxs(ue,{className:"flex flex-col hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:[o.jsxs(ve,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx("div",{className:"h-10 w-10 mb-4 flex items-center justify-center",children:o.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx(Lp,{className:"h-5 w-5 text-primary"})})}),o.jsx(be,{children:"Recent Projects"})]}),o.jsx(Te,{className:"text-center",children:"Your recently created diagrams"})]}),o.jsxs(pe,{className:"flex-1 flex flex-col",children:[o.jsx("div",{className:"flex-1",children:s?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(Ir,{className:"h-6 w-6 animate-spin text-primary"})}):i.length>0?o.jsx("div",{className:"space-y-3",children:i.map(u=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>l(u),children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[u.diagram_type==="bpmn"?o.jsx($i,{className:"h-4 w-4 text-primary flex-shrink-0"}):o.jsx(yl,{className:"h-4 w-4 text-primary flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm truncate",children:u.name}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.diagram_type==="bpmn"?"BPMN":"P&ID","  ",new Date(u.last_accessed_at).toLocaleDateString()]})]})]}),o.jsx(Wn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]},u.id))}):o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(Wn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No recent projects"}),o.jsx("p",{className:"text-sm mt-2",children:"Create your first diagram to get started"})]})}),o.jsx("div",{className:"mt-auto pt-4",children:o.jsx(V,{variant:"outline",className:"w-full",onClick:()=>Gn(t,"/projects"),children:"View All Projects"})})]})]})]})]})})},xRe=({user:e})=>{const t=Mi(),[n,r]=y.useState([]),[i,a]=y.useState([]),[s,c]=y.useState(""),[l,u]=y.useState("all"),[d,h]=y.useState(!0),[f,p]=y.useState(!1),[m,g]=y.useState(null),[v,x]=y.useState(!1),b=async()=>{h(!0);const S=l!=="all"?{diagramType:l}:void 0,{data:N,error:P}=await mRe(e.id,S);if(P){$.error("Failed to load projects"),console.error(P),h(!1);return}N&&r(N),h(!1)};y.useEffect(()=>{b()},[e.id,l]),y.useEffect(()=>{let S=n;s&&(S=S.filter(N=>{var P;return N.name.toLowerCase().includes(s.toLowerCase())||((P=N.description)==null?void 0:P.toLowerCase().includes(s.toLowerCase()))})),a(S)},[n,s]);const w=S=>{g(S),p(!0)},_=async()=>{if(!m)return;x(!0);const{error:S}=await vRe(m.id,e.id);S?($.error("Failed to delete project"),console.error(S)):($.success("Project deleted successfully"),await b()),x(!1),p(!1),g(null)},j=async S=>{await eU(S.id,e.id);const N=S.diagram_type==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(N,S.bpmn_xml),localStorage.setItem("diagramType",S.diagram_type),localStorage.setItem("currentProjectId",S.id);const P=S.diagram_type==="bpmn"?"/bpmn-generator":"/pid-generator";Gn(t,P)};return d?o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsx(Bt,{children:o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsx(Ir,{className:"h-8 w-8 animate-spin text-primary"})})})}):o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Projects"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your diagrams and processes"})]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:b,disabled:d,children:[o.jsx(w7,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]})]})}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Xu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(pn,{placeholder:"Search projects...",value:s,onChange:S=>c(S.target.value),className:"pl-10"})]}),o.jsxs(es,{value:l,onValueChange:S=>u(S),children:[o.jsx(Oa,{className:"w-full md:w-[180px]",children:o.jsx(ts,{placeholder:"Filter by type"})}),o.jsxs(Ra,{children:[o.jsx(Qe,{value:"all",children:"All Types"}),o.jsx(Qe,{value:"bpmn",children:"BPMN"}),o.jsx(Qe,{value:"pid",children:"P&ID"})]})]}),o.jsxs(V,{onClick:()=>Gn(t,"/bpmn-generator"),children:[o.jsx(Wn,{className:"h-4 w-4 mr-2"}),"New Project"]})]}),i.length>0?o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(S=>o.jsxs(ue,{className:"hover:shadow-lg transition-shadow",children:[o.jsx(ve,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[S.diagram_type==="bpmn"?o.jsx($i,{className:"h-6 w-6 text-primary flex-shrink-0"}):o.jsx(yl,{className:"h-6 w-6 text-primary flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx(be,{className:"text-lg truncate",children:S.name}),o.jsx(Te,{children:new Date(S.created_at).toLocaleDateString()}),S.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:S.description})]})]}),o.jsx(Zt,{variant:S.diagram_type==="bpmn"?"default":"secondary",className:"ml-2 flex-shrink-0",children:S.diagram_type.toUpperCase()})]})}),o.jsx(pe,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>j(S),children:[o.jsx(gS,{className:"h-4 w-4 mr-2"}),"Edit"]}),o.jsx(V,{variant:"outline",size:"sm",onClick:()=>w(S),children:o.jsx(Fp,{className:"h-4 w-4"})})]})})]},S.id))}):o.jsx(ue,{children:o.jsxs(pe,{className:"flex flex-col items-center justify-center py-16",children:[o.jsx(Wn,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No projects found"}),o.jsx("p",{className:"text-muted-foreground text-center mb-6",children:s||l!=="all"?"Try adjusting your search or filters":"Create your first diagram to get started"}),o.jsxs(V,{onClick:()=>Gn(t,"/bpmn-generator"),children:[o.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Create New Project"]})]})}),o.jsx(PP,{open:f,onOpenChange:p,children:o.jsxs(Gb,{children:[o.jsxs(Wb,{children:[o.jsx(Kb,{children:"Are you sure?"}),o.jsxs(Yb,{children:['This will permanently delete "',m==null?void 0:m.name,'". This action cannot be undone.']})]}),o.jsxs(qb,{children:[o.jsx(Zb,{disabled:v,children:"Cancel"}),o.jsx(Xb,{onClick:_,disabled:v,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:v?o.jsxs(o.Fragment,{children:[o.jsx(Ir,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})})};async function bRe(e){try{let t=oe.from("templates").select("*").eq("is_active",!0).order("name",{ascending:!0});e!=null&&e.category&&e.category,e!=null&&e.diagramType;const{data:n,error:r}=await t;return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(t){return{data:null,error:t instanceof Error?t:new Error("Unknown error")}}}async function wRe(e,t){try{const{data:n,error:r}=await oe.from("templates").select("bpmn_xml, usage_count").eq("id",e).eq("is_active",!0).single();return r||!n?{data:null,error:new Error((r==null?void 0:r.message)||"Template not found")}:(oe.from("templates").update({usage_count:(n.usage_count||0)+1}).eq("id",e).then(()=>{},()=>{}),{data:n.bpmn_xml,error:null})}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}async function _Re(e){try{const{data:t,error:n}=await oe.from("templates").insert(e).select().single();return n?{data:null,error:new Error(n.message)}:{data:t,error:null}}catch(t){return{data:null,error:t instanceof Error?t:new Error("Unknown error")}}}async function jRe(e,t){try{const{data:n,error:r}=await oe.from("templates").update(t).eq("id",e).select().single();return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}async function SRe(e){try{const{error:t}=await oe.from("templates").update({is_active:!1}).eq("id",e);return t?{error:new Error(t.message)}:{error:null}}catch(t){return{error:t instanceof Error?t:new Error("Unknown error")}}}async function ERe(e){try{let t=oe.from("templates").select("*").order("created_at",{ascending:!1});e!=null&&e.category&&e.category,e!=null&&e.diagramType;const{data:n,error:r}=await t;return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(t){return{data:null,error:t instanceof Error?t:new Error("Unknown error")}}}const NRe={Users:Cf,ShoppingCart:N7,Building2:Wy,Cog:XW,Factory:yl,Workflow:$i},PRe=e=>e&&NRe[e]||$i,kRe=({user:e})=>{const t=Mi(),[n,r]=y.useState("all"),[i,a]=y.useState([]),[s,c]=y.useState(!0),[l,u]=y.useState(null);y.useEffect(()=>{(async()=>{c(!0),u(null);const{data:m,error:g}=await bRe();g?(u(g.message),$.error("Failed to load templates")):m&&a(m),c(!1)})()},[]);const d=["all",...Array.from(new Set(i.map(p=>p.category)))],h=n==="all"?i:i.filter(p=>p.category===n),f=async p=>{try{const{data:m,error:g}=await wRe(p.id,e.id);if(g||!m){$.error("Failed to load template");return}const v=p.diagram_type==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(v,m),localStorage.setItem("diagramType",p.diagram_type),p.diagram_type==="bpmn"?Gn(t,"/bpmn-generator"):Gn(t,"/pid-generator"),$.success("Template loaded successfully!")}catch(m){$.error("Failed to use template"),console.error(m)}};return s?o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsx(Bt,{children:o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsx(Ir,{className:"h-8 w-8 animate-spin text-primary"})})})}):l?o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsx(Bt,{children:o.jsx(ue,{className:"hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:o.jsxs(pe,{className:"flex flex-col items-center justify-center py-16",children:[o.jsx($i,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Error loading templates"}),o.jsx("p",{className:"text-muted-foreground",children:l})]})})})}):o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Templates"}),o.jsx("p",{className:"text-muted-foreground",children:"Start with a pre-built process template"})]}),d.length>1&&o.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:d.map(p=>o.jsx(V,{variant:n===p?"default":"outline",onClick:()=>r(p),className:"capitalize",children:p},p))}),h.length>0?o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(p=>{const m=PRe(p.icon_name);return o.jsxs(ue,{className:"flex flex-col hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:[o.jsxs(ve,{className:"flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx(m,{className:"h-8 w-8 text-primary flex-shrink-0"}),o.jsx(Zt,{variant:p.diagram_type==="bpmn"?"default":"secondary",children:p.diagram_type.toUpperCase()})]}),o.jsx(be,{className:"mb-2 min-h-[3rem]",children:p.name}),o.jsx(Te,{className:"min-h-[4.5rem] max-h-[4.5rem] overflow-hidden",children:o.jsx("div",{className:"line-clamp-3",children:p.description||"No description available"})})]}),o.jsx(pe,{className:"mt-auto pt-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx(Zt,{variant:"outline",className:"capitalize flex-shrink-0",children:p.category}),o.jsx(V,{size:"sm",onClick:()=>f(p),className:"flex-shrink-0",children:"Use Template"})]})})]},p.id)})}):o.jsx(ue,{className:"hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:o.jsxs(pe,{className:"flex flex-col items-center justify-center py-16",children:[o.jsx($i,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No templates found"}),o.jsx("p",{className:"text-muted-foreground",children:"Try selecting a different category"})]})})]})})},CRe=({user:e})=>{const{toast:t}=Ud(),[n,r]=y.useState(e.email||""),[i,a]=y.useState(!1),s=async c=>{c.preventDefault(),a(!0);try{const{error:l}=await oe.auth.updateUser({email:n});if(l)throw l;t({title:"Email update requested",description:"Please check your new email for a confirmation link."})}catch(l){t({title:"Error updating email",description:l.message,variant:"destructive"})}finally{a(!1)}};return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Account"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your account information"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(kf,{className:"h-5 w-5"}),"Profile Information"]}),o.jsx(Te,{children:"Your account details"})]}),o.jsxs(pe,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Nt,{children:"User ID"}),o.jsx(pn,{value:e.id,disabled:!0,className:"mt-1 font-mono text-sm"})]}),o.jsxs("form",{onSubmit:s,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Nt,{htmlFor:"email",children:"Email Address"}),o.jsx(pn,{id:"email",type:"email",value:n,onChange:c=>r(c.target.value),className:"mt-1"})]}),o.jsx(V,{type:"submit",disabled:i||n===e.email,children:i?"Updating...":"Update Email"})]})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Jo,{className:"h-5 w-5"}),"Security"]}),o.jsx(Te,{children:"Manage your account security"})]}),o.jsxs(pe,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Nt,{children:"Password"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1 mb-3",children:"Change your password to keep your account secure"}),o.jsx(V,{variant:"outline",onClick:()=>{t({title:"Password reset",description:"A password reset link has been sent to your email."})},children:"Change Password"})]}),o.jsxs("div",{className:"pt-4 border-t",children:[o.jsx(Nt,{children:"Account Created"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:new Date(e.created_at).toLocaleDateString()})]})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(fS,{className:"h-5 w-5"}),"Email Preferences"]}),o.jsx(Te,{children:"Manage your email notifications"})]}),o.jsx(pe,{children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"Email preferences will be available soon."})})]})]})]})})},ARe=({user:e})=>{const{remainingPrompts:t,isUnlimited:n}=eb(!0),[r,i]=y.useState({email:!0,push:!1,updates:!0}),[a,s]=y.useState("en"),[c,l]=y.useState("system");return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Customize your experience"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Plan Details"}),o.jsx(Te,{children:"Your current subscription plan"})]}),o.jsxs(pe,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Nt,{children:"Current Plan"}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:n?"Pro":"Free"})]}),o.jsxs("div",{children:[o.jsx(Nt,{children:"Free Prompts Remaining"}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:n?"":t})]}),o.jsx(V,{className:"w-full",children:"Upgrade Plan"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(BW,{className:"h-5 w-5"}),"Notifications"]}),o.jsx(Te,{children:"Manage your notification preferences"})]}),o.jsxs(pe,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Nt,{children:"Email Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive updates via email"})]}),o.jsx(Vs,{checked:r.email,onCheckedChange:u=>i({...r,email:u})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Nt,{children:"Push Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive browser notifications"})]}),o.jsx(Vs,{checked:r.push,onCheckedChange:u=>i({...r,push:u})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Nt,{children:"Product Updates"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about new features"})]}),o.jsx(Vs,{checked:r.updates,onCheckedChange:u=>i({...r,updates:u})})]})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Bp,{className:"h-5 w-5"}),"API Keys"]}),o.jsx(Te,{children:"Manage your API access keys"})]}),o.jsxs(pe,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"API keys allow you to integrate ProssMind with your applications."}),o.jsx(V,{variant:"outline",className:"w-full",children:"Generate API Key"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(hS,{className:"h-5 w-5"}),"Preferences"]}),o.jsx(Te,{children:"Customize your app experience"})]}),o.jsxs(pe,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Nt,{htmlFor:"language",children:"Language"}),o.jsxs(es,{value:a,onValueChange:s,children:[o.jsx(Oa,{id:"language",className:"mt-1",children:o.jsx(ts,{})}),o.jsxs(Ra,{children:[o.jsx(Qe,{value:"en",children:"English"}),o.jsx(Qe,{value:"de",children:"Deutsch"}),o.jsx(Qe,{value:"fr",children:"Franais"})]})]})]}),o.jsxs("div",{children:[o.jsx(Nt,{htmlFor:"theme",children:"Theme"}),o.jsxs(es,{value:c,onValueChange:l,children:[o.jsx(Oa,{id:"theme",className:"mt-1",children:o.jsx(ts,{})}),o.jsxs(Ra,{children:[o.jsx(Qe,{value:"light",children:"Light"}),o.jsx(Qe,{value:"dark",children:"Dark"}),o.jsx(Qe,{value:"system",children:"System"})]})]})]})]})]})]})]})})};function TRe({open:e,onOpenChange:t,onSave:n,diagramType:r="bpmn",defaultName:i="",defaultDescription:a="",isLoading:s=!1}){const[c,l]=y.useState(""),[u,d]=y.useState("");y.useEffect(()=>{e&&(l(i||""),d(a||""))},[e,i,a]);const h=()=>{c.trim()&&n(c.trim(),u.trim())},f=()=>{l(""),d(""),t(!1)},p=r==="bpmn"?"BPMN":"P&ID";return o.jsx(Xn,{open:e,onOpenChange:t,children:o.jsxs(Bn,{children:[o.jsxs(Fn,{children:[o.jsxs(zn,{children:["Save ",p," Project"]}),o.jsx(Un,{children:"Give your project a name and optional description to save it to your workspace."})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Nt,{htmlFor:"project-name",children:["Project Name ",o.jsx("span",{className:"text-destructive",children:"*"})]}),o.jsx(pn,{id:"project-name",placeholder:`My ${p} Diagram`,value:c,onChange:m=>l(m.target.value),onKeyDown:m=>{m.key==="Enter"&&c.trim()&&h()},maxLength:100,disabled:s})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Nt,{htmlFor:"project-description",children:"Description (Optional)"}),o.jsx(ea,{id:"project-description",placeholder:"Add a description for your project...",value:u,onChange:m=>d(m.target.value),maxLength:500,rows:3,disabled:s})]})]}),o.jsxs(ov,{children:[o.jsx(V,{variant:"outline",onClick:f,disabled:s,children:"Cancel"}),o.jsx(V,{onClick:h,disabled:!c.trim()||s,children:s?"Saving...":"Save Project"})]})]})})}const bI=({user:e})=>{const t=Mi(),n=li(),{hasUsedAllPrompts:r,usePrompt:i}=eb(!!e),[a,s]=y.useState(""),[c,l]=y.useState(!1),[u,d]=y.useState(null),[h,f]=y.useState("bpmn"),p=U7(),[m,g]=y.useState(!1),[v,x]=y.useState("en-US"),[b,w]=y.useState(null),[_,j]=y.useState(!1),[S,N]=y.useState(""),[P,k]=y.useState(!1),[T,A]=y.useState("idle"),[O,D]=y.useState("idle"),[L,G]=y.useState(!1),[H,K]=y.useState(null),[Z,q]=y.useState(!1),le=y.useRef(null),_e=y.useRef(null),re=y.useRef(null),[de,Se]=y.useState(!1),[nt,St]=y.useState(null),[Ee,se]=y.useState(!1),[X,ne]=y.useState(null),[ae,W]=y.useState(null),[Re,Pe]=y.useState(0),[Ve,Ct]=y.useState(null),[qt,tr]=y.useState(!1);y.useEffect(()=>{const je=localStorage.getItem("diagramType")||"bpmn",Ge=je==="bpmn"?"generatedBpmn":"generatedPid",We=localStorage.getItem(Ge),zt=localStorage.getItem("currentProjectId");if(We){d(We),St(zt),localStorage.removeItem(Ge),localStorage.removeItem("diagramType"),zt&&localStorage.removeItem("currentProjectId");const ht=je==="bpmn"?"BPMN":"P&ID";$.success(`Your generated ${ht} diagram is ready!`,{description:"You can now view and edit your process diagram"}),setTimeout(()=>{var Le;(Le=document.getElementById("bpmn-viewer"))==null||Le.scrollIntoView({behavior:"smooth",block:"start"})},500)}},[]),y.useEffect(()=>{if(!H)return;let je;const Ge=async()=>{const{data:ht,error:Le}=await oe.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",H).single();if(Le){console.error("Error checking job status:",Le);return}if(console.log("Job status:",ht.status),ht.status==="completed"&&ht.bpmn_xml){const en=h==="bpmn"?"BPMN":"P&ID";d(ht.bpmn_xml),D("idle"),l(!1),K(null),j(!1),w(null),$.success(`${en} diagram generated successfully!`),setTimeout(()=>{var Tt;(Tt=document.getElementById("bpmn-viewer"))==null||Tt.scrollIntoView({behavior:"smooth",block:"start"})},500),je&&clearInterval(je)}else if(ht.status==="failed"){const en=ht.error_message||"Processing failed. Please try again.";D("idle"),l(!1),K(null),$.error("Upload failed",{description:en,action:{label:"Retry",onClick:()=>{}},duration:1e4}),je&&clearInterval(je)}},We=oe.channel(`job-${H}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${H}`},ht=>{const Le=ht.new;if(console.log("Realtime job status update:",Le.status),Le.status==="completed"&&Le.bpmn_xml){const en=h==="bpmn"?"BPMN":"P&ID";d(Le.bpmn_xml),D("idle"),l(!1),K(null),j(!1),w(null),$.success(`${en} diagram generated successfully!`),e&&(ne(Le.bpmn_xml),Se(!0)),setTimeout(()=>{var Tt;(Tt=document.getElementById("bpmn-viewer"))==null||Tt.scrollIntoView({behavior:"smooth",block:"start"})},500),je&&clearInterval(je)}else if(Le.status==="failed"){const en=Le.error_message||"Processing failed. Please try again.";D("idle"),l(!1),K(null),$.error("Upload failed",{description:en,action:{label:"Retry",onClick:()=>{b&&yn()}},duration:1e4}),je&&clearInterval(je)}}).subscribe();je=window.setInterval(Ge,3e3),Ge();const zt=window.setTimeout(()=>{je&&clearInterval(je);const ht="Processing timed out - Please try refreshing the page or contact support";D("idle"),l(!1),K(null),$.error("Upload failed",{description:ht,action:{label:"Retry",onClick:()=>{b&&yn()}},duration:1e4})},3e5);return()=>{clearTimeout(zt),oe.removeChannel(We),je&&clearInterval(je)}},[H,h,b]);const Dn=async je=>{var We,zt;if(c)return;if(!je.trim()){$.error("Please enter a process description");return}if(!e&&r){$.error("You've used all 5 free prompts. Please sign up to continue!"),t("/auth");return}if(!e&&!i()){$.error("You've used all 5 free prompts. Please sign up to continue!"),t("/auth");return}l(!0);const Ge=h==="bpmn"?"BPMN":"P&ID";D("reading"),await new Promise(ht=>setTimeout(ht,500)),D("generating");try{const{invokeFunction:ht}=await Pu(async()=>{const{invokeFunction:Tt}=await Promise.resolve().then(()=>TS);return{invokeFunction:Tt}},void 0),{data:Le,error:en}=await ht("generate-bpmn",{prompt:je,diagramType:h,userId:e==null?void 0:e.id},{deduplicate:!0});if(en){console.error("Function error:",en),D("idle"),(We=en.message)!=null&&We.includes("429")?$.error("Rate limit exceeded. Please try again in a moment."):(zt=en.message)!=null&&zt.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):$.error(`Failed to generate ${Ge} model`);return}if(Le!=null&&Le.requiresPolling&&(Le!=null&&Le.jobId)){console.log(`[Async Mode] Complex prompt detected, job created: ${Le.jobId}`),console.log(`[Async Mode] Estimated time: ${Le.estimatedTime||"60-90 seconds"}`),K(Le.jobId),D("generating"),$.info(Le.message||"Complex prompt - generation started in background",{description:`Estimated time: ${Le.estimatedTime||"60-90 seconds"}. We'll notify you when ready.`});return}if(Le!=null&&Le.requiresSplit&&(Le!=null&&Le.subPrompts)){console.log(`[Complex Prompt] Detected complex prompt with ${Le.subPrompts.length} sub-prompts, generating diagrams...`),$.info(`Complex workflow detected! Generating ${Le.subPrompts.length} detailed diagrams...`,{description:"You'll be able to navigate between them"});const{data:Tt,error:kr}=await ht("generate-bpmn-combined",{subPrompts:Le.subPrompts,diagramType:h,userId:e==null?void 0:e.id,originalPrompt:je});if(kr){console.error("Multi-diagram generation error:",kr),D("idle"),$.error("Failed to generate diagrams",{description:kr.message||"Please try with a simpler prompt"});return}if(Tt!=null&&Tt.diagrams&&Tt.diagrams.length>0){D("drawing"),await new Promise(fa=>setTimeout(fa,500)),W(Tt.diagrams),Pe(0),tr(!1),Tt.combinedXml&&Ct(Tt.combinedXml);const Lt=Tt.diagrams[0];d(Lt.xml),D("idle"),$.success(`Generated ${Tt.diagrams.length} diagrams for complex workflow!`,{description:'Use the tabs to navigate. Click " Combined Overview" to see the full structure.'}),e&&(ne(Lt.xml),Se(!0))}else D("idle"),$.error("No diagrams generated");return}D("drawing"),await new Promise(Tt=>setTimeout(Tt,500)),Le!=null&&Le.bpmnXml?(d(Le.bpmnXml),D("idle"),$.success(`${Ge} model generated successfully!`),e&&(ne(Le.bpmnXml),Se(!0))):(D("idle"),$.error("No diagram data received"))}catch(ht){console.error("Error generating BPMN:",ht),D("idle"),$.error("An error occurred while generating the model")}finally{l(!1)}},Jr=()=>{Dn(a)},ur=async je=>{var Tt,kr;const Ge="dataTransfer"in je?(Tt=je.dataTransfer.files)==null?void 0:Tt[0]:(kr=je.target.files)==null?void 0:kr[0];if(!Ge)return;const{data:{user:We},error:zt}=await oe.auth.getUser();if(zt||!We){$.error("Please log in to upload and analyze documents"),t("/auth");return}if(!["image/png","image/jpeg","image/jpg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(Ge.type)){$.error("Please upload an image, PDF, Word document, or text file");return}l(!0);const Le=h==="bpmn"?"BPMN":"P&ID";$.info(`Analyzing document and generating ${Le}...`);const en=new FileReader;en.onloadend=async()=>{const Lt=en.result;w({name:Ge.name,type:Ge.type,base64:Lt}),j(!0),l(!1),$.success(`File uploaded! Review the preview before generating ${Le}.`)},en.readAsDataURL(Ge)},br=async()=>{if(m)_e.current&&_e.current.state==="recording"&&_e.current.stop(),re.current&&(re.current.getTracks().forEach(je=>je.stop()),re.current=null),g(!1),_e.current=null;else try{const je=await navigator.mediaDevices.getUserMedia({audio:!0});re.current=je;const Ge=new MediaRecorder(je),We=[];Ge.ondataavailable=zt=>{We.push(zt.data)},Ge.onstop=async()=>{const zt=new Blob(We,{type:"audio/webm"}),ht=new FileReader;ht.readAsDataURL(zt),ht.onloadend=async()=>{var en;const Le=(en=ht.result)==null?void 0:en.toString().split(",")[1];try{const{data:Tt,error:kr}=await oe.functions.invoke("speech-to-text",{body:{audio:Le,language:v},headers:e?void 0:{Authorization:""}});if(kr)throw kr;Tt!=null&&Tt.text&&(s(Tt.text),$.success("Voice recorded successfully!"))}catch(Tt){console.error("Speech-to-text error:",Tt),$.error("Failed to convert speech to text.")}},re.current&&(re.current.getTracks().forEach(Le=>Le.stop()),re.current=null)},Ge.start(),_e.current=Ge,g(!0),$.info("Recording... Click again to stop")}catch(je){console.error("Error accessing microphone:",je),$.error("Could not access microphone. Please check permissions.")}},yn=async()=>{if(b){l(!0),j(!1),D("reading"),await new Promise(je=>setTimeout(je,500)),D("generating");try{const{data:{user:je}}=await oe.auth.getUser();if(!je){D("idle"),$.error("Please log in to continue"),t("/auth");return}const Ge=b.base64.length*.75,We=200*1024*1024;if(Ge>We){D("idle"),l(!1),$.error("File too large",{description:"Maximum file size is 200 MB. Please select a smaller file."});return}const zt=$.loading("Processing your file...",{description:"This may take 30-60 seconds for complex diagrams"}),{data:ht,error:Le}=await oe.functions.invoke("vision-to-bpmn",{body:{imageBase64:b.base64,diagramType:h},headers:e?void 0:{Authorization:""}});if($.dismiss(zt),Le){console.error("Vision AI error:",Le),D("idle"),l(!1);const en=Le.message||"Failed to start diagram generation";$.error("Upload failed",{description:en,action:{label:"Retry",onClick:()=>{yn()}},duration:1e4});return}if(!ht||!ht.jobId){D("idle"),l(!1),$.error("Upload failed",{description:"Failed to start processing",action:{label:"Retry",onClick:()=>{yn()}},duration:1e4});return}K(ht.jobId),D("generating"),$.info("Processing started",{description:"We'll notify you when your diagram is ready (this may take 1-2 minutes)"})}catch(je){console.error("Vision AI processing error:",je),D("idle"),l(!1);const Ge=je instanceof Error?je.message:"Network error - Please check your connection and try again";$.error("Upload failed",{description:Ge,action:{label:"Retry",onClick:()=>{yn()}},duration:1e4})}}},Lr=async()=>{if(!u||!S.trim()){const We=h==="bpmn"?"BPMN":"P&ID";$.error(`Please enter instructions to refine the ${We}`);return}const{data:{user:je}}=await oe.auth.getUser();if(!je){const We=h==="bpmn"?"BPMN":"P&ID";$.error(`Please log in to refine ${We}`),t("/auth");return}k(!0);const Ge=h==="bpmn"?"BPMN":"P&ID";$.info(`Refining ${Ge} based on your instructions...`),A("analyzing"),await new Promise(We=>setTimeout(We,500)),A("refining");try{const{data:We,error:zt}=await oe.functions.invoke("refine-bpmn",{body:{currentBpmnXml:u,instructions:S,userId:je.id,diagramType:h},headers:e?void 0:{Authorization:""}});if(zt){console.error("Refinement error:",zt),A("idle");const ht=zt.message||JSON.stringify(zt);ht.includes("429")?$.error("Rate limit exceeded. Please try again in a moment."):ht.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):ht.includes("401")||ht.includes("Authentication")?($.error("Authentication required. Please log in again."),t("/auth")):$.error(`Failed to refine ${Ge}: ${ht}`);return}if(We!=null&&We.error){console.error("Refinement error in response:",We.error),A("idle");const ht=typeof We.error=="string"?We.error:JSON.stringify(We.error);ht.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):ht.includes("401")||ht.includes("Authentication")?($.error("Authentication required. Please log in again."),t("/auth")):$.error(`Failed to refine ${Ge}: ${ht}`);return}if(We!=null&&We.bpmnXml){A("applying"),await new Promise(Le=>setTimeout(Le,300));const ht=We.bpmnXml.includes("</bpmn:definitions>")||We.bpmnXml.includes("</definitions>");We.bpmnXml.includes("<?xml")&&ht?(d(We.bpmnXml),A("idle"),$.success(`${Ge} refined successfully!`),N("")):(console.error("Received invalid diagram XML:",We.bpmnXml.substring(0,200)),A("idle"),$.error("Received invalid diagram structure. Please try again."))}else console.error("No refined diagram received. Response:",We),A("idle"),$.error("No refined diagram received. The function may not be deployed or there was an error.")}catch(We){console.error("BPMN refinement error:",We),A("idle");const zt=We instanceof Error?We.message:String(We);zt.includes("Failed to fetch")||zt.includes("load the resource")?$.error("Network error: Unable to reach refine-bpmn function. Please check if the function is deployed."):$.error(`Failed to refine ${h==="bpmn"?"BPMN":"P&ID"}: ${zt}`)}finally{k(!1)}};return o.jsxs(ce.section,{className:`${p?"py-8":"py-24"} bg-muted/20 relative`,"data-section":"try-prossmind",initial:n?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:rt(n)||{duration:.7},children:[o.jsx("div",{className:"w-full h-[calc(100vh-4rem)] px-6",children:o.jsx("div",{className:"h-full flex flex-col",children:o.jsx("div",{className:"flex-1 min-h-0",children:o.jsxs("div",{id:"bpmn-viewer",className:"grid grid-cols-1 lg:grid-cols-[3fr_7fr] gap-6 h-full",children:[o.jsx("div",{className:"flex flex-col h-full pt-4 pb-4",children:o.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:o.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[ae&&ae.length>1&&o.jsxs("div",{className:"bg-card border border-border rounded-2xl p-4 shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground",children:["Complex Workflow - ",ae.length," Diagrams"]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:qt?"Combined Overview":`Diagram ${Re+1} of ${ae.length}`})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[ae.map((je,Ge)=>o.jsxs(V,{variant:!qt&&Re===Ge?"default":"outline",size:"sm",onClick:()=>{tr(!1),Pe(Ge),d(je.xml),$.info(`Switched to: ${je.title}`)},className:"text-xs",children:[o.jsxs("span",{className:"mr-1",children:[Ge+1,"."]}),je.title.length>50?je.title.substring(0,50)+"...":je.title]},je.id)),Ve&&o.jsx(V,{variant:qt?"default":"outline",size:"sm",onClick:()=>{tr(!0),d(Ve),$.info("Switched to Combined Overview - expand subprocesses to see details")},className:"text-xs font-semibold",children:"Combined Overview"})]})]}),o.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl flex flex-col flex-1 min-h-0",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 flex-shrink-0",children:"Prompt"}),o.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[o.jsxs(BS,{defaultValue:"prompt",className:"w-full flex-1 flex flex-col min-h-0",children:[o.jsxs(tx,{className:"grid w-full grid-cols-3 bg-muted/50 flex-shrink-0 mb-4",children:[o.jsxs(Ls,{value:"prompt",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(pS,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Prompt"})]}),o.jsxs(Ls,{value:"voice",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(tv,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Voice"})]}),o.jsxs(Ls,{value:"attachment",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(nv,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Attachment"})]})]}),o.jsx(Bs,{value:"prompt",className:"flex-1 flex flex-col min-h-0 mt-0",children:o.jsx(ea,{placeholder:"Describe your process step by step...",value:a,onChange:je=>s(je.target.value),className:"flex-1 resize-none border-muted min-h-0",disabled:c})}),o.jsx(Bs,{value:"voice",className:"mt-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cD,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs(es,{value:v,onValueChange:x,children:[o.jsx(Oa,{className:"w-[200px] h-8",children:o.jsx(ts,{placeholder:"Select language"})}),o.jsxs(Ra,{children:[o.jsx(Qe,{value:"en-US",children:"English (US)"}),o.jsx(Qe,{value:"en-GB",children:"English (UK)"}),o.jsx(Qe,{value:"es-ES",children:"Spanish"}),o.jsx(Qe,{value:"fr-FR",children:"French"}),o.jsx(Qe,{value:"de-DE",children:"German"}),o.jsx(Qe,{value:"it-IT",children:"Italian"}),o.jsx(Qe,{value:"pt-BR",children:"Portuguese (Brazil)"}),o.jsx(Qe,{value:"pt-PT",children:"Portuguese (Portugal)"}),o.jsx(Qe,{value:"ru-RU",children:"Russian"}),o.jsx(Qe,{value:"ja-JP",children:"Japanese"}),o.jsx(Qe,{value:"ko-KR",children:"Korean"}),o.jsx(Qe,{value:"zh-CN",children:"Chinese (Simplified)"}),o.jsx(Qe,{value:"zh-TW",children:"Chinese (Traditional)"}),o.jsx(Qe,{value:"ar-SA",children:"Arabic"}),o.jsx(Qe,{value:"hi-IN",children:"Hindi"})]})]})]}),o.jsx(V,{variant:"outline",onClick:br,disabled:c,className:m?"text-red-500 border-red-500 w-full":"w-full",children:m?o.jsxs(o.Fragment,{children:[o.jsx(uD,{className:"h-4 w-4 mr-2 animate-pulse"}),"Click to Stop Recording"]}):o.jsxs(o.Fragment,{children:[o.jsx(tv,{className:"h-4 w-4 mr-2"}),"Start Voice Recording"]})})]})}),o.jsx(Bs,{value:"attachment",className:"mt-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{ref:le,type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:ur,className:"hidden"}),o.jsxs("div",{onDragOver:je=>{je.preventDefault(),q(!0)},onDragLeave:()=>q(!1),onDrop:je=>{je.preventDefault(),q(!1),ur(je)},className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${Z?"border-primary bg-primary/5 scale-[1.02]":"border-border hover:border-primary/50"}`,children:[o.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(ka,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PNG/JPG"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Wn,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PDF"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(sD,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"DOCX"})]})]}),o.jsxs(V,{variant:"outline",onClick:()=>{var je;return(je=le.current)==null?void 0:je.click()},disabled:c,className:"w-full","aria-label":"Upload file",children:[o.jsx(nv,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload File"]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Drag and drop a file here or click to browse"})]})]})})]}),c&&O!=="idle"&&o.jsxs("div",{className:"space-y-3 p-4 bg-muted/50 rounded-lg border border-border",children:[o.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Processing your document..."}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:O==="reading"?"font-semibold":"text-muted-foreground",children:[O==="reading"&&o.jsx(Ir,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),O!=="reading"&&" ","Step 1: Reading prompt..."]}),O==="reading"&&o.jsx(Ds,{value:33,className:"w-24","aria-label":"Progress: 33%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:O==="generating"?"font-semibold":O==="drawing"?"text-muted-foreground":"",children:[O==="generating"&&o.jsx(Ir,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),O!=="generating"&&O!=="reading"&&" ","Step 2: Generating..."]}),O==="generating"&&o.jsx(Ds,{value:66,className:"w-24","aria-label":"Progress: 66%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:O==="drawing"?"font-semibold":"text-muted-foreground",children:[O==="drawing"&&o.jsx(Ir,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),O!=="drawing"&&O!=="generating"&&O!=="reading"&&" ","Step 3: Drawing Diagram..."]}),O==="drawing"&&o.jsx(Ds,{value:100,className:"w-24","aria-label":"Progress: 100%"})]})]}),o.jsxs(V,{onClick:Jr,className:"gap-2 shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all w-full flex-shrink-0 mt-6",size:"lg",disabled:c||!a.trim(),"aria-label":`Generate ${h==="bpmn"?"BPMN":"P&ID"} diagram`,children:[c?"Generating...":`Generate ${h==="bpmn"?"BPMN":"P&ID"}`,o.jsx(mS,{className:"h-4 w-4","aria-hidden":"true"})]})]})]})]})})}),o.jsx("div",{className:"space-y-6 overflow-y-auto",children:o.jsxs("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-lg h-full flex flex-col",children:[o.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Your ",h==="bpmn"?"BPMN":"P&ID"," Model"]}),o.jsx("div",{className:"flex-1 min-h-0",children:u?o.jsx(kP,{xml:u,diagramType:h,onSave:async je=>{if(d(je),nt&&e){const{error:Ge}=await gRe(nt,e.id,{bpmn_xml:je});Ge?($.error("Failed to update project"),console.error(Ge)):$.success("Project updated successfully")}else e&&je?(ne(je),Se(!0)):$.success("Diagram saved to workspace")},onRefine:()=>G(!0)}):o.jsx("div",{className:"w-full h-full flex items-center justify-center border-2 border-dashed border-border rounded-lg bg-muted/20",children:o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center",children:o.jsx(Wn,{className:"h-8 w-8 text-muted-foreground"})}),o.jsx("p",{className:"text-muted-foreground",children:"Canvas ready for your diagram"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Enter a prompt on the left to generate a ",h==="bpmn"?"BPMN":"P&ID"," diagram"]})]})})}),u&&o.jsx("p",{className:"text-xs text-muted-foreground mt-4 text-right",children:"Generated via Gemini 2.5 Pro  v1"})]})})]})})})}),o.jsx(Xn,{open:L,onOpenChange:G,children:o.jsxs(Bn,{children:[o.jsxs(Fn,{children:[o.jsxs(zn,{children:["Refine Your ",h==="bpmn"?"BPMN":"P&ID"]}),o.jsx(Un,{children:"Use natural language to modify the current diagram. The AI will update the latest version based on your instructions."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(ea,{placeholder:"E.g., 'add a review step after approval', 'replace manual task with automated service', 'add parallel gateway for concurrent processing'...",value:S,onChange:je=>N(je.target.value),className:"min-h-[100px] resize-none",disabled:P}),o.jsx(V,{onClick:()=>{Lr(),G(!1)},disabled:P||!S.trim(),className:"w-full",children:P?"Refining...":`Apply Changes to Current ${h==="bpmn"?"BPMN":"P&ID"}`})]})]})}),e&&o.jsx(TRe,{open:de,onOpenChange:Se,onSave:async(je,Ge)=>{if(!X||!e)return;se(!0);const{data:We,error:zt}=await pRe({user_id:e.id,name:je,description:Ge||null,diagram_type:h,bpmn_xml:X});zt?($.error("Failed to save project"),console.error(zt)):We&&(St(We.id),ne(null),$.success("Project saved successfully!")),se(!1),Se(!1)},diagramType:h,isLoading:Ee})]})},ORe=()=>{const e=Mi(),t=Md(),[n,r]=y.useState(null),[i,a]=y.useState(!0);if(y.useEffect(()=>{const{data:{subscription:u}}=oe.auth.onAuthStateChange((d,h)=>{r((h==null?void 0:h.user)??null),a(!1),!(h!=null&&h.user)&&!t.pathname.includes("/auth")&&Gn(e,"/auth")});return oe.auth.getSession().then(({data:{session:d}})=>{r((d==null?void 0:d.user)??null),a(!1),!(d!=null&&d.user)&&!t.pathname.includes("/auth")&&Gn(e,"/auth")}),()=>u.unsubscribe()},[e,t.pathname]),i)return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})});const s=xi(),c=`/auth${s}`,l=`/dashboard${s}`;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{user:n}),o.jsxs(Dd,{children:[o.jsx(et,{path:"/auth",element:o.jsx(N5,{})}),o.jsx(et,{path:"/",element:n?o.jsx(xI,{user:n}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"/dashboard",element:n?o.jsx(xI,{user:n}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"/projects",element:n?o.jsx(xRe,{user:n}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"/bpmn-generator",element:n?o.jsx(bI,{user:n}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"/pid-generator",element:n?o.jsx(bI,{user:n}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"/vision-ai",element:n?o.jsx(l5,{}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"/templates",element:n?o.jsx(kRe,{user:n}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"/account",element:n?o.jsx(CRe,{user:n}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"/settings",element:n?o.jsx(ARe,{user:n}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"/admin/bpmn-dashboard",element:n?o.jsx(uF,{}):o.jsx(wi,{to:c,replace:!0})}),o.jsx(et,{path:"*",element:o.jsx(wi,{to:l,replace:!0})})]})]})},wI=[{name:"Getting Started",path:"/getting-started",icon:dD},{name:"Guides",path:"/guides",icon:FW},{name:"Tutorials",path:"/tutorials",icon:oD},{name:"API Reference",path:"/api-reference",icon:dl},{name:"FAQ",path:"/faq",icon:WW},{name:"Changelog",path:"/changelog",icon:Wn}],RRe=()=>{const e=Md(),[t,n]=y.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"lg:hidden fixed top-16 left-0 right-0 z-40 border-b bg-background px-6 py-3",children:o.jsxs(pD,{open:t,onOpenChange:n,children:[o.jsx(mD,{asChild:!0,children:o.jsxs(V,{variant:"outline",size:"sm",children:[o.jsx(lD,{className:"h-4 w-4 mr-2"}),"Documentation Menu"]})}),o.jsxs(xS,{side:"left",className:"w-[300px] sm:w-[400px]",children:[o.jsx(bS,{children:o.jsx(wS,{children:"Documentation"})}),o.jsx("nav",{className:"mt-6 space-y-2",children:wI.map(r=>{const i=r.icon,a=e.pathname===r.path||r.path==="/getting-started"&&e.pathname==="/";return o.jsxs(Hn,{to:r.path,onClick:()=>n(!1),className:ye("flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted"),children:[o.jsx(i,{className:"h-4 w-4"}),r.name]},r.path)})})]})]})}),o.jsx("aside",{className:"hidden lg:block w-64 border-r bg-muted/30 pt-16 fixed left-0 top-0 h-full overflow-y-auto",children:o.jsx("nav",{className:"p-6 space-y-2",children:wI.map(r=>{const i=r.icon,a=e.pathname===r.path||r.path==="/getting-started"&&e.pathname==="/";return o.jsxs(Hn,{to:r.path,className:ye("flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted"),children:[o.jsx(i,{className:"h-4 w-4"}),r.name]},r.path)})})})]})},$Re=({children:e})=>o.jsxs("div",{className:"flex min-h-screen pt-16",children:[o.jsx(RRe,{}),o.jsx("main",{className:"flex-1 overflow-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:e})})]}),Lw=()=>o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Getting Started"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Welcome to ProssMind! Learn how to create your first BPMN or P&ID diagram."})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(dD,{className:"h-5 w-5 text-primary"}),"Quick Start"]}),o.jsx(Te,{children:"Get up and running in minutes"})]}),o.jsxs(pe,{className:"space-y-4",children:[o.jsxs("ol",{className:"space-y-3 list-decimal list-inside",children:[o.jsx("li",{children:"Sign up for a free account"}),o.jsx("li",{children:"Choose your diagram type (BPMN or P&ID)"}),o.jsx("li",{children:"Describe your process or upload an image"}),o.jsx("li",{children:"Download your generated diagram"})]}),o.jsxs(V,{onClick:()=>Sa("/auth"),className:"w-full",children:["Get Started",o.jsx(pu,{className:"h-4 w-4 ml-2"})]})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"What You Get"}),o.jsx(Te,{children:"Features included in your free account"})]}),o.jsx(pe,{children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Zh,{className:"h-4 w-4 text-primary"}),o.jsx("span",{children:"5 free diagram generations"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Zh,{className:"h-4 w-4 text-primary"}),o.jsx("span",{children:"BPMN and P&ID diagram support"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Zh,{className:"h-4 w-4 text-primary"}),o.jsx("span",{children:"Vision AI image conversion"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(Zh,{className:"h-4 w-4 text-primary"}),o.jsx("span",{children:"Export to standard formats"})]})]})})]})]}),o.jsxs(ue,{children:[o.jsx(ve,{children:o.jsx(be,{children:"Next Steps"})}),o.jsxs(pe,{className:"space-y-4",children:[o.jsx("p",{className:"text-muted-foreground",children:"Ready to create your first diagram? Check out our guides and tutorials to learn more about creating professional process diagrams with ProssMind."}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(V,{variant:"outline",onClick:()=>Sa("/dashboard"),children:"Go to Dashboard"}),o.jsx(V,{variant:"outline",onClick:()=>window.location.href="/guides",children:"View Guides"})]})]})]})]}),IRe=()=>{const e=[{title:"BPMN Diagram Guide",description:"Learn how to create effective business process models",icon:$i,topics:["Elements and symbols","Swimlanes and pools","Gateways and events","Best practices"]},{title:"P&ID Diagram Guide",description:"Master piping and instrumentation diagrams",icon:yl,topics:["Equipment symbols","Instrumentation tags","Piping connections","ISA standards"]},{title:"Vision AI Guide",description:"Convert images and documents to diagrams",icon:Da,topics:["Supported formats","Image requirements","Processing tips","Troubleshooting"]},{title:"Export and Integration",description:"Export diagrams and integrate with other tools",icon:Wn,topics:["Export formats","SAP Signavio","Camunda","Flowable"]}];return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"User Guides"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Comprehensive guides to help you get the most out of ProssMind."})]}),o.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.map(t=>{const n=t.icon;return o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(n,{className:"h-5 w-5 text-primary"}),t.title]}),o.jsx(Te,{children:t.description})]}),o.jsx(pe,{children:o.jsx("ul",{className:"space-y-2",children:t.topics.map((r,i)=>o.jsxs("li",{className:"text-sm text-muted-foreground",children:[" ",r]},i))})})]},t.title)})})]})},MRe=()=>{const e=[{title:"Creating Your First BPMN Diagram",description:"Step-by-step tutorial for creating a simple business process diagram",duration:"5 min",level:"Beginner"},{title:"Advanced P&ID Design",description:"Learn advanced techniques for complex piping and instrumentation diagrams",duration:"15 min",level:"Advanced"},{title:"Using Vision AI",description:"Convert handwritten notes and sketches into professional diagrams",duration:"10 min",level:"Intermediate"},{title:"Integrating with SAP Signavio",description:"Export and import diagrams to SAP Signavio for process management",duration:"12 min",level:"Intermediate"}];return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Tutorials"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Step-by-step tutorials to help you master ProssMind features."})]}),o.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.map(t=>o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx(be,{children:t.title}),o.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-primary/10 text-primary",children:t.level})]}),o.jsx(Te,{children:t.description})]}),o.jsx(pe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Lp,{className:"h-4 w-4"}),t.duration]}),o.jsxs(V,{variant:"outline",size:"sm",children:[o.jsx(qW,{className:"h-4 w-4 mr-2"}),"Watch Tutorial"]})]})})]},t.title))})]})},DRe=()=>o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Reference"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Integrate ProssMind into your applications using our REST API."})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Bp,{className:"h-5 w-5 text-primary"}),"Authentication"]}),o.jsx(Te,{children:"API authentication and authorization"})]}),o.jsxs(pe,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"All API requests require authentication using an API key. You can generate API keys in your account settings."}),o.jsx("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm",children:o.jsx("code",{children:"Authorization: Bearer YOUR_API_KEY"})})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(dl,{className:"h-5 w-5 text-primary"}),"Endpoints"]}),o.jsx(Te,{children:"Available API endpoints"})]}),o.jsxs(pe,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"API documentation is coming soon. For now, please use the web interface or contact support for API access."}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"POST"}),o.jsx("code",{children:"/api/v1/diagrams/generate"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"GET"}),o.jsxs("code",{children:["/api/v1/diagrams/","{id}"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"GET"}),o.jsx("code",{children:"/api/v1/diagrams"})]})]})]})]})]}),LRe=()=>{const e=[{question:"How many free diagrams can I create?",answer:"Free accounts include 5 diagram generations. After that, you can upgrade to a paid plan for unlimited diagrams."},{question:"What file formats can I export?",answer:"You can export diagrams in BPMN 2.0 XML, PNG, SVG, and PDF formats."},{question:"Can I use Vision AI with handwritten notes?",answer:"Yes! Vision AI can convert handwritten notes, whiteboard sketches, and printed documents into professional diagrams."},{question:"Is my data secure?",answer:"Yes, all data is encrypted and securely stored. We never share your data with third parties."},{question:"Can I integrate with SAP Signavio?",answer:"Yes, you can export BPMN diagrams in a format compatible with SAP Signavio, Camunda, and Flowable."},{question:"What's the difference between BPMN and P&ID?",answer:"BPMN (Business Process Model and Notation) is for business processes, while P&ID (Piping and Instrumentation Diagram) is for engineering and manufacturing processes."}];return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Frequently Asked Questions"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Find answers to common questions about ProssMind."})]}),o.jsxs(ue,{children:[o.jsx(ve,{children:o.jsx(be,{children:"Common Questions"})}),o.jsx(pe,{children:o.jsx(Ij,{type:"single",collapsible:!0,className:"w-full",children:e.map((t,n)=>o.jsxs(bu,{value:`item-${n}`,children:[o.jsx(wu,{children:t.question}),o.jsx(_u,{children:t.answer})]},n))})})]})]})},BRe=()=>{const e=[{version:"1.0.0",date:"2024-01-15",type:"major",changes:["Initial release of ProssMind","BPMN diagram generation","P&ID diagram generation","Vision AI image conversion","Free tier with 5 diagram generations"]}];return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Changelog"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Track updates and new features in ProssMind."})]}),o.jsx("div",{className:"space-y-6",children:e.map(t=>o.jsxs(ue,{children:[o.jsx(ve,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(be,{className:"flex items-center gap-3",children:["Version ",t.version,o.jsx(Zt,{variant:t.type==="major"?"default":"secondary",children:t.type})]}),o.jsx(Te,{children:t.date})]})}),o.jsx(pe,{children:o.jsx("ul",{className:"space-y-2",children:t.changes.map((n,r)=>o.jsxs("li",{className:"text-sm flex items-start gap-2",children:[o.jsx("span",{className:"text-primary mt-1",children:""}),o.jsx("span",{children:n})]},r))})})]},t.version))})]})},FRe=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{}),o.jsx($Re,{children:o.jsxs(Dd,{children:[o.jsx(et,{path:"/",element:o.jsx(Lw,{})}),o.jsx(et,{path:"/getting-started",element:o.jsx(Lw,{})}),o.jsx(et,{path:"/guides",element:o.jsx(IRe,{})}),o.jsx(et,{path:"/tutorials",element:o.jsx(MRe,{})}),o.jsx(et,{path:"/api-reference",element:o.jsx(DRe,{})}),o.jsx(et,{path:"/faq",element:o.jsx(LRe,{})}),o.jsx(et,{path:"/changelog",element:o.jsx(BRe,{})}),o.jsx(et,{path:"*",element:o.jsx(Lw,{})})]})})]}),zRe=()=>{const e="operational",n={operational:{label:"All Systems Operational",color:"bg-green-500",icon:GW,variant:"default"},degraded:{label:"Degraded Performance",color:"bg-yellow-500",icon:qy,variant:"secondary"},down:{label:"Service Disruption",color:"bg-red-500",icon:KW,variant:"destructive"}}[e],r=n.icon;return o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${n.color} animate-pulse`}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(r,{className:"h-5 w-5"}),o.jsx("span",{className:"font-semibold",children:n.label})]}),o.jsx(Zt,{variant:n.variant,children:e})]})},URe=()=>{const e=[{id:1,date:"2024-01-10",title:"Scheduled Maintenance",status:"resolved",description:"Database optimization and performance improvements"},{id:2,date:"2024-01-05",title:"API Rate Limiting Issue",status:"resolved",description:"Temporary rate limiting issue affecting some API requests"}];return o.jsx("div",{className:"space-y-4",children:e.length>0?o.jsxs(sc,{children:[o.jsx(oc,{children:o.jsxs(mr,{children:[o.jsx(_t,{children:"Date"}),o.jsx(_t,{children:"Title"}),o.jsx(_t,{children:"Status"}),o.jsx(_t,{children:"Description"})]})}),o.jsx(cc,{children:e.map(t=>o.jsxs(mr,{children:[o.jsx(vt,{children:new Date(t.date).toLocaleDateString()}),o.jsx(vt,{className:"font-medium",children:t.title}),o.jsx(vt,{children:o.jsx(Zt,{variant:t.status==="resolved"?"default":"secondary",children:t.status})}),o.jsx(vt,{className:"text-muted-foreground",children:t.description})]},t.id))})]}):o.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No incidents reported. All systems operational."})})},HRe=()=>{const{toast:e}=Ud(),[t,n]=y.useState(""),r=i=>{i.preventDefault(),e({title:"Subscribed!",description:"You'll receive email updates about service status."}),n("")};return o.jsxs("form",{onSubmit:r,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Nt,{htmlFor:"email",children:"Email Address"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(fS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(pn,{id:"email",type:"email",placeholder:"your@email.com",value:t,onChange:i=>n(i.target.value),className:"pl-10",required:!0})]}),o.jsx(V,{type:"submit",children:"Subscribe"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll receive email notifications about service incidents and maintenance."})]})},VRe=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{}),o.jsx("div",{className:"pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Service Status"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Real-time status of ProssMind services"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"System Status"}),o.jsx(Te,{children:"Current operational status"})]}),o.jsx(pe,{children:o.jsx(zRe,{})})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Subscribe to Updates"}),o.jsx(Te,{children:"Get notified about service incidents"})]}),o.jsx(pe,{children:o.jsx(HRe,{})})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Incident History"}),o.jsx(Te,{children:"Past incidents and maintenance windows"})]}),o.jsx(pe,{children:o.jsx(URe,{})})]})]})})]}),GRe=({user:e})=>{const t={totalUsers:1250,organizations:45,revenue:125e3,activeUsers:890};return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Admin Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your organization and users"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Total Users"}),o.jsx(Cf,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t.totalUsers}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Organizations"}),o.jsx(Wy,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t.organizations}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"+3 new this month"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Revenue"}),o.jsx(Ky,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsxs("div",{className:"text-2xl font-bold",children:["$",t.revenue.toLocaleString()]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"+8% from last month"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(be,{className:"text-sm font-medium",children:"Active Users"}),o.jsx(ev,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t.activeUsers}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Quick Actions"}),o.jsx(Te,{children:"Common administrative tasks"})]}),o.jsxs(pe,{className:"space-y-2",children:[o.jsx("a",{href:"/organization",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"Manage Organization Settings"}),o.jsx("a",{href:"/users",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"View All Users"}),o.jsx("a",{href:"/billing",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"Billing & Invoices"}),o.jsx("a",{href:"/security",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"Security Settings"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Jo,{className:"h-5 w-5"}),"Security Overview"]}),o.jsx(Te,{children:"Recent security events"})]}),o.jsx(pe,{children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No security events in the last 24 hours. All systems secure."})})]})]})]})})},WRe=({user:e})=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Organization Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your organization configuration"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Wy,{className:"h-5 w-5"}),"Organization Details"]}),o.jsx(Te,{children:"Basic organization information"})]}),o.jsxs(pe,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Nt,{htmlFor:"orgName",children:"Organization Name"}),o.jsx(pn,{id:"orgName",defaultValue:"Your Organization",className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Nt,{htmlFor:"orgEmail",children:"Contact Email"}),o.jsx(pn,{id:"orgEmail",type:"email",defaultValue:e.email,className:"mt-1"})]}),o.jsx(V,{children:"Save Changes"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Bp,{className:"h-5 w-5"}),"Single Sign-On (SSO)"]}),o.jsx(Te,{children:"Configure SSO for your organization"})]}),o.jsxs(pe,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"SSO configuration allows your organization to use your identity provider for authentication."}),o.jsx(V,{variant:"outline",children:"Configure SSO"})]})]})]})]})}),qRe=({user:e})=>{const t=[{id:"1",email:"user1@example.com",role:"admin",createdAt:"2024-01-01"},{id:"2",email:"user2@example.com",role:"user",createdAt:"2024-01-05"},{id:"3",email:"user3@example.com",role:"user",createdAt:"2024-01-10"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"User Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage users in your organization"})]}),o.jsxs(ue,{children:[o.jsx(ve,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(be,{children:"Users"}),o.jsx(Te,{children:"All users in your organization"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Xu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(pn,{placeholder:"Search users...",className:"pl-10 w-64"})]})]})}),o.jsx(pe,{children:o.jsxs(sc,{children:[o.jsx(oc,{children:o.jsxs(mr,{children:[o.jsx(_t,{children:"Email"}),o.jsx(_t,{children:"Role"}),o.jsx(_t,{children:"Created"}),o.jsx(_t,{children:"Actions"})]})}),o.jsx(cc,{children:t.map(n=>o.jsxs(mr,{children:[o.jsx(vt,{className:"font-medium",children:n.email}),o.jsx(vt,{children:o.jsx(Zt,{variant:n.role==="admin"?"default":"secondary",children:n.role})}),o.jsx(vt,{children:new Date(n.createdAt).toLocaleDateString()}),o.jsx(vt,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{variant:"ghost",size:"sm",children:o.jsx(gS,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",children:o.jsx(Fp,{className:"h-4 w-4"})})]})})]},n.id))})]})})]})]})})},KRe=({user:e})=>{const t=[{id:"INV-001",date:"2024-01-15",amount:999,status:"paid"},{id:"INV-002",date:"2024-02-15",amount:999,status:"paid"},{id:"INV-003",date:"2024-03-15",amount:999,status:"pending"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Billing & Invoices"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage billing and view invoices"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Ky,{className:"h-5 w-5"}),"Current Plan"]}),o.jsx(Te,{children:"Your subscription details"})]}),o.jsxs(pe,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Plan"}),o.jsx("span",{className:"font-semibold",children:"Enterprise"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Billing Cycle"}),o.jsx("span",{children:"Monthly"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Next Billing Date"}),o.jsx("span",{children:"April 15, 2024"})]})]}),o.jsx(V,{className:"w-full mt-4",children:"Change Plan"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Payment Method"}),o.jsx(Te,{children:"Manage your payment methods"})]}),o.jsxs(pe,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"   4242"}),o.jsx(V,{variant:"outline",children:"Update Payment Method"})]})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Invoice History"}),o.jsx(Te,{children:"View and download past invoices"})]}),o.jsx(pe,{children:o.jsxs(sc,{children:[o.jsx(oc,{children:o.jsxs(mr,{children:[o.jsx(_t,{children:"Invoice ID"}),o.jsx(_t,{children:"Date"}),o.jsx(_t,{children:"Amount"}),o.jsx(_t,{children:"Status"}),o.jsx(_t,{children:"Actions"})]})}),o.jsx(cc,{children:t.map(n=>o.jsxs(mr,{children:[o.jsx(vt,{className:"font-medium",children:n.id}),o.jsx(vt,{children:new Date(n.date).toLocaleDateString()}),o.jsxs(vt,{children:["$",n.amount]}),o.jsx(vt,{children:o.jsx(Zt,{variant:n.status==="paid"?"default":"secondary",children:n.status})}),o.jsx(vt,{children:o.jsxs(V,{variant:"ghost",size:"sm",children:[o.jsx(vl,{className:"h-4 w-4 mr-2"}),"Download"]})})]},n.id))})]})})]})]})})},YRe=({user:e})=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Security Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage security and access controls"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Jo,{className:"h-5 w-5"}),"Two-Factor Authentication"]}),o.jsx(Te,{children:"Require 2FA for all users"})]}),o.jsx(pe,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Nt,{children:"Enable 2FA"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Require two-factor authentication"})]}),o.jsx(Vs,{})]})})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Bp,{className:"h-5 w-5"}),"API Keys"]}),o.jsx(Te,{children:"Manage API access keys"})]}),o.jsxs(pe,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"API keys allow programmatic access to ProssMind services."}),o.jsx(V,{variant:"outline",children:"Manage API Keys"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(r_,{className:"h-5 w-5"}),"Access Controls"]}),o.jsx(Te,{children:"Configure access permissions"})]}),o.jsxs(pe,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Nt,{children:"IP Whitelist"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Restrict access by IP address"})]}),o.jsx(Vs,{})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Nt,{children:"Session Timeout"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto-logout after inactivity"})]}),o.jsx(Vs,{defaultChecked:!0})]})]})]})]})]})}),XRe=({user:e})=>{const t=[{id:"1",user:"admin@example.com",action:"User created",timestamp:"2024-01-15T10:30:00Z",ip:"192.168.1.1"},{id:"2",user:"admin@example.com",action:"Settings updated",timestamp:"2024-01-15T09:15:00Z",ip:"192.168.1.1"},{id:"3",user:"user@example.com",action:"Login",timestamp:"2024-01-15T08:00:00Z",ip:"192.168.1.2"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Audit Logs"}),o.jsx("p",{className:"text-muted-foreground",children:"View activity and security logs"})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Wn,{className:"h-5 w-5"}),"Activity Log"]}),o.jsx(Te,{children:"Recent administrative actions and events"})]}),o.jsx(pe,{children:o.jsxs(sc,{children:[o.jsx(oc,{children:o.jsxs(mr,{children:[o.jsx(_t,{children:"Timestamp"}),o.jsx(_t,{children:"User"}),o.jsx(_t,{children:"Action"}),o.jsx(_t,{children:"IP Address"})]})}),o.jsx(cc,{children:t.map(n=>o.jsxs(mr,{children:[o.jsx(vt,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lp,{className:"h-4 w-4 text-muted-foreground"}),new Date(n.timestamp).toLocaleString()]})}),o.jsx(vt,{className:"font-medium",children:n.user}),o.jsx(vt,{children:o.jsx(Zt,{variant:"outline",children:n.action})}),o.jsx(vt,{className:"text-muted-foreground",children:n.ip})]},n.id))})]})})]})]})})},ZRe=["Business","E-Commerce","Finance","IT","Manufacturing","Utilities"],JRe=["bpmn","pid"],QRe=["Users","ShoppingCart","Building2","Cog","Factory","Workflow"],e$e=({user:e})=>{const[t,n]=y.useState([]),[r,i]=y.useState(!0),[a,s]=y.useState(""),[c,l]=y.useState(!1),[u,d]=y.useState(!1),[h,f]=y.useState(null),[p,m]=y.useState(!1),[g,v]=y.useState(""),[x,b]=y.useState({name:"",description:"",category:"Business",diagram_type:"bpmn",bpmn_xml:"",icon_name:"Workflow",is_active:!0});y.useEffect(()=>{w()},[]);const w=async()=>{i(!0);const{data:A,error:O}=await ERe();O?$.error("Failed to load templates"):A&&n(A),i(!1)},_=()=>{f(null),b({name:"",description:"",category:"Business",diagram_type:"bpmn",bpmn_xml:"",icon_name:"Workflow",is_active:!0}),l(!0)},j=A=>{f(A),b({name:A.name,description:A.description||"",category:A.category,diagram_type:A.diagram_type,bpmn_xml:A.bpmn_xml,icon_name:A.icon_name||"Workflow",is_active:A.is_active}),l(!0)},S=A=>{f(A),d(!0)},N=async()=>{if(!h)return;const{error:A}=await SRe(h.id);A?$.error("Failed to delete template"):($.success("Template deleted successfully"),w()),d(!1),f(null)},P=A=>{v(A.bpmn_xml),m(!0)},k=async()=>{if(!x.name||!x.bpmn_xml){$.error("Name and XML are required");return}const A={name:x.name,description:x.description||null,category:x.category,diagram_type:x.diagram_type,bpmn_xml:x.bpmn_xml,icon_name:x.icon_name||null,is_active:x.is_active??!0,created_by:e.id};if(h){const{error:O}=await jRe(h.id,A);O?$.error("Failed to update template"):($.success("Template updated successfully"),l(!1),w())}else{const{error:O}=await _Re(A);O?$.error("Failed to create template"):($.success("Template created successfully"),l(!1),w())}},T=t.filter(A=>{var O;return A.name.toLowerCase().includes(a.toLowerCase())||((O=A.description)==null?void 0:O.toLowerCase().includes(a.toLowerCase()))});return r?o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsx(Bt,{children:o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsx(Ir,{className:"h-8 w-8 animate-spin text-primary"})})})}):o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Template Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage BPMN and P&ID diagram templates"})]}),o.jsxs(ue,{children:[o.jsx(ve,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(be,{children:"Templates"}),o.jsx(Te,{children:"Create and manage diagram templates"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Xu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(pn,{placeholder:"Search templates...",className:"pl-10 w-64",value:a,onChange:A=>s(A.target.value)})]}),o.jsxs(V,{onClick:_,children:[o.jsx(lf,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]})}),o.jsx(pe,{children:o.jsxs(sc,{children:[o.jsx(oc,{children:o.jsxs(mr,{children:[o.jsx(_t,{children:"Name"}),o.jsx(_t,{children:"Category"}),o.jsx(_t,{children:"Type"}),o.jsx(_t,{children:"Status"}),o.jsx(_t,{children:"Usage"}),o.jsx(_t,{children:"Created"}),o.jsx(_t,{children:"Actions"})]})}),o.jsx(cc,{children:T.length===0?o.jsx(mr,{children:o.jsx(vt,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No templates found"})}):T.map(A=>o.jsxs(mr,{children:[o.jsx(vt,{className:"font-medium",children:A.name}),o.jsx(vt,{children:o.jsx(Zt,{variant:"outline",children:A.category})}),o.jsx(vt,{children:o.jsx(Zt,{variant:A.diagram_type==="bpmn"?"default":"secondary",children:A.diagram_type.toUpperCase()})}),o.jsx(vt,{children:o.jsx(Zt,{variant:A.is_active?"default":"secondary",children:A.is_active?"Active":"Inactive"})}),o.jsx(vt,{children:A.usage_count}),o.jsx(vt,{children:new Date(A.created_at).toLocaleDateString()}),o.jsx(vt,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>P(A),children:o.jsx(Da,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>j(A),children:o.jsx(gS,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>S(A),children:o.jsx(Fp,{className:"h-4 w-4"})})]})})]},A.id))})]})})]}),o.jsx(Xn,{open:c,onOpenChange:l,children:o.jsxs(Bn,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:h?"Edit Template":"Create New Template"}),o.jsx(Un,{children:h?"Update template details and XML content":"Create a new diagram template"})]}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Nt,{htmlFor:"name",children:"Name *"}),o.jsx(pn,{id:"name",value:x.name,onChange:A=>b({...x,name:A.target.value}),placeholder:"Template name"})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Nt,{htmlFor:"description",children:"Description"}),o.jsx(ea,{id:"description",value:x.description,onChange:A=>b({...x,description:A.target.value}),placeholder:"Template description",rows:2})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Nt,{htmlFor:"category",children:"Category *"}),o.jsxs(es,{value:x.category,onValueChange:A=>b({...x,category:A}),children:[o.jsx(Oa,{id:"category",children:o.jsx(ts,{})}),o.jsx(Ra,{children:ZRe.map(A=>o.jsx(Qe,{value:A,children:A},A))})]})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Nt,{htmlFor:"diagram_type",children:"Diagram Type *"}),o.jsxs(es,{value:x.diagram_type,onValueChange:A=>b({...x,diagram_type:A}),children:[o.jsx(Oa,{id:"diagram_type",children:o.jsx(ts,{})}),o.jsx(Ra,{children:JRe.map(A=>o.jsx(Qe,{value:A,children:A.toUpperCase()},A))})]})]})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Nt,{htmlFor:"icon_name",children:"Icon"}),o.jsxs(es,{value:x.icon_name||"Workflow",onValueChange:A=>b({...x,icon_name:A}),children:[o.jsx(Oa,{id:"icon_name",children:o.jsx(ts,{})}),o.jsx(Ra,{children:QRe.map(A=>o.jsx(Qe,{value:A,children:A},A))})]})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Nt,{htmlFor:"bpmn_xml",children:"BPMN/PID XML *"}),o.jsx(ea,{id:"bpmn_xml",value:x.bpmn_xml,onChange:A=>b({...x,bpmn_xml:A.target.value}),placeholder:"Paste BPMN or PID XML here",rows:12,className:"font-mono text-sm"})]})]}),o.jsxs(ov,{children:[o.jsx(V,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),o.jsx(V,{onClick:k,children:h?"Update":"Create"})]})]})}),o.jsx(Xn,{open:p,onOpenChange:m,children:o.jsxs(Bn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs(Fn,{children:[o.jsx(zn,{children:"Template XML Preview"}),o.jsx(Un,{children:"View the template XML content"})]}),o.jsx("div",{className:"mt-4",children:o.jsx("pre",{className:"bg-muted p-4 rounded-md overflow-x-auto text-sm",children:o.jsx("code",{children:g})})}),o.jsx(ov,{children:o.jsx(V,{variant:"outline",onClick:()=>m(!1),children:"Close"})})]})}),o.jsx(PP,{open:u,onOpenChange:d,children:o.jsxs(Gb,{children:[o.jsxs(Wb,{children:[o.jsx(Kb,{children:"Are you sure?"}),o.jsxs(Yb,{children:['This will deactivate the template "',h==null?void 0:h.name,'". This action cannot be undone, but you can reactivate it later.']})]}),o.jsxs(qb,{children:[o.jsx(Zb,{children:"Cancel"}),o.jsx(Xb,{onClick:N,children:"Delete"})]})]})})]})})},t$e=()=>{Mi();const[e,t]=y.useState(null),[n,r]=y.useState(!0),{isAdmin:i}=fD(e);return y.useEffect(()=>{const{data:{subscription:a}}=oe.auth.onAuthStateChange((s,c)=>{t((c==null?void 0:c.user)??null),r(!1)});return oe.auth.getSession().then(({data:{session:s}})=>{t((s==null?void 0:s.user)??null),r(!1)}),()=>a.unsubscribe()},[]),n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):!e||!i?o.jsx(wi,{to:"/",replace:!0}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{user:e}),o.jsxs(Dd,{children:[o.jsx(et,{path:"/",element:o.jsx(GRe,{user:e})}),o.jsx(et,{path:"/organization",element:o.jsx(WRe,{user:e})}),o.jsx(et,{path:"/users",element:o.jsx(qRe,{user:e})}),o.jsx(et,{path:"/billing",element:o.jsx(KRe,{user:e})}),o.jsx(et,{path:"/security",element:o.jsx(YRe,{user:e})}),o.jsx(et,{path:"/audit-logs",element:o.jsx(XRe,{user:e})}),o.jsx(et,{path:"/templates",element:o.jsx(e$e,{user:e})}),o.jsx(et,{path:"*",element:o.jsx(wi,{to:"/",replace:!0})})]})]})},_I=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Overview"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Integrate ProssMind into your applications with our REST API"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(Bp,{className:"h-5 w-5 text-primary"}),"Authentication"]}),o.jsx(Te,{children:"Get started with API keys"})]}),o.jsxs(pe,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"All API requests require authentication using an API key. Generate your API key in your account settings."}),o.jsx(V,{onClick:()=>Sa("/settings"),children:"Generate API Key"})]})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs(be,{className:"flex items-center gap-2",children:[o.jsx(dl,{className:"h-5 w-5 text-primary"}),"Base URL"]}),o.jsx(Te,{children:"API endpoint"})]}),o.jsx(pe,{children:o.jsx("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm",children:o.jsx("code",{children:"https://api.prossmind.com/v1"})})})]})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsx(ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/reference",children:o.jsxs(ve,{children:[o.jsx(zW,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(be,{children:"API Reference"}),o.jsx(Te,{children:"Complete API documentation"})]})}),o.jsx(ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/sdks",children:o.jsxs(ve,{children:[o.jsx(dl,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(be,{children:"SDKs"}),o.jsx(Te,{children:"Client libraries and tools"})]})}),o.jsx(ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/playground",children:o.jsxs(ve,{children:[o.jsx(x7,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(be,{children:"API Playground"}),o.jsx(Te,{children:"Test API endpoints"})]})})]})]})}),n$e=()=>{const e=[{method:"POST",path:"/diagrams/generate",description:"Generate a BPMN or P&ID diagram from a text description"},{method:"GET",path:"/diagrams/{id}",description:"Retrieve a diagram by ID"},{method:"GET",path:"/diagrams",description:"List all diagrams for the authenticated user"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Reference"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Complete reference for all API endpoints"})]}),o.jsx("div",{className:"space-y-6",children:e.map((t,n)=>o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Zt,{variant:t.method==="POST"?"default":"secondary",children:t.method}),o.jsx("code",{className:"text-lg",children:t.path})]}),o.jsx(Te,{children:t.description})]}),o.jsx(pe,{children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"Full API documentation coming soon. For now, please use the web interface or contact support for API access."})})]},n))})]})})},r$e=()=>{const e=[{name:"JavaScript/TypeScript",version:"1.0.0",language:"npm"},{name:"Python",version:"1.0.0",language:"pip"},{name:"Go",version:"1.0.0",language:"go get"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"SDKs & Libraries"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Client libraries for popular programming languages"})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(t=>o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:t.name}),o.jsxs(Te,{children:["Version ",t.version]})]}),o.jsxs(pe,{children:[o.jsx("div",{className:"bg-muted p-3 rounded-lg font-mono text-sm mb-4",children:o.jsxs("code",{children:[t.language," install prossmind-sdk"]})}),o.jsxs(V,{variant:"outline",className:"w-full",children:[o.jsx(vl,{className:"h-4 w-4 mr-2"}),"Download"]})]})]},t.name))})]})})},i$e=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Code Examples"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Example code snippets for common use cases"})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Examples"}),o.jsx(Te,{children:"Code examples coming soon"})]}),o.jsx(pe,{children:o.jsx("p",{className:"text-muted-foreground",children:"Code examples and tutorials will be available here. Check back soon!"})})]})]})}),a$e=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Playground"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Test API endpoints interactively"})]}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(be,{children:"Interactive Playground"}),o.jsx(Te,{children:"API playground coming soon"})]}),o.jsx(pe,{children:o.jsx("p",{className:"text-muted-foreground",children:"An interactive API playground will be available here. Check back soon!"})})]})]})}),s$e=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{}),o.jsxs(Dd,{children:[o.jsx(et,{path:"/",element:o.jsx(_I,{})}),o.jsx(et,{path:"/reference",element:o.jsx(n$e,{})}),o.jsx(et,{path:"/sdks",element:o.jsx(r$e,{})}),o.jsx(et,{path:"/examples",element:o.jsx(i$e,{})}),o.jsx(et,{path:"/playground",element:o.jsx(a$e,{})}),o.jsx(et,{path:"*",element:o.jsx(_I,{})})]})]}),jI=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Partner Program"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Join our partner ecosystem and grow your business"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/marketplace",children:o.jsxs(ve,{children:[o.jsx(P7,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(be,{children:"Marketplace"}),o.jsx(Te,{children:"Integration marketplace"})]})}),o.jsx(ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/resources",children:o.jsxs(ve,{children:[o.jsx(Wn,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(be,{children:"Resources"}),o.jsx(Te,{children:"Partner resources"})]})}),o.jsx(ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/training",children:o.jsxs(ve,{children:[o.jsx(oD,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(be,{children:"Training"}),o.jsx(Te,{children:"Partner training"})]})}),o.jsxs(ue,{children:[o.jsxs(ve,{children:[o.jsx(a7,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(be,{children:"Become a Partner"}),o.jsx(Te,{children:"Join our partner program"})]}),o.jsx(pe,{children:o.jsx(V,{className:"w-full",children:"Apply Now"})})]})]})]})}),o$e=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Integration Marketplace"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Browse available integrations and extensions"})]}),o.jsx(ue,{children:o.jsx(pe,{className:"pt-6",children:o.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Integration marketplace coming soon. Check back later for partner integrations."})})})]})}),c$e=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Partner Resources"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Download resources and materials for partners"})]}),o.jsx(ue,{children:o.jsx(pe,{className:"pt-6",children:o.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Partner resources coming soon. Check back later for downloadable materials."})})})]})}),l$e=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Partner Training"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Training materials and certification programs"})]}),o.jsx(ue,{children:o.jsx(pe,{className:"pt-6",children:o.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Partner training materials coming soon. Check back later for training programs."})})})]})}),u$e=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{}),o.jsxs(Dd,{children:[o.jsx(et,{path:"/",element:o.jsx(jI,{})}),o.jsx(et,{path:"/marketplace",element:o.jsx(o$e,{})}),o.jsx(et,{path:"/resources",element:o.jsx(c$e,{})}),o.jsx(et,{path:"/training",element:o.jsx(l$e,{})}),o.jsx(et,{path:"*",element:o.jsx(jI,{})})]})]}),d$e=[{icon:$i,title:"Process Generator",description:"Design and build automated business processes with powerful AI capabilities."},{icon:Da,title:"Vision Automation",description:"Automate visual tasks with advanced computer vision and image processing."},{icon:vl,title:"BPMN Integration",description:"Download BPMN diagrams and integrate with SAP Signavio, Camunda, Flowable, and more."}],h$e=()=>{const e=li(),{ref:t,isInView:n}=ac({threshold:.1});return o.jsx(ce.section,{className:"py-24 bg-muted/30 relative",initial:e?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:rt(e)||{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs(ce.div,{className:"text-center mb-16",initial:e?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:rt(e)||{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Powerful Features"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Everything you need to automate and optimize your business processes"})]}),o.jsx(ce.div,{ref:t,className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",variants:Hd,initial:"hidden",animate:n?"visible":"hidden",children:d$e.map((r,i)=>o.jsx(ce.div,{variants:e?void 0:Go,whileHover:e?{}:{y:-12,rotateY:2,rotateX:2,scale:1.03},transition:rt(e)||{duration:.3},style:{perspective:1e3},children:o.jsxs(ue,{className:"card-hover cursor-pointer border-border/50 hover:border-primary bg-card/50 backdrop-blur-sm flex flex-col h-full rounded-2xl shadow-md transition-all p-6 relative overflow-hidden group",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},role:"article","aria-label":`Feature: ${r.title}`,children:[o.jsx(ce.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"linear-gradient(45deg, hsl(var(--primary)), hsl(var(--accent)))",padding:"1px"},initial:!1,children:o.jsx("div",{className:"w-full h-full bg-card/50 backdrop-blur-sm rounded-2xl"})}),o.jsx(ve,{className:"flex-shrink-0 relative z-10",children:o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsxs(ce.div,{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center tech-glow relative",animate:e?{rotate:0}:{rotate:[-2,2,-2]},transition:rt(e)||{duration:4,repeat:1/0,ease:"easeInOut"},whileHover:e?{}:{scale:1.15,rotate:15,filter:"brightness(1.3)"},children:[o.jsx(ce.div,{whileHover:e?{}:{scale:1.2},transition:rt(e)||{duration:.2},style:{filter:"drop-shadow(0 0 20px hsl(var(--primary)))"},children:o.jsx(r.icon,{className:"h-7 w-7 text-primary"})}),o.jsx(ce.div,{className:"absolute inset-0 rounded-xl bg-primary/20 blur-xl",animate:e?{scale:1,opacity:0}:{scale:[1,1.3,1],opacity:[0,.8,0]},transition:rt(e)||{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),o.jsx(be,{className:"text-2xl",children:r.title})]})}),o.jsx(pe,{className:"flex-grow flex flex-col relative z-10",children:o.jsx(Te,{className:"text-base leading-relaxed break-words overflow-visible min-h-0",children:r.description})})]})},i))})]})})},f$e=({language:e})=>{Mi();const[t,n]=y.useState(null),[r,i]=y.useState(!0);if(y.useEffect(()=>{const{data:{subscription:c}}=oe.auth.onAuthStateChange((l,u)=>{n((u==null?void 0:u.user)??null),i(!1)});return oe.auth.getSession().then(({data:{session:l}})=>{n((l==null?void 0:l.user)??null),i(!1)}),()=>c.unsubscribe()},[]),r)return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})});const a={de:{title:"Bereit loszulegen?",description:"Erstellen Sie professionelle BPMN- und P&ID-Diagramme mit KI-gesttzter Automatisierung",tryFree:"Kostenlos testen"},fr:{title:"Prt  commencer?",description:"Crez des diagrammes BPMN et P&ID professionnels avec l'automatisation alimente par l'IA",tryFree:"Essayer gratuitement"}},s=a[e]||a.de;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Mr,{user:t}),o.jsx(BD,{}),o.jsx(wD,{}),o.jsx(_D,{}),o.jsx("section",{className:"py-20 bg-muted/30",children:o.jsxs(Bt,{children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-4xl font-bold mb-4",children:s.title}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:s.description})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-8",children:[o.jsxs(ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>Sa("/bpmn-generator"),children:[o.jsxs(ve,{children:[o.jsx($i,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(be,{children:"BPMN Diagramme"}),o.jsx(Te,{children:"Erstellen Sie Geschftsprozessmodelle"})]}),o.jsx(pe,{children:o.jsxs(V,{className:"w-full",onClick:c=>{c.stopPropagation(),Sa("/bpmn-generator")},children:["BPMN-Generator testen",o.jsx(pu,{className:"h-4 w-4 ml-2"})]})})]}),o.jsxs(ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>Sa("/pid-generator"),children:[o.jsxs(ve,{children:[o.jsx(yl,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(be,{children:"P&ID Diagramme"}),o.jsx(Te,{children:"Entwerfen Sie Rohrleitungs- und Instrumentierungsdiagramme"})]}),o.jsx(pe,{children:o.jsxs(V,{className:"w-full",onClick:c=>{c.stopPropagation(),Sa("/pid-generator")},children:["P&ID-Generator testen",o.jsx(pu,{className:"h-4 w-4 ml-2"})]})})]}),o.jsxs(ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>Sa("/vision-ai"),children:[o.jsxs(ve,{children:[o.jsx(Da,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(be,{children:"Vision AI"}),o.jsx(Te,{children:"Konvertieren Sie Bilder in Diagramme"})]}),o.jsx(pe,{children:o.jsxs(V,{className:"w-full",onClick:c=>{c.stopPropagation(),Sa("/vision-ai")},children:["Vision AI testen",o.jsx(pu,{className:"h-4 w-4 ml-2"})]})})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs(V,{size:"lg",className:"text-lg px-8",onClick:()=>Sa(t?"/dashboard":"/auth"),children:[t?"Zum Dashboard":s.tryFree,o.jsx(pu,{className:"h-5 w-5 ml-2"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"Keine Kreditkarte erforderlich  5 kostenlose Prompts enthalten"})]})]})}),o.jsx(h$e,{}),o.jsx(_S,{}),o.jsx(DD,{}),o.jsx(sv,{})]})},p$e=()=>{const e=zp();return e==="app"?o.jsx(ORe,{}):e==="docs"?o.jsx(FRe,{}):e==="status"?o.jsx(VRe,{}):e==="admin"?o.jsx(t$e,{}):e==="api"?o.jsx(s$e,{}):e==="partners"?o.jsx(u$e,{}):e==="de"||e==="fr"?o.jsx(f$e,{language:e}):e==="bpmn"?o.jsx(HSe,{}):e==="pid"?o.jsx(fRe,{}):o.jsx(mF,{})};var m$e=Symbol("radix.slottable");function g$e(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=m$e,t}var[Jb]=Zs("Tooltip",[My]),CP=My(),tU="TooltipProvider",v$e=700,SI="tooltip.open",[y$e,nU]=Jb(tU),rU=e=>{const{__scopeTooltip:t,delayDuration:n=v$e,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,s=y.useRef(!0),c=y.useRef(!1),l=y.useRef(0);return y.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),o.jsx(y$e,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:y.useCallback(u=>{c.current=u},[]),disableHoverableContent:i,children:a})};rU.displayName=tU;var iU="Tooltip",[kIe,Qb]=Jb(iU),Lj="TooltipTrigger",x$e=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Qb(Lj,n),a=nU(Lj,n),s=CP(n),c=y.useRef(null),l=vn(t,c,i.onTriggerChange),u=y.useRef(!1),d=y.useRef(!1),h=y.useCallback(()=>u.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),o.jsx(HI,{asChild:!0,...s,children:o.jsx(At.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:lt(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:lt(e.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:lt(e.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:lt(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:lt(e.onBlur,i.onClose),onClick:lt(e.onClick,i.onClose)})})});x$e.displayName=Lj;var b$e="TooltipPortal",[CIe,w$e]=Jb(b$e,{forceMount:void 0}),Id="TooltipContent",aU=y.forwardRef((e,t)=>{const n=w$e(Id,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=e,s=Qb(Id,e.__scopeTooltip);return o.jsx(nc,{present:r||s.open,children:s.disableHoverableContent?o.jsx(sU,{side:i,...a,ref:t}):o.jsx(_$e,{side:i,...a,ref:t})})}),_$e=y.forwardRef((e,t)=>{const n=Qb(Id,e.__scopeTooltip),r=nU(Id,e.__scopeTooltip),i=y.useRef(null),a=vn(t,i),[s,c]=y.useState(null),{trigger:l,onClose:u}=n,d=i.current,{onPointerInTransitChange:h}=r,f=y.useCallback(()=>{c(null),h(!1)},[h]),p=y.useCallback((m,g)=>{const v=m.currentTarget,x={x:m.clientX,y:m.clientY},b=P$e(x,v.getBoundingClientRect()),w=k$e(x,b),_=C$e(g.getBoundingClientRect()),j=T$e([...w,..._]);c(j),h(!0)},[h]);return y.useEffect(()=>()=>f(),[f]),y.useEffect(()=>{if(l&&d){const m=v=>p(v,d),g=v=>p(v,l);return l.addEventListener("pointerleave",m),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",g)}}},[l,d,p,f]),y.useEffect(()=>{if(s){const m=g=>{const v=g.target,x={x:g.clientX,y:g.clientY},b=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),w=!A$e(x,s);b?f():w&&(f(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,d,s,u,f]),o.jsx(sU,{...e,ref:a})}),[j$e,S$e]=Jb(iU,{isInside:!1}),E$e=g$e("TooltipContent"),sU=y.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:s,...c}=e,l=Qb(Id,n),u=CP(n),{onClose:d}=l;return y.useEffect(()=>(document.addEventListener(SI,d),()=>document.removeEventListener(SI,d)),[d]),y.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),o.jsx(GI,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:o.jsxs(WI,{"data-state":l.stateAttribute,...u,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(E$e,{children:r}),o.jsx(j$e,{scope:n,isInside:!0,children:o.jsx(gX,{id:l.contentId,role:"tooltip",children:i||r})})]})})});aU.displayName=Id;var oU="TooltipArrow",N$e=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=CP(n);return S$e(oU,n).isInside?null:o.jsx(qI,{...i,...r,ref:t})});N$e.displayName=oU;function P$e(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function k$e(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function C$e(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function A$e(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,s=t.length-1;a<t.length;s=a++){const c=t[a],l=t[s],u=c.x,d=c.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(i=!i)}return i}function T$e(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),O$e(t)}function O$e(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const a=t[t.length-1],s=t[t.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const a=n[n.length-1],s=n[n.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var R$e=rU,cU=aU;const $$e=R$e,I$e=y.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(cU,{ref:r,sideOffset:t,className:ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));I$e.displayName=cU.displayName;var AP="ToastProvider",[TP,M$e,D$e]=Gj("Toast"),[lU]=Zs("Toast",[D$e]),[L$e,e0]=lU(AP),uU=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:s}=e,[c,l]=y.useState(null),[u,d]=y.useState(0),h=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${AP}\`. Expected non-empty \`string\`.`),o.jsx(TP.Provider,{scope:t,children:o.jsx(L$e,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:u,viewport:c,onViewportChange:l,onToastAdd:y.useCallback(()=>d(p=>p+1),[]),onToastRemove:y.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:s})})};uU.displayName=AP;var dU="ToastViewport",B$e=["F8"],Bj="toast.viewportPause",Fj="toast.viewportResume",hU=y.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=B$e,label:i="Notifications ({hotkey})",...a}=e,s=e0(dU,n),c=M$e(n),l=y.useRef(null),u=y.useRef(null),d=y.useRef(null),h=y.useRef(null),f=vn(t,h,s.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=s.toastCount>0;y.useEffect(()=>{const v=x=>{var w;r.length!==0&&r.every(_=>x[_]||x.code===_)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),y.useEffect(()=>{const v=l.current,x=h.current;if(m&&v&&x){const b=()=>{if(!s.isClosePausedRef.current){const S=new CustomEvent(Bj);x.dispatchEvent(S),s.isClosePausedRef.current=!0}},w=()=>{if(s.isClosePausedRef.current){const S=new CustomEvent(Fj);x.dispatchEvent(S),s.isClosePausedRef.current=!1}},_=S=>{!v.contains(S.relatedTarget)&&w()},j=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",b),v.addEventListener("focusout",_),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[m,s.isClosePausedRef]);const g=y.useCallback(({tabbingDirection:v})=>{const b=c().map(w=>{const _=w.ref.current,j=[_,...J$e(_)];return v==="forwards"?j:j.reverse()});return(v==="forwards"?b.reverse():b).flat()},[c]);return y.useEffect(()=>{const v=h.current;if(v){const x=b=>{var j,S,N;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const P=document.activeElement,k=b.shiftKey;if(b.target===v&&k){(j=u.current)==null||j.focus();return}const O=g({tabbingDirection:k?"backwards":"forwards"}),D=O.findIndex(L=>L===P);Bw(O.slice(D+1))?b.preventDefault():k?(S=u.current)==null||S.focus():(N=d.current)==null||N.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[c,g]),o.jsxs(GH,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&o.jsx(zj,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});Bw(v)}}),o.jsx(TP.Slot,{scope:n,children:o.jsx(At.ol,{tabIndex:-1,...a,ref:f})}),m&&o.jsx(zj,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});Bw(v)}})]})});hU.displayName=dU;var fU="ToastFocusProxy",zj=y.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,a=e0(fU,n);return o.jsx(nx,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:s=>{var u;const c=s.relatedTarget;!((u=a.viewport)!=null&&u.contains(c))&&r()}})});zj.displayName=fU;var wm="Toast",F$e="toast.swipeStart",z$e="toast.swipeMove",U$e="toast.swipeCancel",H$e="toast.swipeEnd",pU=y.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...s}=e,[c,l]=Zo({prop:r,defaultProp:i??!0,onChange:a,caller:wm});return o.jsx(nc,{present:n||c,children:o.jsx(W$e,{open:c,...s,ref:t,onClose:()=>l(!1),onPause:Pi(e.onPause),onResume:Pi(e.onResume),onSwipeStart:lt(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:lt(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:lt(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:lt(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});pU.displayName=wm;var[V$e,G$e]=lU(wm,{onClose(){}}),W$e=y.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:s,onEscapeKeyDown:c,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...m}=e,g=e0(wm,n),[v,x]=y.useState(null),b=vn(t,L=>x(L)),w=y.useRef(null),_=y.useRef(null),j=i||g.duration,S=y.useRef(0),N=y.useRef(j),P=y.useRef(0),{onToastAdd:k,onToastRemove:T}=g,A=Pi(()=>{var G;(v==null?void 0:v.contains(document.activeElement))&&((G=g.viewport)==null||G.focus()),s()}),O=y.useCallback(L=>{!L||L===1/0||(window.clearTimeout(P.current),S.current=new Date().getTime(),P.current=window.setTimeout(A,L))},[A]);y.useEffect(()=>{const L=g.viewport;if(L){const G=()=>{O(N.current),u==null||u()},H=()=>{const K=new Date().getTime()-S.current;N.current=N.current-K,window.clearTimeout(P.current),l==null||l()};return L.addEventListener(Bj,H),L.addEventListener(Fj,G),()=>{L.removeEventListener(Bj,H),L.removeEventListener(Fj,G)}}},[g.viewport,j,l,u,O]),y.useEffect(()=>{a&&!g.isClosePausedRef.current&&O(j)},[a,j,g.isClosePausedRef,O]),y.useEffect(()=>(k(),()=>T()),[k,T]);const D=y.useMemo(()=>v?wU(v):null,[v]);return g.viewport?o.jsxs(o.Fragment,{children:[D&&o.jsx(q$e,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:D}),o.jsx(V$e,{scope:n,onClose:A,children:Oy.createPortal(o.jsx(TP.ItemSlot,{scope:n,children:o.jsx(WH,{asChild:!0,onEscapeKeyDown:lt(c,()=>{g.isFocusedToastEscapeKeyDownRef.current||A(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(At.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:lt(e.onKeyDown,L=>{L.key==="Escape"&&(c==null||c(L.nativeEvent),L.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:lt(e.onPointerDown,L=>{L.button===0&&(w.current={x:L.clientX,y:L.clientY})}),onPointerMove:lt(e.onPointerMove,L=>{if(!w.current)return;const G=L.clientX-w.current.x,H=L.clientY-w.current.y,K=!!_.current,Z=["left","right"].includes(g.swipeDirection),q=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,le=Z?q(0,G):0,_e=Z?0:q(0,H),re=L.pointerType==="touch"?10:2,de={x:le,y:_e},Se={originalEvent:L,delta:de};K?(_.current=de,Ig(z$e,h,Se,{discrete:!1})):EI(de,g.swipeDirection,re)?(_.current=de,Ig(F$e,d,Se,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(G)>re||Math.abs(H)>re)&&(w.current=null)}),onPointerUp:lt(e.onPointerUp,L=>{const G=_.current,H=L.target;if(H.hasPointerCapture(L.pointerId)&&H.releasePointerCapture(L.pointerId),_.current=null,w.current=null,G){const K=L.currentTarget,Z={originalEvent:L,delta:G};EI(G,g.swipeDirection,g.swipeThreshold)?Ig(H$e,p,Z,{discrete:!0}):Ig(U$e,f,Z,{discrete:!0}),K.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),q$e=e=>{const{__scopeToast:t,children:n,...r}=e,i=e0(wm,t),[a,s]=y.useState(!1),[c,l]=y.useState(!1);return X$e(()=>s(!0)),y.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),c?null:o.jsx(VI,{asChild:!0,children:o.jsx(nx,{...r,children:a&&o.jsxs(o.Fragment,{children:[i.label," ",n]})})})},K$e="ToastTitle",mU=y.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(At.div,{...r,ref:t})});mU.displayName=K$e;var Y$e="ToastDescription",gU=y.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(At.div,{...r,ref:t})});gU.displayName=Y$e;var vU="ToastAction",yU=y.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?o.jsx(bU,{altText:n,asChild:!0,children:o.jsx(OP,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${vU}\`. Expected non-empty \`string\`.`),null)});yU.displayName=vU;var xU="ToastClose",OP=y.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=G$e(xU,n);return o.jsx(bU,{asChild:!0,children:o.jsx(At.button,{type:"button",...r,ref:t,onClick:lt(e.onClick,i.onClose)})})});OP.displayName=xU;var bU=y.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return o.jsx(At.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function wU(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Z$e(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const s=r.dataset.radixToastAnnounceAlt;s&&t.push(s)}else t.push(...wU(r))}}),t}function Ig(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?qH(i,a):i.dispatchEvent(a)}var EI=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t==="left"||t==="right"?a&&r>n:!a&&i>n};function X$e(e=()=>{}){const t=Pi(e);ci(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Z$e(e){return e.nodeType===e.ELEMENT_NODE}function J$e(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Bw(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Q$e=uU,_U=hU,jU=pU,SU=mU,EU=gU,NU=yU,PU=OP;const eIe=Q$e,kU=y.forwardRef(({className:e,...t},n)=>o.jsx(_U,{ref:n,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));kU.displayName=_U.displayName;const tIe=Dp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),CU=y.forwardRef(({className:e,variant:t,...n},r)=>o.jsx(jU,{ref:r,className:ye(tIe({variant:t}),e),...n}));CU.displayName=jU.displayName;const nIe=y.forwardRef(({className:e,...t},n)=>o.jsx(NU,{ref:n,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));nIe.displayName=NU.displayName;const AU=y.forwardRef(({className:e,...t},n)=>o.jsx(PU,{ref:n,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(Pa,{className:"h-4 w-4"})}));AU.displayName=PU.displayName;const TU=y.forwardRef(({className:e,...t},n)=>o.jsx(SU,{ref:n,className:ye("text-sm font-semibold",e),...t}));TU.displayName=SU.displayName;const OU=y.forwardRef(({className:e,...t},n)=>o.jsx(EU,{ref:n,className:ye("text-sm opacity-90",e),...t}));OU.displayName=EU.displayName;function rIe(){const{toasts:e}=Ud();return o.jsxs(eIe,{children:[e.map(function({id:t,title:n,description:r,action:i,...a}){return o.jsxs(CU,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(TU,{children:n}),r&&o.jsx(OU,{children:r})]}),i,o.jsx(AU,{})]},t)}),o.jsx(kU,{})]})}var NI=["light","dark"],iIe="(prefers-color-scheme: dark)",aIe=y.createContext(void 0),sIe={setTheme:e=>{},themes:[]},oIe=()=>{var e;return(e=y.useContext(aIe))!=null?e:sIe};y.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:s,attrs:c,nonce:l})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=i?NI.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,g=!1,v=!0)=>{let x=s?s[m]:m,b=g?m+"|| ''":`'${x}'`,w="";return i&&v&&!g&&NI.includes(m)&&(w+=`d.style.colorScheme = '${m}';`),n==="class"?g||x?w+=`c.add(${b})`:w+="null":x&&(w+=`d[s](n,${b})`),w},p=e?`!function(){${d}${f(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${iIe}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${f(s?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${f(s?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return y.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});const cIe=({...e})=>{const{theme:t="system"}=oIe();return o.jsx(Kq,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},lIe=new YY,uIe=zp();vM(document.getElementById("root")).render(o.jsx(F7,{children:o.jsx(ZY,{client:lIe,children:o.jsxs($$e,{children:[o.jsx(rIe,{}),o.jsx(cIe,{}),o.jsx(kH,{children:uIe?o.jsx(p$e,{}):o.jsx(mF,{})})]})})}));
