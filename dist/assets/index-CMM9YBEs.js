var Ck=Object.defineProperty;var Vv=t=>{throw TypeError(t)};var Pk=(t,e,n)=>e in t?Ck(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zo=(t,e,n)=>Pk(t,typeof e!="symbol"?e+"":e,n),Uh=(t,e,n)=>e.has(t)||Vv("Cannot "+n);var z=(t,e,n)=>(Uh(t,e,"read from private field"),n?n.call(t):e.get(t)),gt=(t,e,n)=>e.has(t)?Vv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),He=(t,e,n,r)=>(Uh(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Nn=(t,e,n)=>(Uh(t,e,"access private method"),n);var $l=(t,e,n,r)=>({set _(i){He(t,e,i,n)},get _(){return z(t,e,r)}});import{j as s,A as J0,m as ae,u as Q0,a as oc,b as Tk}from"./framer-motion-BXE86uAX.js";import{a as Jd,r as v,R as V,v as Rk,u as Bc,d as Ak,c as ur,L as pn,e as tr,B as ew,f as ra,h as Ce,i as Ik,N as rr}from"./react-vendor-DhWd_Iap.js";import{P as Me,c as Kf,a as pr,u as Ot,B as Mk,b as Dr,d as ui,e as Zn,f as Re,R as Dk,g as tw,h as Hn,i as Ok,j as Qd,A as nw,D as rw,C as sw,k as iw,l as aw,S as ow,O as Fc,m as zc,n as eu,T as Uc,o as Hc,p as Yf,q as Zf,r as cw,s as Vc,t as $k,v as lw,w as Lk,x as Bk,y as tu,z as go,E as dw,I as uw,F as hw,G as pw,H as Fk,J as fw,K as mw,L as gw,M as vw,N as xw,Q as yw,U as bw,V as zk,W as Uk,X as Hk,Y as ww,Z as Vk,_ as Gk,$ as Wk,a0 as qk,a1 as Kk,a2 as Yk,a3 as Zk}from"./ui-vendor-D9-BIW9c.js";import{l as Xk}from"./lottie-DsKYGDcj.js";import{B as Xf,e as ve,I as Jk,i as tt,a as Ae,b as hr,c as B,d as rn,f as Gc,t as Zi,g as Xi,h as Qk,V as Wc,j as O,s as js,k as rt,l as Jf,m as vn,n as In,q as Yt,o as yc,p as Rr,r as nu,u as jt,v as Qf,O as _w,w as Yn,x as jw,y as Za,z as Cs,C as Z,A as ru,D as Dt,E as _n,F as hi,G as Ne,H as Te,J as su,K as ze,L as xn,M as de,N as _,P as em,Q as iu,R as au,S as gs,T as Mn,U as tm,W as Xr,X as it,Y as Hh,Z as Ew,_ as Jr,$ as Nw,a0 as eC,a1 as ie,a2 as St,a3 as le,a4 as q,a5 as Ip,a6 as fs,a7 as kn,a8 as tC,a9 as Cn,aa as nm,ab as Gv,ac as nC,ad as Sw,ae as Mp,af as Es,ag as ou,ah as Dp,ai as rC,aj as kw,ak as $a,al as cu,am as rm,an as Pn,ao as sn,ap as en,aq as xt,ar as et,as as lu,at as bc,au as Xa,av as Ji,aw as Xn,ax as lt,ay as qc,az as wc,aA as Cw,aB as Kc,aC as Pa,aD as dd,aE as Pi,aF as Wv,aG as sC,aH as iC,aI as aC,aJ as oC,aK as cC,aL as Pw,aM as ii,aN as Op,aO as Tw,aP as lC,aQ as sm,aR as dC,aS as im,aT as uC,aU as hC,aV as pC,aW as fC,aX as $p,aY as Rw,aZ as mC,a_ as gC,a$ as qv,b0 as Aw,b1 as vC,b2 as am,b3 as xC,b4 as Iw,b5 as Mw,b6 as yC,b7 as bC,b8 as wC}from"./bpmn-vendor-Ci46SDFT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Dw,Kv=Jd;Dw=Kv.createRoot,Kv.hydrateRoot;const _C=1,jC=1e6;let Vh=0;function EC(){return Vh=(Vh+1)%Number.MAX_SAFE_INTEGER,Vh.toString()}const Gh=new Map,Yv=t=>{if(Gh.has(t))return;const e=setTimeout(()=>{Gh.delete(t),cc({type:"REMOVE_TOAST",toastId:t})},jC);Gh.set(t,e)},NC=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,_C)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Yv(n):t.toasts.forEach(r=>{Yv(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ud=[];let hd={toasts:[]};function cc(t){hd=NC(hd,t),ud.forEach(e=>{e(hd)})}function SC({...t}){const e=EC(),n=i=>cc({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>cc({type:"DISMISS_TOAST",toastId:e});return cc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Yc(){const[t,e]=v.useState(hd);return v.useEffect(()=>(ud.push(e),()=>{const n=ud.indexOf(e);n>-1&&ud.splice(n,1)}),[t]),{...t,toast:SC,dismiss:n=>cc({type:"DISMISS_TOAST",toastId:n})}}var Ow=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),kC="VisuallyHidden",du=v.forwardRef((t,e)=>s.jsx(Me.span,{...t,ref:e,style:{...Ow,...t.style}}));du.displayName=kC;var CC=du,om="ToastProvider",[cm,PC,TC]=Kf("Toast"),[$w,n9]=pr("Toast",[TC]),[RC,uu]=$w(om),Lw=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=t,[c,l]=v.useState(null),[d,u]=v.useState(0),h=v.useRef(!1),p=v.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${om}\`. Expected non-empty \`string\`.`),s.jsx(cm.Provider,{scope:e,children:s.jsx(RC,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:c,onViewportChange:l,onToastAdd:v.useCallback(()=>u(f=>f+1),[]),onToastRemove:v.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};Lw.displayName=om;var Bw="ToastViewport",AC=["F8"],Lp="toast.viewportPause",Bp="toast.viewportResume",Fw=v.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=AC,label:i="Notifications ({hotkey})",...a}=t,o=uu(Bw,n),c=PC(n),l=v.useRef(null),d=v.useRef(null),u=v.useRef(null),h=v.useRef(null),p=Ot(e,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;v.useEffect(()=>{const g=w=>{var b;r.length!==0&&r.every(j=>w[j]||w.code===j)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),v.useEffect(()=>{const g=l.current,w=h.current;if(m&&g&&w){const y=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(Lp);w.dispatchEvent(N),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(Bp);w.dispatchEvent(N),o.isClosePausedRef.current=!1}},j=N=>{!g.contains(N.relatedTarget)&&b()},C=()=>{g.contains(document.activeElement)||b()};return g.addEventListener("focusin",y),g.addEventListener("focusout",j),g.addEventListener("pointermove",y),g.addEventListener("pointerleave",C),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{g.removeEventListener("focusin",y),g.removeEventListener("focusout",j),g.removeEventListener("pointermove",y),g.removeEventListener("pointerleave",C),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[m,o.isClosePausedRef]);const x=v.useCallback(({tabbingDirection:g})=>{const y=c().map(b=>{const j=b.ref.current,C=[j,...GC(j)];return g==="forwards"?C:C.reverse()});return(g==="forwards"?y.reverse():y).flat()},[c]);return v.useEffect(()=>{const g=h.current;if(g){const w=y=>{var C,N,k;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const P=document.activeElement,T=y.shiftKey;if(y.target===g&&T){(C=d.current)==null||C.focus();return}const M=x({tabbingDirection:T?"backwards":"forwards"}),K=M.findIndex(F=>F===P);Wh(M.slice(K+1))?y.preventDefault():T?(N=d.current)==null||N.focus():(k=u.current)==null||k.focus()}};return g.addEventListener("keydown",w),()=>g.removeEventListener("keydown",w)}},[c,x]),s.jsxs(Mk,{ref:l,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&s.jsx(Fp,{ref:d,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"forwards"});Wh(g)}}),s.jsx(cm.Slot,{scope:n,children:s.jsx(Me.ol,{tabIndex:-1,...a,ref:p})}),m&&s.jsx(Fp,{ref:u,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"backwards"});Wh(g)}})]})});Fw.displayName=Bw;var zw="ToastFocusProxy",Fp=v.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,a=uu(zw,n);return s.jsx(du,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const c=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(c))&&r()}})});Fp.displayName=zw;var Zc="Toast",IC="toast.swipeStart",MC="toast.swipeMove",DC="toast.swipeCancel",OC="toast.swipeEnd",Uw=v.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...o}=t,[c,l]=Dr({prop:r,defaultProp:i??!0,onChange:a,caller:Zc});return s.jsx(ui,{present:n||c,children:s.jsx(BC,{open:c,...o,ref:e,onClose:()=>l(!1),onPause:Zn(t.onPause),onResume:Zn(t.onResume),onSwipeStart:Re(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Re(t.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Re(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Re(t.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});Uw.displayName=Zc;var[$C,LC]=$w(Zc,{onClose(){}}),BC=v.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:c,onPause:l,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...m}=t,x=uu(Zc,n),[g,w]=v.useState(null),y=Ot(e,F=>w(F)),b=v.useRef(null),j=v.useRef(null),C=i||x.duration,N=v.useRef(0),k=v.useRef(C),P=v.useRef(0),{onToastAdd:T,onToastRemove:L}=x,R=Zn(()=>{var te;(g==null?void 0:g.contains(document.activeElement))&&((te=x.viewport)==null||te.focus()),o()}),M=v.useCallback(F=>{!F||F===1/0||(window.clearTimeout(P.current),N.current=new Date().getTime(),P.current=window.setTimeout(R,F))},[R]);v.useEffect(()=>{const F=x.viewport;if(F){const te=()=>{M(k.current),d==null||d()},oe=()=>{const at=new Date().getTime()-N.current;k.current=k.current-at,window.clearTimeout(P.current),l==null||l()};return F.addEventListener(Lp,oe),F.addEventListener(Bp,te),()=>{F.removeEventListener(Lp,oe),F.removeEventListener(Bp,te)}}},[x.viewport,C,l,d,M]),v.useEffect(()=>{a&&!x.isClosePausedRef.current&&M(C)},[a,C,x.isClosePausedRef,M]),v.useEffect(()=>(T(),()=>L()),[T,L]);const K=v.useMemo(()=>g?Yw(g):null,[g]);return x.viewport?s.jsxs(s.Fragment,{children:[K&&s.jsx(FC,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),s.jsx($C,{scope:n,onClose:R,children:Jd.createPortal(s.jsx(cm.ItemSlot,{scope:n,children:s.jsx(Dk,{asChild:!0,onEscapeKeyDown:Re(c,()=>{x.isFocusedToastEscapeKeyDownRef.current||R(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":x.swipeDirection,...m,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Re(t.onKeyDown,F=>{F.key==="Escape"&&(c==null||c(F.nativeEvent),F.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Re(t.onPointerDown,F=>{F.button===0&&(b.current={x:F.clientX,y:F.clientY})}),onPointerMove:Re(t.onPointerMove,F=>{if(!b.current)return;const te=F.clientX-b.current.x,oe=F.clientY-b.current.y,at=!!j.current,Ye=["left","right"].includes(x.swipeDirection),ce=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,ut=Ye?ce(0,te):0,ht=Ye?0:ce(0,oe),$e=F.pointerType==="touch"?10:2,De={x:ut,y:ht},Se={originalEvent:F,delta:De};at?(j.current=De,Ll(MC,h,Se,{discrete:!1})):Zv(De,x.swipeDirection,$e)?(j.current=De,Ll(IC,u,Se,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(te)>$e||Math.abs(oe)>$e)&&(b.current=null)}),onPointerUp:Re(t.onPointerUp,F=>{const te=j.current,oe=F.target;if(oe.hasPointerCapture(F.pointerId)&&oe.releasePointerCapture(F.pointerId),j.current=null,b.current=null,te){const at=F.currentTarget,Ye={originalEvent:F,delta:te};Zv(te,x.swipeDirection,x.swipeThreshold)?Ll(OC,f,Ye,{discrete:!0}):Ll(DC,p,Ye,{discrete:!0}),at.addEventListener("click",ce=>ce.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),FC=t=>{const{__scopeToast:e,children:n,...r}=t,i=uu(Zc,e),[a,o]=v.useState(!1),[c,l]=v.useState(!1);return HC(()=>o(!0)),v.useEffect(()=>{const d=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(d)},[]),c?null:s.jsx(tw,{asChild:!0,children:s.jsx(du,{...r,children:a&&s.jsxs(s.Fragment,{children:[i.label," ",n]})})})},zC="ToastTitle",Hw=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(Me.div,{...r,ref:e})});Hw.displayName=zC;var UC="ToastDescription",Vw=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(Me.div,{...r,ref:e})});Vw.displayName=UC;var Gw="ToastAction",Ww=v.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?s.jsx(Kw,{altText:n,asChild:!0,children:s.jsx(lm,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Gw}\`. Expected non-empty \`string\`.`),null)});Ww.displayName=Gw;var qw="ToastClose",lm=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=LC(qw,n);return s.jsx(Kw,{asChild:!0,children:s.jsx(Me.button,{type:"button",...r,ref:e,onClick:Re(t.onClick,i.onClose)})})});lm.displayName=qw;var Kw=v.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return s.jsx(Me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function Yw(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),VC(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Yw(r))}}),e}function Ll(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Ok(i,a):i.dispatchEvent(a)}var Zv=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),a=r>i;return e==="left"||e==="right"?a&&r>n:!a&&i>n};function HC(t=()=>{}){const e=Zn(t);Hn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function VC(t){return t.nodeType===t.ELEMENT_NODE}function GC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Wh(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var WC=Lw,Zw=Fw,Xw=Uw,Jw=Hw,Qw=Vw,e_=Ww,t_=lm;function n_(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=n_(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ja(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=n_(t))&&(r&&(r+=" "),r+=e);return r}const Xv=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Jv=Ja,vo=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Jv(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(d=>{const u=n==null?void 0:n[d],h=a==null?void 0:a[d];if(u===null)return null;const p=Xv(u)||Xv(h);return i[d][p]}),c=n&&Object.entries(n).reduce((d,u)=>{let[h,p]=u;return p===void 0||(d[h]=p),d},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:p,...f}=u;return Object.entries(f).every(m=>{let[x,g]=m;return Array.isArray(g)?g.includes({...a,...c}[x]):{...a,...c}[x]===g})?[...d,h,p]:d},[]);return Jv(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r_=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},l)=>v.createElement("svg",{ref:l,...KC,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:r_("lucide",i),...c},[...o.map(([d,u])=>v.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=(t,e)=>{const n=v.forwardRef(({className:r,...i},a)=>v.createElement(YC,{ref:a,iconNode:e,className:r_(`lucide-${qC(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=G("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=G("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=G("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=G("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=G("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=G("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=G("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=G("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=G("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=G("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=G("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=G("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=G("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=G("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=G("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=G("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=G("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=G("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=G("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=G("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=G("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=G("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=G("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=G("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=G("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=G("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=G("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=G("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=G("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=G("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=G("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=G("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=G("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=G("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=G("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=G("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=G("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=G("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=G("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=G("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=G("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=G("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=G("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=G("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=G("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=G("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=G("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=G("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=G("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=G("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=G("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=G("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=G("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=G("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=G("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=G("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=G("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=G("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=G("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=G("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=G("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=G("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=G("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=G("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=G("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=G("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=G("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=G("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=G("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=G("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=G("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=G("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=G("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),gm="-",$P=t=>{const e=BP(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const c=o.split(gm);return c[0]===""&&c.length!==1&&c.shift(),l_(c,e)||LP(o)},getConflictingClassGroupIds:(o,c)=>{const l=n[o]||[];return c&&r[o]?[...l,...r[o]]:l}}},l_=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?l_(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(gm);return(o=e.validators.find(({validator:c})=>c(a)))==null?void 0:o.classGroupId},hx=/^\[(.+)\]$/,LP=t=>{if(hx.test(t)){const e=hx.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},BP=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return zP(Object.entries(t.classGroups),n).forEach(([a,o])=>{Gp(o,r,a,e)}),r},Gp=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:px(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(FP(i)){Gp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{Gp(o,px(e,a),n,r)})})},px=(t,e)=>{let n=t;return e.split(gm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},FP=t=>t.isThemeGetter,zP=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,c])=>[e+o,c])):a);return[n,i]}):t,UP=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},d_="!",HP=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,o=c=>{const l=[];let d=0,u=0,h;for(let g=0;g<c.length;g++){let w=c[g];if(d===0){if(w===i&&(r||c.slice(g,g+a)===e)){l.push(c.slice(u,g)),u=g+a;continue}if(w==="/"){h=g;continue}}w==="["?d++:w==="]"&&d--}const p=l.length===0?c:c.substring(u),f=p.startsWith(d_),m=f?p.substring(1):p,x=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:x}};return n?c=>n({className:c,parseClassName:o}):o},VP=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},GP=t=>({cache:UP(t.cacheSize),parseClassName:HP(t),...$P(t)}),WP=/\s+/,qP=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(WP);let c="";for(let l=o.length-1;l>=0;l-=1){const d=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=n(d);let m=!!f,x=r(m?p.substring(0,f):p);if(!x){if(!m){c=d+(c.length>0?" "+c:c);continue}if(x=r(p),!x){c=d+(c.length>0?" "+c:c);continue}m=!1}const g=VP(u).join(":"),w=h?g+d_:g,y=w+x;if(a.includes(y))continue;a.push(y);const b=i(x,m);for(let j=0;j<b.length;++j){const C=b[j];a.push(w+C)}c=d+(c.length>0?" "+c:c)}return c};function KP(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=u_(e))&&(r&&(r+=" "),r+=n);return r}const u_=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=u_(t[r]))&&(n&&(n+=" "),n+=e);return n};function YP(t,...e){let n,r,i,a=o;function o(l){const d=e.reduce((u,h)=>h(u),t());return n=GP(d),r=n.cache.get,i=n.cache.set,a=c,c(l)}function c(l){const d=r(l);if(d)return d;const u=qP(l,n);return i(l,u),u}return function(){return a(KP.apply(null,arguments))}}const $t=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},h_=/^\[(?:([a-z-]+):)?(.+)\]$/i,ZP=/^\d+\/\d+$/,XP=new Set(["px","full","screen"]),JP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,QP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,as=t=>Ba(t)||XP.has(t)||ZP.test(t),zs=t=>xo(t,"length",dT),Ba=t=>!!t&&!Number.isNaN(Number(t)),Xh=t=>xo(t,"number",Ba),Uo=t=>!!t&&Number.isInteger(Number(t)),rT=t=>t.endsWith("%")&&Ba(t.slice(0,-1)),qe=t=>h_.test(t),Us=t=>JP.test(t),sT=new Set(["length","size","percentage"]),iT=t=>xo(t,sT,p_),aT=t=>xo(t,"position",p_),oT=new Set(["image","url"]),cT=t=>xo(t,oT,hT),lT=t=>xo(t,"",uT),Ho=()=>!0,xo=(t,e,n)=>{const r=h_.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},dT=t=>QP.test(t)&&!eT.test(t),p_=()=>!1,uT=t=>tT.test(t),hT=t=>nT.test(t),pT=()=>{const t=$t("colors"),e=$t("spacing"),n=$t("blur"),r=$t("brightness"),i=$t("borderColor"),a=$t("borderRadius"),o=$t("borderSpacing"),c=$t("borderWidth"),l=$t("contrast"),d=$t("grayscale"),u=$t("hueRotate"),h=$t("invert"),p=$t("gap"),f=$t("gradientColorStops"),m=$t("gradientColorStopPositions"),x=$t("inset"),g=$t("margin"),w=$t("opacity"),y=$t("padding"),b=$t("saturate"),j=$t("scale"),C=$t("sepia"),N=$t("skew"),k=$t("space"),P=$t("translate"),T=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",qe,e],M=()=>[qe,e],K=()=>["",as,zs],F=()=>["auto",Ba,qe],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],oe=()=>["solid","dashed","dotted","double","none"],at=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ye=()=>["start","end","center","between","around","evenly","stretch"],ce=()=>["","0",qe],ut=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ht=()=>[Ba,qe];return{cacheSize:500,separator:":",theme:{colors:[Ho],spacing:[as,zs],blur:["none","",Us,qe],brightness:ht(),borderColor:[t],borderRadius:["none","","full",Us,qe],borderSpacing:M(),borderWidth:K(),contrast:ht(),grayscale:ce(),hueRotate:ht(),invert:ce(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[rT,zs],inset:R(),margin:R(),opacity:ht(),padding:M(),saturate:ht(),scale:ht(),sepia:ce(),skew:ht(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[Us]}],"break-after":[{"break-after":ut()}],"break-before":[{"break-before":ut()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),qe]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uo,qe]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:ce()}],shrink:[{shrink:ce()}],order:[{order:["first","last","none",Uo,qe]}],"grid-cols":[{"grid-cols":[Ho]}],"col-start-end":[{col:["auto",{span:["full",Uo,qe]},qe]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Ho]}],"row-start-end":[{row:["auto",{span:[Uo,qe]},qe]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...Ye()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ye(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ye(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qe,e]}],"min-w":[{"min-w":[qe,e,"min","max","fit"]}],"max-w":[{"max-w":[qe,e,"none","full","min","max","fit","prose",{screen:[Us]},Us]}],h:[{h:[qe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Us,zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xh]}],"font-family":[{font:[Ho]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",Ba,Xh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",as,qe]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",as,zs]}],"underline-offset":[{"underline-offset":["auto",as,qe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),aT]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",iT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cT]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...oe(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:oe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...oe()]}],"outline-offset":[{"outline-offset":[as,qe]}],"outline-w":[{outline:[as,zs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[as,zs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Us,lT]}],"shadow-color":[{shadow:[Ho]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...at(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":at()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Us,qe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:ht()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:ht()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Uo,qe]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[as,zs,Xh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},fT=YP(pT);function Y(...t){return fT(Ja(t))}const mT=WC,f_=v.forwardRef(({className:t,...e},n)=>s.jsx(Zw,{ref:n,className:Y("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));f_.displayName=Zw.displayName;const gT=vo("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),m_=v.forwardRef(({className:t,variant:e,...n},r)=>s.jsx(Xw,{ref:r,className:Y(gT({variant:e}),t),...n}));m_.displayName=Xw.displayName;const vT=v.forwardRef(({className:t,...e},n)=>s.jsx(e_,{ref:n,className:Y("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));vT.displayName=e_.displayName;const g_=v.forwardRef(({className:t,...e},n)=>s.jsx(t_,{ref:n,className:Y("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:s.jsx(Wr,{className:"h-4 w-4"})}));g_.displayName=t_.displayName;const v_=v.forwardRef(({className:t,...e},n)=>s.jsx(Jw,{ref:n,className:Y("text-sm font-semibold",t),...e}));v_.displayName=Jw.displayName;const x_=v.forwardRef(({className:t,...e},n)=>s.jsx(Qw,{ref:n,className:Y("text-sm opacity-90",t),...e}));x_.displayName=Qw.displayName;function y_(){const{toasts:t}=Yc();return s.jsxs(mT,{children:[t.map(function({id:e,title:n,description:r,action:i,...a}){return s.jsxs(m_,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(v_,{children:n}),r&&s.jsx(x_,{children:r})]}),i,s.jsx(g_,{})]},e)}),s.jsx(f_,{})]})}var fx=["light","dark"],xT="(prefers-color-scheme: dark)",yT=v.createContext(void 0),bT={setTheme:t=>{},themes:[]},wT=()=>{var t;return(t=v.useContext(yT))!=null?t:bT};v.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:c,nonce:l})=>{let d=a==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=i?fx.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(m,x=!1,g=!0)=>{let w=o?o[m]:m,y=x?m+"|| ''":`'${w}'`,b="";return i&&g&&!x&&fx.includes(m)&&(b+=`d.style.colorScheme = '${m}';`),n==="class"?x||w?b+=`c.add(${y})`:b+="null":w&&(b+=`d[s](n,${y})`),b},f=t?`!function(){${u}${p(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${xT}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${d?"":"else{"+p(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${h}}catch(t){}}();`;return v.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})});var _T=t=>{switch(t){case"success":return NT;case"info":return kT;case"warning":return ST;case"error":return CT;default:return null}},jT=Array(12).fill(0),ET=({visible:t,className:e})=>V.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},V.createElement("div",{className:"sonner-spinner"},jT.map((n,r)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),NT=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ST=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),kT=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),CT=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),PT=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),TT=()=>{let[t,e]=V.useState(document.hidden);return V.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Wp=1,RT=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Wp++,a=this.toasts.find(c=>c.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:n}),{...c,...t,id:i,dismissible:o,title:n}):c):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0,a,o=r.then(async l=>{if(a=["resolve",l],V.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(IT(l)&&!l.ok){i=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:d,description:u})}else if(e.success!==void 0){i=!1;let d=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:d,description:u})}}).catch(async l=>{if(a=["reject",l],e.error!==void 0){i=!1;let d=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:d,description:u})}}).finally(()=>{var l;i&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),c=()=>new Promise((l,d)=>o.then(()=>a[0]==="reject"?d(a[1]):l(a[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Wp++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Fn=new RT,AT=(t,e)=>{let n=(e==null?void 0:e.id)||Wp++;return Fn.addToast({title:t,...e,id:n}),n},IT=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",MT=AT,DT=()=>Fn.toasts,OT=()=>Fn.getActiveToasts(),S=Object.assign(MT,{success:Fn.success,info:Fn.info,warning:Fn.warning,error:Fn.error,custom:Fn.custom,message:Fn.message,promise:Fn.promise,dismiss:Fn.dismiss,loading:Fn.loading},{getHistory:DT,getToasts:OT});function $T(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}$T(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Bl(t){return t.label!==void 0}var LT=3,BT="32px",FT="16px",mx=4e3,zT=356,UT=14,HT=20,VT=200;function jr(...t){return t.filter(Boolean).join(" ")}function GT(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var WT=t=>{var e,n,r,i,a,o,c,l,d,u,h;let{invert:p,toast:f,unstyled:m,interacting:x,setHeights:g,visibleToasts:w,heights:y,index:b,toasts:j,expanded:C,removeToast:N,defaultRichColors:k,closeButton:P,style:T,cancelButtonStyle:L,actionButtonStyle:R,className:M="",descriptionClassName:K="",duration:F,position:te,gap:oe,loadingIcon:at,expandByDefault:Ye,classNames:ce,icons:ut,closeButtonAriaLabel:ht="Close toast",pauseWhenPageIsHidden:$e}=t,[De,Se]=V.useState(null),[At,Pt]=V.useState(null),[se,Qe]=V.useState(!1),[kt,W]=V.useState(!1),[pe,ne]=V.useState(!1),[Ze,xe]=V.useState(!1),[Ge,pt]=V.useState(!1),[ft,zt]=V.useState(0),[On,Q]=V.useState(0),ge=V.useRef(f.duration||F||mx),ke=V.useRef(null),We=V.useRef(null),Ie=b===0,Xe=b+1<=w,ct=f.type,Ct=f.dismissible!==!1,rs=f.className||"",Ro=f.descriptionClassName||"",pa=V.useMemo(()=>y.findIndex(Oe=>Oe.toastId===f.id)||0,[y,f.id]),Ao=V.useMemo(()=>{var Oe;return(Oe=f.closeButton)!=null?Oe:P},[f.closeButton,P]),Os=V.useMemo(()=>f.duration||F||mx,[f.duration,F]),Io=V.useRef(0),$s=V.useRef(0),Nl=V.useRef(0),Ls=V.useRef(null),[Ah,fa]=te.split("-"),Sl=V.useMemo(()=>y.reduce((Oe,bt,Tt)=>Tt>=pa?Oe:Oe+bt.height,0),[y,pa]),Mo=TT(),Do=f.invert||p,Bs=ct==="loading";$s.current=V.useMemo(()=>pa*oe+Sl,[pa,Sl]),V.useEffect(()=>{ge.current=Os},[Os]),V.useEffect(()=>{Qe(!0)},[]),V.useEffect(()=>{let Oe=We.current;if(Oe){let bt=Oe.getBoundingClientRect().height;return Q(bt),g(Tt=>[{toastId:f.id,height:bt,position:f.position},...Tt]),()=>g(Tt=>Tt.filter(tn=>tn.toastId!==f.id))}},[g,f.id]),V.useLayoutEffect(()=>{if(!se)return;let Oe=We.current,bt=Oe.style.height;Oe.style.height="auto";let Tt=Oe.getBoundingClientRect().height;Oe.style.height=bt,Q(Tt),g(tn=>tn.find(En=>En.toastId===f.id)?tn.map(En=>En.toastId===f.id?{...En,height:Tt}:En):[{toastId:f.id,height:Tt,position:f.position},...tn])},[se,f.title,f.description,g,f.id]);let $n=V.useCallback(()=>{W(!0),zt($s.current),g(Oe=>Oe.filter(bt=>bt.toastId!==f.id)),setTimeout(()=>{N(f)},VT)},[f,N,g,$s]);V.useEffect(()=>{if(f.promise&&ct==="loading"||f.duration===1/0||f.type==="loading")return;let Oe;return C||x||$e&&Mo?(()=>{if(Nl.current<Io.current){let bt=new Date().getTime()-Io.current;ge.current=ge.current-bt}Nl.current=new Date().getTime()})():ge.current!==1/0&&(Io.current=new Date().getTime(),Oe=setTimeout(()=>{var bt;(bt=f.onAutoClose)==null||bt.call(f,f),$n()},ge.current)),()=>clearTimeout(Oe)},[C,x,f,ct,$e,Mo,$n]),V.useEffect(()=>{f.delete&&$n()},[$n,f.delete]);function Oo(){var Oe,bt,Tt;return ut!=null&&ut.loading?V.createElement("div",{className:jr(ce==null?void 0:ce.loader,(Oe=f==null?void 0:f.classNames)==null?void 0:Oe.loader,"sonner-loader"),"data-visible":ct==="loading"},ut.loading):at?V.createElement("div",{className:jr(ce==null?void 0:ce.loader,(bt=f==null?void 0:f.classNames)==null?void 0:bt.loader,"sonner-loader"),"data-visible":ct==="loading"},at):V.createElement(ET,{className:jr(ce==null?void 0:ce.loader,(Tt=f==null?void 0:f.classNames)==null?void 0:Tt.loader),visible:ct==="loading"})}return V.createElement("li",{tabIndex:0,ref:We,className:jr(M,rs,ce==null?void 0:ce.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,ce==null?void 0:ce.default,ce==null?void 0:ce[ct],(n=f==null?void 0:f.classNames)==null?void 0:n[ct]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:k,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":se,"data-promise":!!f.promise,"data-swiped":Ge,"data-removed":kt,"data-visible":Xe,"data-y-position":Ah,"data-x-position":fa,"data-index":b,"data-front":Ie,"data-swiping":pe,"data-dismissible":Ct,"data-type":ct,"data-invert":Do,"data-swipe-out":Ze,"data-swipe-direction":At,"data-expanded":!!(C||Ye&&se),style:{"--index":b,"--toasts-before":b,"--z-index":j.length-b,"--offset":`${kt?ft:$s.current}px`,"--initial-height":Ye?"auto":`${On}px`,...T,...f.style},onDragEnd:()=>{ne(!1),Se(null),Ls.current=null},onPointerDown:Oe=>{Bs||!Ct||(ke.current=new Date,zt($s.current),Oe.target.setPointerCapture(Oe.pointerId),Oe.target.tagName!=="BUTTON"&&(ne(!0),Ls.current={x:Oe.clientX,y:Oe.clientY}))},onPointerUp:()=>{var Oe,bt,Tt,tn;if(Ze||!Ct)return;Ls.current=null;let En=Number(((Oe=We.current)==null?void 0:Oe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),an=Number(((bt=We.current)==null?void 0:bt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ss=new Date().getTime()-((Tt=ke.current)==null?void 0:Tt.getTime()),Wn=De==="x"?En:an,_r=Math.abs(Wn)/ss;if(Math.abs(Wn)>=HT||_r>.11){zt($s.current),(tn=f.onDismiss)==null||tn.call(f,f),Pt(De==="x"?En>0?"right":"left":an>0?"down":"up"),$n(),xe(!0),pt(!1);return}ne(!1),Se(null)},onPointerMove:Oe=>{var bt,Tt,tn,En;if(!Ls.current||!Ct||((bt=window.getSelection())==null?void 0:bt.toString().length)>0)return;let an=Oe.clientY-Ls.current.y,ss=Oe.clientX-Ls.current.x,Wn=(Tt=t.swipeDirections)!=null?Tt:GT(te);!De&&(Math.abs(ss)>1||Math.abs(an)>1)&&Se(Math.abs(ss)>Math.abs(an)?"x":"y");let _r={x:0,y:0};De==="y"?(Wn.includes("top")||Wn.includes("bottom"))&&(Wn.includes("top")&&an<0||Wn.includes("bottom")&&an>0)&&(_r.y=an):De==="x"&&(Wn.includes("left")||Wn.includes("right"))&&(Wn.includes("left")&&ss<0||Wn.includes("right")&&ss>0)&&(_r.x=ss),(Math.abs(_r.x)>0||Math.abs(_r.y)>0)&&pt(!0),(tn=We.current)==null||tn.style.setProperty("--swipe-amount-x",`${_r.x}px`),(En=We.current)==null||En.style.setProperty("--swipe-amount-y",`${_r.y}px`)}},Ao&&!f.jsx?V.createElement("button",{"aria-label":ht,"data-disabled":Bs,"data-close-button":!0,onClick:Bs||!Ct?()=>{}:()=>{var Oe;$n(),(Oe=f.onDismiss)==null||Oe.call(f,f)},className:jr(ce==null?void 0:ce.closeButton,(i=f==null?void 0:f.classNames)==null?void 0:i.closeButton)},(a=ut==null?void 0:ut.close)!=null?a:PT):null,f.jsx||v.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:V.createElement(V.Fragment,null,ct||f.icon||f.promise?V.createElement("div",{"data-icon":"",className:jr(ce==null?void 0:ce.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Oo():null,f.type!=="loading"?f.icon||(ut==null?void 0:ut[ct])||_T(ct):null):null,V.createElement("div",{"data-content":"",className:jr(ce==null?void 0:ce.content,(c=f==null?void 0:f.classNames)==null?void 0:c.content)},V.createElement("div",{"data-title":"",className:jr(ce==null?void 0:ce.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?V.createElement("div",{"data-description":"",className:jr(K,Ro,ce==null?void 0:ce.description,(d=f==null?void 0:f.classNames)==null?void 0:d.description)},typeof f.description=="function"?f.description():f.description):null),v.isValidElement(f.cancel)?f.cancel:f.cancel&&Bl(f.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||L,onClick:Oe=>{var bt,Tt;Bl(f.cancel)&&Ct&&((Tt=(bt=f.cancel).onClick)==null||Tt.call(bt,Oe),$n())},className:jr(ce==null?void 0:ce.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,v.isValidElement(f.action)?f.action:f.action&&Bl(f.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||R,onClick:Oe=>{var bt,Tt;Bl(f.action)&&((Tt=(bt=f.action).onClick)==null||Tt.call(bt,Oe),!Oe.defaultPrevented&&$n())},className:jr(ce==null?void 0:ce.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function gx(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function qT(t,e){let n={};return[t,e].forEach((r,i)=>{let a=i===1,o=a?"--mobile-offset":"--offset",c=a?FT:BT;function l(d){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?n[`${o}-${d}`]=c:n[`${o}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):l(c)}),n}var KT=v.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:o,className:c,offset:l,mobileOffset:d,theme:u="light",richColors:h,duration:p,style:f,visibleToasts:m=LT,toastOptions:x,dir:g=gx(),gap:w=UT,loadingIcon:y,icons:b,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:C}=t,[N,k]=V.useState([]),P=V.useMemo(()=>Array.from(new Set([r].concat(N.filter($e=>$e.position).map($e=>$e.position)))),[N,r]),[T,L]=V.useState([]),[R,M]=V.useState(!1),[K,F]=V.useState(!1),[te,oe]=V.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),at=V.useRef(null),Ye=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),ce=V.useRef(null),ut=V.useRef(!1),ht=V.useCallback($e=>{k(De=>{var Se;return(Se=De.find(At=>At.id===$e.id))!=null&&Se.delete||Fn.dismiss($e.id),De.filter(({id:At})=>At!==$e.id)})},[]);return V.useEffect(()=>Fn.subscribe($e=>{if($e.dismiss){k(De=>De.map(Se=>Se.id===$e.id?{...Se,delete:!0}:Se));return}setTimeout(()=>{Rk.flushSync(()=>{k(De=>{let Se=De.findIndex(At=>At.id===$e.id);return Se!==-1?[...De.slice(0,Se),{...De[Se],...$e},...De.slice(Se+1)]:[$e,...De]})})})}),[]),V.useEffect(()=>{if(u!=="system"){oe(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window>"u")return;let $e=window.matchMedia("(prefers-color-scheme: dark)");try{$e.addEventListener("change",({matches:De})=>{oe(De?"dark":"light")})}catch{$e.addListener(({matches:Se})=>{try{oe(Se?"dark":"light")}catch(At){console.error(At)}})}},[u]),V.useEffect(()=>{N.length<=1&&M(!1)},[N]),V.useEffect(()=>{let $e=De=>{var Se,At;i.every(Pt=>De[Pt]||De.code===Pt)&&(M(!0),(Se=at.current)==null||Se.focus()),De.code==="Escape"&&(document.activeElement===at.current||(At=at.current)!=null&&At.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",$e),()=>document.removeEventListener("keydown",$e)},[i]),V.useEffect(()=>{if(at.current)return()=>{ce.current&&(ce.current.focus({preventScroll:!0}),ce.current=null,ut.current=!1)}},[at.current]),V.createElement("section",{ref:e,"aria-label":`${j} ${Ye}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map(($e,De)=>{var Se;let[At,Pt]=$e.split("-");return N.length?V.createElement("ol",{key:$e,dir:g==="auto"?gx():g,tabIndex:-1,ref:at,className:c,"data-sonner-toaster":!0,"data-theme":te,"data-y-position":At,"data-lifted":R&&N.length>1&&!a,"data-x-position":Pt,style:{"--front-toast-height":`${((Se=T[0])==null?void 0:Se.height)||0}px`,"--width":`${zT}px`,"--gap":`${w}px`,...f,...qT(l,d)},onBlur:se=>{ut.current&&!se.currentTarget.contains(se.relatedTarget)&&(ut.current=!1,ce.current&&(ce.current.focus({preventScroll:!0}),ce.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||ut.current||(ut.current=!0,ce.current=se.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{K||M(!1)},onDragEnd:()=>M(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},N.filter(se=>!se.position&&De===0||se.position===$e).map((se,Qe)=>{var kt,W;return V.createElement(WT,{key:se.id,icons:b,index:Qe,toast:se,defaultRichColors:h,duration:(kt=x==null?void 0:x.duration)!=null?kt:p,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:n,visibleToasts:m,closeButton:(W=x==null?void 0:x.closeButton)!=null?W:o,interacting:K,position:$e,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:ht,toasts:N.filter(pe=>pe.position==se.position),heights:T.filter(pe=>pe.position==se.position),setHeights:L,expandByDefault:a,gap:w,loadingIcon:y,expanded:R,pauseWhenPageIsHidden:C,swipeDirections:t.swipeDirections})})):null}))});const b_=({...t})=>{const{theme:e="system"}=wT();return s.jsx(KT,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var[mu,r9]=pr("Tooltip",[Qd]),vm=Qd(),w_="TooltipProvider",YT=700,vx="tooltip.open",[ZT,__]=mu(w_),j_=t=>{const{__scopeTooltip:e,delayDuration:n=YT,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=t,o=v.useRef(!0),c=v.useRef(!1),l=v.useRef(0);return v.useEffect(()=>{const d=l.current;return()=>window.clearTimeout(d)},[]),s.jsx(ZT,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:v.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:v.useCallback(d=>{c.current=d},[]),disableHoverableContent:i,children:a})};j_.displayName=w_;var E_="Tooltip",[s9,gu]=mu(E_),qp="TooltipTrigger",XT=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=gu(qp,n),a=__(qp,n),o=vm(n),c=v.useRef(null),l=Ot(e,c,i.onTriggerChange),d=v.useRef(!1),u=v.useRef(!1),h=v.useCallback(()=>d.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(nw,{asChild:!0,...o,children:s.jsx(Me.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Re(t.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Re(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Re(t.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Re(t.onFocus,()=>{d.current||i.onOpen()}),onBlur:Re(t.onBlur,i.onClose),onClick:Re(t.onClick,i.onClose)})})});XT.displayName=qp;var JT="TooltipPortal",[i9,QT]=mu(JT,{forceMount:void 0}),eo="TooltipContent",N_=v.forwardRef((t,e)=>{const n=QT(eo,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=t,o=gu(eo,t.__scopeTooltip);return s.jsx(ui,{present:r||o.open,children:o.disableHoverableContent?s.jsx(S_,{side:i,...a,ref:e}):s.jsx(eR,{side:i,...a,ref:e})})}),eR=v.forwardRef((t,e)=>{const n=gu(eo,t.__scopeTooltip),r=__(eo,t.__scopeTooltip),i=v.useRef(null),a=Ot(e,i),[o,c]=v.useState(null),{trigger:l,onClose:d}=n,u=i.current,{onPointerInTransitChange:h}=r,p=v.useCallback(()=>{c(null),h(!1)},[h]),f=v.useCallback((m,x)=>{const g=m.currentTarget,w={x:m.clientX,y:m.clientY},y=iR(w,g.getBoundingClientRect()),b=aR(w,y),j=oR(x.getBoundingClientRect()),C=lR([...b,...j]);c(C),h(!0)},[h]);return v.useEffect(()=>()=>p(),[p]),v.useEffect(()=>{if(l&&u){const m=g=>f(g,u),x=g=>f(g,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",x)}}},[l,u,f,p]),v.useEffect(()=>{if(o){const m=x=>{const g=x.target,w={x:x.clientX,y:x.clientY},y=(l==null?void 0:l.contains(g))||(u==null?void 0:u.contains(g)),b=!cR(w,o);y?p():b&&(p(),d())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,o,d,p]),s.jsx(S_,{...t,ref:a})}),[tR,nR]=mu(E_,{isInside:!1}),rR=aw("TooltipContent"),S_=v.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...c}=t,l=gu(eo,n),d=vm(n),{onClose:u}=l;return v.useEffect(()=>(document.addEventListener(vx,u),()=>document.removeEventListener(vx,u)),[u]),v.useEffect(()=>{if(l.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),s.jsx(rw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:s.jsxs(sw,{"data-state":l.stateAttribute,...d,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(rR,{children:r}),s.jsx(tR,{scope:n,isInside:!0,children:s.jsx(CC,{id:l.contentId,role:"tooltip",children:i||r})})]})})});N_.displayName=eo;var k_="TooltipArrow",sR=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=vm(n);return nR(k_,n).isInside?null:s.jsx(iw,{...i,...r,ref:e})});sR.displayName=k_;function iR(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function aR(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function oR(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function cR(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const c=e[a],l=e[o],d=c.x,u=c.y,h=l.x,p=l.y;u>r!=p>r&&n<(h-d)*(r-u)/(p-u)+d&&(i=!i)}return i}function lR(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),dR(e)}function dR(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var uR=j_,C_=N_;const P_=uR,hR=v.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(C_,{ref:r,sideOffset:e,className:Y("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));hR.displayName=C_.displayName;var vu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xu=typeof window>"u"||"Deno"in globalThis;function Sr(){}function pR(t,e){return typeof t=="function"?t(e):t}function fR(t){return typeof t=="number"&&t>=0&&t!==1/0}function mR(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Kp(t,e){return typeof t=="function"?t(e):t}function gR(t,e){return typeof t=="function"?t(e):t}function xx(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:c}=t;if(o){if(r){if(e.queryHash!==xm(o,e.options))return!1}else if(!Nc(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||a&&!a(e))}function yx(t,e){const{exact:n,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Ec(e.options.mutationKey)!==Ec(a))return!1}else if(!Nc(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function xm(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ec)(t)}function Ec(t){return JSON.stringify(t,(e,n)=>Yp(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Nc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Nc(t[n],e[n])):!1}function T_(t,e){if(t===e)return t;const n=bx(t)&&bx(e);if(n||Yp(t)&&Yp(e)){const r=n?t:Object.keys(t),i=r.length,a=n?e:Object.keys(e),o=a.length,c=n?[]:{},l=new Set(r);let d=0;for(let u=0;u<o;u++){const h=n?u:a[u];(!n&&l.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(c[h]=void 0,d++):(c[h]=T_(t[h],e[h]),c[h]===t[h]&&t[h]!==void 0&&d++)}return i===o&&d===i?t:c}return e}function bx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Yp(t){if(!wx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!wx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function wx(t){return Object.prototype.toString.call(t)==="[object Object]"}function vR(t){return new Promise(e=>{setTimeout(e,t)})}function xR(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?T_(t,e):e}function yR(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function bR(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ym=Symbol();function R_(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ym?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Hi,ei,Ua,V0,wR=(V0=class extends vu{constructor(){super();gt(this,Hi);gt(this,ei);gt(this,Ua);He(this,Ua,e=>{if(!xu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,ei)||this.setEventListener(z(this,Ua))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,ei))==null||e.call(this),He(this,ei,void 0))}setEventListener(e){var n;He(this,Ua,e),(n=z(this,ei))==null||n.call(this),He(this,ei,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,Hi)!==e&&(He(this,Hi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,Hi)=="boolean"?z(this,Hi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Hi=new WeakMap,ei=new WeakMap,Ua=new WeakMap,V0),A_=new wR,Ha,ti,Va,G0,_R=(G0=class extends vu{constructor(){super();gt(this,Ha,!0);gt(this,ti);gt(this,Va);He(this,Va,e=>{if(!xu&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,ti)||this.setEventListener(z(this,Va))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,ti))==null||e.call(this),He(this,ti,void 0))}setEventListener(e){var n;He(this,Va,e),(n=z(this,ti))==null||n.call(this),He(this,ti,e(this.setOnline.bind(this)))}setOnline(e){z(this,Ha)!==e&&(He(this,Ha,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,Ha)}},Ha=new WeakMap,ti=new WeakMap,Va=new WeakMap,G0),kd=new _R;function jR(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function ER(t){return Math.min(1e3*2**t,3e4)}function I_(t){return(t??"online")==="online"?kd.isOnline():!0}var M_=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Jh(t){return t instanceof M_}function D_(t){let e=!1,n=0,r=!1,i;const a=jR(),o=x=>{var g;r||(p(new M_(x)),(g=t.abort)==null||g.call(t))},c=()=>{e=!0},l=()=>{e=!1},d=()=>A_.isFocused()&&(t.networkMode==="always"||kd.isOnline())&&t.canRun(),u=()=>I_(t.networkMode)&&t.canRun(),h=x=>{var g;r||(r=!0,(g=t.onSuccess)==null||g.call(t,x),i==null||i(),a.resolve(x))},p=x=>{var g;r||(r=!0,(g=t.onError)==null||g.call(t,x),i==null||i(),a.reject(x))},f=()=>new Promise(x=>{var g;i=w=>{(r||d())&&x(w)},(g=t.onPause)==null||g.call(t)}).then(()=>{var x;i=void 0,r||(x=t.onContinue)==null||x.call(t)}),m=()=>{if(r)return;let x;const g=n===0?t.initialPromise:void 0;try{x=g??t.fn()}catch(w){x=Promise.reject(w)}Promise.resolve(x).then(h).catch(w=>{var N;if(r)return;const y=t.retry??(xu?0:3),b=t.retryDelay??ER,j=typeof b=="function"?b(n,w):b,C=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,w);if(e||!C){p(w);return}n++,(N=t.onFail)==null||N.call(t,n,w),vR(j).then(()=>d()?void 0:f()).then(()=>{e?p(w):m()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:c,continueRetry:l,canStart:u,start:()=>(u()?m():f().then(m),a)}}var NR=t=>setTimeout(t,0);function SR(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=NR;const a=c=>{e?t.push(c):i(()=>{n(c)})},o=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(l=>{n(l)})})})};return{batch:c=>{let l;e++;try{l=c()}finally{e--,e||o()}return l},batchCalls:c=>(...l)=>{a(()=>{c(...l)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var An=SR(),Vi,W0,O_=(W0=class{constructor(){gt(this,Vi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fR(this.gcTime)&&He(this,Vi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(xu?1/0:5*60*1e3))}clearGcTimeout(){z(this,Vi)&&(clearTimeout(z(this,Vi)),He(this,Vi,void 0))}},Vi=new WeakMap,W0),Ga,Gi,sr,Wi,Sn,$c,qi,kr,cs,q0,kR=(q0=class extends O_{constructor(e){super();gt(this,kr);gt(this,Ga);gt(this,Gi);gt(this,sr);gt(this,Wi);gt(this,Sn);gt(this,$c);gt(this,qi);He(this,qi,!1),He(this,$c,e.defaultOptions),this.setOptions(e.options),this.observers=[],He(this,Wi,e.client),He(this,sr,z(this,Wi).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,He(this,Ga,PR(this.options)),this.state=e.state??z(this,Ga),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=z(this,Sn))==null?void 0:e.promise}setOptions(e){this.options={...z(this,$c),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,sr).remove(this)}setData(e,n){const r=xR(this.state.data,e,this.options);return Nn(this,kr,cs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Nn(this,kr,cs).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=z(this,Sn))==null?void 0:r.promise;return(i=z(this,Sn))==null||i.cancel(e),n?n.then(Sr).catch(Sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,Ga))}isActive(){return this.observers.some(e=>gR(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ym||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Kp(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!mR(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,Sn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,Sn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),z(this,sr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(z(this,Sn)&&(z(this,qi)?z(this,Sn).cancel({revert:!0}):z(this,Sn).cancelRetry()),this.scheduleGc()),z(this,sr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Nn(this,kr,cs).call(this,{type:"invalidate"})}fetch(e,n){var d,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(z(this,Sn))return z(this,Sn).continueRetry(),z(this,Sn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(f=>f.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(He(this,qi,!0),r.signal)})},a=()=>{const p=R_(this.options,n),m=(()=>{const x={client:z(this,Wi),queryKey:this.queryKey,meta:this.meta};return i(x),x})();return He(this,qi,!1),this.options.persister?this.options.persister(p,m,this):p(m)},c=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:z(this,Wi),state:this.state,fetchFn:a};return i(p),p})();(d=this.options.behavior)==null||d.onFetch(c,this),He(this,Gi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=c.fetchOptions)==null?void 0:u.meta))&&Nn(this,kr,cs).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta});const l=p=>{var f,m,x,g;Jh(p)&&p.silent||Nn(this,kr,cs).call(this,{type:"error",error:p}),Jh(p)||((m=(f=z(this,sr).config).onError)==null||m.call(f,p,this),(g=(x=z(this,sr).config).onSettled)==null||g.call(x,this.state.data,p,this)),this.scheduleGc()};return He(this,Sn,D_({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var f,m,x,g;if(p===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(w){l(w);return}(m=(f=z(this,sr).config).onSuccess)==null||m.call(f,p,this),(g=(x=z(this,sr).config).onSettled)==null||g.call(x,p,this.state.error,this),this.scheduleGc()},onError:l,onFail:(p,f)=>{Nn(this,kr,cs).call(this,{type:"failed",failureCount:p,error:f})},onPause:()=>{Nn(this,kr,cs).call(this,{type:"pause"})},onContinue:()=>{Nn(this,kr,cs).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),z(this,Sn).start()}},Ga=new WeakMap,Gi=new WeakMap,sr=new WeakMap,Wi=new WeakMap,Sn=new WeakMap,$c=new WeakMap,qi=new WeakMap,kr=new WeakSet,cs=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...CR(r.data,this.options),fetchMeta:e.meta??null};case"success":return He(this,Gi,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Jh(i)&&i.revert&&z(this,Gi)?{...z(this,Gi),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),An.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),z(this,sr).notify({query:this,type:"updated",action:e})})},q0);function CR(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:I_(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function PR(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Hr,K0,TR=(K0=class extends vu{constructor(e={}){super();gt(this,Hr);this.config=e,He(this,Hr,new Map)}build(e,n,r){const i=n.queryKey,a=n.queryHash??xm(i,n);let o=this.get(a);return o||(o=new kR({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){z(this,Hr).has(e.queryHash)||(z(this,Hr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,Hr).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,Hr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){An.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Hr).get(e)}getAll(){return[...z(this,Hr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>xx(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>xx(e,r)):n}notify(e){An.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){An.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){An.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hr=new WeakMap,K0),Vr,Rn,Ki,Gr,Ks,Y0,RR=(Y0=class extends O_{constructor(e){super();gt(this,Gr);gt(this,Vr);gt(this,Rn);gt(this,Ki);this.mutationId=e.mutationId,He(this,Rn,e.mutationCache),He(this,Vr,[]),this.state=e.state||AR(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){z(this,Vr).includes(e)||(z(this,Vr).push(e),this.clearGcTimeout(),z(this,Rn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){He(this,Vr,z(this,Vr).filter(n=>n!==e)),this.scheduleGc(),z(this,Rn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){z(this,Vr).length||(this.state.status==="pending"?this.scheduleGc():z(this,Rn).remove(this))}continue(){var e;return((e=z(this,Ki))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,o,c,l,d,u,h,p,f,m,x,g,w,y,b,j,C,N,k,P;const n=()=>{Nn(this,Gr,Ks).call(this,{type:"continue"})};He(this,Ki,D_({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,L)=>{Nn(this,Gr,Ks).call(this,{type:"failed",failureCount:T,error:L})},onPause:()=>{Nn(this,Gr,Ks).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,Rn).canRun(this)}));const r=this.state.status==="pending",i=!z(this,Ki).canStart();try{if(r)n();else{Nn(this,Gr,Ks).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(a=z(this,Rn).config).onMutate)==null?void 0:o.call(a,e,this));const L=await((l=(c=this.options).onMutate)==null?void 0:l.call(c,e));L!==this.state.context&&Nn(this,Gr,Ks).call(this,{type:"pending",context:L,variables:e,isPaused:i})}const T=await z(this,Ki).start();return await((u=(d=z(this,Rn).config).onSuccess)==null?void 0:u.call(d,T,e,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,T,e,this.state.context)),await((m=(f=z(this,Rn).config).onSettled)==null?void 0:m.call(f,T,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,T,null,e,this.state.context)),Nn(this,Gr,Ks).call(this,{type:"success",data:T}),T}catch(T){try{throw await((y=(w=z(this,Rn).config).onError)==null?void 0:y.call(w,T,e,this.state.context,this)),await((j=(b=this.options).onError)==null?void 0:j.call(b,T,e,this.state.context)),await((N=(C=z(this,Rn).config).onSettled)==null?void 0:N.call(C,void 0,T,this.state.variables,this.state.context,this)),await((P=(k=this.options).onSettled)==null?void 0:P.call(k,void 0,T,e,this.state.context)),T}finally{Nn(this,Gr,Ks).call(this,{type:"error",error:T})}}finally{z(this,Rn).runNext(this)}}},Vr=new WeakMap,Rn=new WeakMap,Ki=new WeakMap,Gr=new WeakSet,Ks=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),An.batch(()=>{z(this,Vr).forEach(r=>{r.onMutationUpdate(e)}),z(this,Rn).notify({mutation:this,type:"updated",action:e})})},Y0);function AR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ps,Cr,Lc,Z0,IR=(Z0=class extends vu{constructor(e={}){super();gt(this,ps);gt(this,Cr);gt(this,Lc);this.config=e,He(this,ps,new Set),He(this,Cr,new Map),He(this,Lc,0)}build(e,n,r){const i=new RR({mutationCache:this,mutationId:++$l(this,Lc)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){z(this,ps).add(e);const n=Fl(e);if(typeof n=="string"){const r=z(this,Cr).get(n);r?r.push(e):z(this,Cr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,ps).delete(e)){const n=Fl(e);if(typeof n=="string"){const r=z(this,Cr).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&z(this,Cr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Fl(e);if(typeof n=="string"){const r=z(this,Cr).get(n),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Fl(e);if(typeof n=="string"){const i=(r=z(this,Cr).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){An.batch(()=>{z(this,ps).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,ps).clear(),z(this,Cr).clear()})}getAll(){return Array.from(z(this,ps))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yx(n,r))}findAll(e={}){return this.getAll().filter(n=>yx(e,n))}notify(e){An.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return An.batch(()=>Promise.all(e.map(n=>n.continue().catch(Sr))))}},ps=new WeakMap,Cr=new WeakMap,Lc=new WeakMap,Z0);function Fl(t){var e;return(e=t.options.scope)==null?void 0:e.id}function _x(t){return{onFetch:(e,n)=>{var u,h,p,f,m;const r=e.options,i=(p=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,a=((f=e.state.data)==null?void 0:f.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const d=async()=>{let x=!1;const g=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},w=R_(e.options,e.fetchOptions),y=async(b,j,C)=>{if(x)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const k=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:j,direction:C?"backward":"forward",meta:e.options.meta};return g(R),R})(),P=await w(k),{maxPages:T}=e.options,L=C?bR:yR;return{pages:L(b.pages,P,T),pageParams:L(b.pageParams,j,T)}};if(i&&a.length){const b=i==="backward",j=b?MR:jx,C={pages:a,pageParams:o},N=j(r,C);c=await y(C,N,b)}else{const b=t??a.length;do{const j=l===0?o[0]??r.initialPageParam:jx(r,c);if(l>0&&j==null)break;c=await y(c,j),l++}while(l<b)}return c};e.options.persister?e.fetchFn=()=>{var x,g;return(g=(x=e.options).persister)==null?void 0:g.call(x,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function jx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function MR(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Gt,ni,ri,Wa,qa,si,Ka,Ya,X0,$_=(X0=class{constructor(t={}){gt(this,Gt);gt(this,ni);gt(this,ri);gt(this,Wa);gt(this,qa);gt(this,si);gt(this,Ka);gt(this,Ya);He(this,Gt,t.queryCache||new TR),He(this,ni,t.mutationCache||new IR),He(this,ri,t.defaultOptions||{}),He(this,Wa,new Map),He(this,qa,new Map),He(this,si,0)}mount(){$l(this,si)._++,z(this,si)===1&&(He(this,Ka,A_.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Gt).onFocus())})),He(this,Ya,kd.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Gt).onOnline())})))}unmount(){var t,e;$l(this,si)._--,z(this,si)===0&&((t=z(this,Ka))==null||t.call(this),He(this,Ka,void 0),(e=z(this,Ya))==null||e.call(this),He(this,Ya,void 0))}isFetching(t){return z(this,Gt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,ni).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,Gt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,Gt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Kp(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,Gt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=z(this,Gt).get(r.queryHash),a=i==null?void 0:i.state.data,o=pR(e,a);if(o!==void 0)return z(this,Gt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return An.batch(()=>z(this,Gt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,Gt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,Gt);An.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,Gt);return An.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=An.batch(()=>z(this,Gt).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Sr).catch(Sr)}invalidateQueries(t,e={}){return An.batch(()=>(z(this,Gt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=An.batch(()=>z(this,Gt).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(Sr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Sr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,Gt).build(this,e);return n.isStaleByTime(Kp(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Sr).catch(Sr)}fetchInfiniteQuery(t){return t.behavior=_x(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Sr).catch(Sr)}ensureInfiniteQueryData(t){return t.behavior=_x(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return kd.isOnline()?z(this,ni).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,Gt)}getMutationCache(){return z(this,ni)}getDefaultOptions(){return z(this,ri)}setDefaultOptions(t){He(this,ri,t)}setQueryDefaults(t,e){z(this,Wa).set(Ec(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,Wa).values()],n={};return e.forEach(r=>{Nc(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,qa).set(Ec(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,qa).values()],n={};return e.forEach(r=>{Nc(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,ri).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=xm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ym&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,ri).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,Gt).clear(),z(this,ni).clear()}},Gt=new WeakMap,ni=new WeakMap,ri=new WeakMap,Wa=new WeakMap,qa=new WeakMap,si=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,X0),DR=v.createContext(void 0),L_=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),s.jsx(DR.Provider,{value:t,children:e}));const OR={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},$R={type:"tween",ease:"anticipate",duration:.4},os=({children:t})=>{const e=Bc();return s.jsx(J0,{mode:"wait",children:s.jsx(ae.div,{initial:"initial",animate:"animate",exit:"exit",variants:OR,transition:$R,children:t},e.pathname)})},LR="modulepreload",BR=function(t){return"/"+t},Ex={},Ar=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=BR(l),l in Ex)return;Ex[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":LR,d||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},FR=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ar(async()=>{const{default:r}=await Promise.resolve().then(()=>yo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class bm extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Nx extends bm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Sx extends bm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class kx extends bm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zp||(Zp={}));var zR=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};class UR{constructor(e,{headers:n={},customFetch:r,region:i=Zp.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=FR(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return zR(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o,signal:c}=n;let l={},{region:d}=n;d||(d=this.region);const u=new URL(`${this.url}/${e}`);d&&d!=="any"&&(l["x-region"]=d,u.searchParams.set("forceFunctionRegion",d));let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const p=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:h,signal:c}).catch(g=>{throw g.name==="AbortError"?g:new Nx(g)}),f=p.headers.get("x-relay-error");if(f&&f==="true")throw new Sx(p);if(!p.ok)throw new kx(p);let m=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return m==="application/json"?x=yield p.json():m==="application/octet-stream"?x=yield p.blob():m==="text/event-stream"?x=p:m==="multipart/form-data"?x=yield p.formData():x=yield p.text(),{data:x,error:null,response:p}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Nx(i)}:{data:null,error:i,response:i instanceof kx||i instanceof Sx?i.context:void 0}}})}}var zn={},wm={},yu={},Qc={},bu={},wu={},HR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},to=HR();const VR=to.fetch,B_=to.fetch.bind(to),F_=to.Headers,GR=to.Request,WR=to.Response,yo=Object.freeze(Object.defineProperty({__proto__:null,Headers:F_,Request:GR,Response:WR,default:B_,fetch:VR},Symbol.toStringTag,{value:"Module"})),qR=Ak(yo);var _u={};Object.defineProperty(_u,"__esModule",{value:!0});let KR=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};_u.default=KR;var z_=ur&&ur.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wu,"__esModule",{value:!0});const YR=z_(qR),ZR=z_(_u);let XR=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=YR.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,c,l,d;let u=null,h=null,p=null,f=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const g=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),w=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&w&&w.length>1&&(p=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,f=406,m="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const g=await a.text();try{u=JSON.parse(g),Array.isArray(u)&&a.status===404&&(h=[],u=null,f=200,m="OK")}catch{a.status===404&&g===""?(f=204,m="No Content"):u={message:g}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new ZR.default(u)}return{error:u,data:h,count:p,status:f,statusText:m}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,c,l;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(c=a==null?void 0:a.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};wu.default=XR;var JR=ur&&ur.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bu,"__esModule",{value:!0});const QR=JR(wu);let eA=class extends QR.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var c;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};bu.default=eA;var tA=ur&&ur.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qc,"__esModule",{value:!0});const nA=tA(bu);let rA=class extends nA.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Qc.default=rA;var sA=ur&&ur.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yu,"__esModule",{value:!0});const Vo=sA(Qc);let iA=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Vo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var i;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(o.length>0){const c=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new Vo.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:a=!0}={}){var o;const c="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Vo.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Vo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Vo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};yu.default=iA;var U_=ur&&ur.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wm,"__esModule",{value:!0});const aA=U_(yu),oA=U_(Qc);let cA=class H_{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new aA.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new H_(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:a}={}){var o;let c;const l=new URL(`${this.url}/rpc/${e}`);let d;r||i?(c=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{l.searchParams.append(h,p)})):(c="POST",d=n);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new oA.default({method:c,url:l,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};wm.default=cA;var bo=ur&&ur.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zn,"__esModule",{value:!0});zn.PostgrestError=zn.PostgrestBuilder=zn.PostgrestTransformBuilder=zn.PostgrestFilterBuilder=zn.PostgrestQueryBuilder=zn.PostgrestClient=void 0;const V_=bo(wm);zn.PostgrestClient=V_.default;const G_=bo(yu);zn.PostgrestQueryBuilder=G_.default;const W_=bo(Qc);zn.PostgrestFilterBuilder=W_.default;const q_=bo(bu);zn.PostgrestTransformBuilder=q_.default;const K_=bo(wu);zn.PostgrestBuilder=K_.default;const Y_=bo(_u);zn.PostgrestError=Y_.default;var lA=zn.default={PostgrestClient:V_.default,PostgrestQueryBuilder:G_.default,PostgrestFilterBuilder:W_.default,PostgrestTransformBuilder:q_.default,PostgrestBuilder:K_.default,PostgrestError:Y_.default};const{PostgrestClient:dA,PostgrestQueryBuilder:u9,PostgrestFilterBuilder:h9,PostgrestTransformBuilder:p9,PostgrestBuilder:f9,PostgrestError:m9}=lA;class uA{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hA="2.15.5",pA=`realtime-js/${hA}`,fA="1.0.0",Xp=1e4,mA=1e3,gA=100;var hc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(hc||(hc={}));var cn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(cn||(cn={}));var Pr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pr||(Pr={}));var Jp;(function(t){t.websocket="websocket"})(Jp||(Jp={}));var Li;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Li||(Li={}));class vA{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const c=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+a));o=o+a;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:l,payload:d}}}class Z_{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Mt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Mt||(Mt={}));const Cx=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,o)=>(a[o]=xA(o,t,e,i),a),{})},xA=(t,e,n,r)=>{const i=e.find(c=>c.name===t),a=i==null?void 0:i.type,o=n[t];return a&&!r.includes(a)?X_(a,o):Qp(o)},X_=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return _A(e,n)}switch(t){case Mt.bool:return yA(e);case Mt.float4:case Mt.float8:case Mt.int2:case Mt.int4:case Mt.int8:case Mt.numeric:case Mt.oid:return bA(e);case Mt.json:case Mt.jsonb:return wA(e);case Mt.timestamp:return jA(e);case Mt.abstime:case Mt.date:case Mt.daterange:case Mt.int4range:case Mt.int8range:case Mt.money:case Mt.reltime:case Mt.text:case Mt.time:case Mt.timestamptz:case Mt.timetz:case Mt.tsrange:case Mt.tstzrange:return Qp(e);default:return Qp(e)}},Qp=t=>t,yA=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},bA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},wA=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},_A=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const o=t.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(c=>X_(e,c))}return t},jA=t=>typeof t=="string"?t.replace(" ","T"):t,J_=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Qh{constructor(e,n,r={},i=Xp){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Px;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Px||(Px={}));class pc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pc.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=pc.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=pc.syncDiff(this.state,i,a,o),c())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const a=this.cloneDeep(e),o=this.transformState(n),c={},l={};return this.map(a,(d,u)=>{o[d]||(l[d]=u)}),this.map(o,(d,u)=>{const h=a[d];if(h){const p=u.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),m=u.filter(g=>f.indexOf(g.presence_ref)<0),x=h.filter(g=>p.indexOf(g.presence_ref)<0);m.length>0&&(c[d]=m),x.length>0&&(l[d]=x)}else c[d]=u}),this.syncDiff(a,{joins:c,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(c,l)=>{var d;const u=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(l),u.length>0){const h=e[c].map(f=>f.presence_ref),p=u.filter(f=>h.indexOf(f.presence_ref)<0);e[c].unshift(...p)}r(c,u,l)}),this.map(o,(c,l)=>{let d=e[c];if(!d)return;const u=l.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[c]=d,i(c,d,l),d.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Tx||(Tx={}));var fc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fc||(fc={}));var us;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(us||(us={}));class _m{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qh(this,Pr.join,this.params,this.timeout),this.rejoinTimer=new Z_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pr.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new pc(this),this.broadcastEndpointURL=J_(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==cn.closed){const{config:{broadcast:o,presence:c,private:l}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[fc.PRESENCE]&&this.bindings[fc.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},c),{enabled:u}),postgres_changes:d,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(us.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(us.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){e==null||e(us.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(m=x==null?void 0:x.length)!==null&&m!==void 0?m:0,w=[];for(let y=0;y<g;y++){const b=x[y],{filter:{event:j,schema:C,table:N,filter:k}}=b,P=f&&f[y];if(P&&P.event===j&&P.schema===C&&P.table===N&&P.filter===k)w.push(Object.assign(Object.assign({},b),{id:P.id}));else{this.unsubscribe(),this.state=cn.errored,e==null||e(us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(us.SUBSCRIBED);return}}).receive("error",f=>{this.state=cn.errored,e==null||e(us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===cn.joined&&e===fc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,c,l;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=cn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Qh(this,Pr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=cn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Qh(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>gA){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,a;const o=e.toLocaleLowerCase(),{close:c,error:l,leave:d,join:u}=Pr;if(r&&[c,l,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,x,g;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((g=(x=f.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var m,x,g,w,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const j=f.id,C=(m=f.filter)===null||m===void 0?void 0:m.event;return j&&((x=n.ids)===null||x===void 0?void 0:x.includes(j))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((g=n.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const j=(y=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return j==="*"||j===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){const m=p.data,{schema:x,table:g,commit_timestamp:w,type:y,errors:b}=m;p=Object.assign(Object.assign({},{schema:x,table:g,commit_timestamp:w,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(m))}f.callback(p,r)})}_isClosed(){return this.state===cn.closed}_isJoined(){return this.state===cn.joined}_isJoining(){return this.state===cn.joining}_isLeaving(){return this.state===cn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&_m.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pr.close,{},e)}_onError(e){this._on(Pr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Cx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Cx(e.columns,e.old_record)),n}}const ep=()=>{},zl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},EA=[1e3,2e3,5e3,1e4],NA=1e4,SA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kA{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xp,this.transport=null,this.heartbeatIntervalMs=zl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ep,this.ref=0,this.reconnectTimer=null,this.logger=ep,this.conn=null,this.sendBuffer=[],this.serializer=new vA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Ar(async()=>{const{default:c}=await Promise.resolve().then(()=>yo);return{default:c}},void 0).then(({default:c})=>c(...o)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Jp.websocket}`,this.httpEndpoint=J_(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fA}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case hc.connecting:return Li.Connecting;case hc.open:return Li.Open;case hc.closing:return Li.Closing;default:return Li.Closed}}isConnected(){return this.connectionState()===Li.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new _m(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:i,ref:a}=e,o=()=>{this.encode(e,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(mA,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},zl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=n,c=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${r} ${i} ${c}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([SA],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:pA};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Pr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Z_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,a,o,c,l,d,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Xp,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:zl.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:ep,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>EA[h-1]||NA,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(h,p)=>p(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class jm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function nn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class CA extends jm{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ef extends jm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var PA=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};const Q_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ar(async()=>{const{default:r}=await Promise.resolve().then(()=>yo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},TA=()=>PA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ar(()=>Promise.resolve().then(()=>yo),void 0)).Response:Response}),tf=t=>{if(Array.isArray(t))return t.map(n=>tf(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=tf(r)}),e},RA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var sa=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};const tp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),AA=(t,e,n)=>sa(void 0,void 0,void 0,function*(){const r=yield TA();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new CA(tp(i),a,o))}).catch(i=>{e(new ef(tp(i),i))}):e(new ef(tp(t),t))}),IA=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(RA(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function el(t,e,n,r,i,a){return sa(this,void 0,void 0,function*(){return new Promise((o,c)=>{t(n,IA(e,r,i,a)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>AA(l,c,r))})})}function Cd(t,e,n,r){return sa(this,void 0,void 0,function*(){return el(t,"GET",e,n,r)})}function Ur(t,e,n,r,i){return sa(this,void 0,void 0,function*(){return el(t,"POST",e,r,i,n)})}function nf(t,e,n,r,i){return sa(this,void 0,void 0,function*(){return el(t,"PUT",e,r,i,n)})}function MA(t,e,n,r){return sa(this,void 0,void 0,function*(){return el(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function ej(t,e,n,r,i){return sa(this,void 0,void 0,function*(){return el(t,"DELETE",e,r,i,n)})}var DA=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};class OA{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return DA(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nn(e))return{data:null,error:e};throw e}})}}var $A=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};class LA{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new OA(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return $A(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nn(e))return{data:null,error:e};throw e}})}}var Ln=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};const BA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class FA{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Q_(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return Ln(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Rx),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(n),u=this._getFinalPath(d),h=yield(e=="PUT"?nf:Ur)(this.fetch,`${this.url}/object/${u}`,a,Object.assign({headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(nn(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Ln(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",n);try{let l;const d=Object.assign({upsert:Rx.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield nf(this.fetch,c.toString(),l,{headers:u});return{data:{path:a,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(nn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Ln(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield Ur(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),c=o.searchParams.get("token");if(!c)throw new jm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ln(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Ln(this,void 0,void 0,function*(){try{return{data:{path:(yield Ur(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Ln(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Ur(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Ln(this,void 0,void 0,function*(){try{const i=yield Ur(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"",c=this._getFinalPath(e),l=()=>Cd(this.fetch,`${this.url}/${i}/${c}${o}`,{headers:this.headers,noResolveJson:!0});return new LA(l,this.shouldThrowOnError)}info(e){return Ln(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Cd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:tf(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}})}exists(e){return Ln(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield MA(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nn(r)&&r instanceof ef){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return Ln(this,void 0,void 0,function*(){try{return{data:yield ej(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ln(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},BA),n),{prefix:e||""});return{data:yield Ur(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}})}listV2(e,n){return Ln(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ur(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const zA="2.12.2",UA={"X-Client-Info":`storage-js/${zA}`};var ga=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};class HA{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},UA),n),this.fetch=Q_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ga(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nn(e))return{data:null,error:e};throw e}})}getBucket(e){return ga(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ga(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return ga(this,void 0,void 0,function*(){try{return{data:yield nf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ga(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ga(this,void 0,void 0,function*(){try{return{data:yield ej(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}})}}class VA extends HA{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new FA(this.url,this.headers,e,this.fetch)}}const GA="2.58.0";let rc="";typeof Deno<"u"?rc="deno":typeof document<"u"?rc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rc="react-native":rc="node";const WA={"X-Client-Info":`supabase-js-${rc}/${GA}`},qA={headers:WA},KA={schema:"public"},YA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ZA={};var XA=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};const JA=t=>{let e;return t?e=t:typeof fetch>"u"?e=B_:e=fetch,(...n)=>e(...n)},QA=()=>typeof Headers>"u"?F_:Headers,eI=(t,e,n)=>{const r=JA(n),i=QA();return(a,o)=>XA(void 0,void 0,void 0,function*(){var c;const l=(c=yield e())!==null&&c!==void 0?c:t;let d=new i(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},o),{headers:d}))})};var tI=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};function nI(t){return t.endsWith("/")?t:t+"/"}function rI(t,e){var n,r;const{db:i,auth:a,realtime:o,global:c}=t,{db:l,auth:d,realtime:u,global:h}=e,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),c),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>tI(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function sI(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(nI(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const tj="2.72.0",Ta=30*1e3,rf=3,np=rf*Ta,iI="http://localhost:9999",aI="supabase.auth.token",oI={"X-Client-Info":`gotrue-js/${tj}`},sf="X-Supabase-Api-Version",nj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cI=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lI=10*60*1e3;class Em extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ve(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class dI extends Em{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function uI(t){return Ve(t)&&t.name==="AuthApiError"}class rj extends Em{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pi extends Em{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Ys extends pi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hI(t){return Ve(t)&&t.name==="AuthSessionMissingError"}class Go extends pi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ul extends pi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hl extends pi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function pI(t){return Ve(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ax extends pi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class af extends pi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function rp(t){return Ve(t)&&t.name==="AuthRetryableFetchError"}class Ix extends pi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class of extends pi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mx=` 	
\r=`.split(""),fI=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Mx.length;e+=1)t[Mx[e].charCodeAt(0)]=-2;for(let e=0;e<Pd.length;e+=1)t[Pd[e].charCodeAt(0)]=e;return t})();function Dx(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pd[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pd[r]),e.queuedBits-=6}}function sj(t,e,n){const r=fI[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ox(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{vI(o,r,n)};for(let o=0;o<t.length;o+=1)sj(t.charCodeAt(o),i,a);return e.join("")}function mI(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function gI(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}mI(r,e)}}function vI(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function xI(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)sj(t.charCodeAt(i),n,r);return new Uint8Array(e)}function yI(t){const e=[];return gI(t,n=>e.push(n)),new Uint8Array(e)}function bI(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Dx(i,n,r)),Dx(null,n,r),e.join("")}function wI(t){return Math.round(Date.now()/1e3)+t}function _I(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const nr=()=>typeof window<"u"&&typeof document<"u",Ti={tested:!1,writable:!1},ij=()=>{if(!nr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ti.tested)return Ti.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ti.tested=!0,Ti.writable=!0}catch{Ti.tested=!0,Ti.writable=!1}return Ti.writable};function jI(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const aj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ar(async()=>{const{default:r}=await Promise.resolve().then(()=>yo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},EI=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ra=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ri=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Hs=async(t,e)=>{await t.removeItem(e)};class ju{constructor(){this.promise=new ju.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ju.promiseConstructor=Promise;function sp(t){const e=t.split(".");if(e.length!==3)throw new of("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!cI.test(e[r]))throw new of("JWT not in base64url format");return{header:JSON.parse(Ox(e[0])),payload:JSON.parse(Ox(e[1])),signature:xI(e[2]),raw:{header:e[0],payload:e[1]}}}async function NI(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function SI(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function kI(t){return("0"+t.toString(16)).substr(-2)}function CI(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,kI).join("")}async function PI(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function TI(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await PI(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function va(t,e,n=!1){const r=CI();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ra(t,`${e}-code-verifier`,i);const a=await TI(r);return[a,r===a?"plain":"s256"]}const RI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function AI(t){const e=t.headers.get(sf);if(!e||!e.match(RI))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function II(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function MI(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const DI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xa(t){if(!DI.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ip(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $x(t){return JSON.parse(JSON.stringify(t))}var OI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Di=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),$I=[502,503,504];async function Lx(t){var e;if(!EI(t))throw new af(Di(t),0);if($I.includes(t.status))throw new af(Di(t),t.status);let n;try{n=await t.json()}catch(a){throw new rj(Di(a),a)}let r;const i=AI(t);if(i&&i.getTime()>=nj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ix(Di(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ys}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Ix(Di(n),t.status,n.weak_password.reasons);throw new dI(Di(n),t.status||500,r)}const LI=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function nt(t,e,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[sf]||(a[sf]=nj["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await BI(t,e,n+c,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function BI(t,e,n,r,i,a){const o=LI(e,r,i,a);let c;try{c=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new af(Di(l),0)}if(c.ok||await Lx(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await Lx(l)}}function zr(t){var e;let n=null;HI(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=wI(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Bx(t){const e=zr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function FI(t){return{data:t,error:null}}function zI(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=t,o=OI(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:c,user:l},error:null}}function UI(t){return t}function HI(t){return t.access_token&&t.refresh_token&&t.expires_in}const ap=["global","local","others"];var VI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class GI{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=aj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=ap[0]){if(ap.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ap.join(", ")}`);try{return await nt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qs})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=VI(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:zI,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await nt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qs})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,a,o,c,l;try{const d={nextPage:null,lastPage:0,total:0},u=await nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:UI});if(u.error)throw u.error;const h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const x=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(m.split(";")[1].split("=")[1]);d[`${g}Page`]=x}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Ve(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){xa(e);try{return await nt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qs})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){xa(e);try{return await nt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Qs})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){xa(e);try{return await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qs})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){xa(e.userId);try{const{data:n,error:r}=await nt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _deleteFactor(e){xa(e.userId),xa(e.id);try{return{data:await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}}function Fx(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function WI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ya={debug:!!(globalThis&&ij()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class qI extends oj{}async function KI(t,e,n){ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ya.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ya.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new qI(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ya.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function cj(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function YI(t){return parseInt(t,16)}function ZI(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function XI(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:c,requestId:l,resources:d,scheme:u,uri:h,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=cj(t.address),m=u?`${u}://${r}`:r,x=t.statement?`${t.statement}
`:"",g=`${m} wants you to sign in with your Ethereum account:
${f}

${x}`;let w=`URI: ${h}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),c&&(w+=`
Not Before: ${c.toISOString()}`),l&&(w+=`
Request ID: ${l}`),d){let y=`
Resources:`;for(const b of d){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);y+=`
- ${b}`}w+=y}return`${g}
${w}`}WI();const JI={url:iI,storageKey:aI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oI,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function zx(t,e,n){return await n()}const ba={};class Sc{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sc.nextInstanceID,Sc.nextInstanceID+=1,this.instanceID>0&&nr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},JI),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new GI({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=aj(i.fetch),this.lock=i.lock||zx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:nr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=KI:this.lock=zx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ij()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fx(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Fx(this.memoryStorage)),nr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=ba[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ba[this.storageKey]=Object.assign(Object.assign({},ba[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ba[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ba[this.storageKey]=Object.assign(Object.assign({},ba[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tj}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=jI(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),nr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),pI(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ve(n)?{error:n}:{error:new rj("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const a=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:zr}),{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(a){if(Ve(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,i;try{let a;if("email"in e){const{email:u,password:h,options:p}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await va(this.storage,this.storageKey)),a=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:m},xform:zr})}else if("phone"in e){const{phone:u,password:h,options:p}=e;a=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:zr})}else throw new Ul("You must provide either an email or phone number and a password");const{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(a){if(Ve(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:o,options:c}=e;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Bx})}else if("phone"in e){const{phone:a,password:o,options:c}=e;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Bx})}else throw new Ul("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Go}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,a,o,c,l,d,u,h,p;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:x,wallet:g,statement:w,options:y}=e;let b;if(nr())if(typeof g=="object")b=g;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")b=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=g}const j=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),C=await b.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=cj(C[0]);let k=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!k){const T=await b.request({method:"eth_chainId"});k=YI(T)}const P={domain:j.host,address:N,statement:w,uri:j.href,version:"1",chainId:k,nonce:(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=XI(P),m=await b.request({method:"personal_sign",params:[ZI(f),N]})}try{const{data:x,error:g}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:m},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:zr});if(g)throw g;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Go}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:g})}catch(x){if(Ve(x))return{data:{user:null,session:null},error:x};throw x}}async signInWithSolana(e){var n,r,i,a,o,c,l,d,u,h,p,f;let m,x;if("message"in e)m=e.message,x=e.signature;else{const{chain:g,wallet:w,statement:y,options:b}=e;let j;if(nr())if(typeof w=="object")j=w;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=w}const C=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),y?{statement:y}:null));let k;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")k=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)k=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)m=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${C.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(m),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:g,error:w}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:bI(x)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:zr});if(w)throw w;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Go}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:w})}catch(g){if(Ve(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const n=await Ri(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:zr});if(await Hs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Go}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Ve(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=e,c=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:zr}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Go}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,a,o;try{if("email"in e){const{email:c,options:l}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await va(this.storage,this.storageKey));const{error:h}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:c,options:l}=e,{data:d,error:u}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ul("You must provide either an email or phone number.")}catch(c){if(Ve(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var n,r;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:c}=await nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:zr});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,d=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(Ve(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await va(this.storage,this.storageKey)),await nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:FI})}catch(a){if(Ve(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ys;const{error:i}=await nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ve(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:o}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:o,error:c}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new Ul("You must provide either an email or phone number and a type")}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ri(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<np:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Ri(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=ip()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,u))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qs}):await this._useSession(async n=>{var r,i,a;const{data:o,error:c}=n;if(c)throw c;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ys}:await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Qs})})}catch(n){if(Ve(n))return hI(n)&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Ys;const o=i.session;let c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=await va(this.storage,this.storageKey));const{data:d,error:u}=await nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:o.access_token,xform:Qs});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ys;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=sp(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:c,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Ve(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:c}=n;if(c)throw c;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ys;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ve(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!nr())throw new Hl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ax("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ax("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:c,expires_at:l,token_type:d}=e;if(!a||!c||!o||!d)throw new Hl("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(c);let p=u+h;l&&(p=parseInt(l));const f=p-u;f*1e3<=Ta&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const m=p-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,p,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,p,u);const{data:x,error:g}=await this._getUser(a);if(g)throw g;const w={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:p,refresh_token:o,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(Ve(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ri(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{error:a};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(uI(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=_I(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await va(this.storage,this.storageKey,!0));try{return await nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Ve(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,c,l,d,u;const{data:h,error:p}=a;if(p)throw p;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await nt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return nr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ve(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await nt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await SI(async i=>(i>0&&await NI(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:zr})),(i,a)=>{const o=200*Math.pow(2,i);return a&&rp(a)&&Date.now()+o-r<Ta})}catch(r){if(this._debug(n,"error",r),Ve(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),nr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ri(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Ri(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Ra(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:ip()}else if(i&&!i.user&&!i.user){const o=await Ri(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Hs(this.storage,this.storageKey+"-user"),await Ra(this.storage,this.storageKey,i)):i.user=ip()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<np;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${np}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),rp(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(i.access_token);!c&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ys;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ju;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Ys;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),Ve(a)){const o={session:null,error:a};return rp(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ra(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=$x(i);await Ra(this.storage,this.storageKey,a)}else{const i=$x(n);await Ra(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Hs(this.storage,this.storageKey),await Hs(this.storage,this.storageKey+"-code-verifier"),await Hs(this.storage,this.storageKey+"-user"),this.userStorage&&await Hs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ta);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ta);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ta}ms, refresh threshold is ${rf} ticks`),i<=rf&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await va(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(c.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await nt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await nt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:c}=await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=sp(i.access_token);let c=null;o.aal&&(c=o.aal);let l=c;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+lI>i)return r;const{data:a,error:o}=await nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};r=f.session.access_token}const{header:i,payload:a,signature:o,raw:{header:c,payload:l}}=sp(r);n!=null&&n.allowExpired||II(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:a,header:i,signature:o},error:null}}const u=MI(i.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,yI(`${c}.${l}`)))throw new of("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}}Sc.nextInstanceID=0;const QI=Sc;class eM extends QI{constructor(e){super(e)}}var tM=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(u){try{d(r.next(u))}catch(h){o(h)}}function l(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,l)}d((r=r.apply(t,e||[])).next())})};class nM{constructor(e,n,r){var i,a,o;this.supabaseUrl=e,this.supabaseKey=n;const c=sI(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:KA,realtime:ZA,auth:Object.assign(Object.assign({},YA),{storageKey:l}),global:qA},u=rI(r??{},d);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=eI(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new dA(new URL("rest/v1",c).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new VA(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new UR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return tM(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:o,flowType:c,lock:l,debug:d},u,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eM({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,flowType:c,lock:l,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new kA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rM=(t,e,n)=>new nM(t,e,n);function sM(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}sM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iM="https://lnxbvkcggoyfmpfthhhk.supabase.co",aM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxueGJ2a2NnZ295Zm1wZnRoaGhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTg5MzcsImV4cCI6MjA3NTA3NDkzN30.jA9UekW12CqU7vKHBZUPN2dtwG-nhqy1yxE8L70HZjM",oM=aM,X=rM(iM,oM,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}}}),Nm=vo("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-160 ease-out disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:shadow-[0_0_0_1px_hsl(var(--ring)),0_0_8px_hsl(var(--ring)/0.5)]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-[1.03] hover:-translate-y-0.5 hover:shadow-lg active:scale-[0.98] active:translate-y-0",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:scale-[1.03] hover:shadow-lg active:scale-[0.98]",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:scale-[1.03] hover:shadow-md active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:scale-[1.03] hover:shadow-md active:scale-[0.98]",ghost:"hover:bg-accent hover:text-accent-foreground hover:scale-[1.03] active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline hover:scale-[1.02] active:scale-[0.98]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),I=v.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const o=r?ow:"button";return s.jsx(o,{className:Y(Nm({variant:e,size:n,className:t})),ref:a,...i})});I.displayName="Button";const lj=t=>{const[e,n]=v.useState(!1),[r,i]=v.useState(!0);return v.useEffect(()=>{(async()=>{if(!t){n(!1),i(!1);return}try{const{data:o,error:c}=await X.from("user_roles").select("role").eq("user_id",t.id).eq("role","admin").maybeSingle();c?(c.code!=="PGRST116"&&c.code!=="PGRST301"&&console.error("Error checking admin status:",c),n(!1)):n(!!o)}catch(o){console.error("Unexpected error checking admin:",o),n(!1)}finally{i(!1)}})()},[t]),{isAdmin:e,isLoading:r}},cM="/assets/prossmind-logo-transparent-CtKdxO7Z.png",dj=Zf,uj=cw,lM=Yf,hj=v.forwardRef(({className:t,...e},n)=>s.jsx(Fc,{className:Y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));hj.displayName=Fc.displayName;const dM=vo("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Sm=v.forwardRef(({side:t="right",className:e,children:n,...r},i)=>s.jsxs(lM,{children:[s.jsx(hj,{}),s.jsxs(zc,{ref:i,className:Y(dM({side:t}),e),...r,children:[n,s.jsxs(eu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Wr,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Sm.displayName=zc.displayName;const km=({className:t,...e})=>s.jsx("div",{className:Y("flex flex-col space-y-2 text-center sm:text-left",t),...e});km.displayName="SheetHeader";const Cm=v.forwardRef(({className:t,...e},n)=>s.jsx(Uc,{ref:n,className:Y("text-lg font-semibold text-foreground",t),...e}));Cm.displayName=Uc.displayName;const uM=v.forwardRef(({className:t,...e},n)=>s.jsx(Hc,{ref:n,className:Y("text-sm text-muted-foreground",t),...e}));uM.displayName=Hc.displayName;const pj=v.createContext(void 0),op="prossmind-theme";function hM({children:t}){const[e,n]=v.useState(()=>typeof window>"u"?"system":localStorage.getItem(op)||"system"),[r,i]=v.useState(()=>typeof window>"u"?"light":e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e);v.useEffect(()=>{if(e==="system"){const o=window.matchMedia("(prefers-color-scheme: dark)"),c=l=>{i(l.matches?"dark":"light")};return c(o),o.addEventListener("change",c),()=>o.removeEventListener("change",c)}else i(e)},[e]),v.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark"),r==="dark"?o.classList.add("dark"):o.classList.add("light")},[r]);const a=o=>{n(o),typeof window<"u"&&localStorage.setItem(op,o)};return v.useEffect(()=>{const o=window.document.documentElement,l=localStorage.getItem(op)||"system";let d="light";l==="system"?d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":d=l,o.classList.remove("light","dark"),o.classList.add(d)},[]),s.jsx(pj.Provider,{value:{theme:e,setTheme:a,resolvedTheme:r},children:t})}function pM(){const t=v.useContext(pj);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const cp=()=>{const{theme:t,setTheme:e,resolvedTheme:n}=pM(),[r,i]=v.useState(!1);if(v.useEffect(()=>{i(!0)},[]),!r)return s.jsx(I,{variant:"ghost",size:"icon",className:"h-9 w-9","aria-label":"Theme toggle",disabled:!0,children:s.jsx(ox,{className:"h-5 w-5","aria-hidden":"true"})});const a=()=>{e(t==="light"?"dark":t==="dark"?"system":"light")};return s.jsxs(I,{variant:"ghost",size:"icon",onClick:a,className:"h-9 w-9 relative transition-all","aria-label":`Switch to ${n==="dark"?"light":"dark"} mode`,title:`Current: ${n==="dark"?"Dark":"Light"} mode (${t==="system"?"Auto":"Manual"})`,children:[n==="dark"?s.jsx(ox,{className:"h-5 w-5 transition-all rotate-0 scale-100","aria-hidden":"true"}):s.jsx(wP,{className:"h-5 w-5 transition-all rotate-0 scale-100","aria-hidden":"true"}),s.jsx("span",{className:"sr-only",children:n==="dark"?"Switch to light mode":"Switch to dark mode"})]})},Ps=()=>{const[t,e]=v.useState(!1);return v.useEffect(()=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)");e(n.matches);const r=i=>{e(i.matches)};return n.addEventListener?(n.addEventListener("change",r),()=>n.removeEventListener("change",r)):(n.addListener(r),()=>n.removeListener(r))},[]),t},Je=t=>{if(t)return{duration:0}},tl=()=>{const e=new URLSearchParams(window.location.search).get("subdomain");if(e)return e;const r=window.location.host.split(".");return r.length>2?r[0]:null},fj=()=>{const t=tl();return t&&["app","docs","admin","blog","status","api","de","fr","bpmn","pid","partners"].includes(t)?t:"main"},fM=()=>fj()==="app",Kn=()=>{const t=window.location.host,e=window.location.hostname;return t.includes("localhost")||t.includes("127.0.0.1")||t.includes("0.0.0.0")||e.endsWith(".localhost")},mj=()=>{const t=window.location.host,e=t.split(".");return e.length>2?e.slice(-2).join("."):t},gj=(t,e="")=>{if(Kn()){const a=e.startsWith("/")?e:`/${e}`,o=`${window.location.origin}${a}`,c=o.includes("?")?"&":"?";return`${o}${c}subdomain=${t}`}const n=window.location.protocol,r=mj(),i=e.startsWith("/")?e:`/${e}`;return`${n}//${t}.${r}${i}`},Tr=(t="",e=!1)=>{const n=gj("app",t);e?window.open(n,"_blank"):window.location.href=n},Td=(t,e="")=>gj(t,e),Er=()=>{const t=tl();return t?`?subdomain=${t}`:""},fn=(t,e)=>{const n=tl();if(n&&Kn()){const r=e.includes("?")?"&":"?";t(`${e}${r}subdomain=${n}`)}else t(e)},mM=()=>{if(Kn())return`${window.location.origin}/`;const t=window.location.protocol,e=mj();return`${t}//${e}/`},Vn=({user:t})=>{const e=Bc(),{toast:n}=Yc(),r=v.useRef(!1),i=v.useRef(null),a=v.useRef(null),[o,c]=v.useState(()=>{const k=t??null;return a.current=k,k}),{isAdmin:l}=lj(o),d=Ps(),[u,h]=v.useState(!1),[p,f]=v.useState(!1),[m,x]=v.useState(!1),{scrollY:g}=Q0();v.useEffect(()=>{X.auth.getSession().then(({data:{session:P}})=>{r.current=!0;const T=(P==null?void 0:P.user)??null;i.current=T,a.current=T,c(T)});const{data:{subscription:k}}=X.auth.onAuthStateChange((P,T)=>{r.current=!0;const L=(T==null?void 0:T.user)??null;i.current=L,a.current=L,c(L)});return()=>k.unsubscribe()},[]),v.useEffect(()=>{r.current&&(t!==void 0?(a.current=t,c(t),t&&(i.current=t)):t===void 0&&a.current===null&&i.current!==null&&(a.current=i.current,c(i.current)))},[t]),v.useEffect(()=>{a.current=o},[o]),v.useEffect(()=>{const k=()=>{h(window.innerWidth<1080)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),v.useEffect(()=>{const k=g.on("change",P=>{x(P>50)});return()=>k()},[g]);const w=async()=>{var P,T;const{error:k}=await X.auth.signOut();k&&!((P=k.message)!=null&&P.includes("session"))&&!((T=k.message)!=null&&T.includes("Session"))&&n({variant:"destructive",title:"Error signing out",description:k.message}),c(null),i.current=null,a.current=null,window.location.href="/"},b=fj()==="app",j=[{name:"Dashboard",path:"/dashboard",icon:mP},{name:"Projects",path:"/projects",icon:dP},{name:"Templates",path:"/templates",icon:Qt},{name:"Vision AI",path:"/vision-ai",icon:Ns}],C=[{name:"Features",path:"/features"},{name:"Vision AI",path:"/vision-ai"},{name:"Pricing",path:"/pricing"},{name:"Documentation",path:Td("docs"),external:!0},{name:"Blog",path:Td("blog"),external:!0},{name:"Contact",path:"/contact"}],N=b?j:C;return s.jsx(ae.nav,{className:"fixed top-0 left-0 right-0 z-50 border-b border-border/50 h-16 bg-background/95 backdrop-blur-lg",style:{backgroundColor:oc(g,[0,100],["hsl(var(--background) / 0.95)","hsl(var(--background) / 1)"]),backdropFilter:oc(g,[0,100],["blur(16px)","blur(24px)"]),boxShadow:oc(g,[0,100],["0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","0 4px 30px rgba(37, 99, 235, 0.1)"])},initial:d?{y:0}:{y:-100},animate:{y:0},transition:Je(d)||{duration:.3},children:s.jsx("div",{className:"container mx-auto px-6 h-full",children:s.jsxs("div",{className:"flex items-center justify-between h-full",children:[s.jsx(ae.div,{animate:d?{scale:1}:{scale:m?.95:1},transition:Je(d)||{duration:.3},children:s.jsxs("a",{href:mM(),className:"flex items-center space-x-3 group flex-shrink-0","aria-label":"ProssMind Home",children:[s.jsx(ae.img,{src:cM,alt:"ProssMind Logo",className:"h-10 w-auto",whileHover:d?{}:{scale:1.05},transition:Je(d)||{duration:.2}}),s.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent whitespace-nowrap",children:"ProssMind"})]})}),!u&&s.jsxs(s.Fragment,{children:[s.jsx(ae.div,{className:"flex items-center space-x-1 bg-secondary/50 rounded-full px-2 py-1.5 shadow-sm flex-shrink-0 relative border border-border/30",style:{borderRadius:"40px"},animate:d?{}:{paddingTop:m?"0.25rem":"0.375rem",paddingBottom:m?"0.25rem":"0.375rem"},transition:Je(d)||{duration:.3},children:N.map(k=>{const P=k.icon,T=k.external,L=!T&&(e.pathname===k.path||k.path==="/dashboard"&&e.pathname==="/"),R=`px-5 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap relative flex items-center gap-2 ${L?"text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80 hover:scale-[1.02]"}`;if(T)return s.jsxs("a",{href:k.path,target:"_blank",rel:"noopener noreferrer",className:R,"aria-label":`Navigate to ${k.name} page`,children:[P&&s.jsx(P,{className:"h-4 w-4 relative z-10"}),s.jsx("span",{className:"relative z-10",children:k.name})]},k.path);const M=!T&&Kn()?`${k.path}${Er()}`:k.path;return s.jsxs(pn,{to:M,className:R,"aria-label":`Navigate to ${k.name} page`,children:[L?s.jsx(ae.div,{layoutId:d?void 0:"activeNavIndicator",className:"absolute inset-0 bg-primary rounded-full shadow-md",transition:Je(d)||{type:"spring",stiffness:380,damping:30}}):null,P&&s.jsx(P,{className:"h-4 w-4 relative z-10"}),s.jsx("span",{className:"relative z-10",children:k.name})]},k.path)})}),o?s.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[s.jsx(cp,{}),b&&s.jsxs(s.Fragment,{children:[s.jsx(pn,{to:Kn()?`/account${Er()}`:"/account",children:s.jsx(I,{variant:"ghost",size:"sm",className:"gap-2","aria-label":"Account",children:s.jsx(jc,{className:"h-4 w-4"})})}),s.jsx(pn,{to:Kn()?`/settings${Er()}`:"/settings",children:s.jsx(I,{variant:"ghost",size:"sm",className:"gap-2","aria-label":"Settings",children:s.jsx(Nd,{className:"h-4 w-4"})})})]}),l&&s.jsx(pn,{to:Kn()?`/admin${Er()}`:"/admin",children:s.jsxs(I,{variant:"outline",size:"sm",className:"gap-2 hover:bg-primary/10 hover:border-primary/50 transition-all whitespace-nowrap","aria-label":"Admin Dashboard",children:[s.jsx(Ss,{className:"h-4 w-4","aria-hidden":"true"}),"Admin"]})}),s.jsx("span",{className:"text-sm text-muted-foreground font-medium whitespace-nowrap truncate max-w-[200px]","aria-label":`Logged in as ${o.email}`,children:o.email}),s.jsxs(I,{onClick:w,variant:"outline",className:"items-center gap-2 hover:bg-destructive/10 hover:border-destructive/50 hover:text-destructive transition-all whitespace-nowrap","aria-label":"Sign out",children:[s.jsx(sx,{className:"h-4 w-4","aria-hidden":"true"}),"Sign Out"]})]}):s.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[s.jsx(cp,{}),s.jsx(pn,{to:Kn()?`/auth${Er()}`:"/auth",className:"flex-shrink-0",children:s.jsxs(I,{className:"flex items-center gap-2 bg-primary hover:bg-primary/90 shadow-md hover:shadow-lg transition-all whitespace-nowrap","aria-label":"Sign up or log in",children:[b?"Sign In":"Sign Up",s.jsx(_c,{className:"h-4 w-4","aria-hidden":"true"})]})})]})]}),u&&s.jsxs(dj,{open:p,onOpenChange:f,children:[s.jsx(uj,{asChild:!0,children:s.jsx(ae.div,{whileTap:d?{}:{scale:.95},children:s.jsxs(I,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Open navigation menu",children:[s.jsx(ae.div,{animate:d?{rotate:p?90:0}:{rotate:p?90:0},transition:Je(d)||{duration:.3},children:s.jsx(o_,{className:"h-6 w-6","aria-hidden":"true"})}),s.jsx("span",{className:"sr-only",children:"Open menu"})]})})}),s.jsxs(Sm,{side:"right",className:"w-[300px] sm:w-[400px]",children:[s.jsx(km,{children:s.jsx(Cm,{children:"Menu"})}),s.jsxs("nav",{className:"flex flex-col gap-4 mt-6",children:[s.jsxs(ae.div,{className:"flex items-center justify-between px-4 py-2 border-b border-border mb-2",initial:d?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:Je(d)||{delay:.1},children:[s.jsx("span",{className:"text-sm font-medium",children:"Theme"}),s.jsx(cp,{})]}),N.map((k,P)=>{const T=k.icon,L=k.external,M=`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${!L&&(e.pathname===k.path||k.path==="/dashboard"&&e.pathname==="/")?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80"}`;return s.jsx(ae.div,{initial:d?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:Je(d)||{delay:.1+P*.05},children:L?s.jsxs("a",{href:k.path,target:"_blank",rel:"noopener noreferrer",className:M,"aria-label":`Navigate to ${k.name} page`,children:[T&&s.jsx(T,{className:"h-4 w-4"}),k.name]}):s.jsxs(pn,{to:Kn()?`${k.path}${Er()}`:k.path,onClick:()=>f(!1),className:M,"aria-label":`Navigate to ${k.name} page`,children:[T&&s.jsx(T,{className:"h-4 w-4"}),k.name]})},k.path)}),b&&o&&s.jsxs(s.Fragment,{children:[s.jsx(ae.div,{initial:d?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:Je(d)||{delay:.3},children:s.jsxs(pn,{to:Kn()?`/account${Er()}`:"/account",onClick:()=>f(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${e.pathname==="/account"?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80"}`,children:[s.jsx(jc,{className:"h-4 w-4"}),"Account"]})}),s.jsx(ae.div,{initial:d?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:Je(d)||{delay:.35},children:s.jsxs(pn,{to:Kn()?`/settings${Er()}`:"/settings",onClick:()=>f(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${e.pathname==="/settings"?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80"}`,children:[s.jsx(Nd,{className:"h-4 w-4"}),"Settings"]})})]}),o?s.jsxs(s.Fragment,{children:[l&&s.jsx(pn,{to:Kn()?`/admin${Er()}`:"/admin",onClick:()=>f(!1),children:s.jsxs(I,{variant:"outline",className:"w-full justify-start gap-2","aria-label":"Admin Dashboard",children:[s.jsx(Ss,{className:"h-4 w-4","aria-hidden":"true"}),"Admin"]})}),s.jsx("div",{className:"px-4 py-2 text-sm text-muted-foreground","aria-label":`Logged in as ${o.email}`,children:o.email}),s.jsxs(I,{onClick:()=>{w(),f(!1)},variant:"outline",className:"w-full justify-start gap-2 hover:bg-destructive/10 hover:border-destructive/50 hover:text-destructive","aria-label":"Sign out",children:[s.jsx(sx,{className:"h-4 w-4","aria-hidden":"true"}),"Sign Out"]})]}):s.jsx(pn,{to:Kn()?`/auth${Er()}`:"/auth",onClick:()=>f(!1),children:s.jsxs(I,{className:"w-full gap-2","aria-label":"Sign up or log in",children:["Sign Up",s.jsx(_c,{className:"h-4 w-4","aria-hidden":"true"})]})})]})]})]})]})})})},gM="/assets/hero-mind-process-CVwas96Y.jpg",vM=()=>{const t=v.useRef(null),e=v.useRef([]),n=v.useRef();return v.useEffect(()=>{const r=t.current;if(!r)return;const i=r.getContext("2d");if(!i)return;const a=()=>{r.width=window.innerWidth,r.height=window.innerHeight};a(),window.addEventListener("resize",a);const o=Math.min(20,Math.max(15,Math.floor(r.width*r.height/2e4)));e.current=Array.from({length:o},()=>({x:Math.random()*r.width,y:Math.random()*r.height,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3-.2,size:Math.random()*2+1,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,opacity:Math.random()*.5+.3}));const c=()=>{i.clearRect(0,0,r.width,r.height);const l=e.current;l.forEach(d=>{let u=d.x+d.vx,h=d.y+d.vy;d.rotation+=d.rotationSpeed,u<0&&(u=r.width,d.opacity=Math.random()*.5+.3),u>r.width&&(u=0,d.opacity=Math.random()*.5+.3),h<0&&(h=r.height,d.opacity=Math.random()*.5+.3),h>r.height&&(h=0,d.opacity=Math.random()*.5+.3),d.x=u,d.y=h,i.save(),i.translate(d.x,d.y),i.rotate(d.rotation),i.beginPath(),i.arc(0,0,d.size,0,Math.PI*2),i.fillStyle=`rgba(37, 99, 235, ${d.opacity})`,i.fill(),i.restore()}),l.forEach((d,u)=>{l.slice(u+1).forEach(h=>{const p=d.x-h.x,f=d.y-h.y,m=Math.sqrt(p*p+f*f);m<150&&(i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(h.x,h.y),i.strokeStyle=`rgba(37, 99, 235, ${.1*(1-m/150)})`,i.lineWidth=.5,i.stroke())})}),n.current=requestAnimationFrame(c)};return c(),()=>{window.removeEventListener("resize",a),n.current&&cancelAnimationFrame(n.current)}},[]),s.jsx(ae.canvas,{ref:t,className:"absolute inset-0 pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:1}})},xM=({containerRef:t,centerX:e,centerY:n})=>{const r=v.useRef(null),[i,a]=v.useState([]),o=v.useRef();if(v.useEffect(()=>{if(!t.current||e===0||n===0)return;const l=t.current.getBoundingClientRect(),d=e-l.left,u=n-l.top,h=6,p=Array.from({length:h},(m,x)=>{const g=x/h*Math.PI*2,w=150+Math.random()*100,y=d+Math.cos(g)*w,b=u+Math.sin(g)*w,j=3+Math.floor(Math.random()*3),C=Array.from({length:j},()=>({progress:Math.random(),speed:.005+Math.random()*.005}));return{id:x,startX:d,startY:u,endX:y,endY:b,particles:C}});a(p);const f=()=>{a(m=>m.map(x=>({...x,particles:x.particles.map(g=>({...g,progress:(g.progress+g.speed)%1}))}))),o.current=requestAnimationFrame(f)};return f(),()=>{o.current&&cancelAnimationFrame(o.current)}},[e,n,t]),!t.current)return null;const c=t.current.getBoundingClientRect();return s.jsxs("svg",{ref:r,className:"absolute inset-0 pointer-events-none",width:c.width,height:c.height,children:[s.jsx("defs",{children:s.jsxs("filter",{id:"glow",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),s.jsxs("feMerge",{children:[s.jsx("feMergeNode",{in:"coloredBlur"}),s.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),i.map(l=>s.jsxs("g",{children:[s.jsx(ae.line,{x1:l.startX,y1:l.startY,x2:l.endX,y2:l.endY,stroke:"rgba(37, 99, 235, 0.2)",strokeWidth:"1",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,ease:"easeOut"}}),l.particles.map((d,u)=>{const h=l.startX+(l.endX-l.startX)*d.progress,p=l.startY+(l.endY-l.startY)*d.progress,f=1-d.progress%.2*5;return s.jsxs("g",{children:[s.jsx("circle",{cx:h,cy:p,r:"8",fill:"rgba(37, 99, 235, 0.1)",opacity:f,filter:"url(#glow)"}),s.jsx(ae.circle,{cx:h,cy:p,r:"3",fill:"rgba(37, 99, 235, 0.8)",filter:"url(#glow)",animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]},u)})]},l.id))]})},yM=({src:t,autoplay:e=!0,loop:n=!0,className:r="","aria-label":i,lazy:a=!0,fallback:o})=>{const c=v.useRef(null),l=v.useRef(null),[d,u]=v.useState(!1),[h,p]=v.useState(!1),f=Ps(),[m,x]=v.useState(!a);return v.useEffect(()=>{if(!a||m)return;const g=c.current;if(!g)return;const w=new IntersectionObserver(y=>{y.forEach(b=>{b.isIntersecting&&(x(!0),w.disconnect())})},{rootMargin:"100px",threshold:0});if(w.observe(g),typeof window.requestIdleCallback<"u"){const y=window.requestIdleCallback(()=>{m||x(!0)});return()=>{w.disconnect(),window.cancelIdleCallback(y)}}return()=>w.disconnect()},[a,m]),v.useEffect(()=>{if(!m||!c.current||f){f&&o&&u(!0);return}let g=!0;return(async()=>{try{const y=await fetch(t);if(!y.ok)throw new Error(`Failed to load animation: ${y.statusText}`);const b=await y.json();if(!g||!c.current)return;const j=Xk.loadAnimation({container:c.current,renderer:"svg",loop:n,autoplay:e,animationData:b});l.current=j,u(!0)}catch(y){console.error("Error loading Lottie animation:",y),g&&(p(!0),u(!0))}})(),()=>{g=!1,l.current&&(l.current.destroy(),l.current=null)}},[t,m,f,e,n,o]),f&&o?s.jsx("div",{className:r,children:o}):h&&o?s.jsx("div",{className:r,children:o}):s.jsx("div",{ref:c,className:r,"aria-label":i,"aria-hidden":i?void 0:"true",role:i?"img":void 0})},Pm=t=>{const e=v.useRef(null),n=Tk(e,{once:(t==null?void 0:t.once)??!0,amount:(t==null?void 0:t.threshold)??.15});return{ref:e,isInView:n}},bM={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},Tm={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},mc={hidden:{opacity:0,y:18},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.2,.9,.3,1]}}},vj=()=>{const t=Ps(),e=v.useRef(null),[n,r]=v.useState(null);v.useEffect(()=>{X.auth.getSession().then(({data:{session:l}})=>{r((l==null?void 0:l.user)??null)})},[]);const i=()=>{Tr(n?"/dashboard":"/auth")},{scrollY:a}=Q0();oc(a,[0,500],[0,100]),oc(a,[0,300],[1,0]);const[o,c]=v.useState({x:0,y:0});return v.useEffect(()=>{if(e.current){const l=e.current.getBoundingClientRect();c({x:l.left+l.width/2,y:l.top+l.height/2})}},[]),s.jsxs(ae.section,{className:"relative min-h-screen bg-gradient-to-b from-gray-50 to-white dark:from-background dark:to-card text-hero-foreground dark:text-foreground overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[s.jsx(vM,{}),s.jsx("div",{className:"container mx-auto px-8 md:px-12 pb-8 md:pb-16 relative z-10",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center min-h-[600px]",children:[s.jsxs(ae.div,{className:"space-y-6 md:space-y-8 flex flex-col justify-center",initial:"hidden",animate:"visible",variants:bM,children:[s.jsxs(ae.div,{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-primary/10 dark:bg-primary/20 border border-primary/20 dark:border-primary/30 text-xs font-medium mb-2",style:{width:"fit-content"},initial:t?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:Je(t)||{delay:.2,duration:.5},children:[s.jsx(Qa,{className:"h-3 w-3 text-primary"}),s.jsx("span",{children:"AI-Powered Process Intelligence"})]}),s.jsx(ae.h1,{className:"text-5xl md:text-7xl font-bold leading-tight tracking-tight",initial:t?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},transition:Je(t)||{delay:.4,duration:.7,ease:"easeOut"},children:"ProssMind"}),s.jsx(ae.p,{className:"text-lg md:text-xl text-foreground/80 dark:text-foreground/80 max-w-lg leading-relaxed",initial:t?{opacity:1,y:0}:{opacity:0,y:10},animate:{opacity:1,y:0},transition:Je(t)||{delay:1.1,duration:.6},children:"Swiss AI Process Intelligence  GDPR Compliant  Locally Hosted."}),s.jsxs(ae.div,{className:"flex flex-col gap-4 sm:flex-row sm:gap-6 pt-2",initial:t?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},transition:Je(t)||{delay:.5,duration:.6},children:[s.jsx(ae.div,{whileHover:t?{}:{scale:1.02},transition:Je(t)||{duration:.2},children:s.jsx(I,{size:"lg",className:"group text-base px-8 py-6 shadow-lg hover:shadow-xl transition-all focus-visible:outline-2 focus-visible:outline-offset-2 relative overflow-hidden",onClick:i,"aria-label":"Try ProssMind for free",style:{background:"linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.9))"},children:s.jsxs(ae.span,{className:"flex items-center",whileHover:t?{}:{scale:1.02},children:["Try It Free",s.jsx(ae.span,{className:"ml-2",animate:t?{x:0}:{x:[0,4,0]},transition:Je(t)||{duration:1.5,repeat:1/0,repeatDelay:2},children:s.jsx(Fi,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform","aria-hidden":"true"})})]})})}),s.jsx(ae.div,{whileHover:t?{}:{scale:1.02},transition:Je(t)||{duration:.2},children:s.jsx(I,{size:"lg",variant:"outline",className:"group text-base px-8 py-6 bg-hero-foreground/5 dark:bg-foreground/5 hover:bg-primary/5 border-2 border-primary/30 hover:border-primary transition-all focus-visible:outline-2 focus-visible:outline-offset-2 relative","aria-label":"View ProssMind features",style:{boxShadow:"0 0 0px rgba(100, 180, 255, 0)"},onMouseEnter:l=>{l.currentTarget.style.boxShadow="0 0 15px rgba(100, 180, 255, 0.5)",l.currentTarget.style.color="hsl(var(--primary))"},onMouseLeave:l=>{l.currentTarget.style.boxShadow="0 0 0px rgba(100, 180, 255, 0)",l.currentTarget.style.color=""},children:s.jsxs("span",{className:"flex items-center",children:["View Features",s.jsx(ae.span,{initial:t?{opacity:1,x:0}:{opacity:0,x:-5},whileHover:t?{}:{opacity:1,x:0},transition:Je(t)||{duration:.2},className:"ml-2",children:s.jsx(_c,{className:"h-5 w-5","aria-hidden":"true"})})]})})})]})]}),s.jsxs(ae.div,{ref:e,className:"relative",initial:t?{opacity:1,x:0}:{opacity:0,x:50},animate:{opacity:1,x:0},transition:Je(t)||{delay:.6,duration:.7},children:[o.x>0&&o.y>0&&s.jsx(xM,{containerRef:e,centerX:o.x,centerY:o.y}),s.jsx(ae.div,{className:"absolute inset-0 bg-primary/20 dark:bg-primary/10 blur-3xl rounded-full glow-effect",animate:t?{scale:1}:{scale:[1,1.1,1]},transition:Je(t)||{duration:4,repeat:1/0}}),s.jsx(ae.div,{className:"relative z-10 rounded-2xl overflow-hidden shadow-2xl border border-hero-foreground/10 dark:border-border/50",whileHover:t?{}:{scale:1.02},animate:t?{scale:1}:{scale:[1,1.02,1]},transition:Je(t)||{duration:2,repeat:1/0,ease:"easeInOut"},children:s.jsx(yM,{src:"/animations/brain-flow.json",autoplay:!0,loop:!0,className:"w-full h-auto","aria-label":"Mind and Process Mining Intelligence animation",lazy:!0,fallback:s.jsx("img",{src:gM,alt:"Mind and Process Mining Intelligence",className:"w-full h-auto",loading:"lazy"})})})]})]})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-background to-transparent"})]})},xj=()=>{const t=Ps(),e=[{icon:Qt,title:"Upload Your Document",description:"Upload images, PDFs, Word documents, or text files describing your process.",color:"text-blue-500",glowColor:"blue"},{icon:QC,title:"AI Analysis",description:"Our AI analyzes your document and extracts process information using advanced NLP.",color:"text-purple-500",glowColor:"purple"},{icon:Qn,title:"BPMN Generation",description:"The AI generates a complete BPMN diagram with tasks, gateways, and flows.",color:"text-green-500",glowColor:"green"},{icon:nc,title:"Ready to Use",description:"Download your BPMN diagram or integrate directly with your workflow tools.",color:"text-primary",glowColor:"primary"}],n=r=>{switch(r){case"blue":return"hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50";case"purple":return"hover:shadow-[0_0_20px_rgba(168,85,247,0.5)] hover:shadow-purple-500/50";case"green":return"hover:shadow-[0_0_20px_rgba(34,197,94,0.5)] hover:shadow-green-500/50";case"primary":return"hover:shadow-[0_0_20px_hsl(var(--primary))] hover:shadow-primary/50";default:return"hover:shadow-[0_0_20px_rgba(59,130,246,0.5)]"}};return s.jsx(ae.section,{className:"py-24 bg-background relative overflow-hidden",initial:t?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:Je(t)||{duration:.7},children:s.jsxs("div",{className:"container mx-auto px-6",children:[s.jsxs(ae.div,{className:"text-center mb-16",initial:t?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:Je(t)||{duration:.6,delay:.2},children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"How It Works"}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"From document to diagram in seconds"})]}),s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((r,i)=>{const a=r.icon;return s.jsxs(ae.div,{className:`text-center space-y-4 p-6 rounded-2xl transition-all duration-300 cursor-pointer ${n(r.glowColor)}`,initial:t?{opacity:1,y:0}:{opacity:0,y:20},whileInView:t?{}:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:Je(t)||{duration:.6,delay:i*.1},whileHover:t?{}:{scale:1.05,y:-5},children:[s.jsx(ae.div,{className:"w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center transition-all duration-300","aria-hidden":"true",children:s.jsx(a,{className:`h-8 w-8 ${r.color} transition-all duration-300`,"aria-hidden":"true"})}),s.jsx("h3",{className:"text-xl font-semibold",children:r.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]},i)})})})]})})},re=v.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Y("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));re.displayName="Card";const fe=v.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Y("flex flex-col space-y-1.5 p-6",t),...e}));fe.displayName="CardHeader";const me=v.forwardRef(({className:t,...e},n)=>s.jsx("h3",{ref:n,className:Y("text-2xl font-semibold leading-none tracking-tight",t),...e}));me.displayName="CardTitle";const _e=v.forwardRef(({className:t,...e},n)=>s.jsx("p",{ref:n,className:Y("text-sm text-muted-foreground",t),...e}));_e.displayName="CardDescription";const ue=v.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Y("p-6 pt-0",t),...e}));ue.displayName="CardContent";const wM=v.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Y("flex items-center p-6 pt-0",t),...e}));wM.displayName="CardFooter";const _M=[{icon:Qn,title:"Process Generator",description:"Design and build automated business processes with powerful AI capabilities."},{icon:Ns,title:"Vision Automation",description:"Automate visual tasks with advanced computer vision and image processing."},{icon:pu,title:"BPMN Integration",description:"Download BPMN diagrams and integrate with SAP Signavio, Camunda, Flowable, and more."}],yj=()=>{const t=Ps(),{ref:e,isInView:n}=Pm({threshold:.1});return s.jsx(ae.section,{className:"py-24 bg-muted/30 relative",initial:t?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:Je(t)||{duration:.7},children:s.jsxs("div",{className:"container mx-auto px-6",children:[s.jsxs(ae.div,{className:"text-center mb-16",initial:t?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:Je(t)||{duration:.6,delay:.2},children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Powerful Features"}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Everything you need to automate and optimize your business processes"})]}),s.jsx(ae.div,{ref:e,className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",variants:Tm,initial:"hidden",animate:n?"visible":"hidden",children:_M.map((r,i)=>s.jsx(ae.div,{variants:t?void 0:mc,whileHover:t?{}:{y:-12,rotateY:2,rotateX:2,scale:1.03},transition:Je(t)||{duration:.3},style:{perspective:1e3},children:s.jsxs(re,{className:"card-hover cursor-pointer border-border/50 hover:border-primary bg-card/50 backdrop-blur-sm flex flex-col h-full rounded-2xl shadow-md transition-all p-6 relative overflow-hidden group",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},role:"article","aria-label":`Feature: ${r.title}`,children:[s.jsx(ae.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"linear-gradient(45deg, hsl(var(--primary)), hsl(var(--accent)))",padding:"1px"},initial:!1,children:s.jsx("div",{className:"w-full h-full bg-card/50 backdrop-blur-sm rounded-2xl"})}),s.jsxs(fe,{className:"flex-shrink-0 relative z-10",children:[s.jsxs(ae.div,{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mb-6 tech-glow relative",animate:t?{rotate:0}:{rotate:[-2,2,-2]},transition:Je(t)||{duration:4,repeat:1/0,ease:"easeInOut"},whileHover:t?{}:{scale:1.15,rotate:15,filter:"brightness(1.3)"},children:[s.jsx(ae.div,{whileHover:t?{}:{scale:1.2},transition:Je(t)||{duration:.2},style:{filter:"drop-shadow(0 0 20px hsl(var(--primary)))"},children:s.jsx(r.icon,{className:"h-7 w-7 text-primary"})}),s.jsx(ae.div,{className:"absolute inset-0 rounded-xl bg-primary/20 blur-xl",animate:t?{scale:1,opacity:0}:{scale:[1,1.3,1],opacity:[0,.8,0]},transition:Je(t)||{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),s.jsx(me,{className:"text-2xl mb-2",children:r.title})]}),s.jsx(ue,{className:"flex-grow flex flex-col relative z-10",children:s.jsx(_e,{className:"text-base leading-relaxed break-words overflow-visible min-h-0",children:r.description})})]})},i))})]})})},jM=[{name:"ProssMind Light",description:"Perfect for individuals and small teams",features:["Basic automation features","Up to 5 processes","Community support","Basic analytics"]},{name:"ProssMind Vision",description:"Advanced features for growing businesses",features:["All Light features","Unlimited processes","Vision automation","Priority support","Advanced analytics","Custom integrations"],popular:!0},{name:"Custom Models",description:"Enterprise-grade solution",features:["All Vision features","Custom AI models","Dedicated support","On-premise deployment","SLA guarantee","Training & consulting"]}],Rm=()=>{const{ref:t,isInView:e}=Pm({threshold:.1}),n=Ps();return s.jsx(ae.section,{className:"py-24 bg-background relative",initial:n?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:n?{}:{duration:.7},children:s.jsxs("div",{className:"container mx-auto px-6",children:[s.jsxs(ae.div,{className:"text-center mb-16",initial:n?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:n?{}:{duration:.6,delay:.2},children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Choose Your Plan"}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Select the perfect plan for your business needs"})]}),s.jsx(ae.div,{ref:t,className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",variants:Tm,initial:"hidden",animate:e?"visible":"hidden",children:jM.map((r,i)=>s.jsx(ae.div,{variants:mc,whileHover:{y:-8,rotateY:r.popular?0:2,rotateX:r.popular?0:2,scale:r.popular?1.05:1.02},style:{perspective:1e3},children:s.jsxs(re,{className:`relative card-hover flex flex-col h-full transition-all ${r.popular?"border-primary shadow-2xl bg-gradient-to-b from-card to-primary/5 hover:border-primary/80":"border-border bg-card/50 backdrop-blur-sm hover:border-primary/50"}`,role:"article","aria-label":`Pricing tier: ${r.name}${r.popular?" - Most Popular":""}`,children:[r.popular&&s.jsxs(ae.div,{className:"absolute -top-4 left-1/2 -translate-x-1/2 z-10",animate:{scale:[1,1.08,1],opacity:[.8,1,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},whileHover:{scale:1.1},children:[s.jsx(ae.span,{className:"bg-gradient-to-r from-primary to-accent text-primary-foreground text-sm font-semibold px-6 py-2 rounded-full shadow-lg block",animate:{boxShadow:["0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 0 20px rgba(37, 99, 235, 0.5)","0 10px 15px -3px rgba(37, 99, 235, 0.3), 0 0 30px rgba(37, 99, 235, 0.8)","0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 0 20px rgba(37, 99, 235, 0.5)"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"Most Popular"}),s.jsx(ae.div,{animate:{scale:[1,1.15,1]},transition:{duration:.3,repeat:1/0,repeatDelay:5,ease:"easeOut"},className:"absolute inset-0",style:{pointerEvents:"none"}})]}),s.jsxs(fe,{className:"text-center pb-8 pt-8 flex-shrink-0",children:[s.jsx(me,{className:"text-2xl mb-3 font-bold",children:r.name}),s.jsx(_e,{className:"text-base",children:r.description})]}),s.jsxs(ue,{className:"flex flex-col flex-grow space-y-8",children:[s.jsx("ul",{className:"space-y-4 flex-grow",children:r.features.map((a,o)=>s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-1 flex-shrink-0",children:s.jsx(ar,{className:"h-4 w-4 text-primary"})}),s.jsx("span",{className:"text-sm leading-relaxed",children:a})]},o))}),s.jsx(I,{className:`w-full text-base py-6 mt-auto hover:scale-[1.03] transition-all ${r.popular?"shadow-lg hover:shadow-xl":""}`,variant:r.popular?"default":"outline",size:"lg","aria-label":`Get started with ${r.name}`,children:"Get Started"})]})]})},i))})]})})},Jn=v.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:Y("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-ring focus-visible:shadow-[0_0_0_1px_hsl(var(--ring)),0_0_8px_hsl(var(--ring)/0.3)] disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Jn.displayName="Textarea";function cf(t,[e,n]){return Math.min(n,Math.max(e,t))}function EM(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var Am="ScrollArea",[bj,g9]=pr(Am),[NM,fr]=bj(Am),wj=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[c,l]=v.useState(null),[d,u]=v.useState(null),[h,p]=v.useState(null),[f,m]=v.useState(null),[x,g]=v.useState(null),[w,y]=v.useState(0),[b,j]=v.useState(0),[C,N]=v.useState(!1),[k,P]=v.useState(!1),T=Ot(e,R=>l(R)),L=Vc(i);return s.jsx(NM,{scope:n,type:r,dir:L,scrollHideDelay:a,scrollArea:c,viewport:d,onViewportChange:u,content:h,onContentChange:p,scrollbarX:f,onScrollbarXChange:m,scrollbarXEnabled:C,onScrollbarXEnabledChange:N,scrollbarY:x,onScrollbarYChange:g,scrollbarYEnabled:k,onScrollbarYEnabledChange:P,onCornerWidthChange:y,onCornerHeightChange:j,children:s.jsx(Me.div,{dir:L,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});wj.displayName=Am;var _j="ScrollAreaViewport",jj=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=t,o=fr(_j,n),c=v.useRef(null),l=Ot(e,c,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(Me.div,{"data-radix-scroll-area-viewport":"",...a,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});jj.displayName=_j;var Qr="ScrollAreaScrollbar",Im=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=fr(Qr,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,c=t.orientation==="horizontal";return v.useEffect(()=>(c?a(!0):o(!0),()=>{c?a(!1):o(!1)}),[c,a,o]),i.type==="hover"?s.jsx(SM,{...r,ref:e,forceMount:n}):i.type==="scroll"?s.jsx(kM,{...r,ref:e,forceMount:n}):i.type==="auto"?s.jsx(Ej,{...r,ref:e,forceMount:n}):i.type==="always"?s.jsx(Mm,{...r,ref:e}):null});Im.displayName=Qr;var SM=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=fr(Qr,t.__scopeScrollArea),[a,o]=v.useState(!1);return v.useEffect(()=>{const c=i.scrollArea;let l=0;if(c){const d=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(ui,{present:n||a,children:s.jsx(Ej,{"data-state":a?"visible":"hidden",...r,ref:e})})}),kM=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=fr(Qr,t.__scopeScrollArea),a=t.orientation==="horizontal",o=Nu(()=>l("SCROLL_END"),100),[c,l]=EM("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,i.scrollHideDelay,l]),v.useEffect(()=>{const d=i.viewport,u=a?"scrollLeft":"scrollTop";if(d){let h=d[u];const p=()=>{const f=d[u];h!==f&&(l("SCROLL"),o()),h=f};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[i.viewport,a,l,o]),s.jsx(ui,{present:n||c!=="hidden",children:s.jsx(Mm,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Re(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Re(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),Ej=v.forwardRef((t,e)=>{const n=fr(Qr,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=v.useState(!1),c=t.orientation==="horizontal",l=Nu(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(c?d:u)}},10);return no(n.viewport,l),no(n.content,l),s.jsx(ui,{present:r||a,children:s.jsx(Mm,{"data-state":a?"visible":"hidden",...i,ref:e})})}),Mm=v.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=fr(Qr,t.__scopeScrollArea),a=v.useRef(null),o=v.useRef(0),[c,l]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Pj(c.viewport,c.content),u={...r,sizes:c,onSizesChange:l,hasThumb:d>0&&d<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,f){return IM(p,o.current,c,f)}return n==="horizontal"?s.jsx(CM,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollLeft,f=Ux(p,c,i.dir);a.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=h(p,i.dir))}}):n==="vertical"?s.jsx(PM,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollTop,f=Ux(p,c);a.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=h(p))}}):null}),CM=v.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=fr(Qr,t.__scopeScrollArea),[o,c]=v.useState(),l=v.useRef(null),d=Ot(e,l,a.onScrollbarXChange);return v.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),s.jsx(Sj,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Eu(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(a.viewport){const p=a.viewport.scrollLeft+u.deltaX;t.onWheelScroll(p),Rj(p,h)&&u.preventDefault()}},onResize:()=>{l.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Ad(o.paddingLeft),paddingEnd:Ad(o.paddingRight)}})}})}),PM=v.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=fr(Qr,t.__scopeScrollArea),[o,c]=v.useState(),l=v.useRef(null),d=Ot(e,l,a.onScrollbarYChange);return v.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),s.jsx(Sj,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Eu(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(a.viewport){const p=a.viewport.scrollTop+u.deltaY;t.onWheelScroll(p),Rj(p,h)&&u.preventDefault()}},onResize:()=>{l.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Ad(o.paddingTop),paddingEnd:Ad(o.paddingBottom)}})}})}),[TM,Nj]=bj(Qr),Sj=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:d,onWheelScroll:u,onResize:h,...p}=t,f=fr(Qr,n),[m,x]=v.useState(null),g=Ot(e,T=>x(T)),w=v.useRef(null),y=v.useRef(""),b=f.viewport,j=r.content-r.viewport,C=Zn(u),N=Zn(l),k=Nu(h,10);function P(T){if(w.current){const L=T.clientX-w.current.left,R=T.clientY-w.current.top;d({x:L,y:R})}}return v.useEffect(()=>{const T=L=>{const R=L.target;(m==null?void 0:m.contains(R))&&C(L,j)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[b,m,j,C]),v.useEffect(N,[r,N]),no(m,k),no(f.content,k),s.jsx(TM,{scope:n,scrollbar:m,hasThumb:i,onThumbChange:Zn(a),onThumbPointerUp:Zn(o),onThumbPositionChange:N,onThumbPointerDown:Zn(c),children:s.jsx(Me.div,{...p,ref:g,style:{position:"absolute",...p.style},onPointerDown:Re(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),w.current=m.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),P(T))}),onPointerMove:Re(t.onPointerMove,P),onPointerUp:Re(t.onPointerUp,T=>{const L=T.target;L.hasPointerCapture(T.pointerId)&&L.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=y.current,f.viewport&&(f.viewport.style.scrollBehavior=""),w.current=null})})})}),Rd="ScrollAreaThumb",kj=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Nj(Rd,t.__scopeScrollArea);return s.jsx(ui,{present:n||i.hasThumb,children:s.jsx(RM,{ref:e,...r})})}),RM=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=fr(Rd,n),o=Nj(Rd,n),{onThumbPositionChange:c}=o,l=Ot(e,h=>o.onThumbChange(h)),d=v.useRef(void 0),u=Nu(()=>{d.current&&(d.current(),d.current=void 0)},100);return v.useEffect(()=>{const h=a.viewport;if(h){const p=()=>{if(u(),!d.current){const f=MM(h,c);d.current=f,c()}};return c(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[a.viewport,u,c]),s.jsx(Me.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Re(t.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),m=h.clientX-f.left,x=h.clientY-f.top;o.onThumbPointerDown({x:m,y:x})}),onPointerUp:Re(t.onPointerUp,o.onThumbPointerUp)})});kj.displayName=Rd;var Dm="ScrollAreaCorner",Cj=v.forwardRef((t,e)=>{const n=fr(Dm,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(AM,{...t,ref:e}):null});Cj.displayName=Dm;var AM=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=fr(Dm,n),[a,o]=v.useState(0),[c,l]=v.useState(0),d=!!(a&&c);return no(i.scrollbarX,()=>{var h;const u=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),no(i.scrollbarY,()=>{var h;const u=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),d?s.jsx(Me.div,{...r,ref:e,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ad(t){return t?parseInt(t,10):0}function Pj(t,e){const n=t/e;return isNaN(n)?0:n}function Eu(t){const e=Pj(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function IM(t,e,n,r="ltr"){const i=Eu(n),a=i/2,o=e||a,c=i-o,l=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-c,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return Tj([l,d],h)(t)}function Ux(t,e,n="ltr"){const r=Eu(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,c=a-r,l=n==="ltr"?[0,o]:[o*-1,0],d=cf(t,l);return Tj([0,o],[0,c])(d)}function Tj(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Rj(t,e){return t>0&&t<e}var MM=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,c=n.top!==a.top;(o||c)&&e(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Nu(t,e){const n=Zn(t),r=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),v.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function no(t,e){const n=Zn(e);Hn(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var Aj=wj,DM=jj,OM=Cj;const hs=v.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(Aj,{ref:r,className:Y("relative overflow-hidden",t),...n,children:[s.jsx(DM,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(Ij,{}),s.jsx(OM,{})]}));hs.displayName=Aj.displayName;const Ij=v.forwardRef(({className:t,orientation:e="vertical",...n},r)=>s.jsx(Im,{ref:r,orientation:e,className:Y("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:s.jsx(kj,{className:"relative flex-1 rounded-full bg-border"})}));Ij.displayName=Im.displayName;const Mj=()=>{const[t,e]=v.useState(!1),[n,r]=v.useState([{role:"assistant",content:"Hi! I'm ProssMind AI Assistant. I can help you with creating BPMN diagrams, using the interface, or answering any questions. How can I help you today?"}]),[i,a]=v.useState(""),[o,c]=v.useState(!1),l=v.useRef(null),d=v.useRef(null);v.useEffect(()=>{var f;(f=d.current)==null||f.scrollIntoView({behavior:"smooth"})},[n]);const u=async f=>{var x,g,w;const m=[...n,{role:"user",content:f}];r(m),a(""),c(!0);try{const b=await fetch("https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/chatbot",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({messages:m})});if(!b.ok){b.status===429?S.error("Rate limit exceeded. Please try again in a moment."):b.status===402?S.error("AI credits depleted. Please contact support."):S.error("Failed to get response from AI."),c(!1);return}if(!b.body)throw new Error("No response body");const j=b.body.getReader(),C=new TextDecoder;let N="",k="",P=!1;const T=L=>{r(R=>{const M=R[R.length-1];return(M==null?void 0:M.role)==="assistant"?R.map((K,F)=>F===R.length-1?{...K,content:L}:K):[...R,{role:"assistant",content:L}]})};for(;!P;){const{done:L,value:R}=await j.read();if(L)break;N+=C.decode(R,{stream:!0});let M;for(;(M=N.indexOf(`
`))!==-1;){let K=N.slice(0,M);if(N=N.slice(M+1),K.endsWith("\r")&&(K=K.slice(0,-1)),K.startsWith(":")||K.trim()===""||!K.startsWith("data: "))continue;const F=K.slice(6).trim();if(F==="[DONE]"){P=!0;break}try{const oe=(w=(g=(x=JSON.parse(F).choices)==null?void 0:x[0])==null?void 0:g.delta)==null?void 0:w.content;oe&&(k+=oe,T(k))}catch{N=K+`
`+N;break}}}c(!1)}catch(y){console.error("Chat error:",y),S.error("An error occurred. Please try again."),c(!1)}},h=()=>{!i.trim()||o||u(i)},p=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),h())};return s.jsxs(s.Fragment,{children:[!t&&s.jsx(I,{onClick:()=>e(!0),className:"fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-2xl hover:shadow-xl transition-all z-50 animate-fade-in",size:"icon",children:s.jsx(yP,{className:"h-6 w-6"})}),t&&s.jsxs(re,{className:"fixed bottom-6 right-6 w-96 h-[600px] shadow-2xl flex flex-col z-50 animate-scale-in",children:[s.jsx(fe,{className:"border-b bg-gradient-to-r from-primary to-accent text-primary-foreground",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(La,{className:"h-5 w-5"}),s.jsx(me,{className:"text-lg",children:"ProssMind Assistant"})]}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>e(!1),className:"text-primary-foreground hover:bg-primary-foreground/20",children:s.jsx(Wr,{className:"h-4 w-4"})})]})}),s.jsxs(ue,{className:"flex-1 flex flex-col p-0",children:[s.jsx(hs,{className:"flex-1 p-4",ref:l,children:s.jsxs("div",{className:"space-y-4",children:[n.map((f,m)=>s.jsxs("div",{className:`flex gap-3 ${f.role==="user"?"justify-end":"justify-start"}`,children:[f.role==="assistant"&&s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(La,{className:"h-4 w-4 text-primary"})}),s.jsx("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 ${f.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:f.content})}),f.role==="user"&&s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:s.jsx(jc,{className:"h-4 w-4 text-primary-foreground"})})]},m)),s.jsx("div",{ref:d})]})}),s.jsx("div",{className:"border-t p-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Jn,{value:i,onChange:f=>a(f.target.value),onKeyDown:p,placeholder:"Ask me anything about ProssMind...",className:"resize-none min-h-[60px]",disabled:o}),s.jsx(I,{onClick:h,disabled:!i.trim()||o,size:"icon",className:"h-[60px] w-[60px] flex-shrink-0",children:s.jsx(Ed,{className:"h-5 w-5"})})]})})]})]})]})},Dj=()=>{const{ref:t,isInView:e}=Pm({threshold:.1});return s.jsx("footer",{className:"border-t border-border bg-background",children:s.jsxs("div",{className:"container mx-auto px-6 py-12",children:[s.jsxs(ae.div,{ref:t,className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",variants:Tm,initial:"hidden",animate:e?"visible":"hidden",children:[s.jsxs(ae.div,{variants:mc,children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Product"}),s.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("li",{children:s.jsxs(pn,{to:"/features",className:"hover:text-foreground transition-colors relative group",children:["Features",s.jsx(ae.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),s.jsx("li",{children:s.jsxs(pn,{to:"/pricing",className:"hover:text-foreground transition-colors relative group",children:["Pricing",s.jsx(ae.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),s.jsx("li",{children:s.jsxs("a",{href:Td("docs"),className:"hover:text-foreground transition-colors relative group",children:["Documentation",s.jsx(ae.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),s.jsx("li",{children:s.jsxs("a",{href:Td("status"),className:"hover:text-foreground transition-colors relative group",children:["Status",s.jsx(ae.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})})]})]}),s.jsxs(ae.div,{variants:mc,children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Legal"}),s.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("li",{children:s.jsxs(pn,{to:"/privacy",className:"hover:text-foreground transition-colors relative group",children:["Privacy Policy",s.jsx(ae.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),s.jsx("li",{children:s.jsxs(pn,{to:"/terms",className:"hover:text-foreground transition-colors relative group",children:["Terms of Service",s.jsx(ae.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),s.jsx("li",{children:s.jsxs(pn,{to:"/contact",className:"hover:text-foreground transition-colors relative group",children:["Contact",s.jsx(ae.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})})]})]}),s.jsxs(ae.div,{variants:mc,children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Company"}),s.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("li",{children:s.jsxs(pn,{to:"/about",className:"hover:text-foreground transition-colors relative group",children:["About Us",s.jsx(ae.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),s.jsx("li",{children:s.jsxs(pn,{to:"/contact",className:"hover:text-foreground transition-colors relative group",children:["Contact Us",s.jsx(ae.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})})]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 justify-center md:justify-start mb-8 pb-8 border-b border-border",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 border border-primary/20",children:[s.jsx(Ss,{className:"h-4 w-4 text-primary","aria-hidden":"true"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"GDPR"})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 border border-primary/20",children:[s.jsx(vP,{className:"h-4 w-4 text-primary","aria-hidden":"true"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"Swiss Hosted"})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-muted border border-border",children:[s.jsx(s_,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true"}),s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"SOC 2 pending"})]})]}),s.jsx("div",{className:"text-sm text-muted-foreground text-center",children:s.jsxs("p",{children:[" ",new Date().getFullYear()," ProssMind. All rights reserved."]})})]})})},$M=Lk,LM=Bk,Oj=v.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>s.jsx($k,{children:s.jsx(lw,{ref:i,align:e,sideOffset:n,className:Y("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Oj.displayName=lw.displayName;const $j=()=>{const t=Ps(),e=[{icon:TP,label:"Swiss Hosted",title:"Swiss Hosted Infrastructure",description:"All data is hosted in Switzerland, ensuring maximum privacy and data sovereignty. Our infrastructure complies with Swiss data protection laws.",link:"#"},{icon:Ss,label:"GDPR Compliant",title:"GDPR Compliance",description:"We are fully compliant with the General Data Protection Regulation (GDPR). Your data is processed with the highest standards of privacy and security.",link:"#"},{icon:hm,label:"SOC 2 Pending",title:"SOC 2 Certification",description:"We are currently undergoing SOC 2 Type II certification to demonstrate our commitment to security, availability, and confidentiality.",link:"#"}];return s.jsx("div",{className:"bg-muted/50 dark:bg-muted/30 py-2 text-sm text-muted-foreground text-center border-b border-border/50",children:s.jsx("div",{className:"container mx-auto px-6",children:s.jsx("div",{className:"flex items-center justify-center gap-6 flex-wrap",children:e.map((n,r)=>s.jsxs($M,{children:[s.jsx(LM,{asChild:!0,children:s.jsxs(ae.button,{className:"flex items-center gap-2 hover:text-foreground transition-colors cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded px-2 py-1",whileHover:t?{}:{scale:1.05},whileTap:t?{}:{scale:.95},"aria-label":`Learn more about ${n.label}`,children:[s.jsx(n.icon,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{children:n.label})]})}),s.jsx(Oj,{className:"w-80",side:"bottom",align:"center",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-sm",children:n.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})]},r))})})})},BM=()=>{const[t,e]=v.useState(null),[n,r]=v.useState(!0);return v.useEffect(()=>{const{data:{subscription:i}}=X.auth.onAuthStateChange((a,o)=>{e((o==null?void 0:o.user)??null),r(!1)});return X.auth.getSession().then(({data:{session:a}})=>{e((a==null?void 0:a.user)??null),r(!1)}),()=>i.unsubscribe()},[]),n?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{user:t}),s.jsx($j,{}),s.jsx(vj,{}),s.jsx(xj,{}),s.jsx(yj,{}),s.jsx(Rm,{}),s.jsx(Mj,{}),s.jsx(Dj,{})]})},dt=({children:t,className:e})=>s.jsx("div",{className:Y("max-w-[1200px] mx-auto p-4 md:p-8",e),children:t}),FM=[{icon:La,title:"AI Agent Generator",description:"Create intelligent agents that can automate complex workflows and tasks with advanced machine learning capabilities.",benefits:["Natural language processing","Self-learning algorithms","Multi-task handling"]},{icon:Qn,title:"Process Generator",description:"Design and build automated business processes with powerful AI capabilities and intuitive visual tools. Download BPMN diagrams and integrate seamlessly with SAP Signavio, Camunda, Flowable, and more.",benefits:["Visual process builder","Real-time monitoring","Automatic optimization","Export BPMN diagrams","Integration with SAP Signavio, Camunda, Flowable"]},{icon:Ns,title:"Vision Automation",description:"Automate visual tasks with advanced computer vision and image processing powered by state-of-the-art AI.",benefits:["Image recognition","OCR capabilities","Video analysis"]},{icon:OP,title:"Lightning Fast",description:"Process automation that runs at incredible speeds with minimal latency and maximum efficiency.",benefits:["Sub-second response","Real-time processing","Edge computing"]},{icon:Ss,title:"Enterprise Security",description:"Bank-level security with end-to-end encryption, ensuring your data and processes are always protected.",benefits:["256-bit encryption","SOC 2 compliant","GDPR ready"]},{icon:uP,title:"Performance Analytics",description:"Deep insights into your automation performance with comprehensive analytics and reporting tools.",benefits:["Real-time dashboards","Custom reports","Predictive insights"]}],zM=()=>{const t=Ps();return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{}),s.jsx("main",{className:"pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Powerful ",s.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Features"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Everything you need to automate your business processes with cutting-edge AI technology"})]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:FM.map((e,n)=>s.jsx(ae.div,{whileHover:t?{}:{y:-12,rotateY:2,rotateX:2,scale:1.03},transition:Je(t)||{duration:.3},style:{perspective:1e3},children:s.jsxs(re,{className:"card-hover cursor-pointer border-border/50 hover:border-primary bg-card/50 backdrop-blur-sm flex flex-col h-full rounded-2xl shadow-md transition-all relative overflow-hidden group",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},role:"article","aria-label":`Feature: ${e.title}`,children:[s.jsx(ae.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"linear-gradient(45deg, hsl(var(--primary)), hsl(var(--accent)))",padding:"1px"},initial:!1,children:s.jsx("div",{className:"w-full h-full bg-card/50 backdrop-blur-sm rounded-2xl"})}),s.jsxs(fe,{className:"flex-shrink-0 relative z-10",children:[s.jsxs(ae.div,{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mb-4 relative",animate:t?{rotate:0}:{rotate:[-2,2,-2]},transition:Je(t)||{duration:4,repeat:1/0,ease:"easeInOut"},whileHover:t?{}:{scale:1.15,rotate:15,filter:"brightness(1.3)"},children:[s.jsx(ae.div,{whileHover:t?{}:{scale:1.2},transition:Je(t)||{duration:.2},style:{filter:"drop-shadow(0 0 20px hsl(var(--primary)))"},children:s.jsx(e.icon,{className:"h-7 w-7 text-primary"})}),s.jsx(ae.div,{className:"absolute inset-0 rounded-xl bg-primary/20 blur-xl",animate:t?{scale:1,opacity:0}:{scale:[1,1.3,1],opacity:[0,.8,0]},transition:Je(t)||{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),s.jsx(me,{className:"text-2xl mb-2",children:e.title}),s.jsx(_e,{className:"text-base mt-2",children:e.description})]}),s.jsx(ue,{className:"flex-grow flex flex-col relative z-10",children:s.jsx("ul",{className:"space-y-2",children:e.benefits.map((r,i)=>s.jsxs("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),r]},i))})})]})},n))})]})})]})},gn=Zf,UM=Yf,Lj=v.forwardRef(({className:t,...e},n)=>s.jsx(Fc,{ref:n,className:Y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Lj.displayName=Fc.displayName;const ln=v.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(UM,{children:[s.jsx(Lj,{}),s.jsxs(zc,{ref:r,className:Y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(eu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Wr,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ln.displayName=zc.displayName;const dn=({className:t,...e})=>s.jsx("div",{className:Y("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});dn.displayName="DialogHeader";const Id=({className:t,...e})=>s.jsx("div",{className:Y("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Id.displayName="DialogFooter";const un=v.forwardRef(({className:t,...e},n)=>s.jsx(Uc,{ref:n,className:Y("text-lg font-semibold leading-none tracking-tight",t),...e}));un.displayName=Uc.displayName;const hn=v.forwardRef(({className:t,...e},n)=>s.jsx(Hc,{ref:n,className:Y("text-sm text-muted-foreground",t),...e}));hn.displayName=Hc.displayName;var Su="Tabs",[HM,v9]=pr(Su,[tu]),Bj=tu(),[VM,Om]=HM(Su),Fj=v.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:l="automatic",...d}=t,u=Vc(c),[h,p]=Dr({prop:r,onChange:i,defaultProp:a??"",caller:Su});return s.jsx(VM,{scope:n,baseId:go(),value:h,onValueChange:p,orientation:o,dir:u,activationMode:l,children:s.jsx(Me.div,{dir:u,"data-orientation":o,...d,ref:e})})});Fj.displayName=Su;var zj="TabsList",Uj=v.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=Om(zj,n),o=Bj(n);return s.jsx(dw,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Me.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});Uj.displayName=zj;var Hj="TabsTrigger",Vj=v.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=Om(Hj,n),c=Bj(n),l=qj(o.baseId,r),d=Kj(o.baseId,r),u=r===o.value;return s.jsx(uw,{asChild:!0,...c,focusable:!i,active:u,children:s.jsx(Me.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...a,ref:e,onMouseDown:Re(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Re(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Re(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});Vj.displayName=Hj;var Gj="TabsContent",Wj=v.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,c=Om(Gj,n),l=qj(c.baseId,r),d=Kj(c.baseId,r),u=r===c.value,h=v.useRef(u);return v.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(ui,{present:i||u,children:({present:p})=>s.jsx(Me.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:p&&a})})});Wj.displayName=Gj;function qj(t,e){return`${t}-trigger-${e}`}function Kj(t,e){return`${t}-content-${e}`}var Yj=Fj,ku=Uj,Cu=Vj,Pu=Wj;const Zj=Yj,$m=v.forwardRef(({className:t,...e},n)=>s.jsx(ku,{ref:n,className:Y("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground relative gap-1",t),...e}));$m.displayName=ku.displayName;const kc=v.forwardRef(({className:t,children:e,...n},r)=>{const i=v.useRef(null),[a,o]=v.useState(!1);return v.useImperativeHandle(r,()=>i.current),v.useEffect(()=>{const c=()=>{i.current&&o(i.current.getAttribute("data-state")==="active")};c();const l=new MutationObserver(c);return i.current&&l.observe(i.current,{attributes:!0,attributeFilter:["data-state"]}),()=>l.disconnect()},[]),s.jsxs(Cu,{ref:i,className:Y("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 relative z-10 flex-1","data-[state=active]:text-foreground","hover:text-foreground/90",t),...n,children:[s.jsx("span",{className:"relative z-10 flex items-center justify-center w-full",children:e}),a&&s.jsx(ae.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",initial:!1,transition:{type:"spring",stiffness:380,damping:30,duration:.4}})]})});kc.displayName=Cu.displayName;const Cc=v.forwardRef(({className:t,...e},n)=>{const[r,i]=v.useState(1),a=v.useRef();return v.useEffect(()=>{if(a.current&&e.value){const o=parseInt(a.current)||0,c=parseInt(e.value)||0;i(c>o?1:-1)}a.current=e.value},[e.value]),s.jsx(J0,{mode:"wait",custom:r,children:s.jsx(Pu,{ref:n,className:Y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e,asChild:!0,children:s.jsx(ae.div,{custom:r,initial:{opacity:0,x:r*20},animate:{opacity:1,x:0},exit:{opacity:0,x:r*-20},transition:{opacity:{duration:.3},x:{duration:.2},ease:"easeInOut"},children:e.children})},e.value)})});Cc.displayName=Pu.displayName;var Lm="Progress",Bm=100,[GM,x9]=pr(Lm),[WM,qM]=GM(Lm),Xj=v.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=KM,...o}=t;(i||i===0)&&!Hx(i)&&console.error(YM(`${i}`,"Progress"));const c=Hx(i)?i:Bm;r!==null&&!Vx(r,c)&&console.error(ZM(`${r}`,"Progress"));const l=Vx(r,c)?r:null,d=Md(l)?a(l,c):void 0;return s.jsx(WM,{scope:n,value:l,max:c,children:s.jsx(Me.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Md(l)?l:void 0,"aria-valuetext":d,role:"progressbar","data-state":e1(l,c),"data-value":l??void 0,"data-max":c,...o,ref:e})})});Xj.displayName=Lm;var Jj="ProgressIndicator",Qj=v.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=qM(Jj,n);return s.jsx(Me.div,{"data-state":e1(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});Qj.displayName=Jj;function KM(t,e){return`${Math.round(t/e*100)}%`}function e1(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Md(t){return typeof t=="number"}function Hx(t){return Md(t)&&!isNaN(t)&&t>0}function Vx(t,e){return Md(t)&&!isNaN(t)&&t<=e&&t>=0}function YM(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Bm}\`.`}function ZM(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Bm} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var t1=Xj,XM=Qj;const or=v.forwardRef(({className:t,value:e,...n},r)=>s.jsx(t1,{ref:r,className:Y("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:s.jsx(XM,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));or.displayName=t1.displayName;async function n1(t,e=1920,n=1920,r=.85,i=500){return new Promise((a,o)=>{const c=new FileReader;c.onload=l=>{var u;const d=new Image;d.onload=()=>{const h=document.createElement("canvas");let p=d.width,f=d.height;if(p>e||f>n){const x=Math.min(e/p,n/f);p=p*x,f=f*x}h.width=p,h.height=f;const m=h.getContext("2d");if(!m){o(new Error("Could not get canvas context"));return}m.drawImage(d,0,0,p,f),h.toBlob(x=>{if(!x){o(new Error("Failed to compress image"));return}x.size>i*1024&&r>.5?h.toBlob(g=>{if(!g){a(new File([x],t.name,{type:t.type}));return}a(new File([g],t.name,{type:t.type}))},t.type,r*.7):a(new File([x],t.name,{type:t.type}))},t.type,r)},d.onerror=()=>o(new Error("Failed to load image")),d.src=(u=l.target)==null?void 0:u.result},c.onerror=()=>o(new Error("Failed to read file")),c.readAsDataURL(t)})}async function r1(t,e=!0){let n=t;if(e&&t.type.startsWith("image/"))try{n=await n1(t)}catch(r){console.warn("Image compression failed, using original:",r)}return new Promise((r,i)=>{const a=new FileReader;a.onload=()=>{const o=a.result,c=o.includes(",")?o.split(",")[1]:o;r(c)},a.onerror=()=>i(new Error("Failed to read file")),a.readAsDataURL(n)})}function s1(t,e=500){return t.size>e*1024&&t.type.startsWith("image/")}const lf=Object.freeze(Object.defineProperty({__proto__:null,compressImage:n1,fileToBase64:r1,shouldCompressImage:s1},Symbol.toStringTag,{value:"Module"})),lp=new Map,JM=6e4;function QM(t,e){const n=lp.get(t);if(n&&Date.now()-n.timestamp<JM)return n.promise;const r=e().finally(()=>{lp.delete(t)});return lp.set(t,{promise:r,timestamp:Date.now()}),r}function eD(t,e){const n=Object.keys(e).sort().map(r=>`${r}:${JSON.stringify(e[r])}`).join("|");return`${t}:${n}`}async function i1(t,e,n){const{deduplicate:r=!0,timeout:i=6e4}=n||{},a=async()=>{var o;try{const c=new AbortController,l=setTimeout(()=>c.abort(),i),{data:d,error:u}=await X.functions.invoke(t,{body:e,signal:c.signal});return clearTimeout(l),u?{error:{message:u.message||"Unknown error",code:(o=u.status)==null?void 0:o.toString()}}:{data:d}}catch(c){return c instanceof Error&&c.name==="AbortError"?{error:{message:"Request timeout",code:"TIMEOUT"}}:{error:{message:c instanceof Error?c.message:"Unknown error"}}}};if(r){const o=eD(t,e);return QM(o,a)}return a()}const Fm=Object.freeze(Object.defineProperty({__proto__:null,invokeFunction:i1},Symbol.toStringTag,{value:"Module"})),a1=()=>{const t=tr(),[e,n]=v.useState(!1),[r,i]=v.useState(!1),[a,o]=v.useState(null),[c,l]=v.useState(!1),[d,u]=v.useState(null),[h,p]=v.useState("bpmn"),[f,m]=v.useState(0),[x,g]=v.useState(""),[w,y]=v.useState(null);v.useEffect(()=>{if(!d)return;let k;const P=async()=>{const{data:R,error:M}=await X.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",d).single();if(M){console.error("Error checking job status:",M);return}if(console.log("Job status:",R.status),R.status==="completed"&&R.bpmn_xml){const K=h==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(K,R.bpmn_xml),localStorage.setItem("diagramType",h);const F=h==="bpmn"?"BPMN":"P&ID";m(100),g("Complete!");const te=h==="bpmn"?"/bpmn-generator":"/pid-generator";S.success(`${F} diagram generated successfully!`,{description:"Redirecting to editor..."}),setTimeout(()=>{fn(t,te)},1e3),i(!1),o(null),l(!1),u(null),y(null),k&&clearInterval(k)}else if(R.status==="failed"){const K=R.error_message||"Please try again";y(K),S.error("Upload failed  retry or contact support",{description:K,action:{label:"Retry",onClick:()=>{y(null),a&&N()}},duration:1e4}),l(!1),u(null),m(0),g(""),k&&clearInterval(k)}},T=X.channel(`job-${d}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${d}`},R=>{const M=R.new;if(console.log("Realtime job status update:",M.status),M.status==="completed"&&M.bpmn_xml){const K=h==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(K,M.bpmn_xml),localStorage.setItem("diagramType",h);const F=h==="bpmn"?"BPMN":"P&ID";m(100),g("Complete!");const te=h==="bpmn"?"/bpmn-generator":"/pid-generator";S.success(`${F} diagram generated successfully!`,{description:"Redirecting to editor..."}),setTimeout(()=>{fn(t,te)},1e3),i(!1),o(null),l(!1),u(null),y(null),k&&clearInterval(k)}else if(M.status==="failed"){const K=M.error_message||"Please try again";y(K),S.error("Upload failed  retry or contact support",{description:K,action:{label:"Retry",onClick:()=>{y(null),a&&N()}},duration:1e4}),l(!1),u(null),m(0),g(""),k&&clearInterval(k)}}).subscribe();k=window.setInterval(P,3e3),P();const L=window.setTimeout(()=>{k&&clearInterval(k);const R="Processing timed out - Please try refreshing the page or contact support";y(R),m(0),g(""),S.error("Upload failed  retry or contact support",{description:R,action:{label:"Retry",onClick:()=>{y(null),a&&N()}},duration:1e4}),l(!1),u(null)},3e5);return()=>{clearTimeout(L),X.removeChannel(T),k&&clearInterval(k)}},[d,h,a]);const b=()=>{n(!0)},j=()=>{n(!1),i(!0)},C=k=>{var T;const P=(T=k.target.files)==null?void 0:T[0];if(P){if(P.size>209715200){S.error("File too large",{description:"Maximum file size is 200 MB. Please select a smaller file."}),k.target.value="";return}o(P),y(null),m(10),g("File selected, ready to upload...")}},N=async()=>{if(c)return;if(!a){S.error("Please select a file");return}l(!0),y(null),m(10),g("Analyzing frame 1 of 20...");const k=S.loading("Processing your file...",{description:"This may take 30-60 seconds for complex diagrams"});try{const{data:{user:P},error:T}=await X.auth.getUser();if(!P||T){S.dismiss(k);const F=(T==null?void 0:T.message)||"Please log in to use this feature";y(F),S.error("Upload failed  retry or contact support",{description:F,action:{label:"Retry",onClick:()=>{y(null),N()}},duration:1e4}),l(!1),m(0),g(""),fn(t,"/auth");return}let L=a;if(s1(a)){S.info("Compressing image for faster upload...");try{const{compressImage:F}=await Ar(async()=>{const{compressImage:te}=await Promise.resolve().then(()=>lf);return{compressImage:te}},void 0);L=await F(a)}catch(F){console.warn("Image compression failed, using original:",F)}}const R=await r1(L,!1),M=`data:${L.type};base64,${R}`;S.dismiss(k),m(20),g("Uploading file...");const K=S.loading("Starting diagram generation...",{description:"This will continue in the background"});try{const{data:F,error:te}=await i1("vision-to-bpmn",{imageBase64:M,diagramType:h},{deduplicate:!0});if(S.dismiss(K),te){const oe=te.message||"Failed to start diagram generation";y(oe),m(0),g(""),S.error("Upload failed  retry or contact support",{description:oe,action:{label:"Retry",onClick:()=>{y(null),N()}},duration:1e4}),l(!1);return}if(!F||!F.jobId){const oe="Failed to start processing";y(oe),m(0),g(""),S.error("Upload failed  retry or contact support",{description:oe,action:{label:"Retry",onClick:()=>{y(null),N()}},duration:1e4}),l(!1);return}u(F.jobId),m(30),g("Processing started, analyzing frames..."),S.info("Processing started",{description:"We'll notify you when your diagram is ready (this may take 1-2 minutes)"})}catch{const te="Network error - Please check your connection and try again";y(te),m(0),g(""),S.dismiss(K),S.error("Upload failed  retry or contact support",{description:te,action:{label:"Retry",onClick:()=>{y(null),N()}},duration:1e4}),l(!1)}}catch(P){const T=P instanceof Error?P.message:"Failed to generate diagram";y(T),m(0),g(""),S.dismiss(k),S.error("Upload failed  retry or contact support",{description:T,action:{label:"Retry",onClick:()=>{y(null),N()}},duration:1e4}),l(!1)}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{}),s.jsx("main",{className:"pt-24 pb-20",children:s.jsxs("div",{className:"container mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary/10 mb-6",children:s.jsx(Ns,{className:"h-10 w-10 text-primary"})}),s.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Vision ",s.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"AI"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"See what computers see. Our advanced vision AI technology enables your automation to understand and process visual information just like humans do."})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mb-20",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Self-Learning Vision System"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"Our Vision AI continuously learns and adapts to your specific use cases, improving accuracy and performance over time without manual intervention."}),s.jsxs("ul",{className:"space-y-4",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(tP,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Real-time Processing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Process images and video streams in real-time with minimal latency"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(PP,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Object Detection"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Identify and track multiple objects across frames"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(Yi,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Image Classification"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically categorize and tag visual content"})]})]})]}),s.jsx(I,{size:"lg",className:"mt-6",onClick:b,children:"Start Free Trial"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-accent/10 rounded-2xl p-12 text-center",children:[s.jsx(Ns,{className:"h-32 w-32 mx-auto text-primary mb-6"}),s.jsx("h3",{className:"text-xl font-bold mb-4",children:"100% Client-Side Processing"}),s.jsx("p",{className:"text-muted-foreground",children:"All vision processing happens on your device. Your data never leaves your control, ensuring maximum privacy and security."})]})]}),s.jsxs("div",{className:"bg-hero-bg text-hero-foreground rounded-2xl p-12 text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to See the Future?"}),s.jsx("p",{className:"text-xl text-hero-foreground/80 mb-8 max-w-2xl mx-auto",children:"Join thousands of companies already using ProssMind Vision AI to transform their automation workflows"}),s.jsx(I,{size:"lg",variant:"secondary",className:"text-lg px-8",onClick:b,children:"Get Started Now"})]})]})}),s.jsx(gn,{open:e,onOpenChange:n,children:s.jsxs(ln,{className:"max-w-4xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"See Vision AI in Action"}),s.jsx(hn,{children:"Watch how Vision AI transforms handwritten notes, whiteboard diagrams, and process sketches into professional BPMN diagrams"})]}),s.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:s.jsx("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/gvwvmUy_wrw",title:"BPMN Process Modeling Demo",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded-lg"})}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(I,{variant:"outline",onClick:j,children:"Skip Demo"}),s.jsx(I,{onClick:j,children:"Try It Now"})]})]})}),s.jsx(gn,{open:r,onOpenChange:i,children:s.jsxs(ln,{className:"max-w-2xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Upload Your Process"}),s.jsx(hn,{children:"Upload handwritten notes, whiteboard images, process documents, or text files to generate a diagram"})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs(Zj,{value:h,onValueChange:k=>p(k),className:"w-full",children:[s.jsxs($m,{className:"grid w-full grid-cols-2",children:[s.jsx(kc,{value:"bpmn",children:"BPMN Diagram"}),s.jsx(kc,{value:"pid",children:"P&ID Diagram"})]}),s.jsxs(Cc,{value:"bpmn",className:"mt-6 space-y-6",children:[s.jsxs("div",{className:"bg-card border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:[s.jsx("input",{type:"file",accept:"image/*,.pdf,.doc,.docx,.txt,video/*",onChange:C,className:"hidden",id:"file-upload",disabled:c}),s.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(dx,{className:"w-8 h-8 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-semibold mb-1",children:a?a.name:"Drop or record your process video"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Images, PDF, Word documents, text files, or videos"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"MP4/MOV  200 MB"})]})]}),c&&f>0&&s.jsxs("div",{className:"mt-6 space-y-2",children:[s.jsx(or,{value:f,className:"w-full"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:x})]}),w&&s.jsx("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:s.jsx("p",{className:"text-sm text-destructive",children:w})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[s.jsx(Yi,{className:"w-8 h-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Images"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"JPG, PNG, WEBP"})]}),s.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[s.jsx(Qt,{className:"w-8 h-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Documents"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"PDF, DOC, DOCX"})]}),s.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[s.jsx(Qt,{className:"w-8 h-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Text"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"TXT files"})]})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(I,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(I,{onClick:N,disabled:!a||c,children:c?"Generating...":"Generate BPMN"})]})]}),s.jsxs(Cc,{value:"pid",className:"mt-6 space-y-6",children:[s.jsxs("div",{className:"bg-card border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:[s.jsx("input",{type:"file",accept:"image/*,.pdf,.doc,.docx,.txt,video/*",onChange:C,className:"hidden",id:"file-upload-pid",disabled:c}),s.jsxs("label",{htmlFor:"file-upload-pid",className:"cursor-pointer flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(dx,{className:"w-8 h-8 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-semibold mb-1",children:a?a.name:"Drop or record your process video"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Images, PDF, Word documents, text files, or videos"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"MP4/MOV  200 MB"})]})]}),c&&f>0&&s.jsxs("div",{className:"mt-6 space-y-2",children:[s.jsx(or,{value:f,className:"w-full"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:x})]}),w&&s.jsx("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:s.jsx("p",{className:"text-sm text-destructive",children:w})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[s.jsx(Yi,{className:"w-8 h-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Images"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"JPG, PNG, WEBP"})]}),s.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[s.jsx(Qt,{className:"w-8 h-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Documents"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"PDF, DOC, DOCX"})]}),s.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[s.jsx(Qt,{className:"w-8 h-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Text"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"TXT files"})]})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(I,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(I,{onClick:N,disabled:!a||c,children:c?"Generating...":"Generate P&ID"})]})]})]})})]})})]})},tD=()=>s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{}),s.jsx("main",{className:"pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Simple, ",s.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Transparent"})," Pricing"]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Choose the plan that fits your needs. All plans include our core automation features."})]}),s.jsx(Rm,{}),s.jsxs("div",{className:"mt-20 bg-muted/30 rounded-2xl p-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"All Plans Include"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ar,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"99.9% Uptime SLA"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Reliable service you can count on"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ar,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"24/7 Support"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Help whenever you need it"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ar,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Free Updates"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Always get the latest features"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ar,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Data Encryption"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Bank-level security for your data"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ar,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"API Access"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Integrate with your tools"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ar,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"No Hidden Fees"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"What you see is what you pay"})]})]})]})]})]})})]}),Rt=v.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:Y("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-ring focus-visible:shadow-[0_0_0_1px_hsl(var(--ring)),0_0_8px_hsl(var(--ring)/0.3)] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Rt.displayName="Input";var o1={exports:{}},c1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ro=v;function nD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rD=typeof Object.is=="function"?Object.is:nD,sD=ro.useState,iD=ro.useEffect,aD=ro.useLayoutEffect,oD=ro.useDebugValue;function cD(t,e){var n=e(),r=sD({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return aD(function(){i.value=n,i.getSnapshot=e,dp(i)&&a({inst:i})},[t,n,e]),iD(function(){return dp(i)&&a({inst:i}),t(function(){dp(i)&&a({inst:i})})},[t]),oD(n),n}function dp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rD(t,n)}catch{return!0}}function lD(t,e){return e()}var dD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lD:cD;c1.useSyncExternalStore=ro.useSyncExternalStore!==void 0?ro.useSyncExternalStore:dD;o1.exports=c1;var uD=o1.exports;function hD(){return uD.useSyncExternalStore(pD,()=>!0,()=>!1)}function pD(){return()=>{}}var zm="Avatar",[fD,y9]=pr(zm),[mD,l1]=fD(zm),d1=v.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,a]=v.useState("idle");return s.jsx(mD,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(Me.span,{...r,ref:e})})});d1.displayName=zm;var u1="AvatarImage",h1=v.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=l1(u1,n),c=gD(r,a),l=Zn(d=>{i(d),o.onImageLoadingStatusChange(d)});return Hn(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?s.jsx(Me.img,{...a,ref:e,src:r}):null});h1.displayName=u1;var p1="AvatarFallback",f1=v.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,a=l1(p1,n),[o,c]=v.useState(r===void 0);return v.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(Me.span,{...i,ref:e}):null});f1.displayName=p1;function Gx(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function gD(t,{referrerPolicy:e,crossOrigin:n}){const r=hD(),i=v.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,c]=v.useState(()=>Gx(a,t));return Hn(()=>{c(Gx(a,t))},[a,t]),Hn(()=>{const l=h=>()=>{c(h)};if(!a)return;const d=l("loaded"),u=l("error");return a.addEventListener("load",d),a.addEventListener("error",u),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",u)}},[a,n,e]),o}var m1=d1,g1=h1,v1=f1;const x1=v.forwardRef(({className:t,...e},n)=>s.jsx(m1,{ref:n,className:Y("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));x1.displayName=m1.displayName;const y1=v.forwardRef(({className:t,...e},n)=>s.jsx(g1,{ref:n,className:Y("aspect-square h-full w-full object-cover",t),...e}));y1.displayName=g1.displayName;const b1=v.forwardRef(({className:t,...e},n)=>s.jsx(v1,{ref:n,className:Y("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));b1.displayName=v1.displayName;const vD=[{name:"Mayank Sharma",role:"CEO & Founder",description:"Finance and digital transformation leader driving data-powered, innovative tech solutions.",image:"/mayank.png",initials:"MS"},{name:"Satyam Pant",role:"Cofounder & AI Solutions",description:"Tech innovator specializing in AI-driven business process solutions.",image:"/satyam.jpeg",initials:"SP"},{name:"Divyam Pant",role:"CTO & Head of Product",description:"Product strategist focused on creating intuitive workflow automation tools.",image:"/divyam.jpeg",initials:"DP"},{name:"Sahil Pandey",role:"DevOps Engineer",description:"Full-stack engineer passionate about building scalable BPMN solutions.",image:"/sahil.jpeg",initials:"SP"}],xD=()=>{const[t,e]=v.useState({name:"",email:"",subject:"",message:""}),n=r=>{r.preventDefault(),S.success("Message sent! We'll get back to you soon."),e({name:"",email:"",subject:"",message:""})};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{}),s.jsx("main",{className:"pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Get in"," ",s.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Touch"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Have questions? We'd love to hear from you. Send us a message and we'll respond as soon as possible."})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[s.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.02] hover:-translate-y-1",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-all duration-300",children:s.jsx(pm,{className:"h-6 w-6 text-primary"})}),s.jsx("h3",{className:"font-semibold mb-2",children:"Email Us"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"info@prossmind.com"})]}),s.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.02] hover:-translate-y-1",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-all duration-300",children:s.jsx(EP,{className:"h-6 w-6 text-primary"})}),s.jsx("h3",{className:"font-semibold mb-2",children:"Call Us"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"+41 78 330 79 67"})]}),s.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.02] hover:-translate-y-1",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-all duration-300",children:s.jsx(fm,{className:"h-6 w-6 text-primary"})}),s.jsx("h3",{className:"font-semibold mb-2",children:"Live Chat"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Available 24/7"})]})]}),s.jsxs("div",{className:"mb-16",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Meet Our"," ",s.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Team"})]}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"The passionate people behind ProssMind"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:vD.map(r=>s.jsx(re,{className:"text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.03] hover:-translate-y-2",children:s.jsxs(ue,{className:"pt-6 pb-6",children:[s.jsxs(x1,{className:"w-24 h-24 mx-auto mb-4 transition-all duration-300",children:[s.jsx(y1,{src:r.image,alt:r.name}),s.jsx(b1,{className:"bg-primary/10 text-primary text-xl",children:r.initials})]}),s.jsx("h3",{className:"font-semibold text-lg mb-1",children:r.name}),s.jsx("p",{className:"text-sm text-primary mb-3",children:r.role}),s.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r.description})]})},r.name))})]}),s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("form",{onSubmit:n,className:"bg-card border border-border rounded-2xl p-8 space-y-6 transition-all duration-300 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] hover:shadow-blue-500/30",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"Name"}),s.jsx(Rt,{id:"name",value:t.name,onChange:r=>e({...t,name:r.target.value}),placeholder:"Your name",className:"transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),s.jsx(Rt,{id:"email",type:"email",value:t.email,onChange:r=>e({...t,email:r.target.value}),placeholder:"your@email.com",className:"transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"subject",className:"text-sm font-medium",children:"Subject"}),s.jsx(Rt,{id:"subject",value:t.subject,onChange:r=>e({...t,subject:r.target.value}),placeholder:"How can we help?",className:"transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"message",className:"text-sm font-medium",children:"Message"}),s.jsx(Jn,{id:"message",value:t.message,onChange:r=>e({...t,message:r.target.value}),placeholder:"Tell us more about your inquiry...",className:"min-h-[150px] transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]}),s.jsx(I,{type:"submit",size:"lg",className:"w-full transition-all duration-300 hover:shadow-[0_0_20px_rgba(59,130,246,0.6)] hover:shadow-blue-500/60 hover:scale-[1.02]",children:"Send Message"})]})})]})})]})};var yD="Label",w1=v.forwardRef((t,e)=>s.jsx(Me.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));w1.displayName=yD;var _1=w1;const bD=vo("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ke=v.forwardRef(({className:t,...e},n)=>s.jsx(_1,{ref:n,className:Y(bD(),t),...e}));Ke.displayName=_1.displayName;const Um=Yj,Tu=v.forwardRef(({className:t,...e},n)=>s.jsx(ku,{ref:n,className:Y("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Tu.displayName=ku.displayName;const vs=v.forwardRef(({className:t,...e},n)=>s.jsx(Cu,{ref:n,className:Y("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));vs.displayName=Cu.displayName;const xs=v.forwardRef(({className:t,...e},n)=>s.jsx(Pu,{ref:n,className:Y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));xs.displayName=Pu.displayName;var vt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of a)o[c]=i[c];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(vt||(vt={}));var Wx;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Wx||(Wx={}));const ye=vt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xs=t=>{switch(typeof t){case"undefined":return ye.undefined;case"string":return ye.string;case"number":return Number.isNaN(t)?ye.nan:ye.number;case"boolean":return ye.boolean;case"function":return ye.function;case"bigint":return ye.bigint;case"symbol":return ye.symbol;case"object":return Array.isArray(t)?ye.array:t===null?ye.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ye.promise:typeof Map<"u"&&t instanceof Map?ye.map:typeof Set<"u"&&t instanceof Set?ye.set:typeof Date<"u"&&t instanceof Date?ye.date:ye.object;default:return ye.unknown}},J=vt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ks extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let c=r,l=0;for(;l<o.path.length;){const d=o.path[l];l===o.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(n(o))):c[d]=c[d]||{_errors:[]},c=c[d],l++}}};return i(this),r}static assert(e){if(!(e instanceof ks))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,vt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ks.create=t=>new ks(t);const df=(t,e)=>{let n;switch(t.code){case J.invalid_type:t.received===ye.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case J.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,vt.jsonStringifyReplacer)}`;break;case J.unrecognized_keys:n=`Unrecognized key(s) in object: ${vt.joinValues(t.keys,", ")}`;break;case J.invalid_union:n="Invalid input";break;case J.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${vt.joinValues(t.options)}`;break;case J.invalid_enum_value:n=`Invalid enum value. Expected ${vt.joinValues(t.options)}, received '${t.received}'`;break;case J.invalid_arguments:n="Invalid function arguments";break;case J.invalid_return_type:n="Invalid function return type";break;case J.invalid_date:n="Invalid date";break;case J.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:vt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case J.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case J.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case J.custom:n="Invalid input";break;case J.invalid_intersection_types:n="Intersection results could not be merged";break;case J.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case J.not_finite:n="Number must be finite";break;default:n=e.defaultError,vt.assertNever(t)}return{message:n}};let wD=df;function _D(){return wD}const jD=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const l=r.filter(d=>!!d).slice().reverse();for(const d of l)c=d(o,{data:e,defaultError:c}).message;return{...i,path:a,message:c}};function he(t,e){const n=_D(),r=jD({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===df?void 0:df].filter(i=>!!i)});t.common.issues.push(r)}class er{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Be;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return er.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Be;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Be=Object.freeze({status:"aborted"}),sc=t=>({status:"dirty",value:t}),mr=t=>({status:"valid",value:t}),qx=t=>t.status==="aborted",Kx=t=>t.status==="dirty",so=t=>t.status==="valid",Dd=t=>typeof Promise<"u"&&t instanceof Promise;var we;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(we||(we={}));class li{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Yx=(t,e)=>{if(so(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ks(t.common.issues);return this._error=n,this._error}}};function st(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,c)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??c.defaultError}:typeof c.data>"u"?{message:l??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:l??n??c.defaultError}},description:i}}class mt{get description(){return this._def.description}_getType(e){return Xs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Xs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new er,ctx:{common:e.parent.common,data:e.data,parsedType:Xs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Dd(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xs(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Yx(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xs(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return so(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>so(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xs(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(Dd(i)?i:Promise.resolve(i));return Yx(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),c=()=>a.addIssue({code:J.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new ao({schema:this,typeName:Fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return oi.create(this,this._def)}nullable(){return oo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Kr.create(this)}promise(){return Bd.create(this,this._def)}or(e){return $d.create([this,e],this._def)}and(e){return Ld.create(this,e,this._def)}transform(e){return new ao({...st(this._def),schema:this,typeName:Fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new hf({...st(this._def),innerType:this,defaultValue:n,typeName:Fe.ZodDefault})}brand(){return new WD({typeName:Fe.ZodBranded,type:this,...st(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new pf({...st(this._def),innerType:this,catchValue:n,typeName:Fe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Hm.create(this,e)}readonly(){return ff.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ED=/^c[^\s-]{8,}$/i,ND=/^[0-9a-z]+$/,SD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CD=/^[a-z0-9_-]{21}$/i,PD=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,TD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,RD=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,AD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let up;const ID=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,DD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,OD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$D=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,LD=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,j1="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",BD=new RegExp(`^${j1}$`);function E1(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function FD(t){return new RegExp(`^${E1(t)}$`)}function zD(t){let e=`${j1}T${E1(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function UD(t,e){return!!((e==="v4"||!e)&&ID.test(t)||(e==="v6"||!e)&&DD.test(t))}function HD(t,e){if(!PD.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function VD(t,e){return!!((e==="v4"||!e)&&MD.test(t)||(e==="v6"||!e)&&OD.test(t))}class ai extends mt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ye.string){const a=this._getOrReturnCtx(e);return he(a,{code:J.invalid_type,expected:ye.string,received:a.parsedType}),Be}const r=new er;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),he(i,{code:J.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),he(i,{code:J.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,c=e.data.length<a.value;(o||c)&&(i=this._getOrReturnCtx(e,i),o?he(i,{code:J.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&he(i,{code:J.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")RD.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"email",code:J.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")up||(up=new RegExp(AD,"u")),up.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"emoji",code:J.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")kD.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"uuid",code:J.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")CD.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"nanoid",code:J.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")ED.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"cuid",code:J.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")ND.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"cuid2",code:J.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")SD.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"ulid",code:J.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),he(i,{validation:"url",code:J.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"regex",code:J.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),he(i,{code:J.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),he(i,{code:J.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),he(i,{code:J.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?zD(a).test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{code:J.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?BD.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{code:J.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?FD(a).test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{code:J.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?TD.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"duration",code:J.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?UD(e.data,a.version)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"ip",code:J.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?HD(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"jwt",code:J.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?VD(e.data,a.version)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"cidr",code:J.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?$D.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"base64",code:J.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?LD.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"base64url",code:J.invalid_string,message:a.message}),r.dirty()):vt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:J.invalid_string,...we.errToObj(r)})}_addCheck(e){return new ai({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...we.errToObj(e)})}url(e){return this._addCheck({kind:"url",...we.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...we.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...we.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...we.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...we.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...we.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...we.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...we.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...we.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...we.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...we.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...we.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...we.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...we.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...we.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...we.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...we.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...we.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...we.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...we.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...we.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...we.errToObj(n)})}nonempty(e){return this.min(1,we.errToObj(e))}trim(){return new ai({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ai({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ai({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ai.create=t=>new ai({checks:[],typeName:Fe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...st(t)});function GD(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class Pc extends mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ye.number){const a=this._getOrReturnCtx(e);return he(a,{code:J.invalid_type,expected:ye.number,received:a.parsedType}),Be}let r;const i=new er;for(const a of this._def.checks)a.kind==="int"?vt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),he(r,{code:J.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),he(r,{code:J.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),he(r,{code:J.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?GD(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),he(r,{code:J.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),he(r,{code:J.not_finite,message:a.message}),i.dirty()):vt.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,we.toString(n))}gt(e,n){return this.setLimit("min",e,!1,we.toString(n))}lte(e,n){return this.setLimit("max",e,!0,we.toString(n))}lt(e,n){return this.setLimit("max",e,!1,we.toString(n))}setLimit(e,n,r,i){return new Pc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:we.toString(i)}]})}_addCheck(e){return new Pc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:we.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:we.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:we.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:we.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:we.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:we.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:we.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:we.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:we.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&vt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Pc.create=t=>new Pc({checks:[],typeName:Fe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class Tc extends mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ye.bigint)return this._getInvalidInput(e);let r;const i=new er;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),he(r,{code:J.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),he(r,{code:J.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),he(r,{code:J.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):vt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return he(n,{code:J.invalid_type,expected:ye.bigint,received:n.parsedType}),Be}gte(e,n){return this.setLimit("min",e,!0,we.toString(n))}gt(e,n){return this.setLimit("min",e,!1,we.toString(n))}lte(e,n){return this.setLimit("max",e,!0,we.toString(n))}lt(e,n){return this.setLimit("max",e,!1,we.toString(n))}setLimit(e,n,r,i){return new Tc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:we.toString(i)}]})}_addCheck(e){return new Tc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:we.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:we.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:we.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:we.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:we.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Tc.create=t=>new Tc({checks:[],typeName:Fe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...st(t)});class Zx extends mt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ye.boolean){const r=this._getOrReturnCtx(e);return he(r,{code:J.invalid_type,expected:ye.boolean,received:r.parsedType}),Be}return mr(e.data)}}Zx.create=t=>new Zx({typeName:Fe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class Od extends mt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ye.date){const a=this._getOrReturnCtx(e);return he(a,{code:J.invalid_type,expected:ye.date,received:a.parsedType}),Be}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return he(a,{code:J.invalid_date}),Be}const r=new er;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),he(i,{code:J.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),he(i,{code:J.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):vt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Od({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:we.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:we.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Od.create=t=>new Od({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Fe.ZodDate,...st(t)});class Xx extends mt{_parse(e){if(this._getType(e)!==ye.symbol){const r=this._getOrReturnCtx(e);return he(r,{code:J.invalid_type,expected:ye.symbol,received:r.parsedType}),Be}return mr(e.data)}}Xx.create=t=>new Xx({typeName:Fe.ZodSymbol,...st(t)});class Jx extends mt{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return he(r,{code:J.invalid_type,expected:ye.undefined,received:r.parsedType}),Be}return mr(e.data)}}Jx.create=t=>new Jx({typeName:Fe.ZodUndefined,...st(t)});class Qx extends mt{_parse(e){if(this._getType(e)!==ye.null){const r=this._getOrReturnCtx(e);return he(r,{code:J.invalid_type,expected:ye.null,received:r.parsedType}),Be}return mr(e.data)}}Qx.create=t=>new Qx({typeName:Fe.ZodNull,...st(t)});class ey extends mt{constructor(){super(...arguments),this._any=!0}_parse(e){return mr(e.data)}}ey.create=t=>new ey({typeName:Fe.ZodAny,...st(t)});class ty extends mt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return mr(e.data)}}ty.create=t=>new ty({typeName:Fe.ZodUnknown,...st(t)});class di extends mt{_parse(e){const n=this._getOrReturnCtx(e);return he(n,{code:J.invalid_type,expected:ye.never,received:n.parsedType}),Be}}di.create=t=>new di({typeName:Fe.ZodNever,...st(t)});class ny extends mt{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return he(r,{code:J.invalid_type,expected:ye.void,received:r.parsedType}),Be}return mr(e.data)}}ny.create=t=>new ny({typeName:Fe.ZodVoid,...st(t)});class Kr extends mt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ye.array)return he(n,{code:J.invalid_type,expected:ye.array,received:n.parsedType}),Be;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,c=n.data.length<i.exactLength.value;(o||c)&&(he(n,{code:o?J.too_big:J.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(he(n,{code:J.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(he(n,{code:J.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,c)=>i.type._parseAsync(new li(n,o,n.path,c)))).then(o=>er.mergeArray(r,o));const a=[...n.data].map((o,c)=>i.type._parseSync(new li(n,o,n.path,c)));return er.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Kr({...this._def,minLength:{value:e,message:we.toString(n)}})}max(e,n){return new Kr({...this._def,maxLength:{value:e,message:we.toString(n)}})}length(e,n){return new Kr({...this._def,exactLength:{value:e,message:we.toString(n)}})}nonempty(e){return this.min(1,e)}}Kr.create=(t,e)=>new Kr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Fe.ZodArray,...st(e)});function Aa(t){if(t instanceof Wt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=oi.create(Aa(r))}return new Wt({...t._def,shape:()=>e})}else return t instanceof Kr?new Kr({...t._def,type:Aa(t.element)}):t instanceof oi?oi.create(Aa(t.unwrap())):t instanceof oo?oo.create(Aa(t.unwrap())):t instanceof ea?ea.create(t.items.map(e=>Aa(e))):t}class Wt extends mt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=vt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ye.object){const d=this._getOrReturnCtx(e);return he(d,{code:J.invalid_type,expected:ye.object,received:d.parsedType}),Be}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof di&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||c.push(d);const l=[];for(const d of o){const u=a[d],h=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new li(i,h,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof di){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of c)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(d==="strict")c.length>0&&(he(i,{code:J.unrecognized_keys,keys:c}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of c){const h=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new li(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of l){const h=await u.key,p=await u.value;d.push({key:h,value:p,alwaysSet:u.alwaysSet})}return d}).then(d=>er.mergeObjectSync(r,d)):er.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return we.errToObj,new Wt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:we.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Wt({...this._def,unknownKeys:"strip"})}passthrough(){return new Wt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Wt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Wt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Fe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Wt({...this._def,catchall:e})}pick(e){const n={};for(const r of vt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Wt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of vt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Wt({...this._def,shape:()=>n})}deepPartial(){return Aa(this)}partial(e){const n={};for(const r of vt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Wt({...this._def,shape:()=>n})}required(e){const n={};for(const r of vt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof oi;)a=a._def.innerType;n[r]=a}return new Wt({...this._def,shape:()=>n})}keyof(){return N1(vt.objectKeys(this.shape))}}Wt.create=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strip",catchall:di.create(),typeName:Fe.ZodObject,...st(e)});Wt.strictCreate=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strict",catchall:di.create(),typeName:Fe.ZodObject,...st(e)});Wt.lazycreate=(t,e)=>new Wt({shape:t,unknownKeys:"strip",catchall:di.create(),typeName:Fe.ZodObject,...st(e)});class $d extends mt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const o=a.map(c=>new ks(c.ctx.common.issues));return he(n,{code:J.invalid_union,unionErrors:o}),Be}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const l of r){const d={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const c=o.map(l=>new ks(l));return he(n,{code:J.invalid_union,unionErrors:c}),Be}}get options(){return this._def.options}}$d.create=(t,e)=>new $d({options:t,typeName:Fe.ZodUnion,...st(e)});function uf(t,e){const n=Xs(t),r=Xs(e);if(t===e)return{valid:!0,data:t};if(n===ye.object&&r===ye.object){const i=vt.objectKeys(e),a=vt.objectKeys(t).filter(c=>i.indexOf(c)!==-1),o={...t,...e};for(const c of a){const l=uf(t[c],e[c]);if(!l.valid)return{valid:!1};o[c]=l.data}return{valid:!0,data:o}}else if(n===ye.array&&r===ye.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],c=e[a],l=uf(o,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ye.date&&r===ye.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ld extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(qx(a)||qx(o))return Be;const c=uf(a.value,o.value);return c.valid?((Kx(a)||Kx(o))&&n.dirty(),{status:n.value,value:c.data}):(he(r,{code:J.invalid_intersection_types}),Be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ld.create=(t,e,n)=>new Ld({left:t,right:e,typeName:Fe.ZodIntersection,...st(n)});class ea extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.array)return he(r,{code:J.invalid_type,expected:ye.array,received:r.parsedType}),Be;if(r.data.length<this._def.items.length)return he(r,{code:J.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&r.data.length>this._def.items.length&&(he(r,{code:J.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,c)=>{const l=this._def.items[c]||this._def.rest;return l?l._parse(new li(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>er.mergeArray(n,o)):er.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new ea({...this._def,rest:e})}}ea.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ea({items:t,typeName:Fe.ZodTuple,rest:null,...st(e)})};class ry extends mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.map)return he(r,{code:J.invalid_type,expected:ye.map,received:r.parsedType}),Be;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([c,l],d)=>({key:i._parse(new li(r,c,r.path,[d,"key"])),value:a._parse(new li(r,l,r.path,[d,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const l of o){const d=await l.key,u=await l.value;if(d.status==="aborted"||u.status==="aborted")return Be;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),c.set(d.value,u.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const l of o){const d=l.key,u=l.value;if(d.status==="aborted"||u.status==="aborted")return Be;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),c.set(d.value,u.value)}return{status:n.value,value:c}}}}ry.create=(t,e,n)=>new ry({valueType:e,keyType:t,typeName:Fe.ZodMap,...st(n)});class Rc extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.set)return he(r,{code:J.invalid_type,expected:ye.set,received:r.parsedType}),Be;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(he(r,{code:J.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(he(r,{code:J.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(l){const d=new Set;for(const u of l){if(u.status==="aborted")return Be;u.status==="dirty"&&n.dirty(),d.add(u.value)}return{status:n.value,value:d}}const c=[...r.data.values()].map((l,d)=>a._parse(new li(r,l,r.path,d)));return r.common.async?Promise.all(c).then(l=>o(l)):o(c)}min(e,n){return new Rc({...this._def,minSize:{value:e,message:we.toString(n)}})}max(e,n){return new Rc({...this._def,maxSize:{value:e,message:we.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Rc.create=(t,e)=>new Rc({valueType:t,minSize:null,maxSize:null,typeName:Fe.ZodSet,...st(e)});class sy extends mt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}sy.create=(t,e)=>new sy({getter:t,typeName:Fe.ZodLazy,...st(e)});class iy extends mt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return he(n,{received:n.data,code:J.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}iy.create=(t,e)=>new iy({value:t,typeName:Fe.ZodLiteral,...st(e)});function N1(t,e){return new io({values:t,typeName:Fe.ZodEnum,...st(e)})}class io extends mt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return he(n,{expected:vt.joinValues(r),received:n.parsedType,code:J.invalid_type}),Be}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return he(n,{received:n.data,code:J.invalid_enum_value,options:r}),Be}return mr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return io.create(e,{...this._def,...n})}exclude(e,n=this._def){return io.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}io.create=N1;class ay extends mt{_parse(e){const n=vt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ye.string&&r.parsedType!==ye.number){const i=vt.objectValues(n);return he(r,{expected:vt.joinValues(i),received:r.parsedType,code:J.invalid_type}),Be}if(this._cache||(this._cache=new Set(vt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=vt.objectValues(n);return he(r,{received:r.data,code:J.invalid_enum_value,options:i}),Be}return mr(e.data)}get enum(){return this._def.values}}ay.create=(t,e)=>new ay({values:t,typeName:Fe.ZodNativeEnum,...st(e)});class Bd extends mt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.promise&&n.common.async===!1)return he(n,{code:J.invalid_type,expected:ye.promise,received:n.parsedType}),Be;const r=n.parsedType===ye.promise?n.data:Promise.resolve(n.data);return mr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Bd.create=(t,e)=>new Bd({type:t,typeName:Fe.ZodPromise,...st(e)});class ao extends mt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{he(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async c=>{if(n.value==="aborted")return Be;const l=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return l.status==="aborted"?Be:l.status==="dirty"||n.value==="dirty"?sc(l.value):l});{if(n.value==="aborted")return Be;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?Be:c.status==="dirty"||n.value==="dirty"?sc(c.value):c}}if(i.type==="refinement"){const o=c=>{const l=i.refinement(c,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Be:(c.status==="dirty"&&n.dirty(),o(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Be:(c.status==="dirty"&&n.dirty(),o(c.value).then(()=>({status:n.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!so(o))return Be;const c=i.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>so(o)?Promise.resolve(i.transform(o.value,a)).then(c=>({status:n.value,value:c})):Be);vt.assertNever(i)}}ao.create=(t,e,n)=>new ao({schema:t,typeName:Fe.ZodEffects,effect:e,...st(n)});ao.createWithPreprocess=(t,e,n)=>new ao({schema:e,effect:{type:"preprocess",transform:t},typeName:Fe.ZodEffects,...st(n)});class oi extends mt{_parse(e){return this._getType(e)===ye.undefined?mr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oi.create=(t,e)=>new oi({innerType:t,typeName:Fe.ZodOptional,...st(e)});class oo extends mt{_parse(e){return this._getType(e)===ye.null?mr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oo.create=(t,e)=>new oo({innerType:t,typeName:Fe.ZodNullable,...st(e)});class hf extends mt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ye.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}hf.create=(t,e)=>new hf({innerType:t,typeName:Fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...st(e)});class pf extends mt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Dd(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ks(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ks(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}pf.create=(t,e)=>new pf({innerType:t,typeName:Fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...st(e)});class oy extends mt{_parse(e){if(this._getType(e)!==ye.nan){const r=this._getOrReturnCtx(e);return he(r,{code:J.invalid_type,expected:ye.nan,received:r.parsedType}),Be}return{status:"valid",value:e.data}}}oy.create=t=>new oy({typeName:Fe.ZodNaN,...st(t)});class WD extends mt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Hm extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Be:a.status==="dirty"?(n.dirty(),sc(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Be:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Hm({in:e,out:n,typeName:Fe.ZodPipeline})}}class ff extends mt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(so(i)&&(i.value=Object.freeze(i.value)),i);return Dd(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}ff.create=(t,e)=>new ff({innerType:t,typeName:Fe.ZodReadonly,...st(e)});Wt.lazycreate;var Fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Fe||(Fe={}));const cy=ai.create;di.create;Kr.create;const qD=Wt.create;Wt.strictCreate;$d.create;Ld.create;ea.create;io.create;Bd.create;oi.create;oo.create;const ly=qD({email:cy().email("Invalid email address").max(255,"Email too long"),password:cy().min(6,"Password must be at least 6 characters").max(100,"Password too long")}),S1=()=>{const t=tr(),{toast:e}=Yc(),[n,r]=v.useState(!1),[i,a]=v.useState(""),[o,c]=v.useState(""),[l,d]=v.useState(!1),[u,h]=v.useState(""),[p,f]=v.useState(!1),[m,x]=v.useState(""),[g,w]=v.useState("");v.useEffect(()=>{X.auth.getSession().then(({data:{session:P}})=>{P&&t("/")});const{data:{subscription:k}}=X.auth.onAuthStateChange((P,T)=>{T&&t("/")});return()=>k.unsubscribe()},[t]);const y=async k=>{k.preventDefault();const P=ly.safeParse({email:i,password:o});if(!P.success){e({variant:"destructive",title:"Validation Error",description:P.error.errors[0].message});return}r(!0);const{error:T}=await X.auth.signUp({email:P.data.email,password:P.data.password});r(!1),T?T.message.includes("already registered")?e({variant:"destructive",title:"Account exists",description:"This email is already registered. Please sign in instead."}):e({variant:"destructive",title:"Sign up failed",description:T.message}):(w(P.data.email),f(!0),e({title:"Check your email!",description:"We've sent you a 6-digit verification code. Please enter it below."}))},b=async k=>{if(k.preventDefault(),m.length!==6){e({variant:"destructive",title:"Invalid OTP",description:"Please enter a 6-digit code"});return}r(!0);const{error:P}=await X.auth.verifyOtp({email:g,token:m,type:"email"});r(!1),P?e({variant:"destructive",title:"Verification failed",description:P.message}):(e({title:"Success!",description:"Your email has been verified. You can now sign in."}),f(!1),x(""),w(""),a(""),c(""))},j=async()=>{r(!0);const{error:k}=await X.auth.resend({type:"signup",email:g});r(!1),e(k?{variant:"destructive",title:"Resend failed",description:k.message}:{title:"OTP Resent",description:"Check your email for a new verification code."})},C=async k=>{k.preventDefault();const P=ly.safeParse({email:i,password:o});if(!P.success){e({variant:"destructive",title:"Validation Error",description:P.error.errors[0].message});return}r(!0);const{error:T}=await X.auth.signInWithPassword({email:P.data.email,password:P.data.password});r(!1),T&&e({variant:"destructive",title:"Sign in failed",description:T.message})},N=async k=>{if(k.preventDefault(),!u.trim()){e({variant:"destructive",title:"Email required",description:"Please enter your email address"});return}r(!0);const{error:P}=await X.auth.resetPasswordForEmail(u,{redirectTo:`${window.location.origin}/`});r(!1),P?e({variant:"destructive",title:"Password reset failed",description:P.message}):(e({title:"Check your email",description:"We've sent you a password reset link"}),d(!1),h(""))};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(re,{className:"w-full max-w-md",children:[s.jsxs(fe,{children:[s.jsx(me,{className:"text-2xl text-center",children:"Welcome to ProssMind"}),s.jsx(_e,{className:"text-center",children:l?"Reset your password":p?"Verify your email":"Sign in or create an account to start generating BPMN diagrams"})]}),s.jsx(ue,{children:p?s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs(I,{type:"button",variant:"ghost",onClick:()=>{f(!1),x(""),w("")},className:"mb-4 p-0 h-auto",children:[s.jsx(Qv,{className:"h-4 w-4 mr-2"}),"Back to sign up"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{htmlFor:"otp",children:"Verification Code"}),s.jsx(Rt,{id:"otp",type:"text",placeholder:"Enter 6-digit code",value:m,onChange:k=>x(k.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,required:!0,disabled:n,className:"text-center text-2xl tracking-widest"}),s.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Enter the 6-digit code sent to ",g]})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:n||m.length!==6,children:n?"Verifying...":"Verify Email"}),s.jsx(I,{type:"button",variant:"link",className:"w-full text-sm",onClick:j,disabled:n,children:"Didn't receive the code? Resend"})]}):l?s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs(I,{type:"button",variant:"ghost",onClick:()=>d(!1),className:"mb-4 p-0 h-auto",children:[s.jsx(Qv,{className:"h-4 w-4 mr-2"}),"Back to sign in"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{htmlFor:"reset-email",children:"Email"}),s.jsx(Rt,{id:"reset-email",type:"email",placeholder:"you@example.com",value:u,onChange:k=>h(k.target.value),required:!0,disabled:n})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:n,children:n?"Sending...":"Send Reset Link"})]}):s.jsxs(Um,{defaultValue:"signin",className:"w-full",children:[s.jsxs(Tu,{className:"grid w-full grid-cols-2",children:[s.jsx(vs,{value:"signin",children:"Sign In"}),s.jsx(vs,{value:"signup",children:"Sign Up"})]}),s.jsx(xs,{value:"signin",children:s.jsxs("form",{onSubmit:C,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{htmlFor:"signin-email",children:"Email"}),s.jsx(Rt,{id:"signin-email",type:"email",placeholder:"you@example.com",value:i,onChange:k=>a(k.target.value),required:!0,disabled:n})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{htmlFor:"signin-password",children:"Password"}),s.jsx(Rt,{id:"signin-password",type:"password",placeholder:"",value:o,onChange:k=>c(k.target.value),required:!0,disabled:n})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign In"}),s.jsx(I,{type:"button",variant:"link",className:"w-full text-sm",onClick:()=>d(!0),children:"Forgot password?"})]})}),s.jsx(xs,{value:"signup",children:s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{htmlFor:"signup-email",children:"Email"}),s.jsx(Rt,{id:"signup-email",type:"email",placeholder:"you@example.com",value:i,onChange:k=>a(k.target.value),required:!0,disabled:n})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{htmlFor:"signup-password",children:"Password"}),s.jsx(Rt,{id:"signup-password",type:"password",placeholder:"",value:o,onChange:k=>c(k.target.value),required:!0,disabled:n}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 6 characters"})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:n,children:n?"Creating account...":"Sign Up"})]})})]})})]})})},ia=v.forwardRef(({className:t,...e},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:Y("w-full caption-bottom text-sm",t),...e})}));ia.displayName="Table";const aa=v.forwardRef(({className:t,...e},n)=>s.jsx("thead",{ref:n,className:Y("[&_tr]:border-b",t),...e}));aa.displayName="TableHeader";const oa=v.forwardRef(({className:t,...e},n)=>s.jsx("tbody",{ref:n,className:Y("[&_tr:last-child]:border-0",t),...e}));oa.displayName="TableBody";const KD=v.forwardRef(({className:t,...e},n)=>s.jsx("tfoot",{ref:n,className:Y("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));KD.displayName="TableFooter";const Un=v.forwardRef(({className:t,...e},n)=>s.jsx("tr",{ref:n,className:Y("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));Un.displayName="TableRow";const Nt=v.forwardRef(({className:t,...e},n)=>s.jsx("th",{ref:n,className:Y("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Nt.displayName="TableHead";const _t=v.forwardRef(({className:t,...e},n)=>s.jsx("td",{ref:n,className:Y("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));_t.displayName="TableCell";const YD=v.forwardRef(({className:t,...e},n)=>s.jsx("caption",{ref:n,className:Y("mt-4 text-sm text-muted-foreground",t),...e}));YD.displayName="TableCaption";const ZD=vo("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ut({className:t,variant:e,...n}){return s.jsx("div",{className:Y(ZD({variant:e}),t),...n})}const XD=()=>{const t=tr(),[e,n]=v.useState(null),[r,i]=v.useState(!0),[a,o]=v.useState(!1),[c,l]=v.useState([]);v.useEffect(()=>{const{data:{subscription:h}}=X.auth.onAuthStateChange((p,f)=>{n((f==null?void 0:f.user)??null),f!=null&&f.user||t("/auth")});return X.auth.getSession().then(({data:{session:p}})=>{n((p==null?void 0:p.user)??null),p!=null&&p.user||t("/auth")}),()=>h.unsubscribe()},[t]),v.useEffect(()=>{e&&(async()=>{if(e)try{const{data:p,error:f}=await X.from("user_roles").select("role").eq("user_id",e.id).eq("role","admin").maybeSingle();if(f&&f.code!=="PGRST116"&&f.code!=="PGRST301"){console.error("Error checking admin status:",f),S.error("Failed to verify admin status"),t("/");return}const m=!!p;o(m),m||(S.error("Access denied: Admin privileges required"),t("/"))}catch(p){console.error("Unexpected error:",p),t("/")}finally{i(!1)}})()},[e,t]),v.useEffect(()=>{(async()=>{if(a)try{const{data:p,error:f}=await X.from("user_profiles").select("*").order("created_at",{ascending:!1});if(f)throw f;const{data:m,error:x}=await X.from("user_roles").select("user_id, role");if(x)throw x;const g=(m==null?void 0:m.reduce((y,b)=>(y[b.user_id]||(y[b.user_id]=[]),y[b.user_id].push(b.role),y),{}))||{},w=(p==null?void 0:p.map(y=>({...y,roles:g[y.user_id]||["user"]})))||[];l(w)}catch(p){console.error("Error fetching users:",p),S.error("Failed to load users")}})()},[a]);const d=async(h,p)=>{const f=p.includes("admin");try{if(f){const{error:y}=await X.from("user_roles").delete().eq("user_id",h).eq("role","admin");if(y)throw y;S.success("Admin privileges revoked")}else{const{error:y}=await X.from("user_roles").insert({user_id:h,role:"admin"});if(y)throw y;S.success("Admin privileges granted")}const{data:m}=await X.from("user_profiles").select("*").order("created_at",{ascending:!1}),{data:x}=await X.from("user_roles").select("user_id, role"),g=(x==null?void 0:x.reduce((y,b)=>(y[b.user_id]||(y[b.user_id]=[]),y[b.user_id].push(b.role),y),{}))||{},w=(m==null?void 0:m.map(y=>({...y,roles:g[y.user_id]||["user"]})))||[];l(w)}catch(m){console.error("Error toggling admin:",m),S.error("Failed to update admin status")}},u=async h=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const{error:p}=await X.auth.admin.deleteUser(h);if(p)throw p;S.success("User deleted successfully"),l(c.filter(f=>f.user_id!==h))}catch(p){console.error("Error deleting user:",p),S.error("Failed to delete user")}};return r?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):a?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{user:e}),s.jsxs("div",{className:"container mx-auto px-6 py-24",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[s.jsx(Ss,{className:"h-8 w-8 text-primary"}),s.jsx("h1",{className:"text-4xl font-bold",children:"Admin Dashboard"})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(MP,{className:"h-5 w-5"}),"User Management"]}),s.jsx(_e,{children:"Manage users, assign roles, and control access permissions"})]}),s.jsx(ue,{children:s.jsxs(ia,{children:[s.jsx(aa,{children:s.jsxs(Un,{children:[s.jsx(Nt,{children:"Email"}),s.jsx(Nt,{children:"Roles"}),s.jsx(Nt,{children:"Created At"}),s.jsx(Nt,{children:"Actions"})]})}),s.jsx(oa,{children:c.map(h=>s.jsxs(Un,{children:[s.jsx(_t,{className:"font-medium",children:h.email}),s.jsx(_t,{children:s.jsx("div",{className:"flex gap-2",children:h.roles.map(p=>s.jsxs(Ut,{variant:p==="admin"?"default":"secondary",children:[p==="admin"&&s.jsx(tx,{className:"h-3 w-3 mr-1"}),p]},p))})}),s.jsx(_t,{children:new Date(h.created_at).toLocaleDateString()}),s.jsx(_t,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(I,{variant:h.roles.includes("admin")?"destructive":"default",size:"sm",onClick:()=>d(h.user_id,h.roles),disabled:h.user_id===(e==null?void 0:e.id),children:[s.jsx(tx,{className:"h-4 w-4 mr-1"}),h.roles.includes("admin")?"Revoke Admin":"Make Admin"]}),s.jsx(I,{variant:"outline",size:"sm",onClick:()=>u(h.user_id),disabled:h.user_id===(e==null?void 0:e.id),children:s.jsx(Jc,{className:"h-4 w-4"})})]})})]},h.id))})]})})]})]})]}):null},JD=()=>{const t=tr();return v.useEffect(()=>{(async()=>{try{const{data:{user:n}}=await X.auth.getUser();if(!n){S.error("Please log in"),t("/auth");return}const{data:r,error:i}=await X.from("vision_bpmn_jobs").select("bpmn_xml").eq("user_id",n.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).single();if(i||!(r!=null&&r.bpmn_xml)){S.error("No completed diagrams found"),t("/vision-ai");return}const a=localStorage.getItem("diagramType")||"bpmn",o=a==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(o,r.bpmn_xml);const c=a==="bpmn"?"BPMN":"P&ID";S.success(`${c} diagram loaded successfully!`),t("/")}catch(n){console.error("Error loading diagram:",n),S.error("Failed to load diagram"),t("/vision-ai")}})()},[t]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading your diagram..."})]})})},QD=()=>{const t=Bc();return v.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background via-muted/30 to-background",children:s.jsxs("div",{className:"text-center px-6 slide-up",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"mb-4 text-8xl md:text-9xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"404"}),s.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-primary to-accent mx-auto rounded-full"})]}),s.jsx("h2",{className:"mb-4 text-2xl md:text-3xl font-semibold",children:"Page Not Found"}),s.jsx("p",{className:"mb-8 text-lg text-muted-foreground max-w-md mx-auto",children:"The page you're looking for doesn't exist or has been moved."}),s.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl font-medium",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Return to Home"]})]})})},e5=new $_,k1=()=>s.jsx(L_,{client:e5,children:s.jsxs(P_,{children:[s.jsx(y_,{}),s.jsx(b_,{}),s.jsx(ew,{children:s.jsxs(ra,{children:[s.jsx(Ce,{path:"/",element:s.jsx(os,{children:s.jsx(BM,{})})}),s.jsx(Ce,{path:"/features",element:s.jsx(os,{children:s.jsx(zM,{})})}),s.jsx(Ce,{path:"/vision-ai",element:s.jsx(os,{children:s.jsx(a1,{})})}),s.jsx(Ce,{path:"/pricing",element:s.jsx(os,{children:s.jsx(tD,{})})}),s.jsx(Ce,{path:"/contact",element:s.jsx(os,{children:s.jsx(xD,{})})}),s.jsx(Ce,{path:"/auth",element:s.jsx(os,{children:s.jsx(S1,{})})}),s.jsx(Ce,{path:"/admin",element:s.jsx(os,{children:s.jsx(XD,{})})}),s.jsx(Ce,{path:"/load-diagram",element:s.jsx(os,{children:s.jsx(JD,{})})}),s.jsx(Ce,{path:"*",element:s.jsx(os,{children:s.jsx(QD,{})})})]})})]})}),t5=()=>s.jsxs("div",{children:[s.jsx("h1",{children:"BPMN Subdomain"}),s.jsx("p",{children:"This is the BPMN subdomain."})]}),hp="prossmind_free_prompts",Wo=5,Ru=t=>{const[e,n]=v.useState(Wo),[r,i]=v.useState(!1);return v.useEffect(()=>{if(t)n(1/0),i(!1);else{const o=localStorage.getItem(hp),c=o?parseInt(o,10):0,l=Math.max(0,Wo-c);n(l),i(l===0)}},[t]),{remainingPrompts:e,hasUsedAllPrompts:r,usePrompt:()=>{if(t)return!0;if(r)return!1;const o=localStorage.getItem(hp),c=o?parseInt(o,10):0;if(c>=Wo)return i(!0),n(0),!1;const l=c+1;return localStorage.setItem(hp,l.toString()),n(Wo-l),l>=Wo&&i(!0),!0},isUnlimited:t}};function nl(t){Xf.call(this,t),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}ve(nl,Xf);nl.prototype._createModdle=function(t){var e=Xf.prototype._createModdle.call(this,t);return e.ids=new Jk([32,36,1]),e};nl.prototype._collectIds=function(t,e){var n=t.$model,r=n.ids,i;r.clear();for(i in e)r.claim(i,e[i])};var n5=["c","C"],r5=["v","V"],s5=["y","Y"],C1=["z","Z"];function i5(t){return t.ctrlKey||t.metaKey||t.shiftKey||t.altKey}function dr(t){return t.altKey?!1:t.ctrlKey||t.metaKey}function mn(t,e){return t=tt(t)?t:[t],t.indexOf(e.key)!==-1||t.indexOf(e.code)!==-1}function Vm(t){return t.shiftKey}function a5(t){return dr(t)&&mn(n5,t)}function o5(t){return dr(t)&&mn(r5,t)}function c5(t){return dr(t)&&!Vm(t)&&mn(C1,t)}function l5(t){return dr(t)&&(mn(s5,t)||mn(C1,t)&&Vm(t))}var Au="keyboard.keydown",d5="keyboard.keyup",u5=1e3,P1="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function Tn(t,e){var n=this;this._config=t=t||{},this._eventBus=e,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),e.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(P1));var r=t&&t.bind!==!1;e.on("canvas.init",function(i){n._target=i.svg,r&&n.bind(),n._fire("init")})}Tn.$inject=["config.keyboard","eventBus"];Tn.prototype._keydownHandler=function(t){this._keyHandler(t,Au)};Tn.prototype._keyupHandler=function(t){this._keyHandler(t,d5)};Tn.prototype._keyHandler=function(t,e){var n;if(!this._isEventIgnored(t)){var r={keyEvent:t};n=this._eventBus.fire(e||Au,r),n&&t.preventDefault()}};Tn.prototype._isEventIgnored=function(t){return!1};Tn.prototype.bind=function(t){t&&console.error("unsupported argument <node>",new Error(P1)),this.unbind(),t=this._node=this._target,Ae.bind(t,"keydown",this._keydownHandler),Ae.bind(t,"keyup",this._keyupHandler),this._fire("bind")};Tn.prototype.getBinding=function(){return this._node};Tn.prototype.unbind=function(){var t=this._node;t&&(this._fire("unbind"),Ae.unbind(t,"keydown",this._keydownHandler),Ae.unbind(t,"keyup",this._keyupHandler)),this._node=null};Tn.prototype._fire=function(t){this._eventBus.fire("keyboard."+t,{node:this._node})};Tn.prototype.addListener=function(t,e,n){hr(t)&&(n=e,e=t,t=u5),this._eventBus.on(n||Au,t,e)};Tn.prototype.removeListener=function(t,e){this._eventBus.off(e||Au,t)};Tn.prototype.hasModifier=i5;Tn.prototype.isCmd=dr;Tn.prototype.isShift=Vm;Tn.prototype.isKey=mn;var h5=500;function wo(t,e){var n=this;t.on("editorActions.init",h5,function(r){var i=r.editorActions;n.registerBindings(e,i)})}wo.$inject=["eventBus","keyboard"];wo.prototype.registerBindings=function(t,e){function n(r,i){e.isRegistered(r)&&t.addListener(i)}n("undo",function(r){var i=r.keyEvent;if(c5(i))return e.trigger("undo"),!0}),n("redo",function(r){var i=r.keyEvent;if(l5(i))return e.trigger("redo"),!0}),n("copy",function(r){var i=r.keyEvent;if(a5(i))return e.trigger("copy"),!0}),n("paste",function(r){var i=r.keyEvent;if(o5(i))return e.trigger("paste"),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(mn(["+","Add","="],i)&&dr(i))return e.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(mn(["-","Subtract"],i)&&dr(i))return e.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(r){var i=r.keyEvent;if(mn("0",i)&&dr(i))return e.trigger("zoom",{value:1}),!0}),n("removeSelection",function(r){var i=r.keyEvent;if(mn(["Backspace","Delete","Del"],i))return e.trigger("removeSelection"),!0})};const Gm={__init__:["keyboard","keyboardBindings"],keyboard:["type",Tn],keyboardBindings:["type",wo]};var p5={moveSpeed:50,moveSpeedAccelerated:200};function T1(t,e,n){var r=this;this._config=B({},p5,t||{}),e.addListener(i);function i(a){var o=a.keyEvent,c=r._config;if(e.isCmd(o)&&e.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],o)){var l=e.isShift(o)?c.moveSpeedAccelerated:c.moveSpeed,d;switch(o.key){case"ArrowLeft":case"Left":d="left";break;case"ArrowUp":case"Up":d="up";break;case"ArrowRight":case"Right":d="right";break;case"ArrowDown":case"Down":d="down";break}return r.moveCanvas({speed:l,direction:d}),!0}}this.moveCanvas=function(a){var o=0,c=0,l=a.speed,d=l/Math.min(Math.sqrt(n.viewbox().scale),1);switch(a.direction){case"left":o=d;break;case"up":c=d;break;case"right":o=-d;break;case"down":c=-d;break}n.scroll({dx:o,dy:c})}}T1.$inject=["config.keyboardMove","keyboard","canvas"];const R1={__depends__:[Gm],__init__:["keyboardMove"],keyboardMove:["type",T1]};var f5=/^djs-cursor-.*$/;function Iu(t){var e=rn(document.body);e.removeMatching(f5),t&&e.add("djs-cursor-"+t)}function A1(){Iu(null)}var m5=5e3;function I1(t,e){e=e||"element.click";function n(){return!1}return t.once(e,m5,n),function(){t.off(e,n)}}function gc(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}function Ir(t,e){return{x:t.x-e.x,y:t.y-e.y}}var g5=15;function M1(t,e){var n;function r(c){return o(c.originalEvent)}t.on("canvas.focus.changed",function(c){c.focused?t.on("element.mousedown",500,r):t.off("element.mousedown",r)});function i(c){var l=n.start,d=n.button,u=Zi(c),h=Ir(u,l);if(!n.dragging&&v5(h)>g5&&(n.dragging=!0,d===0&&I1(t),Iu("grab")),n.dragging){var p=n.last||n.start;h=Ir(u,p),e.scroll({dx:h.x,dy:h.y}),n.last=u}c.preventDefault()}function a(c){Ae.unbind(document,"mousemove",i),Ae.unbind(document,"mouseup",a),n=null,A1()}function o(c){if(!Gc(c.target,".djs-draggable")){var l=c.button;if(!(l>=2||c.ctrlKey||c.shiftKey||c.altKey))return n={button:l,start:Zi(c)},Ae.bind(document,"mousemove",i),Ae.bind(document,"mouseup",a),!0}}this.isActive=function(){return!!n}}M1.$inject=["eventBus","canvas"];function v5(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}const D1={__init__:["moveCanvas"],moveCanvas:["type",M1]};function mf(t){return Math.log(t)/Math.log(10)}function O1(t,e){var n=mf(t.min),r=mf(t.max),i=Math.abs(n)+Math.abs(r);return i/e}function x5(t,e){return Math.max(t.min,Math.min(t.max,e))}var y5=Math.sign||function(t){return t>=0?1:-1},Wm={min:.2,max:4},$1=10,b5=.1,w5=.75;function es(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=Xi(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||w5;var r=this;e.on("canvas.focus.changed",function(i){r._init(i.focused&&t.enabled!==!1)})}es.$inject=["config.zoomScroll","eventBus","canvas"];es.prototype.scroll=function(e){this._canvas.scroll(e)};es.prototype.reset=function(){this._canvas.zoom("fit-viewport")};es.prototype.zoom=function(e,n){var r=O1(Wm,$1*2);this._totalDelta+=e,Math.abs(this._totalDelta)>b5&&(this._zoom(e,n,r),this._totalDelta=0)};es.prototype._handleWheel=function(e){if(this._canvas.isFocused()){var n=this._container;e.preventDefault();var r=e.ctrlKey||Qk()&&e.metaKey,i=e.shiftKey,a=-1*this._scale,o;if(r?a*=e.deltaMode===0?.02:.32:a*=e.deltaMode===0?1:16,r){var c=n.getBoundingClientRect(),l={x:e.clientX-c.left,y:e.clientY-c.top};o=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*y5(e.deltaY)*a,this.zoom(o,l)}else i?o={dx:a*e.deltaY,dy:0}:o={dx:a*e.deltaX,dy:a*e.deltaY},this.scroll(o)}};es.prototype.stepZoom=function(e,n){var r=O1(Wm,$1);this._zoom(e,n,r)};es.prototype._zoom=function(t,e,n){var r=this._canvas,i=t>0?1:-1,a=mf(r.zoom()),o=Math.round(a/n)*n;o+=n*i;var c=Math.pow(10,o);r.zoom(x5(Wm,c),e)};es.prototype.toggle=function(e){var n=this._container,r=this._handleWheel,i=this._enabled;return typeof e>"u"&&(e=!i),i!==e&&Ae[e?"bind":"unbind"](n,"wheel",r,!1),this._enabled=e,e};es.prototype._init=function(t){this.toggle(t)};const L1={__init__:["zoomScroll"],zoomScroll:["type",es]};function Ac(t){Wc.call(this,t)}ve(Ac,Wc);Ac.prototype._navigationModules=[R1,D1,L1];Ac.prototype._modules=[].concat(Wc.prototype._modules,Ac.prototype._navigationModules);function pp(t){return t&&t[t.length-1]}function dy(t){return t.y}function uy(t){return t.x}var _5={left:uy,center:uy,right:function(t){return t.x+t.width},top:dy,middle:dy,bottom:function(t){return t.y+t.height}};function _o(t,e){this._modeling=t,this._rules=e}_o.$inject=["modeling","rules"];_o.prototype._getOrientationDetails=function(t){var e=["top","bottom","middle"],n="x",r="width";return e.indexOf(t)!==-1&&(n="y",r="height"),{axis:n,dimension:r}};_o.prototype._isType=function(t,e){return e.indexOf(t)!==-1};_o.prototype._alignmentPosition=function(t,e){var n=this._getOrientationDetails(t),r=n.axis,i=n.dimension,a={},o={},c=!1,l,d,u;function h(p,f){return Math.round((p[r]+f[r]+f[i])/2)}if(this._isType(t,["left","top"]))a[t]=e[0][r];else if(this._isType(t,["right","bottom"]))u=pp(e),a[t]=u[r]+u[i];else if(this._isType(t,["center","middle"])){if(O(e,function(p){var f=p[r]+Math.round(p[i]/2);o[f]?o[f].elements.push(p):o[f]={elements:[p],center:f}}),l=js(o,function(p){return p.elements.length>1&&(c=!0),p.elements.length}),c)return a[t]=pp(l).center,a;d=e[0],e=js(e,function(p){return p[r]+p[i]}),u=pp(e),a[t]=h(d,u)}return a};_o.prototype.trigger=function(t,e){var n=this._modeling,r,i=rt(t,function(l){return!(l.waypoints||l.host||l.labelTarget)});if(r=this._rules.allowed("elements.align",{elements:i}),tt(r)&&(i=r),!(i.length<2||!r)){var a=_5[e],o=js(i,a),c=this._alignmentPosition(e,o);n.alignElements(o,c)}};const j5={__init__:["alignElements"],alignElements:["type",_o]},E5=new Jf;function jo(t){this._scheduled={},t.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(e=>{this.cancel(e)})})}jo.$inject=["eventBus"];jo.prototype.schedule=function(t,e=E5.next()){this.cancel(e);const n=this._schedule(t,e);return this._scheduled[e]=n,n.promise};jo.prototype._schedule=function(t,e){const n=N5();return{executionId:setTimeout(()=>{try{this._scheduled[e]=null;try{n.resolve(t())}catch(i){n.reject(i)}}catch(i){console.error("Scheduler#_schedule execution failed",i)}}),promise:n.promise}};jo.prototype.cancel=function(t){const e=this._scheduled[t];e&&(this._cancel(e),this._scheduled[t]=null)};jo.prototype._cancel=function(t){clearTimeout(t.executionId)};function N5(){const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t}const S5={scheduler:["type",jo]};var k5="djs-element-hidden",Vl=".entry",C5=1e3,hy=8,P5=300;function Xt(t,e,n,r){this._canvas=t,this._elementRegistry=e,this._eventBus=n,this._scheduler=r,this._current=null,this._init()}Xt.$inject=["canvas","elementRegistry","eventBus","scheduler"];Xt.prototype._init=function(){var t=this;this._eventBus.on("selection.changed",function(e){var n=e.newSelection,r=n.length?n.length===1?n[0]:n:null;r?t.open(r,!0):t.close()}),this._eventBus.on("elements.changed",function(e){var n=e.elements,r=t._current;if(r){var i=r.target,a=tt(i)?i:[i],o=a.filter(function(l){return n.includes(l)});if(o.length){t.close();var c=a.filter(function(l){return t._elementRegistry.get(l.id)});c.length&&t._updateAndOpen(c.length>1?c:c[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){t._updatePosition()}),this._eventBus.on("element.marker.update",function(e){if(t.isOpen()){var n=e.element,r=t._current,i=tt(r.target)?r.target:[r.target];i.includes(n)&&t._updateVisibility()}}),this._container=this._createContainer()};Xt.prototype._createContainer=function(){var t=vn('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(t),t};Xt.prototype.registerProvider=function(t,e){e||(e=t,t=C5),this._eventBus.on("contextPad.getProviders",t,function(n){n.providers.push(e)})};Xt.prototype.getEntries=function(t){var e=this._getProviders(),n=tt(t)?"getMultiElementContextPadEntries":"getContextPadEntries",r={};return O(e,function(i){if(hr(i[n])){var a=i[n](t);hr(a)?r=a(r):O(a,function(o,c){r[c]=o})}}),r};Xt.prototype.trigger=function(t,e,n){var r=this,i,a,o=e.delegateTarget||e.target;if(!o)return e.preventDefault();if(i=In(o,"data-action"),a=e.originalEvent||e,t==="mouseover"){this._timeout=setTimeout(function(){r._mouseout=r.triggerEntry(i,"hover",a,n)},P5);return}else if(t==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(i,t,a,n)};Xt.prototype.triggerEntry=function(t,e,n,r){if(this.isShown()){var i=this._current.target,a=this._current.entries,o=a[t];if(o){var c=o.action;if(this._eventBus.fire("contextPad.trigger",{entry:o,event:n})!==!1){if(hr(c)){if(e==="click")return c(n,i,r)}else if(c[e])return c[e](n,i,r);n.preventDefault()}}}};Xt.prototype.open=function(t,e){!e&&this.isOpen(t)||(this.close(),this._updateAndOpen(t))};Xt.prototype._getProviders=function(){var t=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};Xt.prototype._updateAndOpen=function(t){var e=this.getEntries(t),n=this._createHtml(t),r;O(e,function(i,a){var o=i.group||"default",c=vn(i.html||'<div class="entry" draggable="true"></div>'),l;In(c,"data-action",a),l=Yt("[data-group="+yc(o)+"]",n),l||(l=vn('<div class="group"></div>'),In(l,"data-group",o),n.appendChild(l)),l.appendChild(c),i.className&&T5(c,i.className),i.title&&In(c,"title",i.title),i.imageUrl&&(r=vn("<img>"),In(r,"src",i.imageUrl),r.style.width="100%",r.style.height="100%",c.appendChild(r))}),rn(n).add("open"),this._current={entries:e,html:n,target:t},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};Xt.prototype._createHtml=function(t){var e=this,n=vn('<div class="djs-context-pad"></div>');return Rr.bind(n,Vl,"click",function(r){e.trigger("click",r)}),Rr.bind(n,Vl,"dragstart",function(r){e.trigger("dragstart",r)}),Rr.bind(n,Vl,"mouseover",function(r){e.trigger("mouseover",r)}),Rr.bind(n,Vl,"mouseout",function(r){e.trigger("mouseout",r)}),Ae.bind(n,"mousedown",function(r){r.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:t,pad:n}),n};Xt.prototype.getPad=function(t){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let e;return this.isOpen()&&A5(this._current.target,t)?e=this._current.html:e=this._createHtml(t),{html:e}};Xt.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};Xt.prototype.isOpen=function(t){var e=this._current;if(!e)return!1;if(!t)return!0;var n=e.target;return tt(t)!==tt(n)?!1:tt(t)?t.length===n.length&&nu(t,function(r){return n.includes(r)}):n===t};Xt.prototype.isShown=function(){return this.isOpen()&&rn(this._current.html).has("open")};Xt.prototype.show=function(){this.isOpen()&&(rn(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};Xt.prototype.hide=function(){this.isOpen()&&(rn(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};Xt.prototype._getPosition=function(t){if(!tt(t)&&jt(t)){var e=this._canvas.viewbox(),n=R5(t),r=n.x*e.scale-e.x*e.scale,i=n.y*e.scale-e.y*e.scale;return{left:r+hy*this._canvas.zoom(),top:i}}var a=this._canvas.getContainer(),o=a.getBoundingClientRect(),c=this._getTargetBounds(t);return{left:c.right-o.left+hy*this._canvas.zoom(),top:c.top-o.top}};Xt.prototype._updatePosition=function(){const t=()=>{if(this.isOpen()){var e=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(e.style.left=n.x+"px",e.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(r){r in n&&(e.style[r]=n[r]+"px")})}};this._scheduler.schedule(t,"ContextPad#_updatePosition")};Xt.prototype._updateVisibility=function(){const t=()=>{if(this.isOpen()){var e=this,n=this._current.target,r=tt(n)?n:[n],i=r.some(function(a){return e._canvas.hasMarker(a,k5)});i?e.hide():e.show()}};this._scheduler.schedule(t,"ContextPad#_updateVisibility")};Xt.prototype._getTargetBounds=function(t){var e=this,n=tt(t)?t:[t],r=n.map(function(i){return e._canvas.getGraphics(i)});return r.reduce(function(i,a){const o=a.getBoundingClientRect();return i.top=Math.min(i.top,o.top),i.right=Math.max(i.right,o.right),i.bottom=Math.max(i.bottom,o.bottom),i.left=Math.min(i.left,o.left),i.x=i.left,i.y=i.top,i.width=i.right-i.left,i.height=i.bottom-i.top,i},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function T5(t,e){var n=rn(t);e=tt(e)?e:e.split(/\s+/g),e.forEach(function(r){n.add(r)})}function R5(t){return t.waypoints[t.waypoints.length-1]}function A5(t,e){return t=tt(t)?t:[t],e=tt(e)?e:[e],t.length===e.length&&nu(t,function(n){return e.includes(n)})}const B1={__depends__:[Qf,S5,_w],contextPad:["type",Xt]};var Mu,Lt,F1,Bi,py,z1,U1,H1,qm,gf,vf,Ic={},V1=[],I5=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Du=Array.isArray;function ms(t,e){for(var n in e)t[n]=e[n];return t}function Km(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function G1(t,e,n){var r,i,a,o={};for(a in e)a=="key"?r=e[a]:a=="ref"?i=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?Mu.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)o[a]===void 0&&(o[a]=t.defaultProps[a]);return pd(t,o,r,i,null)}function pd(t,e,n,r,i){var a={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++F1,__i:-1,__u:0};return i==null&&Lt.vnode!=null&&Lt.vnode(a),a}function Ou(t){return t.children}function fd(t,e){this.props=t,this.context=e}function co(t,e){if(e==null)return t.__?co(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?co(t):null}function W1(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return W1(t)}}function fy(t){(!t.__d&&(t.__d=!0)&&Bi.push(t)&&!Fd.__r++||py!=Lt.debounceRendering)&&((py=Lt.debounceRendering)||z1)(Fd)}function Fd(){for(var t,e,n,r,i,a,o,c=1;Bi.length;)Bi.length>c&&Bi.sort(U1),t=Bi.shift(),c=Bi.length,t.__d&&(n=void 0,r=void 0,i=(r=(e=t).__v).__e,a=[],o=[],e.__P&&((n=ms({},r)).__v=r.__v+1,Lt.vnode&&Lt.vnode(n),Ym(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,a,i??co(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,Y1(a,n,o),r.__e=r.__=null,n.__e!=i&&W1(n)));Fd.__r=0}function q1(t,e,n,r,i,a,o,c,l,d,u){var h,p,f,m,x,g,w,y=r&&r.__k||V1,b=e.length;for(l=M5(n,e,y,l,b),h=0;h<b;h++)(f=n.__k[h])!=null&&(p=f.__i==-1?Ic:y[f.__i]||Ic,f.__i=h,g=Ym(t,f,p,i,a,o,c,l,d,u),m=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Zm(p.ref,null,f),u.push(f.ref,f.__c||m,f)),x==null&&m!=null&&(x=m),(w=!!(4&f.__u))||p.__k===f.__k?l=K1(f,l,t,w):typeof f.type=="function"&&g!==void 0?l=g:m&&(l=m.nextSibling),f.__u&=-7);return n.__e=x,l}function M5(t,e,n,r,i){var a,o,c,l,d,u=n.length,h=u,p=0;for(t.__k=new Array(i),a=0;a<i;a++)(o=e[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=a+p,(o=t.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?pd(null,o,null,null,null):Du(o)?pd(Ou,{children:o},null,null,null):o.constructor==null&&o.__b>0?pd(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,c=null,(d=o.__i=D5(o,n,l,h))!=-1&&(h--,(c=n[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(i>u?p--:i<u&&p++),typeof o.type!="function"&&(o.__u|=4)):d!=l&&(d==l-1?p--:d==l+1?p++:(d>l?p--:p++,o.__u|=4))):t.__k[a]=null;if(h)for(a=0;a<u;a++)(c=n[a])!=null&&!(2&c.__u)&&(c.__e==r&&(r=co(c)),X1(c,c));return r}function K1(t,e,n,r){var i,a;if(typeof t.type=="function"){for(i=t.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=t,e=K1(i[a],e,n,r));return e}t.__e!=e&&(r&&(e&&t.type&&!e.parentNode&&(e=co(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function D5(t,e,n,r){var i,a,o,c=t.key,l=t.type,d=e[n],u=d!=null&&(2&d.__u)==0;if(d===null&&t.key==null||u&&c==d.key&&l==d.type)return n;if(r>(u?1:0)){for(i=n-1,a=n+1;i>=0||a<e.length;)if((d=e[o=i>=0?i--:a++])!=null&&!(2&d.__u)&&c==d.key&&l==d.type)return o}return-1}function my(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||I5.test(e)?n:n+"px"}function Gl(t,e,n,r,i){var a,o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||my(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||my(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(H1,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=n,n?r?n.u=r.u:(n.u=qm,t.addEventListener(e,a?vf:gf,a)):t.removeEventListener(e,a?vf:gf,a);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function gy(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=qm++;else if(e.t<n.u)return;return n(Lt.event?Lt.event(e):e)}}}function Ym(t,e,n,r,i,a,o,c,l,d){var u,h,p,f,m,x,g,w,y,b,j,C,N,k,P,T,L,R=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),a=[c=e.__e=n.__e]),(u=Lt.__b)&&u(e);e:if(typeof R=="function")try{if(w=e.props,y="prototype"in R&&R.prototype.render,b=(u=R.contextType)&&r[u.__c],j=u?b?b.props.value:u.__:r,n.__c?g=(h=e.__c=n.__c).__=h.__E:(y?e.__c=h=new R(w,j):(e.__c=h=new fd(w,j),h.constructor=R,h.render=$5),b&&b.sub(h),h.props=w,h.state||(h.state={}),h.context=j,h.__n=r,p=h.__d=!0,h.__h=[],h._sb=[]),y&&h.__s==null&&(h.__s=h.state),y&&R.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=ms({},h.__s)),ms(h.__s,R.getDerivedStateFromProps(w,h.__s))),f=h.props,m=h.state,h.__v=e,p)y&&R.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),y&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(y&&R.getDerivedStateFromProps==null&&w!==f&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(w,j),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(w,h.__s,j)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(h.props=w,h.state=h.__s,h.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(M){M&&(M.__=e)}),C=0;C<h._sb.length;C++)h.__h.push(h._sb[C]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(w,h.__s,j),y&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(f,m,x)})}if(h.context=j,h.props=w,h.__P=t,h.__e=!1,N=Lt.__r,k=0,y){for(h.state=h.__s,h.__d=!1,N&&N(e),u=h.render(h.props,h.state,h.context),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[]}else do h.__d=!1,N&&N(e),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++k<25);h.state=h.__s,h.getChildContext!=null&&(r=ms(ms({},r),h.getChildContext())),y&&!p&&h.getSnapshotBeforeUpdate!=null&&(x=h.getSnapshotBeforeUpdate(f,m)),T=u,u!=null&&u.type===Ou&&u.key==null&&(T=Z1(u.props.children)),c=q1(t,Du(T)?T:[T],e,n,r,i,a,o,c,l,d),h.base=e.__e,e.__u&=-161,h.__h.length&&o.push(h),g&&(h.__E=h.__=null)}catch(M){if(e.__v=null,l||a!=null)if(M.then){for(e.__u|=l?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,e.__e=c}else{for(L=a.length;L--;)Km(a[L]);xf(e)}else e.__e=n.__e,e.__k=n.__k,M.then||xf(e);Lt.__e(M,e,n)}else a==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):c=e.__e=O5(n.__e,e,n,r,i,a,o,l,d);return(u=Lt.diffed)&&u(e),128&e.__u?void 0:c}function xf(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(xf)}function Y1(t,e,n){for(var r=0;r<n.length;r++)Zm(n[r],n[++r],n[++r]);Lt.__c&&Lt.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(a){a.call(i)})}catch(a){Lt.__e(a,i.__v)}})}function Z1(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Du(t)?t.map(Z1):ms({},t)}function O5(t,e,n,r,i,a,o,c,l){var d,u,h,p,f,m,x,g=n.props,w=e.props,y=e.type;if(y=="svg"?i="http://www.w3.org/2000/svg":y=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(d=0;d<a.length;d++)if((f=a[d])&&"setAttribute"in f==!!y&&(y?f.localName==y:f.nodeType==3)){t=f,a[d]=null;break}}if(t==null){if(y==null)return document.createTextNode(w);t=document.createElementNS(i,y,w.is&&w),c&&(Lt.__m&&Lt.__m(e,a),c=!1),a=null}if(y==null)g===w||c&&t.data==w||(t.data=w);else{if(a=a&&Mu.call(t.childNodes),g=n.props||Ic,!c&&a!=null)for(g={},d=0;d<t.attributes.length;d++)g[(f=t.attributes[d]).name]=f.value;for(d in g)if(f=g[d],d!="children"){if(d=="dangerouslySetInnerHTML")h=f;else if(!(d in w)){if(d=="value"&&"defaultValue"in w||d=="checked"&&"defaultChecked"in w)continue;Gl(t,d,null,f,i)}}for(d in w)f=w[d],d=="children"?p=f:d=="dangerouslySetInnerHTML"?u=f:d=="value"?m=f:d=="checked"?x=f:c&&typeof f!="function"||g[d]===f||Gl(t,d,f,g[d],i);if(u)c||h&&(u.__html==h.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(h&&(t.innerHTML=""),q1(e.type=="template"?t.content:t,Du(p)?p:[p],e,n,r,y=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,o,a?a[0]:n.__k&&co(n,0),c,l),a!=null)for(d=a.length;d--;)Km(a[d]);c||(d="value",y=="progress"&&m==null?t.removeAttribute("value"):m!=null&&(m!==t[d]||y=="progress"&&!m||y=="option"&&m!=g[d])&&Gl(t,d,m,g[d],i),d="checked",x!=null&&x!=t[d]&&Gl(t,d,x,g[d],i))}return t}function Zm(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){Lt.__e(i,n)}}function X1(t,e,n){var r,i;if(Lt.unmount&&Lt.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||Zm(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){Lt.__e(a,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&X1(r[i],e,n||typeof t.type!="function");n||Km(t.__e),t.__c=t.__=t.__e=void 0}function $5(t,e,n){return this.constructor(t,n)}function J1(t,e,n){var r,i,a,o;e==document&&(e=document.documentElement),Lt.__&&Lt.__(t,e),i=(r=typeof n=="function")?null:e.__k,a=[],o=[],Ym(e,t=(!r&&n||e).__k=G1(Ou,null,[t]),i||Ic,Ic,e.namespaceURI,!r&&n?[n]:i?null:e.firstChild?Mu.call(e.childNodes):null,a,!r&&n?n:i?i.__e:e.firstChild,r,o),Y1(a,t,o)}Mu=V1.slice,Lt={__e:function(t,e,n,r){for(var i,a,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),o=i.__d),o)return i.__E=i}catch(c){t=c}throw t}},F1=0,fd.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ms({},this.state),typeof t=="function"&&(t=t(ms({},n),this.props)),t&&ms(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),fy(this))},fd.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),fy(this))},fd.prototype.render=Ou,Bi=[],z1=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U1=function(t,e){return t.__v.__b-e.__v.__b},Fd.__r=0,H1=/(PointerCapture)$|Capture$/i,qm=0,gf=gy(!1),vf=gy(!0);var Q1=function(t,e,n,r){var i;e[0]=0;for(var a=1;a<e.length;a++){var o=e[a++],c=e[a]?(e[0]|=o?1:2,n[e[a++]]):e[++a];o===3?r[0]=c:o===4?r[1]=Object.assign(r[1]||{},c):o===5?(r[1]=r[1]||{})[e[++a]]=c:o===6?r[1][e[++a]]+=c+"":o?(i=t.apply(c,Q1(t,c,n,["",null])),r.push(i),c[0]?e[0]|=2:(e[a-2]=0,e[a]=i)):r.push(c)}return r},vy=new Map;function L5(t){var e=vy.get(this);return e||(e=new Map,vy.set(this,e)),(e=Q1(this,e.get(t)||(e.set(t,e=function(n){for(var r,i,a=1,o="",c="",l=[0],d=function(p){a===1&&(p||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,p,o):a===3&&(p||o)?(l.push(3,p,o),a=2):a===2&&o==="..."&&p?l.push(4,p,0):a===2&&o&&!p?l.push(5,0,!0,o):a>=5&&((o||!p&&a===5)&&(l.push(a,0,o,i),a=6),p&&(l.push(a,p,0,i),a=6)),o=""},u=0;u<n.length;u++){u&&(a===1&&d(),d(u));for(var h=0;h<n[u].length;h++)r=n[u][h],a===1?r==="<"?(d(),l=[l],a=3):o+=r:a===4?o==="--"&&r===">"?(a=1,o=""):o=r+o[0]:c?r===c?c="":o+=r:r==='"'||r==="'"?c=r:r===">"?(d(),a=1):a&&(r==="="?(a=5,i=o,o=""):r==="/"&&(a<5||n[u][h+1]===">")?(d(),a===3&&(l=l[0]),a=l,(l=l[0]).push(2,0,a),a=0):r===" "||r==="	"||r===`
`||r==="\r"?(d(),a=2):o+=r),a===3&&o==="!--"&&(a=4,l=l[0])}return d(),l}(t)),e),arguments,[])).length>1?e:e[0]}var Ht=L5.bind(G1),lo,qt,fp,xy,Mc=0,eE=[],Jt=Lt,yy=Jt.__b,by=Jt.__r,wy=Jt.diffed,_y=Jt.__c,jy=Jt.unmount,Ey=Jt.__;function $u(t,e){Jt.__h&&Jt.__h(qt,t,Mc||e),Mc=0;var n=qt.__H||(qt.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function mp(t){return Mc=1,B5(nE,t)}function B5(t,e,n){var r=$u(lo++,2);if(r.t=t,!r.__c&&(r.__=[nE(void 0,e),function(c){var l=r.__N?r.__N[0]:r.__[0],d=r.t(l,c);l!==d&&(r.__N=[d,r.__[1]],r.__c.setState({}))}],r.__c=qt,!qt.__f)){var i=function(c,l,d){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!a||a.call(this,c,l,d);var h=r.__c.props!==c;return u.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(h=!0)}}),a&&a.call(this,c,l,d)||h};qt.__f=!0;var a=qt.shouldComponentUpdate,o=qt.componentWillUpdate;qt.componentWillUpdate=function(c,l,d){if(this.__e){var u=a;a=void 0,i(c,l,d),a=u}o&&o.call(this,c,l,d)},qt.shouldComponentUpdate=i}return r.__N||r.__}function yf(t,e){var n=$u(lo++,3);!Jt.__s&&Xm(n.__H,e)&&(n.__=t,n.u=e,qt.__H.__h.push(n))}function bf(t,e){var n=$u(lo++,4);!Jt.__s&&Xm(n.__H,e)&&(n.__=t,n.u=e,qt.__h.push(n))}function tE(t){return Mc=5,Fa(function(){return{current:t}},[])}function Fa(t,e){var n=$u(lo++,7);return Xm(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qo(t,e){return Mc=8,Fa(function(){return t},e)}function F5(){for(var t;t=eE.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(md),t.__H.__h.forEach(wf),t.__H.__h=[]}catch(e){t.__H.__h=[],Jt.__e(e,t.__v)}}Jt.__b=function(t){qt=null,yy&&yy(t)},Jt.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ey&&Ey(t,e)},Jt.__r=function(t){by&&by(t),lo=0;var e=(qt=t.__c).__H;e&&(fp===qt?(e.__h=[],qt.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(md),e.__h.forEach(wf),e.__h=[],lo=0)),fp=qt},Jt.diffed=function(t){wy&&wy(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(eE.push(e)!==1&&xy===Jt.requestAnimationFrame||((xy=Jt.requestAnimationFrame)||z5)(F5)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),fp=qt=null},Jt.__c=function(t,e){e.some(function(n){try{n.__h.forEach(md),n.__h=n.__h.filter(function(r){return!r.__||wf(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Jt.__e(r,n.__v)}}),_y&&_y(t,e)},Jt.unmount=function(t){jy&&jy(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{md(r)}catch(i){e=i}}),n.__H=void 0,e&&Jt.__e(e,n.__v))};var Ny=typeof requestAnimationFrame=="function";function z5(t){var e,n=function(){clearTimeout(r),Ny&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);Ny&&(e=requestAnimationFrame(n))}function md(t){var e=qt,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),qt=e}function wf(t){var e=qt;t.__c=t.__(),qt=e}function Xm(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function nE(t,e){return typeof e=="function"?e(t):e}function U5(t){const{headerEntries:e,onSelect:n,selectedEntry:r,setSelectedEntry:i,title:a}=t,o=Fa(()=>H5(e),[e]),c=d=>d.action&&!d.disabled,l=(d,u)=>{if(c(u))return n(d,u)};return Ht`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${a}>${a}</h3>
      ${o.map(d=>Ht`
        <ul key=${d.id} class="djs-popup-header-group" data-header-group=${d.id}>

          ${d.entries.map(u=>Ht`
            <li key=${u.id}>
              <${c(u)?"button":"span"}
                class=${V5(u,u===r)}
                onClick=${h=>l(h,u)}
                title=${u.title||u.label}
                data-id=${u.id}
                aria-disabled=${u.disabled||void 0}
                onMouseEnter=${()=>c(u)&&i(u)}
                onMouseLeave=${()=>c(u)&&i(null)}
                onFocus=${()=>c(u)&&i(u)}
                onBlur=${()=>c(u)&&i(null)}
              >
                ${u.imageUrl&&Ht`<img class="djs-popup-entry-icon" src=${u.imageUrl} alt="" />`||u.imageHtml&&Ht`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:u.imageHtml}} />`}
                ${u.label?Ht`
                  <span class="djs-popup-label">${u.label}</span>
                `:null}
              </${u.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function H5(t){return t.reduce((e,n)=>{const r=n.group||"default",i=e.find(a=>a.id===r);return i?i.entries.push(n):e.push({id:r,entries:[n]}),e},[])}function V5(t,e){return Ja("entry",t.className,t.active?"active":"",t.disabled?"disabled":"",e?"selected":"")}function G5(t){const{entry:e,selected:n,onMouseEnter:r,onMouseLeave:i,onAction:a}=t,o=(c,l)=>{if(!e.disabled)return a(c,e,l)};return Ht`
    <li
      class=${Ja("entry",{selected:n,disabled:e.disabled})}
      data-id=${e.id}
      title=${e.title||e.label}
      aria-disabled=${e.disabled||void 0}
      tabIndex="0"
      onClick=${o}
      onFocus=${r}
      onBlur=${i}
      onMouseEnter=${r}
      onMouseLeave=${i}
      onDragStart=${c=>o(c,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Ja("djs-popup-entry-name",e.className)}
        >
          ${e.imageUrl&&Ht`<img class="djs-popup-entry-icon" src=${e.imageUrl} alt="" />`||e.imageHtml&&Ht`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:e.imageHtml}} />`}

          ${e.label?Ht`
            <span class="djs-popup-label">
              ${e.label}
            </span>
          `:null}
        </span>
        ${e.description&&Ht`
          <span
            class="djs-popup-entry-description"
            title=${e.description}
          >
            ${e.description}
          </span>
        `}
      </div>
      ${e.documentationRef&&Ht`
        <div class="djs-popup-entry-docs">
          <a
            href="${e.documentationRef}"
            onClick=${c=>c.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function W5(t){const{selectedEntry:e,setSelectedEntry:n,groupedEntries:r,...i}=t,a=tE();return bf(()=>{const o=a.current;if(!o)return;const c=o.querySelector(".selected");c&&q5(c)},[e]),Ht`
    <div class="djs-popup-results" ref=${a}>
      ${r.map(o=>Ht`
        ${o.name&&Ht`
          <div key=${o.id} class="entry-header" title=${o.name}>
            ${o.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${o.id}>
          ${o.entries.map(c=>Ht`
            <${G5}
              key=${c.id}
              entry=${c}
              selected=${c===e}
              onMouseEnter=${()=>n(c)}
              onMouseLeave=${()=>n(null)}
              ...${i}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function q5(t){typeof t.scrollIntoViewIfNeeded=="function"?t.scrollIntoViewIfNeeded():t.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function K5(t){const{onClose:e,onSelect:n,className:r,headerEntries:i,position:a,title:o,width:c,scale:l,search:d,emptyPlaceholder:u,searchFn:h,entries:p,onOpened:f,onClosed:m}=t,x=Fa(()=>Yn(d)?p.length>5:!1,[d,p]),[g,w]=mp(""),y=qo((K,F)=>{if(!x)return K;if(!F.trim())return K.filter(({rank:oe=0})=>oe>=0);const te=K.filter(({searchable:oe})=>oe!==!1);return h(te,F,{keys:["label","search","description"]}).map(({item:oe})=>oe)},[x]),[b,j]=mp(y(p,g)),[C,N]=mp(b[0]),k=Fa(()=>X5(b),[b]),P=qo(K=>{N(K[0]),j(K)},[j,N]);yf(()=>{P(y(p,g))},[g,p]);const T=qo(K=>{const F=Z5(k);let oe=F.indexOf(C)+K;oe<0&&(oe=F.length-1),oe>=F.length&&(oe=0),N(F[oe])},[k,C,N]),L=qo(K=>{if(K.key==="Enter"&&C)return C.disabled?void 0:n(K,C);if(K.key==="ArrowUp")return T(-1),K.preventDefault();if(K.key==="ArrowDown")return T(1),K.preventDefault()},[n,C,T]),R=qo(K=>{jw(K.target,"input")&&w(()=>K.target.value)},[w]);yf(()=>(f(),()=>{m()}),[]);const M=Fa(()=>o||i.length>0,[o,i]);return Ht`
    <${Sy}
      onClose=${e}
      onKeyup=${R}
      onKeydown=${L}
      className=${r}
      position=${a}
      width=${c}
      scale=${l}
    >
      ${M&&Ht`
        <${U5}
          headerEntries=${i}
          onSelect=${n}
          selectedEntry=${C}
          setSelectedEntry=${N}
          title=${o}
        />
      `}
      ${p.length>0&&Ht`
        <div class="djs-popup-body">

          ${x&&Ht`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${o}" />
          </div>
          `}

          <${W5}
            groupedEntries=${k}
            selectedEntry=${C}
            setSelectedEntry=${N}
            onAction=${n}
          />
        </div>
      `}
    ${u&&b.length===0&&Ht`
      <div class="djs-popup-no-results">${hr(u)?u(g):u}</div>
    `}
    </${Sy}>
  `}function Sy(t){const{onClose:e,onKeydown:n,onKeyup:r,className:i,children:a,position:o}=t,c=tE();return bf(()=>{if(typeof o!="function")return;const l=c.current,d=o(l);l.style.left=`${d.x}px`,l.style.top=`${d.y}px`},[c.current,o]),bf(()=>{const l=c.current;if(!l)return;(l.querySelector("input")||l).focus()},[]),yf(()=>{const l=u=>{if(u.key==="Escape")return u.preventDefault(),e()},d=u=>{if(!Gc(u.target,".djs-popup",!0))return e()};return document.documentElement.addEventListener("keydown",l),document.body.addEventListener("click",d),()=>{document.documentElement.removeEventListener("keydown",l),document.body.removeEventListener("click",d)}},[]),Ht`
    <div
      class=${Ja("djs-popup",i)}
      style=${Y5(t)}
      onKeydown=${n}
      onKeyup=${r}
      ref=${c}
      tabIndex="-1"
    >
      ${a}
    </div>
  `}function Y5(t){return{transform:`scale(${t.scale})`,width:`${t.width}px`,"transform-origin":"top left"}}function Z5(t){const e=[];return t.forEach(n=>{n.entries.forEach(r=>{e.push(r)})}),e}function X5(t){const e=[],n=a=>e.find(o=>a.id===o.id),r=a=>!!n(a),i=a=>typeof a=="string"?{id:a}:a;return t.forEach(a=>{const o=a.group?i(a.group):{id:"default"};r(o)?n(o).entries.push(a):e.push({...o,entries:[a]})}),e}var J5="data-id",rE=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],Q5=1e3;function Bt(t,e,n,r){this._eventBus=e,this._canvas=n,this._search=r,this._current=null;var i=Yn(t&&t.scale)?t.scale:{min:1,max:1};this._config={scale:i},e.on("diagram.destroy",()=>{this.close()}),e.on("element.changed",a=>{const o=this.isOpen()&&this._current.target;a.element===o&&this.refresh()})}Bt.$inject=["config.popupMenu","eventBus","canvas","search"];Bt.prototype._render=function(){const{position:t,providerId:e,entries:n,headerEntries:r,emptyPlaceholder:i,options:a}=this._current,o=Object.entries(n).map(([p,f])=>({id:p,...f})),c=Object.entries(r).map(([p,f])=>({id:p,...f})),l=t&&(p=>this._ensureVisible(p,t)),d=this._updateScale(this._current.container);J1(Ht`
      <${K5}
        onClose=${p=>this.close(p)}
        onSelect=${(p,f,m)=>this.trigger(p,f,m)}
        position=${l}
        className=${e}
        entries=${o}
        headerEntries=${c}
        emptyPlaceholder=${i}
        scale=${d}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        searchFn=${this._search}
        ...${{...a}}
      />
    `,this._current.container)};Bt.prototype.open=function(t,e,n,r){if(!t)throw new Error("target is missing");if(!e)throw new Error("providers for <"+e+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:i,headerEntries:a,emptyPlaceholder:o}=this._getContext(t,e);this._current={position:n,providerId:e,target:t,entries:i,headerEntries:a,emptyPlaceholder:o,container:this._createContainer({provider:e}),options:r},this._emit("open"),this._bindAutoClose(),this._render()};Bt.prototype.refresh=function(){if(!this.isOpen())return;const{target:t,providerId:e}=this._current,{entries:n,headerEntries:r,emptyPlaceholder:i}=this._getContext(t,e);this._current={...this._current,entries:n,headerEntries:r,emptyPlaceholder:i},this._emit("refresh"),this._render()};Bt.prototype._getContext=function(t,e){const n=this._getProviders(e);if(!n||!n.length)throw new Error("provider for <"+e+"> not found");const r=this._getEntries(t,n),i=this._getHeaderEntries(t,n),a=this._getEmptyPlaceholder(n);return{entries:r,headerEntries:i,emptyPlaceholder:a,empty:!(Object.keys(r).length||Object.keys(i).length)}};Bt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._canvas.restoreFocus(),this._current=null)};Bt.prototype.reset=function(){const t=this._current.container;J1(null,t),Za(t)};Bt.prototype._emit=function(t,e){this._eventBus.fire(`popupMenu.${t}`,e)};Bt.prototype._onOpened=function(){this._emit("opened")};Bt.prototype._onClosed=function(){this._emit("closed")};Bt.prototype._createContainer=function(t){var e=this._canvas,n=e.getContainer();const r=vn(`<div class="djs-popup-parent djs-scrollable" data-popup=${t.provider}></div>`);return n.appendChild(r),r};Bt.prototype._bindAutoClose=function(){this._eventBus.once(rE,this.close,this)};Bt.prototype._unbindAutoClose=function(){this._eventBus.off(rE,this.close,this)};Bt.prototype._updateScale=function(){var t=this._canvas.zoom(),e=this._config.scale,n,r,i=t;return e!==!0&&(e===!1?(n=1,r=1):(n=e.min,r=e.max),Yn(n)&&t<n&&(i=n),Yn(r)&&t>r&&(i=r)),i};Bt.prototype._ensureVisible=function(t,e){var n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect(),i={},a=e.x,o=e.y;return e.x+r.width>n.width&&(i.x=!0),e.y+r.height>n.height&&(i.y=!0),i.x&&i.y?(a=e.x-r.width,o=e.y-r.height):i.x?(a=e.x-r.width,o=e.y):i.y&&e.y<r.height?(a=e.x,o=10):i.y&&(a=e.x,o=e.y-r.height),e.y<n.top&&(o=e.y+r.height),{x:a,y:o}};Bt.prototype.isEmpty=function(t,e){if(!t)throw new Error("target is missing");if(!e)throw new Error("provider ID is missing");const n=this._getProviders(e);return!n||!n.length?!0:this._getContext(t,e).empty};Bt.prototype.registerProvider=function(t,e,n){n||(n=e,e=Q5),this._eventBus.on("popupMenu.getProviders."+t,e,function(r){r.providers.push(n)})};Bt.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"popupMenu.getProviders."+t,providers:[]});return this._eventBus.fire(e),e.providers};Bt.prototype._getEntries=function(t,e){var n={};return O(e,function(r){if(!r.getPopupMenuEntries){O(r.getEntries(t),function(a){var o=a.id;if(!o)throw new Error("entry ID is missing");n[o]=Cs(a,["id"])});return}var i=r.getPopupMenuEntries(t);hr(i)?n=i(n):O(i,function(a,o){n[o]=a})}),n};Bt.prototype._getHeaderEntries=function(t,e){var n={};return O(e,function(r){if(!r.getPopupMenuHeaderEntries){if(!r.getHeaderEntries)return;O(r.getHeaderEntries(t),function(a){var o=a.id;if(!o)throw new Error("entry ID is missing");n[o]=Cs(a,["id"])});return}var i=r.getPopupMenuHeaderEntries(t);hr(i)?n=i(n):O(i,function(a,o){n[o]=a})}),n};Bt.prototype._getEmptyPlaceholder=function(t){const e=t.find(n=>hr(n.getEmptyPlaceholder));return e&&e.getEmptyPlaceholder()};Bt.prototype.isOpen=function(){return!!this._current};Bt.prototype.trigger=function(t,e,n="click"){if(t.preventDefault(),!e){let i=Gc(t.delegateTarget||t.target,".entry",!0),a=In(i,J5);e={id:a,...this._getEntry(a)}}const r=e.action;if(this._emit("trigger",{entry:e,event:t})!==!1){if(hr(r)){if(n==="click")return r(t,e)}else if(r[n])return r[n](t,e)}};Bt.prototype._getEntry=function(t){var e=this._current.entries[t]||this._current.headerEntries[t];if(!e)throw new Error("entry not found");return e};function e4(t,e,n){const{keys:r}=n;if(e=e.trim().toLowerCase(),!e)throw new Error("<pattern> must not be empty");const i=e.trim().toLowerCase().split(/\s+/);return t.flatMap(a=>{const o=t4(a,i,r);return o?{item:a,tokens:o}:[]}).sort(n4(r))}function t4(t,e,n){const{matchedWords:r,tokens:i}=n.reduce((a,o)=>{const c=t[o],{tokens:l,matchedWords:d}=tt(c)?c.reduce((u,h)=>{const{tokens:p,matchedWords:f}=Py(h,e);return{tokens:[...u.tokens,p],matchedWords:{...u.matchedWords,...f}}},{matchedWords:{},tokens:[]}):Py(c,e);return{tokens:{...a.tokens,[o]:l},matchedWords:{...a.matchedWords,...d}}},{matchedWords:{},tokens:{}});return Object.keys(r).length!==e.length?null:i}function n4(t){return(e,n)=>{let r=0,i=1;for(const a of t){const o=r4(e.tokens[a],n.tokens[a]);if(o!==0){r+=o*i,i*=.9;continue}const c=s4(e.item[a],n.item[a]);if(c!==0){r+=c*i,i*=.9;continue}}return r}}function r4(t,e){return ky(e)-ky(t)}function ky(t){return t.reduce((e,n)=>e+sE(n),0)}function sE(t){if(tt(t))return Math.max(...t.map(sE));const e=Math.log(t.value.length);return t.match?(t.start?t.end?131.9:7.87:t.wordStart?2.19:1)*e:-.07*e}function Cy(t=""){return tt(t)?t.join(", "):t}function s4(t,e){return Cy(t).localeCompare(Cy(e))}function Py(t,e){if(!t)return{tokens:[],matchedWords:{}};const n=[],r={},i=e.map(i4),a=[`(?<all>${i.join("\\s+")})`,...i].join("|"),o=new RegExp(a,"ig");let c,l=0;for(;c=o.exec(t);){const[d]=c,u=c.index,h=c.index+d.length,p=u===0,f=h===t.length,m=!!c.groups.all,x=p||/\s/.test(t.charAt(u-1)),g=f||/\s/.test(t.charAt(h));c.index>l&&n.push({value:t.slice(l,c.index),index:l}),n.push({value:d,index:c.index,match:!0,wordStart:x,wordEnd:g,start:p,end:f,all:m});const w=m?e:[d];for(const y of w)r[y.toLowerCase()]=!0;l=c.index+d.length}return l<t.length&&n.push({value:t.slice(l),index:l}),{tokens:n,matchedWords:r}}function i4(t){return t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}const iE={search:["value",e4]},Jm={__depends__:[iE],__init__:["popupMenu"],popupMenu:["type",Bt]};var aE={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},a4=900;function Eo(t,e,n,r){t.registerProvider(a4,this),this._contextPad=t,this._popupMenu=e,this._translate=n,this._canvas=r}Eo.$inject=["contextPad","popupMenu","translate","canvas"];Eo.prototype.getMultiElementContextPadEntries=function(t){var e={};return this._isAllowed(t)&&B(e,this._getEntries(t)),e};Eo.prototype._isAllowed=function(t){return!this._popupMenu.isEmpty(t,"align-elements")};Eo.prototype._getEntries=function(){var t=this;return{"align-elements":{group:"align-elements",title:t._translate("Align elements"),html:`<div class="entry">${aE.align}</div>`,action:{click:function(e,n){var r=t._getMenuPosition(n);B(r,{cursor:{x:e.x,y:e.y}}),t._popupMenu.open(n,"align-elements",r)}}}}};Eo.prototype._getMenuPosition=function(t){var e=5,n=this._contextPad.getPad(t).html,r=n.getBoundingClientRect(),i={x:r.left,y:r.bottom+e};return i};var o4=["left","center","right","top","middle","bottom"];function rl(t,e,n,r){this._alignElements=e,this._translate=n,this._popupMenu=t,this._rules=r,t.registerProvider("align-elements",this)}rl.$inject=["popupMenu","alignElements","translate","rules"];rl.prototype.getPopupMenuEntries=function(t){var e={};return this._isAllowed(t)&&B(e,this._getEntries(t)),e};rl.prototype._isAllowed=function(t){return this._rules.allowed("elements.align",{elements:t})};rl.prototype._getEntries=function(t){var e=this._alignElements,n=this._translate,r=this._popupMenu,i={};return O(o4,function(a){i["align-elements-"+a]={group:"align",title:n("Align elements "+a),className:"bjs-align-elements-menu-entry",imageHtml:aE[a],action:function(){e.trigger(t,a),r.close()}}}),i};function gr(t){Z.call(this,t),this.init()}gr.$inject=["eventBus"];ve(gr,Z);gr.prototype.addRule=function(t,e,n){var r=this;typeof t=="string"&&(t=[t]),t.forEach(function(i){r.canExecute(i,e,function(a,o,c){return n(a)},!0)})};gr.prototype.init=function(){};function Lu(t){gr.call(this,t)}Lu.$inject=["eventBus"];ve(Lu,gr);Lu.prototype.init=function(){this.addRule("elements.align",function(t){var e=t.elements,n=rt(e,function(r){return!(r.waypoints||r.host||r.labelTarget)});return n=ru(n),n.length<2?!1:n})};const c4={__depends__:[j5,B1,Jm],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Eo],alignElementsMenuProvider:["type",rl],bpmnAlignElements:["type",Lu]};var l4=10,oE=50,d4=250;function Qm(t,e,n,r){for(var i;i=u4(t,n,e);)n=r(e,n,i);return n}function eg(t){return function(e,n,r){var i={x:n.x,y:n.y};return["x","y"].forEach(function(a){var o=t[a];if(o){var c=a==="x"?"width":"height",l=o.margin,d=o.minDistance;l<0?i[a]=Math.min(r[a]+l-e[c]/2,n[a]-d+l):i[a]=Math.max(r[a]+r[c]+l+e[c]/2,n[a]+d+l)}}),i}}function u4(t,e,n){var r={x:e.x-n.width/2,y:e.y-n.height/2,width:n.width,height:n.height},i=p4(t);return Dt(i,function(a){if(a===n)return!1;var o=_n(a,r,l4);return o==="intersect"})}function h4(t,e){e||(e={});function n(m){return m.source===t?1:-1}var r=e.defaultDistance||oE,i=e.direction||"e",a=e.filter,o=e.getWeight||n,c=e.maxDistance||d4,l=e.reference||"start";a||(a=g4);function d(m,x){return i==="n"?l==="start"?Ne(m).top-Ne(x).bottom:l==="center"?Ne(m).top-Te(x).y:Ne(m).top-Ne(x).top:i==="w"?l==="start"?Ne(m).left-Ne(x).right:l==="center"?Ne(m).left-Te(x).x:Ne(m).left-Ne(x).left:i==="s"?l==="start"?Ne(x).top-Ne(m).bottom:l==="center"?Te(x).y-Ne(m).bottom:Ne(x).bottom-Ne(m).bottom:l==="start"?Ne(x).left-Ne(m).right:l==="center"?Te(x).x-Ne(m).right:Ne(x).right-Ne(m).right}var u=t.incoming.filter(a).map(function(m){var x=o(m),g=x<0?d(m.source,t):d(t,m.source);return{id:m.source.id,distance:g,weight:x}}),h=t.outgoing.filter(a).map(function(m){var x=o(m),g=x>0?d(t,m.target):d(m.target,t);return{id:m.target.id,distance:g,weight:x}}),p=u.concat(h).reduce(function(m,x){return m[x.id+"__weight_"+x.weight]=x,m},{}),f=hi(p,function(m,x){var g=x.distance,w=x.weight;return g<0||g>c||(m[String(g)]||(m[String(g)]=0),m[String(g)]+=1*w,(!m.distance||m[m.distance]<m[String(g)])&&(m.distance=g)),m},{});return f.distance||r}function p4(t){var e=gp(t);return t.host&&(e=e.concat(gp(t.host))),t.attachers&&(e=e.concat(t.attachers.reduce(function(n,r){return n.concat(gp(r))},[]))),e}function gp(t){return m4(t).concat(f4(t))}function f4(t){return t.incoming.map(function(e){return e.source})}function m4(t){return t.outgoing.map(function(e){return e.target})}function g4(){return!0}var v4=100;function cE(t,e,n){t.on("autoPlace",v4,function(r){var i=r.shape,a=r.source;return x4(a,i)}),t.on("autoPlace.end",function(r){n.scrollToElement(r.shape)}),this.append=function(r,i,a){t.fire("autoPlace.start",{source:r,shape:i});var o=t.fire("autoPlace",{source:r,shape:i}),c=e.appendShape(r,i,o,r.parent,a);return t.fire("autoPlace.end",{source:r,shape:c}),c}}cE.$inject=["eventBus","modeling","canvas"];function x4(t,e,n){n||(n={});var r=n.defaultDistance||oE,i=Te(t),a=Ne(t);return{x:a.right+r+e.width/2,y:i.y}}function lE(t,e){t.on("autoPlace.end",500,function(n){e.select(n.shape)})}lE.$inject=["eventBus","selection"];const y4={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",cE],autoPlaceSelectionBehavior:["type",lE]};function uo(t,e){for(su(e)&&(e=[e]);t=t.parent;)if(ze(t,e))return t;return null}function dE(t,e){var n=uo(t,"bpmn:Process");if(n)return!0;var r=["bpmn:Participant","bpmn:Lane"];if(n=uo(t,r),n)return xn(n);if(ze(t,r))return xn(t);var i;for(i=de(t);i&&!_(i,"bpmn:Process");i=i.$parent);if(!e)return!0;var a=e.find(function(o){var c=de(o);return c&&c.get("processRef")===i});return a?xn(a):!0}function uE(t,e,n){var r=dE(t,n);if(_(e,"bpmn:TextAnnotation"))return w4(t,e,r);if(ze(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return _4(t,e,r);if(_(e,"bpmn:FlowNode"))return b4(t,e,r)}function b4(t,e,n){var r=Ne(t),i=Te(t),a=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},o=h4(t,{filter:function(f){return _(f,"bpmn:SequenceFlow")},direction:a.directionHint}),c=30,l=a.minDistance,d=a.baseOrientation;_(t,"bpmn:BoundaryEvent")&&(d=_n(t,t.host,-25),d.indexOf(a.boundaryOrientation)!==-1&&(c*=-1));var u=n?{x:r.right+o+e.width/2,y:i.y+Ty(d,l,a)}:{x:i.x+Ty(d,l,a),y:r.bottom+o+e.height/2},h={margin:c,minDistance:l},p=n?{y:h}:{x:h};return Qm(t,e,u,eg(p))}function Ty(t,e,n){return t.includes(n.start)?-1*e:t.includes(n.end)?e:0}function w4(t,e,n){var r=Ne(t),i=n?{x:r.right+e.width/2,y:r.top-50-e.height/2}:{x:r.right+50+e.width/2,y:r.bottom+e.height/2};jt(t)&&(i=Te(t),n?(i.x+=100,i.y-=50):(i.x+=100,i.y+=50));var a={margin:n?-30:30,minDistance:20},o=n?{y:a}:{x:a};return Qm(t,e,i,eg(o))}function _4(t,e,n){var r=Ne(t),i=n?{x:r.right-10+e.width/2,y:r.bottom+40+e.width/2}:{x:r.left-40-e.width/2,y:r.bottom-10+e.height/2},a={margin:30,minDistance:30},o=n?{x:a}:{y:a};return Qm(t,e,i,eg(o))}function hE(t,e){t.on("autoPlace",function(n){var r=n.shape,i=n.source;return uE(i,r,e)})}hE.$inject=["eventBus","elementRegistry"];const tg={__depends__:[y4],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",hE]};function Ts(t,e,n,r){Z.call(this,t),this._elementRegistry=e,this._modeling=n,this._rules=r;var i=this;this.postExecuted(["shape.create"],function(a){var o=a.context,c=o.hints||{},l=o.shape,d=o.parent||o.newParent;c.autoResize!==!1&&i._expand([l],d)}),this.postExecuted(["elements.move"],function(a){var o=a.context,c=em(iu(o.closure.topLevel)),l=o.hints,d=l?l.autoResize:!0;if(d!==!1){var u=au(c,function(h){return h.parent.id});O(u,function(h,p){tt(d)&&(h=h.filter(function(f){return Dt(d,gs({id:f.id}))})),i._expand(h,p)})}}),this.postExecuted(["shape.toggleCollapse"],function(a){var o=a.context,c=o.hints,l=o.shape;c&&c.autoResize===!1||l.collapsed||i._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(a){var o=a.context,c=o.hints,l=o.shape,d=l.parent;c&&c.autoResize===!1||d&&i._expand([l],d)})}Ts.$inject=["eventBus","elementRegistry","modeling","rules"];ve(Ts,Z);Ts.prototype._getOptimalBounds=function(t,e){var n=this.getOffset(e),r=this.getPadding(e),i=Ne(Mn(t)),a=Ne(e),o={};return i.top-a.top<r.top&&(o.top=i.top-n.top),i.left-a.left<r.left&&(o.left=i.left-n.left),a.right-i.right<r.right&&(o.right=i.right+n.right),a.bottom-i.bottom<r.bottom&&(o.bottom=i.bottom+n.bottom),tm(B({},a,o))};Ts.prototype._expand=function(t,e){typeof e=="string"&&(e=this._elementRegistry.get(e));var n=this._rules.allowed("element.autoResize",{elements:t,target:e});if(n){var r=this._getOptimalBounds(t,e);if(j4(r,e)){var i=E4(Xr(e,["x","y","width","height"]),r);this.resize(e,r,{autoResize:i});var a=e.parent;a&&this._expand([e],a)}}};Ts.prototype.getOffset=function(t){return{top:60,bottom:60,left:100,right:100}};Ts.prototype.getPadding=function(t){return{top:2,bottom:2,left:15,right:15}};Ts.prototype.resize=function(t,e,n){this._modeling.resizeShape(t,e,null,n)};function j4(t,e){return t.x!==e.x||t.y!==e.y||t.width!==e.width||t.height!==e.height}function E4(t,e){var n="";return t=Ne(t),e=Ne(e),t.top>e.top&&(n=n.concat("n")),t.right<e.right&&(n=n.concat("w")),t.bottom<e.bottom&&(n=n.concat("s")),t.left>e.left&&(n=n.concat("e")),n}function Bu(t){t.invoke(Ts,this)}Bu.$inject=["injector"];ve(Bu,Ts);Bu.prototype.resize=function(t,e,n){_(t,"bpmn:Participant")?this._modeling.resizeLane(t,e,null,n):this._modeling.resizeShape(t,e,null,n)};function sl(t){gr.call(this,t);var e=this;this.addRule("element.autoResize",function(n){return e.canResize(n.elements,n.target)})}sl.$inject=["eventBus"];ve(sl,gr);sl.prototype.canResize=function(t,e){return!1};function Fu(t,e){sl.call(this,t),this._modeling=e}ve(Fu,sl);Fu.$inject=["eventBus","modeling"];Fu.prototype.canResize=function(t,e){if(_(e.di,"bpmndi:BPMNPlane")||!_(e,"bpmn:Participant")&&!_(e,"bpmn:Lane")&&!_(e,"bpmn:SubProcess"))return!1;var n=!0;return O(t,function(r){if(_(r,"bpmn:Lane")||it(r)){n=!1;return}}),n};const N4={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Bu],bpmnAutoResizeProvider:["type",Fu]};var Ry=1500;function pE(t,e,n){var r=this,i=n.get("dragging",!1);function a(o){if(!o.hover){var c=o.originalEvent,l=r._findTargetGfx(c),d=l&&t.get(l);l&&d&&(o.stopPropagation(),i.hover({element:d,gfx:l}),i.move(c))}}i&&e.on("drag.start",function(o){e.once("drag.move",Ry,function(c){a(c)})}),function(){var o,c;e.on("element.hover",function(l){o=l.gfx,c=l.element}),e.on("element.hover",Ry,function(l){c&&e.fire("element.out",{element:c,gfx:o})}),e.on("element.out",function(){o=null,c=null})}(),this._findTargetGfx=function(o){var c,l;if(o instanceof MouseEvent)return c=Zi(o),l=document.elementFromPoint(c.x,c.y),S4(l)}}pE.$inject=["elementRegistry","eventBus","injector"];function S4(t){return Gc(t,"svg, .djs-element",!0)}const k4={__init__:["hoverFix"],hoverFix:["type",pE]};var wa=Math.round,Ay="djs-drag-active";function Ai(t){t.preventDefault()}function C4(t){return typeof TouchEvent<"u"&&t instanceof TouchEvent}function P4(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function fE(t,e,n,r){var i={threshold:5,trapClick:!0},a;function o(b){var j=e.viewbox(),C=e._container.getBoundingClientRect();return{x:j.x+(b.x-C.left)/j.scale,y:j.y+(b.y-C.top)/j.scale}}function c(b,j){j=j||a;var C=t.createEvent(B({},j.payload,j.data,{isTouch:j.isTouch}));return t.fire("drag."+b,C)===!1?!1:t.fire(j.prefix+"."+b,C)}function l(b){var j=b.filter(function(C){return r.get(C.id)});j.length&&n.select(j)}function d(b,j){var C=a.payload,N=a.displacement,k=a.globalStart,P=Zi(b),T=Ir(P,k),L=a.localStart,R=o(P),M=Ir(R,L);if(!a.active&&(j||P4(T)>a.threshold)){if(B(C,{x:wa(L.x+N.x),y:wa(L.y+N.y),dx:0,dy:0},{originalEvent:b}),c("start")===!1)return g();a.active=!0,a.keepSelection||(C.previousSelection=n.get(),n.select(null)),a.cursor&&Iu(a.cursor),e.addMarker(e.getRootElement(),Ay)}Hh(b),a.active&&(B(C,{x:wa(R.x+N.x),y:wa(R.y+N.y),dx:wa(M.x),dy:wa(M.y)},{originalEvent:b}),c("move"))}function u(b){var j,C=!0;a.active&&(b&&(a.payload.originalEvent=b,Hh(b)),C=c("end")),C===!1&&c("rejected"),j=w(C!==!0),c("ended",j)}function h(b){mn("Escape",b)&&(Ai(b),g())}function p(b){var j;a.active&&(j=I1(t),setTimeout(j,400),Ai(b)),u(b)}function f(b){d(b)}function m(b){var j=a.payload;j.hoverGfx=b.gfx,j.hover=b.element,c("hover")}function x(b){c("out");var j=a.payload;j.hoverGfx=null,j.hover=null}function g(b){var j;if(a){var C=a.active;C&&c("cancel"),j=w(b),C&&c("canceled",j)}}function w(b){var j,C;c("cleanup"),A1(),a.trapClick?C=p:C=u,Ae.unbind(document,"mousemove",d),Ae.unbind(document,"dragstart",Ai),Ae.unbind(document,"selectstart",Ai),Ae.unbind(document,"mousedown",C,!0),Ae.unbind(document,"mouseup",C,!0),Ae.unbind(document,"keyup",h),Ae.unbind(document,"touchstart",f,!0),Ae.unbind(document,"touchcancel",g,!0),Ae.unbind(document,"touchmove",d,!0),Ae.unbind(document,"touchend",u,!0),t.off("element.hover",m),t.off("element.out",x),e.removeMarker(e.getRootElement(),Ay);var N=a.payload.previousSelection;return b!==!1&&N&&!n.get().length&&l(N),j=a,a=null,j}function y(b,j,C,N){a&&g(!1),typeof j=="string"&&(N=C,C=j,j=null),N=B({},i,N||{});var k=N.data||{},P,T,L,R,M;N.trapClick?R=p:R=u,b?(P=Ew(b)||b,T=Zi(b),Hh(b),P.type==="dragstart"&&Ai(P)):(P=null,T={x:0,y:0}),L=o(T),j||(j=L),M=C4(P),a=B({prefix:C,data:k,payload:{},globalStart:T,displacement:Ir(j,L),localStart:L,isTouch:M},N),N.manual||(M?(Ae.bind(document,"touchstart",f,!0),Ae.bind(document,"touchcancel",g,!0),Ae.bind(document,"touchmove",d,!0),Ae.bind(document,"touchend",u,!0)):(Ae.bind(document,"mousemove",d),Ae.bind(document,"dragstart",Ai),Ae.bind(document,"selectstart",Ai),Ae.bind(document,"mousedown",R,!0),Ae.bind(document,"mouseup",R,!0)),Ae.bind(document,"keyup",h),t.on("element.hover",m),t.on("element.out",x)),c("init"),N.autoActivate&&d(b,!0)}t.on("diagram.destroy",g),this.init=y,this.move=d,this.hover=m,this.out=x,this.end=u,this.cancel=g,this.context=function(){return a},this.setOptions=function(b){B(i,b)}}fE.$inject=["eventBus","canvas","selection","elementRegistry"];const Rs={__depends__:[k4,Jr],dragging:["type",fE]};function No(t,e,n){this._canvas=n,this._opts=B({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},t);var r=this;e.on("drag.move",function(i){var a=r._toBorderPoint(i);r.startScroll(a)}),e.on(["drag.cleanup"],function(){r.stopScroll()})}No.$inject=["config.autoScroll","eventBus","canvas"];No.prototype.startScroll=function(t){var e=this._canvas,n=this._opts,r=this,i=e.getContainer().getBoundingClientRect(),a=[t.x,t.y,i.width-t.x,i.height-t.y];this.stopScroll();for(var o=0,c=0,l=0;l<4;l++)T4(a[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?o=n.scrollStep:l==1?c=n.scrollStep:l==2?o=-n.scrollStep:l==3&&(c=-n.scrollStep));(o!==0||c!==0)&&(e.scroll({dx:o,dy:c}),this._scrolling=setTimeout(function(){r.startScroll(t)},n.scrollRepeatTimeout))};function T4(t,e,n){return e<t&&t<n}No.prototype.stopScroll=function(){clearTimeout(this._scrolling)};No.prototype.setOptions=function(t){this._opts=B({},this._opts,t)};No.prototype._toBorderPoint=function(t){var e=this._canvas._container.getBoundingClientRect(),n=Zi(t.originalEvent);return{x:n.x-e.left,y:n.y-e.top}};const R4={__depends__:[Rs],__init__:["autoScroll"],autoScroll:["type",No]};function ng(t){this._commandStack=t.get("commandStack",!1)}ng.$inject=["injector"];ng.prototype.allowed=function(t,e){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(t,e)),n===void 0?!0:n};const ts={__init__:["rules"],rules:["type",ng]};var Wl=Math.round,A4=Math.max;function I4(t,e){var n=t.x,r=t.y;return[["M",n,r],["m",0,-e],["a",e,e,0,1,1,0,2*e],["a",e,e,0,1,1,0,-2*e],["z"]]}function M4(t){var e=[];return t.forEach(function(n,r){e.push([r===0?"M":"L",n.x,n.y])}),e}var mE=10;function D4(t,e){var n,r;for(n=0;r=t[n];n++)if(Nw(r,e)<=mE)return{point:t[n],bendpoint:!0,index:n};return null}function O4(t,e){var n=eC(I4(e,mE),M4(t)),r=n[0],i=n[n.length-1],a;return r?r!==i?r.segment2!==i.segment2?(a=A4(r.segment2,i.segment2)-1,{point:t[a],bendpoint:!0,index:a}):{point:{x:Wl(r.x+i.x)/2,y:Wl(r.y+i.y)/2},index:r.segment2}:{point:{x:Wl(r.x),y:Wl(r.y)},index:r.segment2}:null}function _f(t,e){return D4(t,e)||O4(t,e)}function gE(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function Iy(t){return Math.atan((t[1].y-t[0].y)/(t[1].x-t[0].x))}function $4(t,e){return e?{x:Math.cos(e)*t.x-Math.sin(e)*t.y,y:Math.sin(e)*t.x+Math.cos(e)*t.y}:t}function L4(t,e,n){var r=[{n:t[0]-n[0],lambda:e[0]},{n:t[1]-n[1],lambda:e[1]}],i=r[0].n*e[0]+r[1].n*e[1],a=r[0].lambda*e[0]+r[1].lambda*e[1];return-i/a}function rg(t,e){var n=e[0],r=e[1],i={x:r.x-n.x,y:r.y-n.y},a=L4([n.x,n.y],[i.x,i.y],[t.x,t.y]);return{x:n.x+a*i.x,y:n.y+a*i.y}}function vE(t,e){var n=rg(t,e),r={x:n.x-t.x,y:n.y-t.y};return gE(r)}function zd(t,e){return gE({x:t.x-e.x,y:t.y-e.y})}var xE="djs-bendpoint",yE="djs-segment-dragger";function B4(t,e){var n=Zi(e),r=t._container.getBoundingClientRect(),i;i={x:r.left,y:r.top};var a=t.viewbox();return{x:a.x+(n.x-i.x)/a.scale,y:a.y+(n.y-i.y)/a.scale}}function jf(t,e,n){var r=B4(t,n),i=_f(e,r);return i}function Ef(t,e){var n=ie("g");St(n).add(xE),le(t,n);var r=ie("circle");q(r,{cx:0,cy:0,r:4}),St(r).add("djs-visual"),le(n,r);var i=ie("circle");return q(i,{cx:0,cy:0,r:10}),St(i).add("djs-hit"),le(n,i),e&&St(n).add(e),n}function F4(t,e,n,r){var i=ie("g");le(t,i);var a=18,o=6,c=11,l=U4(e,n,r),d=o+c,u=ie("rect");q(u,{x:-a/2,y:-o/2,width:a,height:o}),St(u).add("djs-visual"),le(i,u);var h=ie("rect");return q(h,{x:-l/2,y:-d/2,width:l,height:d}),St(h).add("djs-hit"),le(i,h),tC(i,r==="v"?90:0),i}function bE(t,e,n){var r=ie("g"),i=Ip(e,n),a=fs(e,n);return le(t,r),F4(r,e,n,a),St(r).add(yE),St(r).add(a==="h"?"horizontal":"vertical"),kn(r,i.x,i.y),r}function Nf(t){return Math.abs(Math.round(t*2/3))}function z4(t,e){var n=H4(t,e);return rg(t,n)}function U4(t,e,n){var r=e.x-t.x,i=e.y-t.y;return Nf(n==="h"?r:i)}function H4(t,e){for(var n=e.waypoints,r=1/0,i,a=0;a<n.length-1;a++){var o=n[a],c=n[a+1],l=vE(t,[o,c]);l<r&&(r=l,i=a)}return[n[i],n[i+1]]}function wE(t,e,n,r,i){function a(b,j,C){var N=b.index,k=b.point,P,T,L,R,M,K;return N<=0||b.bendpoint?!1:(P=j[N-1],T=j[N],L=Ip(P,T),R=fs(P,T),M=Math.abs(k.x-L.x),K=Math.abs(k.y-L.y),R&&M<=C&&K<=C)}function o(b,j){var C=b.waypoints,N,k,P,T;return j.index<=0||j.bendpoint||(N={start:C[j.index-1],end:C[j.index]},k=fs(N.start,N.end),!k)?null:(k==="h"?P=N.end.x-N.start.x:P=N.end.y-N.start.y,T=Nf(P)/2,T)}function c(b,j){var C=j.waypoints,N=jf(e,C,b),k;if(N)return k=o(j,N),a(N,C,k)?i.start(b,j,N.index):r.start(b,j,N.index,!N.bendpoint),!0}function l(b,j,C){Ae.bind(b,j,function(N){n.triggerMouseEvent(j,N,C),N.stopPropagation()})}function d(b,j){var C=e.getLayer("overlays"),N=Yt('.djs-bendpoints[data-element-id="'+yc(b.id)+'"]',C);return!N&&j&&(N=ie("g"),q(N,{"data-element-id":b.id}),St(N).add("djs-bendpoints"),le(C,N),l(N,"mousedown",b),l(N,"click",b),l(N,"dblclick",b)),N}function u(b,j){return Yt('.djs-segment-dragger[data-segment-idx="'+b+'"]',j)}function h(b,j){j.waypoints.forEach(function(C,N){var k=Ef(b);le(b,k),kn(k,C.x,C.y)}),Ef(b,"floating")}function p(b,j){for(var C=j.waypoints,N,k,P,T=1;T<C.length;T++)N=C[T-1],k=C[T],fs(N,k)&&(P=bE(b,N,k),q(P,{"data-segment-idx":T}),l(P,"mousemove",j))}function f(b){O(Gv("."+xE,b),function(j){Cn(j)})}function m(b){O(Gv("."+yE,b),function(j){Cn(j)})}function x(b){var j=d(b);return j||(j=d(b,!0),h(j,b),p(j,b)),j}function g(b){var j=d(b);j&&(m(j),f(j),p(j,b),h(j,b))}function w(b,j){var C=Yt(".floating",b),N=j.point;C&&kn(C,N.x,N.y)}function y(b,j,C){var N=u(j.index,b),k=C[j.index-1],P=C[j.index],T=j.point,L=Ip(k,P),R=fs(k,P),M,K;N&&(M=V4(N),K={x:T.x-L.x,y:T.y-L.y},R==="v"&&(K={x:K.y,y:K.x}),kn(M,K.x,K.y))}t.on("connection.changed",function(b){g(b.element)}),t.on("connection.remove",function(b){var j=d(b.element);j&&Cn(j)}),t.on("element.marker.update",function(b){var j=b.element,C;j.waypoints&&(C=x(j),b.add?St(C).add(b.marker):St(C).remove(b.marker))}),t.on("element.mousemove",function(b){var j=b.element,C=j.waypoints,N,k;if(C){if(N=d(j,!0),k=jf(e,C,b.originalEvent),!k)return;w(N,k),k.bendpoint||y(N,k,C)}}),t.on("element.mousedown",function(b){if(nm(b)){var j=b.originalEvent,C=b.element;if(C.waypoints)return c(j,C)}}),t.on("selection.changed",function(b){var j=b.newSelection,C=j[0];C&&C.waypoints&&x(C)}),t.on("element.hover",function(b){var j=b.element;j.waypoints&&(x(j),n.registerEvent(b.gfx,"mousemove","element.mousemove"))}),t.on("element.out",function(b){n.unregisterEvent(b.gfx,"mousemove","element.mousemove")}),t.on("element.updateId",function(b){var j=b.element,C=b.newId;if(j.waypoints){var N=d(j);N&&q(N,{"data-element-id":C})}}),this.addHandles=x,this.updateHandles=g,this.getBendpointsContainer=d,this.getSegmentDragger=u}wE.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function V4(t){return Yt(".djs-visual",t)}var My=Math.round,Oi="reconnectStart",$i="reconnectEnd",Ko="updateWaypoints";function sg(t,e,n,r,i,a){this._injector=t,this.start=function(o,c,l,d){var u=n.getGraphics(c),h=c.source,p=c.target,f=c.waypoints,m;!d&&l===0?m=Oi:!d&&l===f.length-1?m=$i:m=Ko;var x=m===Ko?"connection.updateWaypoints":"connection.reconnect",g=i.allowed(x,{connection:c,source:h,target:p});g===!1&&(g=i.allowed(x,{connection:c,source:p,target:h})),g!==!1&&r.init(o,"bendpoint.move",{data:{connection:c,connectionGfx:u,context:{allowed:g,bendpointIndex:l,connection:c,source:h,target:p,insert:d,type:m}}})},e.on("bendpoint.move.hover",function(o){var c=o.context,l=c.connection,d=l.source,u=l.target,h=o.hover,p=c.type;c.hover=h;var f;if(h){var m=p===Ko?"connection.updateWaypoints":"connection.reconnect";if(f=c.allowed=i.allowed(m,{connection:l,source:p===Oi?h:d,target:p===$i?h:u}),f){c.source=p===Oi?h:d,c.target=p===$i?h:u;return}f===!1&&(f=c.allowed=i.allowed(m,{connection:l,source:p===$i?h:u,target:p===Oi?h:d})),f&&(c.source=p===$i?h:u,c.target=p===Oi?h:d)}}),e.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(o){var c=o.context,l=c.type;c.hover=null,c.source=null,c.target=null,l!==Ko&&(c.allowed=!1)}),e.on("bendpoint.move.end",function(o){var c=o.context,l=c.allowed,d=c.bendpointIndex,u=c.connection,h=c.insert,p=u.waypoints.slice(),f=c.source,m=c.target,x=c.type,g=c.hints||{},w={x:My(o.x),y:My(o.y)};if(!l)return!1;x===Ko?(h?p.splice(d,0,w):p[d]=w,g.bendpointMove={insert:h,bendpointIndex:d},p=this.cropWaypoints(u,p),a.updateWaypoints(u,nC(p),g)):(x===Oi?(g.docking="source",Ud(c)&&(g.docking="target",g.newWaypoints=p.reverse())):x===$i&&(g.docking="target",Ud(c)&&(g.docking="source",g.newWaypoints=p.reverse())),a.reconnect(u,f,m,w,g))},this)}sg.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];sg.prototype.cropWaypoints=function(t,e){var n=this._injector.get("connectionDocking",!1);if(!n)return e;var r=t.waypoints;return t.waypoints=e,t.waypoints=n.getCroppedWaypoints(t),e=t.waypoints,t.waypoints=r,e};function Ud(t){var e=t.hover,n=t.source,r=t.target,i=t.type;if(i===Oi)return e&&r&&e===r&&n!==r;if(i===$i)return e&&n&&e===n&&n!==r}var G4="reconnectStart",W4="reconnectEnd",Dy="updateWaypoints",Yo="connect-ok",ql="connect-not-ok",Oy="connect-hover",$y="djs-updating",Ly="djs-dragging",By=1100;function _E(t,e,n,r){this._injector=e;var i=e.get("connectionPreview",!1);n.on("bendpoint.move.start",function(a){var o=a.context,c=o.bendpointIndex,l=o.connection,d=o.insert,u=l.waypoints,h=u.slice();o.waypoints=u,d&&h.splice(c,0,{x:a.x,y:a.y}),l.waypoints=h;var p=o.draggerGfx=Ef(r.getLayer("overlays"));St(p).add("djs-dragging"),r.addMarker(l,Ly),r.addMarker(l,$y)}),n.on("bendpoint.move.hover",function(a){var o=a.context,c=o.allowed,l=o.hover,d=o.type;if(l){if(r.addMarker(l,Oy),d===Dy)return;c?(r.removeMarker(l,ql),r.addMarker(l,Yo)):c===!1&&(r.removeMarker(l,Yo),r.addMarker(l,ql))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],By,function(a){var o=a.context,c=o.hover,l=o.target;c&&(r.removeMarker(c,Oy),r.removeMarker(c,l?Yo:ql))}),n.on("bendpoint.move.move",function(a){var o=a.context,c=o.allowed,l=o.bendpointIndex,d=o.draggerGfx,u=o.hover,h=o.type,p=o.connection,f=p.source,m=p.target,x=p.waypoints.slice(),g={x:a.x,y:a.y},w=o.hints||{},y={};i&&(w.connectionStart&&(y.connectionStart=w.connectionStart),w.connectionEnd&&(y.connectionEnd=w.connectionEnd),h===G4?Ud(o)?(y.connectionEnd=y.connectionEnd||g,y.source=m,y.target=u||f,x=x.reverse()):(y.connectionStart=y.connectionStart||g,y.source=u||f,y.target=m):h===W4?Ud(o)?(y.connectionStart=y.connectionStart||g,y.source=u||m,y.target=f,x=x.reverse()):(y.connectionEnd=y.connectionEnd||g,y.source=f,y.target=u||m):(y.noCropping=!0,y.noLayout=!0,x[l]=g),h===Dy&&(x=t.cropWaypoints(p,x)),y.waypoints=x,i.drawPreview(o,c,y)),kn(d,a.x,a.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],By,function(a){var o=a.context,c=o.connection,l=o.draggerGfx,d=o.hover,u=o.target,h=o.waypoints;c.waypoints=h,Cn(l),r.removeMarker(c,$y),r.removeMarker(c,Ly),d&&(r.removeMarker(d,Yo),r.removeMarker(d,u?Yo:ql)),i&&i.cleanUp(o)})}_E.$inject=["bendpointMove","injector","eventBus","canvas"];var Fy="connect-hover",zy="djs-updating";function Uy(t,e,n){return ig(t,e,t[e]+n)}function ig(t,e,n){return{x:e==="x"?n:t.x,y:e==="y"?n:t.y}}function q4(t,e,n,r){var i=Math.max(e[r],n[r]),a=Math.min(e[r],n[r]),o=20,c=Math.min(Math.max(a+o,t[r]),i-o);return ig(e,r,c)}function jE(t){return t==="x"?"y":"x"}function Hy(t,e,n){var r,i;return t.original?t.original:(r=Te(e),i=jE(n),ig(t,i,r[i]))}function EE(t,e,n,r,i,a){var o=t.get("connectionDocking",!1);this.start=function(h,p,f){var m,x=n.getGraphics(p),g=f-1,w=f,y=p.waypoints,b=y[g],j=y[w],C=jf(n,y,h),N,k,P;N=fs(b,j),N&&(k=N==="v"?"x":"y",g===0&&(b=Hy(b,p.source,k)),w===y.length-1&&(j=Hy(j,p.target,k)),C?P=C.point:P={x:(b.x+j.x)/2,y:(b.y+j.y)/2},m={connection:p,segmentStartIndex:g,segmentEndIndex:w,segmentStart:b,segmentEnd:j,axis:k,dragPosition:P},r.init(h,P,"connectionSegment.move",{cursor:k==="x"?"resize-ew":"resize-ns",data:{connection:p,connectionGfx:x,context:m}}))};function c(h,p){if(!o)return p;var f=h.waypoints,m;return h.waypoints=p,m=o.getCroppedWaypoints(h),h.waypoints=f,m}function l(h){i.update("connection",h.connection,h.connectionGfx)}function d(h,p,f){var m=h.newWaypoints,x=h.segmentStartIndex+p,g=m[x],w=h.segmentEndIndex+p,y=m[w],b=jE(h.axis),j=q4(f,g,y,b);kn(h.draggerGfx,j.x,j.y)}function u(h,p){var f=0,m=h.filter(function(x,g){return Sw(h[g-1],h[g+1],x)?(f=g<=p?f-1:f,!1):!0});return{waypoints:m,segmentOffset:f}}e.on("connectionSegment.move.start",function(h){var p=h.context,f=h.connection,m=n.getLayer("overlays");p.originalWaypoints=f.waypoints.slice(),p.draggerGfx=bE(m,p.segmentStart,p.segmentEnd),St(p.draggerGfx).add("djs-dragging"),n.addMarker(f,zy)}),e.on("connectionSegment.move.move",function(h){var p=h.context,f=p.connection,m=p.segmentStartIndex,x=p.segmentEndIndex,g=p.segmentStart,w=p.segmentEnd,y=p.axis,b=p.originalWaypoints.slice(),j=Uy(g,y,h["d"+y]),C=Uy(w,y,h["d"+y]),N=b.length,k=0;b[m]=j,b[x]=C;var P,T;m<2&&(P=_n(f.source,j),m===1?P==="intersect"&&(b.shift(),b[0]=j,k--):P!=="intersect"&&(b.unshift(g),k++)),x>N-3&&(T=_n(f.target,C),x===N-2?T==="intersect"&&(b.pop(),b[b.length-1]=C):T!=="intersect"&&b.push(w)),p.newWaypoints=f.waypoints=c(f,b),d(p,k,h),p.newSegmentStartIndex=m+k,l(h)}),e.on("connectionSegment.move.hover",function(h){h.context.hover=h.hover,n.addMarker(h.hover,Fy)}),e.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(h){var p=h.context.hover;p&&n.removeMarker(p,Fy)}),e.on("connectionSegment.move.cleanup",function(h){var p=h.context,f=p.connection;p.draggerGfx&&Cn(p.draggerGfx),n.removeMarker(f,zy)}),e.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(h){var p=h.context,f=p.connection;f.waypoints=p.originalWaypoints,l(h)}),e.on("connectionSegment.move.end",function(h){var p=h.context,f=p.connection,m=p.newWaypoints,x=p.newSegmentStartIndex;m=m.map(function(C){return{original:C.original,x:Math.round(C.x),y:Math.round(C.y)}});var g=u(m,x),w=g.waypoints,y=c(f,w),b=g.segmentOffset,j={segmentMove:{segmentStartIndex:p.segmentStartIndex,newSegmentStartIndex:x+b}};a.updateWaypoints(f,y,j)})}EE.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var K4=Math.abs,Vy=Math.round;function Y4(t,e,n){n=n===void 0?10:n;var r,i;for(r=0;r<e.length;r++)if(i=e[r],K4(i-t)<=n)return i}function NE(t){return{x:t.x,y:t.y}}function SE(t){return{x:t.x+t.width,y:t.y+t.height}}function lr(t,e){return!t||isNaN(t.x)||isNaN(t.y)?e:{x:Vy(t.x+t.width/2),y:Vy(t.y+t.height/2)}}function ho(t,e){var n=t.snapped;return n?typeof e=="string"?n[e]:n.x&&n.y:!1}function Kt(t,e,n){if(typeof e!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var r,i=t[e],a=t.snapped=t.snapped||{};return n===!1?a[e]=!1:(a[e]=!0,r=n-i,t[e]+=r,t["d"+e]+=r),i}function kE(t){return t.children||[]}var Z4=Math.abs,Gy=Math.round,vp=10;function CE(t){function e(a,o){if(tt(a)){for(var c=a.length;c--;)if(Z4(a[c]-o)<=vp)return a[c]}else{a=+a;var l=o%a;if(l<vp)return o-l;if(l>a-vp)return o-l+a}return o}function n(a,o){if(a.waypoints)return z4(o,a);if(a.width)return{x:Gy(a.width/2+a.x),y:Gy(a.height/2+a.y)}}function r(a){var o=a.context,c=o.snapPoints,l=o.connection,d=l.waypoints,u=o.segmentStart,h=o.segmentStartIndex,p=o.segmentEnd,f=o.segmentEndIndex,m=o.axis;if(c)return c;var x=[d[h-1],u,p,d[f+1]];return h<2&&x.unshift(n(l.source,a)),f>d.length-3&&x.unshift(n(l.target,a)),o.snapPoints=c={horizontal:[],vertical:[]},O(x,function(g){g&&(g=g.original||g,m==="y"&&c.horizontal.push(g.y),m==="x"&&c.vertical.push(g.x))}),c}t.on("connectionSegment.move.move",1500,function(a){var o=r(a),c=a.x,l=a.y,d,u;if(o){d=e(o.vertical,c),u=e(o.horizontal,l);var h=c-d,p=l-u;B(a,{dx:a.dx-h,dy:a.dy-p,x:d,y:u}),(h||o.vertical.indexOf(c)!==-1)&&Kt(a,"x",d),(p||o.horizontal.indexOf(l)!==-1)&&Kt(a,"y",u)}});function i(a){var o=a.snapPoints,c=a.connection.waypoints,l=a.bendpointIndex;if(o)return o;var d=[c[l-1],c[l+1]];return a.snapPoints=o={horizontal:[],vertical:[]},O(d,function(u){u&&(u=u.original||u,o.horizontal.push(u.y),o.vertical.push(u.x))}),o}t.on(["connect.hover","connect.move","connect.end"],1500,function(a){var o=a.context,c=o.hover,l=c&&n(c,a);!jt(c)||!l||!l.x||!l.y||(Kt(a,"x",l.x),Kt(a,"y",l.y))}),t.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(a){var o=a.context,c=i(o),l=o.hover,d=l&&n(l,a),u=a.x,h=a.y,p,f;if(c){p=e(d?c.vertical.concat([d.x]):c.vertical,u),f=e(d?c.horizontal.concat([d.y]):c.horizontal,h);var m=u-p,x=h-f;B(a,{dx:a.dx-m,dy:a.dy-x,x:a.x-m,y:a.y-x}),(m||c.vertical.indexOf(u)!==-1)&&Kt(a,"x",p),(x||c.horizontal.indexOf(h)!==-1)&&Kt(a,"y",f)}})}CE.$inject=["eventBus"];const X4={__depends__:[Rs,ts],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",wE],bendpointMove:["type",sg],bendpointMovePreview:["type",_E],connectionSegmentMove:["type",EE],bendpointSnapping:["type",CE]};function PE(t,e,n,r){function i(o,c){return r.allowed("connection.create",{source:o,target:c})}function a(o,c){return i(c,o)}t.on("connect.hover",function(o){var c=o.context,l=c.start,d=o.hover,u;if(c.hover=d,u=c.canExecute=i(l,d),!Mp(u)){if(u!==!1){c.source=l,c.target=d;return}u=c.canExecute=a(l,d),!Mp(u)&&u!==!1&&(c.source=d,c.target=l)}}),t.on(["connect.out","connect.cleanup"],function(o){var c=o.context;c.hover=null,c.source=null,c.target=null,c.canExecute=!1}),t.on("connect.end",function(o){var c=o.context,l=c.canExecute,d=c.connectionStart,u={x:o.x,y:o.y},h=c.source,p=c.target;if(!l)return!1;var f=null,m={connectionStart:Sf(c)?u:d,connectionEnd:Sf(c)?d:u};Es(l)&&(f=l),c.connection=n.connect(h,p,f,m)}),this.start=function(o,c,l,d){Es(l)||(d=l,l=Te(c)),e.init(o,"connect",{autoActivate:d,data:{shape:c,context:{start:c,connectionStart:l}}})}}PE.$inject=["eventBus","dragging","modeling","rules"];function Sf(t){var e=t.hover,n=t.source,r=t.target;return e&&n&&e===n&&n!==r}var J4=1100,Q4=900,Wy="connect-ok",qy="connect-not-ok";function TE(t,e,n){var r=t.get("connectionPreview",!1);r&&e.on("connect.move",function(i){var a=i.context,o=a.canExecute,c=a.hover,l=a.source,d=a.start,u=a.startPosition,h=a.target,p=a.connectionStart||u,f=a.connectionEnd||{x:i.x,y:i.y},m=p,x=f;Sf(a)&&(m=f,x=p),r.drawPreview(a,o,{source:l||d,target:h||c,connectionStart:m,connectionEnd:x})}),e.on("connect.hover",Q4,function(i){var a=i.context,o=i.hover,c=a.canExecute;c!==null&&n.addMarker(o,c?Wy:qy)}),e.on(["connect.out","connect.cleanup"],J4,function(i){var a=i.hover;a&&(n.removeMarker(a,Wy),n.removeMarker(a,qy))}),r&&e.on("connect.cleanup",function(i){r.cleanUp(i.context)})}TE.$inject=["injector","eventBus","canvas"];const ag={__depends__:[Jr,ts,Rs],__init__:["connectPreview"],connect:["type",PE],connectPreview:["type",TE]};var eO="djs-dragger";function As(t,e,n,r){this._canvas=e,this._graphicsFactory=n,this._elementFactory=r,this._connectionDocking=t.get("connectionDocking",!1),this._layouter=t.get("layouter",!1)}As.$inject=["injector","canvas","graphicsFactory","elementFactory"];As.prototype.drawPreview=function(t,e,n){n=n||{};var r=t.connectionPreviewGfx,i=t.getConnection,a=n.source,o=n.target,c=n.waypoints,l=n.connectionStart,d=n.connectionEnd,u=n.noLayout,h=n.noCropping,p=n.noNoop,f,m=this;if(r||(r=t.connectionPreviewGfx=this.createConnectionPreviewGfx()),ou(r),i||(i=t.getConnection=tO(function(x,g,w){return m.getConnection(x,g,w)})),e&&(f=i(e,a,o)),!f){!p&&this.drawNoopPreview(r,n);return}f.waypoints=c||[],this._layouter&&!u&&(f.waypoints=this._layouter.layoutConnection(f,{source:a,target:o,connectionStart:l,connectionEnd:d,waypoints:n.waypoints||f.waypoints})),(!f.waypoints||!f.waypoints.length)&&(f.waypoints=[a?Te(a):l,o?Te(o):d]),this._connectionDocking&&(a||o)&&!h&&(f.waypoints=this._connectionDocking.getCroppedWaypoints(f,a,o)),this._graphicsFactory.drawConnection(r,f,{stroke:"var(--element-dragger-color)"})};As.prototype.drawNoopPreview=function(t,e){var n=e.source,r=e.target,i=e.connectionStart||Te(n),a=e.connectionEnd||Te(r),o=this.cropWaypoints(i,a,n,r),c=this.createNoopConnection(o[0],o[1]);le(t,c)};As.prototype.cropWaypoints=function(t,e,n,r){var i=this._graphicsFactory,a=n&&i.getShapePath(n),o=r&&i.getShapePath(r),c=i.getConnectionPath({waypoints:[t,e]});return t=n&&Dp(a,c,!0)||t,e=r&&Dp(o,c,!1)||e,[t,e]};As.prototype.cleanUp=function(t){t&&t.connectionPreviewGfx&&Cn(t.connectionPreviewGfx)};As.prototype.getConnection=function(t){var e=nO(t);return this._elementFactory.createConnection(e)};As.prototype.createConnectionPreviewGfx=function(){var t=ie("g");return q(t,{pointerEvents:"none"}),St(t).add(eO),le(this._canvas.getActiveLayer(),t),t};As.prototype.createNoopConnection=function(t,e){return rC([t,e],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function tO(t){var e={};return function(n){var r=JSON.stringify(n),i=e[r];return i||(i=e[r]=t.apply(null,arguments)),i}}function nO(t){return Es(t)?t:{}}const rO={__init__:["connectionPreview"],connectionPreview:["type",As]},sO=new Jf("ps");var iO=["marker-start","marker-mid","marker-end"],aO=["circle","ellipse","line","path","polygon","polyline","path","rect"];function fi(t,e,n,r){this._elementRegistry=t,this._canvas=n,this._styles=r}fi.$inject=["elementRegistry","eventBus","canvas","styles"];fi.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};fi.prototype.getGfx=function(t){return this._elementRegistry.getGraphics(t)};fi.prototype.addDragger=function(t,e,n,r="djs-dragger"){n=n||this.getGfx(t);var i=kw(n),a=n.getBoundingClientRect();return this._cloneMarkers($a(i),r),q(i,this._styles.cls(r,[],{x:a.top,y:a.left})),le(e,i),q(i,"data-preview-support-element-id",t.id),i};fi.prototype.addFrame=function(t,e){var n=ie("rect",{class:"djs-resize-overlay",width:t.width,height:t.height,x:t.x,y:t.y});return le(e,n),q(n,"data-preview-support-element-id",t.id),n};fi.prototype._cloneMarkers=function(t,e="djs-dragger",n=t){var r=this;t.childNodes&&t.childNodes.forEach(i=>{r._cloneMarkers(i,e,n)}),dO(t)&&iO.forEach(function(i){if(q(t,i)){var a=oO(t,i,r._canvas.getContainer());a&&r._cloneMarker(n,t,a,i,e)}})};fi.prototype._cloneMarker=function(t,e,n,r,i="djs-dragger"){var a=[n.id,i,sO.next()].join("-"),o=Yt("marker#"+n.id,t);t=t||this._canvas._svg;var c=o||kw(n);c.id=a,St(c).add(i);var l=Yt(":scope > defs",t);l||(l=ie("defs"),le(t,l)),le(l,c);var d=lO(c.id);q(e,r,d)};function oO(t,e,n){var r=cO(q(t,e));return Yt("marker#"+r,n||document)}function cO(t){return t.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function lO(t){return"url(#"+t+")"}function dO(t){return aO.indexOf(t.nodeName)!==-1}const So={__init__:["previewSupport"],previewSupport:["type",fi]},Kl="complex-preview";class RE{constructor(e,n,r){this._canvas=e,this._graphicsFactory=n,this._previewSupport=r,this._markers=[]}create(e){this.cleanUp();const{created:n=[],moved:r=[],removed:i=[],resized:a=[]}=e,o=this._canvas.getLayer(Kl);n.filter(c=>!uO(c)).forEach(c=>{let l;jt(c)?(l=this._graphicsFactory._createContainer("connection",ie("g")),this._graphicsFactory.drawConnection($a(l),c)):(l=this._graphicsFactory._createContainer("shape",ie("g")),this._graphicsFactory.drawShape($a(l),c),kn(l,c.x,c.y)),this._previewSupport.addDragger(c,o,l)}),r.forEach(({element:c,delta:l})=>{this._previewSupport.addDragger(c,o,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"]);const d=this._previewSupport.addDragger(c,o);jt(c)?kn(d,l.x,l.y):kn(d,c.x+l.x,c.y+l.y)}),i.forEach(c=>{this._previewSupport.addDragger(c,o,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"])}),a.forEach(({shape:c,bounds:l})=>{this._canvas.addMarker(c,"djs-hidden"),this._markers.push([c,"djs-hidden"]),this._previewSupport.addDragger(c,o,void 0,"djs-dragging");const d=this._graphicsFactory._createContainer("shape",ie("g"));this._graphicsFactory.drawShape($a(d),c,{width:l.width,height:l.height}),kn(d,l.x,l.y),this._previewSupport.addDragger(c,o,d)})}cleanUp(){ou(this._canvas.getLayer(Kl)),this._markers.forEach(([e,n])=>this._canvas.removeMarker(e,n)),this._markers=[]}show(){this._canvas.showLayer(Kl)}hide(){this._canvas.hideLayer(Kl)}}RE.$inject=["canvas","graphicsFactory","previewSupport"];function uO(t){return t.hidden}const hO={__depends__:[So],__init__:["complexPreview"],complexPreview:["type",RE]};var og=["top","bottom","left","right"],Yl=10;function cg(t,e){Z.call(this,t),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(i){var a=i.context,o=a.connection,c=o.source,l=o.target,d=a.hints||{};d.createElementsBehavior!==!1&&(n(c),n(l))}),this.postExecuted(["label.create"],function(i){var a=i.context,o=a.shape,c=a.hints||{};c.createElementsBehavior!==!1&&n(o.labelTarget)}),this.postExecuted(["elements.create"],function(i){var a=i.context,o=a.elements,c=a.hints||{};c.createElementsBehavior!==!1&&o.forEach(function(l){n(l)})});function n(i){if(cu(i)&&!jt(i)){var a=mO(i);a&&r(i,a)}}function r(i,a){var o=Te(i),c=i.label,l=Te(c);if(c.parent){var d=Ne(i),u;switch(a){case"top":u={x:o.x,y:d.top-Yl-c.height/2};break;case"left":u={x:d.left-Yl-c.width/2,y:o.y};break;case"bottom":u={x:o.x,y:d.bottom+Yl+c.height/2};break;case"right":u={x:d.right+Yl+c.width/2,y:o.y};break}var h=Ir(u,l);e.moveShape(c,h)}}}ve(cg,Z);cg.$inject=["eventBus","modeling"];function pO(t){var e=t.host,n=Te(t),r=_n(n,e),i;r.indexOf("-")>=0?i=r.split("-"):i=[r];var a=og.filter(function(o){return i.indexOf(o)===-1});return a}function fO(t){var e=Te(t),n=[].concat(t.incoming.map(function(r){return r.waypoints[r.waypoints.length-2]}),t.outgoing.map(function(r){return r.waypoints[1]})).map(function(r){return AE(e,r)});return n}function mO(t){var e=Te(t.label),n=Te(t),r=AE(n,e);if(gO(r)){var i=fO(t);if(t.host){var a=pO(t);i=i.concat(a)}var o=og.filter(function(c){return i.indexOf(c)===-1});if(o.indexOf(r)===-1)return o[0]}}function AE(t,e){return _n(e,t,5)}function gO(t){return og.indexOf(t)!==-1}function lg(t){Z.call(this,t),this.preExecute("shape.append",function(e){var n=e.source,r=e.shape;e.position||(_(r,"bpmn:TextAnnotation")?e.position={x:n.x+n.width/2+75,y:n.y-50-r.height/2}:e.position={x:n.x+n.width+80+r.width/2,y:n.y+n.height/2})},!0)}ve(lg,Z);lg.$inject=["eventBus"];function dg(t,e){t.invoke(Z,this),this.postExecute("shape.move",function(n){var r=n.newParent,i=n.shape,a=rt(i.incoming.concat(i.outgoing),function(o){return _(o,"bpmn:Association")});O(a,function(o){e.moveConnection(o,{x:0,y:0},r)})},!0)}ve(dg,Z);dg.$inject=["injector","modeling"];var Ky=500;function zu(t,e){e.invoke(Z,this),this._bpmnReplace=t;var n=this;this.postExecuted("elements.create",Ky,function(r){var i=r.elements;i=i.filter(function(a){var o=a.host;return Yy(a,o)}),i.length===1&&i.map(function(a){return i.indexOf(a)}).forEach(function(a){var o=i[a];r.elements[a]=n._replaceShape(i[a],o)})},!0),this.preExecute("elements.move",Ky,function(r){var i=r.shapes,a=r.newHost;if(i.length===1){var o=i[0];Yy(o,a)&&(r.shapes=[n._replaceShape(o,a)])}},!0)}zu.$inject=["bpmnReplace","injector"];ve(zu,Z);zu.prototype._replaceShape=function(t,e){var n=vO(t),r={type:"bpmn:BoundaryEvent",host:e};return n&&(r.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(t,r,{layoutConnection:!1})};function vO(t){var e=de(t),n=e.eventDefinitions;return n&&n[0]}function Yy(t,e){return!it(t)&&ze(t,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!e}function ug(t,e){Z.call(this,t);function n(r){return rt(r.attachers,function(i){return _(i,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(r){var i=r.context.source,a=r.context.target,o=n(a);_(i,"bpmn:EventBasedGateway")&&_(a,"bpmn:ReceiveTask")&&o.length>0&&e.removeElements(o)}),this.postExecute("connection.reconnect",function(r){var i=r.context.oldSource,a=r.context.newSource;_(i,"bpmn:Gateway")&&_(a,"bpmn:EventBasedGateway")&&O(a.outgoing,function(o){var c=o.target,l=n(c);_(c,"bpmn:ReceiveTask")&&l.length>0&&e.removeElements(l)})})}ug.$inject=["eventBus","modeling"];ve(ug,Z);function hg(t,e,n){Z.call(this,t),this.preExecute("shape.replace",c,!0),this.postExecuted("shape.replace",l,!0),this.preExecute("connection.create",i,!0),this.postExecuted("connection.delete",r,!0),this.postExecuted("connection.reconnect",a,!0),this.postExecuted("element.updateProperties",o,!0);function r(g){const w=g.source,y=g.target;_a(w)&&Zo(y)&&u(y)}function i(g){const w=g.connection,y=g.source,b=g.target;_a(y)&&Zl(b)&&(d(b),p(y,[w]))}function a(g){const w=g.newTarget,y=g.oldSource,b=g.oldTarget;if(b!==w){const j=y;Zo(b)&&u(b),_a(j)&&Zl(w)&&d(w)}}function o(g){const{element:w}=g;Zo(w)?(h(w),f(w)):Zl(w)&&m(w)}function c(g){const{newData:w,oldShape:y}=g;if(_a(g.oldShape)&&w.eventDefinitionType!=="bpmn:CompensateEventDefinition"||w.type!=="bpmn:BoundaryEvent"){const b=y.outgoing.find(({target:j})=>Zo(j));b&&b.target&&(g._connectionTarget=b.target)}else if(!_a(g.oldShape)&&w.eventDefinitionType==="bpmn:CompensateEventDefinition"&&w.type==="bpmn:BoundaryEvent"){const b=y.outgoing.find(({target:j})=>Zl(j));b&&b.target&&(g._connectionTarget=b.target),x(y)}}function l(g){const{_connectionTarget:w,newShape:y}=g;w&&e.connect(y,w)}function d(g){e.updateProperties(g,{isForCompensation:!0})}function u(g){e.updateProperties(g,{isForCompensation:void 0})}function h(g){for(const w of g.incoming)n.canConnect(w.source,g)||e.removeConnection(w);for(const w of g.outgoing)n.canConnect(g,w.target)||e.removeConnection(w)}function p(g,w){g.outgoing.filter(j=>_(j,"bpmn:Association")).filter(j=>Zo(j.target)&&!w.includes(j)).forEach(j=>e.removeConnection(j))}function f(g){const w=g.attachers.slice();w.length&&e.removeElements(w)}function m(g){const w=g.incoming.filter(y=>_a(y.source));e.removeElements(w)}function x(g){const w=g.outgoing.filter(y=>_(y,"bpmn:SequenceFlow"));e.removeElements(w)}}ve(hg,Z);hg.$inject=["eventBus","modeling","bpmnRules"];function Zo(t){const e=de(t);return e&&e.get("isForCompensation")}function _a(t){return t&&_(t,"bpmn:BoundaryEvent")&&rm(t,"bpmn:CompensateEventDefinition")}function Zl(t){return t&&_(t,"bpmn:Activity")&&!Pn(t)}function pg(t){t.invoke(Z,this),this.preExecute("shape.create",1500,function(e){var n=e.context,r=n.parent,i=n.shape;_(r,"bpmn:Lane")&&!_(i,"bpmn:Lane")&&(n.parent=uo(r,"bpmn:Participant"))})}pg.$inject=["injector"];ve(pg,Z);function fg(t,e){Z.call(this,t),this.preExecute("shape.create",function(n){var r=n.context,i=r.shape;if(_(i,"bpmn:DataObjectReference")&&i.type!=="label"){var a=e.create("bpmn:DataObject");i.businessObject.dataObjectRef=a}})}fg.$inject=["eventBus","bpmnFactory"];ve(fg,Z);var kf=20,Cf=20,IE=30,Xl=2e3;function mg(t,e,n){Z.call(this,e),e.on(["create.start","shape.move.start"],Xl,function(i){var a=i.context,o=a.shape,c=t.getRootElement();if(!(!_(o,"bpmn:Participant")||!_(c,"bpmn:Process")||!c.children.length)){var l=c.children.filter(function(h){return!_(h,"bpmn:Group")&&!it(h)&&!jt(h)});if(l.length){var d=Mn(l),u=xO(o,d);B(o,u),a.createConstraints=yO(o,d)}}}),e.on("create.start",Xl,function(i){var a=i.context,o=a.shape,c=t.getRootElement(),l=t.getGraphics(c);function d(u){u.element=c,u.gfx=l}_(o,"bpmn:Participant")&&_(c,"bpmn:Process")&&(e.on("element.hover",Xl,d),e.once("create.cleanup",function(){e.off("element.hover",d)}))});function r(){var i=t.getRootElement();return _(i,"bpmn:Collaboration")?i:n.makeCollaboration()}this.preExecute("elements.create",Xl,function(i){var a=i.elements,o=i.parent,c=bO(a),l;c&&_(o,"bpmn:Process")&&(i.parent=r(),l=i.hints=i.hints||{},l.participant=c,l.process=o,l.processRef=de(c).get("processRef"))},!0),this.preExecute("shape.create",function(i){var a=i.parent,o=i.shape;_(o,"bpmn:Participant")&&_(a,"bpmn:Process")&&(i.parent=r(),i.process=a,i.processRef=de(o).get("processRef"))},!0),this.execute("shape.create",function(i){var a=i.hints||{},o=i.process||a.process,c=i.shape,l=a.participant;o&&(!l||c===l)&&de(c).set("processRef",de(o))},!0),this.revert("shape.create",function(i){var a=i.hints||{},o=i.process||a.process,c=i.processRef||a.processRef,l=i.shape,d=a.participant;o&&(!d||l===d)&&de(l).set("processRef",c)},!0),this.postExecute("shape.create",function(i){var a=i.hints||{},o=i.process||i.hints.process,c=i.shape,l=a.participant;if(o){var d=o.children.slice();l?c===l&&n.moveElements(d,{x:0,y:0},l):n.moveElements(d,{x:0,y:0},c)}},!0)}mg.$inject=["canvas","eventBus","modeling"];ve(mg,Z);function xO(t,e){e={width:e.width+kf*2+IE,height:e.height+Cf*2};var n=Math.max(t.width,e.width),r=Math.max(t.height,e.height);return{x:-n/2,y:-r/2,width:n,height:r}}function yO(t,e){return e=Ne(e),{bottom:e.top+t.height/2-Cf,left:e.right-t.width/2+kf,top:e.bottom-t.height/2+Cf,right:e.left+t.width/2-kf-IE}}function bO(t){return Dt(t,function(e){return _(e,"bpmn:Participant")})}var Zy="__targetRef_placeholder";function gg(t,e){Z.call(this,t),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Xy(a)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Xy(a));function n(o,c,l){var d=o.get("dataInputAssociations");return Dt(d,function(u){return u!==l&&u.targetRef===c})}function r(o,c){var l=o.get("properties"),d=Dt(l,function(u){return u.name===Zy});return!d&&c&&(d=e.create("bpmn:Property",{name:Zy}),sn(l,d)),d}function i(o,c){var l=r(o);l&&(n(o,l,c)||en(o.get("properties"),l))}function a(o){var c=o.context,l=c.connection,d=l.businessObject,u=l.target,h=u&&u.businessObject,p=c.newTarget,f=p&&p.businessObject,m=c.oldTarget||c.target,x=m&&m.businessObject,g=l.businessObject,w;x&&x!==h&&i(x,d),f&&f!==h&&i(f,d),h?(w=r(h,!0),g.targetRef=w):g.targetRef=null}}gg.$inject=["eventBus","bpmnFactory"];ve(gg,Z);function Xy(t){return function(e){var n=e.context,r=n.connection;if(_(r,"bpmn:DataInputAssociation"))return t(e)}}function Uu(t){this._bpmnUpdater=t}Uu.$inject=["bpmnUpdater"];Uu.prototype.execute=function(t){var e=t.dataStoreBo,n=t.dataStoreDi,r=t.newSemanticParent,i=t.newDiParent;return t.oldSemanticParent=e.$parent,t.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(e,r),this._bpmnUpdater.updateDiParent(n,i),[]};Uu.prototype.revert=function(t){var e=t.dataStoreBo,n=t.dataStoreDi,r=t.oldSemanticParent,i=t.oldDiParent;return this._bpmnUpdater.updateSemanticParent(e,r),this._bpmnUpdater.updateDiParent(n,i),[]};function vg(t,e,n,r){Z.call(this,r),e.registerHandler("dataStore.updateContainment",Uu);function i(){return n.filter(function(c){return _(c,"bpmn:Participant")&&de(c).processRef})[0]}function a(c){return c.children.filter(function(l){return _(l,"bpmn:DataStoreReference")&&!l.labelTarget})}function o(c,l){var d=c.businessObject||c;if(l=l||i(),l){var u=l.businessObject||l;e.execute("dataStore.updateContainment",{dataStoreBo:d,dataStoreDi:xt(c),newSemanticParent:u.processRef||u,newDiParent:xt(l)})}}this.preExecute("shape.create",function(c){var l=c.context,d=l.shape;_(d,"bpmn:DataStoreReference")&&d.type!=="label"&&(l.hints||(l.hints={}),l.hints.autoResize=!1)}),this.preExecute("elements.move",function(c){var l=c.context,d=l.shapes,u=d.filter(function(h){return _(h,"bpmn:DataStoreReference")});u.length&&(l.hints||(l.hints={}),l.hints.autoResize=d.filter(function(h){return!_(h,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(c){var l=c.context,d=l.shape,u=d.parent;_(d,"bpmn:DataStoreReference")&&d.type!=="label"&&_(u,"bpmn:Collaboration")&&o(d)}),this.postExecute("shape.move",function(c){var l=c.context,d=l.shape,u=l.oldParent,h=d.parent;if(!_(u,"bpmn:Collaboration")&&_(d,"bpmn:DataStoreReference")&&d.type!=="label"&&_(h,"bpmn:Collaboration")){var p=_(u,"bpmn:Participant")?u:_O(u,"bpmn:Participant");o(d,p)}}),this.postExecute("shape.delete",function(c){var l=c.context,d=l.shape,u=t.getRootElement();ze(d,["bpmn:Participant","bpmn:SubProcess"])&&_(u,"bpmn:Collaboration")&&a(u).filter(function(h){return wO(h,d)}).forEach(function(h){o(h)})}),this.postExecute("canvas.updateRoot",function(c){var l=c.context,d=l.oldRoot,u=l.newRoot,h=a(d);h.forEach(function(p){_(u,"bpmn:Process")&&o(p,u)})})}vg.$inject=["canvas","commandStack","elementRegistry","eventBus"];ve(vg,Z);function wO(t,e){for(var n=t.businessObject||t,r=e.businessObject||e;n.$parent;){if(n.$parent===r.processRef||r)return!0;n=n.$parent}return!1}function _O(t,e){for(;t.parent;){if(_(t.parent,e))return t.parent;t=t.parent}}var Hd=Math.max,Vd=Math.min,jO=20;function ME(t,e){return{top:t.top-e.top,right:t.right-e.right,bottom:t.bottom-e.bottom,left:t.left-e.left}}function EO(t,e,n){var r=n.x,i=n.y,a={x:t.x,y:t.y,width:t.width,height:t.height};return e.indexOf("n")!==-1?(a.y=t.y+i,a.height=t.height-i):e.indexOf("s")!==-1&&(a.height=t.height+i),e.indexOf("e")!==-1?a.width=t.width+r:e.indexOf("w")!==-1&&(a.x=t.x+r,a.width=t.width-r),a}function NO(t,e){return{x:t.x+(e.left||0),y:t.y+(e.top||0),width:t.width-(e.left||0)+(e.right||0),height:t.height-(e.top||0)+(e.bottom||0)}}function Jl(t,e,n){var r=e[t],i=n.min&&n.min[t],a=n.max&&n.max[t];return et(i)&&(r=(/top|left/.test(t)?Vd:Hd)(r,i)),et(a)&&(r=(/top|left/.test(t)?Hd:Vd)(r,a)),r}function SO(t,e){if(!e)return t;var n=Ne(t);return tm({top:Jl("top",n,e),right:Jl("right",n,e),bottom:Jl("bottom",n,e),left:Jl("left",n,e)})}function kO(t,e,n,r){var i=Ne(e),a={top:/n/.test(t)?i.bottom-n.height:i.top,left:/w/.test(t)?i.right-n.width:i.left,bottom:/s/.test(t)?i.top+n.height:i.bottom,right:/e/.test(t)?i.left+n.width:i.right},o=r?Ne(r):a,c={top:Vd(a.top,o.top),left:Vd(a.left,o.left),bottom:Hd(a.bottom,o.bottom),right:Hd(a.right,o.right)};return tm(c)}function Xo(t,e){return typeof t<"u"?t:jO}function CO(t,e){var n,r,i,a;return typeof e=="object"?(n=Xo(e.left),r=Xo(e.right),i=Xo(e.top),a=Xo(e.bottom)):n=r=i=a=Xo(e),{x:t.x-n,y:t.y-i,width:t.width+n+r,height:t.height+i+a}}function PO(t){return!(t.waypoints||t.type==="label")}function DE(t,e){var n;if(t.length===void 0?n=rt(t.children,PO):n=t,n.length)return CO(Mn(n),e)}var Vs=Math.abs;function TO(t,e){return ME(Ne(e),Ne(t))}var RO=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],ir=30;function Hu(t,e){return e=e||[],t.children.filter(function(n){_(n,"bpmn:Lane")&&(Hu(n,e),e.push(n))}),e}function mi(t){return t.children.filter(function(e){return _(e,"bpmn:Lane")})}function cr(t){return uo(t,RO)||t}function AO(t,e){var n=cr(t),r=_(n,"bpmn:Process")?[]:[n],i=Hu(n,r),a=Ne(t),o=Ne(e),c=TO(t,e),l=[],d=xn(t);return i.forEach(function(u){if(u!==t){var h=d?0:c.top,p=d?c.right:0,f=d?0:c.bottom,m=d?c.left:0,x=Ne(u);c.top&&(Vs(x.bottom-a.top)<10&&(f=o.top-x.bottom),Vs(x.top-a.top)<5&&(h=o.top-x.top)),c.left&&(Vs(x.right-a.left)<10&&(p=o.left-x.right),Vs(x.left-a.left)<5&&(m=o.left-x.left)),c.bottom&&(Vs(x.top-a.bottom)<10&&(h=o.bottom-x.top),Vs(x.bottom-a.bottom)<5&&(f=o.bottom-x.bottom)),c.right&&(Vs(x.left-a.right)<10&&(m=o.right-x.left),Vs(x.right-a.right)<5&&(p=o.right-x.right)),(h||p||f||m)&&l.push({shape:u,newBounds:NO(u,{top:h,right:p,bottom:f,left:m})})}}),l}var IO=500;function xg(t,e){Z.call(this,t);function n(r,i){var a=xn(r),o=mi(i),c=[],l=[],d=[],u=[];if(lu(o,function(g){return a?g.y>r.y?l.push(g):c.push(g):g.x>r.x?u.push(g):d.push(g),g.children}),!!o.length){var h;a?l.length&&c.length?h=r.height/2:h=r.height:u.length&&d.length?h=r.width/2:h=r.width;var p,f,m,x;c.length&&(p=e.calculateAdjustments(c,"y",h,r.y-10),e.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:h},"s")),l.length&&(f=e.calculateAdjustments(l,"y",-h,r.y+r.height+10),e.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:-h},"n")),d.length&&(m=e.calculateAdjustments(d,"x",h,r.x-10),e.makeSpace(m.movingShapes,m.resizingShapes,{x:h,y:0},"e")),u.length&&(x=e.calculateAdjustments(u,"x",-h,r.x+r.width+10),e.makeSpace(x.movingShapes,x.resizingShapes,{x:-h,y:0},"w"))}}this.postExecuted("shape.delete",IO,function(r){var i=r.context,a=i.hints,o=i.shape,c=i.oldParent;_(o,"bpmn:Lane")&&(a&&a.nested||n(o,c))})}xg.$inject=["eventBus","spaceTool"];ve(xg,Z);var Jy=500;function Vu(t,e){e.invoke(Z,this),this._bpmnReplace=t;var n=this;this.postExecuted("elements.create",Jy,function(r){var i=r.elements;i.filter(function(a){var o=a.host;return Qy(a,o)}).map(function(a){return i.indexOf(a)}).forEach(function(a){r.elements[a]=n._replaceShape(i[a])})},!0),this.preExecute("elements.move",Jy,function(r){var i=r.shapes,a=r.newHost;i.forEach(function(o,c){var l=o.host;Qy(o,DO(i,l)?l:a)&&(i[c]=n._replaceShape(o))})},!0)}Vu.$inject=["bpmnReplace","injector"];ve(Vu,Z);Vu.prototype._replaceShape=function(t){var e=MO(t),n;return e?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:e.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(t,n,{layoutConnection:!1})};function MO(t){var e=de(t),n=e.eventDefinitions;return n&&n[0]}function Qy(t,e){return!it(t)&&_(t,"bpmn:BoundaryEvent")&&!e}function DO(t,e){return t.indexOf(e)!==-1}function yg(t,e,n){Z.call(this,t);function r(i,a,o){var c=a.waypoints,l,d,u,h,p,f,m,x=i.outgoing.slice(),g=i.incoming.slice(),w;et(o.width)?w=Te(o):w=o;var y=_f(c,w);if(y){if(l=c.slice(0,y.index),d=c.slice(y.index+(y.bendpoint?1:0)),!l.length||!d.length)return;u=y.bendpoint?c[y.index]:w,(l.length===1||!eb(i,l[l.length-1]))&&l.push(tb(u)),(d.length===1||!eb(i,d[0]))&&d.unshift(tb(u))}h=a.source,p=a.target,e.canConnect(h,i,a)&&(n.reconnectEnd(a,i,l||w),f=a),e.canConnect(i,p,a)&&(f?m=n.connect(i,p,{type:a.type,waypoints:d}):(n.reconnectStart(a,i,d||w),m=a));var b=[].concat(f&&rt(g,function(j){return j.source===f.source})||[],m&&rt(x,function(j){return j.target===m.target})||[]);b.length&&n.removeElements(b)}this.preExecute("elements.move",function(i){var a=i.newParent,o=i.shapes,c=i.delta,l=o[0];if(!(!l||!a)){a&&a.waypoints&&(i.newParent=a=a.parent);var d=Te(l),u={x:d.x+c.x,y:d.y+c.y},h=Dt(a.children,function(p){var f=e.canInsert(o,p);return f&&_f(p.waypoints,u)});h&&(i.targetFlow=h,i.position=u)}},!0),this.postExecuted("elements.move",function(i){var a=i.shapes,o=i.targetFlow,c=i.position;o&&r(a[0],o,c)},!0),this.preExecute("shape.create",function(i){var a=i.parent,o=i.shape;e.canInsert(o,a)&&(i.targetFlow=a,i.parent=a.parent)},!0),this.postExecuted("shape.create",function(i){var a=i.shape,o=i.targetFlow,c=i.position;o&&r(a,o,c)},!0)}ve(yg,Z);yg.$inject=["eventBus","bpmnRules","modeling"];function eb(t,e){var n=e.x,r=e.y;return n>=t.x&&n<=t.x+t.width&&r>=t.y&&r<=t.y+t.height}function tb(t){return B({},t)}function bg(t,e){Z.call(this,t),this.preExecuted("connection.create",function(n){var r=n.context,i=r.connection,a=r.source,o=r.target,c=r.hints;if(!(c&&c.createElementsBehavior===!1)&&ja(i)){var l=[];_(a,"bpmn:EventBasedGateway")?l=o.incoming.filter(d=>d!==i&&ja(d)):l=o.incoming.filter(d=>d!==i&&ja(d)&&_(d.source,"bpmn:EventBasedGateway")),l.forEach(function(d){e.removeConnection(d)})}}),this.preExecuted("shape.replace",function(n){var r=n.context,i=r.newShape;if(_(i,"bpmn:EventBasedGateway")){var a=i.outgoing.filter(ja).reduce(function(o,c){return o.includes(c.target)?o:o.concat(c.target)},[]);a.forEach(function(o){o.incoming.filter(ja).forEach(function(c){const l=o.incoming.filter(ja).filter(function(d){return d.source===i});(c.source!==i||l.length>1)&&e.removeConnection(c)})})}})}bg.$inject=["eventBus","modeling"];ve(bg,Z);function ja(t){return _(t,"bpmn:SequenceFlow")}var Ql=1500,nb=2e3;function OE(t,e,n){e.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Ql,function(r){var i=r.context,a=i.shape||r.shape,o=r.hover;_(o,"bpmn:Lane")&&!ze(a,["bpmn:Lane","bpmn:Participant"])&&(r.hover=cr(o),r.hoverGfx=t.getGraphics(r.hover));var c=n.getRootElement();o!==c&&(a.labelTarget||ze(a,["bpmn:Group","bpmn:TextAnnotation"]))&&(r.hover=c,r.hoverGfx=t.getGraphics(r.hover))}),e.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Ql,function(r){var i=r.hover;_(i,"bpmn:Lane")&&(r.hover=cr(i)||i,r.hoverGfx=t.getGraphics(r.hover))}),e.on(["bendpoint.move.hover"],Ql,function(r){var i=r.context,a=r.hover,o=i.type;_(a,"bpmn:Lane")&&/reconnect/.test(o)&&(r.hover=cr(a)||a,r.hoverGfx=t.getGraphics(r.hover))}),e.on(["connect.start"],Ql,function(r){var i=r.context,a=i.start;_(a,"bpmn:Lane")&&(i.start=cr(a)||a)}),e.on("shape.move.start",nb,function(r){var i=r.shape;_(i,"bpmn:Lane")&&(r.shape=cr(i)||i)}),e.on("spaceTool.move",nb,function(r){var i=r.hover;i&&_(i,"bpmn:Lane")&&(r.hover=cr(i))})}OE.$inject=["elementRegistry","eventBus","canvas"];function OO(t){return t.create("bpmn:Category")}function $O(t){return t.create("bpmn:CategoryValue")}function LO(t,e,n){return sn(e.get("categoryValue"),t),t.$parent=e,sn(n.get("rootElements"),e),e.$parent=n,t}function BO(t){var e=t.$parent;return e&&(en(e.get("categoryValue"),t),t.$parent=null),t}function FO(t){var e=t.$parent;return e&&(en(e.get("rootElements"),t),t.$parent=null),t}var rb=770;function wg(t,e,n,r,i,a){i.invoke(Z,this);function o(){return n.filter(function(m){return _(m,"bpmn:Group")})}function c(m,x){return m.some(function(g){var w=de(g),y=w.categoryValueRef&&w.categoryValueRef.$parent;return y===x})}function l(m,x){return m.some(function(g){var w=de(g);return w.categoryValueRef===x})}function d(m,x,g){var w=o().filter(function(y){return y.businessObject!==g});x&&!c(w,x)&&FO(x),m&&!l(w,m)&&BO(m)}function u(m,x){return LO(m,x,e.getDefinitions())}function h(m,x){var g=de(m),w=g.categoryValueRef;w||(w=g.categoryValueRef=x.categoryValue=x.categoryValue||$O(t));var y=w.$parent;y||(y=w.$parent=x.category=x.category||OO(t)),u(w,y,e.getDefinitions())}function p(m,x){var g=x.category,w=x.categoryValue,y=de(m);w?(y.categoryValueRef=null,d(w,g,y)):d(null,y.categoryValueRef.$parent,y)}this.execute("label.create",function(m){var x=m.context,g=x.labelTarget;_(g,"bpmn:Group")&&h(g,x)}),this.revert("label.create",function(m){var x=m.context,g=x.labelTarget;_(g,"bpmn:Group")&&p(g,x)}),this.execute("shape.delete",function(m){var x=m.context,g=x.shape,w=de(g);if(!(!_(g,"bpmn:Group")||g.labelTarget)){var y=x.categoryValue=w.categoryValueRef,b;y&&(b=x.category=y.$parent,d(y,b,w),w.categoryValueRef=null)}}),this.reverted("shape.delete",function(m){var x=m.context,g=x.shape;if(!(!_(g,"bpmn:Group")||g.labelTarget)){var w=x.category,y=x.categoryValue,b=de(g);y&&(b.categoryValueRef=y,u(y,w))}}),this.execute("shape.create",function(m){var x=m.context,g=x.shape;!_(g,"bpmn:Group")||g.labelTarget||de(g).categoryValueRef&&h(g,x)}),this.reverted("shape.create",function(m){var x=m.context,g=x.shape;!_(g,"bpmn:Group")||g.labelTarget||de(g).categoryValueRef&&p(g,x)});function f(m,x){var g=t.create(m.$type);return a.copyElement(m,g,null,x)}r.on("copyPaste.copyElement",rb,function(m){var x=m.descriptor,g=m.element;if(!(!_(g,"bpmn:Group")||g.labelTarget)){var w=de(g);if(w.categoryValueRef){var y=w.categoryValueRef;x.categoryValue=f(y,!0),y.$parent&&(x.category=f(y.$parent,!0))}}}),r.on("copyPaste.pasteElement",rb,function(m){var x=m.descriptor,g=x.businessObject,w=x.categoryValue,y=x.category;w&&(w=g.categoryValueRef=f(w)),y&&(w.$parent=f(y)),delete x.category,delete x.categoryValue})}wg.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];ve(wg,Z);function Pf(t,e,n,r){var i,a,o,c,l;return i=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y),i==0?null:(a=t.y-n.y,o=t.x-n.x,l=(r.x-n.x)*a-(r.y-n.y)*o,c=l/i,{x:Math.round(t.x+c*(e.x-t.x)),y:Math.round(t.y+c*(e.y-t.y))})}function $E(t){function e(r,i,a){var o={x:a.x,y:a.y-50},c={x:a.x-50,y:a.y},l=Pf(r,i,a,o),d=Pf(r,i,a,c),u;l&&d?sb(l,a)>sb(d,a)?u=d:u=l:u=l||d,r.original=u}function n(r){var i=r.waypoints;e(i[0],i[1],Te(r.source)),e(i[i.length-1],i[i.length-2],Te(r.target))}t.on("bpmnElement.added",function(r){var i=r.element;i.waypoints&&n(i)})}$E.$inject=["eventBus"];function sb(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function _g(t){Z.call(this,t);var e=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var r=n.context.shape,i=de(r),a=xt(r);if(ze(i,e)){var o=a.get("isHorizontal");o===void 0&&(o=!0),a.set("isHorizontal",o)}})}_g.$inject=["eventBus"];ve(_g,Z);var LE=Math.sqrt,BE=Math.min,zO=Math.max,ib=Math.abs;function ab(t){return Math.pow(t,2)}function Jo(t,e){return LE(ab(t.x-e.x)+ab(t.y-e.y))}function UO(t,e){var n=0,r,i,a,o,c,l,d,u,h,p,f;for(n=0;n<e.length-1;n++){if(r=e[n],i=e[n+1],cb(r,i)?d=[r]:(a=Jo(t,r),o=Jo(t,i),l=BE(a,o),d=HO(r,i,t,l)),d.length<1)throw new Error("expected between [1, 2] circle -> line intersections");d.length===1&&(u={type:"bendpoint",position:d[0],segmentIndex:n,bendpointIndex:cb(r,d[0])?n:n+1}),d.length===2&&(c=GO(d[0],d[1]),u={type:"segment",position:c,segmentIndex:n,relativeLocation:Jo(r,c)/Jo(r,i)}),h=Jo(u.position,t),(!f||p>h)&&(f=u,p=h)}return f}function HO(t,e,n,r){var i=e.x-t.x,a=e.y-t.y,o=n.x-t.x,c=n.y-t.y,l=i*i+a*a,d=i*o+a*c,u=o*o+c*c-r*r,h=d/l,p=u/l,f=h*h-p;if(f<0&&f>-1e-6&&(f=0),f<0)return[];var m=LE(f),x=-h+m,g=-h-m,w={x:t.x-i*x,y:t.y-a*x};if(f===0)return[w];var y={x:t.x-i*g,y:t.y-a*g};return[w,y].filter(function(b){return VO(b,t,e)})}function VO(t,e,n){return ob(t.x,e.x,n.x)&&ob(t.y,e.y,n.y)}function ob(t,e,n){return t>=BE(e,n)-Gd&&t<=zO(e,n)+Gd}function GO(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}var Gd=.1;function cb(t,e){return ib(t.x-e.x)<=Gd&&ib(t.y-e.y)<=Gd}function WO(t,e,n,r){var i=n.segmentIndex,a=e.length-t.length;if(r.segmentMove){var o=r.segmentMove.segmentStartIndex,c=r.segmentMove.newSegmentStartIndex;return i===o?c:i>=c?i+a<c?c:i+a:i}if(r.bendpointMove){var l=r.bendpointMove.insert,d=r.bendpointMove.bendpointIndex,u;if(a===0)return i;if(i>=d&&(u=l?i+1:i-1),i<d&&(u=i,l&&n.type!=="bendpoint"&&d-1===i)){var h=zE(e,d);h<n.relativeLocation&&u++}return u}return a===0?i:r.connectionStart&&i===0?0:r.connectionEnd&&i===t.length-2?e.length-2:Math.floor((e.length-2)/2)}function FE(t,e,n,r){var i=0,a=0,o={point:t,delta:{x:0,y:0}},c=UO(t,n),l=c.segmentIndex,d=WO(n,e,c,r);if(d<0||d>e.length-2||d===null)return o;var u=lb(n,l),h=lb(e,d),p=c.position,f=KO(u,p),m=qO(u,h);if(c.type==="bendpoint"){var x=e.length-n.length,g=c.bendpointIndex,w=n[g];if(e.indexOf(w)!==-1)return o;if(x===0){var y=e[g];return i=y.x-c.position.x,a=y.y-c.position.y,{delta:{x:i,y:a},point:{x:t.x+i,y:t.y+a}}}x<0&&g!==0&&g<n.length-1&&(f=zE(n,g))}var b={x:(h[1].x-h[0].x)*f+h[0].x,y:(h[1].y-h[0].y)*f+h[0].y},j=$4({x:t.x-p.x,y:t.y-p.y},m);return i=b.x+j.x-t.x,a=b.y+j.y-t.y,{point:bc(b),delta:bc({x:i,y:a})}}function zE(t,e){var n=zd(t[e-1],t[e]),r=zd(t[e],t[e+1]),i=n/(n+r);return i}function qO(t,e){var n=Iy(t),r=Iy(e);return r-n}function lb(t,e){return[t[e],t[e+1]]}function KO(t,e){var n=zd(t[0],t[1]),r=zd(t[0],e);return n===0?0:r/n}function YO(t,e,n,r){var i=Te(t);return FE(i,e,n,r).delta}function il(t,e,n){var r=gc(e),i=gc(n),a=Ir(t,r),o={x:a.x*(n.width/e.width),y:a.y*(n.height/e.height)};return bc({x:i.x+o.x,y:i.y+o.y})}function db(t,e,n){var r=gc(t),i=gc(e),a=gc(n),o=Ir(t,r),c=Ir(r,i),l=ZO(r,e,n);if(l)return l;var d={x:c.x*(n.width/e.width),y:c.y*(n.height/e.height)},u={x:a.x+d.x,y:a.y+d.y};return bc({x:u.x+o.x-t.x,y:u.y+o.y-t.y})}function ZO(t,e,n){var r=Ne(e),i=Ne(n);if(XO(r,i))return null;var a=_n(e,t),o,c,l;if(a==="top")o={x:0,y:i.bottom-r.bottom};else if(a==="bottom")o={x:0,y:i.top-r.top};else if(a==="right")o={x:i.left-r.left,y:0};else if(a==="left")o={x:i.right-r.right,y:0};else return null;return c={x:t.x+o.x,y:t.y+o.y},l=_n(n,c),l!==a?null:o}function XO(t,e){return JO(t,e)||QO(t,e)}function JO(t,e){return t.right!==e.right&&t.left!==e.left}function QO(t,e){return t.top!==e.top&&t.bottom!==e.bottom}var ub="name",hb="text";function jg(t,e,n,r){Z.call(this,t),this.postExecute("element.updateProperties",i),this.postExecute("element.updateModdleProperties",o=>{de(o.context.element)===o.context.moddleElement&&i(o)});function i(o){var c=o.context,l=c.element,d=c.properties;if(ub in d&&e.updateLabel(l,d[ub]),hb in d&&_(l,"bpmn:TextAnnotation")){var u=r.getTextAnnotationBounds({x:l.x,y:l.y,width:l.width,height:l.height},d[hb]||"");e.updateLabel(l,d.text,u)}}this.postExecute(["shape.create","connection.create"],function(o){var c=o.context,l=c.hints||{};if(l.createElementsBehavior!==!1){var d=c.shape||c.connection;it(d)||!Xa(d)||Ji(d)&&e.updateLabel(d,Ji(d))}}),this.postExecute("shape.delete",function(o){var c=o.context,l=c.labelTarget,d=c.hints||{};l&&d.unsetLabel!==!1&&e.updateLabel(l,null,null,{removeShape:!1})});function a(o){var c=o.context,l=c.connection,d=l.label,u=B({},c.hints),h=c.newWaypoints||l.waypoints,p=c.oldWaypoints;return typeof u.startChanged>"u"&&(u.startChanged=!!u.connectionStart),typeof u.endChanged>"u"&&(u.endChanged=!!u.connectionEnd),YO(d,h,p,u)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(o){var c=o.context,l=c.hints||{};if(l.labelBehavior!==!1){var d=c.connection,u=d.label,h;!u||!u.parent||(h=a(o),e.moveShape(u,h))}}),this.postExecute(["shape.replace"],function(o){var c=o.context,l=c.newShape,d=c.oldShape,u=de(l);u&&Xa(u)&&d.label&&l.label&&(l.label.x=d.label.x,l.label.y=d.label.y)}),this.postExecute("shape.resize",function(o){var c=o.context,l=c.shape,d=c.newBounds,u=c.oldBounds;if(cu(l)){var h=l.label,p=Te(h),f=n$(u),m=t$(p,f),x=e$(m,u,d);e.moveShape(h,x)}})}ve(jg,Z);jg.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function e$(t,e,n){var r=il(t,e,n);return bc(Ir(r,t))}function t$(t,e){if(e.length){var n=r$(t,e);return rg(t,n)}}function n$(t){return[[{x:t.x,y:t.y},{x:t.x+(t.width||0),y:t.y}],[{x:t.x+(t.width||0),y:t.y},{x:t.x+(t.width||0),y:t.y+(t.height||0)}],[{x:t.x,y:t.y+(t.height||0)},{x:t.x+(t.width||0),y:t.y+(t.height||0)}],[{x:t.x,y:t.y},{x:t.x,y:t.y+(t.height||0)}]]}function r$(t,e){var n=e.map(function(i){return{line:i,distance:vE(t,i)}}),r=js(n,"distance");return r[0].line}function s$(t,e,n,r){return FE(t,e,n,r).point}function Eg(t,e){Z.call(this,t);function n(r,i){var a=r.context,o=a.connection,c=B({},a.hints),l=a.newWaypoints||o.waypoints,d=a.oldWaypoints;return typeof c.startChanged>"u"&&(c.startChanged=!!c.connectionStart),typeof c.endChanged>"u"&&(c.endChanged=!!c.connectionEnd),s$(i,l,d,c)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(r){var i=r.context,a=i.connection,o=a.outgoing,c=a.incoming;c.forEach(function(l){var d=l.waypoints[l.waypoints.length-1],u=n(r,d),h=[].concat(l.waypoints.slice(0,-1),[u]);e.updateWaypoints(l,h)}),o.forEach(function(l){var d=l.waypoints[0],u=n(r,d),h=[].concat([u],l.waypoints.slice(1));e.updateWaypoints(l,h)})}),this.postExecute(["connection.move"],function(r){var i=r.context,a=i.connection,o=a.outgoing,c=a.incoming,l=i.delta;c.forEach(function(d){var u=d.waypoints[d.waypoints.length-1],h={x:u.x+l.x,y:u.y+l.y},p=[].concat(d.waypoints.slice(0,-1),[h]);e.updateWaypoints(d,p)}),o.forEach(function(d){var u=d.waypoints[0],h={x:u.x+l.x,y:u.y+l.y},p=[].concat([h],d.waypoints.slice(1));e.updateWaypoints(d,p)})})}ve(Eg,Z);Eg.$inject=["eventBus","modeling"];function Gu(t,e,n){var r=qu(t),i=HE(r,e),a=r[0];return i.length?i[i.length-1]:il(a.original||a,n,e)}function Wu(t,e,n){var r=qu(t),i=HE(r,e),a=r[r.length-1];return i.length?i[0]:il(a.original||a,n,e)}function Ng(t,e,n){var r=qu(t),i=UE(e,n),a=r[0];return il(a.original||a,i,e)}function Sg(t,e,n){var r=qu(t),i=UE(e,n),a=r[r.length-1];return il(a.original||a,i,e)}function UE(t,e){return{x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height}}function qu(t){var e=t.waypoints;if(!e.length)throw new Error("connection#"+t.id+": no waypoints");return e}function HE(t,e){var n=Xn(t,a$);return rt(n,function(r){return i$(r,e)})}function i$(t,e){return _n(e,t,1)==="intersect"}function a$(t){return t.original||t}function kg(t,e){Z.call(this,t),this.postExecute("shape.replace",function(n){var r=n.oldShape,i=n.newShape;if(o$(r,i)){var a=c$(r);a.incoming.forEach(function(o){var c=Wu(o,i,r);e.reconnectEnd(o,i,c)}),a.outgoing.forEach(function(o){var c=Gu(o,i,r);e.reconnectStart(o,i,c)})}},!0)}kg.$inject=["eventBus","modeling"];ve(kg,Z);function o$(t,e){return _(t,"bpmn:Participant")&&lt(t)&&_(e,"bpmn:Participant")&&!lt(e)}function c$(t){var e=qc([t],!1),n=[],r=[];return e.forEach(function(i){i!==t&&(i.incoming.forEach(function(a){_(a,"bpmn:MessageFlow")&&n.push(a)}),i.outgoing.forEach(function(a){_(a,"bpmn:MessageFlow")&&r.push(a)}))},[]),{incoming:n,outgoing:r}}const l$=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function VE(t){const e=de(t);if(!_(e,"bpmn:BoundaryEvent")&&!(_(e,"bpmn:StartEvent")&&Pn(e.$parent)))return!1;const n=e.get("eventDefinitions");return!n||!n.length?!1:l$.some(r=>_(n[0],r))}function GE(t){return _(t,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function Cg(t,e){t.invoke(Z,this),this.postExecuted("shape.replace",function(n){const r=n.context.oldShape,i=n.context.newShape,a=n.context.hints;if(!VE(i))return;const o=GE(i);if(a.targetElement&&a.targetElement[o]!==void 0)return;const l=de(r).get(o),d=de(i).get(o);l!==d&&e.updateProperties(i,{[o]:l})})}Cg.$inject=["injector","modeling"];ve(Cg,Z);function Pg(t,e){Z.call(this,t),this.preExecute("shape.resize",function(n){var r=n.shape,i=xt(r),a=i&&i.get("label"),o=a&&a.get("bounds");o&&e.updateModdleProperties(r,a,{bounds:void 0})},!0)}ve(Pg,Z);Pg.$inject=["eventBus","modeling"];function Tg(t,e,n){Z.call(this,t),this.preExecute("shape.delete",function(r){var i=r.context.shape;if(!(i.incoming.length!==1||i.outgoing.length!==1)){var a=i.incoming[0],o=i.outgoing[0];if(!(!_(a,"bpmn:SequenceFlow")||!_(o,"bpmn:SequenceFlow"))&&e.canConnect(a.source,o.target,a)){var c=d$(a.waypoints,o.waypoints);n.reconnectEnd(a,o.target,c)}}})}ve(Tg,Z);Tg.$inject=["eventBus","bpmnRules","modeling"];function Ea(t){return t.original||t}function d$(t,e){var n=Pf(Ea(t[t.length-2]),Ea(t[t.length-1]),Ea(e[1]),Ea(e[0]));return n?[].concat(t.slice(0,t.length-1),[n],e.slice(1)):[Ea(t[0]),Ea(e[e.length-1])]}function Rg(t,e){Z.call(this,t),this.preExecute("shape.delete",function(n){var r=n.shape,i=r.parent;_(r,"bpmn:Participant")&&(n.collaborationRoot=i)},!0),this.postExecute("shape.delete",function(n){var r=n.collaborationRoot;if(r&&!r.businessObject.participants.length){var i=e.makeProcess(),a=r.children.slice();e.moveElements(a,{x:0,y:0},i)}},!0)}Rg.$inject=["eventBus","modeling"];ve(Rg,Z);function Ag(t,e,n,r){Z.call(this,t);var i=r.get("dragging",!1);function a(l){var d=l.source,u=l.target,h=l.parent;if(h){var p,f;_(l,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(d,u)||(f=!0),n.canConnectMessageFlow(d,u)&&(p="bpmn:MessageFlow")),_(l,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(d,u)||(f=!0),n.canConnectSequenceFlow(d,u)&&(p="bpmn:SequenceFlow")),f&&e.removeConnection(l),p&&e.connect(d,u,{type:p,waypoints:l.waypoints.slice()})}}function o(l){var d=l.context,u=d.connection,h=d.newSource||u.source,p=d.newTarget||u.target,f,m;f=n.canConnect(h,p),!(!f||f.type===u.type)&&(m=e.connect(h,p,{type:f.type,associationDirection:f.associationDirection,waypoints:u.waypoints.slice()}),u.parent&&e.removeConnection(u),d.connection=m,i&&c(u,m))}function c(l,d){var u=i.context(),h=u&&u.payload.previousSelection,p;!h||!h.length||(p=h.indexOf(l),p!==-1&&h.splice(p,1,d))}this.postExecuted("elements.move",function(l){var d=l.closure,u=d.allConnections;O(u,a)},!0),this.preExecute("connection.reconnect",o),this.postExecuted("element.updateProperties",function(l){var d=l.context,u=d.properties,h=d.element,p=h.businessObject,f;u.default&&(f=Dt(h.outgoing,gs({id:h.businessObject.default.id})),f&&e.updateProperties(f,{conditionExpression:void 0})),u.conditionExpression&&p.sourceRef.default===p&&e.updateProperties(h.source,{default:void 0})})}ve(Ag,Z);Ag.$inject=["eventBus","modeling","bpmnRules","injector"];function Ku(t,e,n,r,i,a){r.invoke(Z,this),this._bpmnReplace=t,this._elementRegistry=n,this._selection=a,this.postExecuted(["elements.create"],500,function(o){var c=o.context,l=c.parent,d=c.elements,u=hi(d,function(h,p){var f=e.canReplace([p],p.host||p.parent||l);return f?h.concat(f.replacements):h},[]);u.length&&this._replaceElements(d,u)},this),this.postExecuted(["elements.move"],500,function(o){var c=o.context,l=c.newParent,d=c.newHost,u=[];O(c.closure.topLevel,function(p){Pn(p)?u=u.concat(p.children):u=u.concat(p)}),u.length===1&&d&&(l=d);var h=e.canReplace(u,l);h&&this._replaceElements(u,h.replacements,d)},this),this.postExecute(["shape.replace"],1500,function(o){var c=o.context,l=c.oldShape,d=c.newShape,u=l.attachers,h;u&&u.length&&(h=e.canReplace(u,d),this._replaceElements(u,h.replacements))},this),this.postExecuted(["shape.replace"],1500,function(o){var c=o.context,l=c.oldShape,d=c.newShape;i.unclaimId(l.businessObject.id,l.businessObject),i.updateProperties(d,{id:l.id})})}ve(Ku,Z);Ku.prototype._replaceElements=function(t,e){var n=this._elementRegistry,r=this._bpmnReplace,i=this._selection;O(e,function(a){var o={type:a.newElementType},c=n.get(a.oldElementId),l=t.indexOf(c);t[l]=r.replaceElement(c,o,{select:!1})}),e&&i.select(t)};Ku.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var u$=1500,h$={width:140,height:120},Ig={width:300,height:60},Mg={width:60,height:300},gd={width:300,height:150},vd={width:150,height:300},WE={width:140,height:120},qE={width:50,height:30};function KE(t){t.on("resize.start",u$,function(e){var n=e.context,r=n.shape,i=n.direction,a=n.balanced;(_(r,"bpmn:Lane")||_(r,"bpmn:Participant"))&&(n.resizeConstraints=v$(r,i,a)),_(r,"bpmn:SubProcess")&&lt(r)&&(n.minDimensions=WE),_(r,"bpmn:TextAnnotation")&&(n.minDimensions=qE)})}KE.$inject=["eventBus"];var Gs=Math.abs,p$=Math.min,f$=Math.max;function YE(t,e,n,r){var i=t[e];t[e]=i===void 0?n:r(n,i)}function Na(t,e,n){return YE(t,e,n,p$)}function Sa(t,e,n){return YE(t,e,n,f$)}var m$={top:20,left:50,right:20,bottom:20},g$={top:50,left:20,right:20,bottom:20};function v$(t,e,n){var r=cr(t),i=!0,a=!0,o=Hu(r,[r]),c=Ne(t),l={},d={},u=xn(t),h=u?Ig:Mg;/n/.test(e)?d.top=c.bottom-h.height:/e/.test(e)?d.right=c.left+h.width:/s/.test(e)?d.bottom=c.top+h.height:/w/.test(e)&&(d.left=c.right-h.width),o.forEach(function(m){var x=Ne(m);u?(x.top<c.top-10&&(i=!1),x.bottom>c.bottom+10&&(a=!1)):(x.left<c.left-10&&(i=!1),x.right>c.right+10&&(a=!1)),/n/.test(e)&&(n&&Gs(c.top-x.bottom)<10&&Sa(l,"top",x.top+h.height),Gs(c.top-x.top)<5&&Na(d,"top",x.bottom-h.height)),/e/.test(e)&&(n&&Gs(c.right-x.left)<10&&Na(l,"right",x.right-h.width),Gs(c.right-x.right)<5&&Sa(d,"right",x.left+h.width)),/s/.test(e)&&(n&&Gs(c.bottom-x.top)<10&&Na(l,"bottom",x.bottom-h.height),Gs(c.bottom-x.bottom)<5&&Sa(d,"bottom",x.top+h.height)),/w/.test(e)&&(n&&Gs(c.left-x.right)<10&&Sa(l,"left",x.left+h.width),Gs(c.left-x.left)<5&&Na(d,"left",x.right-h.width))});var p=r.children.filter(function(m){return!m.hidden&&!m.waypoints&&(_(m,"bpmn:FlowElement")||_(m,"bpmn:Artifact"))}),f=u?m$:g$;return p.forEach(function(m){var x=Ne(m);/n/.test(e)&&(!u||i)&&Na(d,"top",x.top-f.top),/e/.test(e)&&(u||a)&&Sa(d,"right",x.right+f.right),/s/.test(e)&&(!u||a)&&Sa(d,"bottom",x.bottom+f.bottom),/w/.test(e)&&(u||i)&&Na(d,"left",x.left-f.left)}),{min:d,max:l}}var pb=1001;function ZE(t,e){t.on("resize.start",pb+500,function(n){var r=n.context,i=r.shape;(_(i,"bpmn:Lane")||_(i,"bpmn:Participant"))&&(r.balanced=!wc(n))}),t.on("resize.end",pb,function(n){var r=n.context,i=r.shape,a=r.canExecute,o=r.newBounds;if(_(i,"bpmn:Lane")||_(i,"bpmn:Participant"))return a&&(o=Cw(o),e.resizeLane(i,o,r.balanced)),!1})}ZE.$inject=["eventBus","modeling"];var x$=500;function Dg(t,e,n,r,i){n.invoke(Z,this);function a(u){return ze(u,["bpmn:ReceiveTask","bpmn:SendTask"])||y$(u,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function o(u){var h=t.getDefinitions(),p=h.get("rootElements");return!!Dt(p,gs({id:u.id}))}function c(u){if(_(u,"bpmn:ErrorEventDefinition"))return"errorRef";if(_(u,"bpmn:EscalationEventDefinition"))return"escalationRef";if(_(u,"bpmn:MessageEventDefinition"))return"messageRef";if(_(u,"bpmn:SignalEventDefinition"))return"signalRef"}function l(u){if(ze(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.get("messageRef");var h=u.get("eventDefinitions"),p=h[0];return p.get(c(p))}function d(u,h){if(ze(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.set("messageRef",h);var p=u.get("eventDefinitions"),f=p[0];return f.set(c(f),h)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var h=u.shape||u.element;if(a(h)){var p=de(h),f=l(p),m;f&&!o(f)&&(m=t.getDefinitions().get("rootElements"),sn(m,f),u.addedRootElement=f)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var h=u.addedRootElement;if(h){var p=t.getDefinitions().get("rootElements");en(p,h)}},!0),e.on("copyPaste.copyElement",function(u){var h=u.descriptor,p=u.element;if(!(p.labelTarget||!a(p))){var f=de(p),m=l(f);m&&(h.referencedRootElement=m)}}),e.on("copyPaste.pasteElement",x$,function(u){var h=u.descriptor,p=h.businessObject,f=h.referencedRootElement;f&&(o(f)||(f=r.copyElement(f,i.create(f.$type))),d(p,f),delete h.referencedRootElement)})}Dg.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];ve(Dg,Z);function y$(t,e){return tt(e)||(e=[e]),Kc(e,function(n){return rm(t,n)})}var XE=Math.max;function JE(t){t.on("spaceTool.getMinDimensions",function(e){var n=e.shapes,r=e.axis,i=e.start,a={};return O(n,function(o){var c=o.id;_(o,"bpmn:Participant")&&(a[c]=w$(o,r,i)),_(o,"bpmn:Lane")&&(a[c]=xn(o)?Ig:Mg),_(o,"bpmn:SubProcess")&&lt(o)&&(a[c]=WE),_(o,"bpmn:TextAnnotation")&&(a[c]=qE),_(o,"bpmn:Group")&&(a[c]=h$)}),a})}JE.$inject=["eventBus"];function b$(t){return t==="x"}function w$(t,e,n){var r=xn(t);if(!E$(t))return r?gd:vd;var i=b$(e),a={};return i?r?a=gd:a={width:j$(t,n,i),height:vd.height}:r?a={width:gd.width,height:_$(t,n,i)}:a=vd,a}function _$(t,e,n){var r;return r=N$(t,e,n),XE(gd.height,r)}function j$(t,e,n){var r;return r=S$(t,e,n),XE(vd.width,r)}function E$(t){return!!mi(t).length}function N$(t,e,n){var r=mi(t),i;return i=Og(r,e,n),t.height-i.height+Ig.height}function S$(t,e,n){var r=mi(t),i;return i=Og(r,e,n),t.width-i.width+Mg.width}function Og(t,e,n){var r,i,a;for(r=0;r<t.length;r++)if(i=t[r],!n&&e>=i.y&&e<=i.y+i.height||n&&e>=i.x&&e<=i.x+i.width)return a=mi(i),a.length?Og(a,e,n):i}var fb=400,k$=600,mb={x:180,y:160};function gi(t,e,n,r,i,a,o){Z.call(this,e),this._canvas=t,this._eventBus=e,this._modeling=n,this._elementFactory=r,this._bpmnFactory=i,this._bpmnjs=a,this._elementRegistry=o;var c=this;function l(h){return _(h,"bpmn:SubProcess")&&!lt(h)}function d(h){var p=h.shape,f=h.newRootElement,m=de(p);f=c._addDiagram(f||m),h.newRootElement=t.addRootElement(f)}function u(h){var p=h.shape,f=de(p);c._removeDiagram(f);var m=h.newRootElement=o.get(Pa(f));t.removeRootElement(m)}this.executed("shape.create",function(h){var p=h.shape;l(p)&&d(h)},!0),this.postExecuted("shape.create",function(h){var p=h.shape,f=h.newRootElement;!f||!p.children||(c._showRecursively(p.children),c._moveChildrenToShape(p,f))},!0),this.reverted("shape.create",function(h){var p=h.shape;l(p)&&u(h)},!0),this.preExecuted("shape.delete",function(h){var p=h.shape;if(l(p)){var f=o.get(Pa(p));f&&n.removeElements(f.children.slice())}},!0),this.executed("shape.delete",function(h){var p=h.shape;l(p)&&u(h)},!0),this.reverted("shape.delete",function(h){var p=h.shape;l(p)&&d(h)},!0),this.preExecuted("shape.replace",function(h){var p=h.oldShape,f=h.newShape;!l(p)||!l(f)||(h.oldRoot=t.removeRootElement(Pa(p)))},!0),this.postExecuted("shape.replace",function(h){var p=h.newShape,f=h.oldRoot,m=t.findRoot(Pa(p));if(!(!f||!m)){var x=f.children;n.moveElements(x,{x:0,y:0},m)}},!0),this.executed("element.updateProperties",function(h){var p=h.element;if(_(p,"bpmn:SubProcess")){var f=h.properties,m=h.oldProperties,x=m.id,g=f.id;if(x!==g){if(dd(p)){o.updateId(p,Pi(g)),o.updateId(x,g);return}var w=o.get(Pi(x));w&&o.updateId(Pi(x),Pi(g))}}},!0),this.reverted("element.updateProperties",function(h){var p=h.element;if(_(p,"bpmn:SubProcess")){var f=h.properties,m=h.oldProperties,x=m.id,g=f.id;if(x!==g){if(dd(p)){o.updateId(p,Pi(x)),o.updateId(g,x);return}var w=o.get(Pi(g));w&&o.updateId(w,Pi(x))}}},!0),e.on("element.changed",function(h){var p=h.element;if(dd(p)){var f=p,m=o.get(Wv(f));!m||m===f||e.fire("element.changed",{element:m})}}),this.executed("shape.toggleCollapse",fb,function(h){var p=h.shape;_(p,"bpmn:SubProcess")&&(lt(p)?u(h):(d(h),c._showRecursively(p.children)))},!0),this.reverted("shape.toggleCollapse",fb,function(h){var p=h.shape;_(p,"bpmn:SubProcess")&&(lt(p)?u(h):(d(h),c._showRecursively(p.children)))},!0),this.postExecuted("shape.toggleCollapse",k$,function(h){var p=h.shape;if(_(p,"bpmn:SubProcess")){var f=h.newRootElement;f&&(lt(p)?c._moveChildrenToShape(f,p):c._moveChildrenToShape(p,f))}},!0),e.on("copyPaste.createTree",function(h){var p=h.element,f=h.children;if(l(p)){var m=Pa(p),x=o.get(m);x&&f.push.apply(f,x.children)}}),e.on("copyPaste.copyElement",function(h){var p=h.descriptor,f=h.element,m=h.elements,x=f.parent,g=_(xt(x),"bpmndi:BPMNPlane");if(g){var w=Wv(x),y=Dt(m,function(b){return b.id===w});y&&(p.parent=y.id)}}),e.on("copyPaste.pasteElement",function(h){var p=h.descriptor;p.parent&&(l(p.parent)||p.parent.hidden)&&(p.hidden=!0)})}ve(gi,Z);gi.prototype._moveChildrenToShape=function(t,e){var n=this._modeling,r=t.children,i;if(r){r=r.concat(r.reduce(function(d,u){return u.label&&u.label.parent!==t?d.concat(u.label):d},[]));var a=r.filter(function(d){return!d.hidden});if(!a.length){n.moveElements(r,{x:0,y:0},e,{autoResize:!1});return}var o=Mn(a);if(!e.x)i={x:mb.x-o.x,y:mb.y-o.y};else{var c=Te(e),l=Te(o);i={x:c.x-l.x,y:c.y-l.y}}n.moveElements(r,i,e,{autoResize:!1})}};gi.prototype._showRecursively=function(t,e){var n=this,r=[];return t.forEach(function(i){i.hidden=!!e,r=r.concat(i),i.children&&(r=r.concat(n._showRecursively(i.children,i.collapsed||e)))}),r};gi.prototype._addDiagram=function(t){var e=this._bpmnjs,n=e.getDefinitions().diagrams;return t.businessObject||(t=this._createNewDiagram(t)),n.push(t.di.$parent),t};gi.prototype._createNewDiagram=function(t){var e=this._bpmnFactory,n=this._elementFactory,r=e.create("bpmndi:BPMNPlane",{bpmnElement:t}),i=e.create("bpmndi:BPMNDiagram",{plane:r});r.$parent=i;var a=n.createRoot({id:Pa(t),type:t.$type,di:r,businessObject:t,collapsed:!0});return a};gi.prototype._removeDiagram=function(t){var e=this._bpmnjs,n=e.getDefinitions().diagrams,r=Dt(n,function(i){return i.plane.bpmnElement.id===t.id});return n.splice(n.indexOf(r),1),r};gi.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function $g(t,e){t.invoke(Z,this),this.postExecuted("shape.replace",function(n){var r=n.context.oldShape,i=n.context.newShape;if(!(!_(i,"bpmn:SubProcess")||_(i,"bpmn:AdHocSubProcess")||!(_(r,"bpmn:Task")||_(r,"bpmn:CallActivity"))||!lt(i))){var a=C$(i);e.createShape({type:"bpmn:StartEvent"},a,i)}})}$g.$inject=["injector","modeling"];ve($g,Z);function C$(t){return{x:t.x+t.width/6,y:t.y+t.height/2}}function Lg(t){Z.call(this,t),this.preExecute("connection.create",function(e){const{target:n}=e;_(n,"bpmn:TextAnnotation")&&(e.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(e){const n=e.shapes||[e.shape];n.length===1&&_(n[0],"bpmn:TextAnnotation")&&(e.hints=e.hints||{},e.hints.autoResize=!1)},!0)}ve(Lg,Z);Lg.$inject=["eventBus"];function Bg(t,e){Z.call(this,t),this.postExecuted("shape.toggleCollapse",1500,function(n){var r=n.shape;if(lt(r))return;var i=qc(r);i.forEach(function(o){var c=o.incoming.slice(),l=o.outgoing.slice();O(c,function(d){a(d,!0)}),O(l,function(d){a(d,!1)})});function a(o,c){i.indexOf(o.source)!==-1&&i.indexOf(o.target)!==-1||(c?e.reconnectEnd(o,r,Te(r)):e.reconnectStart(o,r,Te(r)))}},!0)}ve(Bg,Z);Bg.$inject=["eventBus","modeling"];var xp=500;function Fg(t,e,n){Z.call(this,t);function r(o){o.length&&o.forEach(function(c){c.type==="label"&&!c.businessObject.name&&(c.hidden=!0)})}function i(o,c){var l=o.children,d=c,u,h;return u=P$(l).concat([o]),h=DE(u),h?(d.width=Math.max(h.width,d.width),d.height=Math.max(h.height,d.height),d.x=h.x+(h.width-d.width)/2,d.y=h.y+(h.height-d.height)/2):(d.x=o.x+(o.width-d.width)/2,d.y=o.y+(o.height-d.height)/2),d}function a(o,c){return{x:o.x+(o.width-c.width)/2,y:o.y+(o.height-c.height)/2,width:c.width,height:c.height}}this.executed(["shape.toggleCollapse"],xp,function(o){var c=o.context,l=c.shape;_(l,"bpmn:SubProcess")&&(l.collapsed?xt(l).isExpanded=!1:(r(l.children),xt(l).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],xp,function(o){var c=o.context,l=c.shape;l.collapsed?xt(l).isExpanded=!1:xt(l).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],xp,function(o){var c=o.context.shape,l=e.getDefaultSize(c),d;c.collapsed?d=a(c,l):d=i(c,l),n.resizeShape(c,d,null,{autoResize:c.collapsed?!1:"nwse"})})}ve(Fg,Z);Fg.$inject=["eventBus","elementFactory","modeling"];function P$(t){return t.filter(function(e){return!e.hidden})}function zg(t,e,n,r){e.invoke(Z,this),this.preExecute("shape.delete",function(i){var a=i.context,o=a.shape,c=o.businessObject;it(o)||(_(o,"bpmn:Participant")&&lt(o)&&n.ids.unclaim(c.processRef.id),r.unclaimId(c.id,c))}),this.preExecute("connection.delete",function(i){var a=i.context,o=a.connection,c=o.businessObject;r.unclaimId(c.id,c)}),this.preExecute("canvas.updateRoot",function(){var i=t.getRootElement(),a=i.businessObject;_(i,"bpmn:Collaboration")&&n.ids.unclaim(a.id)})}ve(zg,Z);zg.$inject=["canvas","injector","moddle","modeling"];function Ug(t,e){Z.call(this,t),this.preExecute("connection.delete",function(n){var r=n.context,i=r.connection,a=i.source;T$(i,a)&&e.updateProperties(a,{default:null})})}ve(Ug,Z);Ug.$inject=["eventBus","modeling"];function T$(t,e){if(!_(t,"bpmn:SequenceFlow"))return!1;var n=de(e),r=de(t);return n.get("default")===r}var R$=500,A$=5e3;function Hg(t,e){Z.call(this,t);var n;function r(){return n=n||new I$,n.enter(),n}function i(){if(!n)throw new Error("out of bounds release");return n}function a(){if(!n)throw new Error("out of bounds release");var c=n.leave();return c&&(e.updateLaneRefs(n.flowNodes,n.lanes),n=null),c}var o=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(o,A$,function(c){r()}),this.postExecuted(o,R$,function(c){a()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(c){var l=c.context,d=l.shape,u=i();d.labelTarget||(_(d,"bpmn:Lane")&&u.addLane(d),_(d,"bpmn:FlowNode")&&u.addFlowNode(d))})}Hg.$inject=["eventBus","modeling"];ve(Hg,Z);function I$(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(t){this.lanes.push(t)},this.addFlowNode=function(t){this.flowNodes.push(t)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function Vg(t,e){Z.call(this,t),this.postExecuted("elements.create",function(n){const r=n.context,i=r.elements;for(const a of i)M$(a)&&!O$(a)&&e.updateProperties(a,{isForCompensation:void 0})})}ve(Vg,Z);Vg.$inject=["eventBus","modeling"];function M$(t){const e=de(t);return e&&e.isForCompensation}function D$(t){return t&&_(t,"bpmn:BoundaryEvent")&&rm(t,"bpmn:CompensateEventDefinition")}function O$(t){return t.incoming.filter(n=>D$(n.source)).length>0}const $$={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",cg],appendBehavior:["type",lg],associationBehavior:["type",dg],attachEventBehavior:["type",zu],boundaryEventBehavior:["type",ug],compensateBoundaryEventBehaviour:["type",hg],createBehavior:["type",pg],createDataObjectBehavior:["type",fg],createParticipantBehavior:["type",mg],dataInputAssociationBehavior:["type",gg],dataStoreBehavior:["type",vg],deleteLaneBehavior:["type",xg],detachEventBehavior:["type",Vu],dropOnFlowBehavior:["type",yg],eventBasedGatewayBehavior:["type",bg],fixHoverBehavior:["type",OE],groupBehavior:["type",wg],importDockingFix:["type",$E],isHorizontalFix:["type",_g],labelBehavior:["type",jg],layoutConnectionBehavior:["type",Eg],messageFlowBehavior:["type",kg],nonInterruptingBehavior:["type",Cg],removeElementBehavior:["type",Tg],removeEmbeddedLabelBoundsBehavior:["type",Pg],removeParticipantBehavior:["type",Rg],replaceConnectionBehavior:["type",Ag],replaceElementBehaviour:["type",Ku],resizeBehavior:["type",KE],resizeLaneBehavior:["type",ZE],rootElementReferenceBehavior:["type",Dg],spaceToolBehavior:["type",JE],subProcessPlaneBehavior:["type",gi],subProcessStartEventBehavior:["type",$g],textAnnotationBehavior:["type",Lg],toggleCollapseConnectionBehaviour:["type",Bg],toggleElementCollapseBehaviour:["type",Fg],unclaimIdBehavior:["type",zg],unsetDefaultFlowBehavior:["type",Ug],updateFlowNodeRefsBehavior:["type",Hg],setCompensationActivityAfterPasteBehavior:["type",Vg]};function QE(t,e){var n=_n(t,e,-15);return n!=="intersect"?n:null}function yn(t){gr.call(this,t)}ve(yn,gr);yn.$inject=["eventBus"];yn.prototype.init=function(){this.addRule("connection.start",function(t){var e=t.source;return L$(e)}),this.addRule("connection.create",function(t){var e=t.source,n=t.target,r=t.hints||{},i=r.targetParent,a=r.targetAttach;if(a)return!1;i&&(n.parent=i);try{return xd(e,n)}finally{i&&(n.parent=null)}}),this.addRule("connection.reconnect",function(t){var e=t.connection,n=t.source,r=t.target;return xd(n,r,e)}),this.addRule("connection.updateWaypoints",function(t){return{type:t.connection.type}}),this.addRule("shape.resize",function(t){var e=t.shape,n=t.newBounds;return cN(e,n)}),this.addRule("elements.create",function(t){var e=t.elements,n=t.position,r=t.target;return jt(r)&&!Wd(e,r)?!1:nu(e,function(i){return jt(i)?xd(i.source,i.target,i):i.host?vc(i,i.host,null,n):If(i,r,null)})}),this.addRule("elements.move",function(t){var e=t.target,n=t.shapes,r=t.position;return vc(n,e,null,r)||aN(n,e,r)||oN(n,e)||Wd(n,e)}),this.addRule("shape.create",function(t){return If(t.shape,t.target,t.source,t.position)}),this.addRule("shape.attach",function(t){return vc(t.shape,t.target,null,t.position)}),this.addRule("element.copy",function(t){var e=t.element,n=t.elements;return pN(n,e)})};yn.prototype.canConnectMessageFlow=uN;yn.prototype.canConnectSequenceFlow=hN;yn.prototype.canConnectDataAssociation=Wg;yn.prototype.canConnectAssociation=lN;yn.prototype.canConnectCompensationAssociation=dN;yn.prototype.canMove=oN;yn.prototype.canAttach=vc;yn.prototype.canReplace=aN;yn.prototype.canDrop=po;yn.prototype.canInsert=Wd;yn.prototype.canCreate=If;yn.prototype.canConnect=xd;yn.prototype.canResize=cN;yn.prototype.canCopy=pN;function L$(t){return Tf(t)?null:ze(t,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Tf(t){return!t||it(t)}function B$(t,e){return t===e}function gb(t){do{if(_(t,"bpmn:Process"))return de(t);if(_(t,"bpmn:Participant"))return de(t).processRef||de(t)}while(t=t.parent)}function Rf(t){return _(t,"bpmn:TextAnnotation")}function Gg(t){return _(t,"bpmn:Group")&&!t.labelTarget}function eN(t){return _(t,"bpmn:BoundaryEvent")&&qr(t,"bpmn:CompensateEventDefinition")}function Yu(t){return de(t).isForCompensation}function F$(t,e){var n=gb(t),r=gb(e);return n===r}function z$(t){return _(t,"bpmn:InteractionNode")&&!_(t,"bpmn:BoundaryEvent")&&(!_(t,"bpmn:Event")||_(t,"bpmn:ThrowEvent")&&nN(t,"bpmn:MessageEventDefinition"))}function U$(t){return _(t,"bpmn:InteractionNode")&&!Yu(t)&&(!_(t,"bpmn:Event")||_(t,"bpmn:CatchEvent")&&nN(t,"bpmn:MessageEventDefinition"))&&!(_(t,"bpmn:BoundaryEvent")&&!qr(t,"bpmn:MessageEventDefinition"))}function vb(t){for(var e=t;e=e.parent;){if(_(e,"bpmn:FlowElementsContainer"))return de(e);if(_(e,"bpmn:Participant"))return de(e).processRef}return null}function tN(t,e){var n=vb(t),r=vb(e);return n===r}function qr(t,e){var n=de(t);return!!Dt(n.eventDefinitions||[],function(r){return _(r,e)})}function nN(t,e){var n=de(t);return(n.eventDefinitions||[]).every(function(r){return _(r,e)})}function H$(t){return _(t,"bpmn:FlowNode")&&!_(t,"bpmn:EndEvent")&&!Pn(t)&&!(_(t,"bpmn:IntermediateThrowEvent")&&qr(t,"bpmn:LinkEventDefinition"))&&!eN(t)&&!Yu(t)}function V$(t){return _(t,"bpmn:FlowNode")&&!_(t,"bpmn:StartEvent")&&!_(t,"bpmn:BoundaryEvent")&&!Pn(t)&&!(_(t,"bpmn:IntermediateCatchEvent")&&qr(t,"bpmn:LinkEventDefinition"))&&!Yu(t)}function G$(t){return _(t,"bpmn:ReceiveTask")||_(t,"bpmn:IntermediateCatchEvent")&&(qr(t,"bpmn:MessageEventDefinition")||qr(t,"bpmn:TimerEventDefinition")||qr(t,"bpmn:ConditionalEventDefinition")||qr(t,"bpmn:SignalEventDefinition"))}function W$(t){for(var e=[];t;)t=t.parent,t&&e.push(t);return e}function Af(t,e){var n=W$(e);return n.indexOf(t)!==-1}function xd(t,e,n){if(Tf(t)||Tf(e))return null;if(!_(n,"bpmn:DataAssociation")){if(uN(t,e))return{type:"bpmn:MessageFlow"};if(hN(t,e))return{type:"bpmn:SequenceFlow"}}var r=Wg(t,e);return r||(dN(t,e)?{type:"bpmn:Association",associationDirection:"One"}:lN(t,e)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function po(t,e){return it(t)||Gg(t)?!0:_(e,"bpmn:Participant")&&!lt(e)?!1:_(t,"bpmn:Participant")?_(e,"bpmn:Process")||_(e,"bpmn:Collaboration"):ze(t,["bpmn:DataInput","bpmn:DataOutput"])&&t.parent?e===t.parent:_(t,"bpmn:Lane")?_(e,"bpmn:Participant")||_(e,"bpmn:Lane"):_(t,"bpmn:BoundaryEvent")&&!q$(t)?!1:_(t,"bpmn:FlowElement")&&!_(t,"bpmn:DataStoreReference")?_(e,"bpmn:FlowElementsContainer")?lt(e):ze(e,["bpmn:Participant","bpmn:Lane"]):_(t,"bpmn:DataStoreReference")&&_(e,"bpmn:Collaboration")?Kc(de(e).get("participants"),function(n){return!!n.get("processRef")}):ze(t,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?ze(e,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):_(t,"bpmn:MessageFlow")?_(e,"bpmn:Collaboration")||t.source.parent==e||t.target.parent==e:!1}function q$(t){return de(t).cancelActivity&&(rN(t)||sN(t))}function K$(t){return!it(t)&&_(t,"bpmn:BoundaryEvent")}function Y$(t){return _(t,"bpmn:Lane")}function Z$(t){return K$(t)||_(t,"bpmn:IntermediateThrowEvent")&&rN(t)?!0:_(t,"bpmn:IntermediateCatchEvent")&&sN(t)}function rN(t){var e=de(t);return e&&!(e.eventDefinitions&&e.eventDefinitions.length)}function sN(t){return iN(t,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function iN(t,e){return e.some(function(n){return qr(t,n)})}function X$(t){return _(t,"bpmn:ReceiveTask")&&Dt(t.incoming,function(e){return _(e.source,"bpmn:EventBasedGateway")})}function vc(t,e,n,r){if(Array.isArray(t)||(t=[t]),t.length!==1)return!1;var i=t[0];return it(i)||!Z$(i)||Pn(e)||!_(e,"bpmn:Activity")||Yu(e)||r&&!QE(r,e)||X$(e)?!1:"attach"}function aN(t,e,n){if(!e)return!1;var r={replacements:[]};return O(t,function(i){Pn(e)||_(i,"bpmn:StartEvent")&&i.type!=="label"&&po(i,e)&&(sC(i)||r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),(iC(i)||aC(i)||oC(i))&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),iN(i,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&_(e,"bpmn:SubProcess")&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"})),_(e,"bpmn:Transaction")||qr(i,"bpmn:CancelEventDefinition")&&i.type!=="label"&&(_(i,"bpmn:EndEvent")&&po(i,e)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:EndEvent"}),_(i,"bpmn:BoundaryEvent")&&vc(i,e,null,n)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:BoundaryEvent"}))}),r.replacements.length?r:!1}function oN(t,e){return Kc(t,Y$)?!1:e?t.every(function(n){return po(n,e)}):!0}function If(t,e,n,r){return e?it(t)||Gg(t)?!0:B$(n,e)||n&&Af(n,e)?!1:po(t,e)||Wd(t,e):!1}function cN(t,e){return _(t,"bpmn:SubProcess")?lt(t)&&(!e||e.width>=100&&e.height>=80):!!(_(t,"bpmn:Lane")||_(t,"bpmn:Participant")||Rf(t)||Gg(t))}function J$(t,e){var n=Rf(t),r=Rf(e);return(n||r)&&n!==r}function lN(t,e){return Af(e,t)||Af(t,e)?!1:J$(t,e)?!0:!!Wg(t,e)}function dN(t,e){return tN(t,e)&&eN(t)&&_(e,"bpmn:Activity")&&!eL(e,t)&&!Pn(e)}function uN(t,e){return xb(t)&&!xb(e)?!1:z$(t)&&U$(e)&&!F$(t,e)}function hN(t,e){return H$(t)&&V$(e)&&tN(t,e)&&!(_(t,"bpmn:EventBasedGateway")&&!G$(e))}function Wg(t,e){return ze(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ze(e,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:ze(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ze(t,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Wd(t,e,n){if(!e)return!1;if(Array.isArray(t)){if(t.length!==1)return!1;t=t[0]}return e.source===t||e.target===t?!1:ze(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!it(e)&&_(t,"bpmn:FlowNode")&&!_(t,"bpmn:BoundaryEvent")&&po(t,e.parent)}function Q$(t,e){return t&&e&&t.indexOf(e)!==-1}function pN(t,e){return it(e)?!0:!(_(e,"bpmn:Lane")&&!Q$(t,e.parent))}function xb(t){return uo(t,"bpmn:Process")||uo(t,"bpmn:Collaboration")}function eL(t,e){return t.attachers.includes(e)}const tL={__depends__:[ts],__init__:["bpmnRules"],bpmnRules:["type",yn]};var nL=2e3;function fN(t,e){t.on("saveXML.start",nL,n);function n(){var r=e.getRootElements();O(r,function(i){var a=xt(i),o,c;o=qc([i],!1),o=rt(o,function(l){return l!==i&&!l.labelTarget}),c=Xn(o,xt),a.set("planeElement",c)})}}fN.$inject=["eventBus","canvas"];const rL={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",fN]};function Zu(t){Z.call(this,t);var e=this;this.preExecute(["shape.create","connection.create"],function(n){var r=n.context,i=r.shape||r.connection,a=r.parent,o=e.getOrdering(i,a);o&&(o.parent!==void 0&&(r.parent=o.parent),r.parentIndex=o.index)}),this.preExecute(["shape.move","connection.move"],function(n){var r=n.context,i=r.shape||r.connection,a=r.newParent||i.parent,o=e.getOrdering(i,a);o&&(o.parent!==void 0&&(r.newParent=o.parent),r.newParentIndex=o.index)})}Zu.prototype.getOrdering=function(t,e){return null};ve(Zu,Z);function qg(t,e){Zu.call(this,t);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(o){if(o.labelTarget)return{level:10};var c=Dt(n,function(l){return ze(o,[l.type])});return c&&c.order||{level:1}}function i(o){var c=o.order;if(c||(o.order=c=r(o)),!c)throw new Error(`no order for <${o.id}>`);return c}function a(o,c,l){for(var d=c;d&&!ze(d,l);)d=d.parent;if(!d)throw new Error(`no parent for <${o.id}> in <${c&&c.id}>`);return d}this.getOrdering=function(o,c){if(o.labelTarget||_(o,"bpmn:TextAnnotation"))return{parent:e.findRoot(c)||e.getRootElement(),index:-1};var l=i(o);l.containers&&(c=a(o,c,l.containers));var d=c.children.indexOf(o),u=cC(c.children,function(h){return!o.labelTarget&&h.labelTarget?!1:l.level<i(h).level});return u!==-1&&d!==-1&&d<u&&(u-=1),{index:u,parent:c}}}qg.$inject=["eventBus","canvas"];ve(qg,Zu);const sL={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",qg]};function al(){}al.prototype.get=function(){return this._data};al.prototype.set=function(t){this._data=t};al.prototype.clear=function(){var t=this._data;return delete this._data,t};al.prototype.isEmpty=function(){return!this._data};const iL={clipboard:["type",al]};var aL="drop-ok",yb="drop-not-ok",bb="attach-ok",wb="new-parent",_b="create",oL=2e3;function mN(t,e,n,r,i){function a(l,d,u,h,p){if(!d)return!1;l=rt(l,function(y){var b=y.labelTarget;return!y.parent&&!(it(y)&&l.indexOf(b)!==-1)});var f=Dt(l,function(y){return!jt(y)}),m=!1,x=!1,g=!1;Eb(l)&&(m=i.allowed("shape.attach",{position:u,shape:f,target:d})),m||(Eb(l)?g=i.allowed("shape.create",{position:u,shape:f,source:h,target:d}):g=i.allowed("elements.create",{elements:l,position:u,target:d}));var w=p.connectionTarget;return g||m?(f&&h&&(x=i.allowed("connection.create",{source:w===h?f:h,target:w===h?h:f,hints:{targetParent:d,targetAttach:m}})),{attach:m,connect:x}):g===null||m===null?null:!1}function o(l,d){[bb,aL,yb,wb].forEach(function(u){u===d?t.addMarker(l,u):t.removeMarker(l,u)})}n.on(["create.move","create.hover"],function(l){var d=l.context,u=d.elements,h=l.hover,p=d.source,f=d.hints||{};if(!h){d.canExecute=!1,d.target=null;return}jb(l);var m={x:l.x,y:l.y},x=d.canExecute=h&&a(u,h,m,p,f);h&&x!==null&&(d.target=h,x&&x.attach?o(h,bb):o(h,x?wb:yb))}),n.on(["create.end","create.out","create.cleanup"],function(l){var d=l.hover;d&&o(d,null)}),n.on("create.end",function(l){var d=l.context,u=d.source,h=d.shape,p=d.elements,f=d.target,m=d.canExecute,x=m&&m.attach,g=m&&m.connect,w=d.hints||{};if(m===!1||!f)return!1;jb(l);var y={x:l.x,y:l.y};g?h=r.appendShape(u,h,y,f,{attach:x,connection:g===!0?{}:g,connectionTarget:w.connectionTarget}):(p=r.createElements(p,y,f,B({},w,{attach:x})),h=Dt(p,function(b){return!jt(b)})),B(d,{elements:p,shape:h}),B(l,{elements:p,shape:h})});function c(){var l=e.context();l&&l.prefix===_b&&e.cancel()}n.on("create.init",function(){n.on("elements.changed",c),n.once(["create.cancel","create.end"],oL,function(){n.off("elements.changed",c)})}),this.start=function(l,d,u){tt(d)||(d=[d]);var h=Dt(d,function(m){return!jt(m)});if(h){u=B({elements:d,hints:{},shape:h},u||{}),O(d,function(m){et(m.x)||(m.x=0),et(m.y)||(m.y=0)});var p=rt(d,function(m){return!m.hidden}),f=Mn(p);O(d,function(m){jt(m)&&(m.waypoints=Xn(m.waypoints,function(x){return{x:x.x-f.x-f.width/2,y:x.y-f.y-f.height/2}})),B(m,{x:m.x-f.x-f.width/2,y:m.y-f.y-f.height/2})}),e.init(l,_b,{cursor:"grabbing",autoActivate:!0,data:{shape:h,elements:d,context:u}})}}}mN.$inject=["canvas","dragging","eventBus","modeling","rules"];function jb(t){var e=t.context,n=e.createConstraints;n&&(n.left&&(t.x=Math.max(t.x,n.left)),n.right&&(t.x=Math.min(t.x,n.right)),n.top&&(t.y=Math.max(t.y,n.top)),n.bottom&&(t.y=Math.min(t.y,n.bottom)))}function Eb(t){return t&&t.length===1&&!jt(t[0])}var cL=750;function gN(t,e,n,r,i){function a(o){var c=ie("g");q(c,i.cls("djs-drag-group",["no-events"]));var l=ie("g");return o.forEach(function(d){var u;d.hidden||(d.waypoints?(u=n._createContainer("connection",l),n.drawConnection($a(u),d)):(u=n._createContainer("shape",l),n.drawShape($a(u),d),kn(u,d.x,d.y)),r.addDragger(d,c,u))}),c}e.on("create.move",cL,function(o){var c=o.hover,l=o.context,d=l.elements,u=l.dragGroup;u||(u=l.dragGroup=a(d));var h;c?(u.parentNode||(h=t.getActiveLayer(),le(h,u)),kn(u,o.x,o.y)):Cn(u)}),e.on("create.cleanup",function(o){var c=o.context,l=c.dragGroup;l&&Cn(l)})}gN.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Xu={__depends__:[Rs,So,ts,Jr],__init__:["create","createPreview"],create:["type",mN],createPreview:["type",gN]};function Kg(t){var e=this;this._lastMoveEvent=null;function n(r){e._lastMoveEvent=r}t.on("canvas.init",function(r){var i=e._svg=r.svg;i.addEventListener("mousemove",n)}),t.on("canvas.destroy",function(){e._lastMouseEvent=null,e._svg.removeEventListener("mousemove",n)})}Kg.$inject=["eventBus"];Kg.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||lL(0,0)};function lL(t,e){var n=document.createEvent("MouseEvent"),r=t,i=e,a=t,o=e;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,r,i,a,o,!1,!1,!1,!1,0,null),n}const ol={__init__:["mouse"],mouse:["type",Kg]};function Or(t,e,n,r,i,a,o,c){this._canvas=t,this._create=e,this._clipboard=n,this._elementFactory=r,this._eventBus=i,this._modeling=a,this._mouse=o,this._rules=c,i.on("copyPaste.copyElement",function(l){var d=l.descriptor,u=l.element,h=l.elements;d.priority=1,d.id=u.id;var p=Dt(h,function(f){return f===u.parent});p&&(d.parent=u.parent.id),dL(u)&&(d.priority=2,d.host=u.host.id),jt(u)&&(d.priority=3,d.source=u.source.id,d.target=u.target.id,d.waypoints=uL(u)),it(u)&&(d.priority=4,d.labelTarget=u.labelTarget.id),O(["x","y","width","height"],function(f){et(u[f])&&(d[f]=u[f])}),d.hidden=u.hidden,d.collapsed=u.collapsed}),i.on("copyPaste.pasteElements",function(l){var d=l.hints;B(d,{createElementsBehavior:!1})})}Or.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];Or.prototype.copy=function(t){var e,n;return tt(t)||(t=t?[t]:[]),e=this._eventBus.fire("copyPaste.canCopyElements",{elements:t}),e===!1?n={}:n=this.createTree(tt(e)?e:t),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:t,tree:n}),n};Or.prototype.paste=function(t){var e=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=t&&t.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var r=this._createElements(e);if(t&&t.element&&t.point)return this._paste(r,t.element,t.point,n);this._create.start(this._mouse.getLastMoveEvent(),r,{hints:n||{}})}};Or.prototype._paste=function(t,e,n,r){O(t,function(a){et(a.x)||(a.x=0),et(a.y)||(a.y=0)});var i=Mn(t);return O(t,function(a){jt(a)&&(a.waypoints=Xn(a.waypoints,function(o){return{x:o.x-i.x-i.width/2,y:o.y-i.y-i.height/2}})),B(a,{x:a.x-i.x-i.width/2,y:a.y-i.y-i.height/2})}),this._modeling.createElements(t,n,e,B({},r))};Or.prototype._createElements=function(t){var e=this,n=this._eventBus,r={},i=[];return O(t,function(a,o){a=js(a,"priority"),O(a,function(c){var l=B({},Cs(c,["priority"]));r[c.parent]?l.parent=r[c.parent]:delete l.parent,n.fire("copyPaste.pasteElement",{cache:r,descriptor:l});var d;if(jt(l)){l.source=r[c.source],l.target=r[c.target],d=r[c.id]=e.createConnection(l),i.push(d);return}if(it(l)){l.labelTarget=r[l.labelTarget],d=r[c.id]=e.createLabel(l),i.push(d);return}l.host&&(l.host=r[l.host]),d=r[c.id]=e.createShape(l),i.push(d)})}),i};Or.prototype.createConnection=function(t){var e=this._elementFactory.createConnection(Cs(t,["id"]));return e};Or.prototype.createLabel=function(t){var e=this._elementFactory.createLabel(Cs(t,["id"]));return e};Or.prototype.createShape=function(t){var e=this._elementFactory.createShape(Cs(t,["id"]));return e};Or.prototype.hasRelations=function(t,e){var n,r,i;return!(jt(t)&&(r=Dt(e,gs({id:t.source.id})),i=Dt(e,gs({id:t.target.id})),!r||!i)||it(t)&&(n=Dt(e,gs({id:t.labelTarget.id})),!n))};Or.prototype.createTree=function(t){var e=this._rules,n=this,r={},i=[],a=ru(t);function o(d,u){return e.allowed("element.copy",{element:d,elements:u})}function c(d,u){var h=Dt(i,function(p){return d===p.element});if(!h){i.push({element:d,depth:u});return}h.depth<u&&(i=l(h,i),i.push({element:h.element,depth:u}))}function l(d,u){var h=u.indexOf(d);return h!==-1&&u.splice(h,1),u}return lu(a,function(d,u,h){if(it(d))return;O(d.labels,function(m){c(m,h)});function p(m){m&&m.length&&O(m,function(x){O(x.labels,function(g){c(g,h)}),c(x,h)})}O([d.attachers,d.incoming,d.outgoing],p),c(d,h);var f=[];return d.children&&(f=d.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:d,children:f}),f}),t=Xn(i,function(d){return d.element}),i=Xn(i,function(d){return d.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:d.descriptor,element:d.element,elements:t}),d}),i=js(i,function(d){return d.descriptor.priority}),t=Xn(i,function(d){return d.element}),O(i,function(d){var u=d.depth;if(!n.hasRelations(d.element,t)){Sb(d.element,t);return}if(!o(d.element,t)){Sb(d.element,t);return}r[u]||(r[u]=[]),r[u].push(d.descriptor)}),r};function dL(t){return!!t.host}function uL(t){return Xn(t.waypoints,function(e){return e=Nb(e),e.original&&(e.original=Nb(e.original)),e})}function Nb(t){return B({},t)}function Sb(t,e){var n=e.indexOf(t);return n===-1?e:e.splice(n,1)}const hL={__depends__:[iL,Xu,ol,ts],__init__:["copyPaste"],copyPaste:["type",Or]};function yp(t,e,n){tt(n)||(n=[n]),O(n,function(r){Pw(t[r])||(e[r]=t[r])})}var bp=750;function vN(t,e,n){function r(l,d){var u=t.create(l.$type);return n.copyElement(l,u,null,d)}e.on("copyPaste.copyElement",bp,function(l){var d=l.descriptor,u=l.element,h=de(u);if(it(u))return d;var p=d.businessObject=r(h,!0),f=d.di=r(xt(u),!0);f.bpmnElement=p,yp(p,d,"name"),yp(f,d,"isExpanded"),h.default&&(d.default=h.default.id)});var i="-bpmn-js-refs";function a(l){return l[i]=l[i]||{}}function o(l,d){l[i]=d}function c(l,d,u){var h=de(l);return l.default&&(u[l.default]={element:h,property:"default"}),l.host&&(de(l).attachedToRef=de(d[l.host])),Cs(u,hi(u,function(p,f,m){var x=f.element,g=f.property;return m===l.id&&(x.set(g,h),p.push(l.id)),p},[]))}e.on("copyPaste.pasteElement",function(l){var d=l.cache,u=l.descriptor,h=u.businessObject,p=u.di;if(it(u)){u.businessObject=de(d[u.labelTarget]),u.di=xt(d[u.labelTarget]);return}h=u.businessObject=r(h),p=u.di=r(p),p.bpmnElement=h,yp(u,h,["isExpanded","name"]),u.type=h.$type}),e.on("copyPaste.copyElement",bp,function(l){var d=l.descriptor,u=l.element;if(_(u,"bpmn:Participant")){var h=de(u);h.processRef&&(d.processRef=r(h.processRef,!0))}}),e.on("copyPaste.pasteElement",function(l){var d=l.descriptor,u=d.processRef;u&&(d.processRef=r(u))}),e.on("copyPaste.pasteElement",bp,function(l){var d=l.cache,u=l.descriptor;o(d,c(u,d,a(d)))})}vN.$inject=["bpmnFactory","eventBus","moddleCopy"];const pL=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"],fL=["errorRef","escalationRef","messageRef","signalRef"];function cl(t,e,n){this._bpmnFactory=e,this._eventBus=t,this._moddle=n,t.on("moddleCopy.canCopyProperties",r=>{const{propertyNames:i}=r;if(!(!i||!i.length))return js(i,a=>a==="extensionElements")}),t.on("moddleCopy.canCopyProperty",r=>{const{parent:i,property:a,propertyName:o}=r,c=Es(i)&&i.$descriptor;if(o&&fL.includes(o))return a;if(o&&pL.includes(o)||o&&c&&!Dt(c.properties,gs({name:o})))return!1}),t.on("moddleCopy.canSetCopiedProperty",r=>{const{property:i}=r;if(_(i,"bpmn:ExtensionElements")&&(!i.values||!i.values.length))return!1})}cl.$inject=["eventBus","bpmnFactory","moddle"];cl.prototype.copyElement=function(t,e,n,r=!1){n&&!tt(n)&&(n=[n]),n=n||Mf(t.$descriptor);const i=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:t,targetElement:e,clone:r});return i===!1||(tt(i)&&(n=i),O(n,a=>{let o;ii(t,a)&&(o=t.get(a));const c=this.copyProperty(o,e,a,r);!Yn(c)||this._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:e,property:c,propertyName:a})===!1||e.set(a,c)})),e};cl.prototype.copyProperty=function(t,e,n,r=!1){let i=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:e,property:t,propertyName:n,clone:r});if(i===!1)return;if(i)return Es(i)&&i.$type&&!i.$parent&&(i.$parent=e),i;const a=this._moddle.getPropertyDescriptor(e,n);if(!a.isReference)return a.isId?t&&this._copyId(t,e,r):tt(t)?hi(t,(o,c)=>{const l=this.copyProperty(c,e,n,r);return l?o.concat(l):o},[]):Es(t)&&t.$type?this._moddle.getElementDescriptor(t).isGeneric?void 0:(i=this._bpmnFactory.create(t.$type),i.$parent=e,i=this.copyElement(t,i,null,r),i):t};cl.prototype._copyId=function(t,e,n=!1){if(n)return t;if(!this._moddle.ids.assigned(t))return this._moddle.ids.claim(t,e),t};function Mf(t,e){return hi(t.properties,(n,r)=>e&&r.default?n:n.concat(r.name),[])}const xN={__depends__:[hL],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",vN],moddleCopy:["type",cl]};var kb=Math.round;function Yg(t,e){this._modeling=t,this._eventBus=e}Yg.$inject=["modeling","eventBus"];Yg.prototype.replaceElement=function(t,e,n){if(t.waypoints)return null;var r=this._modeling,i=this._eventBus;i.fire("replace.start",{element:t,attrs:e,hints:n});var a=e.width||t.width,o=e.height||t.height,c=e.x||t.x,l=e.y||t.y,d=kb(c+a/2),u=kb(l+o/2),h=r.replaceShape(t,B({},e,{x:d,y:u,width:a,height:o}),n);return i.fire("replace.end",{element:t,newElement:h,hints:n}),h};function yN(t,e){e.on("replace.end",500,function(n){const{newElement:r,hints:i={}}=n;i.select!==!1&&t.select(r)})}yN.$inject=["selection","eventBus"];const mL={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",yN],replace:["type",Yg]};function gL(t,e,n){tt(n)||(n=[n]),O(n,function(r){Pw(t[r])||(e[r]=t[r])})}var vL=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function xL(t,e){var n=t&&ii(t,"collapsed")?t.collapsed:!lt(t),r;return e&&(ii(e,"collapsed")||ii(e,"isExpanded"))?r=ii(e,"collapsed")?e.collapsed:!e.isExpanded:r=n,n!==r}function bN(t,e,n,r,i,a){function o(c,l,d){d=d||{};var u=l.type,h=c.businessObject;if(ed(h)&&(u==="bpmn:SubProcess"||u==="bpmn:AdHocSubProcess")&&xL(c,l))return r.toggleCollapse(c),c;var p=t.create(u),f={type:u,businessObject:p};f.di={},u==="bpmn:ExclusiveGateway"&&(f.di.isMarkerVisible=!0),gL(c.di,f.di,["fill","stroke","background-color","border-color","color"]);var m=Mf(h.$descriptor),x=Mf(p.$descriptor,!0),g=yL(m,x);B(p,Xr(l,vL));var w=rt(g,function(j){return j==="eventDefinitions"?Cb(c,l.eventDefinitionType):j==="loopCharacteristics"?!Pn(p):ii(p,j)||j==="processRef"&&l.isExpanded===!1||j==="triggeredByEvent"?!1:j==="isForCompensation"?!Pn(p):!0});if(p=n.copyElement(h,p,w),l.eventDefinitionType&&(Cb(p,l.eventDefinitionType)||(f.eventDefinitionType=l.eventDefinitionType,f.eventDefinitionAttrs=l.eventDefinitionAttrs)),_(h,"bpmn:Activity")){if(ed(h))f.isExpanded=lt(c);else if(l&&ii(l,"isExpanded")){f.isExpanded=l.isExpanded;var y=e.getDefaultSize(p,{isExpanded:f.isExpanded});f.width=y.width,f.height=y.height,f.x=c.x-(f.width-c.width)/2,f.y=c.y-(f.height-c.height)/2}lt(c)&&!_(h,"bpmn:Task")&&f.isExpanded&&(f.width=c.width,f.height=c.height)}if(ed(h)&&!ed(p)&&(d.moveChildren=!1),_(h,"bpmn:Participant")){l.isExpanded===!0?p.processRef=t.create("bpmn:Process"):d.moveChildren=!1;var b=xn(c);xt(c).isHorizontal||(xt(f).isHorizontal=b),f.width=b?c.width:e.getDefaultSize(f).width,f.height=b?e.getDefaultSize(f).height:c.height}return a.allowed("shape.resize",{shape:p})||(f.height=e.getDefaultSize(f).height,f.width=e.getDefaultSize(f).width),p.name=h.name,ze(h,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&ze(p,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(p.default=h.default),l.host&&!_(h,"bpmn:BoundaryEvent")&&_(p,"bpmn:BoundaryEvent")&&(f.host=l.host),(f.type==="bpmn:DataStoreReference"||f.type==="bpmn:DataObjectReference")&&(f.x=c.x+(c.width-f.width)/2),i.replaceElement(c,f,{...d,targetElement:l})}this.replaceElement=o}bN.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function ed(t){return _(t,"bpmn:SubProcess")}function Cb(t,e){var n=de(t);return e&&n.get("eventDefinitions").some(function(r){return _(r,e)})}function yL(t,e){return t.filter(function(n){return e.includes(n)})}const wN={__depends__:[xN,mL,Jr],bpmnReplace:["type",bN]};var bL=250;function ca(t){this._eventBus=t,this._tools=[],this._active=null}ca.$inject=["eventBus"];ca.prototype.registerTool=function(t,e){var n=this._tools;if(!e)throw new Error(`A tool has to be registered with it's "events"`);n.push(t),this.bindEvents(t,e)};ca.prototype.isActive=function(t){return t&&this._active===t};ca.prototype.length=function(t){return this._tools.length};ca.prototype.setActive=function(t){var e=this._eventBus;this._active!==t&&(this._active=t,e.fire("tool-manager.update",{tool:t}))};ca.prototype.bindEvents=function(t,e){var n=this._eventBus,r=[];n.on(e.tool+".init",function(i){var a=i.context;if(!a.reactivate&&this.isActive(t)){this.setActive(null);return}this.setActive(t)},this),O(e,function(i){r.push(i+".ended"),r.push(i+".canceled")}),n.on(r,bL,function(i){this._active&&(wL(i)||this.setActive(null))},this)};function wL(t){var e=t.originalEvent&&t.originalEvent.target;return e&&Gc(e,'.group[data-group="tools"]')}const Ju={__depends__:[Rs],__init__:["toolManager"],toolManager:["type",ca]};function _L(t,e){if(t==="x"){if(e>0)return"e";if(e<0)return"w"}if(t==="y"){if(e>0)return"s";if(e<0)return"n"}return null}function jL(t,e){var n=[];return O(t.concat(e),function(r){var i=r.incoming,a=r.outgoing;O(i.concat(a),function(o){var c=o.source,l=o.target;(Qo(t,c)||Qo(t,l)||Qo(e,c)||Qo(e,l))&&(Qo(n,o)||n.push(o))})}),n}function Qo(t,e){return t.indexOf(e)!==-1}function EL(t,e,n){var r=t.x,i=t.y,a=t.width,o=t.height,c=n.x,l=n.y;switch(e){case"n":return{x:r,y:i+l,width:a,height:o-l};case"s":return{x:r,y:i,width:a,height:o+l};case"w":return{x:r+c,y:i,width:a-c,height:o};case"e":return{x:r,y:i,width:a+c,height:o};default:throw new Error("unknown direction: "+e)}}var wp=Math.abs,NL=Math.round,ls={x:"width",y:"height"},_N="crosshair",Ws={n:"top",w:"left",s:"bottom",e:"right"},SL=1500,td={n:"s",w:"e",s:"n",e:"w"},nd=20;function vr(t,e,n,r,i,a,o){this._canvas=t,this._dragging=e,this._eventBus=n,this._modeling=r,this._rules=i,this._toolManager=a,this._mouse=o;var c=this;a.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){c.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",SL,function(l){var d=l.context,u=d.initialized;u||(u=d.initialized=c.init(l,d)),u&&Tb(l)}),n.on("spaceTool.end",function(l){var d=l.context,u=d.axis,h=d.direction,p=d.movingShapes,f=d.resizingShapes,m=d.start;if(d.initialized){Tb(l);var x={x:0,y:0};x[u]=NL(l["d"+u]),c.makeSpace(p,f,x,h,m),n.once("spaceTool.ended",function(g){c.activateSelection(g.originalEvent,!0,!0)})}})}vr.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];vr.prototype.activateSelection=function(t,e,n){this._dragging.init(t,"spaceTool.selection",{autoActivate:e,cursor:_N,data:{context:{reactivate:n}},trapClick:!1})};vr.prototype.activateMakeSpace=function(t){this._dragging.init(t,"spaceTool",{autoActivate:!0,cursor:_N,data:{context:{}}})};vr.prototype.makeSpace=function(t,e,n,r,i){return this._modeling.createSpace(t,e,n,r,i)};vr.prototype.init=function(t,e){var n=wp(t.dx)>wp(t.dy)?"x":"y",r=t["d"+n],i=t[n]-r;if(wp(r)<5)return!1;r<0&&(r*=-1),wc(t)&&(r*=-1);var a=_L(n,r),o=this._canvas.getRootElement();!Op(t)&&t.hover&&(o=t.hover);var c=[...qc(o,!0),...o.attachers||[]],l=this.calculateAdjustments(c,n,r,i),d=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:a,shapes:l.resizingShapes,start:i}),u=kL(l,n,a,i,d);return B(e,l,{axis:n,direction:a,spaceToolConstraints:u,start:i}),Iu("resize-"+(n==="x"?"ew":"ns")),!0};vr.prototype.calculateAdjustments=function(t,e,n,r){var i=this._rules,a=[],o=[],c=[],l=[];function d(p){a.includes(p)||a.push(p);var f=p.label;f&&!a.includes(f)&&a.push(f)}function u(p){o.includes(p)||o.push(p)}O(t,function(p){if(!(!p.parent||it(p))){if(jt(p)){l.push(p);return}var f=p[e],m=f+p[ls[e]];if(CL(p)&&(n>0&&Te(p)[e]>r||n<0&&Te(p)[e]<r)){c.push(p);return}if(n>0&&f>r||n<0&&m<r){d(p);return}if(f<r&&m>r&&i.allowed("shape.resize",{shape:p})){u(p);return}}}),O(a,function(p){var f=p.attachers;f&&O(f,function(m){d(m)})});var h=a.concat(o);return O(c,function(p){var f=p.host;zi(h,f)&&d(p)}),h=a.concat(o),O(l,function(p){var f=p.source,m=p.target,x=p.label;zi(h,f)&&zi(h,m)&&x&&d(x)}),{movingShapes:a,resizingShapes:o}};vr.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)};vr.prototype.isActive=function(){var t=this._dragging.context();return t?/^spaceTool/.test(t.prefix):!1};function Pb(t){return{top:t.top-nd,right:t.right+nd,bottom:t.bottom+nd,left:t.left-nd}}function Tb(t){var e=t.context,n=e.spaceToolConstraints;if(n){var r,i;et(n.left)&&(r=Math.max(t.x,n.left),t.dx=t.dx+r-t.x,t.x=r),et(n.right)&&(r=Math.min(t.x,n.right),t.dx=t.dx+r-t.x,t.x=r),et(n.top)&&(i=Math.max(t.y,n.top),t.dy=t.dy+i-t.y,t.y=i),et(n.bottom)&&(i=Math.min(t.y,n.bottom),t.dy=t.dy+i-t.y,t.y=i)}}function kL(t,e,n,r,i){var a=t.movingShapes,o=t.resizingShapes;if(o.length){var c={},l,d;return O(o,function(u){var h=u.attachers,p=u.children,f=Ne(u),m=rt(p,function(L){return!jt(L)&&!it(L)&&!zi(a,L)&&!zi(o,L)}),x=rt(p,function(L){return!jt(L)&&!it(L)&&zi(a,L)}),g,w,y,b=[],j=[],C,N,k,P;m.length&&(w=Pb(Ne(Mn(m))),g=r-f[Ws[n]]+w[Ws[n]],n==="n"?c.bottom=d=et(d)?Math.min(d,g):g:n==="w"?c.right=d=et(d)?Math.min(d,g):g:n==="s"?c.top=l=et(l)?Math.max(l,g):g:n==="e"&&(c.left=l=et(l)?Math.max(l,g):g)),x.length&&(y=Pb(Ne(Mn(x))),g=r-y[Ws[td[n]]]+f[Ws[td[n]]],n==="n"?c.bottom=d=et(d)?Math.min(d,g):g:n==="w"?c.right=d=et(d)?Math.min(d,g):g:n==="s"?c.top=l=et(l)?Math.max(l,g):g:n==="e"&&(c.left=l=et(l)?Math.max(l,g):g)),h&&h.length&&(h.forEach(function(L){zi(a,L)?b.push(L):j.push(L)}),b.length&&(C=Ne(Mn(b.map(Te))),N=f[Ws[td[n]]]-(C[Ws[td[n]]]-r)),j.length&&(k=Ne(Mn(j.map(Te))),P=k[Ws[n]]-(f[Ws[n]]-r)),n==="n"?(g=Math.min(N||1/0,P||1/0),c.bottom=d=et(d)?Math.min(d,g):g):n==="w"?(g=Math.min(N||1/0,P||1/0),c.right=d=et(d)?Math.min(d,g):g):n==="s"?(g=Math.max(N||-1/0,P||-1/0),c.top=l=et(l)?Math.max(l,g):g):n==="e"&&(g=Math.max(N||-1/0,P||-1/0),c.left=l=et(l)?Math.max(l,g):g));var T=i&&i[u.id];T&&(n==="n"?(g=r+u[ls[e]]-T[ls[e]],c.bottom=d=et(d)?Math.min(d,g):g):n==="w"?(g=r+u[ls[e]]-T[ls[e]],c.right=d=et(d)?Math.min(d,g):g):n==="s"?(g=r-u[ls[e]]+T[ls[e]],c.top=l=et(l)?Math.max(l,g):g):n==="e"&&(g=r-u[ls[e]]+T[ls[e]],c.left=l=et(l)?Math.max(l,g):g))}),c}}function zi(t,e){return t.indexOf(e)!==-1}function CL(t){return!!t.host}var _p="djs-dragging",Rb="djs-resizing",PL=250,rd=Math.max;function jN(t,e,n,r,i){function a(o,c){O(o,function(l){i.addDragger(l,c),n.addMarker(l,_p)})}t.on("spaceTool.selection.start",function(o){var c=n.getLayer("space"),l=o.context,d={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},u=ie("g");q(u,r.cls("djs-crosshair-group",["no-events"])),le(c,u);var h=ie("path");q(h,"d",d.x),St(h).add("djs-crosshair"),le(u,h);var p=ie("path");q(p,"d",d.y),St(p).add("djs-crosshair"),le(u,p),l.crosshairGroup=u}),t.on("spaceTool.selection.move",function(o){var c=o.context.crosshairGroup;kn(c,o.x,o.y)}),t.on("spaceTool.selection.cleanup",function(o){var c=o.context,l=c.crosshairGroup;l&&Cn(l)}),t.on("spaceTool.move",PL,function(o){var c=o.context,l=c.line,d=c.axis,u=c.movingShapes,h=c.resizingShapes;if(c.initialized){if(!c.dragGroup){var p=n.getLayer("space");l=ie("path"),q(l,"d","M0,0 L0,0"),St(l).add("djs-crosshair"),le(p,l),c.line=l;var f=ie("g");q(f,r.cls("djs-drag-group",["no-events"])),le(n.getActiveLayer(),f),a(u,f);var m=c.movingConnections=e.filter(function(j){var C=!1;O(u,function(T){O(T.outgoing,function(L){j===L&&(C=!0)})});var N=!1;O(u,function(T){O(T.incoming,function(L){j===L&&(N=!0)})});var k=!1;O(h,function(T){O(T.outgoing,function(L){j===L&&(k=!0)})});var P=!1;return O(h,function(T){O(T.incoming,function(L){j===L&&(P=!0)})}),jt(j)&&(C||k)&&(N||P)});a(m,f),c.dragGroup=f}if(!c.frameGroup){var x=ie("g");q(x,r.cls("djs-frame-group",["no-events"])),le(n.getActiveLayer(),x);var g=[];O(h,function(j){var C=i.addFrame(j,x),N=C.getBBox();g.push({element:C,initialBounds:N}),n.addMarker(j,Rb)}),c.frameGroup=x,c.frames=g}var w={x:"M"+o.x+", -10000 L"+o.x+", 10000",y:"M -10000, "+o.y+" L 10000, "+o.y};q(l,{d:w[d]});var y={x:"y",y:"x"},b={x:o.dx,y:o.dy};b[y[c.axis]]=0,kn(c.dragGroup,b.x,b.y),O(c.frames,function(j){var C=j.element,N=j.initialBounds,k,P;c.direction==="e"?q(C,{width:rd(N.width+b.x,5)}):(k=rd(N.width-b.x,5),q(C,{width:k,x:N.x+N.width-k})),c.direction==="s"?q(C,{height:rd(N.height+b.y,5)}):(P=rd(N.height-b.y,5),q(C,{height:P,y:N.y+N.height-P}))})}}),t.on("spaceTool.cleanup",function(o){var c=o.context,l=c.movingShapes,d=c.movingConnections,u=c.resizingShapes,h=c.line,p=c.dragGroup,f=c.frameGroup;O(l,function(m){n.removeMarker(m,_p)}),O(d,function(m){n.removeMarker(m,_p)}),p&&(Cn(h),Cn(p)),O(u,function(m){n.removeMarker(m,Rb)}),f&&Cn(f)})}jN.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const TL={__init__:["spaceToolPreview"],__depends__:[Rs,ts,Ju,So,ol],spaceTool:["type",vr],spaceToolPreview:["type",jN]};function Qu(t,e){t.invoke(vr,this),this._canvas=e}Qu.$inject=["injector","canvas"];ve(Qu,vr);Qu.prototype.calculateAdjustments=function(t,e,n,r){var i=this._canvas.getRootElement(),a=t[0]===i?null:t[0],o=[];a&&(o=iu(Tw(i.children.filter(d=>_(d,"bpmn:Artifact")),Mn(a))));const c=[...t,...o];var l=vr.prototype.calculateAdjustments.call(this,c,e,n,r);return l.resizingShapes=l.resizingShapes.filter(function(d){return!(_(d,"bpmn:TextAnnotation")||RL(d)&&(e==="y"&&xn(d)||e==="x"&&!xn(d)))}),l};function RL(t){return _(t,"bpmn:Participant")&&!de(t).processRef}const EN={__depends__:[TL],spaceTool:["type",Qu]};function Ft(t,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=t,this._uid=1,t.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Ft.$inject=["eventBus","injector"];Ft.prototype.execute=function(t,e){if(!t)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:t,context:e};this._pushAction(n),this._internalExecute(n),this._popAction()};Ft.prototype.canExecute=function(t,e){const n={command:t,context:e},r=this._getHandler(t);let i=this._fire(t,"canExecute",n);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(e))}return i};Ft.prototype.clear=function(t){this._stack.length=0,this._stackIdx=-1,t!==!1&&this._fire("changed",{trigger:"clear"})};Ft.prototype.undo=function(){let t=this._getUndoAction(),e;if(t){for(this._currentExecution.trigger="undo",this._pushAction(t);t&&(this._internalUndo(t),e=this._getUndoAction(),!(!e||e.id!==t.id));)t=e;this._popAction()}};Ft.prototype.redo=function(){let t=this._getRedoAction(),e;if(t){for(this._currentExecution.trigger="redo",this._pushAction(t);t&&(this._internalExecute(t,!0),e=this._getRedoAction(),!(!e||e.id!==t.id));)t=e;this._popAction()}};Ft.prototype.register=function(t,e){this._setHandler(t,e)};Ft.prototype.registerHandler=function(t,e){if(!t||!e)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(e);this.register(t,n)};Ft.prototype.canUndo=function(){return!!this._getUndoAction()};Ft.prototype.canRedo=function(){return!!this._getRedoAction()};Ft.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Ft.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Ft.prototype._internalUndo=function(t){const e=t.command,n=t.context,r=this._getHandler(e);this._atomicDo(()=>{this._fire(e,"revert",t),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(t),this._fire(e,"reverted",t)})};Ft.prototype._fire=function(t,e,n){arguments.length<3&&(n=e,e=null);const r=e?[t+"."+e,e]:[t];let i;n=this._eventBus.createEvent(n);for(const a of r)if(i=this._eventBus.fire("commandStack."+a,n),n.cancelBubble)break;return i};Ft.prototype._createId=function(){return this._uid++};Ft.prototype._atomicDo=function(t){const e=this._currentExecution;e.atomic=!0;try{t()}finally{e.atomic=!1}};Ft.prototype._internalExecute=function(t,e){const n=t.command,r=t.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(t),e||(this._fire(n,"preExecute",t),i.preExecute&&i.preExecute(r),this._fire(n,"preExecuted",t)),this._atomicDo(()=>{this._fire(n,"execute",t),i.execute&&this._markDirty(i.execute(r)),this._executedAction(t,e),this._fire(n,"executed",t)}),e||(this._fire(n,"postExecute",t),i.postExecute&&i.postExecute(r),this._fire(n,"postExecuted",t)),this._popAction()};Ft.prototype._pushAction=function(t){const e=this._currentExecution,n=e.actions,r=n[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+t.command+")");t.id||(t.id=r&&r.id||this._createId()),n.push(t)};Ft.prototype._popAction=function(){const t=this._currentExecution,e=t.trigger,n=t.actions,r=t.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:lC("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:e}),t.trigger=null)};Ft.prototype._markDirty=function(t){const e=this._currentExecution;t&&(t=tt(t)?t:[t],e.dirty=e.dirty.concat(t))};Ft.prototype._executedAction=function(t,e){const n=++this._stackIdx;e||this._stack.splice(n,this._stack.length,t)};Ft.prototype._revertedAction=function(t){this._stackIdx--};Ft.prototype._getHandler=function(t){return this._handlerMap[t]};Ft.prototype._setHandler=function(t,e){if(!t||!e)throw new Error("command and handler required");if(this._handlerMap[t])throw new Error("overriding handler for command <"+t+">");this._handlerMap[t]=e};const AL={commandStack:["type",Ft]};function ci(t,e){if(typeof e!="function")throw new Error("removeFn iterator must be a function");if(t){for(var n;n=t[0];)e(n);return t}}var IL=250,Ab=1400;function Zg(t,e,n){Z.call(this,e);var r=t.get("movePreview",!1);e.on("shape.move.start",Ab,function(i){var a=i.context,o=a.shapes,c=a.validatedShapes;a.shapes=Ib(o),a.validatedShapes=Ib(c)}),r&&e.on("shape.move.start",IL,function(i){var a=i.context,o=a.shapes,c=[];O(o,function(l){O(l.labels,function(d){!d.hidden&&a.shapes.indexOf(d)===-1&&c.push(d),l.labelTarget&&c.push(l)})}),O(c,function(l){r.makeDraggable(a,l,!0)})}),this.preExecuted("elements.move",Ab,function(i){var a=i.context,o=a.closure,c=o.enclosedElements,l=[];O(c,function(d){O(d.labels,function(u){c[u.id]||l.push(u)})}),o.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(i){var a=i.context,o=a.connection||a.shape;ci(o.labels,function(c){n.removeShape(c,{nested:!0})})}),this.execute("shape.delete",function(i){var a=i.context,o=a.shape,c=o.labelTarget;c&&(a.labelTargetIndex=sm(c.labels,o),a.labelTarget=c,o.labelTarget=null)}),this.revert("shape.delete",function(i){var a=i.context,o=a.shape,c=a.labelTarget,l=a.labelTargetIndex;c&&(sn(c.labels,o,l),o.labelTarget=c)})}ve(Zg,Z);Zg.$inject=["injector","eventBus","modeling"];function Ib(t){return rt(t,function(e){return t.indexOf(e.labelTarget)===-1})}const ML={__init__:["labelSupport"],labelSupport:["type",Zg]};var DL=251,Mb=1401,Db="attach-ok";function Xg(t,e,n,r,i){Z.call(this,e);var a=t.get("movePreview",!1);e.on("shape.move.start",Mb,function(o){var c=o.context,l=c.shapes,d=c.validatedShapes;c.shapes=OL(l),c.validatedShapes=$L(d)}),a&&e.on("shape.move.start",DL,function(o){var c=o.context,l=c.shapes,d=Df(l);O(d,function(u){a.makeDraggable(c,u,!0),O(u.labels,function(h){a.makeDraggable(c,h,!0)})})}),a&&e.on("shape.move.start",function(o){var c=o.context,l=c.shapes;if(l.length===1){var d=l[0],u=d.host;u&&(n.addMarker(u,Db),e.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(u,Db)}))}}),this.preExecuted("elements.move",Mb,function(o){var c=o.context,l=c.closure,d=c.shapes,u=Df(d);O(u,function(h){l.add(h,l.topLevel[h.host.id])})}),this.postExecuted("elements.move",function(o){var c=o.context,l=c.shapes,d=c.newHost,u;d&&l.length!==1||(d?u=l:u=rt(l,function(h){var p=h.host;return LL(h)&&!BL(l,p)}),O(u,function(h){i.updateAttachment(h,d)}))}),this.postExecuted("elements.move",function(o){var c=o.context.shapes;O(c,function(l){O(l.attachers,function(d){O(d.outgoing.slice(),function(u){var h=r.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});h||i.removeConnection(u)}),O(d.incoming.slice(),function(u){var h=r.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});h||i.removeConnection(u)})})})}),this.postExecute("shape.create",function(o){var c=o.context,l=c.shape,d=c.host;d&&i.updateAttachment(l,d)}),this.postExecute("shape.replace",function(o){var c=o.context,l=c.oldShape,d=c.newShape;ci(l.attachers,function(u){var h=r.allowed("elements.move",{target:d,shapes:[u]});h==="attach"?i.updateAttachment(u,d):i.removeShape(u)}),d.attachers.length&&O(d.attachers,function(u){var h=db(u,l,d);i.moveShape(u,h,u.parent)})}),this.postExecute("shape.resize",function(o){var c=o.context,l=c.shape,d=c.oldBounds,u=c.newBounds,h=l.attachers,p=c.hints||{};p.attachSupport!==!1&&O(h,function(f){var m=db(f,d,u);i.moveShape(f,m,f.parent),O(f.labels,function(x){i.moveShape(x,m,x.parent)})})}),this.preExecute("shape.delete",function(o){var c=o.context.shape;ci(c.attachers,function(l){i.removeShape(l)}),c.host&&i.updateAttachment(c,null)})}ve(Xg,Z);Xg.$inject=["injector","eventBus","canvas","rules","modeling"];function Df(t){return em(Xn(t,function(e){return e.attachers||[]}))}function OL(t){var e=Df(t);return dC("id",t,e)}function $L(t){var e=au(t,"id");return rt(t,function(n){for(;n;){if(n.host&&e[n.host.id])return!1;n=n.parent}return!0})}function LL(t){return!!t.host}function BL(t,e){return t.indexOf(e)!==-1}const FL={__depends__:[ts],__init__:["attachSupport"],attachSupport:["type",Xg]};function xr(t){this._model=t}xr.$inject=["moddle"];xr.prototype._needsId=function(t){return ze(t,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};xr.prototype._ensureId=function(t){if(t.id){this._model.ids.claim(t.id,t);return}var e;_(t,"bpmn:Activity")?e="Activity":_(t,"bpmn:Event")?e="Event":_(t,"bpmn:Gateway")?e="Gateway":ze(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])?e="Flow":e=(t.$type||"").replace(/^[^:]*:/g,""),e+="_",!t.id&&this._needsId(t)&&(t.id=this._model.ids.nextPrefixed(e,t))};xr.prototype.create=function(t,e){var n=this._model.create(t,e||{});return this._ensureId(n),n};xr.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};xr.prototype.createDiShape=function(t,e){return this.create("bpmndi:BPMNShape",B({bpmnElement:t,bounds:this.createDiBounds()},e))};xr.prototype.createDiBounds=function(t){return this.create("dc:Bounds",t)};xr.prototype.createDiWaypoints=function(t){var e=this;return Xn(t,function(n){return e.createDiWaypoint(n)})};xr.prototype.createDiWaypoint=function(t){return this.create("dc:Point",Xr(t,["x","y"]))};xr.prototype.createDiEdge=function(t,e){return this.create("bpmndi:BPMNEdge",B({bpmnElement:t,waypoint:this.createDiWaypoints([])},e))};xr.prototype.createDiPlane=function(t,e){return this.create("bpmndi:BPMNPlane",B({bpmnElement:t},e))};function Gn(t,e,n){Z.call(this,t),this._bpmnFactory=e;var r=this;function i(f){var m=f.context,x=m.hints||{},g;!m.cropped&&x.createElementsBehavior!==!1&&(g=m.connection,g.waypoints=n.getCroppedWaypoints(g),m.cropped=!0)}this.executed(["connection.layout","connection.create"],i),this.reverted(["connection.layout"],function(f){delete f.context.cropped});function a(f){var m=f.context;r.updateParent(m.shape||m.connection,m.oldParent)}function o(f){var m=f.context,x=m.shape||m.connection,g=m.parent||m.newParent;r.updateParent(x,g)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Bn(a)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Bn(o));function c(f){var m=f.context,x=m.oldRoot,g=x.children;O(g,function(w){_(w,"bpmn:BaseElement")&&r.updateParent(w)})}this.executed(["canvas.updateRoot"],c),this.reverted(["canvas.updateRoot"],c);function l(f){var m=f.context.shape;_(m,"bpmn:BaseElement")&&r.updateBounds(m)}this.executed(["shape.move","shape.create","shape.resize"],Bn(function(f){f.context.shape.type!=="label"&&l(f)})),this.reverted(["shape.move","shape.create","shape.resize"],Bn(function(f){f.context.shape.type!=="label"&&l(f)})),t.on("shape.changed",function(f){f.element.type==="label"&&l({context:{shape:f.element}})});function d(f){r.updateConnection(f.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],Bn(d)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],Bn(d));function u(f){r.updateConnectionWaypoints(f.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],Bn(u)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],Bn(u)),this.executed("connection.reconnect",Bn(function(f){var m=f.context,x=m.connection,g=m.oldSource,w=m.newSource,y=de(x),b=de(g),j=de(w);y.conditionExpression&&!ze(j,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(m.oldConditionExpression=y.conditionExpression,delete y.conditionExpression),g!==w&&b.default===y&&(m.oldDefault=b.default,delete b.default)})),this.reverted("connection.reconnect",Bn(function(f){var m=f.context,x=m.connection,g=m.oldSource,w=m.newSource,y=de(x),b=de(g),j=de(w);m.oldConditionExpression&&(y.conditionExpression=m.oldConditionExpression),m.oldDefault&&(b.default=m.oldDefault,delete j.default)}));function h(f){r.updateAttachment(f.context)}this.executed(["element.updateAttachment"],Bn(h)),this.reverted(["element.updateAttachment"],Bn(h)),this.executed("element.updateLabel",Bn(p)),this.reverted("element.updateLabel",Bn(p));function p(f){const{element:m}=f.context,x=Ji(m),g=xt(m),w=g&&g.get("label");Xa(m)||dd(m)||(x&&!w?g.set("label",e.create("bpmndi:BPMNLabel")):!x&&w&&g.set("label",void 0))}}ve(Gn,Z);Gn.$inject=["eventBus","bpmnFactory","connectionDocking"];Gn.prototype.updateAttachment=function(t){var e=t.shape,n=e.businessObject,r=e.host;n.attachedToRef=r&&r.businessObject};Gn.prototype.updateParent=function(t,e){if(!it(t)&&!(_(t,"bpmn:DataStoreReference")&&t.parent&&_(t.parent,"bpmn:Collaboration"))){var n=t.parent,r=t.businessObject,i=xt(t),a=n&&n.businessObject,o=xt(n);_(t,"bpmn:FlowNode")&&this.updateFlowNodeRefs(r,a,e&&e.businessObject),_(t,"bpmn:DataOutputAssociation")&&(t.source?a=t.source.businessObject:a=null),_(t,"bpmn:DataInputAssociation")&&(t.target?a=t.target.businessObject:a=null),this.updateSemanticParent(r,a),_(t,"bpmn:DataObjectReference")&&r.dataObjectRef&&this.updateSemanticParent(r.dataObjectRef,a),this.updateDiParent(i,o)}};Gn.prototype.updateBounds=function(t){var e=xt(t),n=UL(t);if(n){var r=Ir(n,e.get("bounds"));B(n,{x:t.x+r.x,y:t.y+r.y})}var i=it(t)?this._getLabel(e):e,a=i.bounds;a||(a=this._bpmnFactory.createDiBounds(),i.set("bounds",a)),B(a,{x:t.x,y:t.y,width:t.width,height:t.height})};Gn.prototype.updateFlowNodeRefs=function(t,e,n){if(n!==e){var r,i;_(n,"bpmn:Lane")&&(r=n.get("flowNodeRef"),en(r,t)),_(e,"bpmn:Lane")&&(i=e.get("flowNodeRef"),sn(i,t))}};Gn.prototype.updateDiConnection=function(t,e,n){var r=xt(t),i=xt(e),a=xt(n);r.sourceElement&&r.sourceElement.bpmnElement!==de(e)&&(r.sourceElement=e&&i),r.targetElement&&r.targetElement.bpmnElement!==de(n)&&(r.targetElement=n&&a)};Gn.prototype.updateDiParent=function(t,e){if(e&&!_(e,"bpmndi:BPMNPlane")&&(e=e.$parent),t.$parent!==e){var n=(e||t.$parent).get("planeElement");e?(n.push(t),t.$parent=e):(en(n,t),t.$parent=null)}};function zL(t){for(;t&&!_(t,"bpmn:Definitions");)t=t.$parent;return t}Gn.prototype.getLaneSet=function(t){var e,n;return _(t,"bpmn:Lane")?(e=t.childLaneSet,e||(e=this._bpmnFactory.create("bpmn:LaneSet"),t.childLaneSet=e,e.$parent=t),e):(_(t,"bpmn:Participant")&&(t=t.processRef),n=t.get("laneSets"),e=n[0],e||(e=this._bpmnFactory.create("bpmn:LaneSet"),e.$parent=t,n.push(e)),e)};Gn.prototype.updateSemanticParent=function(t,e,n){var r;if(t.$parent!==e&&!((_(t,"bpmn:DataInput")||_(t,"bpmn:DataOutput"))&&(_(e,"bpmn:Participant")&&"processRef"in e&&(e=e.processRef),"ioSpecification"in e&&e.ioSpecification===t.$parent))){if(_(t,"bpmn:Lane"))e&&(e=this.getLaneSet(e)),r="lanes";else if(_(t,"bpmn:FlowElement")){if(e){if(_(e,"bpmn:Participant"))e=e.processRef;else if(_(e,"bpmn:Lane"))do e=e.$parent.$parent;while(_(e,"bpmn:Lane"))}r="flowElements"}else if(_(t,"bpmn:Artifact")){for(;e&&!_(e,"bpmn:Process")&&!_(e,"bpmn:SubProcess")&&!_(e,"bpmn:Collaboration");)if(_(e,"bpmn:Participant")){e=e.processRef;break}else e=e.$parent;r="artifacts"}else if(_(t,"bpmn:MessageFlow"))r="messageFlows";else if(_(t,"bpmn:Participant")){r="participants";var i=t.processRef,a;i&&(a=zL(t.$parent||e),t.$parent&&(en(a.get("rootElements"),i),i.$parent=null),e&&(sn(a.get("rootElements"),i),i.$parent=a))}else _(t,"bpmn:DataOutputAssociation")?r="dataOutputAssociations":_(t,"bpmn:DataInputAssociation")&&(r="dataInputAssociations");if(!r)throw new Error(`no parent for <${t.id}> in <${e.id}>`);var o;if(t.$parent&&(o=t.$parent.get(r),en(o,t)),e?(o=e.get(r),o.push(t),t.$parent=e):t.$parent=null,n){var c=n.get(r);en(o,t),e&&(c||(c=[],e.set(r,c)),c.push(t))}}};Gn.prototype.updateConnectionWaypoints=function(t){var e=xt(t);e.set("waypoint",this._bpmnFactory.createDiWaypoints(t.waypoints))};Gn.prototype.updateConnection=function(t){var e=t.connection,n=de(e),r=e.source,i=de(r),a=e.target,o=de(e.target),c;if(_(n,"bpmn:DataAssociation"))_(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=i,c=t.parent||t.newParent||o,this.updateSemanticParent(n,o,c)):_(n,"bpmn:DataOutputAssociation")&&(c=t.parent||t.newParent||i,this.updateSemanticParent(n,i,c),n.targetRef=o);else{var l=_(n,"bpmn:SequenceFlow");n.sourceRef!==i&&(l&&(en(n.sourceRef&&n.sourceRef.get("outgoing"),n),i&&i.get("outgoing")&&i.get("outgoing").push(n)),n.sourceRef=i),n.targetRef!==o&&(l&&(en(n.targetRef&&n.targetRef.get("incoming"),n),o&&o.get("incoming")&&o.get("incoming").push(n)),n.targetRef=o)}this.updateConnectionWaypoints(e),this.updateDiConnection(e,r,a)};Gn.prototype._getLabel=function(t){return t.label||(t.label=this._bpmnFactory.createDiLabel()),t.label};function Bn(t){return function(e){var n=e.context,r=n.shape||n.connection||n.element;_(r,"bpmn:BaseElement")&&t(e)}}function UL(t){if(_(t,"bpmn:Activity")){var e=xt(t);if(e){var n=e.get("label");if(n)return n.get("bounds")}}}function vi(t,e){im.call(this),this._bpmnFactory=t,this._moddle=e}ve(vi,im);vi.$inject=["bpmnFactory","moddle"];vi.prototype._baseCreate=im.prototype.create;vi.prototype.create=function(t,e){if(t==="label"){var n=e.di||this._bpmnFactory.createDiLabel();return this._baseCreate(t,B({type:"label",di:n},uC,e))}return this.createElement(t,e)};vi.prototype.createElement=function(t,e){e=B({},e||{});var n,r=e.businessObject,i=e.di;if(!r){if(!e.type)throw new Error("no shape type specified");r=this._bpmnFactory.create(e.type),hC(r)}if(!VL(i)){var a=B({},i||{},{id:r.id+"_di"});t==="root"?i=this._bpmnFactory.createDiPlane(r,a):t==="connection"?i=this._bpmnFactory.createDiEdge(r,a):i=this._bpmnFactory.createDiShape(r,a)}_(r,"bpmn:Group")&&(e=B({isFrame:!0},e)),e=HL(r,e,["processRef","isInterrupting","associationDirection","isForCompensation"]),e.isExpanded&&(e=Of(i,e,"isExpanded")),ze(r,["bpmn:Lane","bpmn:Participant"])&&(e=Of(i,e,"isHorizontal")),_(r,"bpmn:SubProcess")&&(e.collapsed=!lt(r,i)),_(r,"bpmn:ExclusiveGateway")&&(ii(i,"isMarkerVisible")?i.isMarkerVisible===void 0&&(i.isMarkerVisible=!1):i.isMarkerVisible=!0),Yn(e.triggeredByEvent)&&(r.triggeredByEvent=e.triggeredByEvent,delete e.triggeredByEvent),Yn(e.cancelActivity)&&(r.cancelActivity=e.cancelActivity,delete e.cancelActivity);var o,c;return e.eventDefinitionType&&(o=r.get("eventDefinitions")||[],c=this._bpmnFactory.create(e.eventDefinitionType,e.eventDefinitionAttrs),e.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(c.condition=this._bpmnFactory.create("bpmn:FormalExpression")),o.push(c),c.$parent=r,r.eventDefinitions=o,delete e.eventDefinitionType),n=this.getDefaultSize(r,i),e=B({id:r.id},n,e,{businessObject:r,di:i}),this._baseCreate(t,e)};vi.prototype.getDefaultSize=function(t,e){var n=de(t);if(e=e||xt(t),_(n,"bpmn:SubProcess"))return lt(n,e)?{width:350,height:200}:{width:100,height:80};if(_(n,"bpmn:Task"))return{width:100,height:80};if(_(n,"bpmn:Gateway"))return{width:50,height:50};if(_(n,"bpmn:Event"))return{width:36,height:36};if(_(n,"bpmn:Participant")){var r=e.isHorizontal===void 0||e.isHorizontal===!0;return lt(n,e)?r?{width:600,height:250}:{width:250,height:600}:r?{width:400,height:60}:{width:60,height:400}}return _(n,"bpmn:Lane")?{width:400,height:100}:_(n,"bpmn:DataObjectReference")?{width:36,height:50}:_(n,"bpmn:DataStoreReference")?{width:50,height:50}:_(n,"bpmn:TextAnnotation")?{width:100,height:30}:_(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};vi.prototype.createParticipantShape=function(t){return Es(t)||(t={isExpanded:t}),t=B({type:"bpmn:Participant"},t||{}),t.isExpanded!==!1&&(t.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(t)};function HL(t,e,n){return O(n,function(r){e=Of(t,e,r)}),e}function Of(t,e,n){return e[n]===void 0?e:(t[n]=e[n],Cs(e,[n]))}function VL(t){return ze(t,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function eh(t,e){this._modeling=t,this._canvas=e}eh.$inject=["modeling","canvas"];eh.prototype.preExecute=function(t){var e=this._modeling,n=t.elements,r=t.alignment;O(n,function(i){var a={x:0,y:0};Yn(r.left)?a.x=r.left-i.x:Yn(r.right)?a.x=r.right-i.width-i.x:Yn(r.center)?a.x=r.center-Math.round(i.width/2)-i.x:Yn(r.top)?a.y=r.top-i.y:Yn(r.bottom)?a.y=r.bottom-i.height-i.y:Yn(r.middle)&&(a.y=r.middle-Math.round(i.height/2)-i.y),e.moveElements([i],a,i.parent)})};eh.prototype.postExecute=function(t){};function th(t){this._modeling=t}th.$inject=["modeling"];th.prototype.preExecute=function(t){var e=t.source;if(!e)throw new Error("source required");var n=t.target||e.parent,r=t.shape,i=t.hints||{};r=t.shape=this._modeling.createShape(r,t.position,n,{attach:i.attach}),t.shape=r};th.prototype.postExecute=function(t){var e=t.hints||{};GL(t.source,t.shape)||(e.connectionTarget===t.source?this._modeling.connect(t.shape,t.source,t.connection):this._modeling.connect(t.source,t.shape,t.connection))};function GL(t,e){return Kc(t.outgoing,function(n){return n.target===e})}function nh(t,e){this._canvas=t,this._layouter=e}nh.$inject=["canvas","layouter"];nh.prototype.execute=function(t){var e=t.connection,n=t.source,r=t.target,i=t.parent,a=t.parentIndex,o=t.hints;if(!n||!r)throw new Error("source and target required");if(!i)throw new Error("parent required");return e.source=n,e.target=r,e.waypoints||(e.waypoints=this._layouter.layoutConnection(e,o)),this._canvas.addConnection(e,i,a),e};nh.prototype.revert=function(t){var e=t.connection;return this._canvas.removeConnection(e),e.source=null,e.target=null,e};var sd=Math.round;function Jg(t){this._modeling=t}Jg.$inject=["modeling"];Jg.prototype.preExecute=function(t){var e=t.elements,n=t.parent,r=t.parentIndex,i=t.position,a=t.hints,o=this._modeling;O(e,function(h){et(h.x)||(h.x=0),et(h.y)||(h.y=0)});var c=rt(e,function(h){return!h.hidden}),l=Mn(c);O(e,function(h){jt(h)&&(h.waypoints=Xn(h.waypoints,function(p){return{x:sd(p.x-l.x-l.width/2+i.x),y:sd(p.y-l.y-l.height/2+i.y)}})),B(h,{x:sd(h.x-l.x-l.width/2+i.x),y:sd(h.y-l.y-l.height/2+i.y)})});var d=ru(e),u={};O(e,function(h){if(jt(h)){u[h.id]=et(r)?o.createConnection(u[h.source.id],u[h.target.id],r,h,h.parent||n,a):o.createConnection(u[h.source.id],u[h.target.id],h,h.parent||n,a);return}var p=B({},a);d.indexOf(h)===-1&&(p.autoResize=!1),it(h)&&(p=Cs(p,["attach"])),u[h.id]=et(r)?o.createShape(h,Xr(h,["x","y","width","height"]),h.parent||n,r,p):o.createShape(h,Xr(h,["x","y","width","height"]),h.parent||n,p)}),t.elements=iu(u)};var Ob=Math.round;function xi(t){this._canvas=t}xi.$inject=["canvas"];xi.prototype.execute=function(t){var e=t.shape,n=t.position,r=t.parent,i=t.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?B(e,n):B(e,{x:n.x-Ob(e.width/2),y:n.y-Ob(e.height/2)}),this._canvas.addShape(e,r,i),e};xi.prototype.revert=function(t){var e=t.shape;return this._canvas.removeShape(e),e};function ll(t){xi.call(this,t)}ve(ll,xi);ll.$inject=["canvas"];var WL=xi.prototype.execute;ll.prototype.execute=function(t){var e=t.shape;return KL(e),e.labelTarget=t.labelTarget,WL.call(this,t)};var qL=xi.prototype.revert;ll.prototype.revert=function(t){return t.shape.labelTarget=null,qL.call(this,t)};function KL(t){["width","height"].forEach(function(e){typeof t[e]>"u"&&(t[e]=0)})}function dl(t,e){this._canvas=t,this._modeling=e}dl.$inject=["canvas","modeling"];dl.prototype.preExecute=function(t){var e=this._modeling,n=t.connection;ci(n.incoming,function(r){e.removeConnection(r,{nested:!0})}),ci(n.outgoing,function(r){e.removeConnection(r,{nested:!0})})};dl.prototype.execute=function(t){var e=t.connection,n=e.parent;return t.parent=n,t.parentIndex=sm(n.children,e),t.source=e.source,t.target=e.target,this._canvas.removeConnection(e),e.source=null,e.target=null,e};dl.prototype.revert=function(t){var e=t.connection,n=t.parent,r=t.parentIndex;return e.source=t.source,e.target=t.target,sn(n.children,e,r),this._canvas.addConnection(e,n),e};function Qg(t,e){this._modeling=t,this._elementRegistry=e}Qg.$inject=["modeling","elementRegistry"];Qg.prototype.postExecute=function(t){var e=this._modeling,n=this._elementRegistry,r=t.elements;O(r,function(i){n.get(i.id)&&(i.waypoints?e.removeConnection(i):e.removeShape(i))})};function ul(t,e){this._canvas=t,this._modeling=e}ul.$inject=["canvas","modeling"];ul.prototype.preExecute=function(t){var e=this._modeling,n=t.shape;ci(n.incoming,function(r){e.removeConnection(r,{nested:!0})}),ci(n.outgoing,function(r){e.removeConnection(r,{nested:!0})}),ci(n.children,function(r){jt(r)?e.removeConnection(r,{nested:!0}):e.removeShape(r,{nested:!0})})};ul.prototype.execute=function(t){var e=this._canvas,n=t.shape,r=n.parent;return t.oldParent=r,t.oldParentIndex=sm(r.children,n),e.removeShape(n),n};ul.prototype.revert=function(t){var e=this._canvas,n=t.shape,r=t.oldParent,i=t.oldParentIndex;return sn(r.children,n,i),e.addShape(n,r),n};function rh(t){this._modeling=t}rh.$inject=["modeling"];var $b={x:"y",y:"x"};rh.prototype.preExecute=function(t){var e=this._modeling,n=t.groups,r=t.axis,i=t.dimension;function a(g,w){g.range.min=Math.min(w[r],g.range.min),g.range.max=Math.max(w[r]+w[i],g.range.max)}function o(g){return g[r]+g[i]/2}function c(g){return g.length-1}function l(g){return g.max-g.min}function d(g,w){var y={y:0};y[r]=g-o(w),y[r]&&(y[$b[r]]=0,e.moveElements([w],y,w.parent))}var u=n[0],h=c(n),p=n[h],f,m,x=0;O(n,function(g,w){var y,b,j;if(g.elements.length<2){w&&w!==n.length-1&&(a(g,g.elements[0]),x+=l(g.range));return}y=js(g.elements,r),b=y[0],w===h&&(b=y[c(y)]),j=o(b),g.range=null,O(y,function(C){if(d(j,C),g.range===null){g.range={min:C[r],max:C[r]+C[i]};return}a(g,C)}),w&&w!==n.length-1&&(x+=l(g.range))}),m=Math.abs(p.range.min-u.range.max),f=Math.round((m-x)/(n.length-1)),!(f<n.length-1)&&O(n,function(g,w){var y={},b;g===u||g===p||(b=n[w-1],g.range.max=0,O(g.elements,function(j,C){y[$b[r]]=0,y[r]=b.range.max-j[r]+f,g.range.min!==j[r]&&(y[r]+=j[r]-g.range.min),y[r]&&e.moveElements([j],y,j.parent),g.range.max=Math.max(j[r]+j[i],C?g.range.max:0)}))})};rh.prototype.postExecute=function(t){};function sh(t,e){this._layouter=t,this._canvas=e}sh.$inject=["layouter","canvas"];sh.prototype.execute=function(t){var e=t.connection,n=e.waypoints;return B(t,{oldWaypoints:n}),e.waypoints=this._layouter.layoutConnection(e,t.hints),e};sh.prototype.revert=function(t){var e=t.connection;return e.waypoints=t.oldWaypoints,e};function ev(){}ev.prototype.execute=function(t){var e=t.connection,n=t.delta,r=t.newParent||e.parent,i=t.newParentIndex,a=e.parent;return t.oldParent=a,t.oldParentIndex=en(a.children,e),sn(r.children,e,i),e.parent=r,O(e.waypoints,function(o){o.x+=n.x,o.y+=n.y,o.original&&(o.original.x+=n.x,o.original.y+=n.y)}),e};ev.prototype.revert=function(t){var e=t.connection,n=e.parent,r=t.oldParent,i=t.oldParentIndex,a=t.delta;return en(n.children,e),sn(r.children,e,i),e.parent=r,O(e.waypoints,function(o){o.x-=a.x,o.y-=a.y,o.original&&(o.original.x-=a.x,o.original.y-=a.y)}),e};function tv(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}tv.prototype.add=function(t,e){return this.addAll([t],e)};tv.prototype.addAll=function(t,e){var n=pC(t,!!e,this);return B(this,n),this};function hl(t){this._modeling=t}hl.prototype.moveRecursive=function(t,e,n){return t?this.moveClosure(this.getClosure(t),e,n):[]};hl.prototype.moveClosure=function(t,e,n,r,i){var a=this._modeling,o=t.allShapes,c=t.allConnections,l=t.enclosedConnections,d=t.topLevel,u=!1;i&&i.parent===n&&(u=!0),O(o,function(h){a.moveShape(h,e,d[h.id]&&!u&&n,{recurse:!1,layout:!1})}),O(c,function(h){var p=!!o[h.source.id],f=!!o[h.target.id];l[h.id]&&p&&f?a.moveConnection(h,e,d[h.id]&&!u&&n):a.layoutConnection(h,{connectionStart:p&&Ng(h,h.source,e),connectionEnd:f&&Sg(h,h.target,e)})})};hl.prototype.getClosure=function(t){return new tv().addAll(t,!0)};function ih(t){this._helper=new hl(t)}ih.$inject=["modeling"];ih.prototype.preExecute=function(t){t.closure=this._helper.getClosure(t.shapes)};ih.prototype.postExecute=function(t){var e=t.hints,n;e&&e.primaryShape&&(n=e.primaryShape,e.oldParent=n.parent),this._helper.moveClosure(t.closure,t.delta,t.newParent,t.newHost,n)};function la(t){this._modeling=t,this._helper=new hl(t)}la.$inject=["modeling"];la.prototype.execute=function(t){var e=t.shape,n=t.delta,r=t.newParent||e.parent,i=t.newParentIndex,a=e.parent;return t.oldBounds=Xr(e,["x","y","width","height"]),t.oldParent=a,t.oldParentIndex=en(a.children,e),sn(r.children,e,i),B(e,{parent:r,x:e.x+n.x,y:e.y+n.y}),e};la.prototype.postExecute=function(t){var e=t.shape,n=t.delta,r=t.hints,i=this._modeling;r.layout!==!1&&(O(e.incoming,function(a){i.layoutConnection(a,{connectionEnd:Sg(a,e,n)})}),O(e.outgoing,function(a){i.layoutConnection(a,{connectionStart:Ng(a,e,n)})})),r.recurse!==!1&&this.moveChildren(t)};la.prototype.revert=function(t){var e=t.shape,n=t.oldParent,r=t.oldParentIndex,i=t.delta;return sn(n.children,e,r),B(e,{parent:n,x:e.x-i.x,y:e.y-i.y}),e};la.prototype.moveChildren=function(t){var e=t.delta,n=t.shape;this._helper.moveRecursive(n.children,e,null)};la.prototype.getNewParent=function(t){return t.newParent||t.shape.parent};function pl(t){this._modeling=t}pl.$inject=["modeling"];pl.prototype.execute=function(t){var e=t.newSource,n=t.newTarget,r=t.connection,i=t.dockingOrPoints;if(!e&&!n)throw new Error("newSource or newTarget required");return tt(i)&&(t.oldWaypoints=r.waypoints,r.waypoints=i),e&&(t.oldSource=r.source,r.source=e),n&&(t.oldTarget=r.target,r.target=n),r};pl.prototype.postExecute=function(t){var e=t.connection,n=t.newSource,r=t.newTarget,i=t.dockingOrPoints,a=t.hints||{},o={};a.connectionStart&&(o.connectionStart=a.connectionStart),a.connectionEnd&&(o.connectionEnd=a.connectionEnd),a.layoutConnection!==!1&&(n&&(!r||a.docking==="source")&&(o.connectionStart=o.connectionStart||Lb(tt(i)?i[0]:i)),r&&(!n||a.docking==="target")&&(o.connectionEnd=o.connectionEnd||Lb(tt(i)?i[i.length-1]:i)),a.newWaypoints&&(o.waypoints=a.newWaypoints),this._modeling.layoutConnection(e,o))};pl.prototype.revert=function(t){var e=t.oldSource,n=t.oldTarget,r=t.oldWaypoints,i=t.connection;return e&&(i.source=e),n&&(i.target=n),r&&(i.waypoints=r),i};function Lb(t){return t.original||t}function Is(t,e){this._modeling=t,this._rules=e}Is.$inject=["modeling","rules"];Is.prototype.preExecute=function(t){var e=this,n=this._modeling,r=this._rules,i=t.oldShape,a=t.newData,o=t.hints||{},c;function l(m,x,g){return r.allowed("connection.reconnect",{connection:g,source:m,target:x})}var d={x:a.x,y:a.y},u={x:i.x,y:i.y,width:i.width,height:i.height};c=t.newShape=t.newShape||e.createShape(a,d,i.parent,o),i.host&&n.updateAttachment(c,i.host);var h;o.moveChildren!==!1&&(h=i.children.slice(),n.moveElements(h,{x:0,y:0},c,o));var p=i.incoming.slice(),f=i.outgoing.slice();O(p,function(m){var x=m.source,g=l(x,c,m);g&&e.reconnectEnd(m,c,Wu(m,c,u),o)}),O(f,function(m){var x=m.target,g=l(c,x,m);g&&e.reconnectStart(m,c,Gu(m,c,u),o)})};Is.prototype.postExecute=function(t){var e=t.oldShape;this._modeling.removeShape(e)};Is.prototype.execute=function(t){};Is.prototype.revert=function(t){};Is.prototype.createShape=function(t,e,n,r){return this._modeling.createShape(t,e,n,r)};Is.prototype.reconnectStart=function(t,e,n,r){this._modeling.reconnectStart(t,e,n,r)};Is.prototype.reconnectEnd=function(t,e,n,r){this._modeling.reconnectEnd(t,e,n,r)};function fl(t){this._modeling=t}fl.$inject=["modeling"];fl.prototype.execute=function(t){var e=t.shape,n=t.newBounds,r=t.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(r&&(n.width<r.width||n.height<r.height))throw new Error("width and height cannot be less than minimum height and width");if(!r&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return t.oldBounds={width:e.width,height:e.height,x:e.x,y:e.y},B(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e};fl.prototype.postExecute=function(t){var e=this._modeling,n=t.shape,r=t.oldBounds,i=t.hints||{};i.layout!==!1&&(O(n.incoming,function(a){e.layoutConnection(a,{connectionEnd:Wu(a,n,r)})}),O(n.outgoing,function(a){e.layoutConnection(a,{connectionStart:Gu(a,n,r)})}))};fl.prototype.revert=function(t){var e=t.shape,n=t.oldBounds;return B(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e};function yi(t){this._modeling=t}yi.$inject=["modeling"];yi.prototype.preExecute=function(t){var e=t.delta,n=t.direction,r=t.movingShapes,i=t.resizingShapes,a=t.start,o={};this.moveShapes(r,e),O(i,function(c){o[c.id]=ZL(c)}),this.resizeShapes(i,e,n),this.updateConnectionWaypoints(jL(r,i),e,n,a,r,i,o)};yi.prototype.execute=function(){};yi.prototype.revert=function(){};yi.prototype.moveShapes=function(t,e){var n=this;O(t,function(r){n._modeling.moveShape(r,e,null,{autoResize:!1,layout:!1,recurse:!1})})};yi.prototype.resizeShapes=function(t,e,n){var r=this;O(t,function(i){var a=EL(i,n,e);r._modeling.resizeShape(i,a,null,{attachSupport:!1,autoResize:!1,layout:!1})})};yi.prototype.updateConnectionWaypoints=function(t,e,n,r,i,a,o){var c=this,l=i.concat(a);O(t,function(d){var u=d.source,h=d.target,p=YL(d),f=NN(n),m={};qs(l,u)&&qs(l,h)?(p=Xn(p,function(x){return Fb(x,r,n)&&(x[f]=x[f]+e[f]),x.original&&Fb(x.original,r,n)&&(x.original[f]=x.original[f]+e[f]),x}),c._modeling.updateWaypoints(d,p,{labelBehavior:!1})):(qs(l,u)||qs(l,h))&&(qs(i,u)?m.connectionStart=Ng(d,u,e):qs(i,h)?m.connectionEnd=Sg(d,h,e):qs(a,u)?m.connectionStart=Gu(d,u,o[u.id]):qs(a,h)&&(m.connectionEnd=Wu(d,h,o[h.id])),c._modeling.layoutConnection(d,m))})};function Bb(t){return B({},t)}function YL(t){return Xn(t.waypoints,function(e){return e=Bb(e),e.original&&(e.original=Bb(e.original)),e})}function NN(t){switch(t){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function Fb(t,e,n){var r=NN(n);if(/e|s/.test(n))return t[r]>e;if(/n|w/.test(n))return t[r]<e}function qs(t,e){return t.indexOf(e)!==-1}function ZL(t){return{x:t.x,y:t.y,height:t.height,width:t.width}}function ah(t){this._modeling=t}ah.$inject=["modeling"];ah.prototype.execute=function(t){var e=t.shape,n=e.children;t.oldChildrenVisibility=SN(n),e.collapsed=!e.collapsed;var r=kN(n,e.collapsed);return[e].concat(r)};ah.prototype.revert=function(t){var e=t.shape,n=t.oldChildrenVisibility,r=e.children,i=CN(r,n);return e.collapsed=!e.collapsed,[e].concat(i)};function SN(t){var e={};return O(t,function(n){e[n.id]=n.hidden,n.children&&(e=B({},e,SN(n.children)))}),e}function kN(t,e){var n=[];return O(t,function(r){r.hidden=e,n=n.concat(r),r.children&&(n=n.concat(kN(r.children,r.collapsed||e)))}),n}function CN(t,e){var n=[];return O(t,function(r){r.hidden=e[r.id],n=n.concat(r),r.children&&(n=n.concat(CN(r.children,e)))}),n}function oh(t){this._modeling=t}oh.$inject=["modeling"];oh.prototype.execute=function(t){var e=t.shape,n=t.newHost,r=e.host;return t.oldHost=r,t.attacherIdx=PN(r,e),TN(n,e),e.host=n,e};oh.prototype.revert=function(t){var e=t.shape,n=t.newHost,r=t.oldHost,i=t.attacherIdx;return e.host=r,PN(n,e),TN(r,e,i),e};function PN(t,e){return en(t&&t.attachers,e)}function TN(t,e,n){if(t){var r=t.attachers;r||(t.attachers=r=[]),sn(r,e,n)}}function nv(){}nv.prototype.execute=function(t){var e=t.connection,n=t.newWaypoints;return t.oldWaypoints=e.waypoints,e.waypoints=n,e};nv.prototype.revert=function(t){var e=t.connection,n=t.oldWaypoints;return e.waypoints=n,e};function yt(t,e,n){this._eventBus=t,this._elementFactory=e,this._commandStack=n;var r=this;t.on("diagram.init",function(){r.registerHandlers(n)})}yt.$inject=["eventBus","elementFactory","commandStack"];yt.prototype.getHandlers=function(){return{"shape.append":th,"shape.create":xi,"shape.delete":ul,"shape.move":la,"shape.resize":fl,"shape.replace":Is,"shape.toggleCollapse":ah,spaceTool:yi,"label.create":ll,"connection.create":nh,"connection.delete":dl,"connection.move":ev,"connection.layout":sh,"connection.updateWaypoints":nv,"connection.reconnect":pl,"elements.create":Jg,"elements.move":ih,"elements.delete":Qg,"elements.distribute":rh,"elements.align":eh,"element.updateAttachment":oh}};yt.prototype.registerHandlers=function(t){O(this.getHandlers(),function(e,n){t.registerHandler(n,e)})};yt.prototype.moveShape=function(t,e,n,r,i){typeof r=="object"&&(i=r,r=null);var a={shape:t,delta:e,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("shape.move",a)};yt.prototype.updateAttachment=function(t,e){var n={shape:t,newHost:e};this._commandStack.execute("element.updateAttachment",n)};yt.prototype.moveElements=function(t,e,n,r){r=r||{};var i=r.attach,a=n,o;i===!0?(o=n,a=n.parent):i===!1&&(o=null);var c={shapes:t,delta:e,newParent:a,newHost:o,hints:r};this._commandStack.execute("elements.move",c)};yt.prototype.moveConnection=function(t,e,n,r,i){typeof r=="object"&&(i=r,r=void 0);var a={connection:t,delta:e,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("connection.move",a)};yt.prototype.layoutConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.layout",n)};yt.prototype.createConnection=function(t,e,n,r,i,a){typeof n=="object"&&(a=i,i=r,r=n,n=void 0),r=this._create("connection",r);var o={source:t,target:e,parent:i,parentIndex:n,connection:r,hints:a};return this._commandStack.execute("connection.create",o),o.connection};yt.prototype.createShape=function(t,e,n,r,i){typeof r!="number"&&(i=r,r=void 0),i=i||{};var a=i.attach,o,c;t=this._create("shape",t),a?(o=n.parent,c=n):o=n;var l={position:e,shape:t,parent:o,parentIndex:r,host:c,hints:i};return this._commandStack.execute("shape.create",l),l.shape};yt.prototype.createElements=function(t,e,n,r,i){tt(t)||(t=[t]),typeof r!="number"&&(i=r,r=void 0),i=i||{};var a={position:e,elements:t,parent:n,parentIndex:r,hints:i};return this._commandStack.execute("elements.create",a),a.elements};yt.prototype.createLabel=function(t,e,n,r){n=this._create("label",n);var i={labelTarget:t,position:e,parent:r||t.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape};yt.prototype.appendShape=function(t,e,n,r,i){i=i||{},e=this._create("shape",e);var a={source:t,position:n,target:r,shape:e,connection:i.connection,connectionParent:i.connectionParent,hints:i};return this._commandStack.execute("shape.append",a),a.shape};yt.prototype.removeElements=function(t){var e={elements:t};this._commandStack.execute("elements.delete",e)};yt.prototype.distributeElements=function(t,e,n){var r={groups:t,axis:e,dimension:n};this._commandStack.execute("elements.distribute",r)};yt.prototype.removeShape=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.delete",n)};yt.prototype.removeConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.delete",n)};yt.prototype.replaceShape=function(t,e,n){var r={oldShape:t,newData:e,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape};yt.prototype.alignElements=function(t,e){var n={elements:t,alignment:e};this._commandStack.execute("elements.align",n)};yt.prototype.resizeShape=function(t,e,n,r){var i={shape:t,newBounds:e,minBounds:n,hints:r};this._commandStack.execute("shape.resize",i)};yt.prototype.createSpace=function(t,e,n,r,i){var a={delta:n,direction:r,movingShapes:t,resizingShapes:e,start:i};this._commandStack.execute("spaceTool",a)};yt.prototype.updateWaypoints=function(t,e,n){var r={connection:t,newWaypoints:e,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)};yt.prototype.reconnect=function(t,e,n,r,i){var a={connection:t,newSource:e,newTarget:n,dockingOrPoints:r,hints:i||{}};this._commandStack.execute("connection.reconnect",a)};yt.prototype.reconnectStart=function(t,e,n,r){r||(r={}),this.reconnect(t,e,t.target,n,B(r,{docking:"source"}))};yt.prototype.reconnectEnd=function(t,e,n,r){r||(r={}),this.reconnect(t,t.source,e,n,B(r,{docking:"target"}))};yt.prototype.connect=function(t,e,n,r){return this.createConnection(t,e,n||{},t.parent,r)};yt.prototype._create=function(t,e){return fC(e)?e:this._elementFactory.create(t,e)};yt.prototype.toggleCollapse=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.toggleCollapse",n)};function ml(t){this._elementRegistry=t}ml.$inject=["elementRegistry"];ml.prototype.execute=function(t){var e=t.element,n=t.moddleElement,r=t.properties;if(!n)throw new Error("<moddleElement> required");var i=t.changed||this._getVisualReferences(n).concat(e),a=t.oldProperties||XL(n,$p(r));return RN(n,r),t.oldProperties=a,t.changed=i,i};ml.prototype.revert=function(t){var e=t.oldProperties,n=t.moddleElement,r=t.changed;return RN(n,e),r};ml.prototype._getVisualReferences=function(t){var e=this._elementRegistry;return _(t,"bpmn:DataObject")?JL(t,e):[]};function XL(t,e){return hi(e,function(n,r){return n[r]=t.get(r),n},{})}function RN(t,e){O(e,function(n,r){t.set(r,n)})}function JL(t,e){return e.filter(function(n){return _(n,"bpmn:DataObjectReference")&&de(n).dataObjectRef===t})}var ec="default",ys="id",AN="di",QL={width:0,height:0};function gl(t,e,n,r){this._elementRegistry=t,this._moddle=e,this._modeling=n,this._textRenderer=r}gl.$inject=["elementRegistry","moddle","modeling","textRenderer"];gl.prototype.execute=function(t){var e=t.element,n=[e];if(!e)throw new Error("element required");var r=this._elementRegistry,i=this._moddle.ids,a=e.businessObject,o=s3(t.properties),c=t.oldProperties||e3(e,o);return IN(o,a)&&(i.unclaim(a[ys]),r.updateId(e,o[ys]),i.claim(o[ys],a)),ec in o&&(o[ec]&&n.push(r.get(o[ec].id)),a[ec]&&n.push(r.get(a[ec].id))),MN(e,o),t.oldProperties=c,t.changed=n,n};gl.prototype.postExecute=function(t){var e=t.element,n=e.label,r=n&&de(n).name;if(r){var i=this._textRenderer.getExternalLabelBounds(n,r);this._modeling.resizeShape(n,i,QL)}};gl.prototype.revert=function(t){var e=t.element,n=t.properties,r=t.oldProperties,i=e.businessObject,a=this._elementRegistry,o=this._moddle.ids;return MN(e,r),IN(n,i)&&(o.unclaim(n[ys]),a.updateId(e,r[ys]),o.claim(r[ys],i)),t.changed};function IN(t,e){return ys in t&&t[ys]!==e[ys]}function e3(t,e){var n=$p(e),r=t.businessObject,i=xt(t);return hi(n,function(a,o){return o!==AN?a[o]=r.get(o):a[o]=t3(i,$p(e.di)),a},{})}function t3(t,e){return hi(e,function(n,r){return n[r]=t&&t.get(r),n},{})}function MN(t,e){var n=t.businessObject,r=xt(t);O(e,function(i,a){a!==AN?n.set(a,i):r&&n3(r,i)})}function n3(t,e){O(e,function(n,r){t.set(r,n)})}var r3=["default"];function s3(t){var e=B({},t);return r3.forEach(function(n){n in t&&(e[n]=de(e[n]))}),e}function ch(t,e){this._canvas=t,this._modeling=e}ch.$inject=["canvas","modeling"];ch.prototype.execute=function(t){var e=this._canvas,n=t.newRoot,r=n.businessObject,i=e.getRootElement(),a=i.businessObject,o=a.$parent,c=xt(i);return e.setRootElement(n),e.removeRootElement(i),sn(o.rootElements,r),r.$parent=o,en(o.rootElements,a),a.$parent=null,i.di=null,c.bpmnElement=r,n.di=c,t.oldRoot=i,[]};ch.prototype.revert=function(t){var e=this._canvas,n=t.newRoot,r=n.businessObject,i=t.oldRoot,a=i.businessObject,o=r.$parent,c=xt(n);return e.setRootElement(i),e.removeRootElement(n),en(o.rootElements,r),r.$parent=null,sn(o.rootElements,a),a.$parent=o,n.di=null,c.bpmnElement=a,i.di=c,[]};function rv(t,e){this._modeling=t,this._spaceTool=e}rv.$inject=["modeling","spaceTool"];rv.prototype.preExecute=function(t){var e=this._spaceTool,n=this._modeling,r=t.shape,i=t.location,a=cr(r),o=a===r,c=o?r:r.parent,l=mi(c),d=xn(r);if(d?i==="left"?i="top":i==="right"&&(i="bottom"):i==="top"?i="left":i==="bottom"&&(i="right"),!l.length){var u=d?{x:r.x+ir,y:r.y,width:r.width-ir,height:r.height}:{x:r.x,y:r.y+ir,width:r.width,height:r.height-ir};n.createShape({type:"bpmn:Lane",isHorizontal:d},u,c)}var h=[];lu(a,function(j){return h.push(j),j.label&&h.push(j.label),j===r?[]:rt(j.children,function(C){return C!==r})});var p,f,m,x,g;i==="top"?(p=-120,f=r.y,m=f+10,x="n",g="y"):i==="left"?(p=-120,f=r.x,m=f+10,x="w",g="x"):i==="bottom"?(p=120,f=r.y+r.height,m=f-10,x="s",g="y"):i==="right"&&(p=120,f=r.x+r.width,m=f-10,x="e",g="x");var w=e.calculateAdjustments(h,g,p,m),y=d?{x:0,y:p}:{x:p,y:0};e.makeSpace(w.movingShapes,w.resizingShapes,y,x,m);var b=d?{x:r.x+(o?ir:0),y:f-(i==="top"?120:0),width:r.width-(o?ir:0),height:120}:{x:f-(i==="left"?120:0),y:r.y+(o?ir:0),width:120,height:r.height-(o?ir:0)};t.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:d},b,c)};function sv(t){this._modeling=t}sv.$inject=["modeling"];sv.prototype.preExecute=function(t){var e=this._modeling,n=t.shape,r=t.count,i=mi(n),a=i.length;if(a>r)throw new Error(`more than <${r}> child lanes`);var o=xn(n),c=o?n.height:n.width,l=Math.round(c/r),d,u,h,p;for(p=0;p<r;p++)p===r-1?d=c-l*p:d=l,u=o?{x:n.x+ir,y:n.y+p*l,width:n.width-ir,height:d}:{x:n.x+p*l,y:n.y+ir,width:d,height:n.height-ir},p<a?e.resizeShape(i[p],u):(h={type:"bpmn:Lane",isHorizontal:o},e.createShape(h,u,n))};function vl(t,e){this._modeling=t,this._spaceTool=e}vl.$inject=["modeling","spaceTool"];vl.prototype.preExecute=function(t){var e=t.shape,n=t.newBounds,r=t.balanced;r!==!1?this.resizeBalanced(e,n):this.resizeSpace(e,n)};vl.prototype.resizeBalanced=function(t,e){var n=this._modeling,r=AO(t,e);n.resizeShape(t,e),r.forEach(function(i){n.resizeShape(i.shape,i.newBounds)})};vl.prototype.resizeSpace=function(t,e){var n=this._spaceTool,r=Ne(t),i=Ne(e),a=ME(i,r),o=cr(t),c=[],l=[];lu(o,function(m){return c.push(m),(_(m,"bpmn:Lane")||_(m,"bpmn:Participant"))&&l.push(m),m.children});var d,u,h,p,f;(a.bottom||a.top)&&(d=a.bottom||a.top,u=t.y+(a.bottom?t.height:0)+(a.bottom?-10:10),h=a.bottom?"s":"n",p=a.top>0||a.bottom<0?-d:d,f=n.calculateAdjustments(c,"y",p,u),n.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:d},h)),(a.left||a.right)&&(d=a.right||a.left,u=t.x+(a.right?t.width:0)+(a.right?-10:100),h=a.right?"e":"w",p=a.left>0||a.right<0?-d:d,f=n.calculateAdjustments(l,"x",p,u),n.makeSpace(f.movingShapes,f.resizingShapes,{x:d,y:0},h))};var Dc="flowNodeRef",iv="lanes";function xl(t){this._elementRegistry=t}xl.$inject=["elementRegistry"];xl.prototype._computeUpdates=function(t,e){var n=[],r=[],i={},a=[];function o(u,h){var p=Ne(h),f={x:u.x+u.width/2,y:u.y+u.height/2};return f.x>p.left&&f.x<p.right&&f.y>p.top&&f.y<p.bottom}function c(u){n.indexOf(u)===-1&&(a.push(u),n.push(u))}function l(u){var h=cr(u);return i[h.id]||(i[h.id]=Hu(h)),i[h.id]}function d(u){if(!u.parent)return[];var h=l(u);return h.filter(function(p){return o(u,p)}).map(function(p){return p.businessObject})}return e.forEach(function(u){var h=cr(u);if(!(!h||n.indexOf(h)!==-1)){var p=h.children.filter(function(f){return _(f,"bpmn:FlowNode")});p.forEach(c),n.push(h)}}),t.forEach(c),a.forEach(function(u){var h=u.businessObject,p=h.get(iv),f=p.slice(),m=d(u);r.push({flowNode:h,remove:f,add:m})}),e.forEach(function(u){var h=u.businessObject;u.parent||h.get(Dc).forEach(function(p){r.push({flowNode:p,remove:[h],add:[]})})}),r};xl.prototype.execute=function(t){var e=t.updates;return e||(e=t.updates=this._computeUpdates(t.flowNodeShapes,t.laneShapes)),e.forEach(function(n){var r=n.flowNode,i=r.get(iv);n.remove.forEach(function(a){en(i,a),en(a.get(Dc),r)}),n.add.forEach(function(a){sn(i,a),sn(a.get(Dc),r)})}),[]};xl.prototype.revert=function(t){var e=t.updates;return e.forEach(function(n){var r=n.flowNode,i=r.get(iv);n.add.forEach(function(a){en(i,a),en(a.get(Dc),r)}),n.remove.forEach(function(a){sn(i,a),sn(a.get(Dc),r)})}),[]};function lh(t){this._moddle=t}lh.$inject=["moddle"];lh.prototype.execute=function(t){var e=this._moddle.ids,n=t.id,r=t.element,i=t.claiming;return i?e.claim(n,r):e.unclaim(n),[]};lh.prototype.revert=function(t){var e=this._moddle.ids,n=t.id,r=t.element,i=t.claiming;return i?e.unclaim(n):e.claim(n,r),[]};var i3={fill:void 0,stroke:void 0};function av(t){this._commandStack=t,this._normalizeColor=function(e){if(e){if(su(e)){var n=a3(e);if(n)return n}throw new Error(`invalid color value: ${e}`)}}}av.$inject=["commandStack"];av.prototype.postExecute=function(t){var e=t.elements,n=t.colors||i3,r=this,i={};"fill"in n&&B(i,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&B(i,{"border-color":this._normalizeColor(n.stroke)}),O(e,function(a){var o=jt(a)?Xr(i,["border-color"]):i,c=xt(a);if(o3(o),it(a))r._commandStack.execute("element.updateModdleProperties",{element:a,moddleElement:c.label,properties:{color:i["border-color"]}});else{if(!ze(c,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;r._commandStack.execute("element.updateProperties",{element:a,properties:{di:o}})}})};function a3(t){var e=document.createElement("canvas").getContext("2d");return e.fillStyle="transparent",e.fillStyle=t,/^#[0-9a-fA-F]{6}$/.test(e.fillStyle)?e.fillStyle:null}function o3(t){"border-color"in t&&(t.stroke=t["border-color"]),"background-color"in t&&(t.fill=t["background-color"])}var c3={width:0,height:0};function DN(t,e,n){function r(l,d){var u=l.label||l,h=l.labelTarget||l;return mC(u,d),[u,h]}function i(l){var d=l.element,u=d.businessObject,h=l.newLabel;if(!it(d)&&Xa(d)&&!cu(d)&&!zb(h)){var p=7,f=Rw(d);f={x:f.x,y:f.y+p},t.createLabel(d,f,{id:u.id+"_label",businessObject:u,di:d.di})}}function a(l){return l.oldLabel=Ji(l.element),r(l.element,l.newLabel)}function o(l){return r(l.element,l.oldLabel)}function c(l){var d=l.element,u=d.label||d,h=l.newLabel,p=l.newBounds,f=l.hints||{};if(!(!it(u)&&!_(u,"bpmn:TextAnnotation"))){if(it(u)&&zb(h)){f.removeShape!==!1&&t.removeShape(u,{unsetLabel:!1});return}var m=Ji(d);typeof p>"u"&&(p=e.getExternalLabelBounds(u,m)),p&&t.resizeShape(u,p,c3)}}this.preExecute=i,this.execute=a,this.revert=o,this.postExecute=c}DN.$inject=["modeling","textRenderer","bpmnFactory"];function zb(t){return!t||!t.trim()}function jn(t,e,n,r){yt.call(this,t,e,n),this._bpmnRules=r}ve(jn,yt);jn.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];jn.prototype.getHandlers=function(){var t=yt.prototype.getHandlers.call(this);return t["element.updateModdleProperties"]=ml,t["element.updateProperties"]=gl,t["canvas.updateRoot"]=ch,t["lane.add"]=rv,t["lane.resize"]=vl,t["lane.split"]=sv,t["lane.updateRefs"]=xl,t["id.updateClaim"]=lh,t["element.setColor"]=av,t["element.updateLabel"]=DN,t};jn.prototype.updateLabel=function(t,e,n,r){this._commandStack.execute("element.updateLabel",{element:t,newLabel:e,newBounds:n,hints:r||{}})};jn.prototype.connect=function(t,e,n,r){var i=this._bpmnRules;if(n||(n=i.canConnect(t,e)),!!n)return this.createConnection(t,e,n,t.parent,r)};jn.prototype.updateModdleProperties=function(t,e,n){this._commandStack.execute("element.updateModdleProperties",{element:t,moddleElement:e,properties:n})};jn.prototype.updateProperties=function(t,e){this._commandStack.execute("element.updateProperties",{element:t,properties:e})};jn.prototype.resizeLane=function(t,e,n){this._commandStack.execute("lane.resize",{shape:t,newBounds:e,balanced:n})};jn.prototype.addLane=function(t,e){var n={shape:t,location:e};return this._commandStack.execute("lane.add",n),n.newLane};jn.prototype.splitLane=function(t,e){this._commandStack.execute("lane.split",{shape:t,count:e})};jn.prototype.makeCollaboration=function(){var t=this._create("root",{type:"bpmn:Collaboration"}),e={newRoot:t};return this._commandStack.execute("canvas.updateRoot",e),t};jn.prototype.makeProcess=function(){var t=this._create("root",{type:"bpmn:Process"}),e={newRoot:t};return this._commandStack.execute("canvas.updateRoot",e),t};jn.prototype.updateLaneRefs=function(t,e){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:t,laneShapes:e})};jn.prototype.claimId=function(t,e){this._commandStack.execute("id.updateClaim",{id:t,element:e,claiming:!0})};jn.prototype.unclaimId=function(t,e){this._commandStack.execute("id.updateClaim",{id:t,element:e})};jn.prototype.setColor=function(t,e){t.length||(t=[t]),this._commandStack.execute("element.setColor",{elements:t,colors:e})};function ON(){}ON.prototype.layoutConnection=function(t,e){return e=e||{},[e.connectionStart||Te(e.source||t.source),e.connectionEnd||Te(e.target||t.target)]};var id=20,l3=5,qd=Math.round,Ub=20,d3={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function u3(t,e){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[e].test(t)}function h3(t,e){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[t].test(e)}function $N(t,e,n){var r=_n(e,t,l3),i=n.split(":")[0],a=qd((e.x-t.x)/2+t.x),o=qd((e.y-t.y)/2+t.y),c,l,d=h3(i,r),u=/h|r|l/.test(i),h=!1,p=!1;return d?(c=u?{x:a,y:t.y}:{x:t.x,y:o},l=u?"h:h":"v:v"):(h=u3(r,i),l=u?"h:v":"v:h",h?u?(p=o===t.y,c={x:t.x+id*(/l/.test(i)?-1:1),y:p?o+id:o}):(p=a===t.x,c={x:p?a+id:a,y:t.y+id*(/t/.test(i)?-1:1)}):c={x:a,y:o}),{waypoints:ov(t,c,l).concat(c),directions:l,turnNextDirections:p}}function p3(t,e,n){return $N(t,e,n)}function f3(t,e,n){var r=$N(e,t,Hb(n));return{waypoints:r.waypoints.slice().reverse(),directions:Hb(r.directions),turnNextDirections:r.turnNextDirections}}function m3(t,e){var n=t.directions.split(":")[1],r=e.directions.split(":")[0];t.turnNextDirections&&(n=n=="h"?"v":"h"),e.turnNextDirections&&(r=r=="h"?"v":"h");var i=n+":"+r,a=ov(t.waypoints[t.waypoints.length-1],e.waypoints[0],i);return{waypoints:a,directions:i}}function Hb(t){return t.split(":").reverse().join(":")}function g3(t,e,n){var r=qd((e.x-t.x)/2+t.x),i=qd((e.y-t.y)/2+t.y);if(n==="h:v")return[{x:e.x,y:t.y}];if(n==="v:h")return[{x:t.x,y:e.y}];if(n==="h:h")return[{x:r,y:t.y},{x:r,y:e.y}];if(n==="v:v")return[{x:t.x,y:i},{x:e.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function ov(t,e,n){if(n=n||"h:h",!N3(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(LN(n)){var r=p3(t,e,n),i=f3(t,e,n),a=m3(r,i);return[].concat(r.waypoints,a.waypoints,i.waypoints)}return g3(t,e,n)}function v3(t,e,n){var r=ov(t,e,n);return r.unshift(t),r.push(e),BN(r)}function x3(t,e,n,r,i){var a=i&&i.preferredLayouts||[],o=gC(a,"straight")[0]||"h:h",c=d3[o]||0,l=_n(t,e,c),d=E3(l,o);n=n||Te(t),r=r||Te(e);var u=d.split(":"),h=Gb(n,t,u[0],S3(l)),p=Gb(r,e,u[1],l);return v3(h,p,d)}function y3(t,e,n,r,i,a){tt(n)&&(i=n,a=r,n=Te(t),r=Te(e)),a=B({preferredLayouts:[]},a),i=i||[];var o=a.preferredLayouts,c=o.indexOf("straight")!==-1,l;return l=c&&w3(t,e,n,r,a),l||(l=a.connectionEnd&&j3(e,t,r,i),l)||(l=a.connectionStart&&_3(t,e,n,i),l)?l:!a.connectionStart&&!a.connectionEnd&&i&&i.length?i:x3(t,e,n,r,a)}function b3(t,e,n){return t>=e&&t<=n}function Vb(t,e,n){var r={x:"width",y:"height"};return b3(e[t],n[t],n[t]+n[r[t]])}function w3(t,e,n,r,i){var a={},o,c;return c=_n(t,e),/^(top|bottom|left|right)$/.test(c)?(/top|bottom/.test(c)&&(o="x"),/left|right/.test(c)&&(o="y"),i.preserveDocking==="target"?Vb(o,r,t)?(a[o]=r[o],[{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y,original:{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y}},{x:r.x,y:r.y}]):null:Vb(o,n,e)?(a[o]=n[o],[{x:n.x,y:n.y},{x:a.x!==void 0?a.x:r.x,y:a.y!==void 0?a.y:r.y,original:{x:a.x!==void 0?a.x:r.x,y:a.y!==void 0?a.y:r.y}}]):null):null}function _3(t,e,n,r){return cv(t,e,n,r)}function j3(t,e,n,r){var i=r.slice().reverse();return i=cv(t,e,n,i),i?i.reverse():null}function cv(t,e,n,r){function i(u){return u.length<3?!0:u.length>4?!1:!!Dt(u,function(h,p){var f=u[p-1];return f&&Nw(h,f)<3})}function a(u,h,p){var f=fs(h,u);switch(f){case"v":return{x:p.x,y:u.y};case"h":return{x:u.x,y:p.y}}return{x:u.x,y:u.y}}function o(u,h,p){var f;for(f=u.length-2;f!==0;f--)if(qv(u[f],h,Ub)||qv(u[f],p,Ub))return u.slice(f);return u}if(i(r))return null;var c=r[0],l=r.slice(),d;return l[0]=n,l[1]=a(l[1],c,n),d=o(l,t,e),d!==l&&(l=cv(t,e,n,d)),l&&fs(l)?null:l}function E3(t,e){if(LN(e))return e;switch(t){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return e}}function N3(t){return t&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(t)}function LN(t){return t&&/t|r|b|l/.test(t)}function S3(t){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[t]}function Gb(t,e,n,r){if(n==="h"&&(n=/left/.test(r)?"l":"r"),n==="v"&&(n=/top/.test(r)?"t":"b"),n==="t")return{original:t,x:t.x,y:e.y};if(n==="r")return{original:t,x:e.x+e.width,y:t.y};if(n==="b")return{original:t,x:t.x,y:e.y+e.height};if(n==="l")return{original:t,x:e.x,y:t.y};throw new Error("unexpected dockingDirection: <"+n+">")}function BN(t){return t.reduce(function(e,n,r){var i=e[e.length-1],a=t[r+1];return Sw(i,a,n,0)||e.push(n),e},[])}var k3=-10,C3=40,P3={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},T3={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},lv={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},ic={top:"t",right:"r",bottom:"b",left:"l"};function dh(t){this._elementRegistry=t}ve(dh,ON);dh.prototype.layoutConnection=function(t,e){e||(e={});var n=e.source||t.source,r=e.target||t.target,i=e.waypoints||t.waypoints,a=e.connectionStart,o=e.connectionEnd,c=this._elementRegistry,l,d;if(a||(a=Wb(i&&i[0],n)),o||(o=Wb(i&&i[i.length-1],r)),(_(t,"bpmn:Association")||_(t,"bpmn:DataAssociation"))&&i&&!qb(n,r))return[].concat([a],i.slice(1,-1),[o]);var u=dE(n,c)?P3:T3;return _(t,"bpmn:MessageFlow")?l=A3(n,r,u):(_(t,"bpmn:SequenceFlow")||qb(n,r))&&(n===r?l={preferredLayouts:L3(n,t,u)}:_(n,"bpmn:BoundaryEvent")?l={preferredLayouts:B3(n,r,o,u)}:Oc(n)||Oc(r)?l={preferredLayouts:u.subProcess,preserveDocking:M3(n)}:_(n,"bpmn:Gateway")?l={preferredLayouts:u.fromGateway}:_(r,"bpmn:Gateway")?l={preferredLayouts:u.toGateway}:l={preferredLayouts:u.default}),l&&(l=B(l,e),d=BN(y3(n,r,a,o,i,l))),d||[a,o]};function R3(t){var e=t.host;return _n(Te(t),e,k3)}function A3(t,e,n){return{preferredLayouts:n.messageFlow,preserveDocking:I3(t,e)}}function I3(t,e){return _(e,"bpmn:Participant")?"source":_(t,"bpmn:Participant")?"target":Oc(e)?"source":Oc(t)||_(e,"bpmn:Event")?"target":_(t,"bpmn:Event")?"source":null}function M3(t){return Oc(t)?"target":"source"}function Wb(t,e){return t?t.original||t:Te(e)}function qb(t,e){return _(e,"bpmn:Activity")&&_(t,"bpmn:BoundaryEvent")&&e.businessObject.isForCompensation}function Oc(t){return _(t,"bpmn:SubProcess")&&lt(t)}function Ui(t,e){return t===e}function D3(t,e){return e.indexOf(t)!==-1}function fo(t){var e=/right|left/.exec(t);return e&&e[0]}function mo(t){var e=/top|bottom/.exec(t);return e&&e[0]}function Kb(t,e){return lv[t]===e}function O3(t,e){var n=fo(t),r=lv[n];return e.indexOf(r)!==-1}function $3(t,e){var n=mo(t),r=lv[n];return e.indexOf(r)!==-1}function FN(t){return t==="right"||t==="left"}function L3(t,e,n){var r=e.waypoints,i=r&&r.length&&_n(r[0],t);return i==="top"?n.loop.fromTop:i==="right"?n.loop.fromRight:i==="left"?n.loop.fromLeft:n.loop.fromBottom}function B3(t,e,n,r){var i=Te(t),a=Te(e),o=R3(t),c,l,d=Ui(t.host,e),u=D3(o,["top","right","bottom","left"]),h=_n(a,i,{x:t.width/2+e.width/2,y:t.height/2+e.height/2});return d?F3(o,u,t,e,n,r):(c=z3(o,h,u,r.isHorizontal),l=U3(o,h,u,r.isHorizontal),[c+":"+l])}function F3(t,e,n,r,i,a){var o=e?t:a.isHorizontal?mo(t):fo(t),c=ic[o],l;return e?FN(t)?l=Yb("y",n,r,i)?"h":a.boundaryLoop.alternateHorizontalSide:l=Yb("x",n,r,i)?"v":a.boundaryLoop.alternateVerticalSide:l=a.boundaryLoop.default,[c+":"+l]}function Yb(t,e,n,r){var i=C3;return!(jp(t,r,n,i)||jp(t,r,{x:n.x+n.width,y:n.y+n.height},i)||jp(t,r,Te(e),i))}function jp(t,e,n,r){return Math.abs(e[t]-n[t])<r}function z3(t,e,n,r){if(n)return ic[t];var i=mo(t),a=fo(t),o=mo(e),c=fo(e);if(r){if(Ui(i,o)||Kb(a,c))return ic[i]}else if(Ui(a,c)||Kb(i,o))return ic[a];return ic[r?a:i]}function U3(t,e,n,r){return n?FN(t)?O3(t,e)||Ui(t,e)?"h":"v":$3(t,e)||Ui(t,e)?"v":"h":r?Ui(mo(t),mo(e))?"h":"v":Ui(fo(t),fo(e))?"v":"h"}dh.$inject=["elementRegistry"];function Zb(t){return B({original:t.point.original||t.point},t.actual)}function bi(t,e){this._elementRegistry=t,this._graphicsFactory=e}bi.$inject=["elementRegistry","graphicsFactory"];bi.prototype.getCroppedWaypoints=function(t,e,n){e=e||t.source,n=n||t.target;var r=this.getDockingPoint(t,e,!0),i=this.getDockingPoint(t,n),a=t.waypoints.slice(r.idx+1,i.idx);return a.unshift(Zb(r)),a.push(Zb(i)),a};bi.prototype.getDockingPoint=function(t,e,n){var r=t.waypoints,i,a,o;return i=n?0:r.length-1,a=r[i],o=this._getIntersection(e,t,n),{point:a,actual:o||a,idx:i}};bi.prototype._getIntersection=function(t,e,n){var r=this._getShapePath(t),i=this._getConnectionPath(e);return Dp(r,i,n)};bi.prototype._getConnectionPath=function(t){return this._graphicsFactory.getConnectionPath(t)};bi.prototype._getShapePath=function(t){return this._graphicsFactory.getShapePath(t)};bi.prototype._getGfx=function(t){return this._elementRegistry.getGraphics(t)};const zN={__init__:["modeling","bpmnUpdater"],__depends__:[$$,tL,rL,sL,wN,AL,ML,FL,Jr,Aw,EN],bpmnFactory:["type",xr],bpmnUpdater:["type",Gn],elementFactory:["type",vi],modeling:["type",jn],layouter:["type",dh],connectionDocking:["type",bi]},Xb=Math.round;function uh(t,e,n,r,i,a){this._complexPreview=t,this._connectionDocking=e,this._elementFactory=n,this._eventBus=r,this._layouter=i,this._rules=a}uh.prototype.create=function(t,e,n){const r=this._complexPreview,i=this._connectionDocking,a=this._elementFactory,o=this._eventBus,c=this._layouter,l=this._rules,d=a.createShape(B({type:e},n)),u=o.fire("autoPlace",{source:t,shape:d});if(!u)return;B(d,{x:u.x-Xb(d.width/2),y:u.y-Xb(d.height/2)});const h=l.allowed("connection.create",{source:t,target:d,hints:{targetParent:t.parent}});let p=null;h&&(p=a.createConnection(h),p.waypoints=c.layoutConnection(p,{source:t,target:d}),p.waypoints=i.getCroppedWaypoints(p,t,d)),r.create({created:[d,p].filter(f=>!Mp(f))})};uh.prototype.cleanUp=function(){this._complexPreview.cleanUp()};uh.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const H3={__depends__:[tg,hO,zN],__init__:["appendPreview"],appendPreview:["type",uh]};var Jb=Math.min,Qb=Math.max;function Ep(t){t.preventDefault()}function xc(t){t.stopPropagation()}function V3(t){return t.nodeType===Node.TEXT_NODE}function G3(t){return[].slice.call(t)}function $r(t){this.container=t.container,this.parent=vn('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Yt("[contenteditable]",this.parent),this.keyHandler=t.keyHandler||function(){},this.resizeHandler=t.resizeHandler||function(){},this.autoResize=Xi(this.autoResize,this),this.handlePaste=Xi(this.handlePaste,this)}$r.prototype.create=function(t,e,n,r){var i=this,a=this.parent,o=this.content,c=this.container;r=this.options=r||{},e=this.style=e||{};var l=Xr(e,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);B(a.style,{width:t.width+"px",height:t.height+"px",maxWidth:t.maxWidth+"px",maxHeight:t.maxHeight+"px",minWidth:t.minWidth+"px",minHeight:t.minHeight+"px",left:t.x+"px",top:t.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},l);var d=Xr(e,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return B(o.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},d),r.centerVertically&&B(o.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},d),o.innerText=n,Ae.bind(o,"keydown",this.keyHandler),Ae.bind(o,"mousedown",xc),Ae.bind(o,"paste",i.handlePaste),r.autoResize&&Ae.bind(o,"input",this.autoResize),r.resizable&&this.resizable(e),c.appendChild(a),this.setSelection(o.lastChild,o.lastChild&&o.lastChild.length),a};$r.prototype.handlePaste=function(t){var e=this.options,n=this.style;t.preventDefault();var r;if(t.clipboardData?r=t.clipboardData.getData("text/plain"):r=window.clipboardData.getData("Text"),this.insertText(r),e.autoResize){var i=this.autoResize(n);i&&this.resizeHandler(i)}};$r.prototype.insertText=function(t){t=W3(t);var e=document.execCommand("insertText",!1,t);e||this._insertTextIE(t)};$r.prototype._insertTextIE=function(t){var e=this.getSelection(),n=e.startContainer,r=e.endContainer,i=e.startOffset,a=e.endOffset,o=e.commonAncestorContainer,c=G3(o.childNodes),l,d;if(V3(o)){var u=n.textContent;n.textContent=u.substring(0,i)+t+u.substring(a),l=n,d=i+t.length}else if(n===this.content&&r===this.content){var h=document.createTextNode(t);this.content.insertBefore(h,c[i]),l=h,d=h.textContent.length}else{var p=c.indexOf(n),f=c.indexOf(r);c.forEach(function(m,x){x===p?m.textContent=n.textContent.substring(0,i)+t+r.textContent.substring(a):x>p&&x<=f&&Za(m)}),l=n,d=i+t.length}l&&d!==void 0&&setTimeout(function(){self.setSelection(l,d)})};$r.prototype.autoResize=function(){var t=this.parent,e=this.content,n=parseInt(this.style.fontSize)||12;if(e.scrollHeight>t.offsetHeight||e.scrollHeight<t.offsetHeight-n){var r=t.getBoundingClientRect(),i=e.scrollHeight;t.style.height=i+"px",this.resizeHandler({width:r.width,height:r.height,dx:0,dy:i-r.height})}};$r.prototype.resizable=function(){var t=this,e=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,i=parseInt(this.style.minHeight)||0,a=parseInt(this.style.maxWidth)||1/0,o=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=vn('<div class="djs-direct-editing-resize-handle"></div>');var c,l,d,u,h=function(m){Ep(m),xc(m),c=m.clientX,l=m.clientY;var x=e.getBoundingClientRect();d=x.width,u=x.height,Ae.bind(document,"mousemove",p),Ae.bind(document,"mouseup",f)},p=function(m){Ep(m),xc(m);var x=Jb(Qb(d+m.clientX-c,r),a),g=Jb(Qb(u+m.clientY-l,i),o);e.style.width=x+"px",e.style.height=g+"px",t.resizeHandler({width:d,height:u,dx:m.clientX-c,dy:m.clientY-l})},f=function(m){Ep(m),xc(m),Ae.unbind(document,"mousemove",p,!1),Ae.unbind(document,"mouseup",f,!1)};Ae.bind(n,"mousedown",h)}B(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),e.appendChild(n)};$r.prototype.destroy=function(){var t=this.parent,e=this.content,n=this.resizeHandle;e.innerText="",t.removeAttribute("style"),e.removeAttribute("style"),Ae.unbind(e,"keydown",this.keyHandler),Ae.unbind(e,"mousedown",xc),Ae.unbind(e,"input",this.autoResize),Ae.unbind(e,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Za(n)),Za(t)};$r.prototype.getValue=function(){return this.content.innerText.trim()};$r.prototype.getSelection=function(){var t=window.getSelection(),e=t.getRangeAt(0);return e};$r.prototype.setSelection=function(t,e){var n=document.createRange();t===null?n.selectNodeContents(this.content):(n.setStart(t,e),n.setEnd(t,e));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)};function W3(t){return t.replace(/\r\n|\r|\n/g,`
`)}function yr(t,e){this._eventBus=t,this._canvas=e,this._providers=[],this._textbox=new $r({container:e.getContainer(),keyHandler:Xi(this._handleKey,this),resizeHandler:Xi(this._handleResize,this)})}yr.$inject=["eventBus","canvas"];yr.prototype.registerProvider=function(t){this._providers.push(t)};yr.prototype.isActive=function(t){return!!(this._active&&(!t||this._active.element===t))};yr.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};yr.prototype._fire=function(t,e){this._eventBus.fire("directEditing."+t,e||{active:this._active})};yr.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};yr.prototype.complete=function(){var t=this._active;if(t){var e,n=t.context.bounds,r=this.$textbox.getBoundingClientRect(),i=this.getValue(),a=t.context.text;(i!==a||r.height!==n.height||r.width!==n.width)&&(e=this._textbox.container.getBoundingClientRect(),t.provider.update(t.element,i,t.context.text,{x:r.left-e.left,y:r.top-e.top,width:r.width,height:r.height})),this._fire("complete"),this.close()}};yr.prototype.getValue=function(){return this._textbox.getValue()};yr.prototype._handleKey=function(t){t.stopPropagation();var e=t.keyCode||t.charCode;if(e===27)return t.preventDefault(),this.cancel();if(e===13&&!t.shiftKey)return t.preventDefault(),this.complete()};yr.prototype._handleResize=function(t){this._fire("resize",t)};yr.prototype.activate=function(t){this.isActive()&&this.cancel();var e,n=Dt(this._providers,function(r){return(e=r.activate(t))?r:null});return e&&(this.$textbox=this._textbox.create(e.bounds,e.style,e.text,e.options),this._active={element:t,context:e,provider:n},e.options&&e.options.resizable&&(this.resizable=!0),this._fire("activate")),!!e};const UN={__depends__:[Qf],__init__:["directEditing"],directEditing:["type",yr]};function q3(t){return function(e){var n=e.target,r=de(t),i=r.eventDefinitions&&r.eventDefinitions[0],a=r.$type===n.type,o=(i&&i.$type)===n.eventDefinitionType,c=!!n.triggeredByEvent==!!r.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===lt(t);return!a||!o||!c||!l}}var K3=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],Y3=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],Z3=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],X3=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],J3=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],Q3=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],eB=[{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}}],HN=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],tB=HN,e0=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}],nB=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],rB=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],sB=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],iB=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],aB=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],oB=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(t){var e="Empty pool/participant";return t.children&&t.children.length&&(e+=" (removes content)"),e},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],cB={"bpmn:MessageEventDefinition":[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}}],"bpmn:TimerEventDefinition":[{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}}],"bpmn:ConditionalEventDefinition":[{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}}],"bpmn:SignalEventDefinition":[{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],"bpmn:ErrorEventDefinition":[{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}}],"bpmn:EscalationEventDefinition":[{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}}],"bpmn:CompensateEventDefinition":[{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}}]};const t0={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function br(t,e,n,r,i,a,o,c){this._bpmnFactory=t,this._popupMenu=e,this._modeling=n,this._moddle=r,this._bpmnReplace=i,this._rules=a,this._translate=o,this._moddleCopy=c,this._register()}br.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];br.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};br.prototype.getPopupMenuEntries=function(t){var c;var e=t.businessObject,n=this._rules,r=[],i,a=[];if(tt(t)||!n.allowed("shape.replace",{element:t}))return{};var o=q3(t);return _(e,"bpmn:DataObjectReference")?this._createEntries(t,nB):_(e,"bpmn:DataStoreReference")&&!_(t.parent,"bpmn:Collaboration")?this._createEntries(t,rB):(_(e,"bpmn:Event")&&!_(e,"bpmn:BoundaryEvent")&&(i=(c=e.get("eventDefinitions")[0])==null?void 0:c.$type,r=cB[i]||[],!Pn(e.$parent)&&_(e.$parent,"bpmn:SubProcess")&&(r=rt(r,function(l){return l.target.type!=="bpmn:StartEvent"}))),_(e,"bpmn:StartEvent")&&!_(e.$parent,"bpmn:SubProcess")?(a=rt(K3.concat(r),o),this._createEntries(t,a)):_(e,"bpmn:Participant")?(a=rt(oB,function(l){return lt(t)!==l.target.isExpanded}),this._createEntries(t,a)):_(e,"bpmn:StartEvent")&&Pn(e.$parent)?(a=rt(iB.concat(r),function(l){var d=l.target,u=d.isInterrupting!==!1,h=e.isInterrupting===u;return o(l)||!o(l)&&!h}),this._createEntries(t,a)):_(e,"bpmn:StartEvent")&&!Pn(e.$parent)&&_(e.$parent,"bpmn:SubProcess")?(a=rt(Y3.concat(r),o),this._createEntries(t,a)):_(e,"bpmn:EndEvent")?(a=rt(X3.concat(r),function(l){var d=l.target;return d.eventDefinitionType=="bpmn:CancelEventDefinition"&&!_(e.$parent,"bpmn:Transaction")?!1:o(l)}),this._createEntries(t,a)):_(e,"bpmn:BoundaryEvent")?(a=rt(sB,function(l){var d=l.target;if(d.eventDefinitionType=="bpmn:CancelEventDefinition"&&!_(e.attachedToRef,"bpmn:Transaction"))return!1;var u=d.cancelActivity!==!1,h=e.cancelActivity==u;return o(l)||!o(l)&&!h}),this._createEntries(t,a)):_(e,"bpmn:IntermediateCatchEvent")||_(e,"bpmn:IntermediateThrowEvent")?(a=rt(Z3.concat(r),o),this._createEntries(t,a)):_(e,"bpmn:Gateway")?(a=rt(J3,o),this._createEntries(t,a)):_(e,"bpmn:Transaction")?(a=rt(HN,o),this._createEntries(t,a)):Pn(e)&&lt(t)?(a=rt(tB,o),this._createEntries(t,a)):_(e,"bpmn:AdHocSubProcess")&&lt(t)?(a=rt(eB,o),this._createEntries(t,a)):_(e,"bpmn:SubProcess")&&lt(t)?(a=rt(Q3,o),this._createEntries(t,a)):_(e,"bpmn:SubProcess")&&!lt(t)?(a=rt(e0,function(l){var d=l.target.type===t.type,u=l.target.isExpanded===!0;return d===u}),this._createEntries(t,a)):_(e,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(t,aB):_(e,"bpmn:FlowNode")?(a=rt(e0,o),this._createEntries(t,a)):{})};br.prototype.getPopupMenuHeaderEntries=function(t){var e={};return _(t,"bpmn:Activity")&&!Pn(t)&&(e={...e,...this._getLoopCharacteristicsHeaderEntries(t)}),_(t,"bpmn:DataObjectReference")&&(e={...e,...this._getCollectionHeaderEntries(t)}),_(t,"bpmn:Participant")&&(e={...e,...this._getParticipantMultiplicityHeaderEntries(t)}),VE(t)&&(e={...e,...this._getNonInterruptingHeaderEntries(t)}),e};br.prototype._createEntries=function(t,e){var n={},r=this;return O(e,function(i){n[i.actionName]=r._createEntry(i,t)}),n};br.prototype._createSequenceFlowEntries=function(t,e){var n=de(t),r={},i=this._modeling,a=this._moddle,o=this;return O(e,function(c){switch(c.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(_(n.sourceRef,"bpmn:ExclusiveGateway")||_(n.sourceRef,"bpmn:InclusiveGateway")||_(n.sourceRef,"bpmn:ComplexGateway")||_(n.sourceRef,"bpmn:Activity"))&&(r={...r,[c.actionName]:o._createEntry(c,t,function(){i.updateProperties(t.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&_(n.sourceRef,"bpmn:Activity")&&(r={...r,[c.actionName]:o._createEntry(c,t,function(){var l=a.create("bpmn:FormalExpression",{body:""});i.updateProperties(t,{conditionExpression:l})})});break;default:_(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(r={...r,[c.actionName]:o._createEntry(c,t,function(){i.updateProperties(t,{conditionExpression:void 0})})}),(_(n.sourceRef,"bpmn:ExclusiveGateway")||_(n.sourceRef,"bpmn:InclusiveGateway")||_(n.sourceRef,"bpmn:ComplexGateway")||_(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(r={...r,[c.actionName]:o._createEntry(c,t,function(){i.updateProperties(t.source,{default:void 0})})})}}),r};br.prototype._createEntry=function(t,e,n){var r=this._translate,i=this._bpmnReplace.replaceElement,a=function(){return i(e,t.target)},o=t.label;return o&&typeof o=="function"&&(o=o(e)),n=n||a,{label:r(o),className:t.className,action:n}};br.prototype._getLoopCharacteristicsHeaderEntries=function(t){var e=this,n=this._translate;function r(d,u){if(u.active){e._modeling.updateProperties(t,{loopCharacteristics:void 0});return}var h=t.businessObject.get("loopCharacteristics");h&&_(h,u.options.loopCharacteristics)?e._modeling.updateModdleProperties(t,h,{isSequential:u.options.isSequential}):(h=e._moddle.create(u.options.loopCharacteristics,{isSequential:u.options.isSequential}),e._modeling.updateProperties(t,{loopCharacteristics:h}))}var i=de(t),a=i.loopCharacteristics,o,c,l;return a&&(o=a.isSequential,c=a.isSequential===void 0,l=a.isSequential!==void 0&&!a.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:l,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:o,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:c,action:r,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};br.prototype._getCollectionHeaderEntries=function(t){var e=this,n=this._translate,r=t.businessObject.dataObjectRef;if(!r)return{};function i(o,c){e._modeling.updateModdleProperties(t,r,{isCollection:!c.active})}var a=r.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:a,action:i}}};br.prototype._getParticipantMultiplicityHeaderEntries=function(t){var e=this,n=this._bpmnFactory,r=this._translate;function i(o,c){var l=c.active,d;l||(d=n.create("bpmn:ParticipantMultiplicity")),e._modeling.updateProperties(t,{participantMultiplicity:d})}var a=t.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:r("Participant multiplicity"),active:!!a,action:i}}};br.prototype._getNonInterruptingHeaderEntries=function(t){const e=this._translate,n=de(t),r=this,i=GE(t),a=_(t,"bpmn:BoundaryEvent")?t0["intermediate-event-non-interrupting"]:t0["start-event-non-interrupting"],o=!n[i];return{"toggle-non-interrupting":{imageHtml:a,title:e("Toggle non-interrupting"),active:o,action:function(){r._modeling.updateProperties(t,{[i]:!!o})}}}};const lB={__depends__:[Jm,wN,tg],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",br]};function yl(t,e,n,r,i,a,o,c,l,d,u,h,p){t=t||{},r.registerProvider(this),this._contextPad=r,this._modeling=i,this._elementFactory=a,this._connect=o,this._create=c,this._popupMenu=l,this._canvas=d,this._rules=u,this._translate=h,this._eventBus=n,this._appendPreview=p,t.autoPlace!==!1&&(this._autoPlace=e.get("autoPlace",!1)),n.on("create.end",250,function(f){var m=f.context,x=m.shape;if(!(!wc(f)||!r.isOpen(x))){var g=r.getEntries(x);g.replace&&g.replace.action.click(f,x)}}),n.on("contextPad.close",function(){p.cleanUp()})}yl.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];yl.prototype.getMultiElementContextPadEntries=function(t){var e=this._modeling,n={};return this._isDeleteAllowed(t)&&B(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(r,i){e.removeElements(i.slice())}}}}),n};yl.prototype._isDeleteAllowed=function(t){var e=this._rules.allowed("elements.delete",{elements:t});return tt(e)?nu(t,n=>e.includes(n)):e};yl.prototype.getContextPadEntries=function(t){var e=this._contextPad,n=this._modeling,r=this._elementFactory,i=this._connect,a=this._create,o=this._popupMenu,c=this._autoPlace,l=this._translate,d=this._appendPreview,u={};if(t.type==="label")return this._isDeleteAllowed([t])&&B(u,m()),u;var h=t.businessObject;function p(b,j){i.start(b,j)}function f(b,j){n.removeElements([j])}function m(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:l("Delete"),action:{click:f}}}}function x(b){var j=5,C=e.getPad(b).html,N=C.getBoundingClientRect(),k={x:N.left,y:N.bottom+j};return k}function g(b,j,C,N){function k(L,R){var M=r.createShape(B({type:b},N));a.start(L,M,{source:R})}var P=c?function(L,R){var M=r.createShape(B({type:b},N));c.append(R,M)}:k,T=c?function(L,R){return d.create(R,b,N),()=>{d.cleanUp()}}:null;return{group:"model",className:j,title:C,action:{dragstart:k,click:P,hover:T}}}function w(b){return function(j,C){n.splitLane(C,b),e.open(C,!0)}}if(ze(h,["bpmn:Lane","bpmn:Participant"])&&lt(t)){var y=mi(t);B(u,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:l("Add lane above"),action:{click:function(b,j){n.addLane(j,"top")}}}}),y.length<2&&((xn(t)?t.height>=120:t.width>=120)&&B(u,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:l("Divide into two lanes"),action:{click:w(2)}}}),(xn(t)?t.height>=180:t.width>=180)&&B(u,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:l("Divide into three lanes"),action:{click:w(3)}}})),B(u,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:l("Add lane below"),action:{click:function(b,j){n.addLane(j,"bottom")}}}})}return _(h,"bpmn:FlowNode")&&(_(h,"bpmn:EventBasedGateway")?B(u,{"append.receive-task":g("bpmn:ReceiveTask","bpmn-icon-receive-task",l("Append receive task")),"append.message-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",l("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",l("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",l("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",l("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):n0(h,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?B(u,{"append.compensation-activity":g("bpmn:Task","bpmn-icon-task",l("Append compensation activity"),{isForCompensation:!0})}):!_(h,"bpmn:EndEvent")&&!h.isForCompensation&&!n0(h,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Pn(h)&&B(u,{"append.end-event":g("bpmn:EndEvent","bpmn-icon-end-event-none",l("Append end event")),"append.gateway":g("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",l("Append gateway")),"append.append-task":g("bpmn:Task","bpmn-icon-task",l("Append task")),"append.intermediate-event":g("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",l("Append intermediate/boundary event"))})),o.isEmpty(t,"bpmn-replace")||B(u,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:l("Change element"),action:{click:function(b,j){var C=B(x(j),{cursor:{x:b.x,y:b.y}});o.open(j,"bpmn-replace",C,{title:l("Change element"),width:300,search:!0})}}}}),_(h,"bpmn:SequenceFlow")&&B(u,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),_(h,"bpmn:MessageFlow")&&B(u,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),ze(h,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&B(u,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect to other element"),action:{click:p,dragstart:p}}}),_(h,"bpmn:TextAnnotation")&&B(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using association"),action:{click:p,dragstart:p}}}),ze(h,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&B(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using data input association"),action:{click:p,dragstart:p}}}),_(h,"bpmn:Group")&&B(u,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),this._isDeleteAllowed([t])&&B(u,m()),u};function n0(t,e,n){var r=t.$instanceOf(e),i=!1,a=t.eventDefinitions||[];return O(a,function(o){o.$type===n&&(i=!0)}),r&&i}const dB={__depends__:[H3,UN,B1,Jr,ag,Xu,lB],__init__:["contextPadProvider"],contextPadProvider:["type",yl]};var uB={horizontal:["x","width"],vertical:["y","height"]},r0=5;function Ms(t,e){this._modeling=t,this._filters=[],this.registerFilter(function(n){var r=e.allowed("elements.distribute",{elements:n});return tt(r)?r:r?n:[]})}Ms.$inject=["modeling","rules"];Ms.prototype.registerFilter=function(t){if(typeof t!="function")throw new Error("the filter has to be a function");this._filters.push(t)};Ms.prototype.trigger=function(t,e){var n=this._modeling,r,i;if(!(t.length<3)&&(this._setOrientation(e),i=this._filterElements(t),r=this._createGroups(i),!(r.length<=2)))return n.distributeElements(r,this._axis,this._dimension),r};Ms.prototype._filterElements=function(t){var e=this._filters,n=this._axis,r=this._dimension,i=[].concat(t);return e.length?(O(e,function(a){i=a(i,n,r)}),i):t};Ms.prototype._createGroups=function(t){var e=[],n=this,r=this._axis,i=this._dimension;if(!r)throw new Error('must have a defined "axis" and "dimension"');var a=js(t,r);return O(a,function(o,c){var l=n._findRange(o,r,i),d,u=e[e.length-1];u&&n._hasIntersection(u.range,l)?e[e.length-1].elements.push(o):(d={range:l,elements:[o]},e.push(d))}),e};Ms.prototype._setOrientation=function(t){var e=uB[t];this._axis=e[0],this._dimension=e[1]};Ms.prototype._hasIntersection=function(t,e){return Math.max(t.min,t.max)>=Math.min(e.min,e.max)&&Math.min(t.min,t.max)<=Math.max(e.min,e.max)};Ms.prototype._findRange=function(t){var e=t[this._axis],n=t[this._dimension];return{min:e+r0,max:e+n-r0}};const hB={__init__:["distributeElements"],distributeElements:["type",Ms]};function hh(t){gr.call(this,t)}hh.$inject=["eventBus"];ve(hh,gr);hh.prototype.init=function(){this.addRule("elements.distribute",function(t){var e=t.elements;return e=rt(e,function(n){var r=ze(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||r)}),e=ru(e),e.length<3?!1:e})};var s0={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},pB=900;function bl(t,e,n,r){this._distributeElements=e,this._translate=n,this._popupMenu=t,this._rules=r,t.registerProvider("align-elements",pB,this)}bl.$inject=["popupMenu","distributeElements","translate","rules"];bl.prototype.getPopupMenuEntries=function(t){var e={};return this._isAllowed(t)&&B(e,this._getEntries(t)),e};bl.prototype._isAllowed=function(t){return this._rules.allowed("elements.distribute",{elements:t})};bl.prototype._getEntries=function(t){var e=this._distributeElements,n=this._translate,r=this._popupMenu,i={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:s0.horizontal,action:function(a,o){e.trigger(t,"horizontal"),r.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:s0.vertical,action:function(a,o){e.trigger(t,"vertical"),r.close()}}};return i};const fB={__depends__:[Jm,hB],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",hh],distributeElementsMenuProvider:["type",bl]};var VN="is not a registered action",mB="is already registered";function wr(t,e){this._actions={};var n=this;t.on("diagram.init",function(){n._registerDefaultActions(e),t.fire("editorActions.init",{editorActions:n})})}wr.$inject=["eventBus","injector"];wr.prototype._registerDefaultActions=function(t){var e=t.get("commandStack",!1),n=t.get("modeling",!1),r=t.get("selection",!1),i=t.get("zoomScroll",!1),a=t.get("copyPaste",!1),o=t.get("canvas",!1),c=t.get("rules",!1),l=t.get("keyboardMove",!1),d=t.get("keyboardMoveSelection",!1);e&&(this.register("undo",function(){e.undo()}),this.register("redo",function(){e.redo()})),a&&r&&this.register("copy",function(){var u=r.get();if(u.length)return a.copy(u)}),a&&this.register("paste",function(){a.paste()}),i&&this.register("stepZoom",function(u){i.stepZoom(u.value)}),o&&this.register("zoom",function(u){o.zoom(u.value)}),n&&r&&c&&this.register("removeSelection",function(){var u=r.get();if(u.length){var h=c.allowed("elements.delete",{elements:u}),p;h!==!1&&(tt(h)?p=h:p=u,p.length&&n.removeElements(p.slice()))}}),l&&this.register("moveCanvas",function(u){l.moveCanvas(u)}),d&&this.register("moveSelection",function(u){d.moveSelection(u.direction,u.accelerated)})};wr.prototype.trigger=function(t,e){if(!this._actions[t])throw dv(t,VN);return this._actions[t](e)};wr.prototype.register=function(t,e){var n=this;if(typeof t=="string")return this._registerAction(t,e);O(t,function(r,i){n._registerAction(i,r)})};wr.prototype._registerAction=function(t,e){if(this.isRegistered(t))throw dv(t,mB);this._actions[t]=e};wr.prototype.unregister=function(t){if(!this.isRegistered(t))throw dv(t,VN);this._actions[t]=void 0};wr.prototype.getActions=function(){return Object.keys(this._actions)};wr.prototype.isRegistered=function(t){return!!this._actions[t]};function dv(t,e){return new Error(t+" "+e)}const gB={__init__:["editorActions"],editorActions:["type",wr]};function ph(t){t.invoke(wr,this)}ve(ph,wr);ph.$inject=["injector"];ph.prototype._registerDefaultActions=function(t){wr.prototype._registerDefaultActions.call(this,t);var e=t.get("canvas",!1),n=t.get("elementRegistry",!1),r=t.get("selection",!1),i=t.get("spaceTool",!1),a=t.get("lassoTool",!1),o=t.get("handTool",!1),c=t.get("globalConnect",!1),l=t.get("distributeElements",!1),d=t.get("alignElements",!1),u=t.get("directEditing",!1),h=t.get("searchPad",!1),p=t.get("modeling",!1),f=t.get("contextPad",!1);e&&n&&r&&this._registerAction("selectElements",function(){var m=e.getRootElement(),x=n.filter(function(g){return g!==m});return r.select(x),x}),i&&this._registerAction("spaceTool",function(){i.toggle()}),a&&this._registerAction("lassoTool",function(){a.toggle()}),o&&this._registerAction("handTool",function(){o.toggle()}),c&&this._registerAction("globalConnectTool",function(){c.toggle()}),r&&l&&this._registerAction("distributeElements",function(m){var x=r.get(),g=m.type;x.length&&l.trigger(x,g)}),r&&d&&this._registerAction("alignElements",function(m){var x=r.get(),g=[],w=m.type;x.length&&(g=rt(x,function(y){return!_(y,"bpmn:Lane")}),d.trigger(g,w))}),r&&p&&this._registerAction("setColor",function(m){var x=r.get();x.length&&p.setColor(x,m)}),r&&u&&this._registerAction("directEditing",function(){var m=r.get();m.length&&u.activate(m[0])}),h&&this._registerAction("find",function(){h.toggle()}),e&&p&&this._registerAction("moveToOrigin",function(){var m=e.getRootElement(),x,g;_(m,"bpmn:Collaboration")?g=n.filter(function(w){return _(w.parent,"bpmn:Collaboration")}):g=n.filter(function(w){return w!==m&&!_(w.parent,"bpmn:SubProcess")}),x=Mn(g),p.moveElements(g,{x:-x.x,y:-x.y},m)}),r&&f&&this._registerAction("replaceElement",function(m){f.triggerEntry("replace","click",m)})};const vB={__depends__:[gB],editorActions:["type",ph]};function GN(t){t.on(["create.init","shape.move.init"],function(e){var n=e.context,r=e.shape;ze(r,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}GN.$inject=["eventBus"];var yd=10;function Np(t,e,n){return n||(n="round"),Math[n](t/e)*e}var xB=1200,yB=800;function wi(t,e,n){var r=!n||n.active!==!1;this._eventBus=e;var i=this;e.on("diagram.init",yB,function(){i.setActive(r)}),e.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],xB,function(a){var o=a.originalEvent;if(!(!i.active||o&&dr(o))){var c=a.context,l=c.gridSnappingContext;l||(l=c.gridSnappingContext={}),["x","y"].forEach(function(d){var u={},h=wB(a,d,t);h&&(u.offset=h);var p=bB(a,d);p&&B(u,p),ho(a,d)||i.snapEvent(a,d,u)})}})}wi.prototype.snapEvent=function(t,e,n){var r=this.snapValue(t[e],n);Kt(t,e,r)};wi.prototype.getGridSpacing=function(){return yd};wi.prototype.snapValue=function(t,e){var n=0;e&&e.offset&&(n=e.offset),t+=n,t=Np(t,yd);var r,i;return e&&e.min&&(r=e.min,et(r)&&(r=Np(r+n,yd,"ceil"),t=Math.max(t,r))),e&&e.max&&(i=e.max,et(i)&&(i=Np(i+n,yd,"floor"),t=Math.min(t,i))),t-=n,t};wi.prototype.isActive=function(){return this.active};wi.prototype.setActive=function(t){this.active=t,this._eventBus.fire("gridSnapping.toggle",{active:t})};wi.prototype.toggleActive=function(){this.setActive(!this.active)};wi.$inject=["elementRegistry","eventBus","config.gridSnapping"];function bB(t,e){var n=t.context,r=n.createConstraints,i=n.resizeConstraints||{},a=n.gridSnappingContext,o=a.snapConstraints;if(o&&o[e])return o[e];o||(o=a.snapConstraints={}),o[e]||(o[e]={});var c=n.direction;r&&(bd(e)?(o.x.min=r.left,o.x.max=r.right):(o.y.min=r.top,o.y.max=r.bottom));var l=i.min,d=i.max;return l&&(bd(e)?a0(c)?o.x.max=l.left:o.x.min=l.right:i0(c)?o.y.max=l.top:o.y.min=l.bottom),d&&(bd(e)?a0(c)?o.x.min=d.left:o.x.max=d.right:i0(c)?o.y.min=d.top:o.y.max=d.bottom),o[e]}function wB(t,e,n){var r=t.context,i=t.shape,a=r.gridSnappingContext,o=a.snapLocation,c=a.snapOffset;return c&&et(c[e])||(c||(c=a.snapOffset={}),et(c[e])||(c[e]=0),!i)||(n.get(i.id)||(bd(e)?c[e]+=i[e]+i.width/2:c[e]+=i[e]+i.height/2),!o)||(e==="x"?/left/.test(o)?c[e]-=i.width/2:/right/.test(o)&&(c[e]+=i.width/2):/top/.test(o)?c[e]-=i.height/2:/bottom/.test(o)&&(c[e]+=i.height/2)),c[e]}function bd(t){return t==="x"}function i0(t){return t.indexOf("n")!==-1}function a0(t){return t.indexOf("w")!==-1}function da(t,e){Z.call(this,t),this._gridSnapping=e;var n=this;this.preExecute("shape.resize",function(r){var i=r.context,a=i.hints||{},o=a.autoResize;if(o){var c=i.shape,l=i.newBounds;su(o)?i.newBounds=n.snapComplex(l,o):i.newBounds=n.snapSimple(c,l)}})}da.$inject=["eventBus","gridSnapping","modeling"];ve(da,Z);da.prototype.snapSimple=function(t,e){var n=this._gridSnapping;return e.width=n.snapValue(e.width,{min:e.width}),e.height=n.snapValue(e.height,{min:e.height}),e.x=t.x+t.width/2-e.width/2,e.y=t.y+t.height/2-e.height/2,e};da.prototype.snapComplex=function(t,e){return/w|e/.test(e)&&(t=this.snapHorizontally(t,e)),/n|s/.test(e)&&(t=this.snapVertically(t,e)),t};da.prototype.snapHorizontally=function(t,e){var n=this._gridSnapping,r=/w/.test(e),i=/e/.test(e),a={};return a.width=n.snapValue(t.width,{min:t.width}),i&&(r?(a.x=n.snapValue(t.x,{max:t.x}),a.width+=n.snapValue(t.x-a.x,{min:t.x-a.x})):t.x=t.x+t.width-a.width),B(t,a),t};da.prototype.snapVertically=function(t,e){var n=this._gridSnapping,r=/n/.test(e),i=/s/.test(e),a={};return a.height=n.snapValue(t.height,{min:t.height}),r&&(i?(a.y=n.snapValue(t.y,{max:t.y}),a.height+=n.snapValue(t.y-a.y,{min:t.y-a.y})):t.y=t.y+t.height-a.height),B(t,a),t};var _B=2e3;function WN(t,e){t.on(["spaceTool.move","spaceTool.end"],_B,function(n){var r=n.context;if(r.initialized){var i=r.axis,a;i==="x"?(a=e.snapValue(n.dx),n.x=n.x+a-n.dx,n.dx=a):(a=e.snapValue(n.dy),n.y=n.y+a-n.dy,n.dy=a)}})}WN.$inject=["eventBus","gridSnapping"];const jB={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",da],gridSnappingSpaceToolBehavior:["type",WN]},EB={__depends__:[jB],__init__:["gridSnapping"],gridSnapping:["type",wi]};var NB=2e3;function qN(t,e,n){t.on("autoPlace",NB,function(r){var i=r.source,a=Te(i),o=r.shape,c=uE(i,o,n);return["x","y"].forEach(function(l){var d={};c[l]!==a[l]&&(c[l]>a[l]?d.min=c[l]:d.max=c[l],_(o,"bpmn:TextAnnotation")&&(SB(l)?d.offset=-o.width/2:d.offset=-o.height/2),c[l]=e.snapValue(c[l],d))}),c})}qN.$inject=["eventBus","gridSnapping","elementRegistry"];function SB(t){return t==="x"}var kB=1750;function KN(t,e,n){e.on(["create.start","shape.move.start"],kB,function(r){var i=r.context,a=i.shape,o=t.getRootElement();if(!(!_(a,"bpmn:Participant")||!_(o,"bpmn:Process")||!o.children.length)){var c=i.createConstraints;c&&(a.width=n.snapValue(a.width,{min:a.width}),a.height=n.snapValue(a.height,{min:a.height}))}})}KN.$inject=["canvas","eventBus","gridSnapping"];var CB=3e3;function fh(t,e,n){Z.call(this,t),this._gridSnapping=e;var r=this;this.postExecuted(["connection.create","connection.layout"],CB,function(i){var a=i.context,o=a.connection,c=a.hints||{},l=o.waypoints;c.connectionStart||c.connectionEnd||c.createElementsBehavior===!1||PB(l)&&n.updateWaypoints(o,r.snapMiddleSegments(l))})}fh.$inject=["eventBus","gridSnapping","modeling"];ve(fh,Z);fh.prototype.snapMiddleSegments=function(t){var e=this._gridSnapping,n;t=t.slice();for(var r=1;r<t.length-2;r++)n=AB(e,t[r],t[r+1]),t[r]=n[0],t[r+1]=n[1];return t};function PB(t){return t.length>3}function TB(t){return t==="h"}function RB(t){return t==="v"}function AB(t,e,n){var r=fs(e,n),i={};return TB(r)&&(i.y=t.snapValue(e.y)),RB(r)&&(i.x=t.snapValue(e.x)),("x"in i||"y"in i)&&(e=B({},e,i),n=B({},n,i)),[e,n]}const IB={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",qN],gridSnappingParticipantBehavior:["type",KN],gridSnappingLayoutConnectionBehavior:["type",fh]},MB={__depends__:[EB,IB],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",GN]};var DB=30,YN=30;function wl(t,e){this._interactionEvents=e;var n=this;t.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(r){var i=r.element,a=r.gfx;if(_(i,"bpmn:Lane"))return n._createParticipantHit(i,a);if(_(i,"bpmn:Participant"))return lt(i)?n._createParticipantHit(i,a):n._createDefaultHit(i,a);if(_(i,"bpmn:SubProcess"))return lt(i)?n._createSubProcessHit(i,a):n._createDefaultHit(i,a)})}wl.$inject=["eventBus","interactionEvents"];wl.prototype._createDefaultHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createDefaultHit(t,e),!0};wl.prototype._createParticipantHit=function(t,e){this._interactionEvents.removeHits(e),this._interactionEvents.createBoxHit(e,"no-move",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"click-stroke",{width:t.width,height:t.height});var n=xn(t)?{width:DB,height:t.height}:{width:t.width,height:YN};return this._interactionEvents.createBoxHit(e,"all",n),!0};wl.prototype._createSubProcessHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createBoxHit(e,"no-move",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"click-stroke",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"all",{width:t.width,height:YN}),!0};const OB={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",wl]};function mh(t){t.invoke(wo,this)}ve(mh,wo);mh.$inject=["injector"];mh.prototype.registerBindings=function(t,e){wo.prototype.registerBindings.call(this,t,e);function n(r,i){e.isRegistered(r)&&t.addListener(i)}n("selectElements",function(r){var i=r.keyEvent;if(t.isKey(["a","A"],i)&&t.isCmd(i))return e.trigger("selectElements"),!0}),n("find",function(r){var i=r.keyEvent;if(t.isKey(["f","F"],i)&&t.isCmd(i))return e.trigger("find"),!0}),n("spaceTool",function(r){var i=r.keyEvent;if(!t.hasModifier(i)&&t.isKey(["s","S"],i))return e.trigger("spaceTool"),!0}),n("lassoTool",function(r){var i=r.keyEvent;if(!t.hasModifier(i)&&t.isKey(["l","L"],i))return e.trigger("lassoTool"),!0}),n("handTool",function(r){var i=r.keyEvent;if(!t.hasModifier(i)&&t.isKey(["h","H"],i))return e.trigger("handTool"),!0}),n("globalConnectTool",function(r){var i=r.keyEvent;if(!t.hasModifier(i)&&t.isKey(["c","C"],i))return e.trigger("globalConnectTool"),!0}),n("directEditing",function(r){var i=r.keyEvent;if(!t.hasModifier(i)&&t.isKey(["e","E"],i))return e.trigger("directEditing"),!0}),n("replaceElement",function(r){var i=r.keyEvent;if(!t.hasModifier(i)&&t.isKey(["r","R"],i))return e.trigger("replaceElement",i),!0})};const $B={__depends__:[Gm],__init__:["keyboardBindings"],keyboardBindings:["type",mh]};var LB={moveSpeed:1,moveSpeedAccelerated:10},BB=1500,o0="left",c0="up",l0="right",d0="down",FB={ArrowLeft:o0,Left:o0,ArrowUp:c0,Up:c0,ArrowRight:l0,Right:l0,ArrowDown:d0,Down:d0},zB={left:function(t){return{x:-t,y:0}},up:function(t){return{x:0,y:-t}},right:function(t){return{x:t,y:0}},down:function(t){return{x:0,y:t}}};function ZN(t,e,n,r,i){var a=this;this._config=B({},LB,t||{}),e.addListener(BB,function(o){var c=o.keyEvent,l=FB[c.key];if(l&&!e.isCmd(c)){var d=e.isShift(c);return a.moveSelection(l,d),!0}}),this.moveSelection=function(o,c){var l=i.get();if(l.length){var d=this._config[c?"moveSpeedAccelerated":"moveSpeed"],u=zB[o](d),h=r.allowed("elements.move",{shapes:l});h&&n.moveElements(l,u)}}}ZN.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const UB={__depends__:[Gm,Jr],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",ZN]};var u0=10;function _l(t,e,n,r){this._dragging=r,this._rules=e;var i=this;function a(l,d){var u=l.shape,h=l.direction,p=l.resizeConstraints,f;l.delta=d,f=EO(u,h,d),l.newBounds=SO(f,p),l.canExecute=i.canResize(l)}function o(l){var d=l.resizeConstraints,u=l.minBounds;d===void 0&&(u===void 0&&(u=i.computeMinResizeBox(l)),l.resizeConstraints={min:Ne(u)})}function c(l){var d=l.shape,u=l.canExecute,h=l.newBounds;if(u){if(h=Cw(h),!HB(d,h))return;n.resizeShape(d,h)}}t.on("resize.start",function(l){o(l.context)}),t.on("resize.move",function(l){var d={x:l.dx,y:l.dy};a(l.context,d)}),t.on("resize.end",function(l){c(l.context)})}_l.prototype.canResize=function(t){var e=this._rules,n=Xr(t,["newBounds","shape","delta","direction"]);return e.allowed("shape.resize",n)};_l.prototype.activate=function(t,e,n){var r=this._dragging,i,a;if(typeof n=="string"&&(n={direction:n}),i=B({shape:e},n),a=i.direction,!a)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(t,XN(e,a),"resize",{autoActivate:!0,cursor:VB(a),data:{shape:e,context:i}})};_l.prototype.computeMinResizeBox=function(t){var e=t.shape,n=t.direction,r,i;return r=t.minDimensions||{width:u0,height:u0},i=DE(e,t.childrenBoxPadding),kO(n,e,r,i)};_l.$inject=["eventBus","rules","modeling","dragging"];function HB(t,e){return t.x!==e.x||t.y!==e.y||t.width!==e.width||t.height!==e.height}function XN(t,e){var n=Te(t),r=Ne(t),i={x:n.x,y:n.y};return e.indexOf("n")!==-1?i.y=r.top:e.indexOf("s")!==-1&&(i.y=r.bottom),e.indexOf("e")!==-1?i.x=r.right:e.indexOf("w")!==-1&&(i.x=r.left),i}function VB(t){var e="resize-";return t==="n"||t==="s"?e+"ns":t==="e"||t==="w"?e+"ew":t==="nw"||t==="se"?e+"nwse":e+"nesw"}var h0="djs-resizing",p0="resize-not-ok",GB=500;function JN(t,e,n){function r(a){var o=a.shape,c=a.newBounds,l=a.frame;l||(l=a.frame=n.addFrame(o,e.getActiveLayer()),e.addMarker(o,h0)),c.width>5&&q(l,{x:c.x,width:c.width}),c.height>5&&q(l,{y:c.y,height:c.height}),a.canExecute?St(l).remove(p0):St(l).add(p0)}function i(a){var o=a.shape,c=a.frame;c&&Cn(a.frame),e.removeMarker(o,h0)}t.on("resize.move",GB,function(a){r(a.context)}),t.on("resize.cleanup",function(a){i(a.context)})}JN.$inject=["eventBus","canvas","previewSupport"];var ad=-6,od=8,cd=20,tc="djs-resizer",WB=["n","w","s","e","nw","ne","se","sw"];function _i(t,e,n,r){this._resize=r,this._canvas=e;var i=this;t.on("selection.changed",function(a){var o=a.newSelection;i.removeResizers(),o.length===1&&O(o,Xi(i.addResizer,i))}),t.on("shape.changed",function(a){var o=a.element;n.isSelected(o)&&(i.removeResizers(),i.addResizer(o))})}_i.prototype.makeDraggable=function(t,e,n){var r=this._resize;function i(a){nm(a)&&r.activate(a,t,n)}Ae.bind(e,"mousedown",i),Ae.bind(e,"touchstart",i)};_i.prototype._createResizer=function(t,e,n,r){var i=this._getResizersParent(),a=qB(r),o=ie("g");St(o).add(tc),St(o).add(tc+"-"+t.id),St(o).add(tc+"-"+r),le(i,o);var c=ie("rect");q(c,{x:-od/2+a.x,y:-od/2+a.y,width:od,height:od}),St(c).add(tc+"-visual"),le(o,c);var l=ie("rect");return q(l,{x:-cd/2+a.x,y:-cd/2+a.y,width:cd,height:cd}),St(l).add(tc+"-hit"),le(o,l),vC(o,e,n),o};_i.prototype.createResizer=function(t,e){var n=XN(t,e),r=this._createResizer(t,n.x,n.y,e);this.makeDraggable(t,r,e)};_i.prototype.addResizer=function(t){var e=this;jt(t)||!this._resize.canResize({shape:t})||O(WB,function(n){e.createResizer(t,n)})};_i.prototype.removeResizers=function(){var t=this._getResizersParent();ou(t)};_i.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};_i.$inject=["eventBus","canvas","selection","resize"];function qB(t){var e={x:0,y:0};return t.indexOf("e")!==-1?e.x=-ad:t.indexOf("w")!==-1&&(e.x=ad),t.indexOf("s")!==-1?e.y=-ad:t.indexOf("n")!==-1&&(e.y=ad),e}const QN={__depends__:[ts,Rs,So],__init__:["resize","resizePreview","resizeHandles"],resize:["type",_l],resizePreview:["type",JN],resizeHandles:["type",_i]};var KB=2e3;function jl(t,e,n,r,i,a,o){this._bpmnFactory=e,this._canvas=n,this._modeling=i,this._textRenderer=o,r.registerProvider(this),t.on("element.dblclick",function(l){c(l.element,!0)}),t.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){r.isActive()&&r.complete()}),t.on(["shape.remove","connection.remove"],KB,function(l){r.isActive(l.element)&&r.cancel()}),t.on(["commandStack.changed"],function(l){r.isActive()&&r.cancel()}),t.on("directEditing.activate",function(l){a.removeResizers()}),t.on("create.end",500,function(l){var d=l.context,u=d.shape,h=l.context.canExecute,p=l.isTouch;p||h&&(d.hints&&d.hints.createElementsBehavior===!1||c(u))}),t.on("autoPlace.end",500,function(l){c(l.shape)});function c(l,d){(d||ze(l,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||uv(l))&&r.activate(l)}}jl.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];jl.prototype.activate=function(t){var e=Ji(t);if(e!==void 0){var n={text:e},r=this.getEditingBBox(t);B(n,r);var i={},a=n.style||{};return B(a,{backgroundColor:null,border:null}),(ze(t,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||uv(t))&&B(i,{centerVertically:!0}),Xa(t)&&(B(i,{autoResize:!0}),B(a,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),_(t,"bpmn:TextAnnotation")&&(B(i,{resizable:!0,autoResize:!0}),B(a,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),B(n,{options:i,style:a}),n}};jl.prototype.getEditingBBox=function(t){var e=this._canvas,n=t.label||t,r=e.getAbsoluteBBox(n),i={x:r.x+r.width/2,y:r.y+r.height/2},a={x:r.x,y:r.y},o=e.zoom(),c=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),d=l.fontSize*o,u=l.lineHeight,h=c.fontSize*o,p=c.lineHeight,f={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(_(t,"bpmn:Lane")||XB(t)){var m=xn(t),x=m?{width:r.height,height:30*o,x:r.x-r.height/2+15*o,y:i.y-30*o/2}:{width:r.width,height:30*o};B(a,x),B(f,{fontSize:h+"px",lineHeight:p,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px",transform:m?"rotate(-90deg)":null})}if(ZB(t)){var g=xn(t),w=g?{width:r.width,height:r.height}:{width:r.height,height:r.width,x:i.x-r.height/2,y:i.y-r.width/2};B(a,w),B(f,{fontSize:h+"px",lineHeight:p,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px",transform:g?null:"rotate(-90deg)"})}(ze(t,["bpmn:Task","bpmn:CallActivity"])||uv(t))&&(B(a,{width:r.width,height:r.height}),B(f,{fontSize:h+"px",lineHeight:p,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px"})),YB(t)&&(B(a,{width:r.width,x:r.x}),B(f,{fontSize:h+"px",lineHeight:p,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px"}));var y=90*o,b=7*o,j=4*o;if(n.labelTarget&&(B(a,{width:y,height:r.height+b+j,x:i.x-y/2,y:r.y-b}),B(f,{fontSize:d+"px",lineHeight:u,paddingTop:b+"px",paddingBottom:j+"px"})),Xa(n)&&!cu(n)&&!it(n)){var C=Rw(t),N=e.getAbsoluteBBox({x:C.x,y:C.y,width:0,height:0}),k=d+b+j;B(a,{width:y,height:k,x:N.x-y/2,y:N.y-k/2}),B(f,{fontSize:d+"px",lineHeight:u,paddingTop:b+"px",paddingBottom:j+"px"})}return _(t,"bpmn:TextAnnotation")&&(B(a,{width:r.width,height:r.height,minWidth:30*o,minHeight:10*o}),B(f,{textAlign:"left",paddingTop:5*o+"px",paddingBottom:7*o+"px",paddingLeft:7*o+"px",paddingRight:5*o+"px",fontSize:h+"px",lineHeight:p})),{bounds:a,style:f}};jl.prototype.update=function(t,e,n,r){var i,a;_(t,"bpmn:TextAnnotation")&&(a=this._canvas.getAbsoluteBBox(t),i={x:t.x,y:t.y,width:t.width/a.width*r.width,height:t.height/a.height*r.height}),JB(e)&&(e=null),this._modeling.updateLabel(t,e,i)};function uv(t){return _(t,"bpmn:SubProcess")&&!lt(t)}function YB(t){return _(t,"bpmn:SubProcess")&&lt(t)}function ZB(t){return _(t,"bpmn:Participant")&&!lt(t)}function XB(t){return _(t,"bpmn:Participant")&&lt(t)}function JB(t){return!t||!t.trim()}var f0="djs-element-hidden",m0="djs-label-hidden";function eS(t,e,n){var r=this,i=e.getDefaultLayer(),a,o,c;t.on("directEditing.activate",function(l){var d=l.active;if(a=d.element.label||d.element,_(a,"bpmn:TextAnnotation")){o=e.getAbsoluteBBox(a),c=ie("g");var u=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:a.height,position:{mx:0,my:0}}),h=r.path=ie("path");q(h,{d:u,strokeWidth:2,stroke:QB(a)}),le(c,h),le(i,c),kn(c,a.x,a.y)}_(a,"bpmn:TextAnnotation")||a.labelTarget?e.addMarker(a,f0):(_(a,"bpmn:Task")||_(a,"bpmn:CallActivity")||_(a,"bpmn:SubProcess")||_(a,"bpmn:Participant")||_(a,"bpmn:Lane"))&&e.addMarker(a,m0)}),t.on("directEditing.resize",function(l){if(_(a,"bpmn:TextAnnotation")){var d=l.height,u=l.dy,h=Math.max(a.height/o.height*(d+u),0),p=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:h,position:{mx:0,my:0}});q(r.path,{d:p})}}),t.on(["directEditing.complete","directEditing.cancel"],function(l){var d=l.active;d&&(e.removeMarker(d.element.label||d.element,f0),e.removeMarker(a,m0)),a=void 0,o=void 0,c&&(Cn(c),c=void 0)})}eS.$inject=["eventBus","canvas","pathMap"];function QB(t,e){var n=xt(t);return n.get("stroke")||e||"black"}const e6={__depends__:[Aw,QN,UN],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",jl],labelEditingPreview:["type",eS]};var t6=new Jf("tt");function n6(t){var e=vn('<div class="djs-tooltip-container" />');return am(e,{position:"absolute",width:"0",height:"0"}),t.insertBefore(e,t.firstChild),e}function r6(t,e,n){am(t,{left:e+"px",top:n+"px"})}function hv(t,e){t.style.display=e===!1?"none":""}var tS="djs-tooltip",Sp="."+tS;function Dn(t,e){this._eventBus=t,this._canvas=e,this._ids=t6,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=n6(e.getContainer());var n=this;Rr.bind(this._tooltipRoot,Sp,"mousedown",function(r){r.stopPropagation()}),Rr.bind(this._tooltipRoot,Sp,"mouseover",function(r){n.trigger("mouseover",r)}),Rr.bind(this._tooltipRoot,Sp,"mouseout",function(r){n.trigger("mouseout",r)}),this._init()}Dn.$inject=["eventBus","canvas"];Dn.prototype.add=function(t){if(!t.position)throw new Error("must specifiy tooltip position");if(!t.html)throw new Error("must specifiy tooltip html");var e=this._ids.next();return t=B({},this._tooltipDefaults,t,{id:e}),this._addTooltip(t),t.timeout&&this.setTimeout(t),e};Dn.prototype.trigger=function(t,e){var n=e.delegateTarget||e.target,r=this.get(In(n,"data-tooltip-id"));r&&(t==="mouseover"&&r.timeout&&this.clearTimeout(r),t==="mouseout"&&r.timeout&&(r.timeout=1e3,this.setTimeout(r)))};Dn.prototype.get=function(t){return typeof t!="string"&&(t=t.id),this._tooltips[t]};Dn.prototype.clearTimeout=function(t){if(t=this.get(t),!!t){var e=t.removeTimer;e&&(clearTimeout(e),t.removeTimer=null)}};Dn.prototype.setTimeout=function(t){if(t=this.get(t),!!t){this.clearTimeout(t);var e=this;t.removeTimer=setTimeout(function(){e.remove(t)},t.timeout)}};Dn.prototype.remove=function(t){var e=this.get(t);e&&(Za(e.html),Za(e.htmlContainer),delete e.htmlContainer,delete this._tooltips[e.id])};Dn.prototype.show=function(){hv(this._tooltipRoot)};Dn.prototype.hide=function(){hv(this._tooltipRoot,!1)};Dn.prototype._updateRoot=function(t){var e=t.scale||1,n=t.scale||1,r="matrix("+e+",0,0,"+n+","+-1*t.x*e+","+-1*t.y*n+")";this._tooltipRoot.style.transform=r,this._tooltipRoot.style["-ms-transform"]=r};Dn.prototype._addTooltip=function(t){var e=t.id,n=t.html,r,i=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),su(n)&&(n=vn(n)),r=vn('<div data-tooltip-id="'+e+'" class="'+tS+'">'),am(r,{position:"absolute"}),r.appendChild(n),t.type&&rn(r).add("djs-tooltip-"+t.type),t.className&&rn(r).add(t.className),t.htmlContainer=r,i.appendChild(r),this._tooltips[e]=t,this._updateTooltip(t)};Dn.prototype._updateTooltip=function(t){var e=t.position,n=t.htmlContainer;r6(n,e.x,e.y)};Dn.prototype._updateTooltipVisibilty=function(t){O(this._tooltips,function(e){var n=e.show,r=e.htmlContainer,i=!0;n&&((n.minZoom>t.scale||n.maxZoom<t.scale)&&(i=!1),hv(r,i))})};Dn.prototype._init=function(){var t=this;function e(n){t._updateRoot(n),t._updateTooltipVisibilty(n),t.show()}this._eventBus.on("canvas.viewbox.changing",function(n){t.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){e(n.viewbox)})};const s6={__init__:["tooltips"],tooltips:["type",Dn]};var i6="flow elements must be children of pools/participants",a6="Data object must be placed within a pool/participant.";function nS(t,e,n){function r(i,a,o){e.add({position:{x:i.x+5,y:i.y+5},type:"error",timeout:2e3,html:"<div>"+a+"</div>"})}t.on(["shape.move.rejected","create.rejected"],function(i){var a=i.context,o=a.shape,c=a.target;_(c,"bpmn:Collaboration")&&(_(o,"bpmn:FlowNode")?r(i,n(i6)):_(o,"bpmn:DataObjectReference")&&r(i,n(a6)))})}nS.$inject=["eventBus","tooltips","translate"];const o6={__depends__:[s6],__init__:["modelingFeedback"],modelingFeedback:["type",nS]};var c6=500,l6=1e3;function ua(t,e){this._eventBus=t,this.offset=5;var n=e.cls("djs-outline",["no-fill"]),r=this;function i(a){var o=ie("rect");return q(o,B({x:0,y:0,rx:4,width:100,height:100},n)),o}t.on(["shape.added","shape.changed"],c6,function(a){var o=a.element,c=a.gfx,l=Yt(".djs-outline",c);l||(l=r.getOutline(o)||i(),le(c,l)),r.updateShapeOutline(l,o)}),t.on(["connection.added","connection.changed"],function(a){var o=a.element,c=a.gfx,l=Yt(".djs-outline",c);l||(l=i(),le(c,l)),r.updateConnectionOutline(l,o)})}ua.prototype.updateShapeOutline=function(t,e){var n=!1,r=this._getProviders();r.length&&O(r,function(i){n=n||i.updateOutline(e,t)}),n||q(t,{x:-this.offset,y:-this.offset,width:e.width+this.offset*2,height:e.height+this.offset*2})};ua.prototype.updateConnectionOutline=function(t,e){var n=Mn(e);q(t,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};ua.prototype.registerProvider=function(t,e){e||(e=t,t=l6),this._eventBus.on("outline.getProviders",t,function(n){n.providers.push(e)})};ua.prototype._getProviders=function(){var t=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};ua.prototype.getOutline=function(t){var e,n=this._getProviders();return O(n,function(r){hr(r.getOutline)&&(e=e||r.getOutline(t))}),e};ua.$inject=["eventBus","styles","elementRegistry"];var ld=6;function pv(t,e,n){this._canvas=e;var r=this;t.on("element.changed",function(i){n.isSelected(i.element)&&r._updateMultiSelectionOutline(n.get())}),t.on("selection.changed",function(i){var a=i.newSelection;r._updateMultiSelectionOutline(a)})}pv.prototype._updateMultiSelectionOutline=function(t){var e=this._canvas.getLayer("selectionOutline");ou(e);var n=t.length>1,r=this._canvas.getContainer();if(St(r)[n?"add":"remove"]("djs-multi-select"),!!n){var i=d6(Mn(t)),a=ie("rect");q(a,B({rx:3},i)),St(a).add("djs-selection-outline"),le(e,a)}};pv.$inject=["eventBus","canvas","selection"];function d6(t){return{x:t.x-ld,y:t.y-ld,width:t.width+ld*2,height:t.height+ld*2}}const rS={__depends__:[Jr],__init__:["outline","multiSelectionOutline"],outline:["type",ua],multiSelectionOutline:["type",pv]};var u6=500,h6=1250,p6=1500,Kd=Math.round;function f6(t){return{x:t.x+Kd(t.width/2),y:t.y+Kd(t.height/2)}}function sS(t,e,n,r,i){function a(c,l,d,u){return i.allowed("elements.move",{shapes:c,delta:l,position:d,target:u})}t.on("shape.move.start",p6,function(c){var l=c.context,d=c.shape,u=r.get().slice();u.indexOf(d)===-1&&(u=[d]),u=m6(u),B(l,{shapes:u,validatedShapes:u,shape:d})}),t.on("shape.move.start",h6,function(c){var l=c.context,d=l.validatedShapes,u;if(u=l.canExecute=a(d),!u)return!1}),t.on("shape.move.move",u6,function(c){var l=c.context,d=l.validatedShapes,u=c.hover,h={x:c.dx,y:c.dy},p={x:c.x,y:c.y},f;if(f=a(d,h,p,u),l.delta=h,l.canExecute=f,f===null){l.target=null;return}l.target=u}),t.on("shape.move.end",function(c){var l=c.context,d=l.delta,u=l.canExecute,h=u==="attach",p=l.shapes;if(u===!1)return!1;d.x=Kd(d.x),d.y=Kd(d.y),!(d.x===0&&d.y===0)&&n.moveElements(p,d,l.target,{primaryShape:l.shape,attach:h})}),t.on("element.mousedown",function(c){if(nm(c)){var l=Ew(c);if(!l)throw new Error("must supply DOM mousedown event");return o(l,c.element)}});function o(c,l,d,u){if(Es(d)&&(u=d,d=!1),!(l.waypoints||!l.parent)&&!St(c.target).has("djs-hit-no-move")){var h=f6(l);return e.init(c,h,"shape.move",{cursor:"grabbing",autoActivate:d,data:{shape:l,context:u||{}}}),!0}}this.start=o}sS.$inject=["eventBus","dragging","modeling","selection","rules"];function m6(t){var e=au(t,"id");return rt(t,function(n){for(;n=n.parent;)if(e[n.id])return!1;return!0})}var g0=499,kp="djs-dragging",v0="drop-ok",x0="drop-not-ok",y0="new-parent",b0="attach-ok";function iS(t,e,n,r){function i(l){var d=a(l),u=g6(d);return u}function a(l){var d=qc(l,!0),u=d.flatMap(f=>(f.incoming||[]).concat(f.outgoing||[])),h=d.concat(u),p=[...new Set(h)];return p}function o(l,d){[b0,v0,x0,y0].forEach(function(u){u===d?e.addMarker(l,u):e.removeMarker(l,u)})}function c(l,d,u){r.addDragger(d,l.dragGroup),u&&e.addMarker(d,kp),l.allDraggedElements?l.allDraggedElements.push(d):l.allDraggedElements=[d]}t.on("shape.move.start",g0,function(l){var d=l.context,u=d.shapes,h=d.allDraggedElements,p=i(u);if(!d.dragGroup){var f=ie("g");q(f,n.cls("djs-drag-group",["no-events"]));var m=e.getActiveLayer();le(m,f),d.dragGroup=f}p.forEach(function(x){r.addDragger(x,d.dragGroup)}),h?h=em([h,a(u)]):h=a(u),O(h,function(x){e.addMarker(x,kp)}),d.allDraggedElements=h,d.differentParents=v6(u)}),t.on("shape.move.move",g0,function(l){var d=l.context,u=d.dragGroup,h=d.target,p=d.shape.parent,f=d.canExecute;h&&(f==="attach"?o(h,b0):d.canExecute&&p&&h.id!==p.id?o(h,y0):o(h,d.canExecute?v0:x0)),kn(u,l.dx,l.dy)}),t.on(["shape.move.out","shape.move.cleanup"],function(l){var d=l.context,u=d.target;u&&o(u,null)}),t.on("shape.move.cleanup",function(l){var d=l.context,u=d.allDraggedElements,h=d.dragGroup;O(u,function(p){e.removeMarker(p,kp)}),h&&Cn(h)}),this.makeDraggable=c}iS.$inject=["eventBus","canvas","styles","previewSupport"];function g6(t){var e=rt(t,function(n){return jt(n)?Dt(t,gs({id:n.source.id}))&&Dt(t,gs({id:n.target.id})):!0});return e}function v6(t){return xC(au(t,function(e){return e.parent&&e.parent.id}))!==1}const x6={__depends__:[Qf,Jr,rS,ts,Rs,So],__init__:["move","movePreview"],move:["type",sS],movePreview:["type",iS]};var aS=".djs-palette-toggle",oS=".entry",y6=aS+", "+oS,$f="djs-palette-",b6="shown",Lf="open",w0="two-column",w6=1e3;function Zt(t,e){this._eventBus=t,this._canvas=e;var n=this;t.on("tool-manager.update",function(r){var i=r.tool;n.updateToolHighlight(i)}),t.on("i18n.changed",function(){n._update()}),t.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}Zt.$inject=["eventBus","canvas"];Zt.prototype.registerProvider=function(t,e){e||(e=t,t=w6),this._eventBus.on("palette.getProviders",t,function(n){n.providers.push(e)}),this._rebuild()};Zt.prototype.getEntries=function(){var t=this._getProviders();return t.reduce(j6,{})};Zt.prototype._rebuild=function(){if(this._diagramInitialized){var t=this._getProviders();t.length&&(this._container||this._init(),this._update())}};Zt.prototype._init=function(){var t=this,e=this._eventBus,n=this._getParentContainer(),r=this._container=vn(Zt.HTML_MARKUP);n.appendChild(r),rn(n).add($f+b6),Rr.bind(r,y6,"click",function(i){var a=i.delegateTarget;if(jw(a,aS))return t.toggle();t.trigger("click",i)}),Ae.bind(r,"mousedown",function(i){i.stopPropagation()}),Rr.bind(r,oS,"dragstart",function(i){t.trigger("dragstart",i)}),e.on("canvas.resized",this._layoutChanged,this),e.fire("palette.create",{container:r})};Zt.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Zt.prototype._toggleState=function(t){t=t||{};var e=this._getParentContainer(),n=this._container,r=this._eventBus,i,a=rn(n),o=rn(e);"twoColumn"in t?i=t.twoColumn:i=this._needsCollapse(e.clientHeight,this._entries||{}),a.toggle(w0,i),o.toggle($f+w0,i),"open"in t&&(a.toggle(Lf,t.open),o.toggle($f+Lf,t.open)),r.fire("palette.changed",{twoColumn:i,open:this.isOpen()})};Zt.prototype._update=function(){var t=Yt(".djs-palette-entries",this._container),e=this._entries=this.getEntries();Iw(t),O(e,function(n,r){var i=n.group||"default",a=Yt("[data-group="+yc(i)+"]",t);a||(a=vn('<div class="group"></div>'),In(a,"data-group",i),t.appendChild(a));var o=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=vn(o);if(a.appendChild(c),!n.separator&&(In(c,"data-action",r),n.title&&In(c,"title",n.title),n.className&&_6(c,n.className),n.imageUrl)){var l=vn("<img>");In(l,"src",n.imageUrl),c.appendChild(l)}}),this.open()};Zt.prototype.trigger=function(t,e,n){var r,i,a=e.delegateTarget||e.target;return a?(r=In(a,"data-action"),i=e.originalEvent||e,this.triggerEntry(r,t,i,n)):e.preventDefault()};Zt.prototype.triggerEntry=function(t,e,n,r){var i=this._entries,a,o;if(a=i[t],!!a&&(o=a.action,this._eventBus.fire("palette.trigger",{entry:a,event:n})!==!1)){if(hr(o)){if(e==="click")return o(n,r)}else if(o[e])return o[e](n,r);n.preventDefault()}};Zt.prototype._layoutChanged=function(){this._toggleState({})};Zt.prototype._needsCollapse=function(t,e){var n=50,r=Object.keys(e).length*46;return t<r+n};Zt.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};Zt.prototype.open=function(){this._toggleState({open:!0})};Zt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Zt.prototype.isActiveTool=function(t){return t&&this._activeTool===t};Zt.prototype.updateToolHighlight=function(t){var e,n;this._toolsContainer||(e=Yt(".djs-palette-entries",this._container),this._toolsContainer=Yt("[data-group=tools]",e)),n=this._toolsContainer,O(n.children,function(r){var i=r.getAttribute("data-action");if(i){var a=rn(r);i=i.replace("-tool",""),a.contains("entry")&&i===t?a.add("highlighted-entry"):a.remove("highlighted-entry")}})};Zt.prototype.isOpen=function(){return rn(this._container).has(Lf)};Zt.prototype._getParentContainer=function(){return this._canvas.getContainer()};Zt.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function _6(t,e){var n=rn(t),r=tt(e)?e:e.split(/\s+/g);r.forEach(function(i){n.add(i)})}function j6(t,e){var n=e.getPaletteEntries();return hr(n)?n(t):(O(n,function(r,i){t[i]=r}),t)}const E6={__init__:["palette"],palette:["type",Zt]};var cS="crosshair";function ha(t,e,n,r,i,a,o){this._selection=i,this._dragging=n,this._mouse=o;var c=this,l={create:function(d){var u=e.getActiveLayer(),h;h=d.frame=ie("rect"),q(h,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),le(u,h)},update:function(d){var u=d.frame,h=d.bbox;q(u,{x:h.x,y:h.y,width:h.width,height:h.height})},remove:function(d){d.frame&&Cn(d.frame)}};a.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),t.on("lasso.selection.end",function(d){var u=d.originalEvent.target;!d.hover&&!(u instanceof SVGElement)||t.once("lasso.selection.ended",function(){c.activateLasso(d.originalEvent,!0)})}),t.on("lasso.end",0,function(d){var u=d.context,h=Cp(d),p=r.filter(function(m){return m}),f=Op(d);c.select(p,h,f?u.selection:[])}),t.on("lasso.start",function(d){var u=d.context;u.bbox=Cp(d),l.create(u),u.selection=i.get()}),t.on("lasso.move",function(d){var u=d.context;u.bbox=Cp(d),l.update(u)}),t.on("lasso.cleanup",function(d){var u=d.context;l.remove(u)}),t.on("element.mousedown",1500,function(d){if(Op(d))return c.activateLasso(d.originalEvent),!0})}ha.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];ha.prototype.activateLasso=function(t,e){this._dragging.init(t,"lasso",{autoActivate:e,cursor:cS,data:{context:{}}})};ha.prototype.activateSelection=function(t,e){this._dragging.init(t,"lasso.selection",{trapClick:!1,autoActivate:e,cursor:cS,data:{context:{}},keepSelection:!0})};ha.prototype.select=function(t,e,n=[]){var r=Tw(t,e);this._selection.select([...n,...iu(r)])};ha.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)};ha.prototype.isActive=function(){var t=this._dragging.context();return t&&/^lasso/.test(t.prefix)};function Cp(t){var e={x:t.x-t.dx,y:t.y-t.dy},n={x:t.x,y:t.y},r;return e.x<=n.x&&e.y<n.y||e.x<n.x&&e.y<=n.y?r={x:e.x,y:e.y,width:n.x-e.x,height:n.y-e.y}:e.x>=n.x&&e.y<n.y||e.x>n.x&&e.y<=n.y?r={x:n.x,y:e.y,width:e.x-n.x,height:n.y-e.y}:e.x<=n.x&&e.y>n.y||e.x<n.x&&e.y>=n.y?r={x:e.x,y:n.y,width:n.x-e.x,height:e.y-n.y}:e.x>=n.x&&e.y>n.y||e.x>n.x&&e.y>=n.y?r={x:n.x,y:n.y,width:e.x-n.x,height:e.y-n.y}:r={x:n.x,y:n.y,width:0,height:0},r}const N6={__depends__:[Ju,ol],__init__:["lassoTool"],lassoTool:["type",ha]};var Pp=1500,lS="grab";function ko(t,e,n,r,i,a){this._dragging=n,this._mouse=a;var o=this,c=r.get("keyboard",!1);i.registerTool("hand",{tool:"hand",dragging:"hand.move"}),t.on("element.mousedown",Pp,function(l){if(wc(l))return o.activateMove(l.originalEvent,!0),!1}),c&&c.addListener(Pp,function(l){if(!(!_0(l.keyEvent)||o.isActive())){var d=o._mouse.getLastMoveEvent();o.activateMove(d,!!d)}},"keyboard.keydown"),c&&c.addListener(Pp,function(l){!_0(l.keyEvent)||!o.isActive()||o.toggle()},"keyboard.keyup"),t.on("hand.end",function(l){var d=l.originalEvent.target;if(!l.hover&&!(d instanceof SVGElement))return!1;t.once("hand.ended",function(){o.activateMove(l.originalEvent,{reactivate:!0})})}),t.on("hand.move.move",function(l){var d=e.viewbox().scale;e.scroll({dx:l.dx*d,dy:l.dy*d})}),t.on("hand.move.end",function(l){var d=l.context,u=d.reactivate;return!wc(l)&&u&&t.once("hand.move.ended",function(h){o.activateHand(h.originalEvent,!0,!0)}),!1})}ko.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];ko.prototype.activateMove=function(t,e,n){typeof e=="object"&&(n=e,e=!1),this._dragging.init(t,"hand.move",{autoActivate:e,cursor:lS,data:{context:n||{}}})};ko.prototype.activateHand=function(t,e,n){this._dragging.init(t,"hand",{trapClick:!1,autoActivate:e,cursor:lS,data:{context:{reactivate:n}}})};ko.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateHand(t,!!t)};ko.prototype.isActive=function(){var t=this._dragging.context();return t?/^(hand|hand\.move)$/.test(t.prefix):!1};function _0(t){return mn("Space",t)}const S6={__depends__:[Ju,ol],__init__:["handTool"],handTool:["type",ko]};var j0="connect-ok",E0="connect-not-ok";function Co(t,e,n,r,i,a,o){var c=this;this._dragging=e,this._rules=a,this._mouse=o,i.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),t.on("global-connect.hover",function(l){var d=l.context,u=l.hover,h=d.canStartConnect=c.canStartConnect(u);h!==null&&(d.startTarget=u,r.addMarker(u,h?j0:E0))}),t.on(["global-connect.out","global-connect.cleanup"],function(l){var d=l.context.startTarget,u=l.context.canStartConnect;d&&r.removeMarker(d,u?j0:E0)}),t.on(["global-connect.ended"],function(l){var d=l.context,u=d.startTarget,h={x:l.x,y:l.y},p=c.canStartConnect(u);if(p)return t.once("element.out",function(){t.once(["connect.ended","connect.canceled"],function(){t.fire("global-connect.drag.ended")}),n.start(null,u,h)}),!1})}Co.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];Co.prototype.start=function(t,e){this._dragging.init(t,"global-connect",{autoActivate:e,trapClick:!1,data:{context:{}}})};Co.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();return this.start(t,!!t)};Co.prototype.isActive=function(){var t=this._dragging.context();return t&&/^global-connect/.test(t.prefix)};Co.prototype.canStartConnect=function(t){return this._rules.allowed("connection.start",{source:t})};const k6={__depends__:[ag,ts,Rs,Ju,ol],globalConnect:["type",Co]};function fv(t,e,n,r,i,a,o,c){this._palette=t,this._create=e,this._elementFactory=n,this._spaceTool=r,this._lassoTool=i,this._handTool=a,this._globalConnect=o,this._translate=c,t.registerProvider(this)}fv.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];fv.prototype.getPaletteEntries=function(){var t={},e=this._create,n=this._elementFactory,r=this._spaceTool,i=this._lassoTool,a=this._handTool,o=this._globalConnect,c=this._translate;function l(h,p,f,m,x){function g(w){var y=n.createShape(B({type:h},x));e.start(w,y)}return{group:p,className:f,title:m,action:{dragstart:g,click:g}}}function d(h){var p=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),f=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:p});e.start(h,[p,f],{hints:{autoSelect:[p]}})}function u(h){e.start(h,n.createParticipantShape())}return B(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate hand tool"),action:{click:function(h){a.activateHand(h)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate lasso tool"),action:{click:function(h){i.activateSelection(h)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate create/remove space tool"),action:{click:function(h){r.activateSelection(h)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate global connect tool"),action:{click:function(h){o.start(h)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",c("Create start event")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",c("Create intermediate/boundary event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",c("Create end event")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",c("Create gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",c("Create task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",c("Create data object reference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",c("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:c("Create expanded sub-process"),action:{dragstart:d,click:d}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:c("Create pool/participant"),action:{dragstart:u,click:u}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",c("Create group"))}),t};const C6={__depends__:[E6,Xu,EN,N6,S6,k6,Mw],__init__:["paletteProvider"],paletteProvider:["type",fv]};var P6=250;function mv(t,e,n,r,i){Z.call(this,t);function a(c){var l=c.canExecute.replacements;O(l,function(d){var u=d.oldElementId,h={type:d.newElementType};if(!c.visualReplacements[u]){var p=e.get(u);B(h,{x:p.x,y:p.y});var f=n.createShape(h);r.addShape(f,p.parent);var m=Yt('[data-element-id="'+yc(p.id)+'"]',c.dragGroup);m&&q(m,{display:"none"});var x=i.addDragger(f,c.dragGroup);c.visualReplacements[u]=x,r.removeShape(f)}})}function o(c){var l=c.visualReplacements;O(l,function(d,u){var h=Yt('[data-element-id="'+yc(u)+'"]',c.dragGroup);h&&q(h,{display:"inline"}),d.remove(),l[u]&&delete l[u]})}t.on("shape.move.move",P6,function(c){var l=c.context,d=l.canExecute;l.visualReplacements||(l.visualReplacements={}),d&&d.replacements?a(l):o(l)})}mv.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];ve(mv,Z);const T6={__depends__:[So],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",mv]};var R6=1250,Tp=40,A6=20,I6=10,N0=20,dS=["x","y"],M6=Math.abs;function uS(t){t.on(["connect.hover","connect.move","connect.end"],R6,function(e){var n=e.context,r=n.canExecute,i=n.start,a=n.hover,o=n.source,c=n.target;e.originalEvent&&dr(e.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),r&&a&&D6(e,a,B6(a)),a&&L6(r,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=lr(i),ze(a,["bpmn:Event","bpmn:Gateway"])&&S0(e,lr(a)),ze(a,["bpmn:Task","bpmn:SubProcess"])&&O6(e,a),_(o,"bpmn:BoundaryEvent")&&c===o.host&&$6(e)):hS(r,"bpmn:MessageFlow")?(_(i,"bpmn:Event")&&(n.connectionStart=lr(i)),_(a,"bpmn:Event")&&S0(e,lr(a))):n.connectionStart=n.initialConnectionStart)})}uS.$inject=["eventBus"];function D6(t,e,n){dS.forEach(function(r){var i=pS(r,e);t[r]<e[r]+n?Kt(t,r,e[r]+n):t[r]>e[r]+i-n&&Kt(t,r,e[r]+i-n)})}function O6(t,e){var n=lr(e);dS.forEach(function(r){F6(t,e,r)&&Kt(t,r,n[r])})}function $6(t){var e=t.context,n=e.source,r=e.target;if(!z6(e)){var i=lr(n),a=_n(i,r,-10),o=[];/top|bottom/.test(a)&&o.push("x"),/left|right/.test(a)&&o.push("y"),o.forEach(function(c){var l=t[c],d;M6(l-i[c])<Tp&&(l>i[c]?d=i[c]+Tp:d=i[c]-Tp,Kt(t,c,d))})}}function S0(t,e){Kt(t,"x",e.x),Kt(t,"y",e.y)}function hS(t,e){return t&&t.type===e}function L6(t,e){return Kc(e,function(n){return hS(t,n)})}function pS(t,e){return t==="x"?e.width:e.height}function B6(t){return _(t,"bpmn:Task")?I6:A6}function F6(t,e,n){return t[n]>e[n]+N0&&t[n]<e[n]+pS(n,e)-N0}function z6(t){var e=t.hover,n=t.source;return e&&n&&e===n}function ji(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}ji.prototype.getSnapOrigin=function(t){return this._snapOrigins[t]};ji.prototype.setSnapOrigin=function(t,e){this._snapOrigins[t]=e,this._snapLocations.indexOf(t)===-1&&this._snapLocations.push(t)};ji.prototype.addDefaultSnap=function(t,e){var n=this._defaultSnaps[t];n||(n=this._defaultSnaps[t]=[]),n.push(e)};ji.prototype.getSnapLocations=function(){return this._snapLocations};ji.prototype.setSnapLocations=function(t){this._snapLocations=t};ji.prototype.pointsForTarget=function(t){var e=t.id||t,n=this._targets[e];return n||(n=this._targets[e]=new gh,n.initDefaults(this._defaultSnaps)),n};function gh(){this._snapValues={}}gh.prototype.add=function(t,e){var n=this._snapValues[t];n||(n=this._snapValues[t]={x:[],y:[]}),n.x.indexOf(e.x)===-1&&n.x.push(e.x),n.y.indexOf(e.y)===-1&&n.y.push(e.y)};gh.prototype.snap=function(t,e,n,r){var i=this._snapValues[e];return i&&Y4(t[n],i[n],r)};gh.prototype.initDefaults=function(t){var e=this;O(t||{},function(n,r){O(n,function(i){e.add(r,i)})})};var U6=1250;function ns(t,e,n){var r=this;this._elementRegistry=t,e.on(["create.start","shape.move.start"],function(i){r.initSnap(i)}),e.on(["create.move","create.end","shape.move.move","shape.move.end"],U6,function(i){var a=i.context,o=a.shape,c=a.snapContext,l=a.target;if(!(i.originalEvent&&dr(i.originalEvent))&&!(ho(i)||!l)){var d=c.pointsForTarget(l);d.initialized||(d=r.addSnapTargetPoints(d,o,l),d.initialized=!0),n.snap(i,d)}}),e.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}ns.$inject=["elementRegistry","eventBus","snapping"];ns.prototype.initSnap=function(t){var e=this._elementRegistry,n=t.context,r=n.shape,i=n.snapContext;i||(i=n.snapContext=new ji);var a;e.get(r.id)?a=lr(r,t):a={x:t.x+lr(r).x,y:t.y+lr(r).y};var o={x:a.x-r.width/2,y:a.y-r.height/2},c={x:a.x+r.width/2,y:a.y+r.height/2};return i.setSnapOrigin("mid",{x:a.x-t.x,y:a.y-t.y}),it(r)||(i.setSnapOrigin("top-left",{x:o.x-t.x,y:o.y-t.y}),i.setSnapOrigin("bottom-right",{x:c.x-t.x,y:c.y-t.y})),i};ns.prototype.addSnapTargetPoints=function(t,e,n){var r=this.getSnapTargets(e,n);return O(r,function(i){if(it(i)){it(e)&&t.add("mid",lr(i));return}if(jt(i)){if(i.waypoints.length<3)return;var a=i.waypoints.slice(1,-1);O(a,function(o){t.add("mid",o)});return}t.add("mid",lr(i))}),!et(e.x)||!et(e.y)||this._elementRegistry.get(e.id)&&t.add("mid",lr(e)),t};ns.prototype.getSnapTargets=function(t,e){return kE(e).filter(function(n){return!H6(n)})};function H6(t){return!!t.hidden}var k0=1500;function Po(t,e){e.invoke(ns,this),t.on(["create.move","create.end"],k0,q6),t.on(["create.move","create.end","shape.move.move","shape.move.end"],k0,function(n){var r=n.context,i=r.canExecute,a=r.target,o=i&&(i==="attach"||i.attach);o&&!ho(n)&&V6(n,a)})}ve(Po,ns);Po.$inject=["eventBus","injector"];Po.prototype.initSnap=function(t){var e=ns.prototype.initSnap.call(this,t),n=t.shape,r=!!this._elementRegistry.get(n.id);return O(n.outgoing,function(i){var a=i.waypoints[0];a=a.original||a,e.setSnapOrigin(i.id+"-docking",P0(a,r,t))}),O(n.incoming,function(i){var a=i.waypoints[i.waypoints.length-1];a=a.original||a,e.setSnapOrigin(i.id+"-docking",P0(a,r,t))}),_(n,"bpmn:Participant")&&e.setSnapLocations(["top-left","bottom-right","mid"]),e};Po.prototype.addSnapTargetPoints=function(t,e,n){ns.prototype.addSnapTargetPoints.call(this,t,e,n);var r=this.getSnapTargets(e,n);O(r,function(a){(W6(a)||G6([e,a],"bpmn:TextAnnotation"))&&(t.add("top-left",NE(a)),t.add("bottom-right",SE(a)))});var i=this._elementRegistry;return O(e.incoming,function(a){if(i.get(e.id)){C0(r,a.source)||t.add("mid",Te(a.source));var o=a.waypoints[0];t.add(a.id+"-docking",o.original||o)}}),O(e.outgoing,function(a){if(i.get(e.id)){C0(r,a.target)||t.add("mid",Te(a.target));var o=a.waypoints[a.waypoints.length-1];t.add(a.id+"-docking",o.original||o)}}),_(n,"bpmn:SequenceFlow")&&(t=this.addSnapTargetPoints(t,e,n.parent)),t};Po.prototype.getSnapTargets=function(t,e){return ns.prototype.getSnapTargets.call(this,t,e).filter(function(n){return!_(n,"bpmn:Lane")})};function V6(t,e){var n=Ne(e),r=QE(t,e),i=t.context,a=i.shape,o;a.parent?o={x:0,y:0}:o=Te(a),/top/.test(r)?Kt(t,"y",n.top-o.y):/bottom/.test(r)&&Kt(t,"y",n.bottom-o.y),/left/.test(r)?Kt(t,"x",n.left-o.x):/right/.test(r)&&Kt(t,"x",n.right-o.x)}function G6(t,e){return t.every(function(n){return _(n,e)})}function W6(t){return _(t,"bpmn:SubProcess")&&lt(t)?!0:_(t,"bpmn:Participant")}function q6(t){var e=t.context,n=e.createConstraints;if(n){var r=n.top,i=n.right,a=n.bottom,o=n.left;(o&&o>=t.x||i&&i<=t.x)&&Kt(t,"x",t.x),(r&&r>=t.y||a&&a<=t.y)&&Kt(t,"y",t.y)}}function C0(t,e){return t.indexOf(e)!==-1}function P0(t,e,n){return e?{x:t.x-n.x,y:t.y-n.y}:{x:t.x,y:t.y}}var K6=1250;function El(t,e){var n=this;t.on(["resize.start"],function(r){n.initSnap(r)}),t.on(["resize.move","resize.end"],K6,function(r){var i=r.context,a=i.shape,o=a.parent,c=i.direction,l=i.snapContext;if(!(r.originalEvent&&dr(r.originalEvent))&&!ho(r)){var d=l.pointsForTarget(o);d.initialized||(d=n.addSnapTargetPoints(d,a,o,c),d.initialized=!0),X6(c)&&Kt(r,"x",r.x),J6(c)&&Kt(r,"y",r.y),e.snap(r,d)}}),t.on(["resize.cleanup"],function(){e.hide()})}El.prototype.initSnap=function(t){var e=t.context,n=e.shape,r=e.direction,i=e.snapContext;i||(i=e.snapContext=new ji);var a=fS(n,r);return i.setSnapOrigin("corner",{x:a.x-t.x,y:a.y-t.y}),i};El.prototype.addSnapTargetPoints=function(t,e,n,r){var i=this.getSnapTargets(e,n);return O(i,function(a){t.add("corner",SE(a)),t.add("corner",NE(a))}),t.add("corner",fS(e,r)),t};El.$inject=["eventBus","snapping"];El.prototype.getSnapTargets=function(t,e){return kE(e).filter(function(n){return!Y6(n,t)&&!jt(n)&&!Z6(n)&&!it(n)})};function fS(t,e){var n=Te(t),r=Ne(t),i={x:n.x,y:n.y};return e.indexOf("n")!==-1?i.y=r.top:e.indexOf("s")!==-1&&(i.y=r.bottom),e.indexOf("e")!==-1?i.x=r.right:e.indexOf("w")!==-1&&(i.x=r.left),i}function Y6(t,e){return t.host===e}function Z6(t){return!!t.hidden}function X6(t){return t==="n"||t==="s"}function J6(t){return t==="e"||t==="w"}var Q6=7,eF=1e3;function Ei(t){this._canvas=t,this._asyncHide=yC(Xi(this.hide,this),eF)}Ei.$inject=["canvas"];Ei.prototype.snap=function(t,e){var n=t.context,r=n.snapContext,i=r.getSnapLocations(),a={x:ho(t,"x"),y:ho(t,"y")};O(i,function(o){var c=r.getSnapOrigin(o),l={x:t.x+c.x,y:t.y+c.y};if(O(["x","y"],function(d){var u;a[d]||(u=e.snap(l,o,d,Q6),u!==void 0&&(a[d]={value:u,originValue:u-c[d]}))}),a.x&&a.y)return!1}),this.showSnapLine("vertical",a.x&&a.x.value),this.showSnapLine("horizontal",a.y&&a.y.value),O(["x","y"],function(o){var c=a[o];Es(c)&&Kt(t,o,c.originValue)})};Ei.prototype._createLine=function(t){var e=this._canvas.getLayer("snap"),n=ie("path");return q(n,{d:"M0,0 L0,0"}),St(n).add("djs-snap-line"),le(e,n),{update:function(r){et(r)?t==="horizontal"?q(n,{d:"M-100000,"+r+" L+100000,"+r,display:""}):q(n,{d:"M "+r+",-100000 L "+r+", +100000",display:""}):q(n,{display:"none"})}}};Ei.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};Ei.prototype.showSnapLine=function(t,e){var n=this.getSnapLine(t);n&&n.update(e),this._asyncHide()};Ei.prototype.getSnapLine=function(t){return this._snapLines||this._createSnapLines(),this._snapLines[t]};Ei.prototype.hide=function(){O(this._snapLines,function(t){t.update()})};const tF={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",ns],resizeSnapping:["type",El],snapping:["type",Ei]},nF={__depends__:[tF],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",uS],createMoveSnapping:["type",Po]};var mS=300;function Pe(t,e,n,r){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=t,this._eventBus=e,this._selection=n,this._translate=r,this._container=this._getBoxHtml(),this._searchInput=Yt(Pe.INPUT_SELECTOR,this._container),this._resultsContainer=Yt(Pe.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),e.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}Pe.$inject=["canvas","eventBus","selection","translate"];Pe.prototype._bindEvents=function(){var t=this;function e(n,r,i,a){t._eventMaps.push({el:n,type:i,listener:Rr.bind(n,r,i,a)})}e(document,"html","click",function(n){t.close(!1)}),e(this._container,Pe.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),e(this._container,Pe.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),t._scrollToNode(n.delegateTarget),t._preselect(n.delegateTarget)}),e(this._container,Pe.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),t._select(n.delegateTarget)}),e(this._container,Pe.INPUT_SELECTOR,"keydown",function(n){mn("ArrowUp",n)&&n.preventDefault(),mn("ArrowDown",n)&&n.preventDefault()}),e(this._container,Pe.INPUT_SELECTOR,"keyup",function(n){if(mn("Escape",n))return t.close();if(mn("Enter",n)){var r=t._getCurrentResult();return r?t._select(r):t.close(!1)}if(mn("ArrowUp",n))return t._scrollToDirection(!0);if(mn("ArrowDown",n))return t._scrollToDirection();mn(["ArrowLeft","ArrowRight"],n)||t._search(n.delegateTarget.value)})};Pe.prototype._unbindEvents=function(){this._eventMaps.forEach(function(t){Rr.unbind(t.el,t.type,t.listener)})};Pe.prototype._search=function(t){var e=this;if(this._clearResults(),!!t.trim()){var n=this._searchProvider.find(t);if(n=n.filter(function(i){return!e._canvas.getRootElements().includes(i.element)}),!n.length){this._selection.select(null);return}n.forEach(function(i){var a=i.element.id,o=e._createResultNode(i,a);e._results[a]={element:i.element,node:o}});var r=Yt(Pe.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(r),this._preselect(r)}};Pe.prototype._scrollToDirection=function(t){var e=this._getCurrentResult();if(e){var n=t?e.previousElementSibling:e.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};Pe.prototype._scrollToNode=function(t){if(!(!t||t===this._getCurrentResult())){var e=t.offsetTop,n=this._resultsContainer.scrollTop,r=e-this._resultsContainer.clientHeight+t.clientHeight;e<n?this._resultsContainer.scrollTop=e:n<r&&(this._resultsContainer.scrollTop=r)}};Pe.prototype._clearResults=function(){Iw(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};Pe.prototype._getCurrentResult=function(){return Yt(Pe.RESULT_SELECTED_SELECTOR,this._resultsContainer)};Pe.prototype._createResultNode=function(t,e){var n=vn(Pe.RESULT_HTML);return t.primaryTokens.length>0&&T0(n,t.primaryTokens,Pe.RESULT_PRIMARY_HTML),T0(n,t.secondaryTokens,Pe.RESULT_SECONDARY_HTML),In(n,Pe.RESULT_ID_ATTRIBUTE,e),this._resultsContainer.appendChild(n),n};Pe.prototype.registerProvider=function(t){this._searchProvider=t};Pe.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._selection.select(null),this._bindEvents(),this._open=!0,rn(this._canvas.getContainer()).add("djs-search-open"),rn(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};Pe.prototype.close=function(t=!0){this.isOpen()&&(t&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,rn(this._canvas.getContainer()).remove("djs-search-open"),rn(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"),this._canvas.restoreFocus())};Pe.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Pe.prototype.isOpen=function(){return this._open};Pe.prototype._preselect=function(t){var e=this._getCurrentResult();if(t!==e){e&&rn(e).remove(Pe.RESULT_SELECTED_CLASS);var n=In(t,Pe.RESULT_ID_ATTRIBUTE),r=this._results[n].element;rn(t).add(Pe.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(r,{top:mS}),this._selection.select(r),this._eventBus.fire("searchPad.preselected",r)}};Pe.prototype._select=function(t){var e=In(t,Pe.RESULT_ID_ATTRIBUTE),n=this._results[e].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:mS}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};Pe.prototype._getBoxHtml=function(){const t=vn(Pe.BOX_HTML),e=Yt(Pe.INPUT_SELECTOR,t);return e&&e.setAttribute("aria-label",this._translate("Search in diagram")),t};function T0(t,e,n){var r=rF(e),i=vn(n);i.innerHTML=r,t.appendChild(i)}function rF(t){var e="";return t.forEach(function(n){var r=bC(n.value||n.matched||n.normal),i=n.match||n.matched;i?e+='<b class="'+Pe.RESULT_HIGHLIGHT_CLASS+'">'+r+"</b>":e+=r}),e!==""?e:null}Pe.CONTAINER_SELECTOR=".djs-search-container";Pe.INPUT_SELECTOR=".djs-search-input input";Pe.RESULTS_CONTAINER_SELECTOR=".djs-search-results";Pe.RESULT_SELECTOR=".djs-search-result";Pe.RESULT_SELECTED_CLASS="djs-search-result-selected";Pe.RESULT_SELECTED_SELECTOR="."+Pe.RESULT_SELECTED_CLASS;Pe.RESULT_ID_ATTRIBUTE="data-result-id";Pe.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";Pe.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;Pe.RESULT_HTML='<div class="djs-search-result"></div>';Pe.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';Pe.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const sF={__depends__:[Mw,_w,Jr],searchPad:["type",Pe]};function gv(t,e,n,r){this._elementRegistry=t,this._canvas=n,this._search=r,e.registerProvider(this)}gv.$inject=["elementRegistry","searchPad","canvas","search"];gv.prototype.find=function(t){var e=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(r){return!it(r)&&!e.includes(r)});return this._search(n.map(r=>({element:r,label:Ji(r),id:r.id})),t,{keys:["label","id"]}).map(iF)};function iF(t){const{item:{element:e},tokens:n}=t;return{element:e,primaryTokens:n.label,secondaryTokens:n.id}}const aF={__depends__:[sF,iE],__init__:["bpmnSearch"],bpmnSearch:["type",gv]},oF="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",cF="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",lF={width:36,height:50},dF={width:50,height:50};function R0(t,e,n){return ie("path",{d:t,strokeWidth:2,transform:`translate(${e.x}, ${e.y})`,...n})}const Js=5;function vh(t,e){this._styles=e,t.registerProvider(this)}vh.$inject=["outline","styles"];vh.prototype.getOutline=function(t){const e=this._styles.cls("djs-outline",["no-fill"]);var n;if(!it(t))return _(t,"bpmn:Gateway")?(n=ie("rect"),B(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),q(n,B({x:2,y:2,rx:4,width:t.width-4,height:t.height-4},e))):ze(t,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=ie("rect"),q(n,B({x:-Js,y:-Js,rx:14,width:t.width+Js*2,height:t.height+Js*2},e))):_(t,"bpmn:EndEvent")?(n=ie("circle"),q(n,B({cx:t.width/2,cy:t.height/2,r:t.width/2+Js+1},e))):_(t,"bpmn:Event")?(n=ie("circle"),q(n,B({cx:t.width/2,cy:t.height/2,r:t.width/2+Js},e))):_(t,"bpmn:DataObjectReference")&&A0(t,"bpmn:DataObjectReference")?n=R0(oF,{x:-6,y:-6},e):_(t,"bpmn:DataStoreReference")&&A0(t,"bpmn:DataStoreReference")&&(n=R0(cF,{x:-6,y:-6},e)),n};vh.prototype.updateOutline=function(t,e){if(!it(t))return ze(t,["bpmn:SubProcess","bpmn:Group"])?(q(e,{width:t.width+Js*2,height:t.height+Js*2}),!0):!!ze(t,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function A0(t,e){var n;return e==="bpmn:DataObjectReference"?n=lF:e==="bpmn:DataStoreReference"&&(n=dF),t.width===n.width&&t.height===n.height}const uF={__depends__:[rS],__init__:["outlineProvider"],outlineProvider:["type",vh]};var hF='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Mr(t){nl.call(this,t)}ve(Mr,nl);Mr.Viewer=Wc;Mr.NavigatedViewer=Ac;Mr.prototype.createDiagram=function(){return this.importXML(hF)};Mr.prototype._interactionModules=[R1,D1,L1];Mr.prototype._modelingModules=[c4,tg,R4,N4,X4,ag,rO,dB,xN,Xu,fB,vB,MB,OB,$B,UB,e6,zN,o6,x6,C6,T6,QN,nF,aF,uF];Mr.prototype._modules=[].concat(Wc.prototype._modules,Mr.prototype._interactionModules,Mr.prototype._modelingModules);const pF=100,fF=60;class mF extends wC{constructor(n,r,i){super(n,5e3);zo(this,"bpmnRenderer");zo(this,"styles");zo(this,"_createDefs",!1);zo(this,"isPidMode",!1);this.bpmnRenderer=r,this.styles=i||{},this._createDefs=!1,this.isPidMode=!1,n.on("import.done",()=>{var o,c;const a=(o=r==null?void 0:r.get)==null?void 0:o.call(r,"canvas",!1);if(a){a.getRootElement();const l=(c=r==null?void 0:r.get)==null?void 0:c.call(r,"elementRegistry",!1);if(l){const u=l.getAll().some(h=>{const p=h.businessObject;if(!p)return!1;const f=p.$attrs||{};return!!(f["pid:symbol"]||f["pid:type"]||f["pid:category"])});this.isPidMode=u}}}),n.on("canvas.viewbox.changed",({element:a})=>{})}canRender(n){var u,h;const r=n.businessObject;if(!r||n.type==="label"||(u=n.id)!=null&&u.includes("_label")||(h=n.id)!=null&&h.includes("_di"))return!1;if(!this.isPidMode){const p=r.$attrs||{};return!!(p["pid:symbol"]||p["pid:type"]||p["pid:category"])}const i=r.name||"",a=(n.type||"").toLowerCase(),o=r.$attrs||{},c=!!(o["pid:symbol"]||o["pid:type"]||o["pid:category"]),l=a.includes("task")||a.includes("exclusivegateway")||a.includes("dataobjectreference")||a.includes("subprocess")||a.includes("startevent"),d=a.includes("sequenceflow")||a.includes("messageflow");return!!(c||l&&i||d)}drawShape(n,r){const i=r.businessObject,a=(i==null?void 0:i.$attrs)||{};let o=a["pid:symbol"]||"unknown";if(a["pid:category"],o==="unknown"&&this.isPidMode){const u=((i==null?void 0:i.name)||"").toLowerCase(),h=r.type||"";u.includes("tank")||u.includes("vessel")||u.includes("drum")?o="tank":u.includes("pump")?o="pump":u.includes("filter")?o="filter":u.includes("valve")?o=h.includes("Gateway")?"valve_control":"valve_gate":u.includes("transmitter")||u.includes("transducer")?u.includes("level")?o="transmitter_level":u.includes("flow")?o="transmitter_flow":u.includes("pressure")?o="transmitter_pressure":o="transmitter_level":u.includes("controller")?o="controller_pid":u.includes("analyzer")?o="analyzer":(u.includes("exchanger")||u.includes("heater")||u.includes("cooler"))&&(o="heat_exchanger"),o.includes("transmitter")||o.includes("analyzer")}this._ensureDefs(n);const c=ie("g");q(c,{class:"pid-renderer-group"}),le(n,c),setTimeout(()=>{Array.from(n.children).forEach(u=>{if(u!==c&&u.tagName==="g"){const h=u.querySelector(".djs-visual")||u;h&&!h.classList.contains("pid-renderer-group")&&h.setAttribute("style","display: none !important;")}})},0);const l=r.width&&r.width>0?r.width:pF,d=r.height&&r.height>0?r.height:fF;switch(o){case"tank":case"mixing_tank":case"storage_tank":this._drawTank(c,l,d);break;case"pump":case"pump_centrifugal":this._drawPump(c,l,d);break;case"filter":case"separator":this._drawFilter(c,l,d);break;case"heat_exchanger":case"condenser":this._drawHeatExchanger(c,l,d);break;case"reactor":this._drawRectWithDoubleLine(c,l,d);break;case"valve_control":case"valve_gate":case"valve_globe":case"valve_ball":case"valve_butterfly":case"valve_check":case"valve_pressure_relief":case"valve_solenoid":case"valve_diaphragm":case"valve_manual":this._drawValve(c,l,d,o);break;case"transmitter_temp":case"transmitter_pressure":case"transmitter_flow":case"transmitter_level":case"transmitter_analyzer":case"indicator_temp":case"indicator_pressure":case"indicator_flow":case"indicator_level":case"flow_meter":case"pressure_gauge":this._drawInstrument(c,l,d,o);break;case"controller_pid":case"controller_plc":case"controller_dcs":case"controller_local":case"controller_remote":case"controller_manual":this._drawController(c,l,d,o);break;case"actuator_electric":case"actuator_pneumatic":case"actuator_hydraulic":case"motor":case"fan":this._drawActuator(c,l,d,o);break;case"junction":case"tee_connection":case"analyzer_chamber":case"relay":case"control_panel":case"display":case"instrument_bubble":this._drawSmallSymbol(c,l,d,o);break;default:if(this.isPidMode)this._drawRoundedRect(c,l,d,{fill:"#e8f4f8",stroke:"#333",rx:8});else return this.bpmnRenderer.drawShape(n,r)}if(i&&i.name){const u=ie("text");q(u,{x:l/2,y:d+14,"text-anchor":"middle","font-family":"Arial, Helvetica, sans-serif","font-size":"12px",fill:"#222","font-weight":"normal"}),u.textContent=i.name,le(c,u)}return c}drawConnection(n,r){const i=r.businessObject,a=(i==null?void 0:i.$attrs)&&i.$attrs["pid:category"]||"process",o=(i==null?void 0:i.$attrs)&&i.$attrs["pid:style"]||"",c=a==="signal"?"#999":a==="electrical"?"#666":"#000",l=o==="dashed"||a==="signal"?"4 3":a==="electrical"?"2 2":null;this._ensureDefs(n);const d=ie("path");if(r.waypoints&&r.waypoints.length>0){const u=r.waypoints.map((h,p)=>p===0?`M ${h.x} ${h.y}`:`L ${h.x} ${h.y}`).join(" ");q(d,{d:u})}else q(d,{d:"M0 0 L10 10"});return q(d,{stroke:c,"stroke-width":1.5,fill:"none"}),l&&q(d,{"stroke-dasharray":l}),a==="process"?q(d,{"marker-end":"url(#pid-arrow)"}):q(d,{"marker-end":"url(#pid-arrow-small)"}),le(n,d),d}_drawRoundedRect(n,r,i,a={}){const o=ie("rect");return q(o,{x:0,y:0,width:r,height:i,rx:a.rx||10,ry:a.rx||10,fill:a.fill||"#b3d9ff",stroke:a.stroke||"#333","stroke-width":a.strokeWidth||2}),le(n,o),o}_drawRectWithDoubleLine(n,r,i){this._drawRoundedRect(n,r,i,{fill:"#fff",stroke:"#333",rx:4,strokeWidth:2});const a=ie("rect");q(a,{x:6,y:6,width:r-12,height:i-12,rx:3,stroke:"#333","stroke-width":1,fill:"none"}),le(n,a)}_drawPump(n,r,i){const a=Math.min(r,i)*.35,o=a+8,c=i/2,l=ie("circle");q(l,{cx:o,cy:c,r:a,stroke:"#333","stroke-width":2,fill:"#e6f2ff"}),le(n,l);const d=ie("polygon"),u=o+a*.2,h=c-8,p=c+8;q(d,{points:`${u},${c} ${u+22},${h} ${u+22},${p}`,fill:"#333"}),le(n,d)}_drawTank(n,r,i){const a=r*.15,o=i*.15,c=ie("rect");q(c,{x:a,y:o,width:r-2*a,height:i-2*o,fill:"#b3d9ff",stroke:"#333","stroke-width":2}),le(n,c);const l=ie("ellipse");q(l,{cx:r/2,cy:o,rx:a,ry:o,fill:"#b3d9ff",stroke:"#333","stroke-width":2}),le(n,l);const d=ie("ellipse");q(d,{cx:r/2,cy:i-o,rx:a,ry:o*.7,fill:"#b3d9ff",stroke:"#333","stroke-width":2}),le(n,d);const u=ie("line");q(u,{x1:a+5,y1:i*.6,x2:r-a-5,y2:i*.6,stroke:"#666","stroke-width":1,"stroke-dasharray":"3 3"}),le(n,u)}_drawFilter(n,r,i){const a=ie("rect");q(a,{x:0,y:0,width:r,height:i,rx:6,fill:"#eaf7ea",stroke:"#333","stroke-width":2}),le(n,a);const o=5,c=r/(o+1);for(let l=1;l<=o;l++){const d=c*l,u=ie("line");q(u,{x1:d-8,y1:8,x2:d+8,y2:i-8,stroke:"#333","stroke-width":1.5}),le(n,u)}}_drawHeatExchanger(n,r,i){const a=Math.min(r,i)*.22,o=a+8,c=r-a-8,l=i/2,d=ie("circle");q(d,{cx:o,cy:l,r:a,stroke:"#333","stroke-width":1.5,fill:"#fff"}),le(n,d);const u=ie("circle");q(u,{cx:c,cy:l,r:a,stroke:"#333","stroke-width":1.5,fill:"#fff"}),le(n,u);const h=ie("line");q(h,{x1:o+a,y1:l,x2:c-a,y2:l,stroke:"#333","stroke-width":1.2}),le(n,h)}_drawValve(n,r,i,a){const o=Math.min(r,i)*.6,c=r/2,l=i/2,d=o/2,u=`${c},${l-d} ${c+d},${l} ${c},${l+d} ${c-d},${l}`,h=ie("polygon");if(q(h,{points:u,stroke:"#000","stroke-width":2,fill:"none"}),le(n,h),a==="valve_control"){const p=ie("line");q(p,{x1:c-d*.6,y1:l-d*.6,x2:c+d*.6,y2:l+d*.6,stroke:"#000","stroke-width":2}),le(n,p);const f=ie("line");q(f,{x1:c+d*.6,y1:l-d*.6,x2:c-d*.6,y2:l+d*.6,stroke:"#000","stroke-width":2}),le(n,f)}else if(a==="valve_check"){const p=ie("path");q(p,{d:`M ${c-d*.4} ${l} q ${d*.4} ${-d*.4} ${d*.8} 0`,stroke:"#000","stroke-width":1.8,fill:"none"}),le(n,p)}else if(a==="valve_gate"){const p=ie("line");q(p,{x1:c,y1:l-d,x2:c,y2:l+d,stroke:"#000","stroke-width":1.6}),le(n,p)}else{const p=ie("circle");q(p,{cx:c,cy:l,r:Math.max(3,d*.25),fill:"#000"}),le(n,p)}}_drawInstrument(n,r,i,a){const o=Math.min(20,Math.min(r,i)*.25),c=o+4,l=i/2,d=ie("circle");if(q(d,{cx:c,cy:l,r:o,stroke:"#333","stroke-width":1.2,fill:"#fff"}),le(n,d),a==="transmitter_analyzer"){const u=ie("rect");q(u,{x:c-o/2,y:l-o/2,width:o,height:o,rx:2,stroke:"#333","stroke-width":1,fill:"#fff"}),le(n,u)}else if(a==="flow_meter"){const u=ie("line");q(u,{x1:c-o+2,y1:l,x2:c+o-2,y2:l,stroke:"#333","stroke-width":1.2}),le(n,u)}else if(a==="pressure_gauge"){const u=ie("line");q(u,{x1:c,y1:l,x2:c+o*.6,y2:l-o*.4,stroke:"#333","stroke-width":1.2}),le(n,u)}}_drawController(n,r,i,a){const o=ie("rect");q(o,{x:0,y:0,width:r,height:i,rx:8,stroke:"#333","stroke-width":1.6,fill:"#f9f9f9"}),le(n,o);const c=r/2-18,l=i/2;for(let d=0;d<3;d++){const u=ie("line");q(u,{x1:c+d*12,y1:l-8,x2:c+d*12,y2:l+8,stroke:"#333","stroke-width":1}),le(n,u)}}_drawActuator(n,r,i,a){if(a==="motor"){const o=r/2,c=i/2,l=Math.min(r,i)*.28,d=ie("circle");q(d,{cx:o,cy:c,r:l,stroke:"#333","stroke-width":1.6,fill:"#fff"}),le(n,d);const u=ie("text");q(u,{x:o,y:c+5,"text-anchor":"middle","font-size":"12px",fill:"#333"}),u.textContent="M",le(n,u)}else a==="actuator_pneumatic"?this._drawRoundedRect(n,r*.8,i*.5,{fill:"#fff",stroke:"#333",rx:6}):this._drawSmallSymbol(n,r,i,a)}_drawSmallSymbol(n,r,i,a){const o=r/2,c=i/2;if(a==="junction"||a==="tee_connection"){const l=ie("circle");q(l,{cx:o,cy:c,r:4,fill:"#333"}),le(n,l)}else if(a==="analyzer_chamber"){const l=ie("rect");q(l,{x:o-12,y:c-10,width:24,height:20,rx:4,stroke:"#333",fill:"#fff"}),le(n,l)}else{const l=ie("circle");q(l,{cx:o,cy:c,r:8,stroke:"#333",fill:"#fff"}),le(n,l)}}_ensureDefs(n){let r=n;for(;r&&r.nodeName&&r.nodeName.toLowerCase()!=="svg";)r=r.parentNode;if(!r||this._createDefs)return;const i=ie("defs"),a=ie("marker");q(a,{id:"pid-arrow",markerWidth:10,markerHeight:10,refX:8,refY:3.5,orient:"auto",markerUnits:"strokeWidth"});const o=ie("path");q(o,{d:"M0,0 L8,3.5 L0,7 Z",fill:"#000"}),le(a,o),le(i,a);const c=ie("marker");q(c,{id:"pid-arrow-small",markerWidth:8,markerHeight:8,refX:6,refY:3,orient:"auto",markerUnits:"strokeWidth"});const l=ie("path");q(l,{d:"M0,0 L6,3 L0,6 Z",fill:"#666"}),le(c,l),le(i,c),le(r,i),this._createDefs=!0}}const gF={__init__:["pidRenderer"],pidRenderer:["type",["eventBus","bpmnRenderer",mF]]},Ii=zk,Mi=Uk,vF=v.forwardRef(({className:t,inset:e,children:n,...r},i)=>s.jsxs(hw,{ref:i,className:Y("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...r,children:[n,s.jsx(_c,{className:"ml-auto h-4 w-4"})]}));vF.displayName=hw.displayName;const xF=v.forwardRef(({className:t,...e},n)=>s.jsx(pw,{ref:n,className:Y("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));xF.displayName=pw.displayName;const Zs=v.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(Fk,{children:s.jsx(fw,{ref:r,sideOffset:e,className:Y("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Zs.displayName=fw.displayName;const It=v.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(mw,{ref:r,className:Y("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...n}));It.displayName=mw.displayName;const yF=v.forwardRef(({className:t,children:e,checked:n,...r},i)=>s.jsxs(gw,{ref:i,className:Y("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(vw,{children:s.jsx(ar,{className:"h-4 w-4"})})}),e]}));yF.displayName=gw.displayName;const bF=v.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(xw,{ref:r,className:Y("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(vw,{children:s.jsx(oP,{className:"h-2 w-2 fill-current"})})}),e]}));bF.displayName=xw.displayName;const wd=v.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(yw,{ref:r,className:Y("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));wd.displayName=yw.displayName;const Ia=v.forwardRef(({className:t,...e},n)=>s.jsx(bw,{ref:n,className:Y("-mx-1 my-1 h-px bg-muted",t),...e}));Ia.displayName=bw.displayName;var xh="Collapsible",[wF,gS]=pr(xh),[_F,vv]=wF(xh),vS=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...c}=t,[l,d]=Dr({prop:r,defaultProp:i??!1,onChange:o,caller:xh});return s.jsx(_F,{scope:n,disabled:a,contentId:go(),open:l,onOpenToggle:v.useCallback(()=>d(u=>!u),[d]),children:s.jsx(Me.div,{"data-state":yv(l),"data-disabled":a?"":void 0,...c,ref:e})})});vS.displayName=xh;var xS="CollapsibleTrigger",yS=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=vv(xS,n);return s.jsx(Me.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":yv(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:Re(t.onClick,i.onOpenToggle)})});yS.displayName=xS;var xv="CollapsibleContent",bS=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=vv(xv,t.__scopeCollapsible);return s.jsx(ui,{present:n||i.open,children:({present:a})=>s.jsx(jF,{...r,ref:e,present:a})})});bS.displayName=xv;var jF=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=t,o=vv(xv,n),[c,l]=v.useState(r),d=v.useRef(null),u=Ot(e,d),h=v.useRef(0),p=h.current,f=v.useRef(0),m=f.current,x=o.open||c,g=v.useRef(x),w=v.useRef(void 0);return v.useEffect(()=>{const y=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(y)},[]),Hn(()=>{const y=d.current;if(y){w.current=w.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const b=y.getBoundingClientRect();h.current=b.height,f.current=b.width,g.current||(y.style.transitionDuration=w.current.transitionDuration,y.style.animationName=w.current.animationName),l(r)}},[o.open,r]),s.jsx(Me.div,{"data-state":yv(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...a,ref:u,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...t.style},children:x&&i})});function yv(t){return t?"open":"closed"}var EF=vS,NF=yS,SF=bS,Lr="Accordion",kF=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[bv,CF,PF]=Kf(Lr),[yh,b9]=pr(Lr,[PF,gS]),wv=gS(),wS=V.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,a=r;return s.jsx(bv.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?s.jsx(IF,{...a,ref:e}):s.jsx(AF,{...i,ref:e})})});wS.displayName=Lr;var[_S,TF]=yh(Lr),[jS,RF]=yh(Lr,{collapsible:!1}),AF=V.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...o}=t,[c,l]=Dr({prop:n,defaultProp:r??"",onChange:i,caller:Lr});return s.jsx(_S,{scope:t.__scopeAccordion,value:V.useMemo(()=>c?[c]:[],[c]),onItemOpen:l,onItemClose:V.useCallback(()=>a&&l(""),[a,l]),children:s.jsx(jS,{scope:t.__scopeAccordion,collapsible:a,children:s.jsx(ES,{...o,ref:e})})})}),IF=V.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=t,[o,c]=Dr({prop:n,defaultProp:r??[],onChange:i,caller:Lr}),l=V.useCallback(u=>c((h=[])=>[...h,u]),[c]),d=V.useCallback(u=>c((h=[])=>h.filter(p=>p!==u)),[c]);return s.jsx(_S,{scope:t.__scopeAccordion,value:o,onItemOpen:l,onItemClose:d,children:s.jsx(jS,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(ES,{...a,ref:e})})})}),[MF,bh]=yh(Lr),ES=V.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...o}=t,c=V.useRef(null),l=Ot(c,e),d=CF(n),h=Vc(i)==="ltr",p=Re(t.onKeyDown,f=>{var P;if(!kF.includes(f.key))return;const m=f.target,x=d().filter(T=>{var L;return!((L=T.ref.current)!=null&&L.disabled)}),g=x.findIndex(T=>T.ref.current===m),w=x.length;if(g===-1)return;f.preventDefault();let y=g;const b=0,j=w-1,C=()=>{y=g+1,y>j&&(y=b)},N=()=>{y=g-1,y<b&&(y=j)};switch(f.key){case"Home":y=b;break;case"End":y=j;break;case"ArrowRight":a==="horizontal"&&(h?C():N());break;case"ArrowDown":a==="vertical"&&C();break;case"ArrowLeft":a==="horizontal"&&(h?N():C());break;case"ArrowUp":a==="vertical"&&N();break}const k=y%w;(P=x[k].ref.current)==null||P.focus()});return s.jsx(MF,{scope:n,disabled:r,direction:i,orientation:a,children:s.jsx(bv.Slot,{scope:n,children:s.jsx(Me.div,{...o,"data-orientation":a,ref:l,onKeyDown:r?void 0:p})})})}),Yd="AccordionItem",[DF,_v]=yh(Yd),NS=V.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,a=bh(Yd,n),o=TF(Yd,n),c=wv(n),l=go(),d=r&&o.value.includes(r)||!1,u=a.disabled||t.disabled;return s.jsx(DF,{scope:n,open:d,disabled:u,triggerId:l,children:s.jsx(EF,{"data-orientation":a.orientation,"data-state":RS(d),...c,...i,ref:e,disabled:u,open:d,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});NS.displayName=Yd;var SS="AccordionHeader",kS=V.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=bh(Lr,n),a=_v(SS,n);return s.jsx(Me.h3,{"data-orientation":i.orientation,"data-state":RS(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});kS.displayName=SS;var Bf="AccordionTrigger",CS=V.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=bh(Lr,n),a=_v(Bf,n),o=RF(Bf,n),c=wv(n);return s.jsx(bv.ItemSlot,{scope:n,children:s.jsx(NF,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...c,...r,ref:e})})});CS.displayName=Bf;var PS="AccordionContent",TS=V.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=bh(Lr,n),a=_v(PS,n),o=wv(n);return s.jsx(SF,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});TS.displayName=PS;function RS(t){return t?"open":"closed"}var OF=wS,$F=NS,LF=kS,AS=CS,IS=TS;const Ff=OF,Ma=v.forwardRef(({className:t,...e},n)=>s.jsx($F,{ref:n,className:Y("border-b",t),...e}));Ma.displayName="AccordionItem";const Da=v.forwardRef(({className:t,children:e,...n},r)=>s.jsx(LF,{className:"flex",children:s.jsxs(AS,{ref:r,className:Y("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,s.jsx(um,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Da.displayName=AS.displayName;const Oa=v.forwardRef(({className:t,children:e,...n},r)=>s.jsx(IS,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:Y("pb-4 pt-0",t),children:e})}));Oa.displayName=IS.displayName;const MS=v.forwardRef(({...t},e)=>s.jsx("nav",{ref:e,"aria-label":"breadcrumb",...t}));MS.displayName="Breadcrumb";const DS=v.forwardRef(({className:t,...e},n)=>s.jsx("ol",{ref:n,className:Y("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...e}));DS.displayName="BreadcrumbList";const _d=v.forwardRef(({className:t,...e},n)=>s.jsx("li",{ref:n,className:Y("inline-flex items-center gap-1.5",t),...e}));_d.displayName="BreadcrumbItem";const zf=v.forwardRef(({asChild:t,className:e,...n},r)=>{const i=t?ow:"a";return s.jsx(i,{ref:r,className:Y("transition-colors hover:text-foreground",e),...n})});zf.displayName="BreadcrumbLink";const OS=v.forwardRef(({className:t,...e},n)=>s.jsx("span",{ref:n,role:"link","aria-disabled":"true","aria-current":"page",className:Y("font-normal text-foreground",t),...e}));OS.displayName="BreadcrumbPage";const Uf=({children:t,className:e,...n})=>s.jsx("li",{role:"presentation","aria-hidden":"true",className:Y("[&>svg]:size-3.5",e),...n,children:t??s.jsx(_c,{})});Uf.displayName="BreadcrumbSeparator";function $S(t){const e=v.useRef({value:t,previous:t});return v.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var wh="Switch",[BF,w9]=pr(wh),[FF,zF]=BF(wh),LS=v.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:l="on",onCheckedChange:d,form:u,...h}=t,[p,f]=v.useState(null),m=Ot(e,b=>f(b)),x=v.useRef(!1),g=p?u||!!p.closest("form"):!0,[w,y]=Dr({prop:i,defaultProp:a??!1,onChange:d,caller:wh});return s.jsxs(FF,{scope:n,checked:w,disabled:c,children:[s.jsx(Me.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":US(w),"data-disabled":c?"":void 0,disabled:c,value:l,...h,ref:m,onClick:Re(t.onClick,b=>{y(j=>!j),g&&(x.current=b.isPropagationStopped(),x.current||b.stopPropagation())})}),g&&s.jsx(zS,{control:p,bubbles:!x.current,name:r,value:l,checked:w,required:o,disabled:c,form:u,style:{transform:"translateX(-100%)"}})]})});LS.displayName=wh;var BS="SwitchThumb",FS=v.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=zF(BS,n);return s.jsx(Me.span,{"data-state":US(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});FS.displayName=BS;var UF="SwitchBubbleInput",zS=v.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},a)=>{const o=v.useRef(null),c=Ot(o,a),l=$S(n),d=Hk(e);return v.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&f){const m=new Event("click",{bubbles:r});f.call(u,n),u.dispatchEvent(m)}},[l,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:c,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});zS.displayName=UF;function US(t){return t?"checked":"unchecked"}var HS=LS,HF=FS;const bs=v.forwardRef(({className:t,...e},n)=>s.jsx(HS,{className:Y("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:s.jsx(HF,{className:Y("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));bs.displayName=HS.displayName;var VS="AlertDialog",[VF,_9]=pr(VS,[ww]),Ds=ww(),GS=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ds(e);return s.jsx(Zf,{...r,...n,modal:!0})};GS.displayName=VS;var GF="AlertDialogTrigger",WF=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ds(n);return s.jsx(cw,{...i,...r,ref:e})});WF.displayName=GF;var qF="AlertDialogPortal",WS=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ds(e);return s.jsx(Yf,{...r,...n})};WS.displayName=qF;var KF="AlertDialogOverlay",qS=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ds(n);return s.jsx(Fc,{...i,...r,ref:e})});qS.displayName=KF;var za="AlertDialogContent",[YF,ZF]=VF(za),XF=aw("AlertDialogContent"),KS=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,a=Ds(n),o=v.useRef(null),c=Ot(e,o),l=v.useRef(null);return s.jsx(Vk,{contentName:za,titleName:YS,docsSlug:"alert-dialog",children:s.jsx(YF,{scope:n,cancelRef:l,children:s.jsxs(zc,{role:"alertdialog",...a,...i,ref:c,onOpenAutoFocus:Re(i.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(XF,{children:r}),s.jsx(QF,{contentRef:o})]})})})});KS.displayName=za;var YS="AlertDialogTitle",ZS=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ds(n);return s.jsx(Uc,{...i,...r,ref:e})});ZS.displayName=YS;var XS="AlertDialogDescription",JS=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ds(n);return s.jsx(Hc,{...i,...r,ref:e})});JS.displayName=XS;var JF="AlertDialogAction",QS=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ds(n);return s.jsx(eu,{...i,...r,ref:e})});QS.displayName=JF;var e2="AlertDialogCancel",t2=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=ZF(e2,n),a=Ds(n),o=Ot(e,i);return s.jsx(eu,{...a,...r,ref:o})});t2.displayName=e2;var QF=({contentRef:t})=>{const e=`\`${za}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${za}\` by passing a \`${XS}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${za}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},e8=GS,t8=WS,n2=qS,r2=KS,s2=QS,i2=t2,a2=ZS,o2=JS;const jv=e8,n8=t8,c2=v.forwardRef(({className:t,...e},n)=>s.jsx(n2,{className:Y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));c2.displayName=n2.displayName;const _h=v.forwardRef(({className:t,...e},n)=>s.jsxs(n8,{children:[s.jsx(c2,{}),s.jsx(r2,{ref:n,className:Y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));_h.displayName=r2.displayName;const jh=({className:t,...e})=>s.jsx("div",{className:Y("flex flex-col space-y-2 text-center sm:text-left",t),...e});jh.displayName="AlertDialogHeader";const Eh=({className:t,...e})=>s.jsx("div",{className:Y("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Eh.displayName="AlertDialogFooter";const Nh=v.forwardRef(({className:t,...e},n)=>s.jsx(a2,{ref:n,className:Y("text-lg font-semibold",t),...e}));Nh.displayName=a2.displayName;const Sh=v.forwardRef(({className:t,...e},n)=>s.jsx(o2,{ref:n,className:Y("text-sm text-muted-foreground",t),...e}));Sh.displayName=o2.displayName;const kh=v.forwardRef(({className:t,...e},n)=>s.jsx(s2,{ref:n,className:Y(Nm(),t),...e}));kh.displayName=s2.displayName;const Ch=v.forwardRef(({className:t,...e},n)=>s.jsx(i2,{ref:n,className:Y(Nm({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Ch.displayName=i2.displayName;var l2="Toggle",Ev=v.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:i,...a}=t,[o,c]=Dr({prop:n,onChange:i,defaultProp:r??!1,caller:l2});return s.jsx(Me.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":t.disabled?"":void 0,...a,ref:e,onClick:Re(t.onClick,()=>{t.disabled||c(!o)})})});Ev.displayName=l2;var d2=Ev,Ni="ToggleGroup",[u2,j9]=pr(Ni,[tu]),h2=tu(),Nv=V.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const i=r;return s.jsx(r8,{...i,ref:e})}if(n==="multiple"){const i=r;return s.jsx(s8,{...i,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${Ni}\``)});Nv.displayName=Ni;var[p2,f2]=u2(Ni),r8=V.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=t,[o,c]=Dr({prop:n,defaultProp:r??"",onChange:i,caller:Ni});return s.jsx(p2,{scope:t.__scopeToggleGroup,type:"single",value:V.useMemo(()=>o?[o]:[],[o]),onItemActivate:c,onItemDeactivate:V.useCallback(()=>c(""),[c]),children:s.jsx(m2,{...a,ref:e})})}),s8=V.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=t,[o,c]=Dr({prop:n,defaultProp:r??[],onChange:i,caller:Ni}),l=V.useCallback(u=>c((h=[])=>[...h,u]),[c]),d=V.useCallback(u=>c((h=[])=>h.filter(p=>p!==u)),[c]);return s.jsx(p2,{scope:t.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:l,onItemDeactivate:d,children:s.jsx(m2,{...a,ref:e})})});Nv.displayName=Ni;var[i8,a8]=u2(Ni),m2=V.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:a,dir:o,loop:c=!0,...l}=t,d=h2(n),u=Vc(o),h={role:"group",dir:u,...l};return s.jsx(i8,{scope:n,rovingFocus:i,disabled:r,children:i?s.jsx(dw,{asChild:!0,...d,orientation:a,dir:u,loop:c,children:s.jsx(Me.div,{...h,ref:e})}):s.jsx(Me.div,{...h,ref:e})})}),Zd="ToggleGroupItem",g2=V.forwardRef((t,e)=>{const n=f2(Zd,t.__scopeToggleGroup),r=a8(Zd,t.__scopeToggleGroup),i=h2(t.__scopeToggleGroup),a=n.value.includes(t.value),o=r.disabled||t.disabled,c={...t,pressed:a,disabled:o},l=V.useRef(null);return r.rovingFocus?s.jsx(uw,{asChild:!0,...i,focusable:!o,active:a,ref:l,children:s.jsx(I0,{...c,ref:e})}):s.jsx(I0,{...c,ref:e})});g2.displayName=Zd;var I0=V.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,a=f2(Zd,n),o={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},c=a.type==="single"?o:void 0;return s.jsx(Ev,{...c,...i,ref:e,onPressedChange:l=>{l?a.onItemActivate(r):a.onItemDeactivate(r)}})}),v2=Nv,x2=g2;const y2=vo("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),o8=v.forwardRef(({className:t,variant:e,size:n,...r},i)=>s.jsx(d2,{ref:i,className:Y(y2({variant:e,size:n,className:t})),...r}));o8.displayName=d2.displayName;const b2=v.createContext({size:"default",variant:"default"}),w2=v.forwardRef(({className:t,variant:e,size:n,children:r,...i},a)=>s.jsx(v2,{ref:a,className:Y("flex items-center justify-center gap-1",t),...i,children:s.jsx(b2.Provider,{value:{variant:e,size:n},children:r})}));w2.displayName=v2.displayName;const _2=v.forwardRef(({className:t,children:e,variant:n,size:r,...i},a)=>{const o=v.useContext(b2);return s.jsx(x2,{ref:a,className:Y(y2({variant:o.variant||n,size:o.size||r}),t),...i,children:e})});_2.displayName=x2.displayName;const c8=t=>{if(!t)return"";const e=[];let n=t;for(;n&&n.nodeType===1;){const r=n.tagName.toLowerCase();let i=1,a=!1;if(n.parentNode){const o=n.parentNode.childNodes;let c=0;for(let l=0;l<o.length;l++){const d=o[l];d.nodeType===1&&d.tagName===n.tagName&&(c+=1,d===n?(i=c,c>1&&(a=!0)):a=!0)}}e.unshift(a?`${r}[${i}]`:r),n=n.parentElement}return`/${e.join("/")}`},M0=(t,e=280)=>{if(!t)return;const n=t.replace(/\s+/g," ").trim();if(n)return n.length>e?`${n.slice(0,e)}...`:n},Rp=async t=>{const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(a=>a.toString(16).padStart(2,"0")).join("")},l8=(t,e)=>{try{const r=new DOMParser().parseFromString(t,"application/xml");if(r.getElementsByTagName("parsererror").length>0)return e==="pid"?"Instrumentation and equipment interactions.":"Business process from start to finish.";const i=["bpmn:task","bpmn:userTask","bpmn:serviceTask","bpmn:manualTask","bpmn:sendTask","bpmn:receiveTask","bpmn:scriptTask","bpmn:businessRuleTask","bpmn:callActivity","task","userTask","serviceTask","manualTask","sendTask","receiveTask","scriptTask","businessRuleTask","callActivity"],a=[];if(i.forEach(u=>{const h=r.getElementsByTagName(u);for(let p=0;p<h.length;p++){const f=h[p].getAttribute("name");f&&!a.includes(f)&&a.push(f)}}),!a.length)return e==="pid"?"Instrumentation and equipment interactions.":"Business process from start to finish.";const o=20,c=a.length>o?a.slice(0,o):a,l=a.length>o?", and more.":".";return`${e==="pid"?"P&ID workflow covering: ":"Process steps include: "}${c.join(", ")}${l}`}catch(n){return console.error("Failed to extract process summary:",n),e==="pid"?"Instrumentation and equipment interactions.":"Business process from start to finish."}},D0=[{id:"core-linear",title:"Core Linear Flow",description:"Straight-through execution with only essential activities.",complexity:"basic",instructions:{bpmn:"Generate the most streamlined BPMN possible for the process summary, keeping only critical tasks and a single happy path.",pid:"Focus on the principal equipment path and core instrumentation, omitting secondary loops or optional devices."}},{id:"human-centric",title:"Human-Centric Collaboration",description:"Highlights manual approvals and team handoffs.",complexity:"intermediate",instructions:{bpmn:"Emphasize manual approvals, include at least two swimlanes, and show review loops that require people to coordinate.",pid:"Highlight manual valves, operator checkpoints, and instrumentation that requires human acknowledgement before continuing."}},{id:"automation-lean",title:"Automation Lean",description:"Switches repetitive work to automated service steps.",complexity:"intermediate",instructions:{bpmn:"Transform repetitive or high-volume tasks into service tasks with system integrations and automated escalations.",pid:"Show controllers and transmitters automating monitoring tasks, including signal lines that close the loop automatically."}},{id:"parallel-efficiency",title:"Parallel Efficiency",description:"Optimizes throughput with parallel branches and event handling.",complexity:"advanced",instructions:{bpmn:"Introduce parallel gateways to split workload, use event-based gateways for exceptions, and add a compensation or rollback path.",pid:"Model redundant equipment paths in parallel with automated switchovers and interlock signals connecting the branches."}},{id:"compliance-audit",title:"Compliance & Audit Ready",description:"Adds control checkpoints, logging, and audit artefacts.",complexity:"advanced",instructions:{bpmn:"Layer in compliance checks, logging activities, and escalation paths. Attach data objects for evidence and audit trails.",pid:"Add monitoring instrumentation, safety valves, bypass lines, and annotations for regulatory checkpoints and alarms."}},{id:"experience-journey",title:"Customer Experience Journey",description:"Maps personas, SLAs, and service touchpoints end to end.",complexity:"intermediate",instructions:{bpmn:"Introduce swimlanes for customer-facing roles, note SLA timers, and highlight feedback or survey capture points along the path.",pid:"Call out operator interfaces, HMI panels, and alarm acknowledgements that connect process equipment to customer-impacting metrics."}},{id:"resilient-recovery",title:"Resilient Recovery Blueprint",description:"Builds failover branches, compensations, and escalation playbooks.",complexity:"advanced",instructions:{bpmn:"Layer event subprocesses for incidents, model compensation tasks, and show escalation to support teams with clear rollback steps.",pid:"Add redundancy loops, relief paths, and interlocks that trigger automated shutdown, including operator guidance annotations."}}],O0=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2),ka=async(t,e,n="#ffffff")=>{const r=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(r);try{const a=new Image;a.crossOrigin="anonymous";const o=new Promise((h,p)=>{a.onload=()=>h(),a.onerror=f=>p(f)});a.src=i,await o;const c=document.createElement("canvas");c.width=a.naturalWidth||a.width||1200,c.height=a.naturalHeight||a.height||800;const l=c.getContext("2d");if(!l)throw new Error("Unable to create 2D canvas context");l.fillStyle=n,l.fillRect(0,0,c.width,c.height),l.drawImage(a,0,0);const d=c.toDataURL(e);return await(await fetch(d)).blob()}finally{URL.revokeObjectURL(i)}},Ca=(t,e)=>{const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},ds=async t=>{const e=document.createElement("div");e.style.position="fixed",e.style.left="-99999px",e.style.top="-99999px",e.style.width="1200px",e.style.height="800px",document.body.appendChild(e);try{const n=new Mr({container:e});await n.importXML(t);const{svg:r}=await n.saveSVG();return n.destroy(),document.body.removeChild(e),r}catch(n){throw document.body.removeChild(e),n}};function d8(t,e,n){return new Promise(r=>{const i=setTimeout(()=>{r({data:null,error:new Error(`Function call timed out after ${n/1e3} seconds`)})},n);X.functions.invoke(t,e).then(a=>{clearTimeout(i),r(a)}).catch(a=>{clearTimeout(i),r({data:null,error:a})})})}const $0=({xml:t,title:e})=>{const[n,r]=v.useState(null),[i,a]=v.useState(!0),[o,c]=v.useState(null);return v.useEffect(()=>{let l=!0;return(async()=>{a(!0),c(null);try{const u=await ds(t);l&&r(u)}catch(u){l&&c("Preview failed"),console.error(`Failed to render preview for ${e}:`,u)}finally{l&&a(!1)}})(),()=>{l=!1}},[t,e]),s.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",style:{backgroundColor:"#ffffff"},children:i?s.jsx(wn,{className:"h-8 w-8 animate-spin text-muted-foreground"}):o?s.jsx("div",{className:"text-xs text-destructive text-center p-2",children:o}):n?s.jsx("img",{src:`data:image/svg+xml;utf8,${encodeURIComponent(n)}`,alt:`${e} preview`,className:"h-full w-full object-contain"}):null})},Sv=({xml:t,onSave:e,diagramType:n="bpmn",onRefine:r})=>{var zv,Uv,Hv;tr();const i=v.useRef(null),a=v.useRef(null),[o,c]=v.useState(!1),[l,d]=v.useState(!1),[u,h]=v.useState(null),[p,f]=v.useState(!1),[m,x]=v.useState(!0),[g,w]=v.useState(!1),[y,b]=v.useState(!1),[j,C]=v.useState([]),[N,k]=v.useState(!1),[P,T]=v.useState([]),[L,R]=v.useState(!1),[M,K]=v.useState(null),[F,te]=v.useState({completed:0,total:0}),[oe,at]=v.useState(5),[Ye,ce]=v.useState(null),[ut,ht]=v.useState([]),[$e,De]=v.useState(!1),[Se,At]=v.useState(null),[Pt,se]=v.useState(null),Qe=v.useRef(!0),kt=v.useRef(!1),[W,pe]=v.useState([]),[ne,Ze]=v.useState(!1),[xe,Ge]=v.useState(null),[pt,ft]=v.useState(!1),zt=v.useRef([]),On=v.useRef(null),Q=v.useMemo(()=>l8(t,n),[t,n]),ge=v.useMemo(()=>{if(!P.length)return null;if(Ye){const E=P.find(D=>D.id===Ye);if(E)return E}return P[0]},[P,Ye]),ke=v.useCallback(async()=>{if(a.current)try{const E=await a.current.saveXML({format:!0});if(E.xml)return E.xml}catch(E){console.error("Failed to capture current XML snapshot:",E)}return t},[t]),We=v.useCallback(async()=>{if(p){k(!0);try{const{data:E,error:D}=await X.from("user_profiles").select("user_id,email,created_at,last_login");if(D)throw D;const{data:A,error:H}=await X.from("user_roles").select("user_id, role");if(H)throw H;const U=new Map;(A??[]).forEach(({user_id:ee,role:be})=>{const wt=U.get(ee)??[];U.set(ee,[...wt,be])});const $=(E??[]).map(({user_id:ee,email:be,created_at:wt,last_login:Fr})=>({userId:ee,email:be,roles:U.get(ee)??["user"],createdAt:wt,lastLogin:Fr}));C($)}catch(E){console.error("Failed to load collaborators:",E),S.error("Unable to load collaborators right now")}finally{k(!1)}}},[p]),Ie=v.useCallback(E=>{zt.current=[...zt.current,E],pe(zt.current.slice(-50))},[]),Xe=v.useCallback(async E=>{if(!(!u||zt.current.length===0))try{const D=await ke(),{error:A}=await X.from("bpmn_generations").insert({user_id:u.id,input_type:"log",input_description:`system-use:${Se??"unknown"}:${Date.now()}`,generated_bpmn_xml:D,alternative_models:JSON.parse(JSON.stringify([{events:zt.current,source:"system-tracking",capturedAt:new Date().toISOString()}]))});if(A)throw A;zt.current=[],pe([]),E!=null&&E.silent||S.success("System usage log saved")}catch(D){console.error("Failed to persist system activities:",D),E!=null&&E.silent||S.error("Could not save system activity log")}},[u,Se,ke]),ct=v.useCallback(()=>{var A;On.current&&On.current();const E=M0(((A=document.body)==null?void 0:A.innerText)??"");Ie({id:O0(),type:"visit",timestamp:new Date().toISOString(),details:{url:window.location.href,title:document.title,contentPreview:E,referrer:document.referrer||void 0}});const D=H=>{var $;const U=H.target;U&&Ie({id:O0(),type:"click",timestamp:new Date().toISOString(),details:{url:window.location.href,text:(($=U.innerText)==null?void 0:$.trim().slice(0,120))||void 0,tag:U.tagName.toLowerCase(),xpath:c8(U),contentPreview:M0(U.textContent)}})};document.addEventListener("click",D,!0),On.current=()=>{document.removeEventListener("click",D,!0)}},[Ie]),Ct=v.useCallback(async E=>{On.current&&(On.current(),On.current=null),await Xe(E),Ze(!1)},[Xe]),rs=v.useCallback(E=>{if(!p){S.error("Only Process Managers can change editing lock");return}w(E),Se&&localStorage.setItem(`bpmn-lock:${Se}`,E?"locked":"unlocked"),S.success(E?"Collaborators are now in view-only mode":"Collaborators can edit this diagram")},[Se,p]),Ro=v.useCallback(async E=>{if(p){if(E===(u==null?void 0:u.id)){S.info("You already have Process Manager rights.");return}try{const{error:D}=await X.from("user_roles").insert({user_id:E,role:"admin"});if(D){if(D.code==="23505"){S.info("User already has Process Manager rights.");return}throw D}S.success("Process Manager access granted"),We()}catch(D){console.error("Failed to grant access:",D),S.error("Unable to grant access")}}},[u==null?void 0:u.id,p,We]),pa=v.useCallback(async E=>{if(p){if(E===(u==null?void 0:u.id)){S.error("You cannot remove your own Process Manager rights.");return}try{const{error:D}=await X.from("user_roles").delete().match({user_id:E,role:"admin"});if(D)throw D;S.success("Process Manager access revoked"),We()}catch(D){console.error("Failed to revoke access:",D),S.error("Unable to revoke access")}}},[u==null?void 0:u.id,p,We]),Ao=v.useCallback(async()=>{De(!0);try{let E=X.from("bpmn_generations").select("id, created_at, input_description, input_type, alternative_models, generated_bpmn_xml, user_id").order("created_at",{ascending:!1}).limit(p?25:10);!p&&u&&(E=E.eq("user_id",u.id));const{data:D,error:A}=await E;if(A)throw A;ht(D??[])}catch(E){console.error("Failed to load log history:",E),S.error("Unable to load BPMN history right now")}finally{De(!1)}},[u,p]),Os=v.useCallback(async(E=!1)=>{var D;if(!u){S.error("Please sign in to open Modelling Agent Mode");return}K(null),R(!0),T([]),ce(null),Ge(null),ft(!1);try{const A=await ke(),H=Se??await Rp(A);if(Se||At(H),!E&&!kt.current){const{data:je,error:Ue}=await X.from("bpmn_generations").select("id, alternative_models, created_at").eq("user_id",u.id).eq("input_description",`modelling-agent:${H}`).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(Ue&&Ue.code!=="PGRST116")throw Ue;if(je!=null&&je.alternative_models){const Le=je.alternative_models;if(Array.isArray(Le)&&Le.length){T(Le),kt.current=!0,R(!1);return}}}const U=D0.slice(0,Math.min(D0.length,Math.max(1,oe)));if(!U.length)throw new Error("No variant definitions available for generation.");const $=U.length;te({completed:0,total:$,current:void 0});const ee=[];let be=0;const wt=async(je,Ue)=>{try{te({completed:be,total:$,current:je.title});const Le=n==="pid"?je.instructions.pid:je.instructions.bpmn,Et=`
              Original process summary: ${Q}
              Variant to generate: ${je.title} - ${je.description}
              Instructions: ${Le}
              Generate a valid BPMN 2.0 XML for this specific variant.
            `,{data:Vt,error:Fo}=await d8("generate-bpmn",{body:{prompt:Et,diagramType:n}},3e4);if(Fo)throw new Error(`Function invocation failed: ${Fo.message}`);if(!(Vt!=null&&Vt.bpmnXml))throw new Error(`No BPMN XML returned for ${je.title}`);const Ci={id:`${je.id}-${Date.now()}-${Ue}`,title:je.title,description:je.description,complexity:je.complexity,xml:Vt.bpmnXml,generatedAt:new Date().toISOString()};return ee.push(Ci),be++,T([...ee]),te({completed:be,total:$,current:void 0}),Ye||ce(Ci.id),Ci}catch(Le){throw be++,te({completed:be,total:$,current:void 0}),console.error(`Failed to generate alternative "${je.title}":`,Le),S.error(`Could not generate: ${je.title}`,{description:Le instanceof Error?Le.message:"An unknown error occurred. The AI model might be overloaded or the request may have timed out."}),Le}},Fr=3,on=U.map((je,Ue)=>()=>wt(je,Ue));for(let je=0;je<on.length;je+=Fr){const Ue=on.slice(je,je+Fr);await Promise.allSettled(Ue.map(Le=>Le()))}if(te({completed:$,total:$}),!ee.length){const je=$-ee.length;throw new Error(`No alternative diagrams were produced. ${je} of ${$} generations failed.`)}T(ee),ce(((D=ee[0])==null?void 0:D.id)??null),kt.current=!0,await X.from("bpmn_generations").insert({user_id:u.id,input_type:"text",input_description:`modelling-agent:${H}`,generated_bpmn_xml:A,alternative_models:JSON.parse(JSON.stringify(ee))})}catch(A){console.error("Failed to prepare alternative models:",A),K(A instanceof Error?A.message:"An unexpected error occurred while preparing alternatives.")}finally{R(!1),te({completed:0,total:0})}},[u,Se,n,Q,ke,oe]),Io=v.useCallback(async E=>{if(a.current)try{await a.current.importXML(E.xml),a.current.get("canvas").zoom("fit-viewport"),Ol(A=>[...A,E.xml]),Lo(A=>A+1),S.success(`${E.title} applied to the canvas`),Oo(!1)}catch(D){console.error("Failed to apply alternative model:",D),S.error("Unable to apply this alternative diagram")}},[]),$s=v.useCallback(E=>{const D=new Blob([E.xml],{type:"application/xml"}),A=URL.createObjectURL(D),H=document.createElement("a");H.href=A,H.download=`${E.title.replace(/\s+/g,"_").toLowerCase()}_${E.complexity}.bpmn`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(A)},[]),Nl=v.useCallback(async E=>{if(a.current)try{await a.current.importXML(E.generated_bpmn_xml),a.current.get("canvas").zoom("fit-viewport"),Ol(A=>[...A,E.generated_bpmn_xml]),Lo(A=>A+1),S.success("Historical diagram loaded"),Bs(!1)}catch(D){console.error("Failed to load historical diagram:",D),S.error("Unable to load this historical snapshot")}},[]),Ls=v.useCallback((E,D)=>{const A=new Blob([E],{type:"application/xml"}),H=URL.createObjectURL(A),U=document.createElement("a");U.href=H,U.download=D.endsWith(".bpmn")?D:`${D}.bpmn`,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(H)},[]),[Ah,fa]=v.useState(!1),[Sl,Mo]=v.useState(!1),[Do,Bs]=v.useState(!1),[$n,Oo]=v.useState(!1),[Oe,bt]=v.useState(!1),[Tt,tn]=v.useState(null),[En,an]=v.useState(!1),[ss,Wn]=v.useState(!0),[_r,Cv]=v.useState(!0),[ma,Pv]=v.useState(!1),[kl,ok]=v.useState(!1),[Tv,Ih]=v.useState(!1),[Cl,ck]=v.useState(!1),[Pl,Tl]=v.useState(!1),[Rl,Mh]=v.useState(!1),[Al,$o]=v.useState(!1),[Il,Ml]=v.useState(!1),[Dh,Oh]=v.useState(!1),[Rv,lk]=v.useState([]),[bn,dk]=v.useState(null),[Av,uk]=v.useState({x:0,y:0}),[Dl,Br]=v.useState(!1),[Iv,Mv]=v.useState(!1),[Dv,hk]=v.useState(!1),[$h,Lo]=v.useState(1),[Fs,Ol]=v.useState([t]),[Bo,Lh]=v.useState(null);v.useEffect(()=>{t&&Fs.length===1&&Fs[0]!==t&&(Ol([t]),Lo(1))},[t]),v.useEffect(()=>{let E=!0;return(async()=>{if(t)try{const A=await Rp(t);if(!E)return;At(A);const H=localStorage.getItem(`bpmn-lock:${A}`);H==="locked"?w(!0):H==="unlocked"&&w(!1)}catch(A){console.error("Failed to compute diagram fingerprint:",A)}})(),()=>{E=!1}},[t]),v.useEffect(()=>{let E=!0;return(async()=>{try{const{data:{user:A},error:H}=await X.auth.getUser();if(!E)return;if(H)throw H;if(h(A??null),!A){f(!1);return}const{data:U,error:$}=await X.from("user_roles").select("role").eq("user_id",A.id);if($)throw $;const ee=(U==null?void 0:U.some(be=>be.role==="admin"))??!1;f(ee)}catch(A){console.error("Failed to load user/role info:",A),E&&(h(null),f(!1))}})(),()=>{E=!1}},[]),v.useEffect(()=>{x(p||!g)},[p,g]),v.useEffect(()=>{Qe.current=m},[m]),v.useEffect(()=>{kt.current=!1,T([])},[Se]),v.useEffect(()=>{P.length?ce(E=>E&&P.some(D=>D.id===E)?E:P[0].id):ce(null)},[P]),v.useEffect(()=>{y&&We()},[y,We]),v.useEffect(()=>()=>{On.current&&On.current(),zt.current.length>0&&Xe({silent:!0})},[Xe]),v.useEffect(()=>{$n&&Os()},[$n,Os]),v.useEffect(()=>{$n||(Ge(null),ft(!1))},[$n]),v.useEffect(()=>{Do&&Ao()},[Ao,Do]),v.useEffect(()=>{if(!Pt)return;let E;const D=async()=>{const{data:U,error:$}=await X.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",Pt).single();if($){console.error("Error checking job status:",$);return}if(U.status==="completed"&&U.bpmn_xml){if(a.current)try{await a.current.importXML(U.bpmn_xml),a.current.get("canvas").zoom("fit-viewport"),S.success("BPMN diagram generated from your image!",{description:"Process extracted and visualized successfully"})}catch(be){console.error("Failed to import BPMN:",be),S.error("Failed to load generated diagram")}const ee=document.getElementById("vision-upload");ee&&(ee.value=""),fa(!1),tn(null),an(!1),se(null),E&&clearInterval(E)}else if(U.status==="failed"){const ee=U.error_message||"Processing failed. Please try again.";S.error("Vision AI processing failed",{description:ee});const be=document.getElementById("vision-upload");be&&(be.value=""),an(!1),tn(null),se(null),E&&clearInterval(E)}},A=X.channel(`vision-job-${Pt}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${Pt}`},U=>{const $=U.new;if(console.log(" Vision job status update:",$.status),$.status==="completed"&&$.bpmn_xml){a.current&&a.current.importXML($.bpmn_xml).then(()=>{a.current.get("canvas").zoom("fit-viewport"),S.success("BPMN diagram generated from your image!",{description:"Process extracted and visualized successfully"})}).catch(be=>{console.error("Failed to import BPMN:",be),S.error("Failed to load generated diagram")});const ee=document.getElementById("vision-upload");ee&&(ee.value=""),fa(!1),tn(null),an(!1),se(null),E&&clearInterval(E)}else if($.status==="failed"){const ee=$.error_message||"Processing failed. Please try again.";S.error("Vision AI processing failed",{description:ee});const be=document.getElementById("vision-upload");be&&(be.value=""),an(!1),tn(null),se(null),E&&clearInterval(E)}}).subscribe();E=window.setInterval(D,3e3),D();const H=window.setTimeout(()=>{E&&clearInterval(E),S.error("Processing timed out",{description:"Please try again or contact support"});const U=document.getElementById("vision-upload");U&&(U.value=""),an(!1),tn(null),se(null)},3e5);return()=>{clearTimeout(H),X.removeChannel(A),E&&clearInterval(E)}},[Pt,n]),v.useEffect(()=>{if(!i.current||a.current)return;a.current=new Mr({container:i.current,additionalModules:[{__init__:["paletteProvider"],paletteProvider:["value",{getPaletteEntries:()=>({})}]},gF]}),n==="pid"&&(a.current.get("eventBus").once("canvas.init",()=>{var A;try{const H=(A=a.current)==null?void 0:A.get("pidRenderer",!1);H&&(H.isPidMode=!0)}catch{}}),setTimeout(()=>{var A;try{const H=(A=a.current)==null?void 0:A.get("pidRenderer",!1);H&&(H.isPidMode=!0)}catch{}},50));const E=a.current.get("eventBus");return E.on("commandStack.changed",()=>{var A;const D=(A=a.current)==null?void 0:A.get("commandStack");D&&(c(D.canUndo()),d(D.canRedo()))}),E.on("element.click",D=>{var $;const{element:A,originalEvent:H}=D;if(!Qe.current){Br(!1);return}if(A.type==="bpmn:Process"||A.waypoints){Br(!1);return}const U=($=i.current)==null?void 0:$.getBoundingClientRect();U&&(uk({x:H.clientX-U.left,y:H.clientY-U.top}),dk(A),Br(!0))}),()=>{a.current&&(a.current.destroy(),a.current=null)}},[]);const pk=E=>{if(n!=="pid")return E;let D=E;D.includes('xmlns:pid="http://pid.extensions/schema"')||(D=D.replace(/(<bpmn:definitions[^>]*>)/,`$1
  xmlns:pid="http://pid.extensions/schema"`));const A=(H,U)=>{const $=(H||"").toLowerCase();let ee="",be="",wt="";return U.includes("task")||U.includes("Task")?$.includes("tank")||$.includes("vessel")||$.includes("drum")?(ee="equipment",be="tank",wt="mechanical"):$.includes("pump")?(ee="equipment",be="pump",wt="mechanical"):$.includes("filter")?(ee="equipment",be="filter",wt="mechanical"):$.includes("exchanger")||$.includes("heater")||$.includes("cooler")?(ee="equipment",be="heat_exchanger",wt="mechanical"):(ee="equipment",be="tank",wt="mechanical"):U.includes("exclusiveGateway")||U.includes("Gateway")?$.includes("valve")?(ee="valve",be=$.includes("control")?"valve_control":"valve_gate",wt="mechanical"):(ee="valve",be="valve_control",wt="mechanical"):U.includes("dataObjectReference")||U.includes("DataObject")?$.includes("analyzer")?(ee="instrument",be="analyzer",wt="control"):$.includes("transmitter")||$.includes("transducer")?(ee="instrument",$.includes("level")?be="transmitter_level":$.includes("flow")?be="transmitter_flow":$.includes("pressure")?be="transmitter_pressure":be="transmitter_level",wt="control"):(ee="instrument",be="transmitter_level",wt="control"):U.includes("subProcess")||U.includes("SubProcess")?($.includes("controller"),ee="controller",be="controller_pid",wt="control"):U.includes("sequenceFlow")||U.includes("SequenceFlow")?(ee="line",wt="process"):(U.includes("messageFlow")||U.includes("MessageFlow"))&&(ee="line",wt="signal"),ee&&be&&wt?` pid:type="${ee}" pid:symbol="${be}" pid:category="${wt}"`:""};return D=D.replace(/(<bpmn:task[^>]*name="([^"]*)")([^>]*>)/g,(H,U,$,ee)=>{if(H.includes("pid:type"))return H;const be=A($,"task");return U+be+ee}),D=D.replace(/(<bpmn:exclusiveGateway[^>]*name="([^"]*)")([^>]*>)/g,(H,U,$,ee)=>{if(H.includes("pid:type"))return H;const be=A($,"exclusiveGateway");return U+be+ee}),D=D.replace(/(<bpmn:dataObjectReference[^>]*name="([^"]*)")([^>]*>)/g,(H,U,$,ee)=>{if(H.includes("pid:type"))return H;const be=A($,"dataObjectReference");return U+be+ee}),D=D.replace(/(<bpmn:subProcess[^>]*name="([^"]*)")([^>]*>)/g,(H,U,$,ee)=>{if(H.includes("pid:type"))return H;const be=A($,"subProcess");return U+be+ee}),D=D.replace(/(<bpmn:sequenceFlow[^>]*)([^/]*>)/g,(H,U,$)=>{if(H.includes("pid:type"))return H;const ee=A("","sequenceFlow");return U+ee+$}),D=D.replace(/(<bpmn:messageFlow[^>]*)([^/]*>)/g,(H,U,$)=>{if(H.includes("pid:type"))return H;const ee=A("","messageFlow");return U+ee+$}),D};v.useEffect(()=>{var A;if(!a.current||!t)return;if(n==="pid")try{const H=(A=a.current)==null?void 0:A.get("pidRenderer",!1);H&&(H.isPidMode=!0)}catch{}const D=pk(t);a.current.importXML(D).then(()=>{var U;if(a.current.get("canvas").zoom("fit-viewport"),Lh(null),n==="pid"){try{const on=(U=a.current)==null?void 0:U.get("pidRenderer",!1);on&&(on.isPidMode=!0,setTimeout(()=>{try{const je=a.current.get("elementRegistry"),Ue=a.current.get("draw",!1);je.getAll().forEach(Et=>{if(Ue&&Ue.update)try{Ue.update(Et)}catch{}})}catch{}},200))}catch{}const ee=a.current.get("elementRegistry").getAll();let be=0,wt=0;const Fr=(on,je)=>{const Ue=(on||"").toLowerCase();let Le="",Et="",Vt="";return je.includes("task")||je.includes("Task")?Ue.includes("tank")||Ue.includes("vessel")||Ue.includes("drum")?(Le="equipment",Et="tank",Vt="mechanical"):Ue.includes("pump")?(Le="equipment",Et="pump",Vt="mechanical"):Ue.includes("filter")?(Le="equipment",Et="filter",Vt="mechanical"):Ue.includes("exchanger")||Ue.includes("heater")||Ue.includes("cooler")?(Le="equipment",Et="heat_exchanger",Vt="mechanical"):(Le="equipment",Et="tank",Vt="mechanical"):je.includes("exclusiveGateway")||je.includes("Gateway")?(Le="valve",Et=Ue.includes("control")?"valve_control":"valve_gate",Vt="mechanical"):je.includes("dataObjectReference")||je.includes("DataObject")?(Le="instrument",Ue.includes("analyzer")?Et="analyzer":Ue.includes("transmitter")||Ue.includes("transducer")?Ue.includes("level")?Et="transmitter_level":Ue.includes("flow")?Et="transmitter_flow":Ue.includes("pressure")?Et="transmitter_pressure":Et="transmitter_level":Et="transmitter_level",Vt="control"):je.includes("subProcess")||je.includes("SubProcess")?(Le="controller",Et="controller_pid",Vt="control"):je.includes("sequenceFlow")||je.includes("SequenceFlow")?(Le="line",Vt="process"):(je.includes("messageFlow")||je.includes("MessageFlow"))&&(Le="line",Vt="signal"),{type:Le,symbol:Et,category:Vt}};ee.forEach(on=>{const je=on.businessObject;if(!je)return;if(je.$attrs||(je.$attrs={}),Object.keys(je.$attrs).filter(Le=>Le.startsWith("pid:")).length>0)be++;else{const Le=Fr(je.name||"",on.type||"");Le.type&&Le.symbol&&Le.category&&(je.$attrs["pid:type"]=Le.type,je.$attrs["pid:symbol"]=Le.symbol,je.$attrs["pid:category"]=Le.category,wt++)}}),(wt>0||be>0)&&setTimeout(()=>{try{const on=a.current.get("canvas"),je=D;a.current.importXML(je).then(()=>{on.zoom("fit-viewport"),setTimeout(()=>{var Vt;const Ue=a.current.get("elementRegistry"),Le=a.current.get("graphicsFactory"),Et=(Vt=a.current)==null?void 0:Vt.get("pidRenderer",!1);Et&&(Et.isPidMode=!0),Le&&Ue&&Ue.getAll().forEach(Fo=>{try{const Ci=Ue.getGraphics(Fo.id);Ci&&Le.update&&Le.update(Fo,Ci)}catch{}})},200)}).catch(Ue=>{})}catch{}},500)}}).catch(H=>{console.error("Error rendering diagram:",H);const U=H.message||"Failed to load diagram";Lh(`Generation failed (Reason: ${U}). Try simplified prompt.`),n==="pid"?S.error("Generation failed (Reason: token limit). Try simplified prompt."):S.error("Failed to load BPMN diagram")})},[t,n]);const fk=async()=>{if(!m){S.error("Editing is locked by the Process Manager");return}if(a.current)try{const E=await a.current.saveXML({format:!0});if(E.xml){const D=$h+1;Lo(D);const A=[...Fs,E.xml];if(Ol(A),e&&e(E.xml),u)try{const U=Se??await Rp(E.xml);await X.from("bpmn_generations").insert({user_id:u.id,input_type:"text",input_description:`manual-save:${U}`,generated_bpmn_xml:E.xml})}catch(U){console.error("Failed to log manual save:",U)}const H=n==="bpmn"?"BPMN":"P&ID";S.success("Diagram saved to workspace",{description:`Saved as version v${D}`})}}catch(E){console.error("Error saving diagram:",E),S.error("Failed to save diagram")}},Bh=async E=>{if(a.current)try{if((await a.current.saveXML({format:!0})).xml){const A=`PID_v${$h}.${E}`;S.success(`Exported to ${A}`,{description:"Export functionality ready"})}}catch(D){console.error("Error exporting P&ID:",D),S.error("Failed to export diagram")}},mk=E=>{if(!m){S.error("Editing is locked by the Process Manager");return}E>=0&&E<Fs.length&&(Lo(E+1),e&&a.current&&a.current.importXML(Fs[E]).then(()=>{a.current.get("canvas").zoom("fit-viewport")}))},Ov=()=>{if(!m){S.error("Editing is locked by the Process Manager");return}if(!a.current)return;const E=a.current.get("commandStack");E.canUndo()&&E.undo()},$v=()=>{if(!m){S.error("Editing is locked by the Process Manager");return}if(!a.current)return;const E=a.current.get("commandStack");E.canRedo()&&E.redo()},gk=()=>{if(!m){S.error("Editing is locked by the Process Manager");return}if(!a.current)return;const E=a.current.get("modeling"),D=a.current.get("elementRegistry"),H=a.current.get("canvas").getRootElement(),U=D.filter($=>$.id!==H.id&&$.parent===H);E.removeElements(U),S.success("Canvas cleared!")},vk=v.useCallback(()=>{if(!m){S.error("Editing is locked by the Process Manager");return}const E=document.createElement("input");E.type="file",E.accept=".bpmn,.xml",E.onchange=async D=>{var H;const A=(H=D.target.files)==null?void 0:H[0];if(!(!A||!a.current))try{const U=await A.text();if(new DOMParser().parseFromString(U,"text/xml").querySelector("parsererror")){S.error("Invalid XML file");return}if(!U.includes("bpmn:")&&!U.includes("bpmn2:")&&!U.includes("bpmndi:")){S.error("File does not appear to be a valid BPMN diagram");return}await a.current.importXML(U),a.current.get("canvas").zoom("fit-viewport"),S.success("Diagram imported successfully")}catch(U){console.error("Import error:",U),S.error("Failed to import diagram")}},E.click()},[m]),Fh=v.useCallback(async(E="bpmn")=>{if(a.current)try{if(E==="svg"){const A=a.current.get("canvas").svg(),H=new Blob([A],{type:"image/svg+xml"}),U=URL.createObjectURL(H),$=document.createElement("a");$.href=U,$.download=`diagram.${E}`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(U),S.success("SVG exported successfully")}else{const{xml:D}=await a.current.saveXML({format:!0}),A=new Blob([D],{type:"application/xml"}),H=URL.createObjectURL(A),U=document.createElement("a");U.href=H,U.download=`diagram.${E}`,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(H),S.success(`${E.toUpperCase()} exported successfully`)}}catch(D){console.error("Export error:",D),S.error("Failed to export diagram")}},[]),Lv=v.useCallback(()=>{if(a.current)try{const E=a.current.get("canvas"),D=E.getViewbox();if(D){const A=Math.min(D.scale*1.2,3);E.zoom(A)}}catch(E){console.error("Error zooming in:",E)}},[]),Bv=v.useCallback(()=>{if(a.current)try{const E=a.current.get("canvas"),D=E.getViewbox();if(D){const A=Math.max(D.scale/1.2,.2);E.zoom(A)}}catch(E){console.error("Error zooming out:",E)}},[]),zh=v.useCallback(()=>{if(a.current)try{a.current.get("canvas").zoom("fit-viewport")}catch(E){console.error("Error fitting to screen:",E)}},[]),xk=v.useCallback(()=>{var E;document.fullscreenElement?document.exitFullscreen().then(()=>{Ih(!1)}).catch(()=>{S.error("Failed to exit fullscreen mode")}):(E=i.current)==null||E.requestFullscreen().then(()=>{Ih(!0)}).catch(()=>{S.error("Failed to enter fullscreen mode")})},[]),yk=v.useCallback(()=>{if(a.current)try{const E=a.current.get("grid",!1);if(E)Pv(!ma),E.setVisible(!ma);else{Pv(!ma);const D=i.current;if(D){const A=D.querySelector(".djs-container");A&&(ma?A.style.backgroundImage="none":(A.style.backgroundImage="linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px)",A.style.backgroundSize="20px 20px"))}}}catch(E){console.error("Error toggling grid:",E)}},[ma]),bk=v.useCallback(()=>{ok(!kl),S.info(`Ruler ${kl?"disabled":"enabled"}`)},[kl]),Fv=v.useCallback(()=>{if(!a.current)return;const E=[];try{const A=a.current.get("elementRegistry").getAll(),H=A.filter($=>{var ee;return(ee=$.type)==null?void 0:ee.includes("StartEvent")}),U=A.filter($=>{var ee;return(ee=$.type)==null?void 0:ee.includes("EndEvent")});H.length===0&&E.push({message:"No start event found. A BPMN diagram must have at least one start event."}),U.length===0&&E.push({message:"No end event found. A BPMN diagram should have at least one end event."}),A.forEach($=>{var ee,be;(ee=$.type)!=null&&ee.includes("Task")&&!((be=$.businessObject)!=null&&be.name)&&E.push({message:`Task "${$.id}" has no name`,elementId:$.id})}),A.forEach($=>{$.type&&!$.type.includes("Event")&&$.type.includes("Gateway")}),lk(E),Oh(!0),E.length===0?S.success("Validation passed! No issues found."):S.warning(`Found ${E.length} validation issue(s)`)}catch(D){console.error("Validation error:",D),S.error("Failed to validate diagram")}},[]),wk=v.useCallback(()=>{if(a.current){ck(!Cl);try{const E=a.current.get("canvas");Cl?(E.isActive("hand-tool")&&E.toggle("hand-tool"),S.info("Pan mode deactivated.")):(E.toggle("hand-tool"),S.info("Pan mode activated. Click and drag to move the canvas."))}catch(E){console.error("Error toggling pan mode:",E)}}},[Cl]),_k=v.useCallback(E=>{if(!(!a.current||!E.trim()))try{const D=a.current.get("elementRegistry"),A=a.current.get("canvas"),H=D.getAll(),U=E.toLowerCase(),$=H.filter(ee=>{var on,je,Ue,Le;const be=((je=(on=ee.businessObject)==null?void 0:on.name)==null?void 0:je.toLowerCase())||"",wt=((Ue=ee.id)==null?void 0:Ue.toLowerCase())||"",Fr=((Le=ee.type)==null?void 0:Le.toLowerCase())||"";return be.includes(U)||wt.includes(U)||Fr.includes(U)});if($.length>0){const ee=$[0];A.zoom(ee),S.success(`Found ${$.length} element(s) matching "${E}"`)}else S.info(`No elements found matching "${E}"`)}catch(D){console.error("Search error:",D)}},[]),jk=async E=>{var A;if(!m){S.error("Editing is locked by the Process Manager"),E.target.value="";return}const D=(A=E.target.files)==null?void 0:A[0];if(!D){E.target.value="";return}if(!D.type.startsWith("image/")){S.error("Please upload an image file"),E.target.value="";return}tn(D),an(!0);try{const{data:{user:H},error:U}=await X.auth.getUser();if(U||!H){S.error("Please log in to use Vision Modelling AI"),an(!1),tn(null),E.target.value="";return}let $=D;const{shouldCompressImage:ee,compressImage:be}=await Ar(async()=>{const{shouldCompressImage:Et,compressImage:Vt}=await Promise.resolve().then(()=>lf);return{shouldCompressImage:Et,compressImage:Vt}},void 0);if(ee(D))try{$=await be(D)}catch(Et){console.warn("Image compression failed, using original:",Et)}const{fileToBase64:wt}=await Ar(async()=>{const{fileToBase64:Et}=await Promise.resolve().then(()=>lf);return{fileToBase64:Et}},void 0),Fr=await wt($,!1),on=`data:${$.type};base64,${Fr}`;S.info("Uploading image for analysis...");const{invokeFunction:je}=await Ar(async()=>{const{invokeFunction:Et}=await Promise.resolve().then(()=>Fm);return{invokeFunction:Et}},void 0),{data:Ue,error:Le}=await je("vision-to-bpmn",{imageBase64:on,diagramType:n},{deduplicate:!0});if(Le)throw Le;if(Ue!=null&&Ue.jobId)se(Ue.jobId),S.info("Processing started",{description:"Your image is being analyzed. This may take a moment..."});else throw new Error("No job ID received from server")}catch(H){console.error("Vision processing error:",H);const U=H instanceof Error?H.message:"Failed to process image. Please try again.";S.error("Failed to process image",{description:U}),an(!1),tn(null),E.target.value=""}},Ek=async E=>{var A;const D=(A=E.target.files)==null?void 0:A[0];if(D){if(!u){S.error("Please sign in to archive logs");return}an(!0);try{const H=await D.text(),U=await ke(),{error:$}=await X.from("bpmn_generations").insert({user_id:u.id,input_type:"log",input_description:`log-import:${D.name}`,generated_bpmn_xml:U,alternative_models:[{event:"log_import",fileName:D.name,size:D.size,preview:H.slice(0,1e3),importedAt:new Date().toISOString()}]});if($)throw $;S.success("Log file imported successfully"),await Ao(),Bs(!1)}catch(H){console.error("Log import error:",H),S.error("Failed to import log file")}finally{an(!1),E.target.value=""}}},Nk=()=>{S.success("QR code generated! Share with collaborators.")},qn=v.useCallback(E=>{if(!m){S.error("Editing is locked by the Process Manager"),Br(!1);return}if(!a.current||!bn)return;a.current.get("modeling");const D=a.current.get("bpmnReplace");try{let A=E,H;switch(E){case"start-event":A="bpmn:StartEvent";break;case"start-timer-event":A="bpmn:StartEvent",H="bpmn:TimerEventDefinition";break;case"start-message-event":A="bpmn:StartEvent",H="bpmn:MessageEventDefinition";break;case"intermediate-event":A="bpmn:IntermediateThrowEvent";break;case"intermediate-timer-event":A="bpmn:IntermediateCatchEvent",H="bpmn:TimerEventDefinition";break;case"end-event":A="bpmn:EndEvent";break;case"end-message-event":A="bpmn:EndEvent",H="bpmn:MessageEventDefinition";break;case"task":A="bpmn:Task";break;case"user-task":A="bpmn:UserTask";break;case"service-task":A="bpmn:ServiceTask";break;case"manual-task":A="bpmn:ManualTask";break;case"xor-gateway":A="bpmn:ExclusiveGateway";break;case"and-gateway":A="bpmn:ParallelGateway";break;case"or-gateway":A="bpmn:InclusiveGateway";break;default:E.startsWith("bpmn:")&&(A=E)}D.replaceElement(bn,{type:A,eventDefinitionType:H}),S.success("Element changed successfully!"),Br(!1)}catch(A){console.error("Error changing element:",A),S.error("Failed to change element type")}},[m,bn]),Sk=v.useCallback((E,D)=>{if(!m){S.error("Editing is locked by the Process Manager"),Br(!1);return}if(!(!a.current||!bn))try{a.current.get("modeling").setColor([bn],{fill:E,stroke:E}),S.success(`Applied ${D} color`),Br(!1)}catch(A){console.error("Error applying color:",A),S.error("Failed to apply color")}},[m,bn]),kk=[{name:"Bottleneck",color:"#FF5252",label:"Bottleneck (Red)"},{name:"Optimization",color:"#4CAF50",label:"Optimization (Green)"},{name:"Warning",color:"#FFC107",label:"Warning (Yellow)"},{name:"Standard",color:"#2196F3",label:"Standard (Blue)"},{name:"Inactive",color:"#9E9E9E",label:"Inactive (Gray)"},{name:"Special",color:"#9C27B0",label:"Special (Purple)"},{name:"Remove",color:"none",label:"Remove Color"}],ot=v.useCallback(E=>{if(!m){S.error("Editing is locked by the Process Manager");return}if(!a.current)return;const D=a.current.get("modeling"),A=a.current.get("elementFactory"),U=a.current.get("canvas").getRootElement();let $;const ee={x:300,y:200};switch(E){case"start-event":$=A.createShape({type:"bpmn:StartEvent"});break;case"start-timer-event":$=A.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"});break;case"start-message-event":$=A.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"});break;case"start-signal-event":$=A.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"});break;case"start-conditional-event":$=A.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"});break;case"intermediate-event":$=A.createShape({type:"bpmn:IntermediateThrowEvent"});break;case"intermediate-timer-event":$=A.createShape({type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"});break;case"intermediate-message-event":$=A.createShape({type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"});break;case"intermediate-signal-event":$=A.createShape({type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"});break;case"end-event":$=A.createShape({type:"bpmn:EndEvent"});break;case"end-message-event":$=A.createShape({type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"});break;case"end-error-event":$=A.createShape({type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"});break;case"end-terminate-event":$=A.createShape({type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"});break;case"task":$=A.createShape({type:"bpmn:Task"});break;case"user-task":$=A.createShape({type:"bpmn:UserTask"});break;case"service-task":$=A.createShape({type:"bpmn:ServiceTask"});break;case"manual-task":$=A.createShape({type:"bpmn:ManualTask"});break;case"script-task":$=A.createShape({type:"bpmn:ScriptTask"});break;case"send-task":$=A.createShape({type:"bpmn:SendTask"});break;case"receive-task":$=A.createShape({type:"bpmn:ReceiveTask"});break;case"business-rule-task":$=A.createShape({type:"bpmn:BusinessRuleTask"});break;case"call-activity":$=A.createShape({type:"bpmn:CallActivity"});break;case"xor-gateway":$=A.createShape({type:"bpmn:ExclusiveGateway"});break;case"and-gateway":$=A.createShape({type:"bpmn:ParallelGateway"});break;case"or-gateway":$=A.createShape({type:"bpmn:InclusiveGateway"});break;case"event-gateway":$=A.createShape({type:"bpmn:EventBasedGateway"});break;case"complex-gateway":$=A.createShape({type:"bpmn:ComplexGateway"});break;case"subprocess":$=A.createShape({type:"bpmn:SubProcess",isExpanded:!0});break;case"collapsed-subprocess":$=A.createShape({type:"bpmn:SubProcess",isExpanded:!1});break;case"event-subprocess":$=A.createShape({type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0});break;case"transaction":$=A.createShape({type:"bpmn:Transaction",isExpanded:!0});break;case"participant":$=A.createShape({type:"bpmn:Participant"});break;case"data-object":$=A.createShape({type:"bpmn:DataObjectReference"});break;case"data-store":$=A.createShape({type:"bpmn:DataStoreReference"});break;case"data-input":$=A.createShape({type:"bpmn:DataInput"});break;case"data-output":$=A.createShape({type:"bpmn:DataOutput"});break;case"text-annotation":$=A.createShape({type:"bpmn:TextAnnotation"});break;case"group":$=A.createShape({type:"bpmn:Group"});break;default:return}$&&(D.createShape($,ee,U),S.success("Element added to canvas!"))},[m]);v.useEffect(()=>{const E=D=>{const A=D.target;Dl&&!A.closest(".context-menu")&&Br(!1)};return Dl&&document.addEventListener("click",E),()=>{document.removeEventListener("click",E)}},[Dl]),v.useEffect(()=>{const E=()=>{Ih(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",E),()=>document.removeEventListener("fullscreenchange",E)},[]);const is=n==="pid";return s.jsxs("div",{className:"flex flex-col h-[calc(100vh-8rem)] bg-background",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-background",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zp,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-bold text-lg",children:"PROSSMIND"}),s.jsx("span",{className:"text-sm text-muted-foreground font-normal",children:"DESIGN"})]})}),s.jsx("div",{className:"flex-1 flex justify-center",children:s.jsx(MS,{children:s.jsxs(DS,{children:[s.jsx(_d,{children:s.jsx(zf,{asChild:!0,children:s.jsx("a",{href:"/",className:"text-sm hover:text-primary",children:"Workspaces"})})}),s.jsx(Uf,{}),s.jsx(_d,{children:s.jsx(zf,{className:"text-sm hover:text-primary",children:"Generated default"})}),s.jsx(Uf,{}),s.jsx(_d,{children:s.jsx(OS,{className:`text-sm font-medium ${is?"text-engineering-green":"text-primary"}`,children:is?"* P&ID":"* BPMN"})})]})})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("a",{href:"/",className:"text-sm hover:text-primary",children:"Overview"}),s.jsx("a",{href:"/",className:"text-sm hover:text-primary",children:"Models"}),s.jsx("a",{href:"/",className:"text-sm hover:text-primary font-medium",children:"Editing"}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",children:s.jsx(jc,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:`flex items-center gap-0.5 px-1 py-1 border-b bg-muted/30 overflow-x-auto ${is?"border-engineering-green/20":"border-border"}`,children:[s.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:fk,className:"h-7 w-7 p-0 shrink-0",title:"Save",disabled:!m,children:s.jsx(CP,{className:"h-3.5 w-3.5"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:vk,className:"h-7 w-7 p-0 shrink-0",title:"Upload/Import",disabled:!m,children:s.jsx(Yh,{className:"h-3.5 w-3.5"})}),s.jsxs(Ii,{children:[s.jsx(Mi,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 shrink-0",title:"Download/Export",children:s.jsx(pu,{className:"h-3.5 w-3.5"})})}),s.jsxs(Zs,{align:"start",children:[s.jsxs(It,{onClick:()=>Fh("bpmn"),children:[s.jsx(nx,{className:"h-4 w-4 mr-2"}),"Export as .bpmn"]}),s.jsxs(It,{onClick:()=>Fh("xml"),children:[s.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Export as .xml"]}),s.jsxs(It,{onClick:()=>Fh("svg"),children:[s.jsx(Yi,{className:"h-4 w-4 mr-2"}),"Export as .svg"]})]})]}),s.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),s.jsx(I,{variant:"ghost",size:"sm",onClick:Ov,className:"h-7 w-7 p-0 shrink-0",title:"Undo",disabled:!o||!m,children:s.jsx(lx,{className:"h-3.5 w-3.5"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:$v,className:"h-7 w-7 p-0 shrink-0",title:"Redo",disabled:!l||!m,children:s.jsx(ax,{className:"h-3.5 w-3.5"})}),s.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),s.jsxs(Ii,{children:[s.jsx(Mi,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 shrink-0",title:"Zoom Controls",children:s.jsx(Zh,{className:"h-3.5 w-3.5"})})}),s.jsxs(Zs,{align:"start",children:[s.jsxs(It,{onClick:Lv,children:[s.jsx(Zh,{className:"h-4 w-4 mr-2"}),"Zoom In"]}),s.jsxs(It,{onClick:Bv,children:[s.jsx(ux,{className:"h-4 w-4 mr-2"}),"Zoom Out"]}),s.jsxs(It,{onClick:zh,children:[s.jsx(Kh,{className:"h-4 w-4 mr-2"}),"Fit to Screen"]})]})]}),s.jsx(I,{variant:Tv?"default":"ghost",size:"sm",onClick:xk,className:"h-7 w-7 p-0 shrink-0",title:"Fullscreen Mode",children:Tv?s.jsx(bP,{className:"h-3.5 w-3.5"}):s.jsx(xP,{className:"h-3.5 w-3.5"})}),s.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),s.jsx(I,{variant:ma?"default":"ghost",size:"sm",onClick:yk,className:"h-7 w-7 p-0 shrink-0",title:"Toggle Grid",children:s.jsx(hP,{className:"h-3.5 w-3.5"})}),s.jsx(I,{variant:kl?"default":"ghost",size:"sm",onClick:bk,className:"h-7 w-7 p-0 shrink-0",title:"Toggle Ruler",children:s.jsx(kP,{className:"h-3.5 w-3.5"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:zh,className:"h-7 w-7 p-0 shrink-0",title:"Fit Diagram to Screen",children:s.jsx(Kh,{className:"h-3.5 w-3.5"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:Fv,className:"h-7 w-7 p-0 shrink-0",title:"Validate Model",children:s.jsx(cx,{className:"h-3.5 w-3.5"})}),s.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),s.jsx(I,{variant:"ghost",size:"sm",onClick:gk,className:"h-7 w-7 p-0 shrink-0",title:"Clear canvas",disabled:!m,children:s.jsx(Jc,{className:"h-3.5 w-3.5"})}),s.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),s.jsxs(Ii,{children:[s.jsx(Mi,{asChild:!0,children:s.jsxs(I,{variant:"outline",size:"sm",className:"gap-1.5 h-7 px-2 shrink-0",children:[s.jsx(DP,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"text-xs",children:"Tools"})]})}),s.jsxs(Zs,{align:"start",className:"w-64",children:[s.jsx(wd,{children:is?"Advanced P&ID Tools":"Advanced BPMN Tools"}),s.jsx(Ia,{}),r&&s.jsxs(s.Fragment,{children:[s.jsx(It,{onClick:()=>{if(!m){S.error("Editing is locked by the Process Manager");return}r()},children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qa,{className:"h-4 w-4"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"font-medium",children:"Refine Diagram"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"AI-powered diagram refinement"})]})]})}),s.jsx(Ia,{})]}),s.jsx(It,{onClick:()=>Oo(!0),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(La,{className:"h-4 w-4"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"font-medium",children:"Modelling Agent Mode"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Review 5-7 AI-generated alternatives"})]})]})}),s.jsx(It,{onClick:()=>Bs(!0),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qh,{className:"h-4 w-4"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"font-medium",children:"Log Agent"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Review BPMN audit history"})]})]})}),s.jsx(It,{onClick:()=>fa(!0),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yh,{className:"h-4 w-4"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"font-medium",children:"Vision Modelling AI"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Sketch to diagram"})]})]})}),s.jsx(Ia,{}),s.jsx(It,{onClick:()=>Mo(!0),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ix,{className:"h-4 w-4"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"font-medium",children:"Share via QR Code"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Invite collaborators"})]})]})})]})]}),r&&s.jsxs(I,{variant:"outline",size:"sm",className:"gap-1.5 h-7 px-2 shrink-0",onClick:()=>{if(!m){S.error("Editing is locked by the Process Manager");return}r()},title:"Refine diagram with AI",disabled:!m,children:[s.jsx(Qa,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"text-xs",children:"Refine"})]}),s.jsx(Ut,{variant:m?p?"default":"secondary":"outline",className:"ml-1 shrink-0 text-xs",children:p?"Process Manager":m?"Editor mode":"View only"})]}),s.jsx("div",{className:"flex-1 flex justify-center min-w-0 shrink",children:s.jsxs("div",{className:"flex items-center gap-1 bg-background rounded-md border border-border p-0.5",children:[s.jsxs("div",{className:"px-2 py-0.5 bg-primary text-primary-foreground rounded text-xs font-medium flex items-center gap-1.5",children:[is?"P&ID":"BPMN",s.jsx(I,{variant:"ghost",size:"sm",className:"h-3.5 w-3.5 p-0 hover:bg-primary-foreground/20",onClick:()=>{},children:s.jsx(Wr,{className:"h-2.5 w-2.5"})})]}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",title:"New Tab",children:s.jsx(uc,{className:"h-3 w-3"})})]})}),s.jsx("div",{className:"flex items-center gap-1 shrink-0",children:s.jsxs("div",{className:"relative",children:[s.jsx(fu,{className:"absolute left-1.5 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),s.jsx(Rt,{placeholder:"Q Quick Search...",className:"pl-7 pr-7 h-7 w-40 text-xs",onKeyDown:E=>{E.key==="Enter"&&_k(E.currentTarget.value)}}),s.jsx("kbd",{className:"absolute right-1.5 top-1/2 transform -translate-y-1/2 pointer-events-none inline-flex h-3.5 select-none items-center gap-0.5 rounded border bg-muted px-1 font-mono text-[9px] font-medium text-muted-foreground opacity-100",children:"K"})]})})]}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[ss&&s.jsxs("div",{className:"w-64 border-r border-border bg-muted/30 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border bg-background",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jP,{className:"h-4 w-4"}),s.jsx("span",{className:"font-semibold text-sm",children:"Elements"})]}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>Wn(!1),children:s.jsx(Wr,{className:"h-4 w-4"})})]}),s.jsx(hs,{className:"flex-1 p-3",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"START EVENTS"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{onClick:()=>ot("start-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Start Event",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-green-600"}),s.jsx("span",{className:"text-[9px] text-center",children:"Start"})]}),s.jsxs("div",{onClick:()=>ot("start-timer-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Timer Start",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-green-600 flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Timer"})]}),s.jsxs("div",{onClick:()=>ot("start-message-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Message Start",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-green-600 flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Msg"})]}),s.jsxs("div",{onClick:()=>ot("start-signal-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Signal Start",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-green-600 flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Signal"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"INTERMEDIATE EVENTS"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{onClick:()=>ot("intermediate-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Intermediate",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-blue-600"}),s.jsx("span",{className:"text-[9px] text-center",children:"Inter."})]}),s.jsxs("div",{onClick:()=>ot("intermediate-timer-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Timer",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-blue-600 flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Timer"})]}),s.jsxs("div",{onClick:()=>ot("intermediate-message-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Message",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-blue-600 flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Msg"})]}),s.jsxs("div",{onClick:()=>ot("intermediate-signal-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Signal",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-blue-600 flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Signal"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"END EVENTS"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{onClick:()=>ot("end-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"End Event",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-4 border-red-600"}),s.jsx("span",{className:"text-[9px] text-center",children:"End"})]}),s.jsxs("div",{onClick:()=>ot("end-message-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Message End",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-4 border-red-600 flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Msg"})]}),s.jsxs("div",{onClick:()=>ot("end-error-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Error End",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-4 border-red-600 flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Error"})]}),s.jsxs("div",{onClick:()=>ot("end-terminate-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Terminate",children:[s.jsx("div",{className:"w-7 h-7 rounded-full border-4 border-red-600 flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Term"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"TASKS & ACTIVITIES"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{onClick:()=>ot("task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Task",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded"}),s.jsx("span",{className:"text-[9px] text-center",children:"Task"})]}),s.jsxs("div",{onClick:()=>ot("user-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"User Task",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"User"})]}),s.jsxs("div",{onClick:()=>ot("service-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Service Task",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Service"})]}),s.jsxs("div",{onClick:()=>ot("manual-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Manual Task",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Manual"})]}),s.jsxs("div",{onClick:()=>ot("script-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Script Task",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Script"})]}),s.jsxs("div",{onClick:()=>ot("send-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Send Task",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Send"})]}),s.jsxs("div",{onClick:()=>ot("receive-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Receive Task",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Receive"})]}),s.jsxs("div",{onClick:()=>ot("business-rule-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Business Rule Task",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[9px] text-center",children:"Rule"})]}),s.jsxs("div",{onClick:()=>ot("call-activity"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Call Activity",children:[s.jsx("div",{className:"w-7 h-7 border-4 border-foreground rounded"}),s.jsx("span",{className:"text-[9px] text-center",children:"Call"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"GATEWAYS"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{onClick:()=>ot("xor-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Exclusive Gateway (XOR)",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-amber-600 transform rotate-45 flex items-center justify-center",children:s.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"X"})}),s.jsx("span",{className:"text-[9px] text-center",children:"XOR"})]}),s.jsxs("div",{onClick:()=>ot("and-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Parallel Gateway (AND)",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-purple-600 transform rotate-45 flex items-center justify-center",children:s.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"+"})}),s.jsx("span",{className:"text-[9px] text-center",children:"AND"})]}),s.jsxs("div",{onClick:()=>ot("or-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Inclusive Gateway (OR)",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-indigo-600 transform rotate-45 flex items-center justify-center",children:s.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"O"})}),s.jsx("span",{className:"text-[9px] text-center",children:"OR"})]}),s.jsxs("div",{onClick:()=>ot("event-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Event-based Gateway",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-cyan-600 transform rotate-45 flex items-center justify-center",children:s.jsx("span",{className:"transform -rotate-45 text-[10px]",children:""})}),s.jsx("span",{className:"text-[9px] text-center",children:"Event"})]}),s.jsxs("div",{onClick:()=>ot("complex-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Complex Gateway",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-pink-600 transform rotate-45 flex items-center justify-center",children:s.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"*"})}),s.jsx("span",{className:"text-[9px] text-center",children:"Complex"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"SUBPROCESSES"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{onClick:()=>ot("subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Expanded Subprocess",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:"+"}),s.jsx("span",{className:"text-[9px] text-center",children:"Sub"})]}),s.jsxs("div",{onClick:()=>ot("collapsed-subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Collapsed Subprocess",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-foreground rounded flex items-center justify-center",children:s.jsx("div",{className:"w-3 h-0.5 bg-foreground"})}),s.jsx("span",{className:"text-[9px] text-center",children:"Coll."})]}),s.jsxs("div",{onClick:()=>ot("event-subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Event Subprocess",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-dashed border-foreground rounded flex items-center justify-center text-[10px",children:"+"}),s.jsx("span",{className:"text-[9px] text-center",children:"Event"})]}),s.jsxs("div",{onClick:()=>ot("transaction"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Transaction",children:[s.jsx("div",{className:"w-7 h-7 border-4 border-double border-foreground rounded"}),s.jsx("span",{className:"text-[9px] text-center",children:"Trans."})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"POOLS & LANES"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:s.jsxs("div",{onClick:()=>ot("participant"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Pool/Participant",children:[s.jsx("div",{className:"w-8 h-6 border-2 border-foreground rounded",children:s.jsx("div",{className:"w-1 h-full bg-foreground"})}),s.jsx("span",{className:"text-[9px] text-center",children:"Pool"})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"DATA OBJECTS"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{onClick:()=>ot("data-object"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data Object",children:[s.jsx("div",{className:"w-6 h-7 border-2 border-foreground",style:{clipPath:"polygon(0 10%, 70% 10%, 100% 0, 100% 100%, 0 100%)"}}),s.jsx("span",{className:"text-[9px] text-center",children:"Object"})]}),s.jsxs("div",{onClick:()=>ot("data-store"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data Store",children:[s.jsx("div",{className:"w-7 h-6 border-2 border-foreground rounded-sm"}),s.jsx("span",{className:"text-[9px] text-center",children:"Store"})]}),s.jsxs("div",{onClick:()=>ot("data-input"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data Input",children:[s.jsx("div",{className:"w-6 h-7 border-2 border-foreground",style:{clipPath:"polygon(0 10%, 70% 10%, 100% 0, 100% 100%, 0 100%)"},children:s.jsx("div",{className:"text-[8px] mt-2 ml-1",children:""})}),s.jsx("span",{className:"text-[9px] text-center",children:"Input"})]}),s.jsxs("div",{onClick:()=>ot("data-output"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data Output",children:[s.jsx("div",{className:"w-6 h-7 border-2 border-foreground",style:{clipPath:"polygon(0 10%, 70% 10%, 100% 0, 100% 100%, 0 100%)"},children:s.jsx("div",{className:"text-[8px] mt-2 ml-1",children:""})}),s.jsx("span",{className:"text-[9px] text-center",children:"Output"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"ARTIFACTS"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{onClick:()=>ot("text-annotation"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Text Annotation",children:[s.jsx("div",{className:"w-7 h-6 border-l-2 border-t-2 border-b-2 border-foreground"}),s.jsx("span",{className:"text-[9px] text-center",children:"Note"})]}),s.jsxs("div",{onClick:()=>ot("group"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Group",children:[s.jsx("div",{className:"w-7 h-7 border-2 border-dashed border-foreground rounded"}),s.jsx("span",{className:"text-[9px] text-center",children:"Group"})]})]})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[s.jsx("p",{className:"text-xs font-bold text-foreground",children:"CONNECTIONS"}),s.jsxs("div",{className:"space-y-1 text-[10px] text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-0.5 bg-foreground"}),s.jsx("span",{children:"Sequence Flow"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-0.5 border-t-2 border-dashed border-foreground"}),s.jsx("span",{children:"Message Flow"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-0.5 border-t-2 border-dotted border-foreground"}),s.jsx("span",{children:"Association"})]}),s.jsx("p",{className:"pt-1 text-muted-foreground",children:"Drag from any element's anchor points to create connections"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground pt-2 border-t",children:" Click elements to add them. Double-click shapes to edit labels. Use context menu (right-click) for more options."})]})}),s.jsxs("div",{className:"border-t border-border p-2 flex items-center justify-center gap-1 bg-background",children:[s.jsx(I,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:Lv,title:"Zoom In",children:s.jsx(Zh,{className:"h-3.5 w-3.5"})}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:Bv,title:"Zoom Out",children:s.jsx(ux,{className:"h-3.5 w-3.5"})}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:zh,title:"Fit to Screen",children:s.jsx(Kh,{className:"h-3.5 w-3.5"})}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>$o(!0),title:"Settings",children:s.jsx(Nd,{className:"h-3.5 w-3.5"})})]})]}),s.jsxs("div",{className:"flex-1 relative flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"absolute top-4 right-4 z-40 flex items-center gap-2 bg-background/95 backdrop-blur-sm border border-border rounded-lg shadow-lg p-2",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:Ov,disabled:!m||!o,title:"Undo (Ctrl+Z)",className:"h-8 w-8 p-0",children:s.jsx(lx,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:$v,disabled:!m||!l,title:"Redo (Ctrl+Y)",className:"h-8 w-8 p-0",children:s.jsx(ax,{className:"h-4 w-4"})}),s.jsx("div",{className:"h-6 w-px bg-border mx-1"}),s.jsxs("span",{className:"text-xs text-muted-foreground px-2",children:["v",$h,Fs.length>1&&s.jsxs(Ii,{children:[s.jsx(Mi,{asChild:!0,children:s.jsxs("button",{className:"ml-1 text-primary hover:underline",children:[" v",Fs.length]})}),s.jsx(Zs,{children:Fs.map((E,D)=>s.jsxs(It,{onClick:()=>mk(D),children:["Version ",D+1]},D))})]})]})]}),Bo&&s.jsx("div",{className:"w-full h-full bg-muted/50 border border-destructive/20 rounded-lg flex flex-col items-center justify-center p-8",children:s.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto",children:s.jsx(Wr,{className:"h-8 w-8 text-destructive"})}),s.jsx("h3",{className:"text-lg font-semibold",children:"Generation Failed"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Bo}),s.jsx(I,{onClick:()=>Lh(null),variant:"outline",children:"Retry with Simplified Prompt"})]})}),s.jsx("div",{ref:i,style:{backgroundColor:"#ffffff"},className:`w-full h-full border rounded-lg shadow-sm ${Bo?"hidden":""} ${is?"border-engineering-green/30":"border-border"}`}),is&&Iv&&s.jsxs("div",{className:"absolute top-16 right-4 w-80 bg-background border border-engineering-green/20 rounded-lg shadow-lg z-40 max-h-[600px] overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[s.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(rx,{className:"h-4 w-4 text-engineering-green"}),"ISA S5.1 Symbols"]}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>Mv(!1),children:s.jsx(Wr,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs(Ff,{type:"single",collapsible:!0,children:[s.jsxs(Ma,{value:"equipment",children:[s.jsx(Da,{className:"text-sm",children:"Equipment"}),s.jsxs(Oa,{className:"text-xs space-y-2",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"TK-xxx:"})," Storage Tank"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"P-xxx:"})," Pump"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"V-xxx:"})," Pressure Vessel"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"E-xxx:"})," Heat Exchanger"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"R-xxx:"})," Reactor"]})]})]}),s.jsxs(Ma,{value:"valves",children:[s.jsx(Da,{className:"text-sm",children:"Valves"}),s.jsxs(Oa,{className:"text-xs space-y-2",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"FCV-xxx:"})," Flow Control Valve"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"TCV-xxx:"})," Temperature Control Valve"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"PCV-xxx:"})," Pressure Control Valve"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"PSV-xxx:"})," Pressure Safety Valve"]})]})]}),s.jsxs(Ma,{value:"instruments",children:[s.jsx(Da,{className:"text-sm",children:"Instruments"}),s.jsxs(Oa,{className:"text-xs space-y-2",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"FI:"})," Flow Indicator"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"TI:"})," Temperature Indicator"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"PI:"})," Pressure Indicator"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"LI:"})," Level Indicator"]})]})]})]}),s.jsx(Ff,{type:"single",collapsible:!0,children:s.jsxs(Ma,{value:"advanced",children:[s.jsx(Da,{className:"text-sm",onClick:()=>hk(!Dv),children:"Show Advanced Symbols"}),Dv&&s.jsxs(Oa,{className:"text-xs space-y-2",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"FIC:"})," Flow Indicating Controller"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"TIC:"})," Temperature Indicating Controller"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"PIC:"})," Pressure Indicating Controller"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"LIC:"})," Level Indicating Controller"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Line Ratings:"})," 150# = ASME B16.5 Class 150"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Line Ratings:"})," 300# = ASME B16.5 Class 300"]})]})]})})]})]}),is&&!Bo&&s.jsx("div",{className:"absolute bottom-8 right-8 z-30",children:s.jsxs(Ii,{children:[s.jsx(Mi,{asChild:!0,children:s.jsxs(I,{className:"shadow-lg hover:shadow-xl bg-engineering-green hover:bg-engineering-green/90",children:["Export ",s.jsx(nx,{className:"ml-2 h-4 w-4"})]})}),s.jsxs(Zs,{align:"end",children:[s.jsx(It,{onClick:()=>Bh("svg"),children:"Export as SVG"}),s.jsx(It,{onClick:()=>Bh("pdf"),children:"Export as PDF"}),s.jsx(It,{onClick:()=>Bh("dwg"),children:"Export as DWG"})]})]})}),is&&!Iv&&!Bo&&s.jsxs(I,{variant:"outline",size:"sm",className:"absolute top-16 right-4 z-30 bg-background/95 backdrop-blur-sm border-engineering-green/20 hover:bg-engineering-green/10",onClick:()=>Mv(!0),children:[s.jsx(rx,{className:"h-4 w-4 mr-2 text-engineering-green"}),"Show Legend"]})]}),_r&&s.jsxs("div",{className:"w-12 border-l border-border bg-muted/30 flex flex-col items-center py-2 gap-2",children:[s.jsx(I,{variant:Pl?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Diagram Overview",onClick:()=>Tl(!Pl),children:s.jsx(Qt,{className:"h-4 w-4"})}),s.jsx(I,{variant:Rl?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Participants / Pools & Lanes",onClick:()=>Mh(!Rl),children:s.jsx(Sd,{className:"h-4 w-4"})}),s.jsx(I,{variant:Al?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Execution Settings",onClick:()=>$o(!Al),children:s.jsx(Nd,{className:"h-4 w-4"})}),s.jsx(I,{variant:Dh?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Check Model / Validate",onClick:Fv,children:s.jsx(ar,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",title:"User / Role Panel",onClick:()=>S.info("User/Role panel - coming soon"),children:s.jsx(Sd,{className:"h-4 w-4"})}),s.jsx(I,{variant:Il?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Element Documentation",onClick:()=>Ml(!Il),children:s.jsx(Qt,{className:"h-4 w-4"})}),s.jsx(I,{variant:Cl?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Pan / Navigate Tool",onClick:wk,children:s.jsx(pP,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Search",onClick:()=>{const E=document.querySelector('input[placeholder*="Quick Search"]');E&&E.focus()},children:s.jsx(lP,{className:"h-4 w-4"})}),s.jsx("div",{className:"flex-1"}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",onClick:()=>Cv(!1),title:"Collapse Sidebar",children:s.jsx(ex,{className:"h-4 w-4"})})]}),!_r&&s.jsx("div",{className:"w-8 border-l border-border bg-muted/30 flex items-center justify-center",children:s.jsx(I,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>Cv(!0),title:"Expand Sidebar",children:s.jsx(ex,{className:"h-4 w-4 rotate-180"})})})]}),Dl&&bn&&s.jsxs("div",{className:"context-menu absolute bg-background border border-border rounded-lg shadow-lg z-50 p-3",style:{left:`${Av.x}px`,top:`${Av.y}px`,maxWidth:"280px"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b",children:[s.jsx("span",{className:"text-xs font-semibold",children:"Change to:"}),s.jsx(I,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>Br(!1),children:s.jsx(Wr,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:[(((zv=bn.type)==null?void 0:zv.includes("Event"))||bn.type==="bpmn:StartEvent"||bn.type==="bpmn:EndEvent")&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"EVENTS"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[s.jsxs("button",{onClick:()=>qn("start-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded text-xs",title:"Start Event",children:[s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-600"}),s.jsx("span",{className:"text-[8px]",children:"Start"})]}),s.jsxs("button",{onClick:()=>qn("intermediate-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded text-xs",title:"Intermediate",children:[s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-blue-600"}),s.jsx("span",{className:"text-[8px]",children:"Inter."})]}),s.jsxs("button",{onClick:()=>qn("end-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded text-xs",title:"End Event",children:[s.jsx("div",{className:"w-6 h-6 rounded-full border-4 border-red-600"}),s.jsx("span",{className:"text-[8px]",children:"End"})]})]})]}),((Uv=bn.type)==null?void 0:Uv.includes("Task"))&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"TASKS"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[s.jsxs("button",{onClick:()=>qn("task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Task",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded"}),s.jsx("span",{className:"text-[8px]",children:"Task"})]}),s.jsxs("button",{onClick:()=>qn("user-task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"User Task",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[8px]",children:"User"})]}),s.jsxs("button",{onClick:()=>qn("service-task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Service",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[8px]",children:"Service"})]}),s.jsxs("button",{onClick:()=>qn("manual-task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Manual",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),s.jsx("span",{className:"text-[8px]",children:"Manual"})]})]})]}),((Hv=bn.type)==null?void 0:Hv.includes("Gateway"))&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"GATEWAYS"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[s.jsxs("button",{onClick:()=>qn("xor-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"XOR",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-amber-600 transform rotate-45 flex items-center justify-center",children:s.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"X"})}),s.jsx("span",{className:"text-[8px]",children:"XOR"})]}),s.jsxs("button",{onClick:()=>qn("and-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"AND",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-purple-600 transform rotate-45 flex items-center justify-center",children:s.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"+"})}),s.jsx("span",{className:"text-[8px]",children:"AND"})]}),s.jsxs("button",{onClick:()=>qn("or-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"OR",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-indigo-600 transform rotate-45 flex items-center justify-center",children:s.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"O"})}),s.jsx("span",{className:"text-[8px]",children:"OR"})]})]})]}),s.jsxs("div",{className:"pt-2 border-t space-y-1",children:[s.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"CAMUNDA COLORS"}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:kk.map(E=>s.jsxs("button",{onClick:()=>{var D;if(E.color==="none")try{const A=(D=a.current)==null?void 0:D.get("modeling");A&&bn&&(A.setColor([bn],{fill:void 0,stroke:void 0}),S.success("Color removed"),Br(!1))}catch(A){console.error("Error removing color:",A),S.error("Failed to remove color")}else Sk(E.color,E.label)},className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded transition-colors",title:E.label,children:[E.color==="none"?s.jsx("div",{className:"w-6 h-6 border-2 border-dashed border-foreground rounded flex items-center justify-center",children:s.jsx(Wr,{className:"h-3 w-3"})}):s.jsx("div",{className:"w-6 h-6 rounded border-2 border-border",style:{backgroundColor:E.color}}),s.jsx("span",{className:"text-[8px] text-center leading-tight",children:E.name})]},E.name))})]}),s.jsxs("div",{className:"pt-2 border-t space-y-1",children:[s.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"CHANGE TO"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[s.jsxs("button",{onClick:()=>qn("task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Task",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded"}),s.jsx("span",{className:"text-[8px]",children:"Task"})]}),s.jsxs("button",{onClick:()=>qn("start-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Event",children:[s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-600"}),s.jsx("span",{className:"text-[8px]",children:"Event"})]}),s.jsxs("button",{onClick:()=>qn("xor-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Gateway",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-amber-600 transform rotate-45"}),s.jsx("span",{className:"text-[8px]",children:"Gateway"})]})]})]})]})]}),s.jsx(gn,{open:Ah,onOpenChange:fa,children:s.jsxs(ln,{children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Vision Modelling AI - Process from Images"}),s.jsxs(hn,{children:["Upload images containing process information:",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Handwritten notes"})," - sketches and text"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Whiteboard diagrams"})," - flow drawings and ideas"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Process sketches"})," - rough workflow designs"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Meeting notes"})," - captured process discussions"]})]}),s.jsx("p",{className:"mt-2 text-sm",children:"AI will extract text, analyze the content, and generate a professional BPMN diagram."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center",children:[s.jsx(Yh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsxs(Ke,{htmlFor:"vision-upload",className:"cursor-pointer",children:[s.jsx("span",{className:"text-sm font-medium",children:"Click to upload image"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG - handwritten or printed content"})]}),s.jsx(Rt,{id:"vision-upload",type:"file",accept:"image/*",className:"hidden",onChange:jk,disabled:En})]}),Tt&&s.jsx("div",{className:"text-center text-sm",children:s.jsxs("p",{className:"text-foreground",children:["Selected: ",s.jsx("strong",{children:Tt.name})]})}),En&&s.jsx("div",{className:"text-center space-y-2",children:s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{className:"font-medium",children:"Processing your image with AI..."}),s.jsx("p",{className:"text-xs mt-1",children:" Extracting text and analyzing content"}),s.jsx("p",{className:"text-xs",children:" Understanding process flow"}),s.jsx("p",{className:"text-xs",children:" Generating BPMN diagram"})]})})]})]})}),s.jsx(jv,{open:pt,onOpenChange:E=>{ft(E),E||Ge(null)},children:s.jsxs(_h,{children:[s.jsxs(jh,{children:[s.jsx(Nh,{children:"Apply this alternative diagram?"}),s.jsx(Sh,{children:"The current canvas will be replaced with the selected alternative. You can always undo or regenerate additional options."})]}),xe?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:xe.title}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:xe.description})]}),s.jsx(Ut,{variant:xe.complexity==="advanced"?"default":"secondary",children:xe.complexity.toUpperCase()})]}),s.jsx(hs,{className:"h-40 border rounded-md bg-muted/30",children:s.jsxs("pre",{className:"text-[11px] leading-4 p-3 whitespace-pre-wrap",children:[xe.xml.slice(0,1600),xe.xml.length>1600?`...

(Preview truncated)`:""]})})]}):s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select an alternative to preview and apply it."}),s.jsxs(Eh,{children:[s.jsx(Ch,{children:"Not now"}),s.jsx(kh,{disabled:!xe,onClick:async()=>{xe&&(await Io(xe),Ge(null),ft(!1))},children:"Apply diagram"})]})]})}),s.jsx(gn,{open:Sl,onOpenChange:Mo,children:s.jsxs(ln,{children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Share via QR Code"}),s.jsx(hn,{children:"Generate a QR code to invite collaborators with view or edit permissions"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-8 text-center bg-muted/30",children:[s.jsx(ix,{className:"h-32 w-32 mx-auto mb-4"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"QR Code will appear here"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(I,{onClick:Nk,className:"flex-1",children:"Generate QR Code"}),s.jsx(I,{variant:"outline",className:"flex-1",children:"Set Permissions"})]})]})]})}),s.jsx(gn,{open:Do,onOpenChange:E=>{Bs(E)},children:s.jsxs(ln,{className:"max-w-xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Log Agent"}),s.jsx(hn,{children:"Store and audit BPMN diagram history for compliance, recovery, and review"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center bg-muted/30",children:[s.jsx(qh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsxs(Ke,{htmlFor:"log-upload",className:"cursor-pointer flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm font-medium",children:"Click to upload log file"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV, JSON, TXT, or LOG format"})]}),s.jsx(Rt,{id:"log-upload",type:"file",accept:".csv,.json,.txt,.log",className:"hidden",onChange:Ek,disabled:En})]}),En&&s.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Analyzing log file..."}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qh,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("p",{className:"text-sm font-medium",children:"Audit trail"})]}),s.jsxs(Ut,{variant:"outline",children:[ut.length," snapshots"]})]}),s.jsx(hs,{className:"max-h-64 border rounded-md",children:s.jsx("div",{className:"divide-y",children:$e?s.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Loading audit trail..."}):ut.length?ut.map(E=>{const D=Array.isArray(E.alternative_models)?E.alternative_models[0]:void 0,A=D&&typeof D=="object"&&typeof D.preview=="string"?D.preview:void 0;return s.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:E.input_description??"Manual save"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:E.created_at?new Date(E.created_at).toLocaleString():"Timestamp unavailable"}),E.input_type&&s.jsx(Ut,{variant:"secondary",className:"mt-1 uppercase tracking-wide",children:E.input_type.replace(/[_-]/g," ")})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ii,{children:[s.jsx(Mi,{asChild:!0,children:s.jsx(I,{size:"sm",variant:"outline",children:"Download as"})}),s.jsxs(Zs,{align:"end",className:"w-44",children:[s.jsx(wd,{children:"Choose format"}),s.jsx(Ia,{}),s.jsx(It,{onClick:()=>Ls(E.generated_bpmn_xml,E.input_description??"diagram-log"),children:"BPMN (.bpmn)"}),s.jsx(It,{onClick:async()=>{try{const H=await ds(E.generated_bpmn_xml),U=new Blob([H],{type:"image/svg+xml"});Ca(U,`${E.input_description??"diagram-log"}.svg`)}catch{S.error("Failed to export SVG")}},children:"SVG (.svg)"}),s.jsx(It,{onClick:async()=>{try{const H=await ds(E.generated_bpmn_xml),U=await ka(H,"image/png");Ca(U,`${E.input_description??"diagram-log"}.png`)}catch{S.error("Failed to export PNG")}},children:"PNG (.png)"}),s.jsx(It,{onClick:async()=>{try{const H=await ds(E.generated_bpmn_xml),U=await ka(H,"image/jpeg","#ffffff");Ca(U,`${E.input_description??"diagram-log"}.jpg`)}catch{S.error("Failed to export JPG")}},children:"JPG (.jpg)"}),s.jsx(It,{onClick:async()=>{try{const H=await ds(E.generated_bpmn_xml),U=await ka(H,"image/png","#ffffff"),$=URL.createObjectURL(U),ee=window.open("","_blank");ee?(ee.document.write(`<html><head><title>${E.input_description??"diagram-log"}</title></head><body style="margin:0"><img src="${$}" style="width:100%;height:auto"/></body></html>`),ee.document.close(),setTimeout(()=>{try{ee.focus(),ee.print()}catch{}},300)):S.info("Popup blocked. Enable popups to save as PDF.")}catch{S.error("Failed to prepare PDF. Use 'Print to PDF' from the opened image.")}},children:"PDF (via Print)"})]})]}),s.jsx(I,{size:"sm",onClick:()=>Nl(E),children:"Load"})]})]}),A&&s.jsx("pre",{className:"text-xs bg-muted/60 border rounded-md p-3 whitespace-pre-wrap max-h-32 overflow-auto",children:A})]},E.id)}):s.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No historical logs archived yet."})})})]})]})]})}),s.jsx(gn,{open:$n,onOpenChange:E=>{Oo(E),E||K(null)},children:s.jsxs(ln,{className:"max-w-2xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Modelling Agent Mode"}),s.jsx(hn,{children:"Compare 5-7 AI-generated BPMN variations, from streamlined to advanced, and apply the best fit"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"How many alternative diagrams would you like to generate?"}),s.jsx(w2,{type:"single",value:String(oe),onValueChange:E=>{!E||L||at(Number(E))},className:"justify-start",children:[3,5,7].map(E=>s.jsx(_2,{value:String(E),disabled:L,className:"px-4",children:E},E))}),s.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Adjust the batch size before generating or regenerating alternatives."})]}),L?s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[s.jsx(wn,{className:"h-8 w-8 animate-spin text-primary"}),s.jsxs("div",{className:"space-y-2 text-center",children:[s.jsxs("p",{className:"text-sm font-medium",children:["Generating ",F.total||oe," alternative ",n==="pid"?"P&ID":"BPMN"," models in parallel..."]}),F.total>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Progress: ",F.completed," / ",F.total]}),s.jsxs("span",{children:[F.total?Math.round(F.completed/F.total*100):0,"%"]})]}),s.jsx("div",{className:"w-64 h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${F.total?Math.min(100,F.completed/F.total*100):0}%`}})}),F.current&&s.jsxs("p",{className:"text-xs text-muted-foreground italic",children:["Processing: ",F.current]})]}),P.length>0&&s.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:[" ",P.length," model",P.length!==1?"s":""," ready"]})]})]}):M?s.jsxs("div",{className:"border border-destructive/30 bg-destructive/10 rounded-lg p-4 space-y-3",children:[s.jsx("p",{className:"text-sm text-destructive font-medium",children:"Unable to prepare alternatives"}),s.jsx("p",{className:"text-xs text-destructive/80",children:M}),s.jsx(I,{size:"sm",variant:"outline",onClick:()=>Os(!0),children:"Retry"})]}):P.length?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[s.jsx("div",{className:"space-y-4",children:ge?s.jsxs("div",{className:"border rounded-lg p-5 space-y-4 bg-muted/40",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(La,{className:"h-4 w-4 text-primary"}),s.jsx("h4",{className:"text-base font-semibold",children:ge.title})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:ge.description})]}),s.jsx(Ut,{variant:ge.complexity==="advanced"?"default":"secondary",children:ge.complexity.toUpperCase()})]}),ge.generatedAt&&s.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Generated ",new Date(ge.generatedAt).toLocaleString()]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Diagram Preview"}),s.jsx("div",{className:"h-64 border rounded-md",style:{backgroundColor:"#ffffff"},children:s.jsx($0,{xml:ge.xml,title:ge.title})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(Ii,{children:[s.jsx(Mi,{asChild:!0,children:s.jsx(I,{size:"sm",variant:"outline",children:"Download as"})}),s.jsxs(Zs,{align:"end",className:"w-44",children:[s.jsx(wd,{children:"Choose format"}),s.jsx(Ia,{}),s.jsx(It,{onClick:()=>$s(ge),children:"BPMN (.bpmn)"}),s.jsx(It,{onClick:async()=>{try{const E=await ds(ge.xml),D=new Blob([E],{type:"image/svg+xml"});Ca(D,`${ge.title}.svg`)}catch{S.error("Failed to export SVG")}},children:"SVG (.svg)"}),s.jsx(It,{onClick:async()=>{try{const E=await ds(ge.xml),D=await ka(E,"image/png");Ca(D,`${ge.title}.png`)}catch{S.error("Failed to export PNG")}},children:"PNG (.png)"}),s.jsx(It,{onClick:async()=>{try{const E=await ds(ge.xml),D=await ka(E,"image/jpeg","#ffffff");Ca(D,`${ge.title}.jpg`)}catch{S.error("Failed to export JPG")}},children:"JPG (.jpg)"}),s.jsx(It,{onClick:async()=>{try{const E=await ds(ge.xml),D=await ka(E,"image/png","#ffffff"),A=URL.createObjectURL(D),H=window.open("","_blank");H?(H.document.write(`<html><head><title>${ge.title}</title></head><body style="margin:0"><img src="${A}" style="width:100%;height:auto"/></body></html>`),H.document.close(),setTimeout(()=>{try{H.focus(),H.print()}catch{}},300)):S.info("Popup blocked. Enable popups to save as PDF.")}catch{S.error("Failed to prepare PDF. Use 'Print to PDF' from the opened image.")}},children:"PDF (via Print)"})]})]}),s.jsx(I,{size:"sm",onClick:()=>{Ge(ge),ft(!0)},children:"Apply to canvas"})]})]}):s.jsx("div",{className:"border rounded-lg p-6 text-center text-sm text-muted-foreground bg-muted/30",children:"Select an alternative from the list to preview and apply it."})}),s.jsxs("div",{className:"border rounded-lg p-3 bg-background/70",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:["Alternatives (",P.length,")"]}),s.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Click to preview & confirm"})]}),s.jsx(hs,{className:"h-[30rem] pr-2",children:s.jsx("div",{className:"space-y-3",children:P.map(E=>{const D=E.id===Ye;return s.jsxs("button",{type:"button",onClick:()=>ce(E.id),className:`w-full text-left border rounded-lg p-3 transition-all focus:outline-none ${D?"border-primary bg-primary/10 shadow-lg":"border-border hover:shadow-md"}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:E.title}),s.jsx("p",{className:"text-xs capitalize text-muted-foreground",children:E.complexity})]}),D&&s.jsx(ar,{className:"h-5 w-5 text-primary flex-shrink-0"})]}),s.jsx("div",{className:"h-32 mt-2 rounded-md border",style:{backgroundColor:"#ffffff"},children:s.jsx($0,{xml:E.xml,title:E.title})})]},E.id)})})})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Compare variants side by side, then apply the one that fits your requirements."}),s.jsxs(I,{size:"sm",variant:"outline",onClick:()=>Os(!0),disabled:L,children:["Regenerate ",oe]})]})]}):s.jsxs("div",{className:"border rounded-lg p-6 text-center bg-muted/40",children:[s.jsx(La,{className:"h-16 w-16 mx-auto mb-4 text-primary"}),s.jsx("p",{className:"text-sm font-medium mb-2",children:"Preparing alternatives"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"We will analyze the current diagram and assemble 5-7 tailored variations, from core flow to advanced designs."}),s.jsx(I,{className:"mt-4",onClick:()=>Os(!0),disabled:L,children:"Generate alternatives"})]})]})]})}),s.jsx(gn,{open:Oe,onOpenChange:E=>{bt(E)},children:s.jsxs(ln,{className:"max-w-xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"System Use Modelling"}),s.jsx(hn,{children:"Capture visits, clicks, and on-page context to generate BPMN models from real usage"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border rounded-lg p-4 bg-muted/40 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(zp,{className:"h-10 w-10 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold",children:"Detailed Behavior Tracking"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Log page visits, clicked elements, and page copy for downstream mining."})]})]}),s.jsx(Ut,{variant:ne?"default":"outline",children:ne?"Active":"Paused"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ne?s.jsxs(s.Fragment,{children:[s.jsx(I,{variant:"destructive",className:"flex-1",onClick:()=>void Ct(),children:"Stop Tracking"}),s.jsx(I,{variant:"outline",className:"flex-1",onClick:()=>void Xe(),disabled:W.length===0,children:"Save Snapshot"})]}):s.jsx(I,{className:"flex-1",onClick:()=>{if(!u){S.error("Please sign in to enable tracking");return}Ze(!0),ct(),S.success("System tracking enabled  capturing visits, clicks, and page context.")},children:"Enable Tracking"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:["Tracked activity (",W.length,")"]}),s.jsx(hs,{className:"max-h-60 border rounded-md",children:s.jsx("div",{className:"divide-y",children:W.length?W.map(E=>s.jsxs("div",{className:"flex items-start gap-3 p-3",children:[E.type==="visit"?s.jsx(hm,{className:"h-4 w-4 mt-1 text-primary"}):s.jsx(_P,{className:"h-4 w-4 mt-1 text-primary"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium",children:E.type==="visit"?"Visited page":"User click"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(E.timestamp).toLocaleString()}),E.details.url&&s.jsx("p",{className:"text-xs break-all",children:E.details.url}),E.details.title&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Title: ",E.details.title]}),E.details.text&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:['"',E.details.text,'"']}),E.details.contentPreview&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Preview: ",E.details.contentPreview]}),E.details.tag&&s.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Element: ",E.details.tag,E.details.xpath?`  ${E.details.xpath}`:""]}),E.details.referrer&&s.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Referrer: ",E.details.referrer]})]})]},E.id)):s.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No activity captured yet. Enable tracking to begin logging interactions."})})})]})]})]})}),s.jsx(gn,{open:y,onOpenChange:E=>{if(E&&!p){S.error("Process Manager rights required");return}b(E)},children:s.jsxs(ln,{className:"max-w-2xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Process Manager Console"}),s.jsx(hn,{children:"Exercise full editing control, lock or unlock the canvas, and grant or revoke collaborator rights."})]}),p?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border rounded-lg p-4 flex items-center justify-between bg-muted/40",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Editing lock"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"When locked, collaborators can only view the diagram."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{variant:g?"default":"outline",children:g?"Locked":"Unlocked"}),s.jsx(bs,{id:"editing-lock",checked:g,onCheckedChange:E=>rs(E)})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(RP,{className:"h-4 w-4 text-primary"}),s.jsx("p",{className:"text-sm font-medium",children:"Collaborators"})]}),s.jsx(Ut,{variant:"outline",children:j.length})]}),s.jsx(hs,{className:"max-h-72 border rounded-md",children:s.jsx("div",{className:"divide-y",children:N?s.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Loading collaborators..."}):j.length?j.map(E=>{const D=E.roles.includes("admin");return s.jsxs("div",{className:"p-4 flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm font-medium flex items-center gap-2",children:[E.email,E.userId===(u==null?void 0:u.id)&&s.jsx(Ut,{variant:"outline",children:"You"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:D?"Process Manager":"Collaborator"}),s.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Last active:"," ",E.lastLogin?new Date(E.lastLogin).toLocaleString():"No activity recorded"]})]}),E.userId!==(u==null?void 0:u.id)&&(D?s.jsx(I,{variant:"outline",size:"sm",onClick:()=>pa(E.userId),children:"Remove access"}):s.jsx(I,{size:"sm",onClick:()=>Ro(E.userId),children:"Grant access"}))]},E.userId)}):s.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No collaborators found."})})})]})]}):s.jsxs("div",{className:"border rounded-lg p-6 text-center bg-muted/40 space-y-2",children:[s.jsx("p",{className:"text-sm font-medium",children:"View-only access"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"You do not have Process Manager permissions. Please contact an administrator to update access rights."})]})]})}),Pl&&s.jsx(gn,{open:Pl,onOpenChange:Tl,children:s.jsxs(ln,{className:"max-w-2xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Diagram Overview"}),s.jsx(hn,{children:"Edit process properties and metadata"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{children:"Process Name"}),s.jsx(Rt,{placeholder:"Enter process name"})]}),s.jsxs("div",{children:[s.jsx(Ke,{children:"Process ID"}),s.jsx(Rt,{placeholder:"process-id"})]}),s.jsxs("div",{children:[s.jsx(Ke,{children:"Description"}),s.jsx(Jn,{placeholder:"Enter process description",rows:4})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(I,{variant:"outline",onClick:()=>Tl(!1),children:"Cancel"}),s.jsx(I,{onClick:()=>{S.success("Properties saved"),Tl(!1)},children:"Save"})]})]})]})}),Rl&&s.jsx(gn,{open:Rl,onOpenChange:Mh,children:s.jsxs(ln,{className:"max-w-2xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Participants / Pools & Lanes"}),s.jsx(hn,{children:"Manage collaboration elements"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Manage pools, lanes, and participant assignments for your BPMN diagram."}),s.jsx(I,{onClick:()=>S.info("Add participant functionality - coming soon"),children:"Add Participant"}),s.jsx("div",{className:"flex justify-end gap-2",children:s.jsx(I,{variant:"outline",onClick:()=>Mh(!1),children:"Close"})})]})]})}),Al&&s.jsx(gn,{open:Al,onOpenChange:$o,children:s.jsxs(ln,{className:"max-w-2xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Execution Settings"}),s.jsx(hn,{children:"Configure process engine options and metadata"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{children:"Process Version"}),s.jsx(Rt,{type:"number",defaultValue:"1"})]}),s.jsxs("div",{children:[s.jsx(Ke,{children:"Process Namespace"}),s.jsx(Rt,{placeholder:"http://example.org/bpmn"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bs,{id:"executable"}),s.jsx(Ke,{htmlFor:"executable",children:"Executable Process"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(I,{variant:"outline",onClick:()=>$o(!1),children:"Cancel"}),s.jsx(I,{onClick:()=>{S.success("Settings saved"),$o(!1)},children:"Save"})]})]})]})}),Il&&s.jsx(gn,{open:Il,onOpenChange:Ml,children:s.jsxs(ln,{className:"max-w-2xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Element Documentation"}),s.jsx(hn,{children:"Add documentation for the selected element"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(Ke,{children:["Element: ",(bn==null?void 0:bn.id)||"None selected"]}),s.jsx(Jn,{placeholder:"Enter element documentation",rows:6})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(I,{variant:"outline",onClick:()=>Ml(!1),children:"Cancel"}),s.jsx(I,{onClick:()=>{S.success("Documentation saved"),Ml(!1)},children:"Save"})]})]})]})}),Dh&&s.jsx(gn,{open:Dh,onOpenChange:Oh,children:s.jsxs(ln,{className:"max-w-2xl",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Validation Results"}),s.jsx(hn,{children:"BPMN structural validation issues"})]}),s.jsxs("div",{className:"space-y-4",children:[Rv.length===0?s.jsxs("div",{className:"text-center py-8 text-green-600",children:[s.jsx(ar,{className:"h-12 w-12 mx-auto mb-2"}),s.jsx("p",{className:"font-semibold",children:"No validation issues found!"})]}):s.jsx(hs,{className:"h-[400px]",children:s.jsx("div",{className:"space-y-2",children:Rv.map((E,D)=>s.jsx("div",{className:"p-3 border border-destructive/20 rounded-lg bg-destructive/5",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(cx,{className:"h-4 w-4 text-destructive mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:E.message}),E.elementId&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Element ID: ",E.elementId]})]})]})},D))})}),s.jsx("div",{className:"flex justify-end gap-2",children:s.jsx(I,{variant:"outline",onClick:()=>Oh(!1),children:"Close"})})]})]})})]})};var u8=[" ","Enter","ArrowUp","ArrowDown"],h8=[" ","Enter"],ta="Select",[Ph,Th,p8]=Kf(ta),[To,E9]=pr(ta,[p8,Qd]),Rh=Qd(),[f8,Si]=To(ta),[m8,g8]=To(ta),j2=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:c,onValueChange:l,dir:d,name:u,autoComplete:h,disabled:p,required:f,form:m}=t,x=Rh(e),[g,w]=v.useState(null),[y,b]=v.useState(null),[j,C]=v.useState(!1),N=Vc(d),[k,P]=Dr({prop:r,defaultProp:i??!1,onChange:a,caller:ta}),[T,L]=Dr({prop:o,defaultProp:c,onChange:l,caller:ta}),R=v.useRef(null),M=g?m||!!g.closest("form"):!0,[K,F]=v.useState(new Set),te=Array.from(K).map(oe=>oe.props.value).join(";");return s.jsx(Zk,{...x,children:s.jsxs(f8,{required:f,scope:e,trigger:g,onTriggerChange:w,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:C,contentId:go(),value:T,onValueChange:L,open:k,onOpenChange:P,dir:N,triggerPointerDownPosRef:R,disabled:p,children:[s.jsx(Ph.Provider,{scope:e,children:s.jsx(m8,{scope:t.__scopeSelect,onNativeOptionAdd:v.useCallback(oe=>{F(at=>new Set(at).add(oe))},[]),onNativeOptionRemove:v.useCallback(oe=>{F(at=>{const Ye=new Set(at);return Ye.delete(oe),Ye})},[]),children:n})}),M?s.jsxs(q2,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:T,onChange:oe=>L(oe.target.value),disabled:p,form:m,children:[T===void 0?s.jsx("option",{value:""}):null,Array.from(K)]},te):null]})})};j2.displayName=ta;var E2="SelectTrigger",N2=v.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=Rh(n),o=Si(E2,n),c=o.disabled||r,l=Ot(e,o.onTriggerChange),d=Th(n),u=v.useRef("touch"),[h,p,f]=Y2(x=>{const g=d().filter(b=>!b.disabled),w=g.find(b=>b.value===o.value),y=Z2(g,x,w);y!==void 0&&o.onValueChange(y.value)}),m=x=>{c||(o.onOpenChange(!0),f()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return s.jsx(nw,{asChild:!0,...a,children:s.jsx(Me.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":K2(o.value)?"":void 0,...i,ref:l,onClick:Re(i.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&m(x)}),onPointerDown:Re(i.onPointerDown,x=>{u.current=x.pointerType;const g=x.target;g.hasPointerCapture(x.pointerId)&&g.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(m(x),x.preventDefault())}),onKeyDown:Re(i.onKeyDown,x=>{const g=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(g&&x.key===" ")&&u8.includes(x.key)&&(m(),x.preventDefault())})})})});N2.displayName=E2;var S2="SelectValue",k2=v.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...c}=t,l=Si(S2,n),{onValueNodeHasChildrenChange:d}=l,u=a!==void 0,h=Ot(e,l.onValueNodeChange);return Hn(()=>{d(u)},[d,u]),s.jsx(Me.span,{...c,ref:h,style:{pointerEvents:"none"},children:K2(l.value)?s.jsx(s.Fragment,{children:o}):a})});k2.displayName=S2;var v8="SelectIcon",C2=v.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return s.jsx(Me.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});C2.displayName=v8;var x8="SelectPortal",P2=t=>s.jsx(tw,{asChild:!0,...t});P2.displayName=x8;var na="SelectContent",T2=v.forwardRef((t,e)=>{const n=Si(na,t.__scopeSelect),[r,i]=v.useState();if(Hn(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Jd.createPortal(s.jsx(R2,{scope:t.__scopeSelect,children:s.jsx(Ph.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(A2,{...t,ref:e})});T2.displayName=na;var Nr=10,[R2,ki]=To(na),y8="SelectContentImpl",b8=Yk("SelectContent.RemoveScroll"),A2=v.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:m,hideWhenDetached:x,avoidCollisions:g,...w}=t,y=Si(na,n),[b,j]=v.useState(null),[C,N]=v.useState(null),k=Ot(e,se=>j(se)),[P,T]=v.useState(null),[L,R]=v.useState(null),M=Th(n),[K,F]=v.useState(!1),te=v.useRef(!1);v.useEffect(()=>{if(b)return Gk(b)},[b]),Wk();const oe=v.useCallback(se=>{const[Qe,...kt]=M().map(ne=>ne.ref.current),[W]=kt.slice(-1),pe=document.activeElement;for(const ne of se)if(ne===pe||(ne==null||ne.scrollIntoView({block:"nearest"}),ne===Qe&&C&&(C.scrollTop=0),ne===W&&C&&(C.scrollTop=C.scrollHeight),ne==null||ne.focus(),document.activeElement!==pe))return},[M,C]),at=v.useCallback(()=>oe([P,b]),[oe,P,b]);v.useEffect(()=>{K&&at()},[K,at]);const{onOpenChange:Ye,triggerPointerDownPosRef:ce}=y;v.useEffect(()=>{if(b){let se={x:0,y:0};const Qe=W=>{var pe,ne;se={x:Math.abs(Math.round(W.pageX)-(((pe=ce.current)==null?void 0:pe.x)??0)),y:Math.abs(Math.round(W.pageY)-(((ne=ce.current)==null?void 0:ne.y)??0))}},kt=W=>{se.x<=10&&se.y<=10?W.preventDefault():b.contains(W.target)||Ye(!1),document.removeEventListener("pointermove",Qe),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",Qe),document.addEventListener("pointerup",kt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Qe),document.removeEventListener("pointerup",kt,{capture:!0})}}},[b,Ye,ce]),v.useEffect(()=>{const se=()=>Ye(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[Ye]);const[ut,ht]=Y2(se=>{const Qe=M().filter(pe=>!pe.disabled),kt=Qe.find(pe=>pe.ref.current===document.activeElement),W=Z2(Qe,se,kt);W&&setTimeout(()=>W.ref.current.focus())}),$e=v.useCallback((se,Qe,kt)=>{const W=!te.current&&!kt;(y.value!==void 0&&y.value===Qe||W)&&(T(se),W&&(te.current=!0))},[y.value]),De=v.useCallback(()=>b==null?void 0:b.focus(),[b]),Se=v.useCallback((se,Qe,kt)=>{const W=!te.current&&!kt;(y.value!==void 0&&y.value===Qe||W)&&R(se)},[y.value]),At=r==="popper"?Hf:I2,Pt=At===Hf?{side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:m,hideWhenDetached:x,avoidCollisions:g}:{};return s.jsx(R2,{scope:n,content:b,viewport:C,onViewportChange:N,itemRefCallback:$e,selectedItem:P,onItemLeave:De,itemTextRefCallback:Se,focusSelectedItem:at,selectedItemText:L,position:r,isPositioned:K,searchRef:ut,children:s.jsx(qk,{as:b8,allowPinchZoom:!0,children:s.jsx(Kk,{asChild:!0,trapped:y.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:Re(i,se=>{var Qe;(Qe=y.trigger)==null||Qe.focus({preventScroll:!0}),se.preventDefault()}),children:s.jsx(rw,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(At,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:se=>se.preventDefault(),...w,...Pt,onPlaced:()=>F(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Re(w.onKeyDown,se=>{const Qe=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!Qe&&se.key.length===1&&ht(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let W=M().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);if(["ArrowUp","End"].includes(se.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const pe=se.target,ne=W.indexOf(pe);W=W.slice(ne+1)}setTimeout(()=>oe(W)),se.preventDefault()}})})})})})})});A2.displayName=y8;var w8="SelectItemAlignedPosition",I2=v.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=Si(na,n),o=ki(na,n),[c,l]=v.useState(null),[d,u]=v.useState(null),h=Ot(e,k=>u(k)),p=Th(n),f=v.useRef(!1),m=v.useRef(!0),{viewport:x,selectedItem:g,selectedItemText:w,focusSelectedItem:y}=o,b=v.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&d&&x&&g&&w){const k=a.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),T=a.valueNode.getBoundingClientRect(),L=w.getBoundingClientRect();if(a.dir!=="rtl"){const pe=L.left-P.left,ne=T.left-pe,Ze=k.left-ne,xe=k.width+Ze,Ge=Math.max(xe,P.width),pt=window.innerWidth-Nr,ft=cf(ne,[Nr,Math.max(Nr,pt-Ge)]);c.style.minWidth=xe+"px",c.style.left=ft+"px"}else{const pe=P.right-L.right,ne=window.innerWidth-T.right-pe,Ze=window.innerWidth-k.right-ne,xe=k.width+Ze,Ge=Math.max(xe,P.width),pt=window.innerWidth-Nr,ft=cf(ne,[Nr,Math.max(Nr,pt-Ge)]);c.style.minWidth=xe+"px",c.style.right=ft+"px"}const R=p(),M=window.innerHeight-Nr*2,K=x.scrollHeight,F=window.getComputedStyle(d),te=parseInt(F.borderTopWidth,10),oe=parseInt(F.paddingTop,10),at=parseInt(F.borderBottomWidth,10),Ye=parseInt(F.paddingBottom,10),ce=te+oe+K+Ye+at,ut=Math.min(g.offsetHeight*5,ce),ht=window.getComputedStyle(x),$e=parseInt(ht.paddingTop,10),De=parseInt(ht.paddingBottom,10),Se=k.top+k.height/2-Nr,At=M-Se,Pt=g.offsetHeight/2,se=g.offsetTop+Pt,Qe=te+oe+se,kt=ce-Qe;if(Qe<=Se){const pe=R.length>0&&g===R[R.length-1].ref.current;c.style.bottom="0px";const ne=d.clientHeight-x.offsetTop-x.offsetHeight,Ze=Math.max(At,Pt+(pe?De:0)+ne+at),xe=Qe+Ze;c.style.height=xe+"px"}else{const pe=R.length>0&&g===R[0].ref.current;c.style.top="0px";const Ze=Math.max(Se,te+x.offsetTop+(pe?$e:0)+Pt)+kt;c.style.height=Ze+"px",x.scrollTop=Qe-Se+x.offsetTop}c.style.margin=`${Nr}px 0`,c.style.minHeight=ut+"px",c.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[p,a.trigger,a.valueNode,c,d,x,g,w,a.dir,r]);Hn(()=>b(),[b]);const[j,C]=v.useState();Hn(()=>{d&&C(window.getComputedStyle(d).zIndex)},[d]);const N=v.useCallback(k=>{k&&m.current===!0&&(b(),y==null||y(),m.current=!1)},[b,y]);return s.jsx(j8,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:f,onScrollButtonChange:N,children:s.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:s.jsx(Me.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});I2.displayName=w8;var _8="SelectPopperPosition",Hf=v.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Nr,...a}=t,o=Rh(n);return s.jsx(sw,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hf.displayName=_8;var[j8,kv]=To(na,{}),Vf="SelectViewport",M2=v.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=ki(Vf,n),o=kv(Vf,n),c=Ot(e,a.onViewportChange),l=v.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Ph.Slot,{scope:n,children:s.jsx(Me.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Re(i.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const f=Math.abs(l.current-u.scrollTop);if(f>0){const m=window.innerHeight-Nr*2,x=parseFloat(h.style.minHeight),g=parseFloat(h.style.height),w=Math.max(x,g);if(w<m){const y=w+f,b=Math.min(m,y),j=y-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});M2.displayName=Vf;var D2="SelectGroup",[E8,N8]=To(D2),S8=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=go();return s.jsx(E8,{scope:n,id:i,children:s.jsx(Me.div,{role:"group","aria-labelledby":i,...r,ref:e})})});S8.displayName=D2;var O2="SelectLabel",$2=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=N8(O2,n);return s.jsx(Me.div,{id:i.id,...r,ref:e})});$2.displayName=O2;var Xd="SelectItem",[k8,L2]=To(Xd),B2=v.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=t,c=Si(Xd,n),l=ki(Xd,n),d=c.value===r,[u,h]=v.useState(a??""),[p,f]=v.useState(!1),m=Ot(e,y=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,y,r,i)}),x=go(),g=v.useRef("touch"),w=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(k8,{scope:n,value:r,disabled:i,textId:x,isSelected:d,onItemTextChange:v.useCallback(y=>{h(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(Ph.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:s.jsx(Me.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:m,onFocus:Re(o.onFocus,()=>f(!0)),onBlur:Re(o.onBlur,()=>f(!1)),onClick:Re(o.onClick,()=>{g.current!=="mouse"&&w()}),onPointerUp:Re(o.onPointerUp,()=>{g.current==="mouse"&&w()}),onPointerDown:Re(o.onPointerDown,y=>{g.current=y.pointerType}),onPointerMove:Re(o.onPointerMove,y=>{var b;g.current=y.pointerType,i?(b=l.onItemLeave)==null||b.call(l):g.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:Re(o.onKeyDown,y=>{var j;((j=l.searchRef)==null?void 0:j.current)!==""&&y.key===" "||(h8.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});B2.displayName=Xd;var ac="SelectItemText",F2=v.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,o=Si(ac,n),c=ki(ac,n),l=L2(ac,n),d=g8(ac,n),[u,h]=v.useState(null),p=Ot(e,w=>h(w),l.onItemTextChange,w=>{var y;return(y=c.itemTextRefCallback)==null?void 0:y.call(c,w,l.value,l.disabled)}),f=u==null?void 0:u.textContent,m=v.useMemo(()=>s.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:x,onNativeOptionRemove:g}=d;return Hn(()=>(x(m),()=>g(m)),[x,g,m]),s.jsxs(s.Fragment,{children:[s.jsx(Me.span,{id:l.textId,...a,ref:p}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Jd.createPortal(a.children,o.valueNode):null]})});F2.displayName=ac;var z2="SelectItemIndicator",U2=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return L2(z2,n).isSelected?s.jsx(Me.span,{"aria-hidden":!0,...r,ref:e}):null});U2.displayName=z2;var Gf="SelectScrollUpButton",H2=v.forwardRef((t,e)=>{const n=ki(Gf,t.__scopeSelect),r=kv(Gf,t.__scopeSelect),[i,a]=v.useState(!1),o=Ot(e,r.onScrollButtonChange);return Hn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollTop>0;a(d)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(G2,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});H2.displayName=Gf;var Wf="SelectScrollDownButton",V2=v.forwardRef((t,e)=>{const n=ki(Wf,t.__scopeSelect),r=kv(Wf,t.__scopeSelect),[i,a]=v.useState(!1),o=Ot(e,r.onScrollButtonChange);return Hn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<d;a(u)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(G2,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});V2.displayName=Wf;var G2=v.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=ki("SelectScrollButton",n),o=v.useRef(null),c=Th(n),l=v.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return v.useEffect(()=>()=>l(),[l]),Hn(()=>{var u;const d=c().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[c]),s.jsx(Me.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Re(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Re(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Re(i.onPointerLeave,()=>{l()})})}),C8="SelectSeparator",W2=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(Me.div,{"aria-hidden":!0,...r,ref:e})});W2.displayName=C8;var qf="SelectArrow",P8=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Rh(n),a=Si(qf,n),o=ki(qf,n);return a.open&&o.position==="popper"?s.jsx(iw,{...i,...r,ref:e}):null});P8.displayName=qf;var T8="SelectBubbleInput",q2=v.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=v.useRef(null),a=Ot(r,i),o=$S(e);return v.useEffect(()=>{const c=i.current;if(!c)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const h=new Event("change",{bubbles:!0});u.call(c,e),c.dispatchEvent(h)}},[o,e]),s.jsx(Me.select,{...n,style:{...Ow,...n.style},ref:a,defaultValue:e})});q2.displayName=T8;function K2(t){return t===""||t===void 0}function Y2(t){const e=Zn(t),n=v.useRef(""),r=v.useRef(0),i=v.useCallback(o=>{const c=n.current+o;e(c),function l(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(c)},[e]),a=v.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function Z2(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=R8(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const l=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function R8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var A8=j2,X2=N2,I8=k2,M8=C2,D8=P2,J2=T2,O8=M2,Q2=$2,ek=B2,$8=F2,L8=U2,tk=H2,nk=V2,rk=W2;const ws=A8,_s=I8,Yr=v.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(X2,{ref:r,className:Y("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(M8,{asChild:!0,children:s.jsx(um,{className:"h-4 w-4 opacity-50"})})]}));Yr.displayName=X2.displayName;const sk=v.forwardRef(({className:t,...e},n)=>s.jsx(tk,{ref:n,className:Y("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(nP,{className:"h-4 w-4"})}));sk.displayName=tk.displayName;const ik=v.forwardRef(({className:t,...e},n)=>s.jsx(nk,{ref:n,className:Y("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(um,{className:"h-4 w-4"})}));ik.displayName=nk.displayName;const Zr=v.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>s.jsx(D8,{children:s.jsxs(J2,{ref:i,className:Y("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(sk,{}),s.jsx(O8,{className:Y("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(ik,{})]})}));Zr.displayName=J2.displayName;const B8=v.forwardRef(({className:t,...e},n)=>s.jsx(Q2,{ref:n,className:Y("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));B8.displayName=Q2.displayName;const Ee=v.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(ek,{ref:r,className:Y("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(L8,{children:s.jsx(ar,{className:"h-4 w-4"})})}),s.jsx($8,{children:e})]}));Ee.displayName=ek.displayName;const F8=v.forwardRef(({className:t,...e},n)=>s.jsx(rk,{ref:n,className:Y("-mx-1 my-1 h-px bg-muted",t),...e}));F8.displayName=rk.displayName;const z8=({user:t,diagramType:e})=>{const n=tr(),{remainingPrompts:r,hasUsedAllPrompts:i,usePrompt:a,isUnlimited:o}=Ru(!!t),[c,l]=v.useState(""),[d,u]=v.useState(!1),[h,p]=v.useState(null),[f,m]=v.useState(!1),[x,g]=v.useState("en-US"),[w,y]=v.useState(null),[b,j]=v.useState(!1),[C,N]=v.useState(""),[k,P]=v.useState(!1),[T,L]=v.useState("idle"),[R,M]=v.useState("idle"),[K,F]=v.useState(!1),[te,oe]=v.useState(null),[at,Ye]=v.useState(!1),ce=v.useRef(null),ut=v.useRef(null),ht=v.useRef(null),$e=e==="bpmn"?["Create a customer onboarding process","Design an order fulfillment workflow","Build a support ticket resolution process","Generate an employee hiring workflow","Create an invoice approval process"]:["Create a chemical reactor cooling system","Design a water treatment process flow","Build a distillation column control loop","Generate a pump and valve configuration","Create a heat exchanger system"];v.useEffect(()=>{const W=e==="bpmn"?"generatedBpmn":"generatedPid",pe=localStorage.getItem(W);if(pe){p(pe),localStorage.removeItem(W),localStorage.removeItem("diagramType");const ne=e==="bpmn"?"BPMN":"P&ID";S.success(`Your generated ${ne} diagram is ready!`,{description:"You can now view and edit your process diagram"}),setTimeout(()=>{var Ze;(Ze=document.getElementById("bpmn-viewer"))==null||Ze.scrollIntoView({behavior:"smooth",block:"start"})},500)}},[e]),v.useEffect(()=>{if(!te)return;let W;const pe=async()=>{const{data:xe,error:Ge}=await X.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",te).single();if(Ge){console.error("Error checking job status:",Ge);return}if(console.log("Job status:",xe.status),xe.status==="completed"&&xe.bpmn_xml){const pt=e==="bpmn"?"BPMN":"P&ID";p(xe.bpmn_xml),M("idle"),u(!1),oe(null),j(!1),y(null),S.success(`${pt} diagram generated successfully!`),setTimeout(()=>{var ft;(ft=document.getElementById("bpmn-viewer"))==null||ft.scrollIntoView({behavior:"smooth",block:"start"})},500),W&&clearInterval(W)}else if(xe.status==="failed"){const pt=xe.error_message||"Processing failed. Please try again.";M("idle"),u(!1),oe(null),S.error("Upload failed",{description:pt,action:{label:"Retry",onClick:()=>{}},duration:1e4}),W&&clearInterval(W)}},ne=X.channel(`job-${te}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${te}`},xe=>{const Ge=xe.new;if(console.log("Realtime job status update:",Ge.status),Ge.status==="completed"&&Ge.bpmn_xml){const pt=e==="bpmn"?"BPMN":"P&ID";p(Ge.bpmn_xml),M("idle"),u(!1),oe(null),j(!1),y(null),S.success(`${pt} diagram generated successfully!`),setTimeout(()=>{var ft;(ft=document.getElementById("bpmn-viewer"))==null||ft.scrollIntoView({behavior:"smooth",block:"start"})},500),W&&clearInterval(W)}else if(Ge.status==="failed"){const pt=Ge.error_message||"Processing failed. Please try again.";M("idle"),u(!1),oe(null),S.error("Upload failed",{description:pt,action:{label:"Retry",onClick:()=>{w&&Qe()}},duration:1e4}),W&&clearInterval(W)}}).subscribe();W=window.setInterval(pe,3e3),pe();const Ze=window.setTimeout(()=>{W&&clearInterval(W);const xe="Processing timed out - Please try refreshing the page or contact support";M("idle"),u(!1),oe(null),S.error("Upload failed",{description:xe,action:{label:"Retry",onClick:()=>{w&&Qe()}},duration:1e4})},3e5);return()=>{clearTimeout(Ze),X.removeChannel(ne),W&&clearInterval(W)}},[te,e,w]);const De=async W=>{var ne,Ze;if(d)return;if(!W.trim()){S.error("Please enter a process description");return}if(!t&&i){S.error("You've used all 5 free prompts. Please sign up to continue!"),n("/auth");return}if(!t&&!a()){S.error("You've used all 5 free prompts. Please sign up to continue!"),n("/auth");return}u(!0);const pe=e==="bpmn"?"BPMN":"P&ID";M("reading"),await new Promise(xe=>setTimeout(xe,500)),M("generating");try{const{invokeFunction:xe}=await Ar(async()=>{const{invokeFunction:ft}=await Promise.resolve().then(()=>Fm);return{invokeFunction:ft}},void 0),{data:Ge,error:pt}=await xe("generate-bpmn",{prompt:W,diagramType:e},{deduplicate:!0});if(pt){console.error("Function error:",pt),M("idle"),(ne=pt.message)!=null&&ne.includes("429")?S.error("Rate limit exceeded. Please try again in a moment."):(Ze=pt.message)!=null&&Ze.includes("402")?S.error("AI credits depleted. Please add more credits to continue."):S.error(`Failed to generate ${pe} model`);return}M("drawing"),await new Promise(ft=>setTimeout(ft,500)),Ge!=null&&Ge.bpmnXml?(p(Ge.bpmnXml),M("idle"),S.success(`${pe} model generated successfully!`)):(M("idle"),S.error("No diagram data received"))}catch(xe){console.error("Error generating BPMN:",xe),M("idle"),S.error("An error occurred while generating the model")}finally{u(!1)}},Se=()=>{De(c),l("")},At=W=>{l(W)},Pt=async W=>{var ft,zt;const pe="dataTransfer"in W?(ft=W.dataTransfer.files)==null?void 0:ft[0]:(zt=W.target.files)==null?void 0:zt[0];if(!pe)return;const{data:{user:ne},error:Ze}=await X.auth.getUser();if(Ze||!ne){S.error("Please log in to upload and analyze documents"),n("/auth");return}if(!["image/png","image/jpeg","image/jpg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(pe.type)){S.error("Please upload an image, PDF, Word document, or text file");return}u(!0);const Ge=e==="bpmn"?"BPMN":"P&ID";S.info(`Analyzing document and generating ${Ge}...`);const pt=new FileReader;pt.onloadend=async()=>{const On=pt.result;y({name:pe.name,type:pe.type,base64:On}),j(!0),u(!1),S.success(`File uploaded! Review the preview before generating ${Ge}.`)},pt.readAsDataURL(pe)},se=async()=>{if(f)ut.current&&ut.current.state==="recording"&&ut.current.stop(),ht.current&&(ht.current.getTracks().forEach(W=>W.stop()),ht.current=null),m(!1),ut.current=null;else try{const W=await navigator.mediaDevices.getUserMedia({audio:!0});ht.current=W;const pe=new MediaRecorder(W),ne=[];pe.ondataavailable=Ze=>{ne.push(Ze.data)},pe.onstop=async()=>{const Ze=new Blob(ne,{type:"audio/webm"}),xe=new FileReader;xe.readAsDataURL(Ze),xe.onloadend=async()=>{var pt;const Ge=(pt=xe.result)==null?void 0:pt.toString().split(",")[1];try{const{data:ft,error:zt}=await X.functions.invoke("speech-to-text",{body:{audio:Ge,language:x}});if(zt)throw zt;ft!=null&&ft.text&&(l(ft.text),S.success("Voice recorded successfully!"))}catch(ft){console.error("Speech-to-text error:",ft),S.error("Failed to convert speech to text.")}},ht.current&&(ht.current.getTracks().forEach(Ge=>Ge.stop()),ht.current=null)},pe.start(),ut.current=pe,m(!0),S.info("Recording... Click again to stop")}catch(W){console.error("Error accessing microphone:",W),S.error("Could not access microphone. Please check permissions.")}},Qe=async()=>{if(w){u(!0),j(!1),M("reading"),await new Promise(W=>setTimeout(W,500)),M("generating");try{const{data:{user:W}}=await X.auth.getUser();if(!W){M("idle"),S.error("Please log in to continue"),n("/auth");return}const pe=w.base64.length*.75,ne=200*1024*1024;if(pe>ne){M("idle"),u(!1),S.error("File too large",{description:"Maximum file size is 200 MB. Please select a smaller file."});return}const Ze=S.loading("Processing your file...",{description:"This may take 30-60 seconds for complex diagrams"}),{data:xe,error:Ge}=await X.functions.invoke("vision-to-bpmn",{body:{imageBase64:w.base64,diagramType:e}});if(S.dismiss(Ze),Ge){console.error("Vision AI error:",Ge),M("idle"),u(!1);const pt=Ge.message||"Failed to start diagram generation";S.error("Upload failed",{description:pt,action:{label:"Retry",onClick:()=>{Qe()}},duration:1e4});return}if(!xe||!xe.jobId){M("idle"),u(!1),S.error("Upload failed",{description:"Failed to start processing",action:{label:"Retry",onClick:()=>{Qe()}},duration:1e4});return}oe(xe.jobId),M("generating"),S.info("Processing started",{description:"We'll notify you when your diagram is ready (this may take 1-2 minutes)"})}catch(W){console.error("Vision AI processing error:",W),M("idle"),u(!1);const pe=W instanceof Error?W.message:"Network error - Please check your connection and try again";S.error("Upload failed",{description:pe,action:{label:"Retry",onClick:()=>{Qe()}},duration:1e4})}}},kt=async()=>{if(!h||!C.trim()){const ne=e==="bpmn"?"BPMN":"P&ID";S.error(`Please enter instructions to refine the ${ne}`);return}const{data:{user:W}}=await X.auth.getUser();if(!W){const ne=e==="bpmn"?"BPMN":"P&ID";S.error(`Please log in to refine ${ne}`),n("/auth");return}P(!0);const pe=e==="bpmn"?"BPMN":"P&ID";S.info(`Refining ${pe} based on your instructions...`),L("analyzing"),await new Promise(ne=>setTimeout(ne,500)),L("refining");try{const{data:ne,error:Ze}=await X.functions.invoke("refine-bpmn",{body:{currentBpmnXml:h,instructions:C,userId:W.id,diagramType:e}});if(Ze){console.error("Refinement error:",Ze),L("idle");const xe=Ze.message||JSON.stringify(Ze);xe.includes("429")?S.error("Rate limit exceeded. Please try again in a moment."):xe.includes("402")?S.error("AI credits depleted. Please add more credits to continue."):xe.includes("401")||xe.includes("Authentication")?(S.error("Authentication required. Please log in again."),n("/auth")):S.error(`Failed to refine ${pe}: ${xe}`);return}if(ne!=null&&ne.error){console.error("Refinement error in response:",ne.error),L("idle");const xe=typeof ne.error=="string"?ne.error:JSON.stringify(ne.error);xe.includes("402")?S.error("AI credits depleted. Please add more credits to continue."):xe.includes("401")||xe.includes("Authentication")?(S.error("Authentication required. Please log in again."),n("/auth")):S.error(`Failed to refine ${pe}: ${xe}`);return}if(ne!=null&&ne.bpmnXml){L("applying"),await new Promise(Ge=>setTimeout(Ge,300));const xe=ne.bpmnXml.includes("</bpmn:definitions>")||ne.bpmnXml.includes("</definitions>");ne.bpmnXml.includes("<?xml")&&xe?(p(ne.bpmnXml),L("idle"),S.success(`${pe} refined successfully!`),N("")):(console.error("Received invalid diagram XML:",ne.bpmnXml.substring(0,200)),L("idle"),S.error("Received invalid diagram structure. Please try again."))}else console.error("No refined diagram received. Response:",ne),L("idle"),S.error("No refined diagram received. The function may not be deployed or there was an error.")}catch(ne){console.error("BPMN refinement error:",ne),L("idle");const Ze=ne instanceof Error?ne.message:String(ne);Ze.includes("Failed to fetch")||Ze.includes("load the resource")?S.error("Network error: Unable to reach refine-bpmn function. Please check if the function is deployed."):S.error(`Failed to refine ${e==="bpmn"?"BPMN":"P&ID"}: ${Ze}`)}finally{P(!1)}};return s.jsx("section",{className:"py-24 bg-muted/20 relative","data-section":"try-prossmind",children:s.jsxs("div",{className:"container mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-12 slide-up",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Try ",s.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"ProssMind!"})]}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:e==="bpmn"?"Describe your business process, upload an image, PDF, Word doc, or text file - AI will generate a BPMN diagram for you":"Describe your P&ID process, upload an image, PDF, Word doc, or text file - AI will generate a P&ID diagram for you"})]}),s.jsxs("div",{className:"max-w-5xl mx-auto mt-12 space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-muted/50 to-muted/30 rounded-2xl p-8 border border-border/50 slide-up stagger-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:s.jsx(Qa,{className:"h-5 w-5 text-primary"})}),s.jsxs("h3",{className:"font-semibold text-lg",children:["Try these ",e==="bpmn"?"BPMN":"P&ID"," examples:"]})]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:$e.map((W,pe)=>s.jsx(I,{variant:"outline",size:"sm",onClick:()=>At(W),className:"text-sm hover:bg-primary/10 hover:border-primary/50 transition-all whitespace-nowrap",disabled:d,style:{minWidth:"max-content",paddingLeft:"1.2em",paddingRight:"1.2em"},"aria-label":`Use suggestion: ${W}`,children:W},pe))})]}),s.jsx("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl slide-up stagger-2",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Um,{defaultValue:"prompt",className:"w-full",children:[s.jsxs(Tu,{className:"grid w-full grid-cols-3 bg-muted/50",children:[s.jsxs(vs,{value:"prompt",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[s.jsx(fm,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Prompt"})]}),s.jsxs(vs,{value:"voice",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[s.jsx(lc,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Voice"})]}),s.jsxs(vs,{value:"attachment",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[s.jsx(dc,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Attachment"})]})]}),s.jsx(xs,{value:"prompt",className:"mt-4",children:s.jsx(Jn,{placeholder:`Describe your ${e==="bpmn"?"business process":"P&ID process"} step by step...`,value:c,onChange:W=>l(W.target.value),className:"min-h-[120px] resize-none border-muted",style:{paddingLeft:"1.2em",paddingRight:"1.2em"},disabled:d})}),s.jsx(xs,{value:"voice",className:"mt-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hp,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs(ws,{value:x,onValueChange:g,children:[s.jsx(Yr,{className:"w-[200px] h-8",children:s.jsx(_s,{placeholder:"Select language"})}),s.jsxs(Zr,{children:[s.jsx(Ee,{value:"en-US",children:"English (US)"}),s.jsx(Ee,{value:"en-GB",children:"English (UK)"}),s.jsx(Ee,{value:"es-ES",children:"Spanish"}),s.jsx(Ee,{value:"fr-FR",children:"French"}),s.jsx(Ee,{value:"de-DE",children:"German"}),s.jsx(Ee,{value:"it-IT",children:"Italian"}),s.jsx(Ee,{value:"pt-BR",children:"Portuguese (Brazil)"}),s.jsx(Ee,{value:"pt-PT",children:"Portuguese (Portugal)"}),s.jsx(Ee,{value:"ru-RU",children:"Russian"}),s.jsx(Ee,{value:"ja-JP",children:"Japanese"}),s.jsx(Ee,{value:"ko-KR",children:"Korean"}),s.jsx(Ee,{value:"zh-CN",children:"Chinese (Simplified)"}),s.jsx(Ee,{value:"zh-TW",children:"Chinese (Traditional)"}),s.jsx(Ee,{value:"ar-SA",children:"Arabic"}),s.jsx(Ee,{value:"hi-IN",children:"Hindi"})]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Voice recognition language"})]}),s.jsx(I,{variant:"outline",onClick:se,disabled:d,className:f?"text-red-500 border-red-500":"w-full",children:f?s.jsxs(s.Fragment,{children:[s.jsx(Vp,{className:"h-4 w-4 mr-2 animate-pulse"}),"Click to Stop Recording"]}):s.jsxs(s.Fragment,{children:[s.jsx(lc,{className:"h-4 w-4 mr-2"}),"Start Voice Recording"]})})]})}),s.jsx(xs,{value:"attachment",className:"mt-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:ce,type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:Pt,className:"hidden"}),s.jsxs("div",{onDragOver:W=>{W.preventDefault(),Ye(!0)},onDragLeave:()=>Ye(!1),onDrop:W=>{W.preventDefault(),Ye(!1),Pt(W)},className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${at?"border-primary bg-primary/5 scale-[1.02]":"border-border hover:border-primary/50"}`,children:[s.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Yi,{className:"h-5 w-5","aria-hidden":"true"}),s.jsx("span",{className:"text-xs",children:"PNG/JPG"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Qt,{className:"h-5 w-5","aria-hidden":"true"}),s.jsx("span",{className:"text-xs",children:"PDF"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Up,{className:"h-5 w-5","aria-hidden":"true"}),s.jsx("span",{className:"text-xs",children:"DOCX"})]})]}),s.jsxs(I,{variant:"outline",onClick:()=>{var W;return(W=ce.current)==null?void 0:W.click()},disabled:d,className:"w-full","aria-label":"Upload file",children:[s.jsx(dc,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload File"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Drag and drop a file here or click to browse"})]})]})})]}),d&&R!=="idle"&&s.jsxs("div",{className:"space-y-3 p-4 bg-muted/50 rounded-lg border border-border",children:[s.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Processing your document..."}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:R==="reading"?"font-semibold":"text-muted-foreground",children:[R==="reading"&&s.jsx(wn,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),R!=="reading"&&" ","Step 1: Reading prompt..."]}),R==="reading"&&s.jsx(or,{value:33,className:"w-24","aria-label":"Progress: 33%"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:R==="generating"?"font-semibold":R==="drawing"?"text-muted-foreground":"",children:[R==="generating"&&s.jsx(wn,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),R!=="generating"&&R!=="reading"&&" ","Step 2: Generating..."]}),R==="generating"&&s.jsx(or,{value:66,className:"w-24","aria-label":"Progress: 66%"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:R==="drawing"?"font-semibold":"text-muted-foreground",children:[R==="drawing"&&s.jsx(wn,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),R!=="drawing"&&R!=="generating"&&R!=="reading"&&" ","Step 3: Drawing Diagram..."]}),R==="drawing"&&s.jsx(or,{value:100,className:"w-24","aria-label":"Progress: 100%"})]})]}),s.jsxs(I,{onClick:Se,className:"gap-2 shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all w-full",size:"lg",disabled:d||!c.trim(),"aria-label":`Generate ${e==="bpmn"?"BPMN":"P&ID"} diagram`,children:[d?"Generating...":`Generate ${e==="bpmn"?"BPMN":"P&ID"}`,s.jsx(Ed,{className:"h-4 w-4","aria-hidden":"true"})]})]})}),b&&w&&s.jsxs("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Preview Uploaded File"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm font-medium mb-2",children:["File: ",w.name]}),w.type.startsWith("image/")&&s.jsx("div",{className:"mt-4 max-h-96 overflow-auto",children:s.jsx("img",{src:w.base64,alt:"Preview",className:"max-w-full rounded border"})}),w.extractedText&&s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Extracted Content Preview:"}),s.jsx("div",{className:"bg-background rounded p-3 max-h-48 overflow-auto text-xs",children:w.extractedText})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(I,{onClick:Qe,className:"flex-1",disabled:d,children:d?"Generating...":`Generate ${e==="bpmn"?"BPMN":"P&ID"} from this file`}),s.jsx(I,{variant:"outline",onClick:()=>{j(!1),y(null)},children:"Cancel"})]})]})]}),h&&s.jsx("div",{id:"bpmn-viewer",className:"mt-12",children:s.jsx(Sv,{xml:h,onSave:p,diagramType:e,onRefine:()=>F(!0)})}),s.jsx(gn,{open:K,onOpenChange:F,children:s.jsxs(ln,{className:"sm:max-w-[500px]",children:[s.jsxs(dn,{children:[s.jsxs(un,{children:["Refine ",e==="bpmn"?"BPMN":"P&ID"," Diagram"]}),s.jsxs(hn,{children:["Describe the changes you'd like to make to your ",e==="bpmn"?"BPMN":"P&ID"," diagram"]})]}),s.jsx(Jn,{value:C,onChange:W=>N(W.target.value),placeholder:`e.g., "Add a ${e==="bpmn"?"decision gateway":"control valve"} after the first ${e==="bpmn"?"task":"process unit"}"`,className:"min-h-[120px]"}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(I,{variant:"outline",onClick:()=>{F(!1),N("")},children:"Cancel"}),s.jsx(I,{onClick:kt,disabled:k||!C.trim(),children:k?"Refining...":"Apply Changes"})]})]})})]})]})})};async function U8(t){const{data:e,error:n}=await X.from("vision_bpmn_jobs").select("bpmn_xml").eq("id",t).single();return n||!(e!=null&&e.bpmn_xml)?(console.error("Failed to load job result:",n),null):e.bpmn_xml}function H8(){const[t,e]=v.useState(null),[n,r]=v.useState(null),{jobId:i}=Ik();return v.useEffect(()=>{X.auth.getSession().then(({data:{session:o}})=>{r((o==null?void 0:o.user)??null)});const{data:{subscription:a}}=X.auth.onAuthStateChange((o,c)=>{r((c==null?void 0:c.user)??null)});return()=>a.unsubscribe()},[]),v.useEffect(()=>{i&&(async()=>{try{const o=await U8(i);e(o)}catch(o){console.error("Error loading job result:",o)}})()},[i]),s.jsx(dt,{children:s.jsxs("div",{className:"flex flex-col gap-8",children:[s.jsx(z8,{user:n,diagramType:"pid"}),t&&s.jsx(Sv,{xml:t,diagramType:"pid"})]})})}async function V8(t){try{const{data:e,error:n}=await X.from("projects").insert(t).select().single();return n?{data:null,error:new Error(n.message)}:{data:e,error:null}}catch(e){return{data:null,error:e instanceof Error?e:new Error("Unknown error")}}}async function G8(t,e){try{let n=X.from("projects").select("*").eq("user_id",t).order("last_accessed_at",{ascending:!1});e!=null&&e.diagramType&&e.diagramType!=="all"&&(n=n.eq("diagram_type",e.diagramType));const{data:r,error:i}=await n;return i?{data:null,error:new Error(i.message)}:{data:r,error:null}}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}async function W8(t,e,n){try{const{data:r,error:i}=await X.from("projects").update(n).eq("id",t).eq("user_id",e).select().single();return i?{data:null,error:new Error(i.message)}:{data:r,error:null}}catch(r){return{data:null,error:r instanceof Error?r:new Error("Unknown error")}}}async function q8(t,e){try{const{error:n}=await X.from("projects").delete().eq("id",t).eq("user_id",e);return n?{error:new Error(n.message)}:{error:null}}catch(n){return{error:n instanceof Error?n:new Error("Unknown error")}}}async function ak(t,e){try{const{error:n}=await X.from("projects").update({last_accessed_at:new Date().toISOString()}).eq("id",t).eq("user_id",e);return n?{error:new Error(n.message)}:{error:null}}catch(n){return{error:n instanceof Error?n:new Error("Unknown error")}}}async function K8(t,e=6){try{const{data:n,error:r}=await X.from("projects").select("*").eq("user_id",t).order("last_accessed_at",{ascending:!1}).limit(e);return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}const L0=({user:t})=>{const e=tr(),{remainingPrompts:n,isUnlimited:r}=Ru(!0),[i,a]=v.useState([]),[o,c]=v.useState(!0);v.useEffect(()=>{const d=async()=>{c(!0);const{data:u,error:h}=await K8(t.id,6);h?(console.error("Failed to load recent projects:",h),a([])):u&&a(u),c(!1)};t!=null&&t.id&&d()},[t==null?void 0:t.id]);const l=async d=>{await ak(d.id,t.id);const u=d.diagram_type==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(u,d.bpmn_xml),localStorage.setItem("diagramType",d.diagram_type),localStorage.setItem("currentProjectId",d.id);const h=d.diagram_type==="bpmn"?"/bpmn-generator":"/pid-generator";fn(e,h)};return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Dashboard"}),s.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",t.email]})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[s.jsxs(re,{className:"cursor-pointer hover:shadow-lg transition-shadow flex flex-col",onClick:()=>fn(e,"/bpmn-generator"),children:[s.jsxs(fe,{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[s.jsx(Qn,{className:"h-10 w-10 text-primary mb-4"}),s.jsx(me,{children:"New BPMN Diagram"})]}),s.jsx(_e,{className:"text-center",children:"Create a new business process diagram"})]}),s.jsx(ue,{className:"mt-auto",children:s.jsxs(I,{className:"w-full",onClick:d=>{d.stopPropagation(),fn(e,"/bpmn-generator")},children:[s.jsx(uc,{className:"h-4 w-4 mr-2"}),"Create BPMN"]})})]}),s.jsxs(re,{className:"cursor-pointer hover:shadow-lg transition-shadow flex flex-col",onClick:()=>fn(e,"/pid-generator"),children:[s.jsxs(fe,{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[s.jsx(Qi,{className:"h-10 w-10 text-primary mb-4"}),s.jsx(me,{children:"New P&ID Diagram"})]}),s.jsx(_e,{className:"text-center",children:"Create a new piping and instrumentation diagram"})]}),s.jsx(ue,{className:"mt-auto",children:s.jsxs(I,{className:"w-full",onClick:d=>{d.stopPropagation(),fn(e,"/pid-generator")},children:[s.jsx(uc,{className:"h-4 w-4 mr-2"}),"Create P&ID"]})})]}),s.jsxs(re,{className:"cursor-pointer hover:shadow-lg transition-shadow flex flex-col",onClick:()=>fn(e,"/vision-ai"),children:[s.jsxs(fe,{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[s.jsx(Ns,{className:"h-10 w-10 text-primary mb-4"}),s.jsx(me,{children:"Vision AI"})]}),s.jsx(_e,{className:"text-center",children:"Upload images to generate diagrams"})]}),s.jsx(ue,{className:"mt-auto",children:s.jsxs(I,{className:"w-full",onClick:d=>{d.stopPropagation(),fn(e,"/vision-ai")},children:[s.jsx(uc,{className:"h-4 w-4 mr-2"}),"Upload Image"]})})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs(re,{className:"flex flex-col",children:[s.jsxs(fe,{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[s.jsx("div",{className:"h-10 w-10 mb-4 flex items-center justify-center",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-primary font-bold text-xl",children:""})})}),s.jsx(me,{children:"Usage Statistics"})]}),s.jsx(_e,{className:"text-center",children:"Your current plan usage"})]}),s.jsxs(ue,{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"space-y-4 flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Free Prompts Remaining"}),s.jsx("span",{className:"text-2xl font-bold",children:r?"":n})]}),!r&&s.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${n/5*100}%`}})})]}),s.jsx("div",{className:"mt-auto pt-4",children:s.jsx(I,{variant:"outline",className:"w-full",onClick:()=>fn(e,"/settings"),children:"View Plan Details"})})]})]}),s.jsxs(re,{className:"flex flex-col",children:[s.jsxs(fe,{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[s.jsx("div",{className:"h-10 w-10 mb-4 flex items-center justify-center",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(hu,{className:"h-5 w-5 text-primary"})})}),s.jsx(me,{children:"Recent Projects"})]}),s.jsx(_e,{className:"text-center",children:"Your recently created diagrams"})]}),s.jsxs(ue,{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"flex-1",children:o?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(wn,{className:"h-6 w-6 animate-spin text-primary"})}):i.length>0?s.jsx("div",{className:"space-y-3",children:i.map(d=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>l(d),children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[d.diagram_type==="bpmn"?s.jsx(Qn,{className:"h-4 w-4 text-primary flex-shrink-0"}):s.jsx(Qi,{className:"h-4 w-4 text-primary flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm truncate",children:d.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.diagram_type==="bpmn"?"BPMN":"P&ID","  ",new Date(d.last_accessed_at).toLocaleDateString()]})]})]}),s.jsx(Qt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]},d.id))}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Qt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No recent projects"}),s.jsx("p",{className:"text-sm mt-2",children:"Create your first diagram to get started"})]})}),s.jsx("div",{className:"mt-auto pt-4",children:s.jsx(I,{variant:"outline",className:"w-full",onClick:()=>fn(e,"/projects"),children:"View All Projects"})})]})]})]})]})})},Y8=({user:t})=>{const e=tr(),[n,r]=v.useState([]),[i,a]=v.useState([]),[o,c]=v.useState(""),[l,d]=v.useState("all"),[u,h]=v.useState(!0),[p,f]=v.useState(!1),[m,x]=v.useState(null),[g,w]=v.useState(!1),y=async()=>{h(!0);const N=l!=="all"?{diagramType:l}:void 0,{data:k,error:P}=await G8(t.id,N);if(P){S.error("Failed to load projects"),console.error(P),h(!1);return}k&&r(k),h(!1)};v.useEffect(()=>{y()},[t.id,l]),v.useEffect(()=>{let N=n;o&&(N=N.filter(k=>{var P;return k.name.toLowerCase().includes(o.toLowerCase())||((P=k.description)==null?void 0:P.toLowerCase().includes(o.toLowerCase()))})),a(N)},[n,o]);const b=N=>{x(N),f(!0)},j=async()=>{if(!m)return;w(!0);const{error:N}=await q8(m.id,t.id);N?(S.error("Failed to delete project"),console.error(N)):(S.success("Project deleted successfully"),await y()),w(!1),f(!1),x(null)},C=async N=>{await ak(N.id,t.id);const k=N.diagram_type==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(k,N.bpmn_xml),localStorage.setItem("diagramType",N.diagram_type),localStorage.setItem("currentProjectId",N.id);const P=N.diagram_type==="bpmn"?"/bpmn-generator":"/pid-generator";fn(e,P)};return u?s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsx(dt,{children:s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsx(wn,{className:"h-8 w-8 animate-spin text-primary"})})})}):s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Projects"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your diagrams and processes"})]}),s.jsxs(I,{variant:"outline",size:"sm",onClick:y,disabled:u,children:[s.jsx(SP,{className:`h-4 w-4 mr-2 ${u?"animate-spin":""}`}),"Refresh"]})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(fu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Rt,{placeholder:"Search projects...",value:o,onChange:N=>c(N.target.value),className:"pl-10"})]}),s.jsxs(ws,{value:l,onValueChange:N=>d(N),children:[s.jsx(Yr,{className:"w-full md:w-[180px]",children:s.jsx(_s,{placeholder:"Filter by type"})}),s.jsxs(Zr,{children:[s.jsx(Ee,{value:"all",children:"All Types"}),s.jsx(Ee,{value:"bpmn",children:"BPMN"}),s.jsx(Ee,{value:"pid",children:"P&ID"})]})]}),s.jsxs(I,{onClick:()=>fn(e,"/bpmn-generator"),children:[s.jsx(Qt,{className:"h-4 w-4 mr-2"}),"New Project"]})]}),i.length>0?s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(N=>s.jsxs(re,{className:"hover:shadow-lg transition-shadow",children:[s.jsx(fe,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[N.diagram_type==="bpmn"?s.jsx(Qn,{className:"h-6 w-6 text-primary flex-shrink-0"}):s.jsx(Qi,{className:"h-6 w-6 text-primary flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(me,{className:"text-lg truncate",children:N.name}),s.jsx(_e,{children:new Date(N.created_at).toLocaleDateString()}),N.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:N.description})]})]}),s.jsx(Ut,{variant:N.diagram_type==="bpmn"?"default":"secondary",className:"ml-2 flex-shrink-0",children:N.diagram_type.toUpperCase()})]})}),s.jsx(ue,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(I,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>C(N),children:[s.jsx(mm,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsx(I,{variant:"outline",size:"sm",onClick:()=>b(N),children:s.jsx(Jc,{className:"h-4 w-4"})})]})})]},N.id))}):s.jsx(re,{children:s.jsxs(ue,{className:"flex flex-col items-center justify-center py-16",children:[s.jsx(Qt,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No projects found"}),s.jsx("p",{className:"text-muted-foreground text-center mb-6",children:o||l!=="all"?"Try adjusting your search or filters":"Create your first diagram to get started"}),s.jsxs(I,{onClick:()=>fn(e,"/bpmn-generator"),children:[s.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Create New Project"]})]})}),s.jsx(jv,{open:p,onOpenChange:f,children:s.jsxs(_h,{children:[s.jsxs(jh,{children:[s.jsx(Nh,{children:"Are you sure?"}),s.jsxs(Sh,{children:['This will permanently delete "',m==null?void 0:m.name,'". This action cannot be undone.']})]}),s.jsxs(Eh,{children:[s.jsx(Ch,{disabled:g,children:"Cancel"}),s.jsx(kh,{onClick:j,disabled:g,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:g?s.jsxs(s.Fragment,{children:[s.jsx(wn,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})})};async function Z8(t){try{let e=X.from("templates").select("*").eq("is_active",!0).order("name",{ascending:!0});t!=null&&t.category&&t.category,t!=null&&t.diagramType;const{data:n,error:r}=await e;return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(e){return{data:null,error:e instanceof Error?e:new Error("Unknown error")}}}async function X8(t,e){try{const{data:n,error:r}=await X.from("templates").select("bpmn_xml, usage_count").eq("id",t).eq("is_active",!0).single();return r||!n?{data:null,error:new Error((r==null?void 0:r.message)||"Template not found")}:(X.from("templates").update({usage_count:(n.usage_count||0)+1}).eq("id",t).then(()=>{}).catch(()=>{}),{data:n.bpmn_xml,error:null})}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}async function J8(t){try{const{data:e,error:n}=await X.from("templates").insert(t).select().single();return n?{data:null,error:new Error(n.message)}:{data:e,error:null}}catch(e){return{data:null,error:e instanceof Error?e:new Error("Unknown error")}}}async function Q8(t,e){try{const{data:n,error:r}=await X.from("templates").update(e).eq("id",t).select().single();return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}async function ez(t){try{const{error:e}=await X.from("templates").update({is_active:!1}).eq("id",t);return e?{error:new Error(e.message)}:{error:null}}catch(e){return{error:e instanceof Error?e:new Error("Unknown error")}}}async function tz(t){try{let e=X.from("templates").select("*").order("created_at",{ascending:!1});t!=null&&t.category&&t.category,t!=null&&t.diagramType;const{data:n,error:r}=await e;return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(e){return{data:null,error:e instanceof Error?e:new Error("Unknown error")}}}const nz={Users:Sd,ShoppingCart:AP,Building2:dm,Cog:cP,Factory:Qi,Workflow:Qn},rz=t=>t&&nz[t]||Qn,sz=({user:t})=>{const e=tr(),[n,r]=v.useState("all"),[i,a]=v.useState([]),[o,c]=v.useState(!0),[l,d]=v.useState(null);v.useEffect(()=>{(async()=>{c(!0),d(null);const{data:m,error:x}=await Z8();x?(d(x.message),S.error("Failed to load templates")):m&&a(m),c(!1)})()},[]);const u=["all",...Array.from(new Set(i.map(f=>f.category)))],h=n==="all"?i:i.filter(f=>f.category===n),p=async f=>{try{const{data:m,error:x}=await X8(f.id,t.id);if(x||!m){S.error("Failed to load template");return}const g=f.diagram_type==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(g,m),localStorage.setItem("diagramType",f.diagram_type),f.diagram_type==="bpmn"?fn(e,"/bpmn-generator"):fn(e,"/pid-generator"),S.success("Template loaded successfully!")}catch(m){S.error("Failed to use template"),console.error(m)}};return o?s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsx(dt,{children:s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsx(wn,{className:"h-8 w-8 animate-spin text-primary"})})})}):l?s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsx(dt,{children:s.jsx(re,{children:s.jsxs(ue,{className:"flex flex-col items-center justify-center py-16",children:[s.jsx(Qn,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Error loading templates"}),s.jsx("p",{className:"text-muted-foreground",children:l})]})})})}):s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Templates"}),s.jsx("p",{className:"text-muted-foreground",children:"Start with a pre-built process template"})]}),u.length>1&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:u.map(f=>s.jsx(I,{variant:n===f?"default":"outline",onClick:()=>r(f),className:"capitalize",children:f},f))}),h.length>0?s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(f=>{const m=rz(f.icon_name);return s.jsxs(re,{className:"hover:shadow-lg transition-shadow",children:[s.jsxs(fe,{children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx(m,{className:"h-8 w-8 text-primary"}),s.jsx(Ut,{variant:f.diagram_type==="bpmn"?"default":"secondary",children:f.diagram_type.toUpperCase()})]}),s.jsx(me,{children:f.name}),s.jsx(_e,{children:f.description||"No description available"})]}),s.jsx(ue,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ut,{variant:"outline",className:"capitalize",children:f.category}),s.jsx(I,{size:"sm",onClick:()=>p(f),children:"Use Template"})]})})]},f.id)})}):s.jsx(re,{children:s.jsxs(ue,{className:"flex flex-col items-center justify-center py-16",children:[s.jsx(Qn,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No templates found"}),s.jsx("p",{className:"text-muted-foreground",children:"Try selecting a different category"})]})})]})})},iz=({user:t})=>{const{toast:e}=Yc(),[n,r]=v.useState(t.email||""),[i,a]=v.useState(!1),o=async c=>{c.preventDefault(),a(!0);try{const{error:l}=await X.auth.updateUser({email:n});if(l)throw l;e({title:"Email update requested",description:"Please check your new email for a confirmation link."})}catch(l){e({title:"Error updating email",description:l.message,variant:"destructive"})}finally{a(!1)}};return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Account"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your account information"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(jc,{className:"h-5 w-5"}),"Profile Information"]}),s.jsx(_e,{children:"Your account details"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{children:"User ID"}),s.jsx(Rt,{value:t.id,disabled:!0,className:"mt-1 font-mono text-sm"})]}),s.jsxs("form",{onSubmit:o,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{htmlFor:"email",children:"Email Address"}),s.jsx(Rt,{id:"email",type:"email",value:n,onChange:c=>r(c.target.value),className:"mt-1"})]}),s.jsx(I,{type:"submit",disabled:i||n===t.email,children:i?"Updating...":"Update Email"})]})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Ss,{className:"h-5 w-5"}),"Security"]}),s.jsx(_e,{children:"Manage your account security"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{children:"Password"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1 mb-3",children:"Change your password to keep your account secure"}),s.jsx(I,{variant:"outline",onClick:()=>{e({title:"Password reset",description:"A password reset link has been sent to your email."})},children:"Change Password"})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsx(Ke,{children:"Account Created"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:new Date(t.created_at).toLocaleDateString()})]})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(pm,{className:"h-5 w-5"}),"Email Preferences"]}),s.jsx(_e,{children:"Manage your email notifications"})]}),s.jsx(ue,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email preferences will be available soon."})})]})]})]})})},az=({user:t})=>{const{remainingPrompts:e,isUnlimited:n}=Ru(!0),[r,i]=v.useState({email:!0,push:!1,updates:!0}),[a,o]=v.useState("en"),[c,l]=v.useState("system");return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Customize your experience"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"Plan Details"}),s.jsx(_e,{children:"Your current subscription plan"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{children:"Current Plan"}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:n?"Pro":"Free"})]}),s.jsxs("div",{children:[s.jsx(Ke,{children:"Free Prompts Remaining"}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:n?"":e})]}),s.jsx(I,{className:"w-full",children:"Upgrade Plan"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(ZC,{className:"h-5 w-5"}),"Notifications"]}),s.jsx(_e,{children:"Manage your notification preferences"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ke,{children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive updates via email"})]}),s.jsx(bs,{checked:r.email,onCheckedChange:d=>i({...r,email:d})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ke,{children:"Push Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive browser notifications"})]}),s.jsx(bs,{checked:r.push,onCheckedChange:d=>i({...r,push:d})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ke,{children:"Product Updates"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about new features"})]}),s.jsx(bs,{checked:r.updates,onCheckedChange:d=>i({...r,updates:d})})]})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Xc,{className:"h-5 w-5"}),"API Keys"]}),s.jsx(_e,{children:"Manage your API access keys"})]}),s.jsxs(ue,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"API keys allow you to integrate ProssMind with your applications."}),s.jsx(I,{variant:"outline",className:"w-full",children:"Generate API Key"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(hm,{className:"h-5 w-5"}),"Preferences"]}),s.jsx(_e,{children:"Customize your app experience"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{htmlFor:"language",children:"Language"}),s.jsxs(ws,{value:a,onValueChange:o,children:[s.jsx(Yr,{id:"language",className:"mt-1",children:s.jsx(_s,{})}),s.jsxs(Zr,{children:[s.jsx(Ee,{value:"en",children:"English"}),s.jsx(Ee,{value:"de",children:"Deutsch"}),s.jsx(Ee,{value:"fr",children:"Franais"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ke,{htmlFor:"theme",children:"Theme"}),s.jsxs(ws,{value:c,onValueChange:l,children:[s.jsx(Yr,{id:"theme",className:"mt-1",children:s.jsx(_s,{})}),s.jsxs(Zr,{children:[s.jsx(Ee,{value:"light",children:"Light"}),s.jsx(Ee,{value:"dark",children:"Dark"}),s.jsx(Ee,{value:"system",children:"System"})]})]})]})]})]})]})]})})};function oz({open:t,onOpenChange:e,onSave:n,diagramType:r="bpmn",defaultName:i="",defaultDescription:a="",isLoading:o=!1}){const[c,l]=v.useState(""),[d,u]=v.useState("");v.useEffect(()=>{t&&(l(i||""),u(a||""))},[t,i,a]);const h=()=>{c.trim()&&n(c.trim(),d.trim())},p=()=>{l(""),u(""),e(!1)},f=r==="bpmn"?"BPMN":"P&ID";return s.jsx(gn,{open:t,onOpenChange:e,children:s.jsxs(ln,{children:[s.jsxs(dn,{children:[s.jsxs(un,{children:["Save ",f," Project"]}),s.jsx(hn,{children:"Give your project a name and optional description to save it to your workspace."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ke,{htmlFor:"project-name",children:["Project Name ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Rt,{id:"project-name",placeholder:`My ${f} Diagram`,value:c,onChange:m=>l(m.target.value),onKeyDown:m=>{m.key==="Enter"&&c.trim()&&h()},maxLength:100,disabled:o})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{htmlFor:"project-description",children:"Description (Optional)"}),s.jsx(Jn,{id:"project-description",placeholder:"Add a description for your project...",value:d,onChange:m=>u(m.target.value),maxLength:500,rows:3,disabled:o})]})]}),s.jsxs(Id,{children:[s.jsx(I,{variant:"outline",onClick:p,disabled:o,children:"Cancel"}),s.jsx(I,{onClick:h,disabled:!c.trim()||o,children:o?"Saving...":"Save Project"})]})]})})}const cz=["Create a customer onboarding process","Design an order fulfillment workflow","Build a support ticket resolution process","Generate an employee hiring workflow","Create an invoice approval process"],B0=({user:t})=>{const e=tr(),n=Ps(),{remainingPrompts:r,hasUsedAllPrompts:i,usePrompt:a,isUnlimited:o}=Ru(!!t),[c,l]=v.useState(""),[d,u]=v.useState(!1),[h,p]=v.useState(null),[f,m]=v.useState("bpmn"),x=fM(),[g,w]=v.useState(!1),[y,b]=v.useState("en-US"),[j,C]=v.useState(null),[N,k]=v.useState(!1),[P,T]=v.useState(""),[L,R]=v.useState(!1),[M,K]=v.useState("idle"),[F,te]=v.useState("idle"),[oe,at]=v.useState(!1),[Ye,ce]=v.useState(null),[ut,ht]=v.useState(!1),$e=v.useRef(null),De=v.useRef(null),Se=v.useRef(null),[At,Pt]=v.useState(!1),[se,Qe]=v.useState(null),[kt,W]=v.useState(!1),[pe,ne]=v.useState(null);v.useEffect(()=>{const Q=localStorage.getItem("diagramType")||"bpmn",ge=Q==="bpmn"?"generatedBpmn":"generatedPid",ke=localStorage.getItem(ge),We=localStorage.getItem("currentProjectId");if(ke){p(ke),Qe(We),localStorage.removeItem(ge),localStorage.removeItem("diagramType"),We&&localStorage.removeItem("currentProjectId");const Ie=Q==="bpmn"?"BPMN":"P&ID";S.success(`Your generated ${Ie} diagram is ready!`,{description:"You can now view and edit your process diagram"}),setTimeout(()=>{var Xe;(Xe=document.getElementById("bpmn-viewer"))==null||Xe.scrollIntoView({behavior:"smooth",block:"start"})},500)}},[]),v.useEffect(()=>{if(!Ye)return;let Q;const ge=async()=>{const{data:Ie,error:Xe}=await X.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",Ye).single();if(Xe){console.error("Error checking job status:",Xe);return}if(console.log("Job status:",Ie.status),Ie.status==="completed"&&Ie.bpmn_xml){const ct=f==="bpmn"?"BPMN":"P&ID";p(Ie.bpmn_xml),te("idle"),u(!1),ce(null),k(!1),C(null),S.success(`${ct} diagram generated successfully!`),setTimeout(()=>{var Ct;(Ct=document.getElementById("bpmn-viewer"))==null||Ct.scrollIntoView({behavior:"smooth",block:"start"})},500),Q&&clearInterval(Q)}else if(Ie.status==="failed"){const ct=Ie.error_message||"Processing failed. Please try again.";te("idle"),u(!1),ce(null),S.error("Upload failed",{description:ct,action:{label:"Retry",onClick:()=>{}},duration:1e4}),Q&&clearInterval(Q)}},ke=X.channel(`job-${Ye}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${Ye}`},Ie=>{const Xe=Ie.new;if(console.log("Realtime job status update:",Xe.status),Xe.status==="completed"&&Xe.bpmn_xml){const ct=f==="bpmn"?"BPMN":"P&ID";p(Xe.bpmn_xml),te("idle"),u(!1),ce(null),k(!1),C(null),S.success(`${ct} diagram generated successfully!`),t&&(ne(Xe.bpmn_xml),Pt(!0)),setTimeout(()=>{var Ct;(Ct=document.getElementById("bpmn-viewer"))==null||Ct.scrollIntoView({behavior:"smooth",block:"start"})},500),Q&&clearInterval(Q)}else if(Xe.status==="failed"){const ct=Xe.error_message||"Processing failed. Please try again.";te("idle"),u(!1),ce(null),S.error("Upload failed",{description:ct,action:{label:"Retry",onClick:()=>{j&&zt()}},duration:1e4}),Q&&clearInterval(Q)}}).subscribe();Q=window.setInterval(ge,3e3),ge();const We=window.setTimeout(()=>{Q&&clearInterval(Q);const Ie="Processing timed out - Please try refreshing the page or contact support";te("idle"),u(!1),ce(null),S.error("Upload failed",{description:Ie,action:{label:"Retry",onClick:()=>{j&&zt()}},duration:1e4})},3e5);return()=>{clearTimeout(We),X.removeChannel(ke),Q&&clearInterval(Q)}},[Ye,f,j]);const Ze=async Q=>{var ke,We;if(d)return;if(!Q.trim()){S.error("Please enter a process description");return}if(!t&&i){S.error("You've used all 5 free prompts. Please sign up to continue!"),e("/auth");return}if(!t&&!a()){S.error("You've used all 5 free prompts. Please sign up to continue!"),e("/auth");return}u(!0);const ge=f==="bpmn"?"BPMN":"P&ID";te("reading"),await new Promise(Ie=>setTimeout(Ie,500)),te("generating");try{const{invokeFunction:Ie}=await Ar(async()=>{const{invokeFunction:Ct}=await Promise.resolve().then(()=>Fm);return{invokeFunction:Ct}},void 0),{data:Xe,error:ct}=await Ie("generate-bpmn",{prompt:Q,diagramType:f},{deduplicate:!0});if(ct){console.error("Function error:",ct),te("idle"),(ke=ct.message)!=null&&ke.includes("429")?S.error("Rate limit exceeded. Please try again in a moment."):(We=ct.message)!=null&&We.includes("402")?S.error("AI credits depleted. Please add more credits to continue."):S.error(`Failed to generate ${ge} model`);return}te("drawing"),await new Promise(Ct=>setTimeout(Ct,500)),Xe!=null&&Xe.bpmnXml?(p(Xe.bpmnXml),te("idle"),S.success(`${ge} model generated successfully!`),t&&(ne(Xe.bpmnXml),Pt(!0))):(te("idle"),S.error("No diagram data received"))}catch(Ie){console.error("Error generating BPMN:",Ie),te("idle"),S.error("An error occurred while generating the model")}finally{u(!1)}},xe=()=>{Ze(c),l("")},Ge=Q=>{l(Q)},pt=async Q=>{var Ct,rs;const ge="dataTransfer"in Q?(Ct=Q.dataTransfer.files)==null?void 0:Ct[0]:(rs=Q.target.files)==null?void 0:rs[0];if(!ge)return;const{data:{user:ke},error:We}=await X.auth.getUser();if(We||!ke){S.error("Please log in to upload and analyze documents"),e("/auth");return}if(!["image/png","image/jpeg","image/jpg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(ge.type)){S.error("Please upload an image, PDF, Word document, or text file");return}u(!0);const Xe=f==="bpmn"?"BPMN":"P&ID";S.info(`Analyzing document and generating ${Xe}...`);const ct=new FileReader;ct.onloadend=async()=>{const Ro=ct.result;C({name:ge.name,type:ge.type,base64:Ro}),k(!0),u(!1),S.success(`File uploaded! Review the preview before generating ${Xe}.`)},ct.readAsDataURL(ge)},ft=async()=>{if(g)De.current&&De.current.state==="recording"&&De.current.stop(),Se.current&&(Se.current.getTracks().forEach(Q=>Q.stop()),Se.current=null),w(!1),De.current=null;else try{const Q=await navigator.mediaDevices.getUserMedia({audio:!0});Se.current=Q;const ge=new MediaRecorder(Q),ke=[];ge.ondataavailable=We=>{ke.push(We.data)},ge.onstop=async()=>{const We=new Blob(ke,{type:"audio/webm"}),Ie=new FileReader;Ie.readAsDataURL(We),Ie.onloadend=async()=>{var ct;const Xe=(ct=Ie.result)==null?void 0:ct.toString().split(",")[1];try{const{data:Ct,error:rs}=await X.functions.invoke("speech-to-text",{body:{audio:Xe,language:y},headers:t?void 0:{Authorization:""}});if(rs)throw rs;Ct!=null&&Ct.text&&(l(Ct.text),S.success("Voice recorded successfully!"))}catch(Ct){console.error("Speech-to-text error:",Ct),S.error("Failed to convert speech to text.")}},Se.current&&(Se.current.getTracks().forEach(Xe=>Xe.stop()),Se.current=null)},ge.start(),De.current=ge,w(!0),S.info("Recording... Click again to stop")}catch(Q){console.error("Error accessing microphone:",Q),S.error("Could not access microphone. Please check permissions.")}},zt=async()=>{if(j){u(!0),k(!1),te("reading"),await new Promise(Q=>setTimeout(Q,500)),te("generating");try{const{data:{user:Q}}=await X.auth.getUser();if(!Q){te("idle"),S.error("Please log in to continue"),e("/auth");return}const ge=j.base64.length*.75,ke=200*1024*1024;if(ge>ke){te("idle"),u(!1),S.error("File too large",{description:"Maximum file size is 200 MB. Please select a smaller file."});return}const We=S.loading("Processing your file...",{description:"This may take 30-60 seconds for complex diagrams"}),{data:Ie,error:Xe}=await X.functions.invoke("vision-to-bpmn",{body:{imageBase64:j.base64,diagramType:f},headers:t?void 0:{Authorization:""}});if(S.dismiss(We),Xe){console.error("Vision AI error:",Xe),te("idle"),u(!1);const ct=Xe.message||"Failed to start diagram generation";S.error("Upload failed",{description:ct,action:{label:"Retry",onClick:()=>{zt()}},duration:1e4});return}if(!Ie||!Ie.jobId){te("idle"),u(!1),S.error("Upload failed",{description:"Failed to start processing",action:{label:"Retry",onClick:()=>{zt()}},duration:1e4});return}ce(Ie.jobId),te("generating"),S.info("Processing started",{description:"We'll notify you when your diagram is ready (this may take 1-2 minutes)"})}catch(Q){console.error("Vision AI processing error:",Q),te("idle"),u(!1);const ge=Q instanceof Error?Q.message:"Network error - Please check your connection and try again";S.error("Upload failed",{description:ge,action:{label:"Retry",onClick:()=>{zt()}},duration:1e4})}}},On=async()=>{if(!h||!P.trim()){const ke=f==="bpmn"?"BPMN":"P&ID";S.error(`Please enter instructions to refine the ${ke}`);return}const{data:{user:Q}}=await X.auth.getUser();if(!Q){const ke=f==="bpmn"?"BPMN":"P&ID";S.error(`Please log in to refine ${ke}`),e("/auth");return}R(!0);const ge=f==="bpmn"?"BPMN":"P&ID";S.info(`Refining ${ge} based on your instructions...`),K("analyzing"),await new Promise(ke=>setTimeout(ke,500)),K("refining");try{const{data:ke,error:We}=await X.functions.invoke("refine-bpmn",{body:{currentBpmnXml:h,instructions:P,userId:Q.id,diagramType:f},headers:t?void 0:{Authorization:""}});if(We){console.error("Refinement error:",We),K("idle");const Ie=We.message||JSON.stringify(We);Ie.includes("429")?S.error("Rate limit exceeded. Please try again in a moment."):Ie.includes("402")?S.error("AI credits depleted. Please add more credits to continue."):Ie.includes("401")||Ie.includes("Authentication")?(S.error("Authentication required. Please log in again."),e("/auth")):S.error(`Failed to refine ${ge}: ${Ie}`);return}if(ke!=null&&ke.error){console.error("Refinement error in response:",ke.error),K("idle");const Ie=typeof ke.error=="string"?ke.error:JSON.stringify(ke.error);Ie.includes("402")?S.error("AI credits depleted. Please add more credits to continue."):Ie.includes("401")||Ie.includes("Authentication")?(S.error("Authentication required. Please log in again."),e("/auth")):S.error(`Failed to refine ${ge}: ${Ie}`);return}if(ke!=null&&ke.bpmnXml){K("applying"),await new Promise(Xe=>setTimeout(Xe,300));const Ie=ke.bpmnXml.includes("</bpmn:definitions>")||ke.bpmnXml.includes("</definitions>");ke.bpmnXml.includes("<?xml")&&Ie?(p(ke.bpmnXml),K("idle"),S.success(`${ge} refined successfully!`),T("")):(console.error("Received invalid diagram XML:",ke.bpmnXml.substring(0,200)),K("idle"),S.error("Received invalid diagram structure. Please try again."))}else console.error("No refined diagram received. Response:",ke),K("idle"),S.error("No refined diagram received. The function may not be deployed or there was an error.")}catch(ke){console.error("BPMN refinement error:",ke),K("idle");const We=ke instanceof Error?ke.message:String(ke);We.includes("Failed to fetch")||We.includes("load the resource")?S.error("Network error: Unable to reach refine-bpmn function. Please check if the function is deployed."):S.error(`Failed to refine ${f==="bpmn"?"BPMN":"P&ID"}: ${We}`)}finally{R(!1)}};return s.jsx(ae.section,{className:`${x?"py-8":"py-24"} bg-muted/20 relative`,"data-section":"try-prossmind",initial:n?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:Je(n)||{duration:.7},children:s.jsxs("div",{className:"container mx-auto px-6",children:[!x&&s.jsxs(ae.div,{className:"text-center mb-12",initial:n?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:Je(n)||{duration:.6,delay:.2},children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Try ",s.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"ProssMind!"})]}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"Describe your business process, upload an image, PDF, Word doc, or text file - AI will generate a BPMN or P&ID diagram for you"})]}),s.jsxs("div",{className:"max-w-5xl mx-auto mt-12 space-y-8",children:[s.jsxs(Zj,{value:f,onValueChange:Q=>m(Q),className:"w-full",children:[s.jsxs($m,{className:`grid w-full max-w-md mx-auto grid-cols-2 mb-8 ${f==="pid"?"bg-engineering-green/10":""}`,children:[s.jsx(kc,{value:"bpmn",className:`${f==="bpmn"?"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground":""}`,children:"BPMN Diagram"}),s.jsxs(kc,{value:"pid",className:`${f==="pid"?"data-[state=active]:bg-engineering-green data-[state=active]:text-white":""}`,children:[s.jsx(Qi,{className:"h-4 w-4 mr-2 flex-shrink-0"}),"P&ID Diagram"]})]}),s.jsxs(Cc,{value:"bpmn",className:"space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-muted/50 to-muted/30 rounded-2xl p-8 border border-border/50 slide-up stagger-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:s.jsx(Qa,{className:"h-5 w-5 text-primary"})}),s.jsx("h3",{className:"font-semibold text-lg",children:"Try these BPMN examples:"})]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:cz.map((Q,ge)=>s.jsx(I,{variant:"outline",size:"sm",onClick:()=>Ge(Q),className:"text-sm hover:bg-primary/10 hover:border-primary/50 transition-all whitespace-nowrap",disabled:d,style:{minWidth:"max-content",paddingLeft:"1.2em",paddingRight:"1.2em"},"aria-label":`Use suggestion: ${Q}`,children:Q},ge))})]}),s.jsx("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl slide-up stagger-2",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Um,{defaultValue:"prompt",className:"w-full",children:[s.jsxs(Tu,{className:"grid w-full grid-cols-3 bg-muted/50",children:[s.jsxs(vs,{value:"prompt",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[s.jsx(fm,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Prompt"})]}),s.jsxs(vs,{value:"voice",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[s.jsx(lc,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Voice"})]}),s.jsxs(vs,{value:"attachment",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[s.jsx(dc,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Attachment"})]})]}),s.jsx(xs,{value:"prompt",className:"mt-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{placeholder:"Describe your process step by step...",value:c,onChange:Q=>l(Q.target.value),className:"min-h-[120px] resize-none border-muted",style:{paddingLeft:"1.2em",paddingRight:"1.2em"},disabled:d}),d&&s.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-1",children:[s.jsx(ae.span,{className:"w-2 h-2 bg-primary rounded-full",animate:n?{}:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:Je(n)||{duration:1,repeat:1/0,delay:0}}),s.jsx(ae.span,{className:"w-2 h-2 bg-primary rounded-full",animate:n?{}:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:Je(n)||{duration:1,repeat:1/0,delay:.2}}),s.jsx(ae.span,{className:"w-2 h-2 bg-primary rounded-full",animate:n?{}:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:Je(n)||{duration:1,repeat:1/0,delay:.4}})]})]})}),s.jsx(xs,{value:"voice",className:"mt-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hp,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs(ws,{value:y,onValueChange:b,children:[s.jsx(Yr,{className:"w-[200px] h-8",children:s.jsx(_s,{placeholder:"Select language"})}),s.jsxs(Zr,{children:[s.jsx(Ee,{value:"en-US",children:"English (US)"}),s.jsx(Ee,{value:"en-GB",children:"English (UK)"}),s.jsx(Ee,{value:"es-ES",children:"Spanish"}),s.jsx(Ee,{value:"fr-FR",children:"French"}),s.jsx(Ee,{value:"de-DE",children:"German"}),s.jsx(Ee,{value:"it-IT",children:"Italian"}),s.jsx(Ee,{value:"pt-BR",children:"Portuguese (Brazil)"}),s.jsx(Ee,{value:"pt-PT",children:"Portuguese (Portugal)"}),s.jsx(Ee,{value:"ru-RU",children:"Russian"}),s.jsx(Ee,{value:"ja-JP",children:"Japanese"}),s.jsx(Ee,{value:"ko-KR",children:"Korean"}),s.jsx(Ee,{value:"zh-CN",children:"Chinese (Simplified)"}),s.jsx(Ee,{value:"zh-TW",children:"Chinese (Traditional)"}),s.jsx(Ee,{value:"ar-SA",children:"Arabic"}),s.jsx(Ee,{value:"hi-IN",children:"Hindi"})]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Voice recognition language"})]}),s.jsx(I,{variant:"outline",onClick:ft,disabled:d,className:g?"text-red-500 border-red-500":"w-full",children:g?s.jsxs(s.Fragment,{children:[s.jsx(Vp,{className:"h-4 w-4 mr-2 animate-pulse"}),"Click to Stop Recording"]}):s.jsxs(s.Fragment,{children:[s.jsx(lc,{className:"h-4 w-4 mr-2"}),"Start Voice Recording"]})})]})}),s.jsx(xs,{value:"attachment",className:"mt-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:$e,type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:pt,className:"hidden"}),s.jsxs("div",{onDragOver:Q=>{Q.preventDefault(),ht(!0)},onDragLeave:()=>ht(!1),onDrop:Q=>{Q.preventDefault(),ht(!1),pt(Q)},className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${ut?"border-primary bg-primary/5 scale-[1.02]":"border-border hover:border-primary/50"}`,children:[s.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Yi,{className:"h-5 w-5","aria-hidden":"true"}),s.jsx("span",{className:"text-xs",children:"PNG/JPG"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Qt,{className:"h-5 w-5","aria-hidden":"true"}),s.jsx("span",{className:"text-xs",children:"PDF"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Up,{className:"h-5 w-5","aria-hidden":"true"}),s.jsx("span",{className:"text-xs",children:"DOCX"})]})]}),s.jsxs(I,{variant:"outline",onClick:()=>{var Q;return(Q=$e.current)==null?void 0:Q.click()},disabled:d,className:"w-full","aria-label":"Upload file",children:[s.jsx(dc,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload File"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Drag and drop a file here or click to browse"})]})]})})]}),d&&F!=="idle"&&s.jsxs("div",{className:"space-y-3 p-4 bg-muted/50 rounded-lg border border-border",children:[s.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Processing your document..."}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:F==="reading"?"font-semibold":"text-muted-foreground",children:[F==="reading"&&s.jsx(wn,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),F!=="reading"&&" ","Step 1: Reading prompt..."]}),F==="reading"&&s.jsx(or,{value:33,className:"w-24","aria-label":"Progress: 33%"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:F==="generating"?"font-semibold":F==="drawing"?"text-muted-foreground":"",children:[F==="generating"&&s.jsx(wn,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),F!=="generating"&&F!=="reading"&&" ","Step 2: Generating..."]}),F==="generating"&&s.jsx(or,{value:66,className:"w-24","aria-label":"Progress: 66%"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:F==="drawing"?"font-semibold":"text-muted-foreground",children:[F==="drawing"&&s.jsx(wn,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),F!=="drawing"&&F!=="generating"&&F!=="reading"&&" ","Step 3: Drawing Diagram..."]}),F==="drawing"&&s.jsx(or,{value:100,className:"w-24","aria-label":"Progress: 100%"})]})]}),s.jsxs(I,{onClick:xe,className:"gap-2 shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all w-full",size:"lg",disabled:d||!c.trim(),"aria-label":"Generate BPMN diagram",children:[d?"Generating...":"Generate BPMN",s.jsx(Ed,{className:"h-4 w-4","aria-hidden":"true"})]})]})})]}),s.jsxs(Cc,{value:"pid",className:"space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-muted/50 to-muted/30 rounded-2xl p-8 border border-border/50 slide-up stagger-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:s.jsx(Qa,{className:"h-5 w-5 text-primary"})}),s.jsx("h3",{className:"font-semibold text-lg",children:"Try these P&ID examples:"})]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:["Create a chemical reactor cooling system","Design a water treatment process flow","Build a distillation column control loop","Generate a pump and valve configuration","Create a heat exchanger system"].map((Q,ge)=>s.jsx(I,{variant:"outline",size:"sm",onClick:()=>Ge(Q),className:"text-sm hover:bg-primary/10 hover:border-primary/50 transition-all",disabled:d,children:Q},ge))})]}),s.jsx("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl slide-up stagger-2",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hp,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true"}),s.jsxs(ws,{value:y,onValueChange:b,children:[s.jsx(Yr,{className:"w-[200px] h-8","aria-label":"Select voice recognition language",children:s.jsx(_s,{placeholder:"Select language"})}),s.jsxs(Zr,{children:[s.jsx(Ee,{value:"en-US",children:"English (US)"}),s.jsx(Ee,{value:"en-GB",children:"English (UK)"}),s.jsx(Ee,{value:"es-ES",children:"Spanish"}),s.jsx(Ee,{value:"fr-FR",children:"French"}),s.jsx(Ee,{value:"de-DE",children:"German"}),s.jsx(Ee,{value:"it-IT",children:"Italian"}),s.jsx(Ee,{value:"pt-BR",children:"Portuguese (Brazil)"}),s.jsx(Ee,{value:"pt-PT",children:"Portuguese (Portugal)"}),s.jsx(Ee,{value:"ru-RU",children:"Russian"}),s.jsx(Ee,{value:"ja-JP",children:"Japanese"}),s.jsx(Ee,{value:"ko-KR",children:"Korean"}),s.jsx(Ee,{value:"zh-CN",children:"Chinese (Simplified)"}),s.jsx(Ee,{value:"zh-TW",children:"Chinese (Traditional)"}),s.jsx(Ee,{value:"ar-SA",children:"Arabic"}),s.jsx(Ee,{value:"hi-IN",children:"Hindi"})]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Voice recognition language"})]}),s.jsx(Jn,{placeholder:"Describe your P&ID process, or upload files (images, PDFs, Word docs, text files) - I'll extract content and generate a P&ID diagram. You can preview before generation and refine using natural language after creation...",value:c,onChange:Q=>l(Q.target.value),className:"min-h-[120px] resize-none border-muted",disabled:d,"aria-label":"P&ID process description input"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{ref:$e,type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:pt,className:"hidden","aria-label":"Upload file input"}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{var Q;return(Q=$e.current)==null?void 0:Q.click()},disabled:d,title:"Upload image, PDF, Word, or text file to generate P&ID","aria-label":"Upload file",children:s.jsx(dc,{className:"h-5 w-5","aria-hidden":"true"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:ft,disabled:d,className:g?"text-red-500":"",title:"Voice to text","aria-label":g?"Stop voice recording":"Start voice recording",children:g?s.jsx(Vp,{className:"h-5 w-5 animate-pulse","aria-hidden":"true"}):s.jsx(lc,{className:"h-5 w-5","aria-hidden":"true"})})]}),s.jsxs(I,{onClick:xe,className:"gap-2 shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all",size:"lg",disabled:d||!c.trim(),"aria-label":"Generate P&ID diagram",children:[d?"Generating...":"Generate P&ID",s.jsx(Ed,{className:"h-4 w-4","aria-hidden":"true"})]})]}),s.jsxs("div",{className:"border border-border rounded-lg p-4 bg-muted/30",children:[s.jsxs("div",{className:"flex justify-center gap-4 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Yi,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"text-xs",children:"PNG/JPG"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Qt,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"text-xs",children:"PDF"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Up,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"text-xs",children:"DOCX"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Supported file types for upload"})]})]})})]})]}),N&&j&&s.jsxs("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Preview Uploaded File"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm font-medium mb-2",children:["File: ",j.name]}),j.type.startsWith("image/")&&s.jsx("div",{className:"mt-4 max-h-96 overflow-auto",children:s.jsx("img",{src:j.base64,alt:"Preview",className:"max-w-full rounded border"})}),j.extractedText&&s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Extracted Content Preview:"}),s.jsx("div",{className:"bg-background rounded p-3 max-h-48 overflow-auto text-xs",children:j.extractedText})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(I,{onClick:zt,className:"flex-1",disabled:d,children:d?"Generating...":`Generate ${f==="bpmn"?"BPMN":"P&ID"} from this file`}),s.jsx(I,{variant:"outline",onClick:()=>{k(!1),C(null)},children:"Cancel"})]})]})]}),h?s.jsxs("div",{id:"bpmn-viewer",className:"space-y-6 relative",children:[s.jsxs("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Your ",f==="bpmn"?"BPMN":"P&ID"," Model"]}),s.jsx(Sv,{xml:h,diagramType:f,onSave:async Q=>{if(p(Q),se&&t){const{error:ge}=await W8(se,t.id,{bpmn_xml:Q});ge?(S.error("Failed to update project"),console.error(ge)):S.success("Project updated successfully")}else t&&Q?(ne(Q),Pt(!0)):S.success("Diagram saved to workspace")},onRefine:()=>at(!0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-4 text-right",children:"Generated via Gemini 2.5 Pro  v1"})]}),L&&M!=="idle"&&s.jsxs("div",{className:"space-y-3 p-4 bg-muted/50 rounded-lg border border-border",children:[s.jsxs("p",{className:"text-sm font-medium text-foreground mb-2",children:["Refining your ",f==="bpmn"?"BPMN":"P&ID"," diagram..."]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:M==="analyzing"?"font-semibold":"text-muted-foreground",children:[M==="analyzing"&&s.jsx(wn,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),M!=="analyzing"&&" ","Step 1: Analyzing instructions..."]}),M==="analyzing"&&s.jsx(or,{value:33,className:"w-24","aria-label":"Progress: 33%"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:M==="refining"?"font-semibold":M==="applying"?"text-muted-foreground":"",children:[M==="refining"&&s.jsx(wn,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),M!=="refining"&&M!=="analyzing"&&" ","Step 2: Refining diagram..."]}),M==="refining"&&s.jsx(or,{value:66,className:"w-24","aria-label":"Progress: 66%"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:M==="applying"?"font-semibold":"text-muted-foreground",children:[M==="applying"&&s.jsx(wn,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),M!=="applying"&&M!=="refining"&&M!=="analyzing"&&" ","Step 3: Applying changes..."]}),M==="applying"&&s.jsx(or,{value:100,className:"w-24","aria-label":"Progress: 100%"})]})]}),s.jsx(gn,{open:oe,onOpenChange:at,children:s.jsxs(ln,{children:[s.jsxs(dn,{children:[s.jsxs(un,{children:["Refine Your ",f==="bpmn"?"BPMN":"P&ID"]}),s.jsx(hn,{children:"Use natural language to modify the current diagram. The AI will update the latest version based on your instructions."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Jn,{placeholder:"E.g., 'add a review step after approval', 'replace manual task with automated service', 'add parallel gateway for concurrent processing'...",value:P,onChange:Q=>T(Q.target.value),className:"min-h-[100px] resize-none",disabled:L}),s.jsx(I,{onClick:()=>{On(),at(!1)},disabled:L||!P.trim(),className:"w-full",children:L?"Refining...":`Apply Changes to Current ${f==="bpmn"?"BPMN":"P&ID"}`})]})]})}),t&&s.jsx(oz,{open:At,onOpenChange:Pt,onSave:async(Q,ge)=>{if(!pe||!t)return;W(!0);const{data:ke,error:We}=await V8({user_id:t.id,name:Q,description:ge||null,diagram_type:f,bpmn_xml:pe});We?(S.error("Failed to save project"),console.error(We)):ke&&(Qe(ke.id),ne(null),S.success("Project saved successfully!")),W(!1),Pt(!1)},diagramType:f,isLoading:kt})]}):d&&F==="drawing"?s.jsxs(ae.div,{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",initial:n?{opacity:1}:{opacity:0},animate:{opacity:1},transition:Je(n)||{duration:.3},children:[s.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Generating ",f==="bpmn"?"BPMN":"P&ID"," Model"]}),s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"w-full h-[400px] bg-muted/50 rounded-lg animate-pulse border border-border/50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx(wn,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rendering diagram..."})]})})})]}):null]})]})})},lz=()=>{const t=tr(),e=Bc(),[n,r]=v.useState(null),[i,a]=v.useState(!0);if(v.useEffect(()=>{const{data:{subscription:d}}=X.auth.onAuthStateChange((u,h)=>{r((h==null?void 0:h.user)??null),a(!1),!(h!=null&&h.user)&&!e.pathname.includes("/auth")&&fn(t,"/auth")});return X.auth.getSession().then(({data:{session:u}})=>{r((u==null?void 0:u.user)??null),a(!1),!(u!=null&&u.user)&&!e.pathname.includes("/auth")&&fn(t,"/auth")}),()=>d.unsubscribe()},[t,e.pathname]),i)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})});const o=Er(),c=`/auth${o}`,l=`/dashboard${o}`;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{user:n}),s.jsxs(ra,{children:[s.jsx(Ce,{path:"/auth",element:s.jsx(S1,{})}),s.jsx(Ce,{path:"/",element:n?s.jsx(L0,{user:n}):s.jsx(rr,{to:c,replace:!0})}),s.jsx(Ce,{path:"/dashboard",element:n?s.jsx(L0,{user:n}):s.jsx(rr,{to:c,replace:!0})}),s.jsx(Ce,{path:"/projects",element:n?s.jsx(Y8,{user:n}):s.jsx(rr,{to:c,replace:!0})}),s.jsx(Ce,{path:"/bpmn-generator",element:n?s.jsx(B0,{user:n}):s.jsx(rr,{to:c,replace:!0})}),s.jsx(Ce,{path:"/pid-generator",element:n?s.jsx(B0,{user:n}):s.jsx(rr,{to:c,replace:!0})}),s.jsx(Ce,{path:"/vision-ai",element:n?s.jsx(a1,{}):s.jsx(rr,{to:c,replace:!0})}),s.jsx(Ce,{path:"/templates",element:n?s.jsx(sz,{user:n}):s.jsx(rr,{to:c,replace:!0})}),s.jsx(Ce,{path:"/account",element:n?s.jsx(iz,{user:n}):s.jsx(rr,{to:c,replace:!0})}),s.jsx(Ce,{path:"/settings",element:n?s.jsx(az,{user:n}):s.jsx(rr,{to:c,replace:!0})}),s.jsx(Ce,{path:"*",element:s.jsx(rr,{to:l,replace:!0})})]})]})},F0=[{name:"Getting Started",path:"/getting-started",icon:c_},{name:"Guides",path:"/guides",icon:XC},{name:"Tutorials",path:"/tutorials",icon:a_},{name:"API Reference",path:"/api-reference",icon:jd},{name:"FAQ",path:"/faq",icon:sP},{name:"Changelog",path:"/changelog",icon:Qt}],dz=()=>{const t=Bc(),[e,n]=v.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"lg:hidden fixed top-16 left-0 right-0 z-40 border-b bg-background px-6 py-3",children:s.jsxs(dj,{open:e,onOpenChange:n,children:[s.jsx(uj,{asChild:!0,children:s.jsxs(I,{variant:"outline",size:"sm",children:[s.jsx(o_,{className:"h-4 w-4 mr-2"}),"Documentation Menu"]})}),s.jsxs(Sm,{side:"left",className:"w-[300px] sm:w-[400px]",children:[s.jsx(km,{children:s.jsx(Cm,{children:"Documentation"})}),s.jsx("nav",{className:"mt-6 space-y-2",children:F0.map(r=>{const i=r.icon,a=t.pathname===r.path||r.path==="/getting-started"&&t.pathname==="/";return s.jsxs(pn,{to:r.path,onClick:()=>n(!1),className:Y("flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted"),children:[s.jsx(i,{className:"h-4 w-4"}),r.name]},r.path)})})]})]})}),s.jsx("aside",{className:"hidden lg:block w-64 border-r bg-muted/30 pt-16 fixed left-0 top-0 h-full overflow-y-auto",children:s.jsx("nav",{className:"p-6 space-y-2",children:F0.map(r=>{const i=r.icon,a=t.pathname===r.path||r.path==="/getting-started"&&t.pathname==="/";return s.jsxs(pn,{to:r.path,className:Y("flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted"),children:[s.jsx(i,{className:"h-4 w-4"}),r.name]},r.path)})})})]})},uz=({children:t})=>s.jsxs("div",{className:"flex min-h-screen pt-16",children:[s.jsx(dz,{}),s.jsx("main",{className:"flex-1 overflow-auto",children:s.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:t})})]}),Ap=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Getting Started"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Welcome to ProssMind! Learn how to create your first BPMN or P&ID diagram."})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(c_,{className:"h-5 w-5 text-primary"}),"Quick Start"]}),s.jsx(_e,{children:"Get up and running in minutes"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("ol",{className:"space-y-3 list-decimal list-inside",children:[s.jsx("li",{children:"Sign up for a free account"}),s.jsx("li",{children:"Choose your diagram type (BPMN or P&ID)"}),s.jsx("li",{children:"Describe your process or upload an image"}),s.jsx("li",{children:"Download your generated diagram"})]}),s.jsxs(I,{onClick:()=>Tr("/auth"),className:"w-full",children:["Get Started",s.jsx(Fi,{className:"h-4 w-4 ml-2"})]})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"What You Get"}),s.jsx(_e,{children:"Features included in your free account"})]}),s.jsx(ue,{children:s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(nc,{className:"h-4 w-4 text-primary"}),s.jsx("span",{children:"5 free diagram generations"})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(nc,{className:"h-4 w-4 text-primary"}),s.jsx("span",{children:"BPMN and P&ID diagram support"})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(nc,{className:"h-4 w-4 text-primary"}),s.jsx("span",{children:"Vision AI image conversion"})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(nc,{className:"h-4 w-4 text-primary"}),s.jsx("span",{children:"Export to standard formats"})]})]})})]})]}),s.jsxs(re,{children:[s.jsx(fe,{children:s.jsx(me,{children:"Next Steps"})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsx("p",{className:"text-muted-foreground",children:"Ready to create your first diagram? Check out our guides and tutorials to learn more about creating professional process diagrams with ProssMind."}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(I,{variant:"outline",onClick:()=>Tr("/dashboard"),children:"Go to Dashboard"}),s.jsx(I,{variant:"outline",onClick:()=>window.location.href="/guides",children:"View Guides"})]})]})]})]}),hz=()=>{const t=[{title:"BPMN Diagram Guide",description:"Learn how to create effective business process models",icon:Qn,topics:["Elements and symbols","Swimlanes and pools","Gateways and events","Best practices"]},{title:"P&ID Diagram Guide",description:"Master piping and instrumentation diagrams",icon:Qi,topics:["Equipment symbols","Instrumentation tags","Piping connections","ISA standards"]},{title:"Vision AI Guide",description:"Convert images and documents to diagrams",icon:Ns,topics:["Supported formats","Image requirements","Processing tips","Troubleshooting"]},{title:"Export and Integration",description:"Export diagrams and integrate with other tools",icon:Qt,topics:["Export formats","SAP Signavio","Camunda","Flowable"]}];return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"User Guides"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Comprehensive guides to help you get the most out of ProssMind."})]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:t.map(e=>{const n=e.icon;return s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(n,{className:"h-5 w-5 text-primary"}),e.title]}),s.jsx(_e,{children:e.description})]}),s.jsx(ue,{children:s.jsx("ul",{className:"space-y-2",children:e.topics.map((r,i)=>s.jsxs("li",{className:"text-sm text-muted-foreground",children:[" ",r]},i))})})]},e.title)})})]})},pz=()=>{const t=[{title:"Creating Your First BPMN Diagram",description:"Step-by-step tutorial for creating a simple business process diagram",duration:"5 min",level:"Beginner"},{title:"Advanced P&ID Design",description:"Learn advanced techniques for complex piping and instrumentation diagrams",duration:"15 min",level:"Advanced"},{title:"Using Vision AI",description:"Convert handwritten notes and sketches into professional diagrams",duration:"10 min",level:"Intermediate"},{title:"Integrating with SAP Signavio",description:"Export and import diagrams to SAP Signavio for process management",duration:"12 min",level:"Intermediate"}];return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Tutorials"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Step-by-step tutorials to help you master ProssMind features."})]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:t.map(e=>s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx(me,{children:e.title}),s.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-primary/10 text-primary",children:e.level})]}),s.jsx(_e,{children:e.description})]}),s.jsx(ue,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(hu,{className:"h-4 w-4"}),e.duration]}),s.jsxs(I,{variant:"outline",size:"sm",children:[s.jsx(iP,{className:"h-4 w-4 mr-2"}),"Watch Tutorial"]})]})})]},e.title))})]})},fz=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Reference"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Integrate ProssMind into your applications using our REST API."})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Xc,{className:"h-5 w-5 text-primary"}),"Authentication"]}),s.jsx(_e,{children:"API authentication and authorization"})]}),s.jsxs(ue,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"All API requests require authentication using an API key. You can generate API keys in your account settings."}),s.jsx("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm",children:s.jsx("code",{children:"Authorization: Bearer YOUR_API_KEY"})})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(jd,{className:"h-5 w-5 text-primary"}),"Endpoints"]}),s.jsx(_e,{children:"Available API endpoints"})]}),s.jsxs(ue,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"API documentation is coming soon. For now, please use the web interface or contact support for API access."}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"POST"}),s.jsx("code",{children:"/api/v1/diagrams/generate"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"GET"}),s.jsxs("code",{children:["/api/v1/diagrams/","{id}"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"GET"}),s.jsx("code",{children:"/api/v1/diagrams"})]})]})]})]})]}),mz=()=>{const t=[{question:"How many free diagrams can I create?",answer:"Free accounts include 5 diagram generations. After that, you can upgrade to a paid plan for unlimited diagrams."},{question:"What file formats can I export?",answer:"You can export diagrams in BPMN 2.0 XML, PNG, SVG, and PDF formats."},{question:"Can I use Vision AI with handwritten notes?",answer:"Yes! Vision AI can convert handwritten notes, whiteboard sketches, and printed documents into professional diagrams."},{question:"Is my data secure?",answer:"Yes, ProssMind is GDPR compliant and all data is encrypted. We never share your data with third parties."},{question:"Can I integrate with SAP Signavio?",answer:"Yes, you can export BPMN diagrams in a format compatible with SAP Signavio, Camunda, and Flowable."},{question:"What's the difference between BPMN and P&ID?",answer:"BPMN (Business Process Model and Notation) is for business processes, while P&ID (Piping and Instrumentation Diagram) is for engineering and manufacturing processes."}];return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Frequently Asked Questions"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Find answers to common questions about ProssMind."})]}),s.jsxs(re,{children:[s.jsx(fe,{children:s.jsx(me,{children:"Common Questions"})}),s.jsx(ue,{children:s.jsx(Ff,{type:"single",collapsible:!0,className:"w-full",children:t.map((e,n)=>s.jsxs(Ma,{value:`item-${n}`,children:[s.jsx(Da,{children:e.question}),s.jsx(Oa,{children:e.answer})]},n))})})]})]})},gz=()=>{const t=[{version:"1.0.0",date:"2024-01-15",type:"major",changes:["Initial release of ProssMind","BPMN diagram generation","P&ID diagram generation","Vision AI image conversion","Free tier with 5 diagram generations"]}];return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Changelog"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Track updates and new features in ProssMind."})]}),s.jsx("div",{className:"space-y-6",children:t.map(e=>s.jsxs(re,{children:[s.jsx(fe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(me,{className:"flex items-center gap-3",children:["Version ",e.version,s.jsx(Ut,{variant:e.type==="major"?"default":"secondary",children:e.type})]}),s.jsx(_e,{children:e.date})]})}),s.jsx(ue,{children:s.jsx("ul",{className:"space-y-2",children:e.changes.map((n,r)=>s.jsxs("li",{className:"text-sm flex items-start gap-2",children:[s.jsx("span",{className:"text-primary mt-1",children:""}),s.jsx("span",{children:n})]},r))})})]},e.version))})]})},vz=()=>s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{}),s.jsx(uz,{children:s.jsxs(ra,{children:[s.jsx(Ce,{path:"/",element:s.jsx(Ap,{})}),s.jsx(Ce,{path:"/getting-started",element:s.jsx(Ap,{})}),s.jsx(Ce,{path:"/guides",element:s.jsx(hz,{})}),s.jsx(Ce,{path:"/tutorials",element:s.jsx(pz,{})}),s.jsx(Ce,{path:"/api-reference",element:s.jsx(fz,{})}),s.jsx(Ce,{path:"/faq",element:s.jsx(mz,{})}),s.jsx(Ce,{path:"/changelog",element:s.jsx(gz,{})}),s.jsx(Ce,{path:"*",element:s.jsx(Ap,{})})]})})]}),xz=()=>{const t="operational",n={operational:{label:"All Systems Operational",color:"bg-green-500",icon:s_,variant:"default"},degraded:{label:"Degraded Performance",color:"bg-yellow-500",icon:rP,variant:"secondary"},down:{label:"Service Disruption",color:"bg-red-500",icon:aP,variant:"destructive"}}[t],r=n.icon;return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${n.color} animate-pulse`}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(r,{className:"h-5 w-5"}),s.jsx("span",{className:"font-semibold",children:n.label})]}),s.jsx(Ut,{variant:n.variant,children:t})]})},yz=()=>{const t=[{id:1,date:"2024-01-10",title:"Scheduled Maintenance",status:"resolved",description:"Database optimization and performance improvements"},{id:2,date:"2024-01-05",title:"API Rate Limiting Issue",status:"resolved",description:"Temporary rate limiting issue affecting some API requests"}];return s.jsx("div",{className:"space-y-4",children:t.length>0?s.jsxs(ia,{children:[s.jsx(aa,{children:s.jsxs(Un,{children:[s.jsx(Nt,{children:"Date"}),s.jsx(Nt,{children:"Title"}),s.jsx(Nt,{children:"Status"}),s.jsx(Nt,{children:"Description"})]})}),s.jsx(oa,{children:t.map(e=>s.jsxs(Un,{children:[s.jsx(_t,{children:new Date(e.date).toLocaleDateString()}),s.jsx(_t,{className:"font-medium",children:e.title}),s.jsx(_t,{children:s.jsx(Ut,{variant:e.status==="resolved"?"default":"secondary",children:e.status})}),s.jsx(_t,{className:"text-muted-foreground",children:e.description})]},e.id))})]}):s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No incidents reported. All systems operational."})})},bz=()=>{const{toast:t}=Yc(),[e,n]=v.useState(""),r=i=>{i.preventDefault(),t({title:"Subscribed!",description:"You'll receive email updates about service status."}),n("")};return s.jsxs("form",{onSubmit:r,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{htmlFor:"email",children:"Email Address"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Rt,{id:"email",type:"email",placeholder:"your@email.com",value:e,onChange:i=>n(i.target.value),className:"pl-10",required:!0})]}),s.jsx(I,{type:"submit",children:"Subscribe"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll receive email notifications about service incidents and maintenance."})]})},wz=()=>s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{}),s.jsx("div",{className:"pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Service Status"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Real-time status of ProssMind services"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"System Status"}),s.jsx(_e,{children:"Current operational status"})]}),s.jsx(ue,{children:s.jsx(xz,{})})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"Subscribe to Updates"}),s.jsx(_e,{children:"Get notified about service incidents"})]}),s.jsx(ue,{children:s.jsx(bz,{})})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"Incident History"}),s.jsx(_e,{children:"Past incidents and maintenance windows"})]}),s.jsx(ue,{children:s.jsx(yz,{})})]})]})})]}),_z=({user:t})=>{const e={totalUsers:1250,organizations:45,revenue:125e3,activeUsers:890};return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Admin Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your organization and users"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsxs(re,{children:[s.jsxs(fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Total Users"}),s.jsx(Sd,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.totalUsers}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Organizations"}),s.jsx(dm,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.organizations}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+3 new this month"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Revenue"}),s.jsx(i_,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ue,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:["$",e.revenue.toLocaleString()]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+8% from last month"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Active Users"}),s.jsx(zp,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.activeUsers}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"Quick Actions"}),s.jsx(_e,{children:"Common administrative tasks"})]}),s.jsxs(ue,{className:"space-y-2",children:[s.jsx("a",{href:"/organization",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"Manage Organization Settings"}),s.jsx("a",{href:"/users",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"View All Users"}),s.jsx("a",{href:"/billing",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"Billing & Invoices"}),s.jsx("a",{href:"/security",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"Security Settings"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Ss,{className:"h-5 w-5"}),"Security Overview"]}),s.jsx(_e,{children:"Recent security events"})]}),s.jsx(ue,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"No security events in the last 24 hours. All systems secure."})})]})]})]})})},jz=({user:t})=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Organization Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your organization configuration"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(dm,{className:"h-5 w-5"}),"Organization Details"]}),s.jsx(_e,{children:"Basic organization information"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{htmlFor:"orgName",children:"Organization Name"}),s.jsx(Rt,{id:"orgName",defaultValue:"Your Organization",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Ke,{htmlFor:"orgEmail",children:"Contact Email"}),s.jsx(Rt,{id:"orgEmail",type:"email",defaultValue:t.email,className:"mt-1"})]}),s.jsx(I,{children:"Save Changes"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Xc,{className:"h-5 w-5"}),"Single Sign-On (SSO)"]}),s.jsx(_e,{children:"Configure SSO for your organization"})]}),s.jsxs(ue,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"SSO configuration allows your organization to use your identity provider for authentication."}),s.jsx(I,{variant:"outline",children:"Configure SSO"})]})]})]})]})}),Ez=({user:t})=>{const e=[{id:"1",email:"user1@example.com",role:"admin",createdAt:"2024-01-01"},{id:"2",email:"user2@example.com",role:"user",createdAt:"2024-01-05"},{id:"3",email:"user3@example.com",role:"user",createdAt:"2024-01-10"}];return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"User Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage users in your organization"})]}),s.jsxs(re,{children:[s.jsx(fe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{children:"Users"}),s.jsx(_e,{children:"All users in your organization"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(fu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Rt,{placeholder:"Search users...",className:"pl-10 w-64"})]})]})}),s.jsx(ue,{children:s.jsxs(ia,{children:[s.jsx(aa,{children:s.jsxs(Un,{children:[s.jsx(Nt,{children:"Email"}),s.jsx(Nt,{children:"Role"}),s.jsx(Nt,{children:"Created"}),s.jsx(Nt,{children:"Actions"})]})}),s.jsx(oa,{children:e.map(n=>s.jsxs(Un,{children:[s.jsx(_t,{className:"font-medium",children:n.email}),s.jsx(_t,{children:s.jsx(Ut,{variant:n.role==="admin"?"default":"secondary",children:n.role})}),s.jsx(_t,{children:new Date(n.createdAt).toLocaleDateString()}),s.jsx(_t,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(I,{variant:"ghost",size:"sm",children:s.jsx(mm,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"sm",children:s.jsx(Jc,{className:"h-4 w-4"})})]})})]},n.id))})]})})]})]})})},Nz=({user:t})=>{const e=[{id:"INV-001",date:"2024-01-15",amount:999,status:"paid"},{id:"INV-002",date:"2024-02-15",amount:999,status:"paid"},{id:"INV-003",date:"2024-03-15",amount:999,status:"pending"}];return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Billing & Invoices"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage billing and view invoices"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(i_,{className:"h-5 w-5"}),"Current Plan"]}),s.jsx(_e,{children:"Your subscription details"})]}),s.jsxs(ue,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Plan"}),s.jsx("span",{className:"font-semibold",children:"Enterprise"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Billing Cycle"}),s.jsx("span",{children:"Monthly"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Next Billing Date"}),s.jsx("span",{children:"April 15, 2024"})]})]}),s.jsx(I,{className:"w-full mt-4",children:"Change Plan"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"Payment Method"}),s.jsx(_e,{children:"Manage your payment methods"})]}),s.jsxs(ue,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"   4242"}),s.jsx(I,{variant:"outline",children:"Update Payment Method"})]})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"Invoice History"}),s.jsx(_e,{children:"View and download past invoices"})]}),s.jsx(ue,{children:s.jsxs(ia,{children:[s.jsx(aa,{children:s.jsxs(Un,{children:[s.jsx(Nt,{children:"Invoice ID"}),s.jsx(Nt,{children:"Date"}),s.jsx(Nt,{children:"Amount"}),s.jsx(Nt,{children:"Status"}),s.jsx(Nt,{children:"Actions"})]})}),s.jsx(oa,{children:e.map(n=>s.jsxs(Un,{children:[s.jsx(_t,{className:"font-medium",children:n.id}),s.jsx(_t,{children:new Date(n.date).toLocaleDateString()}),s.jsxs(_t,{children:["$",n.amount]}),s.jsx(_t,{children:s.jsx(Ut,{variant:n.status==="paid"?"default":"secondary",children:n.status})}),s.jsx(_t,{children:s.jsxs(I,{variant:"ghost",size:"sm",children:[s.jsx(pu,{className:"h-4 w-4 mr-2"}),"Download"]})})]},n.id))})]})})]})]})})},Sz=({user:t})=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Security Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage security and access controls"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Ss,{className:"h-5 w-5"}),"Two-Factor Authentication"]}),s.jsx(_e,{children:"Require 2FA for all users"})]}),s.jsx(ue,{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ke,{children:"Enable 2FA"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Require two-factor authentication"})]}),s.jsx(bs,{})]})})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Xc,{className:"h-5 w-5"}),"API Keys"]}),s.jsx(_e,{children:"Manage API access keys"})]}),s.jsxs(ue,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"API keys allow programmatic access to ProssMind services."}),s.jsx(I,{variant:"outline",children:"Manage API Keys"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(gP,{className:"h-5 w-5"}),"Access Controls"]}),s.jsx(_e,{children:"Configure access permissions"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ke,{children:"IP Whitelist"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Restrict access by IP address"})]}),s.jsx(bs,{})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ke,{children:"Session Timeout"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto-logout after inactivity"})]}),s.jsx(bs,{defaultChecked:!0})]})]})]})]})]})}),kz=({user:t})=>{const e=[{id:"1",user:"admin@example.com",action:"User created",timestamp:"2024-01-15T10:30:00Z",ip:"192.168.1.1"},{id:"2",user:"admin@example.com",action:"Settings updated",timestamp:"2024-01-15T09:15:00Z",ip:"192.168.1.1"},{id:"3",user:"user@example.com",action:"Login",timestamp:"2024-01-15T08:00:00Z",ip:"192.168.1.2"}];return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Audit Logs"}),s.jsx("p",{className:"text-muted-foreground",children:"View activity and security logs"})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"h-5 w-5"}),"Activity Log"]}),s.jsx(_e,{children:"Recent administrative actions and events"})]}),s.jsx(ue,{children:s.jsxs(ia,{children:[s.jsx(aa,{children:s.jsxs(Un,{children:[s.jsx(Nt,{children:"Timestamp"}),s.jsx(Nt,{children:"User"}),s.jsx(Nt,{children:"Action"}),s.jsx(Nt,{children:"IP Address"})]})}),s.jsx(oa,{children:e.map(n=>s.jsxs(Un,{children:[s.jsx(_t,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hu,{className:"h-4 w-4 text-muted-foreground"}),new Date(n.timestamp).toLocaleString()]})}),s.jsx(_t,{className:"font-medium",children:n.user}),s.jsx(_t,{children:s.jsx(Ut,{variant:"outline",children:n.action})}),s.jsx(_t,{className:"text-muted-foreground",children:n.ip})]},n.id))})]})})]})]})})},Cz=["Business","E-Commerce","Finance","IT","Manufacturing","Utilities"],Pz=["bpmn","pid"],Tz=["Users","ShoppingCart","Building2","Cog","Factory","Workflow"],Rz=({user:t})=>{const[e,n]=v.useState([]),[r,i]=v.useState(!0),[a,o]=v.useState(""),[c,l]=v.useState(!1),[d,u]=v.useState(!1),[h,p]=v.useState(null),[f,m]=v.useState(!1),[x,g]=v.useState(""),[w,y]=v.useState({name:"",description:"",category:"Business",diagram_type:"bpmn",bpmn_xml:"",icon_name:"Workflow",is_active:!0});v.useEffect(()=>{b()},[]);const b=async()=>{i(!0);const{data:R,error:M}=await tz();M?S.error("Failed to load templates"):R&&n(R),i(!1)},j=()=>{p(null),y({name:"",description:"",category:"Business",diagram_type:"bpmn",bpmn_xml:"",icon_name:"Workflow",is_active:!0}),l(!0)},C=R=>{p(R),y({name:R.name,description:R.description||"",category:R.category,diagram_type:R.diagram_type,bpmn_xml:R.bpmn_xml,icon_name:R.icon_name||"Workflow",is_active:R.is_active}),l(!0)},N=R=>{p(R),u(!0)},k=async()=>{if(!h)return;const{error:R}=await ez(h.id);R?S.error("Failed to delete template"):(S.success("Template deleted successfully"),b()),u(!1),p(null)},P=R=>{g(R.bpmn_xml),m(!0)},T=async()=>{if(!w.name||!w.bpmn_xml){S.error("Name and XML are required");return}const R={name:w.name,description:w.description||null,category:w.category,diagram_type:w.diagram_type,bpmn_xml:w.bpmn_xml,icon_name:w.icon_name||null,is_active:w.is_active??!0,created_by:t.id};if(h){const{error:M}=await Q8(h.id,R);M?S.error("Failed to update template"):(S.success("Template updated successfully"),l(!1),b())}else{const{error:M}=await J8(R);M?S.error("Failed to create template"):(S.success("Template created successfully"),l(!1),b())}},L=e.filter(R=>{var M;return R.name.toLowerCase().includes(a.toLowerCase())||((M=R.description)==null?void 0:M.toLowerCase().includes(a.toLowerCase()))});return r?s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsx(dt,{children:s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsx(wn,{className:"h-8 w-8 animate-spin text-primary"})})})}):s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Template Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage BPMN and P&ID diagram templates"})]}),s.jsxs(re,{children:[s.jsx(fe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{children:"Templates"}),s.jsx(_e,{children:"Create and manage diagram templates"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(fu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Rt,{placeholder:"Search templates...",className:"pl-10 w-64",value:a,onChange:R=>o(R.target.value)})]}),s.jsxs(I,{onClick:j,children:[s.jsx(uc,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]})}),s.jsx(ue,{children:s.jsxs(ia,{children:[s.jsx(aa,{children:s.jsxs(Un,{children:[s.jsx(Nt,{children:"Name"}),s.jsx(Nt,{children:"Category"}),s.jsx(Nt,{children:"Type"}),s.jsx(Nt,{children:"Status"}),s.jsx(Nt,{children:"Usage"}),s.jsx(Nt,{children:"Created"}),s.jsx(Nt,{children:"Actions"})]})}),s.jsx(oa,{children:L.length===0?s.jsx(Un,{children:s.jsx(_t,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No templates found"})}):L.map(R=>s.jsxs(Un,{children:[s.jsx(_t,{className:"font-medium",children:R.name}),s.jsx(_t,{children:s.jsx(Ut,{variant:"outline",children:R.category})}),s.jsx(_t,{children:s.jsx(Ut,{variant:R.diagram_type==="bpmn"?"default":"secondary",children:R.diagram_type.toUpperCase()})}),s.jsx(_t,{children:s.jsx(Ut,{variant:R.is_active?"default":"secondary",children:R.is_active?"Active":"Inactive"})}),s.jsx(_t,{children:R.usage_count}),s.jsx(_t,{children:new Date(R.created_at).toLocaleDateString()}),s.jsx(_t,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>P(R),children:s.jsx(Ns,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>C(R),children:s.jsx(mm,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>N(R),children:s.jsx(Jc,{className:"h-4 w-4"})})]})})]},R.id))})]})})]}),s.jsx(gn,{open:c,onOpenChange:l,children:s.jsxs(ln,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(dn,{children:[s.jsx(un,{children:h?"Edit Template":"Create New Template"}),s.jsx(hn,{children:h?"Update template details and XML content":"Create a new diagram template"})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ke,{htmlFor:"name",children:"Name *"}),s.jsx(Rt,{id:"name",value:w.name,onChange:R=>y({...w,name:R.target.value}),placeholder:"Template name"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ke,{htmlFor:"description",children:"Description"}),s.jsx(Jn,{id:"description",value:w.description,onChange:R=>y({...w,description:R.target.value}),placeholder:"Template description",rows:2})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ke,{htmlFor:"category",children:"Category *"}),s.jsxs(ws,{value:w.category,onValueChange:R=>y({...w,category:R}),children:[s.jsx(Yr,{id:"category",children:s.jsx(_s,{})}),s.jsx(Zr,{children:Cz.map(R=>s.jsx(Ee,{value:R,children:R},R))})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ke,{htmlFor:"diagram_type",children:"Diagram Type *"}),s.jsxs(ws,{value:w.diagram_type,onValueChange:R=>y({...w,diagram_type:R}),children:[s.jsx(Yr,{id:"diagram_type",children:s.jsx(_s,{})}),s.jsx(Zr,{children:Pz.map(R=>s.jsx(Ee,{value:R,children:R.toUpperCase()},R))})]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ke,{htmlFor:"icon_name",children:"Icon"}),s.jsxs(ws,{value:w.icon_name||"Workflow",onValueChange:R=>y({...w,icon_name:R}),children:[s.jsx(Yr,{id:"icon_name",children:s.jsx(_s,{})}),s.jsx(Zr,{children:Tz.map(R=>s.jsx(Ee,{value:R,children:R},R))})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(Ke,{htmlFor:"bpmn_xml",children:"BPMN/PID XML *"}),s.jsx(Jn,{id:"bpmn_xml",value:w.bpmn_xml,onChange:R=>y({...w,bpmn_xml:R.target.value}),placeholder:"Paste BPMN or PID XML here",rows:12,className:"font-mono text-sm"})]})]}),s.jsxs(Id,{children:[s.jsx(I,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(I,{onClick:T,children:h?"Update":"Create"})]})]})}),s.jsx(gn,{open:f,onOpenChange:m,children:s.jsxs(ln,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(dn,{children:[s.jsx(un,{children:"Template XML Preview"}),s.jsx(hn,{children:"View the template XML content"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("pre",{className:"bg-muted p-4 rounded-md overflow-x-auto text-sm",children:s.jsx("code",{children:x})})}),s.jsx(Id,{children:s.jsx(I,{variant:"outline",onClick:()=>m(!1),children:"Close"})})]})}),s.jsx(jv,{open:d,onOpenChange:u,children:s.jsxs(_h,{children:[s.jsxs(jh,{children:[s.jsx(Nh,{children:"Are you sure?"}),s.jsxs(Sh,{children:['This will deactivate the template "',h==null?void 0:h.name,'". This action cannot be undone, but you can reactivate it later.']})]}),s.jsxs(Eh,{children:[s.jsx(Ch,{children:"Cancel"}),s.jsx(kh,{onClick:k,children:"Delete"})]})]})})]})})},Az=()=>{tr();const[t,e]=v.useState(null),[n,r]=v.useState(!0),{isAdmin:i}=lj(t);return v.useEffect(()=>{const{data:{subscription:a}}=X.auth.onAuthStateChange((o,c)=>{e((c==null?void 0:c.user)??null),r(!1)});return X.auth.getSession().then(({data:{session:o}})=>{e((o==null?void 0:o.user)??null),r(!1)}),()=>a.unsubscribe()},[]),n?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):!t||!i?s.jsx(rr,{to:"/",replace:!0}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{user:t}),s.jsxs(ra,{children:[s.jsx(Ce,{path:"/",element:s.jsx(_z,{user:t})}),s.jsx(Ce,{path:"/organization",element:s.jsx(jz,{user:t})}),s.jsx(Ce,{path:"/users",element:s.jsx(Ez,{user:t})}),s.jsx(Ce,{path:"/billing",element:s.jsx(Nz,{user:t})}),s.jsx(Ce,{path:"/security",element:s.jsx(Sz,{user:t})}),s.jsx(Ce,{path:"/audit-logs",element:s.jsx(kz,{user:t})}),s.jsx(Ce,{path:"/templates",element:s.jsx(Rz,{user:t})}),s.jsx(Ce,{path:"*",element:s.jsx(rr,{to:"/",replace:!0})})]})]})},z0=()=>{const t=[{id:1,title:"Getting Started with BPMN Diagrams",excerpt:"Learn how to create your first business process model using ProssMind",date:"2024-01-15",readTime:"5 min",category:"Tutorial"},{id:2,title:"Best Practices for Process Automation",excerpt:"Discover industry best practices for automating business processes",date:"2024-01-10",readTime:"8 min",category:"Guide"},{id:3,title:"Vision AI: Converting Handwritten Notes to Diagrams",excerpt:"See how Vision AI transforms handwritten process sketches into professional diagrams",date:"2024-01-05",readTime:"6 min",category:"Feature"}];return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Blog"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Insights, tutorials, and updates from the ProssMind team"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>s.jsxs(re,{className:"hover:shadow-lg transition-shadow",children:[s.jsxs(fe,{children:[s.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:s.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:e.category})}),s.jsx(me,{children:e.title}),s.jsx(_e,{children:e.excerpt})]}),s.jsxs(ue,{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(eP,{className:"h-4 w-4"}),new Date(e.date).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hu,{className:"h-4 w-4"}),e.readTime]})]}),s.jsxs(I,{variant:"outline",className:"w-full",children:["Read More",s.jsx(Fi,{className:"h-4 w-4 ml-2"})]})]})]},e.id))})]})})},Iz=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Case Studies"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Real-world examples of ProssMind in action"})]}),s.jsx(re,{children:s.jsx(ue,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Case studies coming soon. Check back later for customer success stories."})})})]})}),Mz=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Whitepapers"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"In-depth research and analysis on process automation"})]}),s.jsx(re,{children:s.jsx(ue,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Whitepapers coming soon. Check back later for detailed research and insights."})})})]})}),Dz=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Webinars"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Live and recorded webinars on process automation"})]}),s.jsx(re,{children:s.jsx(ue,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Webinars coming soon. Check back later for upcoming events and recordings."})})})]})}),Oz=()=>s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{}),s.jsxs(ra,{children:[s.jsx(Ce,{path:"/",element:s.jsx(z0,{})}),s.jsx(Ce,{path:"/case-studies",element:s.jsx(Iz,{})}),s.jsx(Ce,{path:"/whitepapers",element:s.jsx(Mz,{})}),s.jsx(Ce,{path:"/webinars",element:s.jsx(Dz,{})}),s.jsx(Ce,{path:"*",element:s.jsx(z0,{})})]})]}),U0=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Overview"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Integrate ProssMind into your applications with our REST API"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Xc,{className:"h-5 w-5 text-primary"}),"Authentication"]}),s.jsx(_e,{children:"Get started with API keys"})]}),s.jsxs(ue,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"All API requests require authentication using an API key. Generate your API key in your account settings."}),s.jsx(I,{onClick:()=>Tr("/settings"),children:"Generate API Key"})]})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(jd,{className:"h-5 w-5 text-primary"}),"Base URL"]}),s.jsx(_e,{children:"API endpoint"})]}),s.jsx(ue,{children:s.jsx("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm",children:s.jsx("code",{children:"https://api.prossmind.com/v1"})})})]})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsx(re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/reference",children:s.jsxs(fe,{children:[s.jsx(JC,{className:"h-8 w-8 text-primary mb-2"}),s.jsx(me,{children:"API Reference"}),s.jsx(_e,{children:"Complete API documentation"})]})}),s.jsx(re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/sdks",children:s.jsxs(fe,{children:[s.jsx(jd,{className:"h-8 w-8 text-primary mb-2"}),s.jsx(me,{children:"SDKs"}),s.jsx(_e,{children:"Client libraries and tools"})]})}),s.jsx(re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/playground",children:s.jsxs(fe,{children:[s.jsx(NP,{className:"h-8 w-8 text-primary mb-2"}),s.jsx(me,{children:"API Playground"}),s.jsx(_e,{children:"Test API endpoints"})]})})]})]})}),$z=()=>{const t=[{method:"POST",path:"/diagrams/generate",description:"Generate a BPMN or P&ID diagram from a text description"},{method:"GET",path:"/diagrams/{id}",description:"Retrieve a diagram by ID"},{method:"GET",path:"/diagrams",description:"List all diagrams for the authenticated user"}];return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Reference"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Complete reference for all API endpoints"})]}),s.jsx("div",{className:"space-y-6",children:t.map((e,n)=>s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ut,{variant:e.method==="POST"?"default":"secondary",children:e.method}),s.jsx("code",{className:"text-lg",children:e.path})]}),s.jsx(_e,{children:e.description})]}),s.jsx(ue,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Full API documentation coming soon. For now, please use the web interface or contact support for API access."})})]},n))})]})})},Lz=()=>{const t=[{name:"JavaScript/TypeScript",version:"1.0.0",language:"npm"},{name:"Python",version:"1.0.0",language:"pip"},{name:"Go",version:"1.0.0",language:"go get"}];return s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"SDKs & Libraries"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Client libraries for popular programming languages"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:e.name}),s.jsxs(_e,{children:["Version ",e.version]})]}),s.jsxs(ue,{children:[s.jsx("div",{className:"bg-muted p-3 rounded-lg font-mono text-sm mb-4",children:s.jsxs("code",{children:[e.language," install prossmind-sdk"]})}),s.jsxs(I,{variant:"outline",className:"w-full",children:[s.jsx(pu,{className:"h-4 w-4 mr-2"}),"Download"]})]})]},e.name))})]})})},Bz=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Code Examples"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Example code snippets for common use cases"})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"Examples"}),s.jsx(_e,{children:"Code examples coming soon"})]}),s.jsx(ue,{children:s.jsx("p",{className:"text-muted-foreground",children:"Code examples and tutorials will be available here. Check back soon!"})})]})]})}),Fz=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Playground"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Test API endpoints interactively"})]}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(me,{children:"Interactive Playground"}),s.jsx(_e,{children:"API playground coming soon"})]}),s.jsx(ue,{children:s.jsx("p",{className:"text-muted-foreground",children:"An interactive API playground will be available here. Check back soon!"})})]})]})}),zz=()=>s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{}),s.jsxs(ra,{children:[s.jsx(Ce,{path:"/",element:s.jsx(U0,{})}),s.jsx(Ce,{path:"/reference",element:s.jsx($z,{})}),s.jsx(Ce,{path:"/sdks",element:s.jsx(Lz,{})}),s.jsx(Ce,{path:"/examples",element:s.jsx(Bz,{})}),s.jsx(Ce,{path:"/playground",element:s.jsx(Fz,{})}),s.jsx(Ce,{path:"*",element:s.jsx(U0,{})})]})]}),H0=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Partner Program"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Join our partner ecosystem and grow your business"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/marketplace",children:s.jsxs(fe,{children:[s.jsx(IP,{className:"h-8 w-8 text-primary mb-2"}),s.jsx(me,{children:"Marketplace"}),s.jsx(_e,{children:"Integration marketplace"})]})}),s.jsx(re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/resources",children:s.jsxs(fe,{children:[s.jsx(Qt,{className:"h-8 w-8 text-primary mb-2"}),s.jsx(me,{children:"Resources"}),s.jsx(_e,{children:"Partner resources"})]})}),s.jsx(re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/training",children:s.jsxs(fe,{children:[s.jsx(a_,{className:"h-8 w-8 text-primary mb-2"}),s.jsx(me,{children:"Training"}),s.jsx(_e,{children:"Partner training"})]})}),s.jsxs(re,{children:[s.jsxs(fe,{children:[s.jsx(fP,{className:"h-8 w-8 text-primary mb-2"}),s.jsx(me,{children:"Become a Partner"}),s.jsx(_e,{children:"Join our partner program"})]}),s.jsx(ue,{children:s.jsx(I,{className:"w-full",children:"Apply Now"})})]})]})]})}),Uz=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Integration Marketplace"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Browse available integrations and extensions"})]}),s.jsx(re,{children:s.jsx(ue,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Integration marketplace coming soon. Check back later for partner integrations."})})})]})}),Hz=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Partner Resources"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Download resources and materials for partners"})]}),s.jsx(re,{children:s.jsx(ue,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Partner resources coming soon. Check back later for downloadable materials."})})})]})}),Vz=()=>s.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Partner Training"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Training materials and certification programs"})]}),s.jsx(re,{children:s.jsx(ue,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Partner training materials coming soon. Check back later for training programs."})})})]})}),Gz=()=>s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{}),s.jsxs(ra,{children:[s.jsx(Ce,{path:"/",element:s.jsx(H0,{})}),s.jsx(Ce,{path:"/marketplace",element:s.jsx(Uz,{})}),s.jsx(Ce,{path:"/resources",element:s.jsx(Hz,{})}),s.jsx(Ce,{path:"/training",element:s.jsx(Vz,{})}),s.jsx(Ce,{path:"*",element:s.jsx(H0,{})})]})]}),Wz=({language:t})=>{tr();const[e,n]=v.useState(null),[r,i]=v.useState(!0);if(v.useEffect(()=>{const{data:{subscription:c}}=X.auth.onAuthStateChange((l,d)=>{n((d==null?void 0:d.user)??null),i(!1)});return X.auth.getSession().then(({data:{session:l}})=>{n((l==null?void 0:l.user)??null),i(!1)}),()=>c.unsubscribe()},[]),r)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})});const a={de:{title:"Bereit loszulegen?",description:"Erstellen Sie professionelle BPMN- und P&ID-Diagramme mit KI-gesttzter Automatisierung",tryFree:"Kostenlos testen"},fr:{title:"Prt  commencer?",description:"Crez des diagrammes BPMN et P&ID professionnels avec l'automatisation alimente par l'IA",tryFree:"Essayer gratuitement"}},o=a[t]||a.de;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(Vn,{user:e}),s.jsx($j,{}),s.jsx(vj,{}),s.jsx(xj,{}),s.jsx("section",{className:"py-20 bg-muted/30",children:s.jsxs(dt,{children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold mb-4",children:o.title}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:o.description})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-8",children:[s.jsxs(re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>Tr("/bpmn-generator"),children:[s.jsxs(fe,{children:[s.jsx(Qn,{className:"h-10 w-10 text-primary mb-4"}),s.jsx(me,{children:"BPMN Diagramme"}),s.jsx(_e,{children:"Erstellen Sie Geschftsprozessmodelle"})]}),s.jsx(ue,{children:s.jsxs(I,{className:"w-full",onClick:c=>{c.stopPropagation(),Tr("/bpmn-generator")},children:["BPMN-Generator testen",s.jsx(Fi,{className:"h-4 w-4 ml-2"})]})})]}),s.jsxs(re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>Tr("/pid-generator"),children:[s.jsxs(fe,{children:[s.jsx(Qi,{className:"h-10 w-10 text-primary mb-4"}),s.jsx(me,{children:"P&ID Diagramme"}),s.jsx(_e,{children:"Entwerfen Sie Rohrleitungs- und Instrumentierungsdiagramme"})]}),s.jsx(ue,{children:s.jsxs(I,{className:"w-full",onClick:c=>{c.stopPropagation(),Tr("/pid-generator")},children:["P&ID-Generator testen",s.jsx(Fi,{className:"h-4 w-4 ml-2"})]})})]}),s.jsxs(re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>Tr("/vision-ai"),children:[s.jsxs(fe,{children:[s.jsx(Ns,{className:"h-10 w-10 text-primary mb-4"}),s.jsx(me,{children:"Vision AI"}),s.jsx(_e,{children:"Konvertieren Sie Bilder in Diagramme"})]}),s.jsx(ue,{children:s.jsxs(I,{className:"w-full",onClick:c=>{c.stopPropagation(),Tr("/vision-ai")},children:["Vision AI testen",s.jsx(Fi,{className:"h-4 w-4 ml-2"})]})})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs(I,{size:"lg",className:"text-lg px-8",onClick:()=>Tr(e?"/dashboard":"/auth"),children:[e?"Zum Dashboard":o.tryFree,s.jsx(Fi,{className:"h-5 w-5 ml-2"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"Keine Kreditkarte erforderlich  5 kostenlose Prompts enthalten"})]})]})}),s.jsx(yj,{}),s.jsx(Rm,{}),s.jsx(Mj,{}),s.jsx(Dj,{})]})},qz=()=>{const t=tl();return t==="app"?s.jsx(lz,{}):t==="docs"?s.jsx(vz,{}):t==="status"?s.jsx(wz,{}):t==="admin"?s.jsx(Az,{}):t==="blog"?s.jsx(Oz,{}):t==="api"?s.jsx(zz,{}):t==="partners"?s.jsx(Gz,{}):t==="de"||t==="fr"?s.jsx(Wz,{language:t}):t==="bpmn"?s.jsx(t5,{}):t==="pid"?s.jsx(H8,{}):s.jsx(k1,{})},Kz=new $_,Yz=tl();Dw(document.getElementById("root")).render(s.jsx(hM,{children:s.jsx(L_,{client:Kz,children:s.jsxs(P_,{children:[s.jsx(y_,{}),s.jsx(b_,{}),Yz?s.jsx(ew,{children:s.jsx(qz,{})}):s.jsx(k1,{})]})})}));
