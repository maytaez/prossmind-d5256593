var EU=Object.defineProperty;var _P=e=>{throw TypeError(e)};var NU=(e,t,n)=>t in e?EU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var qd=(e,t,n)=>NU(e,typeof t!="symbol"?t+"":t,n),Wb=(e,t,n)=>t.has(e)||_P("Cannot "+n);var ee=(e,t,n)=>(Wb(e,t,"read from private field"),n?n.call(e):t.get(e)),Rt=(e,t,n)=>t.has(e)?_P("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ut=(e,t,n,r)=>(Wb(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),br=(e,t,n)=>(Wb(e,t,"access private method"),n);var dm=(e,t,n,r)=>({set _(i){ut(e,t,i,n)},get _(){return ee(e,t,r)}});import{j as o,A as W$,m as ye,u as q$,a as Nh,b as PU}from"./framer-motion-V9WCrmtC.js";import{a as ry,u as od,e as kU,r as x,R as CU,L as Qn,c as O,b as AU,f as _i,d as hm,g as rn,h as cd,i as rt,j as TU,N as ki,B as OU}from"./react-vendor-BEeWdMMG.js";import{_ as Fe,t as RU,a as iy,c as K$,O as Zf,P as oj,C as Jf,b as ay,T as Qf,D as ep,R as cj,d as Y$,u as hn,e as sy,f as $s,g as kt,h as Ro,i as ot,j as hi,k as Kr,l as $U,m as X$,n as IU,o as MU,p as Z$,q as DU,I as LU,r as ko,s as ld,S as J$,v as Q$,w as BU,x as eI,y as tI,z as nI,A as rI,B as iI,L as aI,E as sI,F as FU,G as zU,H as lj,J as oy,K as oI,M as cI,N as UU,Q as HU,U as VU,V as GU,W as lI,X as uI,Y as WU,Z as dI,$ as qU,a0 as hI,a1 as KU,a2 as YU,a3 as XU,a4 as ZU}from"./ui-vendor-DyAibTMT.js";import{l as JU}from"./lottie-B4ZAOZ_T.js";import{B as uj,e as Ie,I as QU,i as _t,a as at,b as Fi,c as J,d as Wn,f as tp,t as Uc,g as Hc,h as eH,V as np,j as q,s as Ps,k as St,l as dj,m as ur,n as Rr,q as An,o as Hh,p as ma,r as cy,u as qt,v as hj,O as fI,w as pI,x as ui,y as xu,z as Is,C as he,A as ly,D as $o,E as dn,F as Ge,G as Qe,H as vr,J as uy,K as ft,L as dr,M as Ce,N as C,P as fj,Q as dy,R as hy,S as xs,T as $r,U as pj,W as Fa,X as Pt,Y as qb,Z as mI,_ as Ha,$ as gI,a0 as tH,a1 as je,a2 as pw,a3 as ps,a4 as ke,a5 as Xt,a6 as jr,a7 as de,a8 as nH,a9 as Sr,aa as mj,ab as jP,ac as rH,ad as vI,ae as mw,af as ks,ag as fy,ah as gw,ai as iH,aj as yI,ak as Ql,al as py,am as gj,an as Er,ao as Dn,ap as qn,aq as zt,ar as wt,as as my,at as Vh,au as bu,av as Vc,aw as gi,ax as $t,ay as rp,az as Gh,aA as xI,aB as ip,aC as Bl,aD as cg,aE as ec,aF as SP,aG as aH,aH as sH,aI as oH,aJ as cH,aK as lH,aL as bI,aM as _o,aN as vw,aO as wI,aP as uH,aQ as vj,aR as dH,aS as yj,aT as hH,aU as fH,aV as pH,aW as mH,aX as yw,aY as _I,aZ as gH,a_ as vH,a$ as EP,b0 as jI,b1 as yH,b2 as xj,b3 as xH,b4 as SI,b5 as EI,b6 as bH,b7 as wH,b8 as _H}from"./bpmn-vendor-B-7XOhPu.js";function jH(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var NI,NP=ry;NI=NP.createRoot,NP.hydrateRoot;const SH={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},EH={type:"tween",ease:"anticipate",duration:.4},ka=({children:e})=>{const t=od();return o.jsx(W$,{mode:"wait",children:o.jsx(ye.div,{initial:"initial",animate:"animate",exit:"exit",variants:SH,transition:EH,children:e},t.pathname)})},NH=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class bj extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class PH extends bj{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class PP extends bj{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class kP extends bj{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xw;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xw||(xw={}));class kH{constructor(t,{headers:n={},customFetch:r,region:i=xw.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=NH(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Fe(this,arguments,void 0,function*(n,r={}){var i;let a,s;try{const{headers:c,method:l,body:u,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;u&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let v=d;h&&(s=new AbortController,a=setTimeout(()=>s.abort(),h),d?(v=s.signal,d.addEventListener("abort",()=>s.abort())):v=s.signal);const b=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),c),body:g,signal:v}).catch(j=>{throw new PH(j)}),w=b.headers.get("x-relay-error");if(w&&w==="true")throw new PP(b);if(!b.ok)throw new kP(b);let y=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return y==="application/json"?_=yield b.json():y==="application/octet-stream"||y==="application/pdf"?_=yield b.blob():y==="text/event-stream"?_=b:y==="multipart/form-data"?_=yield b.formData():_=yield b.text(),{data:_,error:null,response:b}}catch(c){return{data:null,error:c,response:c instanceof kP||c instanceof PP?c.context:void 0}}finally{a&&clearTimeout(a)}})}}var Tr={};const ud=kU(RU);var fm={},pm={},mm={},gm={},vm={},ym={},CP;function PI(){if(CP)return ym;CP=1,Object.defineProperty(ym,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return ym.default=e,ym}var AP;function kI(){if(AP)return vm;AP=1,Object.defineProperty(vm,"__esModule",{value:!0});const t=ud.__importDefault(PI());class n{constructor(i){var a,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let c=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,d,h,f;let p=null,m=null,g=null,v=l.status,b=l.statusText;if(l.ok){if(this.method!=="HEAD"){const j=await l.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?m=j:m=JSON.parse(j))}const y=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&_&&_.length>1&&(g=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(p={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,v=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const y=await l.text();try{p=JSON.parse(y),Array.isArray(p)&&l.status===404&&(m=[],p=null,v=200,b="OK")}catch{l.status===404&&y===""?(v=204,b="No Content"):p={message:y}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,v=200,b="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:m,count:g,status:v,statusText:b}});return this.shouldThrowOnError||(c=c.catch(l=>{var u,d,h;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(d=l==null?void 0:l.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=l==null?void 0:l.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,a)}returns(){return this}overrideTypes(){return this}}return vm.default=n,vm}var TP;function CI(){if(TP)return gm;TP=1,Object.defineProperty(gm,"__esModule",{value:!0});const t=ud.__importDefault(kI());class n extends t.default{select(i){let a=!1;const s=(i??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:c,referencedTable:l=c}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:c=s}={}){const l=typeof c>"u"?"offset":`${c}.offset`,u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:c=!1,wal:l=!1,format:u="text"}={}){var d;const h=[i?"analyze":null,a?"verbose":null,s?"settings":null,c?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return gm.default=n,gm}var OP;function wj(){if(OP)return mm;OP=1,Object.defineProperty(mm,"__esModule",{value:!0});const t=ud.__importDefault(CI()),n=new RegExp("[,()]");class r extends t.default{eq(a,s){return this.url.searchParams.append(a,`eq.${s}`),this}neq(a,s){return this.url.searchParams.append(a,`neq.${s}`),this}gt(a,s){return this.url.searchParams.append(a,`gt.${s}`),this}gte(a,s){return this.url.searchParams.append(a,`gte.${s}`),this}lt(a,s){return this.url.searchParams.append(a,`lt.${s}`),this}lte(a,s){return this.url.searchParams.append(a,`lte.${s}`),this}like(a,s){return this.url.searchParams.append(a,`like.${s}`),this}likeAllOf(a,s){return this.url.searchParams.append(a,`like(all).{${s.join(",")}}`),this}likeAnyOf(a,s){return this.url.searchParams.append(a,`like(any).{${s.join(",")}}`),this}ilike(a,s){return this.url.searchParams.append(a,`ilike.${s}`),this}ilikeAllOf(a,s){return this.url.searchParams.append(a,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(a,s){return this.url.searchParams.append(a,`ilike(any).{${s.join(",")}}`),this}is(a,s){return this.url.searchParams.append(a,`is.${s}`),this}in(a,s){const c=Array.from(new Set(s)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cs.{${s.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(s)}`),this}containedBy(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cd.{${s.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(s)}`),this}rangeGt(a,s){return this.url.searchParams.append(a,`sr.${s}`),this}rangeGte(a,s){return this.url.searchParams.append(a,`nxl.${s}`),this}rangeLt(a,s){return this.url.searchParams.append(a,`sl.${s}`),this}rangeLte(a,s){return this.url.searchParams.append(a,`nxr.${s}`),this}rangeAdjacent(a,s){return this.url.searchParams.append(a,`adj.${s}`),this}overlaps(a,s){return typeof s=="string"?this.url.searchParams.append(a,`ov.${s}`):this.url.searchParams.append(a,`ov.{${s.join(",")}}`),this}textSearch(a,s,{config:c,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const d=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${u}fts${d}.${s}`),this}match(a){return Object.entries(a).forEach(([s,c])=>{this.url.searchParams.append(s,`eq.${c}`)}),this}not(a,s,c){return this.url.searchParams.append(a,`not.${s}.${c}`),this}or(a,{foreignTable:s,referencedTable:c=s}={}){const l=c?`${c}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,s,c){return this.url.searchParams.append(a,`${s}.${c}`),this}}return mm.default=r,mm}var RP;function AI(){if(RP)return pm;RP=1,Object.defineProperty(pm,"__esModule",{value:!0});const t=ud.__importDefault(wj());class n{constructor(i,{headers:a={},schema:s,fetch:c}){this.url=i,this.headers=new Headers(a),this.schema=s,this.fetch=c}select(i,a){const{head:s=!1,count:c}=a??{},l=s?"HEAD":"GET";let u=!1;const d=(i??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:s=!0}={}){var c;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:c,defaultToNull:l=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),c&&this.headers.append("Prefer",`count=${c}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var s;const c="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var a;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return pm.default=n,pm}var $P;function CH(){if($P)return fm;$P=1,Object.defineProperty(fm,"__esModule",{value:!0});const e=ud,t=e.__importDefault(AI()),n=e.__importDefault(wj());class r{constructor(a,{headers:s={},schema:c,fetch:l}={}){this.url=a,this.headers=new Headers(s),this.schemaName=c,this.fetch=l}from(a){const s=new URL(`${this.url}/${a}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:c=!1,get:l=!1,count:u}={}){var d;let h;const f=new URL(`${this.url}/rpc/${a}`);let p;c||l?(h=c?"HEAD":"GET",Object.entries(s).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{f.searchParams.append(g,v)})):(h="POST",p=s);const m=new Headers(this.headers);return u&&m.set("Prefer",`count=${u}`),new n.default({method:h,url:f,headers:m,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return fm.default=r,fm}Object.defineProperty(Tr,"__esModule",{value:!0});var TI=Tr.PostgrestError=zI=Tr.PostgrestBuilder=BI=Tr.PostgrestTransformBuilder=DI=Tr.PostgrestFilterBuilder=II=Tr.PostgrestQueryBuilder=RI=Tr.PostgrestClient=void 0;const dd=ud,OI=dd.__importDefault(CH());var RI=Tr.PostgrestClient=OI.default;const $I=dd.__importDefault(AI());var II=Tr.PostgrestQueryBuilder=$I.default;const MI=dd.__importDefault(wj());var DI=Tr.PostgrestFilterBuilder=MI.default;const LI=dd.__importDefault(CI());var BI=Tr.PostgrestTransformBuilder=LI.default;const FI=dd.__importDefault(kI());var zI=Tr.PostgrestBuilder=FI.default;const UI=dd.__importDefault(PI());TI=Tr.PostgrestError=UI.default;var HI=Tr.default={PostgrestClient:OI.default,PostgrestQueryBuilder:$I.default,PostgrestFilterBuilder:MI.default,PostgrestTransformBuilder:LI.default,PostgrestBuilder:FI.default,PostgrestError:UI.default};const AH=jH({__proto__:null,get PostgrestBuilder(){return zI},get PostgrestClient(){return RI},get PostgrestError(){return TI},get PostgrestFilterBuilder(){return DI},get PostgrestQueryBuilder(){return II},get PostgrestTransformBuilder(){return BI},default:HI},[Tr]),{PostgrestClient:TH,PostgrestQueryBuilder:URe,PostgrestFilterBuilder:HRe,PostgrestTransformBuilder:VRe,PostgrestBuilder:GRe,PostgrestError:WRe}=HI||AH;class OH{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const RH="2.81.1",$H=`realtime-js/${RH}`,VI="1.0.0",IH="2.0.0",IP=VI,bw=1e4,MH=1e3,DH=100;var vc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(vc||(vc={}));var Zn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zn||(Zn={}));var Ti;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ti||(Ti={}));var ww;(function(e){e.websocket="websocket"})(ww||(ww={}));var yc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(yc||(yc={}));class LH{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,n){if(this._isArrayBuffer(t.payload))return n(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodePush(t){const{join_ref:n,ref:r,event:i,topic:a,payload:s}=t,c=this.META_LENGTH+n.length+r.length+a.length+i.length,l=new ArrayBuffer(this.HEADER_LENGTH+c);let u=new DataView(l),d=0;u.setUint8(d++,this.KINDS.push),u.setUint8(d++,n.length),u.setUint8(d++,r.length),u.setUint8(d++,a.length),u.setUint8(d++,i.length),Array.from(n,f=>u.setUint8(d++,f.charCodeAt(0))),Array.from(r,f=>u.setUint8(d++,f.charCodeAt(0))),Array.from(a,f=>u.setUint8(d++,f.charCodeAt(0))),Array.from(i,f=>u.setUint8(d++,f.charCodeAt(0)));var h=new Uint8Array(l.byteLength+s.byteLength);return h.set(new Uint8Array(l),0),h.set(new Uint8Array(s),l.byteLength),h.buffer}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const{join_ref:i,ref:a,topic:s}=t,c=t.payload.event,l=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),u=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+a.length+s.length+c.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let h=new DataView(d),f=0;h.setUint8(f++,this.KINDS.userBroadcastPush),h.setUint8(f++,i.length),h.setUint8(f++,a.length),h.setUint8(f++,s.length),h.setUint8(f++,c.length),h.setUint8(f++,this.BINARY_ENCODING),Array.from(i,m=>h.setUint8(f++,m.charCodeAt(0))),Array.from(a,m=>h.setUint8(f++,m.charCodeAt(0))),Array.from(s,m=>h.setUint8(f++,m.charCodeAt(0))),Array.from(c,m=>h.setUint8(f++,m.charCodeAt(0)));var p=new Uint8Array(d.byteLength+l.byteLength);return p.set(new Uint8Array(d),0),p.set(new Uint8Array(l),d.byteLength),p.buffer}_encodeJsonUserBroadcastPush(t){var n,r;const{join_ref:i,ref:a,topic:s}=t,c=t.payload.event,l=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},d=new TextEncoder().encode(JSON.stringify(l)).buffer,h=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+a.length+s.length+c.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let p=new DataView(f),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,i.length),p.setUint8(m++,a.length),p.setUint8(m++,s.length),p.setUint8(m++,c.length),p.setUint8(m++,this.JSON_ENCODING),Array.from(i,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(a,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(s,v=>p.setUint8(m++,v.charCodeAt(0))),Array.from(c,v=>p.setUint8(m++,v.charCodeAt(0)));var g=new Uint8Array(f.byteLength+d.byteLength);return g.set(new Uint8Array(f),0),g.set(new Uint8Array(d),f.byteLength),g.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,a,s,c,l]=r;return n({join_ref:i,ref:a,topic:s,event:c,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(t,n,i);case this.KINDS.reply:return this._decodeReply(t,n,i);case this.KINDS.broadcast:return this._decodeBroadcast(t,n,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodePush(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3);let c=this.HEADER_LENGTH+this.META_LENGTH-1;const l=r.decode(t.slice(c,c+i));c=c+i;const u=r.decode(t.slice(c,c+a));c=c+a;const d=r.decode(t.slice(c,c+s));c=c+s;const h=JSON.parse(r.decode(t.slice(c,t.byteLength)));return{join_ref:l,ref:null,topic:u,event:d,payload:h}}_decodeReply(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3),c=n.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const u=r.decode(t.slice(l,l+i));l=l+i;const d=r.decode(t.slice(l,l+a));l=l+a;const h=r.decode(t.slice(l,l+s));l=l+s;const f=r.decode(t.slice(l,l+c));l=l+c;const p=JSON.parse(r.decode(t.slice(l,t.byteLength))),m={status:f,response:p};return{join_ref:u,ref:d,topic:h,event:Ti.reply,payload:m}}_decodeBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2);let s=this.HEADER_LENGTH+2;const c=r.decode(t.slice(s,s+i));s=s+i;const l=r.decode(t.slice(s,s+a));s=s+a;const u=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{join_ref:null,ref:null,topic:c,event:l,payload:u}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3),c=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(t.slice(l,l+i));l=l+i;const d=r.decode(t.slice(l,l+a));l=l+a;const h=r.decode(t.slice(l,l+s));l=l+s;const f=t.slice(l,t.byteLength),p=c===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST,event:d,payload:p};return s>0&&(m.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:m}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class GI{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var on;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(on||(on={}));const MP=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=BH(s,e,t,i),a),{}):{}},BH=(e,t,n,r)=>{const i=t.find(c=>c.name===e),a=i==null?void 0:i.type,s=n[e];return a&&!r.includes(a)?WI(a,s):_w(s)},WI=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return HH(t,n)}switch(e){case on.bool:return FH(t);case on.float4:case on.float8:case on.int2:case on.int4:case on.int8:case on.numeric:case on.oid:return zH(t);case on.json:case on.jsonb:return UH(t);case on.timestamp:return VH(t);case on.abstime:case on.date:case on.daterange:case on.int4range:case on.int8range:case on.money:case on.reltime:case on.text:case on.time:case on.timestamptz:case on.timetz:case on.tsrange:case on.tstzrange:return _w(t);default:return _w(t)}},_w=e=>e,FH=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},zH=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},UH=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},HH=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const s=e.slice(1,n);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(c=>WI(t,c))}return e},VH=e=>typeof e=="string"?e.replace(" ","T"):e,qI=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Kb{constructor(t,n,r={},i=bw){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var DP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(DP||(DP={}));class Ph{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ph.syncState(this.state,i,a,s),this.pendingDiffs.forEach(l=>{this.state=Ph.syncDiff(this.state,l,a,s)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ph.syncDiff(this.state,i,a,s),c())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),s=this.transformState(n),c={},l={};return this.map(a,(u,d)=>{s[u]||(l[u]=d)}),this.map(s,(u,d)=>{const h=a[u];if(h){const f=d.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),m=d.filter(v=>p.indexOf(v.presence_ref)<0),g=h.filter(v=>f.indexOf(v.presence_ref)<0);m.length>0&&(c[u]=m),g.length>0&&(l[u]=g)}else c[u]=d}),this.syncDiff(a,{joins:c,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(c,l)=>{var u;const d=(u=t[c])!==null&&u!==void 0?u:[];if(t[c]=this.cloneDeep(l),d.length>0){const h=t[c].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[c].unshift(...f)}r(c,d,l)}),this.map(s,(c,l)=>{let u=t[c];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[c]=u,i(c,u,l),u.length===0&&delete t[c]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var LP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(LP||(LP={}));var kh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(kh||(kh={}));var us;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(us||(us={}));class _j{constructor(t,n={config:{}},r){var i,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Zn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Kb(this,Ti.join,this.params,this.timeout),this.rejoinTimer=new GI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ti.reply,{},(s,c)=>{this._trigger(this._replyEventName(c),s)}),this.presence=new Ph(this),this.broadcastEndpointURL=qI(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Zn.closed){const{config:{broadcast:s,presence:c,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[kh.PRESENCE]&&this.bindings[kh.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},f={broadcast:s,presence:Object.assign(Object.assign({},c),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(us.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(us.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){t==null||t(us.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,b=[];for(let w=0;w<v;w++){const y=g[w],{filter:{event:_,schema:j,table:S,filter:E}}=y,P=p&&p[w];if(P&&P.event===_&&P.schema===j&&P.table===S&&P.filter===E)b.push(Object.assign(Object.assign({},y),{id:P.id}));else{this.unsubscribe(),this.state=Zn.errored,t==null||t(us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(us.SUBSCRIBED);return}}).receive("error",p=>{this.state=Zn.errored,t==null||t(us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Zn.joined&&t===kh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let l=c.statusText;try{const u=await c.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,c,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(c=(s=this.params)===null||s===void 0?void 0:s.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ti.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Kb(this,Ti.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Zn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),s}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Kb(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>DH){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const s=t.toLocaleLowerCase(),{close:c,error:l,leave:u,join:d}=Ti;if(r&&[c,l,u,d].indexOf(s)>=0&&r!==this._joinRef())return;let f=this._onMessage(s,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,v;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===s}).map(p=>p.callback(f,r)):(a=this.bindings[s])===null||a===void 0||a.filter(p=>{var m,g,v,b,w,y;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const _=p.id,j=(m=p.filter)===null||m===void 0?void 0:m.event;return _&&((g=n.ids)===null||g===void 0?void 0:g.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(w=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:v,commit_timestamp:b,type:w,errors:y}=m;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:b,eventType:w,new:{},old:{},errors:y}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===Zn.closed}_isJoined(){return this.state===Zn.joined}_isJoining(){return this.state===Zn.joining}_isLeaving(){return this.state===Zn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&_j.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ti.close,{},t)}_onError(t){this._on(Ti.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=MP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=MP(t.columns,t.old_record)),n}}const Yb=()=>{},xm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},GH=[1e3,2e3,5e3,1e4],WH=1e4,qH=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KH{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bw,this.transport=null,this.heartbeatIntervalMs=xm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yb,this.ref=0,this.reconnectTimer=null,this.vsn=IP,this.logger=Yb,this.conn=null,this.sendBuffer=[],this.serializer=new LH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${ww.websocket}`,this.httpEndpoint=qI(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=OH.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case vc.connecting:return yc.Connecting;case vc.open:return yc.Open;case vc.closing:return yc.Closing;default:return yc.Closed}}isConnected(){return this.connectionState()===yc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new _j(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,s=()=>{this.encode(t,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(MH,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},xm.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:s}=n,c=s?`(${s})`:"",l=a.status||"";this.log("receive",`${l} ${r} ${i} ${c}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,a,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===vc.open||this.conn.readyState===vc.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ti.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([qH],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:$H};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ti.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new GI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,s,c,l,u,d,h,f,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:bw,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:xm.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(c=t==null?void 0:t.heartbeatCallback)!==null&&c!==void 0?c:Yb,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:IP,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:m=>GH[m-1]||WH,this.vsn){case VI:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(m,g)=>g(JSON.stringify(m)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(m,g)=>g(JSON.parse(m));break;case IH:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class jj extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Sn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class YH extends jj{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jw extends jj{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const Sj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),XH=()=>Response,Sw=e=>{if(Array.isArray(e))return e.map(n=>Sw(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Sw(r)}),t},ZH=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Xb=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},JH=(e,t,n)=>Fe(void 0,void 0,void 0,function*(){const r=yield XH();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const a=e.status||500,s=(i==null?void 0:i.statusCode)||a+"";t(new YH(Xb(i),a,s))}).catch(i=>{t(new jw(Xb(i),i))}):t(new jw(Xb(e),e))}),QH=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(ZH(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function ap(e,t,n,r,i,a){return Fe(this,void 0,void 0,function*(){return new Promise((s,c)=>{e(n,QH(t,r,i,a)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>JH(l,c,r))})})}function Wh(e,t,n,r){return Fe(this,void 0,void 0,function*(){return ap(e,"GET",t,n,r)})}function sa(e,t,n,r,i){return Fe(this,void 0,void 0,function*(){return ap(e,"POST",t,r,i,n)})}function Ew(e,t,n,r,i){return Fe(this,void 0,void 0,function*(){return ap(e,"PUT",t,r,i,n)})}function e9(e,t,n,r){return Fe(this,void 0,void 0,function*(){return ap(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ej(e,t,n,r,i){return Fe(this,void 0,void 0,function*(){return ap(e,"DELETE",t,r,i,n)})}class t9{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Sn(t))return{data:null,error:t};throw t}})}}var KI;class n9{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[KI]="BlobDownloadBuilder",this.promise=null}asStream(){return new t9(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Sn(t))return{data:null,error:t};throw t}})}}KI=Symbol.toStringTag;const r9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},BP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class i9{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Sj(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Fe(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},BP),i);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),l&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(l))):(a=r,c["cache-control"]=`max-age=${s.cacheControl}`,c["content-type"]=s.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?Ew:sa)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:c},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Sn(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Fe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),s=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${s}`);c.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:BP.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Ew(this.fetch,c.toString(),l,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Sn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Fe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield sa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+a.url),c=s.searchParams.get("token");if(!c)throw new jj("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sn(r))return{data:null,error:r};throw r}})}update(t,n,r){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Fe(this,void 0,void 0,function*(){try{return{data:yield sa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Sn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield sa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Sn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Fe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield sa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Sn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Fe(this,void 0,void 0,function*(){try{const i=yield sa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Sn(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=a?`?${a}`:"",c=this._getFinalPath(t),l=()=>Wh(this.fetch,`${this.url}/${i}/${c}${s}`,{headers:this.headers,noResolveJson:!0});return new n9(l,this.shouldThrowOnError)}info(t){return Fe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Wh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Sw(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sn(r))return{data:null,error:r};throw r}})}exists(t){return Fe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield e9(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sn(r)&&r instanceof jw){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${u}`)}}}remove(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ej(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}})}list(t,n,r){return Fe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},r9),n),{prefix:t||""});return{data:yield sa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Sn(i))return{data:null,error:i};throw i}})}listV2(t,n){return Fe(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield sa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const YI="2.81.1",XI={"X-Client-Info":`storage-js/${YI}`};class a9{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},XI),n),this.fetch=Sj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Wh(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Wh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}})}createBucket(t){return Fe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield sa(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Sn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ew(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield sa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ej(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class s9{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},XI),n),this.fetch=Sj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield sa(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}})}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Wh(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ej(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}})}}const Nj={"X-Client-Info":`storage-js/${YI}`,"Content-Type":"application/json"};class ZI extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function fi(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Zb extends ZI{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class o9 extends ZI{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var FP;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(FP||(FP={}));const Pj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),c9=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zP=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),l9=(e,t,n)=>Fe(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(s=>{const c=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||i+"";t(new Zb(zP(s),i,c))}).catch(()=>{const s=i+"",c=a.statusText||`HTTP ${i} error`;t(new Zb(c,i,s))});else{const s=i+"",c=a.statusText||`HTTP ${i} error`;t(new Zb(c,i,s))}}else t(new o9(zP(e),e))}),u9=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(c9(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function d9(e,t,n,r,i,a){return Fe(this,void 0,void 0,function*(){return new Promise((s,c)=>{e(n,u9(t,r,i,a)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>s(l)).catch(l=>l9(l,c,r))})})}function pi(e,t,n,r,i){return Fe(this,void 0,void 0,function*(){return d9(e,"POST",t,r,i,n)})}class h9{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Nj),n),this.fetch=Pj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield pi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fi(r))return{data:null,error:r};throw r}})}listIndexes(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Fe(this,void 0,void 0,function*(){try{return{data:(yield pi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fi(r))return{data:null,error:r};throw r}})}}class f9{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Nj),n),this.fetch=Pj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield pi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}getVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}listVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield pi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}queryVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield pi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}}class p9{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Nj),n),this.fetch=Pj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield pi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}listBuckets(){return Fe(this,arguments,void 0,function*(t={}){try{return{data:yield pi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield pi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}}class m9 extends p9{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new g9(this.url,this.headers,t,this.fetch)}}class g9 extends h9{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Fe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Fe(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Fe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Fe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new v9(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class v9 extends f9{constructor(t,n,r,i,a){super(t,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Fe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Fe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Fe(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Fe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Fe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class y9 extends a9{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new i9(this.url,this.headers,t,this.fetch)}get vectors(){return new m9(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new s9(this.url+"/iceberg",this.headers,this.fetch)}}const x9="2.81.1";let bh="";typeof Deno<"u"?bh="deno":typeof document<"u"?bh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bh="react-native":bh="node";const b9={"X-Client-Info":`supabase-js-${bh}/${x9}`},w9={headers:b9},_9={schema:"public"},j9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},S9={},E9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),N9=()=>Headers,P9=(e,t,n)=>{const r=E9(n),i=N9();return async(a,s)=>{var c;const l=(c=await t())!==null&&c!==void 0?c:e;let u=new i(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},s),{headers:u}))}};function k9(e){return e.endsWith("/")?e:e+"/"}function C9(e,t){var n,r;const{db:i,auth:a,realtime:s,global:c}=e,{db:l,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},h),c),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function A9(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(k9(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const JI="2.81.1",Fl=30*1e3,Nw=3,Jb=Nw*Fl,T9="http://localhost:9999",O9="supabase.auth.token",R9={"X-Client-Info":`gotrue-js/${JI}`},Pw="X-Supabase-Api-Version",QI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,I9=10*60*1e3;class qh extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class M9 extends qh{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function D9(e){return Ve(e)&&e.name==="AuthApiError"}class xc extends qh{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Io extends qh{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class ta extends Io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function L9(e){return Ve(e)&&e.name==="AuthSessionMissingError"}class jl extends Io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bm extends Io{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class wm extends Io{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function B9(e){return Ve(e)&&e.name==="AuthImplicitGrantRedirectError"}class UP extends Io{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kw extends Io{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Qb(e){return Ve(e)&&e.name==="AuthRetryableFetchError"}class HP extends Io{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Cw extends Io{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const jg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),VP=` 	
\r=`.split(""),F9=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<VP.length;t+=1)e[VP[t].charCodeAt(0)]=-2;for(let t=0;t<jg.length;t+=1)e[jg[t].charCodeAt(0)]=t;return e})();function GP(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(jg[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(jg[r]),t.queuedBits-=6}}function eM(e,t,n){const r=F9[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function WP(e){const t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{H9(s,r,n)};for(let s=0;s<e.length;s+=1)eM(e.charCodeAt(s),i,a);return t.join("")}function z9(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function U9(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}z9(r,t)}}function H9(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function eu(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)eM(e.charCodeAt(i),n,r);return new Uint8Array(t)}function V9(e){const t=[];return U9(e,n=>t.push(n)),new Uint8Array(t)}function _c(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>GP(i,n,r)),GP(null,n,r),t.join("")}function G9(e){return Math.round(Date.now()/1e3)+e}function W9(){return Symbol("auth-callback")}const mr=()=>typeof window<"u"&&typeof document<"u",tc={tested:!1,writable:!1},tM=()=>{if(!mr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tc.tested)return tc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tc.tested=!0,tc.writable=!0}catch{tc.tested=!0,tc.writable=!1}return tc.writable};function q9(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const nM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),K9=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",zl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},nc=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},eo=async(e,t)=>{await e.removeItem(t)};class gy{constructor(){this.promise=new gy.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}gy.promiseConstructor=Promise;function e0(e){const t=e.split(".");if(t.length!==3)throw new Cw("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!$9.test(t[r]))throw new Cw("JWT not in base64url format");return{header:JSON.parse(WP(t[0])),payload:JSON.parse(WP(t[1])),signature:eu(t[2]),raw:{header:t[0],payload:t[1]}}}async function Y9(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function X9(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){r(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function Z9(e){return("0"+e.toString(16)).substr(-2)}function J9(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,Z9).join("")}async function Q9(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function eV(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Q9(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sl(e,t,n=!1){const r=J9();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await zl(e,`${t}-code-verifier`,i);const a=await eV(r);return[a,r===a?"plain":"s256"]}const tV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nV(e){const t=e.headers.get(Pw);if(!t||!t.match(tV))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rV(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function iV(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const aV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function El(e){if(!aV.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function t0(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sV(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function qP(e){return JSON.parse(JSON.stringify(e))}const uc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oV=[502,503,504];async function KP(e){var t;if(!K9(e))throw new kw(uc(e),0);if(oV.includes(e.status))throw new kw(uc(e),e.status);let n;try{n=await e.json()}catch(a){throw new xc(uc(a),a)}let r;const i=nV(e);if(i&&i.getTime()>=QI["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new HP(uc(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ta}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new HP(uc(n),e.status,n.weak_password.reasons);throw new M9(uc(n),e.status||500,r)}const cV=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function nt(e,t,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[Pw]||(a[Pw]=QI["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const c=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await lV(e,t,n+c,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function lV(e,t,n,r,i,a){const s=cV(t,r,i,a);let c;try{c=await e(n,Object.assign({},s))}catch(l){throw console.error(l),new kw(uc(l),0)}if(c.ok||await KP(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await KP(l)}}function na(e){var t;let n=null;hV(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=G9(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function YP(e){const t=na(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function po(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function uV(e){return{data:e,error:null}}function dV(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,s=iy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},s);return{data:{properties:c,user:l},error:null}}function XP(e){return e}function hV(e){return e.access_token&&e.refresh_token&&e.expires_in}const n0=["global","local","others"];class fV{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=nM(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=n0[0]){if(n0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${n0.join(", ")}`);try{return await nt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:po})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=iy(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:dV,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await nt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:po})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,s,c,l;try{const u={nextPage:null,lastPage:0,total:0},d=await nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:XP});if(d.error)throw d.error;const h=await d.json(),f=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ve(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){El(t);try{return await nt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:po})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){El(t);try{return await nt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:po})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){El(t);try{return await nt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:po})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){El(t.userId);try{const{data:n,error:r}=await nt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _deleteFactor(t){El(t.userId),El(t.id);try{return{data:await nt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,a,s,c,l;try{const u={nextPage:null,lastPage:0,total:0},d=await nt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:XP});if(d.error)throw d.error;const h=await d.json(),f=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ve(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await nt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await nt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await nt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await nt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await nt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}}function ZP(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Nl={debug:!!(globalThis&&tM()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rM extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class pV extends rM{}async function mV(e,t,n){Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new pV(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Nl.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function gV(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function iM(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function vV(e){return parseInt(e,16)}function yV(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function xV(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:c,requestId:l,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=iM(e.address),m=d?`${d}://${r}`:r,g=e.statement?`${e.statement}
`:"",v=`${m} wants you to sign in with your Ethereum account:
${p}

${g}`;let b=`URI: ${h}
Version: ${f}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(b+=`
Expiration Time: ${i.toISOString()}`),c&&(b+=`
Not Before: ${c.toISOString()}`),l&&(b+=`
Request ID: ${l}`),u){let w=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);w+=`
- ${y}`}b+=w}return`${v}
${b}`}class Bn extends Error{constructor({message:t,code:n,cause:r,name:i}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Sg extends Bn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function bV({error:e,options:t}){var n,r,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Bn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Bn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Bn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Bn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Bn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Bn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Bn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(aM(s)){if(a.rp.id!==s)return new Bn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Bn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Bn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function wV({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Bn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(aM(r)){if(n.rpId!==r)return new Bn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Bn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class _V{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const jV=new _V;function SV(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=iy(e,["challenge","user","excludeCredentials"]),a=eu(t).buffer,s=Object.assign(Object.assign({},n),{id:eu(n.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:a,user:s});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];c.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:eu(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return c}function EV(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=iy(e,["challenge","allowCredentials"]),i=eu(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const c=n[s];a.allowCredentials[s]=Object.assign(Object.assign({},c),{id:eu(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function NV(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:_c(new Uint8Array(e.response.attestationObject)),clientDataJSON:_c(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function PV(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:_c(new Uint8Array(i.authenticatorData)),clientDataJSON:_c(new Uint8Array(i.clientDataJSON)),signature:_c(new Uint8Array(i.signature)),userHandle:i.userHandle?_c(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function aM(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function JP(){var e,t;return!!(mr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function kV(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sg("Browser returned unexpected credential type",t)}:{data:null,error:new Sg("Empty credential response",t)}}catch(t){return{data:null,error:bV({error:t,options:e})}}}async function CV(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sg("Browser returned unexpected credential type",t)}:{data:null,error:new Sg("Empty credential response",t)}}catch(t){return{data:null,error:wV({error:t,options:e})}}}const AV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},TV={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Eg(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))r[a]=s;else if(n(s))r[a]=s;else if(t(s)){const c=r[a];t(c)?r[a]=Eg(c,s):r[a]=Eg(s)}else r[a]=s}return r}function OV(e,t){return Eg(AV,e,t||{})}function RV(e,t){return Eg(TV,e,t||{})}class $V{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},a){try{const{data:s,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:c};const l=i??jV.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=OV(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:h}=await kV({publicKey:u,signal:l});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=RV(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:h}=await CV(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(s){return Ve(s)?{data:null,error:s}:{data:null,error:new xc("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new qh("rpId is required for WebAuthn authentication")};try{if(!JP())return{data:null,error:new xc("Browser does not support WebAuthn",null)};const{data:s,error:c}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!s)return{data:null,error:c};const{webauthn:l}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(s){return Ve(s)?{data:null,error:s}:{data:null,error:new xc("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new qh("rpId is required for WebAuthn registration")};try{if(!JP())return{data:null,error:new xc("Browser does not support WebAuthn",null)};const{data:s,error:c}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:c};const{data:l,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return l?this._verify({factorId:s.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(s){return Ve(s)?{data:null,error:s}:{data:null,error:new xc("Unexpected error in register",s)}}}}gV();const IV={url:T9,storageKey:O9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:R9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function QP(e,t,n){return await n()}const Pl={};class Kh{get jwks(){var t,n;return(n=(t=Pl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Pl[this.storageKey]=Object.assign(Object.assign({},Pl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Pl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Pl[this.storageKey]=Object.assign(Object.assign({},Pl[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},IV),t);if(this.storageKey=a.storageKey,this.instanceID=(n=Kh.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Kh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&mr()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new fV({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=nM(a.fetch),this.lock=a.lock||QP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:mr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=mV:this.lock=QP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $V(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:tM()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ZP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=ZP(this.memoryStorage)),mr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${JI}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(mr()&&(n=q9(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),mr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),B9(a)){const l=(t=a.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",c),await this._saveSession(s),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ve(n)?this._returnResult({error:n}):this._returnResult({error:new xc("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:na}),{data:s,error:c}=a;if(c||!s)return this._returnResult({data:{user:null,session:null},error:c});const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(Ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Sl(this.storage,this.storageKey)),a=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:na})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:na})}else throw new bm("You must provide either an email or phone number and a password");const{data:s,error:c}=a;if(c||!s)return this._returnResult({data:{user:null,session:null},error:c});const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(Ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:s,options:c}=t;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:YP})}else if("phone"in t){const{phone:a,password:s,options:c}=t;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:YP})}else throw new bm("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new jl;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,a,s,c,l,u,d,h,f;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:g,wallet:v,statement:b,options:w}=t;let y;if(mr())if(typeof v=="object")y=v;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")y=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=v}const _=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),j=await y.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=iM(j[0]);let E=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const k=await y.request({method:"eth_chainId"});E=vV(k)}const P={domain:_.host,address:S,statement:b,uri:_.href,version:"1",chainId:E,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=xV(P),m=await y.request({method:"personal_sign",params:[yV(p),S]})}try{const{data:g,error:v}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:na});if(v)throw v;if(!g||!g.session||!g.user){const b=new jl;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(Ve(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,i,a,s,c,l,u,d,h,f,p;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:v,wallet:b,statement:w,options:y}=t;let _;if(mr())if(typeof b=="object")_=b;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const j=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),w?{statement:w}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)m=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(i=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(m),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:v,error:b}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:_c(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:na});if(b)throw b;if(!v||!v.session||!v.user){const w=new jl;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(Ve(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const n=await nc(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:s}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:na});if(await eo(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const c=new jl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(Ve(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:s}=t,c=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:na}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new jl;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,a,s;try{if("email"in t){const{email:c,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Sl(this.storage,this.storageKey));const{error:h}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:c,options:l}=t,{data:u,error:d}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new bm("You must provide either an email or phone number.")}catch(c){if(Ve(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:c}=await nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:na});if(c)throw c;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,u=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,a,s;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=await Sl(this.storage,this.storageKey));const u=await nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:uV});return!((a=u.data)===null||a===void 0)&&a.url&&mr()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(Ve(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ta;const{error:i}=await nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Ve(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:s}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:s,error:c}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:c})}throw new bm("You must provide either an email or phone number and a type")}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await nc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Jb:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const s=await nc(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=t0()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=sV(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:po}):await this._useSession(async n=>{var r,i,a;const{data:s,error:c}=n;if(c)throw c;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ta}:await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:po})})}catch(n){if(Ve(n))return L9(n)&&(await this._removeSession(),await eo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new ta;const s=i.session;let c=null,l=null;this.flowType==="pkce"&&t.email!=null&&([c,l]=await Sl(this.storage,this.storageKey));const{data:u,error:d}=await nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:l}),jwt:s.access_token,xform:po});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(Ve(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ta;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:s}=e0(t.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{data:c,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:l}=await this._getUser(t.access_token);if(l)throw l;a={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Ve(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:s,error:c}=n;if(c)throw c;t=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ta;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!mr())throw new wm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new wm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new UP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wm("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new UP("No code detected.");const{data:w,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:c,expires_at:l,token_type:u}=t;if(!a||!c||!s||!u)throw new wm("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(c);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Fl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:v}=await this._getUser(a);if(v)throw v;const b={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:f,refresh_token:s,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(r){if(Ve(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await nc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:c}=await this.admin.signOut(s,t);if(c&&!(D9(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return t!=="others"&&(await this._removeSession(),await eo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=W9(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Sl(this.storage,this.storageKey,!0));try{return await nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Ve(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var s,c,l,u,d;const{data:h,error:f}=a;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await nt(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return mr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ve(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:s,provider:c,token:l,access_token:u,nonce:d}=t,h=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:na}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new jl}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if(Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)throw s;return await nt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await X9(async i=>(i>0&&await Y9(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:na})),(i,a)=>{const s=200*Math.pow(2,i);return a&&Qb(a)&&Date.now()+s-r<Fl})}catch(r){if(this._debug(n,"error",r),Ve(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),mr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await nc(this.storage,this.storageKey);if(i&&this.userStorage){let s=await nc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await zl(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:t0()}else if(i&&!i.user&&!i.user){const s=await nc(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await eo(this.storage,this.storageKey+"-user"),await zl(this.storage,this.storageKey,i)):i.user=t0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Jb;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Jb}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Qb(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:c}=await this._getUser(i.access_token);!c&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ta;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new gy;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new ta;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),Ve(a)){const s={data:null,error:a};return Qb(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,n)}catch(l){a.push(l)}});if(await Promise.all(s),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await zl(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=qP(i);await zl(this.storage,this.storageKey,a)}else{const i=qP(n);await zl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await eo(this.storage,this.storageKey),await eo(this.storage,this.storageKey+"-code-verifier"),await eo(this.storage,this.storageKey+"-user"),this.userStorage&&await eo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&mr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Fl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Fl}ms, refresh threshold is ${Nw} ticks`),i<=Nw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rM)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await Sl(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(c.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await nt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)return this._returnResult({data:null,error:s});const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await nt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?NV(t.webauthn.credential_response):PV(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:l}=await nt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=await nt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:c}=s;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:SV(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:EV(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=e0(r.access_token);let s=null;a.aal&&(s=a.aal);let c=s;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:c,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await nt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ta})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ta});const s=await nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return s.data&&s.data.redirect_url&&mr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ta});const s=await nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return s.data&&s.data.redirect_url&&mr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(c=>c.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===t),r&&this.jwks_cached_at+I9>i)return r;const{data:a,error:s}=await nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(c=>c.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:i,payload:a,signature:s,raw:{header:c,payload:l}}=e0(r);n!=null&&n.allowExpired||rV(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:a,header:i,signature:s},error:null}}const d=iV(i.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,s,V9(`${c}.${l}`)))throw new Cw("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}}Kh.nextInstanceID={};const MV=Kh;class DV extends MV{constructor(t){super(t)}}class LV{constructor(t,n,r){var i,a,s;this.supabaseUrl=t,this.supabaseKey=n;const c=A9(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:_9,realtime:S9,auth:Object.assign(Object.assign({},j9),{storageKey:l}),global:w9},d=C9(r??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=P9(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new TH(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new y9(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new kH(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:s,flowType:c,lock:l,debug:u,throwOnError:d},h,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new DV({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,flowType:c,lock:l,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new KH(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const BV=(e,t,n)=>new LV(e,t,n);function FV(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}FV()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zV="https://lnxbvkcggoyfmpfthhhk.supabase.co",UV="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxueGJ2a2NnZ295Zm1wZnRoaGhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTg5MzcsImV4cCI6MjA3NTA3NDkzN30.jA9UekW12CqU7vKHBZUPN2dtwG-nhqy1yxE8L70HZjM",HV=UV,oe=BV(zV,HV,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}}}),VV=()=>{const e=od();return x.useEffect(()=>{(async()=>{try{let n=sessionStorage.getItem("visitor_session_id");n||(n=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("visitor_session_id",n));const r=navigator.userAgent,i=GV(r),a=WV(r),s=qV(r),c=document.referrer||null,{error:l}=await oe.from("visitor_tracking").insert({page_path:e.pathname,user_agent:r,referrer:c,session_id:n,device_type:i,browser:a,os:s,ip_address:null,country:null,city:null});l&&console.error("Error tracking visitor:",l)}catch(n){console.error("Error in visitor tracking:",n)}})()},[e.pathname]),null},GV=e=>/mobile/i.test(e)?"Mobile":/tablet|ipad/i.test(e)?"Tablet":"Desktop",WV=e=>e.includes("Chrome")&&!e.includes("Edg")?"Chrome":e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Firefox")?"Firefox":e.includes("Edg")?"Edge":e.includes("Opera")||e.includes("OPR")?"Opera":"Other",qV=e=>e.includes("Win")?"Windows":e.includes("Mac")?"MacOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")||e.includes("iPhone")||e.includes("iPad")?"iOS":"Other";var KV=Symbol.for("react.lazy"),Ng=CU[" use ".trim().toString()];function YV(e){return typeof e=="object"&&e!==null&&"then"in e}function sM(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===KV&&"_payload"in e&&YV(e._payload)}function vy(e){const t=XV(e),n=x.forwardRef((r,i)=>{let{children:a,...s}=r;sM(a)&&typeof Ng=="function"&&(a=Ng(a._payload));const c=x.Children.toArray(a),l=c.find(JV);if(l){const u=l.props.children,d=c.map(h=>h===l?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...s,ref:i,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return o.jsx(t,{...s,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var oM=vy("Slot");function XV(e){const t=x.forwardRef((n,r)=>{let{children:i,...a}=n;if(sM(i)&&typeof Ng=="function"&&(i=Ng(i._payload)),x.isValidElement(i)){const s=eG(i),c=QV(a,i.props);return i.type!==x.Fragment&&(c.ref=r?K$(r,s):s),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ZV=Symbol("radix.slottable");function JV(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ZV}function QV(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...c)=>{const l=a(...c);return i(...c),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function eG(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function cM(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=cM(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ct(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=cM(e))&&(r&&(r+=" "),r+=t);return r}const ek=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,tk=ct,sp=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return tk(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,s=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const f=ek(d)||ek(h);return i[u][f]}),c=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes({...a,...c}[g]):{...a,...c}[g]===v})?[...u,h,f]:u},[]);return tk(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},kj="-",tG=e=>{const t=rG(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const c=s.split(kj);return c[0]===""&&c.length!==1&&c.shift(),lM(c,t)||nG(s)},getConflictingClassGroupIds:(s,c)=>{const l=n[s]||[];return c&&r[s]?[...l,...r[s]]:l}}},lM=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?lM(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(kj);return(s=t.validators.find(({validator:c})=>c(a)))==null?void 0:s.classGroupId},nk=/^\[(.+)\]$/,nG=e=>{if(nk.test(e)){const t=nk.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},rG=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return aG(Object.entries(e.classGroups),n).forEach(([a,s])=>{Aw(s,r,a,t)}),r},Aw=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:rk(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(iG(i)){Aw(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,s])=>{Aw(s,rk(t,a),n,r)})})},rk=(e,t)=>{let n=e;return t.split(kj).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},iG=e=>e.isThemeGetter,aG=(e,t)=>t?e.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([s,c])=>[t+s,c])):a);return[n,i]}):e,sG=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(a,s)=>{n.set(a,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let s=n.get(a);if(s!==void 0)return s;if((s=r.get(a))!==void 0)return i(a,s),s},set(a,s){n.has(a)?n.set(a,s):i(a,s)}}},uM="!",oG=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],a=t.length,s=c=>{const l=[];let u=0,d=0,h;for(let v=0;v<c.length;v++){let b=c[v];if(u===0){if(b===i&&(r||c.slice(v,v+a)===t)){l.push(c.slice(d,v)),d=v+a;continue}if(b==="/"){h=v;continue}}b==="["?u++:b==="]"&&u--}const f=l.length===0?c:c.substring(d),p=f.startsWith(uM),m=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return n?c=>n({className:c,parseClassName:s}):s},cG=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},lG=e=>({cache:sG(e.cacheSize),parseClassName:oG(e),...tG(e)}),uG=/\s+/,dG=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],s=e.trim().split(uG);let c="";for(let l=s.length-1;l>=0;l-=1){const u=s[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let m=!!p,g=r(m?f.substring(0,p):f);if(!g){if(!m){c=u+(c.length>0?" "+c:c);continue}if(g=r(f),!g){c=u+(c.length>0?" "+c:c);continue}m=!1}const v=cG(d).join(":"),b=h?v+uM:v,w=b+g;if(a.includes(w))continue;a.push(w);const y=i(g,m);for(let _=0;_<y.length;++_){const j=y[_];a.push(b+j)}c=u+(c.length>0?" "+c:c)}return c};function hG(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=dM(t))&&(r&&(r+=" "),r+=n);return r}const dM=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=dM(e[r]))&&(n&&(n+=" "),n+=t);return n};function fG(e,...t){let n,r,i,a=s;function s(l){const u=t.reduce((d,h)=>h(d),e());return n=lG(u),r=n.cache.get,i=n.cache.set,a=c,c(l)}function c(l){const u=r(l);if(u)return u;const d=dG(l,n);return i(l,d),d}return function(){return a(hG.apply(null,arguments))}}const fn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},hM=/^\[(?:([a-z-]+):)?(.+)\]$/i,pG=/^\d+\/\d+$/,mG=new Set(["px","full","screen"]),gG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,as=e=>tu(e)||mG.has(e)||pG.test(e),to=e=>hd(e,"length",kG),tu=e=>!!e&&!Number.isNaN(Number(e)),r0=e=>hd(e,"number",tu),Kd=e=>!!e&&Number.isInteger(Number(e)),wG=e=>e.endsWith("%")&&tu(e.slice(0,-1)),vt=e=>hM.test(e),no=e=>gG.test(e),_G=new Set(["length","size","percentage"]),jG=e=>hd(e,_G,fM),SG=e=>hd(e,"position",fM),EG=new Set(["image","url"]),NG=e=>hd(e,EG,AG),PG=e=>hd(e,"",CG),Yd=()=>!0,hd=(e,t,n)=>{const r=hM.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},kG=e=>vG.test(e)&&!yG.test(e),fM=()=>!1,CG=e=>xG.test(e),AG=e=>bG.test(e),TG=()=>{const e=fn("colors"),t=fn("spacing"),n=fn("blur"),r=fn("brightness"),i=fn("borderColor"),a=fn("borderRadius"),s=fn("borderSpacing"),c=fn("borderWidth"),l=fn("contrast"),u=fn("grayscale"),d=fn("hueRotate"),h=fn("invert"),f=fn("gap"),p=fn("gradientColorStops"),m=fn("gradientColorStopPositions"),g=fn("inset"),v=fn("margin"),b=fn("opacity"),w=fn("padding"),y=fn("saturate"),_=fn("scale"),j=fn("sepia"),S=fn("skew"),E=fn("space"),P=fn("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",vt,t],R=()=>[vt,t],L=()=>["",as,to],B=()=>["auto",tu,vt],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",vt],fe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],be=()=>[tu,vt];return{cacheSize:500,separator:":",theme:{colors:[Yd],spacing:[as,to],blur:["none","",no,vt],brightness:be(),borderColor:[e],borderRadius:["none","","full",no,vt],borderSpacing:R(),borderWidth:L(),contrast:be(),grayscale:W(),hueRotate:be(),invert:W(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[wG,to],inset:A(),margin:A(),opacity:be(),padding:R(),saturate:be(),scale:be(),sepia:W(),skew:be(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",vt]}],container:["container"],columns:[{columns:[no]}],"break-after":[{"break-after":fe()}],"break-before":[{"break-before":fe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),vt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kd,vt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",vt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Kd,vt]}],"grid-cols":[{"grid-cols":[Yd]}],"col-start-end":[{col:["auto",{span:["full",Kd,vt]},vt]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Yd]}],"row-start-end":[{row:["auto",{span:[Kd,vt]},vt]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",vt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",vt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...te()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...te(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...te(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",vt,t]}],"min-w":[{"min-w":[vt,t,"min","max","fit"]}],"max-w":[{"max-w":[vt,t,"none","full","min","max","fit","prose",{screen:[no]},no]}],h:[{h:[vt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[vt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[vt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[vt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",no,to]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",r0]}],"font-family":[{font:[Yd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",vt]}],"line-clamp":[{"line-clamp":["none",tu,r0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",as,vt]}],"list-image":[{"list-image":["none",vt]}],"list-style-type":[{list:["none","disc","decimal",vt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",as,to]}],"underline-offset":[{"underline-offset":["auto",as,vt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),SG]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jG]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},NG]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[as,vt]}],"outline-w":[{outline:[as,to]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[as,to]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",no,PG]}],"shadow-color":[{shadow:[Yd]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",no,vt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",vt]}],duration:[{duration:be()}],ease:[{ease:["linear","in","out","in-out",vt]}],delay:[{delay:be()}],animate:[{animate:["none","spin","ping","pulse","bounce",vt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Kd,vt]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",vt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[as,to,r0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},OG=fG(TG);function ge(...e){return OG(ct(e))}const Cj=sp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-160 ease-out disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:shadow-[0_0_0_1px_hsl(var(--ring)),0_0_8px_hsl(var(--ring)/0.5)]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-[1.03] hover:-translate-y-0.5 hover:shadow-lg active:scale-[0.98] active:translate-y-0",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:scale-[1.03] hover:shadow-lg active:scale-[0.98]",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:scale-[1.03] hover:shadow-md active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:scale-[1.03] hover:shadow-md active:scale-[0.98]",ghost:"hover:bg-accent hover:text-accent-foreground hover:scale-[1.03] active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline hover:scale-[1.02] active:scale-[0.98]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),V=x.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>{const s=r?oM:"button";return o.jsx(s,{className:ge(Cj({variant:t,size:n,className:e})),ref:a,...i})});V.displayName="Button";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pM=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $G={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...c},l)=>x.createElement("svg",{ref:l,...$G,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:pM("lucide",i),...c},[...s.map(([u,d])=>x.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(e,t)=>{const n=x.forwardRef(({className:r,...i},a)=>x.createElement(IG,{ref:a,iconNode:t,className:pM(`lucide-${RG(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=se("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=se("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=se("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=se("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=se("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zG=se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=se("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UG=se("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HG=se("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GG=se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=se("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WG=se("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=se("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qG=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=se("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=se("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=se("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=se("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YG=se("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XG=se("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=se("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZG=se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JG=se("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QG=se("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=se("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=se("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=se("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=se("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=se("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=se("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=se("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=se("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=se("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=se("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=se("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=se("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=se("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=se("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=se("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=se("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=se("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=se("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pW=se("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=se("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vW=se("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=se("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=se("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bW=se("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wW=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=se("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _W=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=se("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=se("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SW=se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=se("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=se("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),EW=1,NW=1e6;let c0=0;function PW(){return c0=(c0+1)%Number.MAX_SAFE_INTEGER,c0.toString()}const l0=new Map,fk=e=>{if(l0.has(e))return;const t=setTimeout(()=>{l0.delete(e),Oh({type:"REMOVE_TOAST",toastId:e})},NW);l0.set(e,t)},kW=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,EW)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?fk(n):e.toasts.forEach(r=>{fk(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},lg=[];let ug={toasts:[]};function Oh(e){ug=kW(ug,e),lg.forEach(t=>{t(ug)})}function CW({...e}){const t=PW(),n=i=>Oh({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>Oh({type:"DISMISS_TOAST",toastId:t});return Oh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function lp(){const[e,t]=x.useState(ug);return x.useEffect(()=>(lg.push(t),()=>{const n=lg.indexOf(t);n>-1&&lg.splice(n,1)}),[e]),{...e,toast:CW,dismiss:n=>Oh({type:"DISMISS_TOAST",toastId:n})}}const wM=e=>{const[t,n]=x.useState(!1),[r,i]=x.useState(!0);return x.useEffect(()=>{(async()=>{if(!e){n(!1),i(!1);return}try{const{data:s,error:c}=await oe.from("user_roles").select("role").eq("user_id",e.id).eq("role","admin").maybeSingle();c?(c.code!=="PGRST116"&&c.code!=="PGRST301"&&console.error("Error checking admin status:",c),n(!1)):n(!!s)}catch(s){console.error("Unexpected error checking admin:",s),n(!1)}finally{i(!1)}})()},[e]),{isAdmin:t,isLoading:r}},_M=cj,jM=Y$,AW=oj,SM=x.forwardRef(({className:e,...t},n)=>o.jsx(Zf,{className:ge("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));SM.displayName=Zf.displayName;const TW=sp("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ij=x.forwardRef(({side:e="right",className:t,children:n,...r},i)=>o.jsxs(AW,{children:[o.jsx(SM,{}),o.jsxs(Jf,{ref:i,className:ge(TW({side:e}),t),...r,children:[n,o.jsxs(ay,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(fa,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ij.displayName=Jf.displayName;const Mj=({className:e,...t})=>o.jsx("div",{className:ge("flex flex-col space-y-2 text-center sm:text-left",e),...t});Mj.displayName="SheetHeader";const Dj=x.forwardRef(({className:e,...t},n)=>o.jsx(Qf,{ref:n,className:ge("text-lg font-semibold text-foreground",e),...t}));Dj.displayName=Qf.displayName;const OW=x.forwardRef(({className:e,...t},n)=>o.jsx(ep,{ref:n,className:ge("text-sm text-muted-foreground",e),...t}));OW.displayName=ep.displayName;const EM=x.createContext(void 0),u0="prossmind-theme";function RW({children:e}){const[t,n]=x.useState(()=>typeof window>"u"?"system":localStorage.getItem(u0)||"system"),[r,i]=x.useState(()=>typeof window>"u"?"light":t==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t);x.useEffect(()=>{if(t==="system"){const s=window.matchMedia("(prefers-color-scheme: dark)"),c=l=>{i(l.matches?"dark":"light")};return c(s),s.addEventListener("change",c),()=>s.removeEventListener("change",c)}else i(t)},[t]),x.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),r==="dark"?s.classList.add("dark"):s.classList.add("light")},[r]);const a=s=>{n(s),typeof window<"u"&&localStorage.setItem(u0,s)};return x.useEffect(()=>{const s=window.document.documentElement,l=localStorage.getItem(u0)||"system";let u="light";l==="system"?u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":u=l,s.classList.remove("light","dark"),s.classList.add(u)},[]),o.jsx(EM.Provider,{value:{theme:t,setTheme:a,resolvedTheme:r},children:e})}function $W(){const e=x.useContext(EM);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const d0=()=>{const{theme:e,setTheme:t,resolvedTheme:n}=$W(),[r,i]=x.useState(!1);if(x.useEffect(()=>{i(!0)},[]),!r)return o.jsx(V,{variant:"ghost",size:"icon",className:"h-9 w-9","aria-label":"Theme toggle",disabled:!0,children:o.jsx(uk,{className:"h-5 w-5","aria-hidden":"true"})});const a=()=>{t(e==="light"?"dark":e==="dark"?"system":"light")};return o.jsxs(V,{variant:"ghost",size:"icon",onClick:a,className:"h-9 w-9 relative transition-all","aria-label":`Switch to ${n==="dark"?"light":"dark"} mode`,title:`Current: ${n==="dark"?"Dark":"Light"} mode (${e==="system"?"Auto":"Manual"})`,children:[n==="dark"?o.jsx(uk,{className:"h-5 w-5 transition-all rotate-0 scale-100","aria-hidden":"true"}):o.jsx(cW,{className:"h-5 w-5 transition-all rotate-0 scale-100","aria-hidden":"true"}),o.jsx("span",{className:"sr-only",children:n==="dark"?"Switch to light mode":"Switch to dark mode"})]})},Va=()=>{const[e,t]=x.useState(!1);return x.useEffect(()=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)");t(n.matches);const r=i=>{t(i.matches)};return n.addEventListener?(n.addEventListener("change",r),()=>n.removeEventListener("change",r)):(n.addListener(r),()=>n.removeListener(r))},[]),e},xt=e=>{if(e)return{duration:0}},up=()=>{const t=new URLSearchParams(window.location.search).get("subdomain");if(t)return t;const r=window.location.host.split(".");return r.length>2?r[0]:null},NM=()=>{const e=up();return e&&["app","docs","admin","status","api","de","fr","bpmn","pid","partners"].includes(e)?e:"main"},IW=()=>NM()==="app",si=()=>{const e=window.location.host,t=window.location.hostname;return e.includes("localhost")||e.includes("127.0.0.1")||e.includes("0.0.0.0")||t.endsWith(".localhost")},PM=()=>{const e=window.location.host,t=e.split(".");return t.length>2?t.slice(-2).join("."):e},kM=(e,t="")=>{if(si()){const a=t.startsWith("/")?t:`/${t}`,s=`${window.location.origin}${a}`,c=s.includes("?")?"&":"?";return`${s}${c}subdomain=${e}`}const n=window.location.protocol,r=PM(),i=t.startsWith("/")?t:`/${t}`;return`${n}//${e}.${r}${i}`},ua=(e="",t=!1)=>{const n=kM("app",e);t?window.open(n,"_blank"):window.location.href=n},Iw=(e,t="")=>kM(e,t),ia=()=>{const e=up();return e?`?subdomain=${e}`:""},er=(e,t)=>{const n=up();if(n&&si()){const r=t.includes("?")?"&":"?";e(`${t}${r}subdomain=${n}`)}else e(t)},MW=()=>{if(si())return`${window.location.origin}/`;const e=window.location.protocol,t=PM();return`${e}//${t}/`},Lr=({user:e})=>{const t=od(),{toast:n}=lp(),r=x.useRef(!1),i=x.useRef(null),a=x.useRef(null),[s,c]=x.useState(()=>{const E=e??null;return a.current=E,E}),{isAdmin:l}=wM(s),u=Va(),[d,h]=x.useState(!1),[f,p]=x.useState(!1),[m,g]=x.useState(!1),{scrollY:v}=q$();x.useEffect(()=>{oe.auth.getSession().then(({data:{session:P}})=>{r.current=!0;const k=(P==null?void 0:P.user)??null;i.current=k,a.current=k,c(k)});const{data:{subscription:E}}=oe.auth.onAuthStateChange((P,k)=>{r.current=!0;const T=(k==null?void 0:k.user)??null;i.current=T,a.current=T,c(T)});return()=>E.unsubscribe()},[]),x.useEffect(()=>{r.current&&(e!==void 0?(a.current=e,c(e),e&&(i.current=e)):e===void 0&&a.current===null&&i.current!==null&&(a.current=i.current,c(i.current)))},[e]),x.useEffect(()=>{a.current=s},[s]),x.useEffect(()=>{const E=()=>{h(window.innerWidth<1080)};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),x.useEffect(()=>{const E=v.on("change",P=>{g(P>50)});return()=>E()},[v]);const b=async()=>{var P,k;const{error:E}=await oe.auth.signOut();E&&!((P=E.message)!=null&&P.includes("session"))&&!((k=E.message)!=null&&k.includes("Session"))&&n({variant:"destructive",title:"Error signing out",description:E.message}),c(null),i.current=null,a.current=null,window.location.href="/"},y=NM()==="app",_=[{name:"Dashboard",path:"/dashboard",icon:eW},{name:"Projects",path:"/projects",icon:YG},{name:"Templates",path:"/templates",icon:Mn},{name:"Vision AI",path:"/vision-ai",icon:ya}],j=[{name:"Features",path:"/features"},{name:"Vision AI",path:"/vision-ai"},{name:"Pricing",path:"/pricing"},{name:"Documentation",path:Iw("docs"),external:!0},{name:"Contact",path:"/contact"}],S=y?_:j;return o.jsx(ye.nav,{className:"fixed top-0 left-0 right-0 z-50 border-b border-border/50 h-16 bg-background/95 backdrop-blur-lg",style:{backgroundColor:Nh(v,[0,100],["hsl(var(--background) / 0.95)","hsl(var(--background) / 1)"]),backdropFilter:Nh(v,[0,100],["blur(16px)","blur(24px)"]),boxShadow:Nh(v,[0,100],["0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","0 4px 30px rgba(37, 99, 235, 0.1)"])},initial:u?{y:0}:{y:-100},animate:{y:0},transition:xt(u)||{duration:.3},children:o.jsx("div",{className:"container mx-auto px-6 h-full",children:o.jsxs("div",{className:"flex items-center justify-between h-full",children:[o.jsx(ye.div,{animate:u?{scale:1}:{scale:m?.95:1},transition:xt(u)||{duration:.3},children:o.jsxs("a",{href:MW(),className:"flex items-center space-x-3 group flex-shrink-0","aria-label":"ProssMind Home",children:[o.jsx(ye.img,{src:"/Prossmind-Logo.png",alt:"ProssMind Logo",className:"h-12 w-auto",whileHover:u?{}:{scale:1.05},transition:xt(u)||{duration:.2}}),o.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent whitespace-nowrap",children:"ProssMind"})]})}),!d&&o.jsxs(o.Fragment,{children:[o.jsx(ye.div,{className:"flex items-center space-x-1 bg-secondary/50 rounded-full px-2 py-1.5 shadow-sm flex-shrink-0 relative border border-border/30",style:{borderRadius:"40px"},animate:u?{}:{paddingTop:m?"0.25rem":"0.375rem",paddingBottom:m?"0.25rem":"0.375rem"},transition:xt(u)||{duration:.3},children:S.map(E=>{const P=E.icon,k=E.external,T=!k&&(t.pathname===E.path||E.path==="/dashboard"&&t.pathname==="/"),A=`px-5 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap relative flex items-center gap-2 ${T?"text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80 hover:scale-[1.02]"}`;if(k)return o.jsxs("a",{href:E.path,target:"_blank",rel:"noopener noreferrer",className:A,"aria-label":`Navigate to ${E.name} page`,children:[P&&o.jsx(P,{className:"h-4 w-4 relative z-10"}),o.jsx("span",{className:"relative z-10",children:E.name})]},E.path);const R=!k&&si()?`${E.path}${ia()}`:E.path;return o.jsxs(Qn,{to:R,className:A,"aria-label":`Navigate to ${E.name} page`,children:[T?o.jsx(ye.div,{layoutId:u?void 0:"activeNavIndicator",className:"absolute inset-0 bg-primary rounded-full shadow-md",transition:xt(u)||{type:"spring",stiffness:380,damping:30}}):null,P&&o.jsx(P,{className:"h-4 w-4 relative z-10"}),o.jsx("span",{className:"relative z-10",children:E.name})]},E.path)})}),s?o.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[o.jsx(d0,{}),y&&o.jsxs(o.Fragment,{children:[o.jsx(Qn,{to:si()?`/account${ia()}`:"/account",children:o.jsx(V,{variant:"ghost",size:"sm",className:"gap-2","aria-label":"Account",children:o.jsx(Jh,{className:"h-4 w-4"})})}),o.jsx(Qn,{to:si()?`/settings${ia()}`:"/settings",children:o.jsx(V,{variant:"ghost",size:"sm",className:"gap-2","aria-label":"Settings",children:o.jsx(kg,{className:"h-4 w-4"})})})]}),l&&o.jsx(Qn,{to:si()?`/admin${ia()}`:"/admin",children:o.jsxs(V,{variant:"outline",size:"sm",className:"gap-2 hover:bg-primary/10 hover:border-primary/50 transition-all whitespace-nowrap","aria-label":"Admin Dashboard",children:[o.jsx(Cs,{className:"h-4 w-4","aria-hidden":"true"}),"Admin"]})}),o.jsx("span",{className:"text-sm text-muted-foreground font-medium whitespace-nowrap truncate max-w-[200px]","aria-label":`Logged in as ${s.email}`,children:s.email}),o.jsxs(V,{onClick:b,variant:"outline",className:"items-center gap-2 hover:bg-destructive/10 hover:border-destructive/50 hover:text-destructive transition-all whitespace-nowrap","aria-label":"Sign out",children:[o.jsx(ok,{className:"h-4 w-4","aria-hidden":"true"}),"Sign Out"]})]}):o.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[o.jsx(d0,{}),o.jsx(Qn,{to:si()?`/auth${ia()}`:"/auth",className:"flex-shrink-0",children:o.jsxs(V,{className:"flex items-center gap-2 bg-primary hover:bg-primary/90 shadow-md hover:shadow-lg transition-all whitespace-nowrap","aria-label":"Sign up or log in",children:[y?"Sign In":"Sign Up",o.jsx(Yh,{className:"h-4 w-4","aria-hidden":"true"})]})})]})]}),d&&o.jsxs(_M,{open:f,onOpenChange:p,children:[o.jsx(jM,{asChild:!0,children:o.jsx(ye.div,{whileTap:u?{}:{scale:.95},children:o.jsxs(V,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Open navigation menu",children:[o.jsx(ye.div,{animate:u?{rotate:f?90:0}:{rotate:f?90:0},transition:xt(u)||{duration:.3},children:o.jsx(xM,{className:"h-6 w-6","aria-hidden":"true"})}),o.jsx("span",{className:"sr-only",children:"Open menu"})]})})}),o.jsxs(Ij,{side:"right",className:"w-[300px] sm:w-[400px]",children:[o.jsx(Mj,{children:o.jsx(Dj,{children:"Menu"})}),o.jsxs("nav",{className:"flex flex-col gap-4 mt-6",children:[o.jsxs(ye.div,{className:"flex items-center justify-between px-4 py-2 border-b border-border mb-2",initial:u?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:xt(u)||{delay:.1},children:[o.jsx("span",{className:"text-sm font-medium",children:"Theme"}),o.jsx(d0,{})]}),S.map((E,P)=>{const k=E.icon,T=E.external,R=`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${!T&&(t.pathname===E.path||E.path==="/dashboard"&&t.pathname==="/")?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80"}`;return o.jsx(ye.div,{initial:u?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:xt(u)||{delay:.1+P*.05},children:T?o.jsxs("a",{href:E.path,target:"_blank",rel:"noopener noreferrer",className:R,"aria-label":`Navigate to ${E.name} page`,children:[k&&o.jsx(k,{className:"h-4 w-4"}),E.name]}):o.jsxs(Qn,{to:si()?`${E.path}${ia()}`:E.path,onClick:()=>p(!1),className:R,"aria-label":`Navigate to ${E.name} page`,children:[k&&o.jsx(k,{className:"h-4 w-4"}),E.name]})},E.path)}),y&&s&&o.jsxs(o.Fragment,{children:[o.jsx(ye.div,{initial:u?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:xt(u)||{delay:.3},children:o.jsxs(Qn,{to:si()?`/account${ia()}`:"/account",onClick:()=>p(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${t.pathname==="/account"?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80"}`,children:[o.jsx(Jh,{className:"h-4 w-4"}),"Account"]})}),o.jsx(ye.div,{initial:u?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:xt(u)||{delay:.35},children:o.jsxs(Qn,{to:si()?`/settings${ia()}`:"/settings",onClick:()=>p(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${t.pathname==="/settings"?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted/80"}`,children:[o.jsx(kg,{className:"h-4 w-4"}),"Settings"]})})]}),s?o.jsxs(o.Fragment,{children:[l&&o.jsx(Qn,{to:si()?`/admin${ia()}`:"/admin",onClick:()=>p(!1),children:o.jsxs(V,{variant:"outline",className:"w-full justify-start gap-2","aria-label":"Admin Dashboard",children:[o.jsx(Cs,{className:"h-4 w-4","aria-hidden":"true"}),"Admin"]})}),o.jsx("div",{className:"px-4 py-2 text-sm text-muted-foreground","aria-label":`Logged in as ${s.email}`,children:s.email}),o.jsxs(V,{onClick:()=>{b(),p(!1)},variant:"outline",className:"w-full justify-start gap-2 hover:bg-destructive/10 hover:border-destructive/50 hover:text-destructive","aria-label":"Sign out",children:[o.jsx(ok,{className:"h-4 w-4","aria-hidden":"true"}),"Sign Out"]})]}):o.jsx(Qn,{to:si()?`/auth${ia()}`:"/auth",onClick:()=>p(!1),children:o.jsxs(V,{className:"w-full gap-2","aria-label":"Sign up or log in",children:["Sign Up",o.jsx(Yh,{className:"h-4 w-4","aria-hidden":"true"})]})})]})]})]})]})})})},DW="/assets/hero-mind-process-CVwas96Y.jpg",LW=()=>{const e=x.useRef(null),t=x.useRef([]),n=x.useRef();return x.useEffect(()=>{const r=e.current;if(!r)return;const i=r.getContext("2d");if(!i)return;const a=()=>{r.width=window.innerWidth,r.height=window.innerHeight};a(),window.addEventListener("resize",a);const s=Math.min(20,Math.max(15,Math.floor(r.width*r.height/2e4)));t.current=Array.from({length:s},()=>({x:Math.random()*r.width,y:Math.random()*r.height,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3-.2,size:Math.random()*2+1,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,opacity:Math.random()*.5+.3}));const c=()=>{i.clearRect(0,0,r.width,r.height);const l=t.current;l.forEach(u=>{let d=u.x+u.vx,h=u.y+u.vy;u.rotation+=u.rotationSpeed,d<0&&(d=r.width,u.opacity=Math.random()*.5+.3),d>r.width&&(d=0,u.opacity=Math.random()*.5+.3),h<0&&(h=r.height,u.opacity=Math.random()*.5+.3),h>r.height&&(h=0,u.opacity=Math.random()*.5+.3),u.x=d,u.y=h,i.save(),i.translate(u.x,u.y),i.rotate(u.rotation),i.beginPath(),i.arc(0,0,u.size,0,Math.PI*2),i.fillStyle=`rgba(37, 99, 235, ${u.opacity})`,i.fill(),i.restore()}),l.forEach((u,d)=>{l.slice(d+1).forEach(h=>{const f=u.x-h.x,p=u.y-h.y,m=Math.sqrt(f*f+p*p);m<150&&(i.beginPath(),i.moveTo(u.x,u.y),i.lineTo(h.x,h.y),i.strokeStyle=`rgba(37, 99, 235, ${.1*(1-m/150)})`,i.lineWidth=.5,i.stroke())})}),n.current=requestAnimationFrame(c)};return c(),()=>{window.removeEventListener("resize",a),n.current&&cancelAnimationFrame(n.current)}},[]),o.jsx(ye.canvas,{ref:e,className:"absolute inset-0 pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:1}})},BW=({containerRef:e,centerX:t,centerY:n})=>{const r=x.useRef(null),[i,a]=x.useState([]),s=x.useRef();if(x.useEffect(()=>{if(!e.current||t===0||n===0)return;const l=e.current.getBoundingClientRect(),u=t-l.left,d=n-l.top,h=6,f=Array.from({length:h},(m,g)=>{const v=g/h*Math.PI*2,b=150+Math.random()*100,w=u+Math.cos(v)*b,y=d+Math.sin(v)*b,_=3+Math.floor(Math.random()*3),j=Array.from({length:_},()=>({progress:Math.random(),speed:.005+Math.random()*.005}));return{id:g,startX:u,startY:d,endX:w,endY:y,particles:j}});a(f);const p=()=>{a(m=>m.map(g=>({...g,particles:g.particles.map(v=>({...v,progress:(v.progress+v.speed)%1}))}))),s.current=requestAnimationFrame(p)};return p(),()=>{s.current&&cancelAnimationFrame(s.current)}},[t,n,e]),!e.current)return null;const c=e.current.getBoundingClientRect();return o.jsxs("svg",{ref:r,className:"absolute inset-0 pointer-events-none",width:c.width,height:c.height,children:[o.jsx("defs",{children:o.jsxs("filter",{id:"glow",children:[o.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),o.jsxs("feMerge",{children:[o.jsx("feMergeNode",{in:"coloredBlur"}),o.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),i.map(l=>o.jsxs("g",{children:[o.jsx(ye.line,{x1:l.startX,y1:l.startY,x2:l.endX,y2:l.endY,stroke:"rgba(37, 99, 235, 0.2)",strokeWidth:"1",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,ease:"easeOut"}}),l.particles.map((u,d)=>{const h=l.startX+(l.endX-l.startX)*u.progress,f=l.startY+(l.endY-l.startY)*u.progress,p=1-u.progress%.2*5;return o.jsxs("g",{children:[o.jsx("circle",{cx:h,cy:f,r:"8",fill:"rgba(37, 99, 235, 0.1)",opacity:p,filter:"url(#glow)"}),o.jsx(ye.circle,{cx:h,cy:f,r:"3",fill:"rgba(37, 99, 235, 0.8)",filter:"url(#glow)",animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]},d)})]},l.id))]})},FW=({src:e,autoplay:t=!0,loop:n=!0,className:r="","aria-label":i,lazy:a=!0,fallback:s})=>{const c=x.useRef(null),l=x.useRef(null),[u,d]=x.useState(!1),[h,f]=x.useState(!1),p=Va(),[m,g]=x.useState(!a);return x.useEffect(()=>{if(!a||m)return;const v=c.current;if(!v)return;const b=new IntersectionObserver(w=>{w.forEach(y=>{y.isIntersecting&&(g(!0),b.disconnect())})},{rootMargin:"100px",threshold:0});if(b.observe(v),typeof window.requestIdleCallback<"u"){const w=window.requestIdleCallback(()=>{m||g(!0)});return()=>{b.disconnect(),window.cancelIdleCallback(w)}}return()=>b.disconnect()},[a,m]),x.useEffect(()=>{if(!m||!c.current||p){p&&s&&d(!0);return}let v=!0;return(async()=>{try{const w=await fetch(e);if(!w.ok)throw new Error(`Failed to load animation: ${w.statusText}`);const y=await w.json();if(!v||!c.current)return;const _=JU.loadAnimation({container:c.current,renderer:"svg",loop:n,autoplay:t,animationData:y});l.current=_,d(!0)}catch(w){console.error("Error loading Lottie animation:",w),v&&(f(!0),d(!0))}})(),()=>{v=!1,l.current&&(l.current.destroy(),l.current=null)}},[e,m,p,t,n,s]),p&&s?o.jsx("div",{className:r,children:s}):h&&s?o.jsx("div",{className:r,children:s}):o.jsx("div",{ref:c,className:r,"aria-label":i,"aria-hidden":i?void 0:"true",role:i?"img":void 0})},xy=e=>{const t=x.useRef(null),n=PU(t,{once:(e==null?void 0:e.once)??!0,amount:(e==null?void 0:e.threshold)??.15});return{ref:t,isInView:n}},zW={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},by={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},ru={hidden:{opacity:0,y:18},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.2,.9,.3,1]}}},CM=()=>{const e=Va(),t=x.useRef(null),[n,r]=x.useState(null);x.useEffect(()=>{oe.auth.getSession().then(({data:{session:l}})=>{r((l==null?void 0:l.user)??null)})},[]);const i=()=>{ua(n?"/dashboard":"/auth")},{scrollY:a}=q$();Nh(a,[0,500],[0,100]),Nh(a,[0,300],[1,0]);const[s,c]=x.useState({x:0,y:0});return x.useEffect(()=>{if(t.current){const l=t.current.getBoundingClientRect();c({x:l.left+l.width/2,y:l.top+l.height/2})}},[]),o.jsxs(ye.section,{className:"relative min-h-screen bg-gradient-to-b from-gray-50 to-white dark:from-background dark:to-card text-hero-foreground dark:text-foreground overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[o.jsx(LW,{}),o.jsx("div",{className:"container mx-auto px-8 md:px-12 pb-8 md:pb-16 relative z-10",children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center min-h-[600px]",children:[o.jsxs(ye.div,{className:"space-y-6 md:space-y-8 flex flex-col justify-center",initial:"hidden",animate:"visible",variants:zW,children:[o.jsxs(ye.div,{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-primary/10 dark:bg-primary/20 border border-primary/20 dark:border-primary/30 text-xs font-medium mb-2",style:{width:"fit-content"},initial:e?{opacity:1,x:0}:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:xt(e)||{delay:.2,duration:.5},children:[o.jsx(wu,{className:"h-3 w-3 text-primary"}),o.jsx("span",{children:"AI-Powered Process Intelligence"})]}),o.jsx(ye.h1,{className:"text-5xl md:text-7xl font-bold leading-tight tracking-tight",initial:e?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},transition:xt(e)||{delay:.4,duration:.7,ease:"easeOut"},children:"ProssMind"}),o.jsx(ye.p,{className:"text-lg md:text-xl text-foreground/80 dark:text-foreground/80 max-w-lg leading-relaxed",initial:e?{opacity:1,y:0}:{opacity:0,y:10},animate:{opacity:1,y:0},transition:xt(e)||{delay:1.1,duration:.6},children:"Swiss AI Process Intelligence  GDPR Compliant  Locally Hosted."}),o.jsxs(ye.div,{className:"flex flex-col gap-4 sm:flex-row sm:gap-6 pt-2",initial:e?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},transition:xt(e)||{delay:.5,duration:.6},children:[o.jsx(ye.div,{whileHover:e?{}:{scale:1.02},transition:xt(e)||{duration:.2},children:o.jsx(V,{size:"lg",className:"group text-base px-8 py-6 shadow-lg hover:shadow-xl transition-all focus-visible:outline-2 focus-visible:outline-offset-2 relative overflow-hidden",onClick:i,"aria-label":"Try ProssMind for free",style:{background:"linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.9))"},children:o.jsxs(ye.span,{className:"flex items-center",whileHover:e?{}:{scale:1.02},children:["Try It Free",o.jsx(ye.span,{className:"ml-2",animate:e?{x:0}:{x:[0,4,0]},transition:xt(e)||{duration:1.5,repeat:1/0,repeatDelay:2},children:o.jsx(Vl,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform","aria-hidden":"true"})})]})})}),o.jsx(ye.div,{whileHover:e?{}:{scale:1.02},transition:xt(e)||{duration:.2},children:o.jsx(V,{size:"lg",variant:"outline",className:"group text-base px-8 py-6 bg-hero-foreground/5 dark:bg-foreground/5 hover:bg-primary/5 border-2 border-primary/30 hover:border-primary transition-all focus-visible:outline-2 focus-visible:outline-offset-2 relative","aria-label":"View ProssMind features",style:{boxShadow:"0 0 0px rgba(100, 180, 255, 0)"},onMouseEnter:l=>{l.currentTarget.style.boxShadow="0 0 15px rgba(100, 180, 255, 0.5)",l.currentTarget.style.color="hsl(var(--primary))"},onMouseLeave:l=>{l.currentTarget.style.boxShadow="0 0 0px rgba(100, 180, 255, 0)",l.currentTarget.style.color=""},children:o.jsxs("span",{className:"flex items-center",children:["View Features",o.jsx(ye.span,{initial:e?{opacity:1,x:0}:{opacity:0,x:-5},whileHover:e?{}:{opacity:1,x:0},transition:xt(e)||{duration:.2},className:"ml-2",children:o.jsx(Yh,{className:"h-5 w-5","aria-hidden":"true"})})]})})})]})]}),o.jsxs(ye.div,{ref:t,className:"relative",initial:e?{opacity:1,x:0}:{opacity:0,x:50},animate:{opacity:1,x:0},transition:xt(e)||{delay:.6,duration:.7},children:[s.x>0&&s.y>0&&o.jsx(BW,{containerRef:t,centerX:s.x,centerY:s.y}),o.jsx(ye.div,{className:"absolute inset-0 bg-primary/20 dark:bg-primary/10 blur-3xl rounded-full glow-effect",animate:e?{scale:1}:{scale:[1,1.1,1]},transition:xt(e)||{duration:4,repeat:1/0}}),o.jsx(ye.div,{className:"relative z-10 rounded-2xl overflow-hidden shadow-2xl border border-hero-foreground/10 dark:border-border/50",whileHover:e?{}:{scale:1.02},animate:e?{scale:1}:{scale:[1,1.02,1]},transition:xt(e)||{duration:2,repeat:1/0,ease:"easeInOut"},children:o.jsx(FW,{src:"/animations/brain-flow.json",autoplay:!0,loop:!0,className:"w-full h-auto","aria-label":"Mind and Process Mining Intelligence animation",lazy:!0,fallback:o.jsx("img",{src:DW,alt:"Mind and Process Mining Intelligence",className:"w-full h-auto",loading:"lazy"})})})]})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-background to-transparent"})]})},AM=()=>{const e=Va(),t=[{icon:Mn,title:"Upload Your Document",description:"Upload images, PDFs, Word documents, or text files describing your process.",color:"text-blue-500",glowColor:"blue"},{icon:FG,title:"AI Analysis",description:"Our AI analyzes your document and extracts process information using advanced NLP.",color:"text-purple-500",glowColor:"purple"},{icon:bi,title:"BPMN Generation",description:"The AI generates a complete BPMN diagram with tasks, gateways, and flows.",color:"text-green-500",glowColor:"green"},{icon:wh,title:"Ready to Use",description:"Download your BPMN diagram or integrate directly with your workflow tools.",color:"text-primary",glowColor:"primary"}],n=r=>{switch(r){case"blue":return"hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50";case"purple":return"hover:shadow-[0_0_20px_rgba(168,85,247,0.5)] hover:shadow-purple-500/50";case"green":return"hover:shadow-[0_0_20px_rgba(34,197,94,0.5)] hover:shadow-green-500/50";case"primary":return"hover:shadow-[0_0_20px_hsl(var(--primary))] hover:shadow-primary/50";default:return"hover:shadow-[0_0_20px_rgba(59,130,246,0.5)]"}};return o.jsx(ye.section,{className:"py-24 bg-background relative overflow-hidden",initial:e?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:xt(e)||{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs(ye.div,{className:"text-center mb-16",initial:e?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:xt(e)||{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"How It Works"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"From document to diagram in seconds"})]}),o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((r,i)=>{const a=r.icon;return o.jsxs(ye.div,{className:`text-center space-y-4 p-6 rounded-2xl transition-all duration-300 cursor-pointer ${n(r.glowColor)}`,initial:e?{opacity:1,y:0}:{opacity:0,y:20},whileInView:e?{}:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:xt(e)||{duration:.6,delay:i*.1},whileHover:e?{}:{scale:1.05,y:-5},children:[o.jsx(ye.div,{className:"w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center transition-all duration-300","aria-hidden":"true",children:o.jsx(a,{className:`h-8 w-8 ${r.color} transition-all duration-300`,"aria-hidden":"true"})}),o.jsx("h3",{className:"text-xl font-semibold",children:r.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]},i)})})})]})})},xe=x.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ge("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));xe.displayName="Card";const Ne=x.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ge("flex flex-col space-y-1.5 p-6",e),...t}));Ne.displayName="CardHeader";const Pe=x.forwardRef(({className:e,...t},n)=>o.jsx("h3",{ref:n,className:ge("text-2xl font-semibold leading-none tracking-tight",e),...t}));Pe.displayName="CardTitle";const $e=x.forwardRef(({className:e,...t},n)=>o.jsx("p",{ref:n,className:ge("text-sm text-muted-foreground",e),...t}));$e.displayName="CardDescription";const Se=x.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ge("p-6 pt-0",e),...t}));Se.displayName="CardContent";const TM=x.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ge("flex items-center p-6 pt-0",e),...t}));TM.displayName="CardFooter";const UW=[{icon:bi,title:"Process Generator",description:"Design and build automated business processes with powerful AI capabilities."},{icon:ya,title:"Vision Automation",description:"Automate visual tasks with advanced computer vision and image processing."},{icon:Xh,title:"BPMN Integration",description:"Download BPMN diagrams and integrate with SAP Signavio, Camunda, Flowable, and more."}],OM=()=>{const e=Va(),{ref:t,isInView:n}=xy({threshold:.1});return o.jsx(ye.section,{className:"py-24 bg-muted/30 relative",initial:e?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:xt(e)||{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs(ye.div,{className:"text-center mb-16",initial:e?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:xt(e)||{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Powerful Features"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Everything you need to automate and optimize your business processes"})]}),o.jsx(ye.div,{ref:t,className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",variants:by,initial:"hidden",animate:n?"visible":"hidden",children:UW.map((r,i)=>o.jsx(ye.div,{variants:e?void 0:ru,whileHover:e?{}:{y:-12,rotateY:2,rotateX:2,scale:1.03},transition:xt(e)||{duration:.3},style:{perspective:1e3},children:o.jsxs(xe,{className:"card-hover cursor-pointer border-border/50 hover:border-primary bg-card/50 backdrop-blur-sm flex flex-col h-full rounded-2xl shadow-md transition-all p-6 relative overflow-hidden group",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},role:"article","aria-label":`Feature: ${r.title}`,children:[o.jsx(ye.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"linear-gradient(45deg, hsl(var(--primary)), hsl(var(--accent)))",padding:"1px"},initial:!1,children:o.jsx("div",{className:"w-full h-full bg-card/50 backdrop-blur-sm rounded-2xl"})}),o.jsxs(Ne,{className:"flex-shrink-0 relative z-10",children:[o.jsxs(ye.div,{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mb-6 tech-glow relative",animate:e?{rotate:0}:{rotate:[-2,2,-2]},transition:xt(e)||{duration:4,repeat:1/0,ease:"easeInOut"},whileHover:e?{}:{scale:1.15,rotate:15,filter:"brightness(1.3)"},children:[o.jsx(ye.div,{whileHover:e?{}:{scale:1.2},transition:xt(e)||{duration:.2},style:{filter:"drop-shadow(0 0 20px hsl(var(--primary)))"},children:o.jsx(r.icon,{className:"h-7 w-7 text-primary"})}),o.jsx(ye.div,{className:"absolute inset-0 rounded-xl bg-primary/20 blur-xl",animate:e?{scale:1,opacity:0}:{scale:[1,1.3,1],opacity:[0,.8,0]},transition:xt(e)||{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),o.jsx(Pe,{className:"text-2xl mb-2",children:r.title})]}),o.jsx(Se,{className:"flex-grow flex flex-col relative z-10",children:o.jsx($e,{className:"text-base leading-relaxed break-words overflow-visible min-h-0",children:r.description})})]})},i))})]})})},HW=[{name:"ProssMind Light",description:"Perfect for individuals and small teams",features:["Basic automation features","Up to 5 processes","Community support","Basic analytics"]},{name:"ProssMind Vision",description:"Advanced features for growing businesses",features:["All Light features","Unlimited processes","Vision automation","Priority support","Advanced analytics","Custom integrations"],popular:!0},{name:"Custom Models",description:"Enterprise-grade solution",features:["All Vision features","Custom AI models","Dedicated support","On-premise deployment","SLA guarantee","Training & consulting"]}],Lj=()=>{const{ref:e,isInView:t}=xy({threshold:.1}),n=Va();return o.jsx(ye.section,{className:"py-24 bg-background relative",initial:n?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:n?{}:{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs(ye.div,{className:"text-center mb-16",initial:n?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:n?{}:{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Choose Your Plan"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Select the perfect plan for your business needs"})]}),o.jsx(ye.div,{ref:e,className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",variants:by,initial:"hidden",animate:t?"visible":"hidden",children:HW.map((r,i)=>o.jsx(ye.div,{variants:ru,whileHover:{y:-8,rotateY:r.popular?0:2,rotateX:r.popular?0:2,scale:r.popular?1.05:1.02},style:{perspective:1e3},children:o.jsxs(xe,{className:`relative card-hover flex flex-col h-full transition-all ${r.popular?"border-primary shadow-2xl bg-gradient-to-b from-card to-primary/5 hover:border-primary/80":"border-border bg-card/50 backdrop-blur-sm hover:border-primary/50"}`,role:"article","aria-label":`Pricing tier: ${r.name}${r.popular?" - Most Popular":""}`,children:[r.popular&&o.jsxs(ye.div,{className:"absolute -top-4 left-1/2 -translate-x-1/2 z-10",animate:{scale:[1,1.08,1],opacity:[.8,1,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},whileHover:{scale:1.1},children:[o.jsx(ye.span,{className:"bg-gradient-to-r from-primary to-accent text-primary-foreground text-sm font-semibold px-6 py-2 rounded-full shadow-lg block",animate:{boxShadow:["0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 0 20px rgba(37, 99, 235, 0.5)","0 10px 15px -3px rgba(37, 99, 235, 0.3), 0 0 30px rgba(37, 99, 235, 0.8)","0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 0 20px rgba(37, 99, 235, 0.5)"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"Most Popular"}),o.jsx(ye.div,{animate:{scale:[1,1.15,1]},transition:{duration:.3,repeat:1/0,repeatDelay:5,ease:"easeOut"},className:"absolute inset-0",style:{pointerEvents:"none"}})]}),o.jsxs(Ne,{className:"text-center pb-8 pt-8 flex-shrink-0",children:[o.jsx(Pe,{className:"text-2xl mb-3 font-bold",children:r.name}),o.jsx($e,{className:"text-base",children:r.description})]}),o.jsxs(Se,{className:"flex flex-col flex-grow space-y-8",children:[o.jsx("ul",{className:"space-y-4 flex-grow",children:r.features.map((a,s)=>o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"rounded-full bg-primary/10 p-1 flex-shrink-0",children:o.jsx(Gr,{className:"h-4 w-4 text-primary"})}),o.jsx("span",{className:"text-sm leading-relaxed",children:a})]},s))}),o.jsx(V,{className:`w-full text-base py-6 mt-auto hover:scale-[1.03] transition-all ${r.popular?"shadow-lg hover:shadow-xl":""}`,variant:r.popular?"default":"outline",size:"lg","aria-label":`Get started with ${r.name}`,children:"Get Started"})]})]})},i))})]})})},VW="https://cdn.prossmind.com/partners.json",RM=()=>{const[e,t]=x.useState(null),[n,r]=x.useState(!0),[i,a]=x.useState(null),{ref:s,isInView:c}=xy({threshold:.1}),l=Va();if(x.useEffect(()=>{(async()=>{try{const h=await fetch(VW,{method:"GET",headers:{Accept:"application/json"}});if(!h.ok)throw new Error(`Failed to fetch partners data: ${h.status}`);const f=await h.json();t(f),a(null)}catch(h){console.error("Error fetching partners data:",h),a(h instanceof Error?h.message:"Failed to load partners")}finally{r(!1)}})()},[]),n)return o.jsx("section",{className:"py-20 md:py-24 bg-background",children:o.jsx("div",{className:"container mx-auto px-6 max-w-7xl",children:o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx(tr,{className:"h-8 w-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading partners..."})]})})});if(i||!e)return o.jsx("section",{className:"py-20 md:py-24 bg-background",children:o.jsx("div",{className:"container mx-auto px-6 max-w-7xl",children:o.jsxs("div",{className:"flex items-center justify-center py-12 text-muted-foreground",children:[o.jsx(mM,{className:"h-6 w-6 mr-2"}),o.jsx("span",{children:"Unable to load partners at this time"})]})})});const u=e.items.filter(d=>d.active).sort((d,h)=>d.priority-h.priority);return o.jsx(ye.section,{className:"py-12 md:py-20 bg-background relative overflow-hidden",initial:l?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:l?{}:{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6 max-w-7xl",children:[o.jsxs(ye.div,{className:"text-center mb-12 md:mb-16",initial:l?{opacity:1,y:0}:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:l?{}:{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-2xl md:text-4xl font-bold mb-3 md:mb-4",children:e.title}),o.jsx("p",{className:"text-base md:text-lg text-muted-foreground max-w-2xl mx-auto",children:e.subtitle})]}),o.jsx(ye.div,{ref:s,className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-5 md:gap-8",variants:by,initial:"hidden",animate:c?"visible":"hidden",children:u.map((d,h)=>o.jsx(GW,{partner:d,index:h,prefersReducedMotion:l},d.id))})]})})},GW=({partner:e,index:t,prefersReducedMotion:n})=>{const[r,i]=x.useState(!1),[a,s]=x.useState(!1);return o.jsxs(ye.a,{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"group relative flex items-center justify-center p-6 md:p-8 rounded-xl bg-card/50 backdrop-blur-sm border border-border hover:border-primary/50 transition-all duration-300 cursor-pointer",variants:ru,whileHover:n?{}:{y:-4,boxShadow:"0 0 14px rgba(0, 140, 255, 0.25)"},whileTap:n?{}:{scale:.97},onTouchStart:()=>s(!0),onTouchEnd:()=>s(!1),style:{transform:a?"scale(0.97)":void 0,transition:"transform 0.12s ease"},"aria-label":`Visit ${e.name} - ${e.role}`,children:[o.jsx("div",{className:"relative w-full h-16 flex items-center justify-center",children:r?o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm font-semibold text-foreground",children:e.name}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.role})]}):o.jsx("img",{src:e.logoUrl,alt:e.name,className:"max-h-[60px] w-auto object-contain filter grayscale group-hover:grayscale-0 transition-all duration-300",onError:()=>i(!0),loading:"lazy"})}),o.jsx(ye.div,{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",initial:{opacity:0},whileHover:{opacity:1},children:o.jsx(qG,{className:"h-4 w-4 text-primary"})}),o.jsx("div",{className:"absolute -bottom-12 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none hidden md:block z-10",children:o.jsxs("div",{className:"bg-popover text-popover-foreground text-xs px-3 py-2 rounded-md shadow-lg whitespace-nowrap border border-border",children:[o.jsx("p",{className:"font-semibold",children:e.name}),o.jsx("p",{className:"text-muted-foreground",children:e.role})]})})]})},vi=x.forwardRef(({className:e,...t},n)=>o.jsx("textarea",{className:ge("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-ring focus-visible:shadow-[0_0_0_1px_hsl(var(--ring)),0_0_8px_hsl(var(--ring)/0.3)] disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));vi.displayName="Textarea";function Mw(e,[t,n]){return Math.min(n,Math.max(t,e))}function WW(e,t){return x.useReducer((n,r)=>t[n][r]??n,e)}var Bj="ScrollArea",[$M]=$s(Bj),[qW,Ui]=$M(Bj),IM=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...s}=e,[c,l]=x.useState(null),[u,d]=x.useState(null),[h,f]=x.useState(null),[p,m]=x.useState(null),[g,v]=x.useState(null),[b,w]=x.useState(0),[y,_]=x.useState(0),[j,S]=x.useState(!1),[E,P]=x.useState(!1),k=hn(t,A=>l(A)),T=sy(i);return o.jsx(qW,{scope:n,type:r,dir:T,scrollHideDelay:a,scrollArea:c,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:j,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:E,onScrollbarYEnabledChange:P,onCornerWidthChange:w,onCornerHeightChange:_,children:o.jsx(kt.div,{dir:T,...s,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});IM.displayName=Bj;var MM="ScrollAreaViewport",DM=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=e,s=Ui(MM,n),c=x.useRef(null),l=hn(t,c,s.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),o.jsx(kt.div,{"data-radix-scroll-area-viewport":"",...a,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});DM.displayName=MM;var Ga="ScrollAreaScrollbar",Fj=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Ui(Ga,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:s}=i,c=e.orientation==="horizontal";return x.useEffect(()=>(c?a(!0):s(!0),()=>{c?a(!1):s(!1)}),[c,a,s]),i.type==="hover"?o.jsx(KW,{...r,ref:t,forceMount:n}):i.type==="scroll"?o.jsx(YW,{...r,ref:t,forceMount:n}):i.type==="auto"?o.jsx(LM,{...r,ref:t,forceMount:n}):i.type==="always"?o.jsx(zj,{...r,ref:t}):null});Fj.displayName=Ga;var KW=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Ui(Ga,e.__scopeScrollArea),[a,s]=x.useState(!1);return x.useEffect(()=>{const c=i.scrollArea;let l=0;if(c){const u=()=>{window.clearTimeout(l),s(!0)},d=()=>{l=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),o.jsx(Ro,{present:n||a,children:o.jsx(LM,{"data-state":a?"visible":"hidden",...r,ref:t})})}),YW=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Ui(Ga,e.__scopeScrollArea),a=e.orientation==="horizontal",s=_y(()=>l("SCROLL_END"),100),[c,l]=WW("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,i.scrollHideDelay,l]),x.useEffect(()=>{const u=i.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const p=u[d];h!==p&&(l("SCROLL"),s()),h=p};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,a,l,s]),o.jsx(Ro,{present:n||c!=="hidden",children:o.jsx(zj,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:ot(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ot(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),LM=x.forwardRef((e,t)=>{const n=Ui(Ga,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,s]=x.useState(!1),c=e.orientation==="horizontal",l=_y(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;s(c?u:d)}},10);return _u(n.viewport,l),_u(n.content,l),o.jsx(Ro,{present:r||a,children:o.jsx(zj,{"data-state":a?"visible":"hidden",...i,ref:t})})}),zj=x.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Ui(Ga,e.__scopeScrollArea),a=x.useRef(null),s=x.useRef(0),[c,l]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=HM(c.viewport,c.content),d={...r,sizes:c,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:f=>s.current=f};function h(f,p){return t7(f,s.current,c,p)}return n==="horizontal"?o.jsx(XW,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollLeft,p=pk(f,c,i.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=h(f,i.dir))}}):n==="vertical"?o.jsx(ZW,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollTop,p=pk(f,c);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=h(f))}}):null}),XW=x.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=Ui(Ga,e.__scopeScrollArea),[s,c]=x.useState(),l=x.useRef(null),u=hn(t,l,a.onScrollbarXChange);return x.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),o.jsx(FM,{"data-orientation":"horizontal",...i,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":wy(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),GM(f,h)&&d.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Tg(s.paddingLeft),paddingEnd:Tg(s.paddingRight)}})}})}),ZW=x.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=Ui(Ga,e.__scopeScrollArea),[s,c]=x.useState(),l=x.useRef(null),u=hn(t,l,a.onScrollbarYChange);return x.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),o.jsx(FM,{"data-orientation":"vertical",...i,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":wy(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),GM(f,h)&&d.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Tg(s.paddingTop),paddingEnd:Tg(s.paddingBottom)}})}})}),[JW,BM]=$M(Ga),FM=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:s,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=e,p=Ui(Ga,n),[m,g]=x.useState(null),v=hn(t,k=>g(k)),b=x.useRef(null),w=x.useRef(""),y=p.viewport,_=r.content-r.viewport,j=hi(d),S=hi(l),E=_y(h,10);function P(k){if(b.current){const T=k.clientX-b.current.left,A=k.clientY-b.current.top;u({x:T,y:A})}}return x.useEffect(()=>{const k=T=>{const A=T.target;(m==null?void 0:m.contains(A))&&j(T,_)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[y,m,_,j]),x.useEffect(S,[r,S]),_u(m,E),_u(p.content,E),o.jsx(JW,{scope:n,scrollbar:m,hasThumb:i,onThumbChange:hi(a),onThumbPointerUp:hi(s),onThumbPositionChange:S,onThumbPointerDown:hi(c),children:o.jsx(kt.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:ot(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),b.current=m.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(k))}),onPointerMove:ot(e.onPointerMove,P),onPointerUp:ot(e.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=w.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null})})})}),Ag="ScrollAreaThumb",zM=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=BM(Ag,e.__scopeScrollArea);return o.jsx(Ro,{present:n||i.hasThumb,children:o.jsx(QW,{ref:t,...r})})}),QW=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,a=Ui(Ag,n),s=BM(Ag,n),{onThumbPositionChange:c}=s,l=hn(t,h=>s.onThumbChange(h)),u=x.useRef(void 0),d=_y(()=>{u.current&&(u.current(),u.current=void 0)},100);return x.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(d(),!u.current){const p=n7(h,c);u.current=p,c()}};return c(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,d,c]),o.jsx(kt.div,{"data-state":s.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ot(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),m=h.clientX-p.left,g=h.clientY-p.top;s.onThumbPointerDown({x:m,y:g})}),onPointerUp:ot(e.onPointerUp,s.onThumbPointerUp)})});zM.displayName=Ag;var Uj="ScrollAreaCorner",UM=x.forwardRef((e,t)=>{const n=Ui(Uj,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(e7,{...e,ref:t}):null});UM.displayName=Uj;var e7=x.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Ui(Uj,n),[a,s]=x.useState(0),[c,l]=x.useState(0),u=!!(a&&c);return _u(i.scrollbarX,()=>{var h;const d=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(d),l(d)}),_u(i.scrollbarY,()=>{var h;const d=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(d),s(d)}),u?o.jsx(kt.div,{...r,ref:t,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Tg(e){return e?parseInt(e,10):0}function HM(e,t){const n=e/t;return isNaN(n)?0:n}function wy(e){const t=HM(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function t7(e,t,n,r="ltr"){const i=wy(n),a=i/2,s=t||a,c=i-s,l=n.scrollbar.paddingStart+s,u=n.scrollbar.size-n.scrollbar.paddingEnd-c,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return VM([l,u],h)(e)}function pk(e,t,n="ltr"){const r=wy(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,s=t.content-t.viewport,c=a-r,l=n==="ltr"?[0,s]:[s*-1,0],u=Mw(e,l);return VM([0,s],[0,c])(u)}function VM(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function GM(e,t){return e>0&&e<t}var n7=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},s=n.left!==a.left,c=n.top!==a.top;(s||c)&&t(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function _y(e,t){const n=hi(e),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function _u(e,t){const n=hi(t);Kr(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}var WM=IM,r7=DM,i7=UM;const ds=x.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(WM,{ref:r,className:ge("relative overflow-hidden",e),...n,children:[o.jsx(r7,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(Hj,{}),o.jsx(i7,{})]}));ds.displayName=WM.displayName;const Hj=x.forwardRef(({className:e,orientation:t="vertical",...n},r)=>o.jsx(Fj,{ref:r,orientation:t,className:ge("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(zM,{className:"relative flex-1 rounded-full bg-border"})}));Hj.displayName=Fj.displayName;var a7=e=>{switch(e){case"success":return c7;case"info":return u7;case"warning":return l7;case"error":return d7;default:return null}},s7=Array(12).fill(0),o7=({visible:e,className:t})=>O.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},O.createElement("div",{className:"sonner-spinner"},s7.map((n,r)=>O.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),c7=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),l7=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),u7=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),d7=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),h7=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},O.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),O.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),f7=()=>{let[e,t]=O.useState(document.hidden);return O.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Dw=1,p7=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Dw++,a=this.toasts.find(c=>c.id===i),s=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:n}),{...c,...e,id:i,dismissible:s,title:n}):c):this.addToast({title:n,...r,dismissible:s,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=n!==void 0,a,s=r.then(async l=>{if(a=["resolve",l],O.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(g7(l)&&!l.ok){i=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${l.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${l.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){i=!1;let u=typeof t.success=="function"?await t.success(l):t.success,d=typeof t.description=="function"?await t.description(l):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async l=>{if(a=["reject",l],t.error!==void 0){i=!1;let u=typeof t.error=="function"?await t.error(l):t.error,d=typeof t.description=="function"?await t.description(l):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var l;i&&(this.dismiss(n),n=void 0),(l=t.finally)==null||l.call(t)}),c=()=>new Promise((l,u)=>s.then(()=>a[0]==="reject"?u(a[1]):l(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Dw++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Vr=new p7,m7=(e,t)=>{let n=(t==null?void 0:t.id)||Dw++;return Vr.addToast({title:e,...t,id:n}),n},g7=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",v7=m7,y7=()=>Vr.toasts,x7=()=>Vr.getActiveToasts(),$=Object.assign(v7,{success:Vr.success,info:Vr.info,warning:Vr.warning,error:Vr.error,custom:Vr.custom,message:Vr.message,promise:Vr.promise,dismiss:Vr.dismiss,loading:Vr.loading},{getHistory:y7,getToasts:x7});function b7(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}b7(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function jm(e){return e.label!==void 0}var w7=3,_7="32px",j7="16px",mk=4e3,S7=356,E7=14,N7=20,P7=200;function Qi(...e){return e.filter(Boolean).join(" ")}function k7(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var C7=e=>{var t,n,r,i,a,s,c,l,u,d,h;let{invert:f,toast:p,unstyled:m,interacting:g,setHeights:v,visibleToasts:b,heights:w,index:y,toasts:_,expanded:j,removeToast:S,defaultRichColors:E,closeButton:P,style:k,cancelButtonStyle:T,actionButtonStyle:A,className:R="",descriptionClassName:L="",duration:B,position:G,gap:U,loadingIcon:K,expandByDefault:te,classNames:W,icons:fe,closeButtonAriaLabel:be="Close toast",pauseWhenPageIsHidden:ne}=e,[ce,we]=O.useState(null),[et,jt]=O.useState(null),[_e,ie]=O.useState(!1),[Y,re]=O.useState(!1),[ae,H]=O.useState(!1),[Te,Ee]=O.useState(!1),[We,gt]=O.useState(!1),[Jt,le]=O.useState(0),[ze,Le]=O.useState(0),mt=O.useRef(p.duration||B||mk),He=O.useRef(null),Ye=O.useRef(null),At=y===0,Tt=y+1<=b,Rn=p.type,Za=p.dismissible!==!1,Gp=p.className||"",kb=p.descriptionClassName||"",Ws=O.useMemo(()=>w.findIndex(it=>it.toastId===p.id)||0,[w,p.id]),Qo=O.useMemo(()=>{var it;return(it=p.closeButton)!=null?it:P},[p.closeButton,P]),pl=O.useMemo(()=>p.duration||B||mk,[p.duration,B]),ml=O.useRef(0),Qt=O.useRef(0),Ja=O.useRef(0),qs=O.useRef(null),[sr,gl]=G.split("-"),Md=O.useMemo(()=>w.reduce((it,It,sn)=>sn>=Ws?it:it+It.height,0),[w,Ws]),Wp=f7(),vl=p.invert||f,qe=Rn==="loading";Qt.current=O.useMemo(()=>Ws*U+Md,[Ws,Md]),O.useEffect(()=>{mt.current=pl},[pl]),O.useEffect(()=>{ie(!0)},[]),O.useEffect(()=>{let it=Ye.current;if(it){let It=it.getBoundingClientRect().height;return Le(It),v(sn=>[{toastId:p.id,height:It,position:p.position},...sn]),()=>v(sn=>sn.filter(Zr=>Zr.toastId!==p.id))}},[v,p.id]),O.useLayoutEffect(()=>{if(!_e)return;let it=Ye.current,It=it.style.height;it.style.height="auto";let sn=it.getBoundingClientRect().height;it.style.height=It,Le(sn),v(Zr=>Zr.find(Jr=>Jr.toastId===p.id)?Zr.map(Jr=>Jr.toastId===p.id?{...Jr,height:sn}:Jr):[{toastId:p.id,height:sn,position:p.position},...Zr])},[_e,p.title,p.description,v,p.id]);let Fr=O.useCallback(()=>{re(!0),le(Qt.current),v(it=>it.filter(It=>It.toastId!==p.id)),setTimeout(()=>{S(p)},P7)},[p,S,v,Qt]);O.useEffect(()=>{if(p.promise&&Rn==="loading"||p.duration===1/0||p.type==="loading")return;let it;return j||g||ne&&Wp?(()=>{if(Ja.current<ml.current){let It=new Date().getTime()-ml.current;mt.current=mt.current-It}Ja.current=new Date().getTime()})():mt.current!==1/0&&(ml.current=new Date().getTime(),it=setTimeout(()=>{var It;(It=p.onAutoClose)==null||It.call(p,p),Fr()},mt.current)),()=>clearTimeout(it)},[j,g,p,Rn,ne,Wp,Fr]),O.useEffect(()=>{p.delete&&Fr()},[Fr,p.delete]);function Ks(){var it,It,sn;return fe!=null&&fe.loading?O.createElement("div",{className:Qi(W==null?void 0:W.loader,(it=p==null?void 0:p.classNames)==null?void 0:it.loader,"sonner-loader"),"data-visible":Rn==="loading"},fe.loading):K?O.createElement("div",{className:Qi(W==null?void 0:W.loader,(It=p==null?void 0:p.classNames)==null?void 0:It.loader,"sonner-loader"),"data-visible":Rn==="loading"},K):O.createElement(o7,{className:Qi(W==null?void 0:W.loader,(sn=p==null?void 0:p.classNames)==null?void 0:sn.loader),visible:Rn==="loading"})}return O.createElement("li",{tabIndex:0,ref:Ye,className:Qi(R,Gp,W==null?void 0:W.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,W==null?void 0:W.default,W==null?void 0:W[Rn],(n=p==null?void 0:p.classNames)==null?void 0:n[Rn]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:E,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":_e,"data-promise":!!p.promise,"data-swiped":We,"data-removed":Y,"data-visible":Tt,"data-y-position":sr,"data-x-position":gl,"data-index":y,"data-front":At,"data-swiping":ae,"data-dismissible":Za,"data-type":Rn,"data-invert":vl,"data-swipe-out":Te,"data-swipe-direction":et,"data-expanded":!!(j||te&&_e),style:{"--index":y,"--toasts-before":y,"--z-index":_.length-y,"--offset":`${Y?Jt:Qt.current}px`,"--initial-height":te?"auto":`${ze}px`,...k,...p.style},onDragEnd:()=>{H(!1),we(null),qs.current=null},onPointerDown:it=>{qe||!Za||(He.current=new Date,le(Qt.current),it.target.setPointerCapture(it.pointerId),it.target.tagName!=="BUTTON"&&(H(!0),qs.current={x:it.clientX,y:it.clientY}))},onPointerUp:()=>{var it,It,sn,Zr;if(Te||!Za)return;qs.current=null;let Jr=Number(((it=Ye.current)==null?void 0:it.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ja=Number(((It=Ye.current)==null?void 0:It.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Qa=new Date().getTime()-((sn=He.current)==null?void 0:sn.getTime()),Pr=ce==="x"?Jr:ja,zr=Math.abs(Pr)/Qa;if(Math.abs(Pr)>=N7||zr>.11){le(Qt.current),(Zr=p.onDismiss)==null||Zr.call(p,p),jt(ce==="x"?Jr>0?"right":"left":ja>0?"down":"up"),Fr(),Ee(!0),gt(!1);return}H(!1),we(null)},onPointerMove:it=>{var It,sn,Zr,Jr;if(!qs.current||!Za||((It=window.getSelection())==null?void 0:It.toString().length)>0)return;let ja=it.clientY-qs.current.y,Qa=it.clientX-qs.current.x,Pr=(sn=e.swipeDirections)!=null?sn:k7(G);!ce&&(Math.abs(Qa)>1||Math.abs(ja)>1)&&we(Math.abs(Qa)>Math.abs(ja)?"x":"y");let zr={x:0,y:0};ce==="y"?(Pr.includes("top")||Pr.includes("bottom"))&&(Pr.includes("top")&&ja<0||Pr.includes("bottom")&&ja>0)&&(zr.y=ja):ce==="x"&&(Pr.includes("left")||Pr.includes("right"))&&(Pr.includes("left")&&Qa<0||Pr.includes("right")&&Qa>0)&&(zr.x=Qa),(Math.abs(zr.x)>0||Math.abs(zr.y)>0)&&gt(!0),(Zr=Ye.current)==null||Zr.style.setProperty("--swipe-amount-x",`${zr.x}px`),(Jr=Ye.current)==null||Jr.style.setProperty("--swipe-amount-y",`${zr.y}px`)}},Qo&&!p.jsx?O.createElement("button",{"aria-label":be,"data-disabled":qe,"data-close-button":!0,onClick:qe||!Za?()=>{}:()=>{var it;Fr(),(it=p.onDismiss)==null||it.call(p,p)},className:Qi(W==null?void 0:W.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(a=fe==null?void 0:fe.close)!=null?a:h7):null,p.jsx||x.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:O.createElement(O.Fragment,null,Rn||p.icon||p.promise?O.createElement("div",{"data-icon":"",className:Qi(W==null?void 0:W.icon,(s=p==null?void 0:p.classNames)==null?void 0:s.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Ks():null,p.type!=="loading"?p.icon||(fe==null?void 0:fe[Rn])||a7(Rn):null):null,O.createElement("div",{"data-content":"",className:Qi(W==null?void 0:W.content,(c=p==null?void 0:p.classNames)==null?void 0:c.content)},O.createElement("div",{"data-title":"",className:Qi(W==null?void 0:W.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?O.createElement("div",{"data-description":"",className:Qi(L,kb,W==null?void 0:W.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),x.isValidElement(p.cancel)?p.cancel:p.cancel&&jm(p.cancel)?O.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||T,onClick:it=>{var It,sn;jm(p.cancel)&&Za&&((sn=(It=p.cancel).onClick)==null||sn.call(It,it),Fr())},className:Qi(W==null?void 0:W.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,x.isValidElement(p.action)?p.action:p.action&&jm(p.action)?O.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||A,onClick:it=>{var It,sn;jm(p.action)&&((sn=(It=p.action).onClick)==null||sn.call(It,it),!it.defaultPrevented&&Fr())},className:Qi(W==null?void 0:W.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function gk(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function A7(e,t){let n={};return[e,t].forEach((r,i)=>{let a=i===1,s=a?"--mobile-offset":"--offset",c=a?j7:_7;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=c:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(c)}),n}var T7=x.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:s,className:c,offset:l,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:m=w7,toastOptions:g,dir:v=gk(),gap:b=E7,loadingIcon:w,icons:y,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:j}=e,[S,E]=O.useState([]),P=O.useMemo(()=>Array.from(new Set([r].concat(S.filter(ne=>ne.position).map(ne=>ne.position)))),[S,r]),[k,T]=O.useState([]),[A,R]=O.useState(!1),[L,B]=O.useState(!1),[G,U]=O.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=O.useRef(null),te=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=O.useRef(null),fe=O.useRef(!1),be=O.useCallback(ne=>{E(ce=>{var we;return(we=ce.find(et=>et.id===ne.id))!=null&&we.delete||Vr.dismiss(ne.id),ce.filter(({id:et})=>et!==ne.id)})},[]);return O.useEffect(()=>Vr.subscribe(ne=>{if(ne.dismiss){E(ce=>ce.map(we=>we.id===ne.id?{...we,delete:!0}:we));return}setTimeout(()=>{AU.flushSync(()=>{E(ce=>{let we=ce.findIndex(et=>et.id===ne.id);return we!==-1?[...ce.slice(0,we),{...ce[we],...ne},...ce.slice(we+1)]:[ne,...ce]})})})}),[]),O.useEffect(()=>{if(d!=="system"){U(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:ce})=>{U(ce?"dark":"light")})}catch{ne.addListener(({matches:we})=>{try{U(we?"dark":"light")}catch(et){console.error(et)}})}},[d]),O.useEffect(()=>{S.length<=1&&R(!1)},[S]),O.useEffect(()=>{let ne=ce=>{var we,et;i.every(jt=>ce[jt]||ce.code===jt)&&(R(!0),(we=K.current)==null||we.focus()),ce.code==="Escape"&&(document.activeElement===K.current||(et=K.current)!=null&&et.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[i]),O.useEffect(()=>{if(K.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,fe.current=!1)}},[K.current]),O.createElement("section",{ref:t,"aria-label":`${_} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((ne,ce)=>{var we;let[et,jt]=ne.split("-");return S.length?O.createElement("ol",{key:ne,dir:v==="auto"?gk():v,tabIndex:-1,ref:K,className:c,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":et,"data-lifted":A&&S.length>1&&!a,"data-x-position":jt,style:{"--front-toast-height":`${((we=k[0])==null?void 0:we.height)||0}px`,"--width":`${S7}px`,"--gap":`${b}px`,...p,...A7(l,u)},onBlur:_e=>{fe.current&&!_e.currentTarget.contains(_e.relatedTarget)&&(fe.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:_e=>{_e.target instanceof HTMLElement&&_e.target.dataset.dismissible==="false"||fe.current||(fe.current=!0,W.current=_e.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{L||R(!1)},onDragEnd:()=>R(!1),onPointerDown:_e=>{_e.target instanceof HTMLElement&&_e.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},S.filter(_e=>!_e.position&&ce===0||_e.position===ne).map((_e,ie)=>{var Y,re;return O.createElement(C7,{key:_e.id,icons:y,index:ie,toast:_e,defaultRichColors:h,duration:(Y=g==null?void 0:g.duration)!=null?Y:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:m,closeButton:(re=g==null?void 0:g.closeButton)!=null?re:s,interacting:L,position:ne,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:be,toasts:S.filter(ae=>ae.position==_e.position),heights:k.filter(ae=>ae.position==_e.position),setHeights:T,expandByDefault:a,gap:b,loadingIcon:w,expanded:A,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const qM=()=>{const[e,t]=x.useState(!1),[n,r]=x.useState([{role:"assistant",content:"Hi! I'm ProssMind AI Assistant. I can help you with creating BPMN diagrams, using the interface, or answering any questions. How can I help you today?"}]),[i,a]=x.useState(""),[s,c]=x.useState(!1),l=x.useRef(null),u=x.useRef(null);x.useEffect(()=>{var p;(p=u.current)==null||p.scrollIntoView({behavior:"smooth"})},[n]);const d=async p=>{var g,v,b;const m=[...n,{role:"user",content:p}];r(m),a(""),c(!0);try{const y=await fetch("https://lnxbvkcggoyfmpfthhhk.supabase.co/functions/v1/chatbot",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({messages:m})});if(!y.ok){y.status===429?$.error("Rate limit exceeded. Please try again in a moment."):y.status===402?$.error("AI credits depleted. Please contact support."):$.error("Failed to get response from AI."),c(!1);return}if(!y.body)throw new Error("No response body");const _=y.body.getReader(),j=new TextDecoder;let S="",E="",P=!1;const k=T=>{r(A=>{const R=A[A.length-1];return(R==null?void 0:R.role)==="assistant"?A.map((L,B)=>B===A.length-1?{...L,content:T}:L):[...A,{role:"assistant",content:T}]})};for(;!P;){const{done:T,value:A}=await _.read();if(T)break;S+=j.decode(A,{stream:!0});let R;for(;(R=S.indexOf(`
`))!==-1;){let L=S.slice(0,R);if(S=S.slice(R+1),L.endsWith("\r")&&(L=L.slice(0,-1)),L.startsWith(":")||L.trim()===""||!L.startsWith("data: "))continue;const B=L.slice(6).trim();if(B==="[DONE]"){P=!0;break}try{const U=(b=(v=(g=JSON.parse(B).choices)==null?void 0:g[0])==null?void 0:v.delta)==null?void 0:b.content;U&&(E+=U,k(E))}catch{S=L+`
`+S;break}}}c(!1)}catch(w){console.error("Chat error:",w),$.error("An error occurred. Please try again."),c(!1)}},h=()=>{!i.trim()||s||d(i)},f=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),h())};return o.jsxs(o.Fragment,{children:[!e&&o.jsx(V,{onClick:()=>t(!0),className:"fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-2xl hover:shadow-xl transition-all z-50 animate-fade-in",size:"icon",children:o.jsx(aW,{className:"h-6 w-6"})}),e&&o.jsxs(xe,{className:"fixed bottom-6 right-6 w-96 h-[600px] shadow-2xl flex flex-col z-50 animate-scale-in",children:[o.jsx(Ne,{className:"border-b bg-gradient-to-r from-primary to-accent text-primary-foreground",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nu,{className:"h-5 w-5"}),o.jsx(Pe,{className:"text-lg",children:"ProssMind Assistant"})]}),o.jsx(V,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"text-primary-foreground hover:bg-primary-foreground/20",children:o.jsx(fa,{className:"h-4 w-4"})})]})}),o.jsxs(Se,{className:"flex-1 flex flex-col p-0",children:[o.jsx(ds,{className:"flex-1 p-4",ref:l,children:o.jsxs("div",{className:"space-y-4",children:[n.map((p,m)=>o.jsxs("div",{className:`flex gap-3 ${p.role==="user"?"justify-end":"justify-start"}`,children:[p.role==="assistant"&&o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx(nu,{className:"h-4 w-4 text-primary"})}),o.jsx("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 ${p.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.content})}),p.role==="user"&&o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:o.jsx(Jh,{className:"h-4 w-4 text-primary-foreground"})})]},m)),o.jsx("div",{ref:u})]})}),o.jsx("div",{className:"border-t p-4",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(vi,{value:i,onChange:p=>a(p.target.value),onKeyDown:f,placeholder:"Ask me anything about ProssMind...",className:"resize-none min-h-[60px]",disabled:s}),o.jsx(V,{onClick:h,disabled:!i.trim()||s,size:"icon",className:"h-[60px] w-[60px] flex-shrink-0",children:o.jsx(Pg,{className:"h-5 w-5"})})]})})]})]})]})},Og=()=>{const{ref:e,isInView:t}=xy({threshold:.1});return o.jsx("footer",{className:"border-t border-border bg-background",children:o.jsxs("div",{className:"container mx-auto px-6 py-12",children:[o.jsxs(ye.div,{ref:e,className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",variants:by,initial:"hidden",animate:t?"visible":"hidden",children:[o.jsxs(ye.div,{variants:ru,children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Product"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsxs(Qn,{to:"/features",className:"hover:text-foreground transition-colors relative group",children:["Features",o.jsx(ye.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs(Qn,{to:"/pricing",className:"hover:text-foreground transition-colors relative group",children:["Pricing",o.jsx(ye.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs("a",{href:Iw("docs"),className:"hover:text-foreground transition-colors relative group",children:["Documentation",o.jsx(ye.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs("a",{href:Iw("status"),className:"hover:text-foreground transition-colors relative group",children:["Status",o.jsx(ye.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})})]})]}),o.jsxs(ye.div,{variants:ru,children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Legal"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsxs(Qn,{to:"/privacy",className:"hover:text-foreground transition-colors relative group",children:["Privacy Policy",o.jsx(ye.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs(Qn,{to:"/terms",className:"hover:text-foreground transition-colors relative group",children:["Terms of Service",o.jsx(ye.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs(Qn,{to:"/contact",className:"hover:text-foreground transition-colors relative group",children:["Contact",o.jsx(ye.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})})]})]}),o.jsxs(ye.div,{variants:ru,children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Company"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsxs(Qn,{to:"/about",className:"hover:text-foreground transition-colors relative group",children:["About Us",o.jsx(ye.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})}),o.jsx("li",{children:o.jsxs(Qn,{to:"/contact",className:"hover:text-foreground transition-colors relative group",children:["Contact Us",o.jsx(ye.span,{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300",whileHover:{width:"100%"}})]})})]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 justify-center md:justify-start mb-8 pb-8 border-b border-border",children:[o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 border border-primary/20",children:[o.jsx(Cs,{className:"h-4 w-4 text-primary","aria-hidden":"true"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"GDPR"})]}),o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 border border-primary/20",children:[o.jsx(rW,{className:"h-4 w-4 text-primary","aria-hidden":"true"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"Swiss Hosted"})]}),o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-muted border border-border",children:[o.jsx(gM,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true"}),o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"SOC 2 pending"})]})]}),o.jsx("div",{className:"text-sm text-muted-foreground text-center",children:o.jsxs("p",{children:[" ",new Date().getFullYear()," ProssMind. All rights reserved."]})})]})})},O7=IU,R7=MU,KM=x.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>o.jsx($U,{children:o.jsx(X$,{ref:i,align:t,sideOffset:n,className:ge("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));KM.displayName=X$.displayName;const YM=()=>{const e=Va(),t=[{icon:vW,label:"Swiss Hosted",title:"Swiss Hosted Infrastructure",description:"All data is hosted in Switzerland, ensuring maximum privacy and data sovereignty. Our infrastructure complies with Swiss data protection laws.",link:"#"},{icon:Cs,label:"GDPR Compliant",title:"GDPR Compliance",description:"We are fully compliant with the General Data Protection Regulation (GDPR). Your data is processed with the highest standards of privacy and security.",link:"#"},{icon:yy,label:"SOC 2 Pending",title:"SOC 2 Certification",description:"We are currently undergoing SOC 2 Type II certification to demonstrate our commitment to security, availability, and confidentiality.",link:"#"}];return o.jsx("div",{className:"bg-muted/50 dark:bg-muted/30 py-2 text-sm text-muted-foreground text-center border-b border-border/50",children:o.jsx("div",{className:"container mx-auto px-6",children:o.jsx("div",{className:"flex items-center justify-center gap-6 flex-wrap",children:t.map((n,r)=>o.jsxs(O7,{children:[o.jsx(R7,{asChild:!0,children:o.jsxs(ye.button,{className:"flex items-center gap-2 hover:text-foreground transition-colors cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded px-2 py-1",whileHover:e?{}:{scale:1.05},whileTap:e?{}:{scale:.95},"aria-label":`Learn more about ${n.label}`,children:[o.jsx(n.icon,{className:"h-4 w-4","aria-hidden":"true"}),o.jsx("span",{children:n.label})]})}),o.jsx(KM,{className:"w-80",side:"bottom",align:"center",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-semibold text-sm",children:n.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})]},r))})})})},$7=24*60*60*1e3,I7=()=>{const[e,t]=x.useState(!1),[n,r]=x.useState(!1),[i,a]=x.useState(null);x.useEffect(()=>{const h=localStorage.getItem("cookieConsent")??null,f=localStorage.getItem("cookieBannerDismissed"),p=f&&Date.now()-new Date(f).getTime()<$7;if((h==="accepted"||h==="declined")&&(a(h),h0(h==="accepted")),!h||!p){const m=setTimeout(()=>t(!0),1e3);return()=>clearTimeout(m)}},[]);const s=h=>{h&&(localStorage.setItem("cookieConsent",h),localStorage.setItem("cookieConsentTimestamp",new Date().toISOString()),a(h))},c=async()=>{r(!0);try{s("accepted"),await h0(!0),t(!1)}catch(h){console.error("Error saving cookie consent:",h)}finally{r(!1)}},l=async()=>{r(!0);try{s("declined"),await h0(!1),t(!1)}catch(h){console.error("Error saving cookie consent:",h)}finally{r(!1)}},u=()=>{t(!1),localStorage.setItem("cookieBannerDismissed",new Date().toISOString())},d=()=>{localStorage.removeItem("cookieBannerDismissed"),t(!0)};return o.jsxs(o.Fragment,{children:[e&&o.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 pointer-events-none",children:o.jsxs(xe,{className:"max-w-4xl mx-auto shadow-lg pointer-events-auto border-2",children:[o.jsx(Se,{className:"pt-6",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cookie Consent"}),o.jsx($e,{className:"text-sm",children:'We use cookies to enhance your browsing experience, analyze site traffic, and understand where our visitors come from. By clicking "Accept", you consent to our use of cookies for tracking and analytics purposes.'})]}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:u,disabled:n,children:o.jsx(fa,{className:"h-4 w-4"})})]})}),o.jsxs(TM,{className:"flex gap-2 justify-end",children:[o.jsx(V,{variant:"outline",onClick:l,disabled:n,children:"Decline"}),o.jsx(V,{onClick:c,disabled:n,children:n?"Saving...":"Accept"})]})]})}),o.jsx(V,{variant:"outline",size:"sm",className:"fixed bottom-4 right-4 z-40 shadow-lg bg-background/80 backdrop-blur",onClick:d,children:"Cookie Preferences"})]})};async function h0(e){var t;try{let n=sessionStorage.getItem("visitorSessionId");n||(n=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("visitorSessionId",n));const{data:{user:r}}=await oe.auth.getUser(),i={session_id:n,user_id:(r==null?void 0:r.id)||null,landing_page:window.location.href,referrer:document.referrer||null,user_agent:navigator.userAgent,language:navigator.language||((t=navigator.languages)==null?void 0:t[0])||null,screen_resolution:`${window.screen.width}x${window.screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,cookie_consent:e,consent_timestamp:new Date().toISOString()},{data:a,error:s}=await oe.functions.invoke("track-visitor",{body:i});s&&console.error("Error tracking visitor:",s)}catch(n){console.error("Error in trackVisitor:",n)}}const M7=()=>{const[e,t]=x.useState(null),[n,r]=x.useState(!0);return x.useEffect(()=>{const{data:{subscription:i}}=oe.auth.onAuthStateChange((a,s)=>{t((s==null?void 0:s.user)??null),r(!1)});return oe.auth.getSession().then(({data:{session:a}})=>{t((a==null?void 0:a.user)??null),r(!1)}),()=>{i.unsubscribe()}},[]),n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{user:e}),o.jsx(YM,{}),o.jsx(CM,{}),o.jsx(AM,{}),o.jsx(OM,{}),o.jsx(Lj,{}),o.jsx(RM,{}),o.jsx(qM,{}),o.jsx(Og,{}),o.jsx(I7,{})]})},Mt=({children:e,className:t})=>o.jsx("div",{className:ge("max-w-[1200px] mx-auto p-4 md:p-8",t),children:e}),D7=[{icon:nu,title:"AI Agent Generator",description:"Create intelligent agents that can automate complex workflows and tasks with advanced machine learning capabilities.",benefits:["Natural language processing","Self-learning algorithms","Multi-task handling"]},{icon:bi,title:"Process Generator",description:"Design and build automated business processes with powerful AI capabilities and intuitive visual tools. Download BPMN diagrams and integrate seamlessly with SAP Signavio, Camunda, Flowable, and more.",benefits:["Visual process builder","Real-time monitoring","Automatic optimization","Export BPMN diagrams","Integration with SAP Signavio, Camunda, Flowable"]},{icon:ya,title:"Vision Automation",description:"Automate visual tasks with advanced computer vision and image processing powered by state-of-the-art AI.",benefits:["Image recognition","OCR capabilities"]},{icon:SW,title:"Lightning Fast",description:"Process automation that runs at incredible speeds with minimal latency and maximum efficiency.",benefits:["Sub-second response","Real-time processing","Edge computing"]},{icon:Cs,title:"Enterprise Security",description:"Bank-level security with end-to-end encryption, ensuring your data and processes are always protected.",benefits:["256-bit encryption","SOC 2 compliant","GDPR ready"]},{icon:XG,title:"Performance Analytics",description:"Deep insights into your automation performance with comprehensive analytics and reporting tools.",benefits:["Real-time dashboards","Custom reports","Predictive insights"]}],L7=()=>{const e=Va();return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{}),o.jsx("main",{className:"pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Powerful ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Features"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Everything you need to automate your business processes with cutting-edge AI technology"})]}),o.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:D7.map((t,n)=>o.jsx(ye.div,{whileHover:e?{}:{y:-12,rotateY:2,rotateX:2,scale:1.03},transition:xt(e)||{duration:.3},style:{perspective:1e3},children:o.jsxs(xe,{className:"card-hover cursor-pointer border-border/50 hover:border-primary bg-card/50 backdrop-blur-sm flex flex-col h-full rounded-2xl shadow-md transition-all relative overflow-hidden group",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},role:"article","aria-label":`Feature: ${t.title}`,children:[o.jsx(ye.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity",style:{background:"linear-gradient(45deg, hsl(var(--primary)), hsl(var(--accent)))",padding:"1px"},initial:!1,children:o.jsx("div",{className:"w-full h-full bg-card/50 backdrop-blur-sm rounded-2xl"})}),o.jsxs(Ne,{className:"flex-shrink-0 relative z-10",children:[o.jsxs(ye.div,{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mb-4 relative",animate:e?{rotate:0}:{rotate:[-2,2,-2]},transition:xt(e)||{duration:4,repeat:1/0,ease:"easeInOut"},whileHover:e?{}:{scale:1.15,rotate:15,filter:"brightness(1.3)"},children:[o.jsx(ye.div,{whileHover:e?{}:{scale:1.2},transition:xt(e)||{duration:.2},style:{filter:"drop-shadow(0 0 20px hsl(var(--primary)))"},children:o.jsx(t.icon,{className:"h-7 w-7 text-primary"})}),o.jsx(ye.div,{className:"absolute inset-0 rounded-xl bg-primary/20 blur-xl",animate:e?{scale:1,opacity:0}:{scale:[1,1.3,1],opacity:[0,.8,0]},transition:xt(e)||{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),o.jsx(Pe,{className:"text-2xl mb-2",children:t.title}),o.jsx($e,{className:"text-base mt-2",children:t.description})]}),o.jsx(Se,{className:"flex-grow flex flex-col relative z-10",children:o.jsx("ul",{className:"space-y-2",children:t.benefits.map((r,i)=>o.jsxs("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),r]},i))})})]})},n))})]})})]})},B7="modulepreload",F7=function(e){return"/"+e},vk={},iu=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=F7(l),l in vk)return;vk[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":B7,u||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})},Jn=cj,z7=oj,XM=x.forwardRef(({className:e,...t},n)=>o.jsx(Zf,{ref:n,className:ge("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));XM.displayName=Zf.displayName;const Fn=x.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(z7,{children:[o.jsx(XM,{}),o.jsxs(Jf,{ref:r,className:ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,o.jsxs(ay,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(fa,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fn.displayName=Jf.displayName;const zn=({className:e,...t})=>o.jsx("div",{className:ge("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});zn.displayName="DialogHeader";const Rg=({className:e,...t})=>o.jsx("div",{className:ge("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Rg.displayName="DialogFooter";const Un=x.forwardRef(({className:e,...t},n)=>o.jsx(Qf,{ref:n,className:ge("text-lg font-semibold leading-none tracking-tight",e),...t}));Un.displayName=Qf.displayName;const Hn=x.forwardRef(({className:e,...t},n)=>o.jsx(ep,{ref:n,className:ge("text-sm text-muted-foreground",e),...t}));Hn.displayName=ep.displayName;var jy="Tabs",[U7]=$s(jy,[Z$]),ZM=Z$(),[H7,Vj]=U7(jy),JM=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:c,activationMode:l="automatic",...u}=e,d=sy(c),[h,f]=ko({prop:r,onChange:i,defaultProp:a??"",caller:jy});return o.jsx(H7,{scope:n,baseId:ld(),value:h,onValueChange:f,orientation:s,dir:d,activationMode:l,children:o.jsx(kt.div,{dir:d,"data-orientation":s,...u,ref:t})})});JM.displayName=jy;var QM="TabsList",eD=x.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,a=Vj(QM,n),s=ZM(n);return o.jsx(DU,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(kt.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});eD.displayName=QM;var tD="TabsTrigger",nD=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=e,s=Vj(tD,n),c=ZM(n),l=aD(s.baseId,r),u=sD(s.baseId,r),d=r===s.value;return o.jsx(LU,{asChild:!0,...c,focusable:!i,active:d,children:o.jsx(kt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...a,ref:t,onMouseDown:ot(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:ot(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:ot(e.onFocus,()=>{const h=s.activationMode!=="manual";!d&&!i&&h&&s.onValueChange(r)})})})});nD.displayName=tD;var rD="TabsContent",iD=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...s}=e,c=Vj(rD,n),l=aD(c.baseId,r),u=sD(c.baseId,r),d=r===c.value,h=x.useRef(d);return x.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),o.jsx(Ro,{present:i||d,children:({present:f})=>o.jsx(kt.div,{"data-state":d?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});iD.displayName=rD;function aD(e,t){return`${e}-trigger-${t}`}function sD(e,t){return`${e}-content-${t}`}var oD=JM,Sy=eD,Ey=nD,Ny=iD;const cD=oD,Gj=x.forwardRef(({className:e,...t},n)=>o.jsx(Sy,{ref:n,className:ge("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground relative gap-1",e),...t}));Gj.displayName=Sy.displayName;const Qh=x.forwardRef(({className:e,children:t,...n},r)=>{const i=x.useRef(null),[a,s]=x.useState(!1);return x.useImperativeHandle(r,()=>i.current),x.useEffect(()=>{const c=()=>{i.current&&s(i.current.getAttribute("data-state")==="active")};c();const l=new MutationObserver(c);return i.current&&l.observe(i.current,{attributes:!0,attributeFilter:["data-state"]}),()=>l.disconnect()},[]),o.jsxs(Ey,{ref:i,className:ge("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 relative z-10 flex-1","data-[state=active]:text-foreground","hover:text-foreground/90",e),...n,children:[o.jsx("span",{className:"relative z-10 flex items-center justify-center w-full",children:t}),a&&o.jsx(ye.div,{layoutId:"activeTabIndicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",initial:!1,transition:{type:"spring",stiffness:380,damping:30,duration:.4}})]})});Qh.displayName=Ey.displayName;const ef=x.forwardRef(({className:e,...t},n)=>{const[r,i]=x.useState(1),a=x.useRef();return x.useEffect(()=>{if(a.current&&t.value){const s=parseInt(a.current)||0,c=parseInt(t.value)||0;i(c>s?1:-1)}a.current=t.value},[t.value]),o.jsx(W$,{mode:"wait",custom:r,children:o.jsx(Ny,{ref:n,className:ge("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t,asChild:!0,children:o.jsx(ye.div,{custom:r,initial:{opacity:0,x:r*20},animate:{opacity:1,x:0},exit:{opacity:0,x:r*-20},transition:{opacity:{duration:.3},x:{duration:.2},ease:"easeInOut"},children:t.children})},t.value)})});ef.displayName=Ny.displayName;function V7(e,t=[]){let n=[];function r(a,s){const c=x.createContext(s);c.displayName=a+"Context";const l=n.length;n=[...n,s];const u=h=>{var b;const{scope:f,children:p,...m}=h,g=((b=f==null?void 0:f[e])==null?void 0:b[l])||c,v=x.useMemo(()=>m,Object.values(m));return o.jsx(g.Provider,{value:v,children:p})};u.displayName=a+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[e])==null?void 0:g[l])||c,m=x.useContext(p);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=n.map(s=>x.createContext(s));return function(c){const l=(c==null?void 0:c[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return i.scopeName=e,[r,G7(i,...t)]}function G7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((c,{useScope:l,scopeName:u})=>{const h=l(a)[`__scope${u}`];return{...c,...h}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var W7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lD=W7.reduce((e,t)=>{const n=vy(`Primitive.${t}`),r=x.forwardRef((i,a)=>{const{asChild:s,...c}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Wj="Progress",qj=100,[q7]=V7(Wj),[K7,Y7]=q7(Wj),uD=x.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=X7,...s}=e;(i||i===0)&&!yk(i)&&console.error(Z7(`${i}`,"Progress"));const c=yk(i)?i:qj;r!==null&&!xk(r,c)&&console.error(J7(`${r}`,"Progress"));const l=xk(r,c)?r:null,u=$g(l)?a(l,c):void 0;return o.jsx(K7,{scope:n,value:l,max:c,children:o.jsx(lD.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":$g(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":fD(l,c),"data-value":l??void 0,"data-max":c,...s,ref:t})})});uD.displayName=Wj;var dD="ProgressIndicator",hD=x.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=Y7(dD,n);return o.jsx(lD.div,{"data-state":fD(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});hD.displayName=dD;function X7(e,t){return`${Math.round(e/t*100)}%`}function fD(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function $g(e){return typeof e=="number"}function yk(e){return $g(e)&&!isNaN(e)&&e>0}function xk(e,t){return $g(e)&&!isNaN(e)&&e<=t&&e>=0}function Z7(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${qj}\`.`}function J7(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${qj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pD=uD,Q7=hD;const Oi=x.forwardRef(({className:e,value:t,...n},r)=>o.jsx(pD,{ref:r,className:ge("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:o.jsx(Q7,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Oi.displayName=pD.displayName;async function mD(e,t=1920,n=1920,r=.85,i=500){return new Promise((a,s)=>{const c=new FileReader;c.onload=l=>{var d;const u=new Image;u.onload=()=>{const h=document.createElement("canvas");let f=u.width,p=u.height;if(f>t||p>n){const g=Math.min(t/f,n/p);f=f*g,p=p*g}h.width=f,h.height=p;const m=h.getContext("2d");if(!m){s(new Error("Could not get canvas context"));return}m.drawImage(u,0,0,f,p),h.toBlob(g=>{if(!g){s(new Error("Failed to compress image"));return}g.size>i*1024&&r>.5?h.toBlob(v=>{if(!v){a(new File([g],e.name,{type:e.type}));return}a(new File([v],e.name,{type:e.type}))},e.type,r*.7):a(new File([g],e.name,{type:e.type}))},e.type,r)},u.onerror=()=>s(new Error("Failed to load image")),u.src=(d=l.target)==null?void 0:d.result},c.onerror=()=>s(new Error("Failed to read file")),c.readAsDataURL(e)})}async function gD(e,t=!0){let n=e;if(t&&e.type.startsWith("image/"))try{n=await mD(e)}catch(r){console.warn("Image compression failed, using original:",r)}return new Promise((r,i)=>{const a=new FileReader;a.onload=()=>{const s=a.result,c=s.includes(",")?s.split(",")[1]:s;r(c)},a.onerror=()=>i(new Error("Failed to read file")),a.readAsDataURL(n)})}function vD(e,t=500){return e.size>t*1024&&e.type.startsWith("image/")}const Lw=Object.freeze(Object.defineProperty({__proto__:null,compressImage:mD,fileToBase64:gD,shouldCompressImage:vD},Symbol.toStringTag,{value:"Module"})),f0=new Map,eq=6e4;function tq(e,t){const n=f0.get(e);if(n&&Date.now()-n.timestamp<eq)return n.promise;const r=t().finally(()=>{f0.delete(e)});return f0.set(e,{promise:r,timestamp:Date.now()}),r}function nq(e,t){const n=Object.keys(t).sort().map(r=>`${r}:${JSON.stringify(t[r])}`).join("|");return`${e}:${n}`}async function yD(e,t,n){const{deduplicate:r=!0,timeout:i=6e4}=n||{},a=async()=>{var s;try{const c=new AbortController,l=setTimeout(()=>c.abort(),i),{data:u,error:d}=await oe.functions.invoke(e,{body:t,signal:c.signal});return clearTimeout(l),d?{error:{message:d.message||"Unknown error",code:(s=d.status)==null?void 0:s.toString()}}:{data:u}}catch(c){return c instanceof Error&&c.name==="AbortError"?{error:{message:"Request timeout",code:"TIMEOUT"}}:{error:{message:c instanceof Error?c.message:"Unknown error"}}}};if(r){const s=nq(e,t);return tq(s,a)}return a()}const Kj=Object.freeze(Object.defineProperty({__proto__:null,invokeFunction:yD},Symbol.toStringTag,{value:"Module"})),xD=()=>{const e=_i(),[t,n]=x.useState(!1),[r,i]=x.useState(null),[a,s]=x.useState(!1),[c,l]=x.useState(null),[u,d]=x.useState("bpmn"),[h,f]=x.useState(0),[p,m]=x.useState(""),[g,v]=x.useState(null);x.useEffect(()=>{if(!c)return;let _;const j=async()=>{const{data:P,error:k}=await oe.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",c).single();if(k){console.error("Error checking job status:",k);return}if(console.log("Job status:",P.status),P.status==="completed"&&P.bpmn_xml){const T=u==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(T,P.bpmn_xml),localStorage.setItem("diagramType",u);const A=u==="bpmn"?"BPMN":"P&ID";f(100),m("Complete!");const R=u==="bpmn"?"/bpmn-generator":"/pid-generator";$.success(`${A} diagram generated successfully!`,{description:"Redirecting to editor..."}),setTimeout(()=>{er(e,R)},1e3),n(!1),i(null),s(!1),l(null),v(null),_&&clearInterval(_)}else if(P.status==="failed"){const T=P.error_message||"Please try again";v(T),$.error("Upload failed  retry or contact support",{description:T,action:{label:"Retry",onClick:()=>{v(null),r&&y()}},duration:1e4}),s(!1),l(null),f(0),m(""),_&&clearInterval(_)}},S=oe.channel(`job-${c}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${c}`},P=>{const k=P.new;if(console.log("Realtime job status update:",k.status),k.status==="completed"&&k.bpmn_xml){const T=u==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(T,k.bpmn_xml),localStorage.setItem("diagramType",u);const A=u==="bpmn"?"BPMN":"P&ID";f(100),m("Complete!");const R=u==="bpmn"?"/bpmn-generator":"/pid-generator";$.success(`${A} diagram generated successfully!`,{description:"Redirecting to editor..."}),setTimeout(()=>{er(e,R)},1e3),n(!1),i(null),s(!1),l(null),v(null),_&&clearInterval(_)}else if(k.status==="failed"){const T=k.error_message||"Please try again";v(T),$.error("Upload failed  retry or contact support",{description:T,action:{label:"Retry",onClick:()=>{v(null),r&&y()}},duration:1e4}),s(!1),l(null),f(0),m(""),_&&clearInterval(_)}}).subscribe();_=window.setInterval(j,3e3),j();const E=window.setTimeout(()=>{_&&clearInterval(_);const P="Processing timed out - Please try refreshing the page or contact support";v(P),f(0),m(""),$.error("Upload failed  retry or contact support",{description:P,action:{label:"Retry",onClick:()=>{v(null),r&&y()}},duration:1e4}),s(!1),l(null)},3e5);return()=>{clearTimeout(E),oe.removeChannel(S),_&&clearInterval(_)}},[c,u,r]);const b=()=>{n(!0)},w=_=>{var S;const j=(S=_.target.files)==null?void 0:S[0];if(j){if(j.size>209715200){$.error("File too large",{description:"Maximum file size is 200 MB. Please select a smaller file."}),_.target.value="";return}i(j),v(null),f(10),m("File selected, ready to upload...")}},y=async()=>{if(a)return;if(!r){$.error("Please select a file");return}s(!0),v(null),f(10),m("Analyzing frame 1 of 20...");const _=$.loading("Processing your file...",{description:"This may take 30-60 seconds for complex diagrams"});try{const{data:{user:j},error:S}=await oe.auth.getUser();if(!j||S){$.dismiss(_);const A=(S==null?void 0:S.message)||"Please log in to use this feature";v(A),$.error("Upload failed  retry or contact support",{description:A,action:{label:"Retry",onClick:()=>{v(null),y()}},duration:1e4}),s(!1),f(0),m(""),er(e,"/auth");return}let E=r;if(vD(r)){$.info("Compressing image for faster upload...");try{const{compressImage:A}=await iu(async()=>{const{compressImage:R}=await Promise.resolve().then(()=>Lw);return{compressImage:R}},void 0);E=await A(r)}catch(A){console.warn("Image compression failed, using original:",A)}}const P=await gD(E,!1),k=`data:${E.type};base64,${P}`;$.dismiss(_),f(20),m("Uploading file...");const T=$.loading("Starting diagram generation...",{description:"This will continue in the background"});try{const{data:A,error:R}=await yD("vision-to-bpmn",{imageBase64:k,diagramType:u},{deduplicate:!0});if($.dismiss(T),R){const L=R.message||"Failed to start diagram generation";v(L),f(0),m(""),$.error("Upload failed  retry or contact support",{description:L,action:{label:"Retry",onClick:()=>{v(null),y()}},duration:1e4}),s(!1);return}if(!A||!A.jobId){const L="Failed to start processing";v(L),f(0),m(""),$.error("Upload failed  retry or contact support",{description:L,action:{label:"Retry",onClick:()=>{v(null),y()}},duration:1e4}),s(!1);return}l(A.jobId),f(30),m("Processing started, analyzing frames..."),$.info("Processing started",{description:"We'll notify you when your diagram is ready (this may take 1-2 minutes)"})}catch{const R="Network error - Please check your connection and try again";v(R),f(0),m(""),$.dismiss(T),$.error("Upload failed  retry or contact support",{description:R,action:{label:"Retry",onClick:()=>{v(null),y()}},duration:1e4}),s(!1)}}catch(j){const S=j instanceof Error?j.message:"Failed to generate diagram";v(S),f(0),m(""),$.dismiss(_),$.error("Upload failed  retry or contact support",{description:S,action:{label:"Retry",onClick:()=>{v(null),y()}},duration:1e4}),s(!1)}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{}),o.jsx("main",{className:"pt-24 pb-20",children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary/10 mb-6",children:o.jsx(ya,{className:"h-10 w-10 text-primary"})}),o.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Vision ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"AI"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"See what computers see. Our advanced vision AI technology enables your automation to understand and process visual information just like humans do."})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mb-20",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Self-Learning Vision System"}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"Our Vision AI continuously learns and adapts to your specific use cases, improving accuracy and performance over time without manual intervention."}),o.jsxs("ul",{className:"space-y-4",children:[o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx(zG,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Real-time Processing"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Process images and video streams in real-time with minimal latency"})]})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx(gW,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Object Detection"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Identify and track multiple objects across frames"})]})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx($i,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Image Classification"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically categorize and tag visual content"})]})]})]}),o.jsx(V,{size:"lg",className:"mt-6",onClick:b,children:"Start Free Trial"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-accent/10 rounded-2xl p-12 text-center",children:[o.jsx(ya,{className:"h-32 w-32 mx-auto text-primary mb-6"}),o.jsx("h3",{className:"text-xl font-bold mb-4",children:"100% Client-Side Processing"}),o.jsx("p",{className:"text-muted-foreground",children:"All vision processing happens on your device. Your data never leaves your control, ensuring maximum privacy and security."})]})]}),o.jsxs("div",{className:"bg-hero-bg text-hero-foreground rounded-2xl p-12 text-center",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to See the Future?"}),o.jsx("p",{className:"text-xl text-hero-foreground/80 mb-8 max-w-2xl mx-auto",children:"Join thousands of companies already using ProssMind Vision AI to transform their automation workflows"}),o.jsx(V,{size:"lg",variant:"secondary",className:"text-lg px-8",onClick:b,children:"Get Started Now"})]})]})}),o.jsx(Jn,{open:t,onOpenChange:n,children:o.jsxs(Fn,{className:"max-w-2xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Upload Your Process"}),o.jsx(Hn,{children:"Upload handwritten notes, whiteboard images, process documents, or text files to generate a diagram"})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(cD,{value:u,onValueChange:_=>d(_),className:"w-full",children:[o.jsxs(Gj,{className:"grid w-full grid-cols-2",children:[o.jsx(Qh,{value:"bpmn",children:"BPMN Diagram"}),o.jsx(Qh,{value:"pid",children:"P&ID Diagram"})]}),o.jsxs(ef,{value:"bpmn",className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"bg-card border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:[o.jsx("input",{type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:w,className:"hidden",id:"file-upload",disabled:a}),o.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx($i,{className:"w-8 h-8 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-lg font-semibold mb-1",children:r?r.name:"Drop your process image or document"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Images, PDF, Word documents, or text files"})]})]}),a&&h>0&&o.jsxs("div",{className:"mt-6 space-y-2",children:[o.jsx(Oi,{value:h,className:"w-full"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:p})]}),g&&o.jsx("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:o.jsx("p",{className:"text-sm text-destructive",children:g})})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx($i,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Images"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"JPG, PNG, WEBP"})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(Mn,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Documents"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"PDF, DOC, DOCX"})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(Mn,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Text"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"TXT files"})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx(V,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),o.jsx(V,{onClick:y,disabled:!r||a,children:a?"Generating...":"Generate BPMN"})]})]}),o.jsxs(ef,{value:"pid",className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"bg-card border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:[o.jsx("input",{type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:w,className:"hidden",id:"file-upload-pid",disabled:a}),o.jsxs("label",{htmlFor:"file-upload-pid",className:"cursor-pointer flex flex-col items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx($i,{className:"w-8 h-8 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-lg font-semibold mb-1",children:r?r.name:"Drop your process image or document"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Images, PDF, Word documents, or text files"})]})]}),a&&h>0&&o.jsxs("div",{className:"mt-6 space-y-2",children:[o.jsx(Oi,{value:h,className:"w-full"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:p})]}),g&&o.jsx("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:o.jsx("p",{className:"text-sm text-destructive",children:g})})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx($i,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Images"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"JPG, PNG, WEBP"})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(Mn,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Documents"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"PDF, DOC, DOCX"})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-muted rounded-lg",children:[o.jsx(Mn,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Text"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"TXT files"})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx(V,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),o.jsx(V,{onClick:y,disabled:!r||a,children:a?"Generating...":"Generate P&ID"})]})]})]})})]})})]})},rq=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{}),o.jsxs("main",{className:"pt-24 pb-20",children:[o.jsxs(Mt,{children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Simple, ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Transparent"})," Pricing"]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Choose the plan that fits your needs. All plans include our core automation features."})]}),o.jsx(Lj,{}),o.jsxs("div",{className:"mt-20 bg-muted/30 rounded-2xl p-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"All Plans Include"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Gr,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"99.9% Uptime SLA"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Reliable service you can count on"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Gr,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"24/7 Support"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Help whenever you need it"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Gr,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Free Updates"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Always get the latest features"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Gr,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Data Encryption"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Bank-level security for your data"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Gr,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"API Access"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Integrate with your tools"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Gr,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"No Hidden Fees"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"What you see is what you pay"})]})]})]})]})]}),o.jsx(RM,{})]})]}),vn=x.forwardRef(({className:e,type:t,...n},r)=>o.jsx("input",{type:t,className:ge("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-ring focus-visible:shadow-[0_0_0_1px_hsl(var(--ring)),0_0_8px_hsl(var(--ring)/0.3)] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));vn.displayName="Input";function iq(e,t=[]){let n=[];function r(a,s){const c=x.createContext(s);c.displayName=a+"Context";const l=n.length;n=[...n,s];const u=h=>{var b;const{scope:f,children:p,...m}=h,g=((b=f==null?void 0:f[e])==null?void 0:b[l])||c,v=x.useMemo(()=>m,Object.values(m));return o.jsx(g.Provider,{value:v,children:p})};u.displayName=a+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[e])==null?void 0:g[l])||c,m=x.useContext(p);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=n.map(s=>x.createContext(s));return function(c){const l=(c==null?void 0:c[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return i.scopeName=e,[r,aq(i,...t)]}function aq(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((c,{useScope:l,scopeName:u})=>{const h=l(a)[`__scope${u}`];return{...c,...h}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var sq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Yj=sq.reduce((e,t)=>{const n=vy(`Primitive.${t}`),r=x.forwardRef((i,a)=>{const{asChild:s,...c}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),bD={exports:{}},wD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju=x;function oq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cq=typeof Object.is=="function"?Object.is:oq,lq=ju.useState,uq=ju.useEffect,dq=ju.useLayoutEffect,hq=ju.useDebugValue;function fq(e,t){var n=t(),r=lq({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return dq(function(){i.value=n,i.getSnapshot=t,p0(i)&&a({inst:i})},[e,n,t]),uq(function(){return p0(i)&&a({inst:i}),e(function(){p0(i)&&a({inst:i})})},[e]),hq(n),n}function p0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cq(e,n)}catch{return!0}}function pq(e,t){return t()}var mq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pq:fq;wD.useSyncExternalStore=ju.useSyncExternalStore!==void 0?ju.useSyncExternalStore:mq;bD.exports=wD;var gq=bD.exports;function vq(){return gq.useSyncExternalStore(yq,()=>!0,()=>!1)}function yq(){return()=>{}}var Xj="Avatar",[xq]=iq(Xj),[bq,_D]=xq(Xj),jD=x.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,a]=x.useState("idle");return o.jsx(bq,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:o.jsx(Yj.span,{...r,ref:t})})});jD.displayName=Xj;var SD="AvatarImage",ED=x.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,s=_D(SD,n),c=wq(r,a),l=hi(u=>{i(u),s.onImageLoadingStatusChange(u)});return Kr(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?o.jsx(Yj.img,{...a,ref:t,src:r}):null});ED.displayName=SD;var ND="AvatarFallback",PD=x.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,a=_D(ND,n),[s,c]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(l)}},[r]),s&&a.imageLoadingStatus!=="loaded"?o.jsx(Yj.span,{...i,ref:t}):null});PD.displayName=ND;function bk(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function wq(e,{referrerPolicy:t,crossOrigin:n}){const r=vq(),i=x.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[s,c]=x.useState(()=>bk(a,e));return Kr(()=>{c(bk(a,e))},[a,e]),Kr(()=>{const l=h=>()=>{c(h)};if(!a)return;const u=l("loaded"),d=l("error");return a.addEventListener("load",u),a.addEventListener("error",d),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,n,t]),s}var kD=jD,CD=ED,AD=PD;const _q=x.forwardRef(({className:e,...t},n)=>o.jsx(kD,{ref:n,className:ge("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));_q.displayName=kD.displayName;const jq=x.forwardRef(({className:e,...t},n)=>o.jsx(CD,{ref:n,className:ge("aspect-square h-full w-full object-cover",e),...t}));jq.displayName=CD.displayName;const Sq=x.forwardRef(({className:e,...t},n)=>o.jsx(AD,{ref:n,className:ge("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Sq.displayName=AD.displayName;const Bw={showTeamSection:!1,showLanguagePreference:!1},Eq=()=>{const[e,t]=x.useState({name:"",email:"",subject:"",message:""}),n=r=>{r.preventDefault(),$.success("Message sent! We'll get back to you soon."),t({name:"",email:"",subject:"",message:""})};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{}),o.jsx("main",{className:"pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("h1",{className:"text-5xl font-bold mb-4",children:["Get in"," ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Touch"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Have questions? We'd love to hear from you. Send us a message and we'll respond as soon as possible."})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[o.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.02] hover:-translate-y-1",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-all duration-300",children:o.jsx(Oj,{className:"h-6 w-6 text-primary"})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Email Us"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"info@prossmind.com"})]}),o.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.02] hover:-translate-y-1",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-all duration-300",children:o.jsx(dW,{className:"h-6 w-6 text-primary"})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Call Us"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"+41 78 330 79 67"})]}),o.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center transition-all duration-300 cursor-pointer hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:shadow-blue-500/50 hover:scale-[1.02] hover:-translate-y-1",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-all duration-300",children:o.jsx(Rj,{className:"h-6 w-6 text-primary"})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Live Chat"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Available 24/7"})]})]}),Bw.showTeamSection,o.jsx("div",{className:"max-w-2xl mx-auto",children:o.jsxs("form",{onSubmit:n,className:"bg-card border border-border rounded-2xl p-8 space-y-6 transition-all duration-300 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] hover:shadow-blue-500/30",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"Name"}),o.jsx(vn,{id:"name",value:e.name,onChange:r=>t({...e,name:r.target.value}),placeholder:"Your name",className:"transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),o.jsx(vn,{id:"email",type:"email",value:e.email,onChange:r=>t({...e,email:r.target.value}),placeholder:"your@email.com",className:"transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"subject",className:"text-sm font-medium",children:"Subject"}),o.jsx(vn,{id:"subject",value:e.subject,onChange:r=>t({...e,subject:r.target.value}),placeholder:"How can we help?",className:"transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"message",className:"text-sm font-medium",children:"Message"}),o.jsx(vi,{id:"message",value:e.message,onChange:r=>t({...e,message:r.target.value}),placeholder:"Tell us more about your inquiry...",className:"min-h-[150px] transition-all duration-300 focus:shadow-[0_0_15px_rgba(59,130,246,0.4)] focus:shadow-blue-500/40",required:!0})]}),o.jsx(V,{type:"submit",size:"lg",className:"w-full transition-all duration-300 hover:shadow-[0_0_20px_rgba(59,130,246,0.6)] hover:shadow-blue-500/60 hover:scale-[1.02]",children:"Send Message"})]})})]})})]})};var Nq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pq=Nq.reduce((e,t)=>{const n=vy(`Primitive.${t}`),r=x.forwardRef((i,a)=>{const{asChild:s,...c}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),kq="Label",TD=x.forwardRef((e,t)=>o.jsx(Pq.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));TD.displayName=kq;var OD=TD;const Cq=sp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Et=x.forwardRef(({className:e,...t},n)=>o.jsx(OD,{ref:n,className:ge(Cq(),e),...t}));Et.displayName=OD.displayName;var Lt;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const s of i)a[s]=s;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),s={};for(const c of a)s[c]=i[c];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},e.find=(i,a)=>{for(const s of i)if(a(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Lt||(Lt={}));var wk;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(wk||(wk={}));const Me=Lt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),uo=e=>{switch(typeof e){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return Number.isNaN(e)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(e)?Me.array:e===null?Me.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Me.promise:typeof Map<"u"&&e instanceof Map?Me.map:typeof Set<"u"&&e instanceof Set?Me.set:typeof Date<"u"&&e instanceof Date?Me.date:Me.object;default:return Me.unknown}},me=Lt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class As extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},r={_errors:[]},i=a=>{for(const s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let c=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(n(s))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}};return i(this),r}static assert(t){if(!(t instanceof As))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Lt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(t(i))}else r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}As.create=e=>new As(e);const Fw=(e,t)=>{let n;switch(e.code){case me.invalid_type:e.received===Me.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case me.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Lt.jsonStringifyReplacer)}`;break;case me.unrecognized_keys:n=`Unrecognized key(s) in object: ${Lt.joinValues(e.keys,", ")}`;break;case me.invalid_union:n="Invalid input";break;case me.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Lt.joinValues(e.options)}`;break;case me.invalid_enum_value:n=`Invalid enum value. Expected ${Lt.joinValues(e.options)}, received '${e.received}'`;break;case me.invalid_arguments:n="Invalid function arguments";break;case me.invalid_return_type:n="Invalid function return type";break;case me.invalid_date:n="Invalid date";break;case me.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Lt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case me.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case me.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case me.custom:n="Invalid input";break;case me.invalid_intersection_types:n="Intersection results could not be merged";break;case me.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case me.not_finite:n="Number must be finite";break;default:n=t.defaultError,Lt.assertNever(e)}return{message:n}};let Aq=Fw;function Tq(){return Aq}const Oq=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],s={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)c=u(s,{data:t,defaultError:c}).message;return{...i,path:a,message:c}};function Ae(e,t){const n=Tq(),r=Oq({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Fw?void 0:Fw].filter(i=>!!i)});e.common.issues.push(r)}class wi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return dt;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const a=await i.key,s=await i.value;r.push({key:a,value:s})}return wi.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return dt;a.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[a.value]=s.value)}return{status:t.value,value:r}}}const dt=Object.freeze({status:"aborted"}),_h=e=>({status:"dirty",value:e}),Hi=e=>({status:"valid",value:e}),_k=e=>e.status==="aborted",jk=e=>e.status==="dirty",Su=e=>e.status==="valid",Ig=e=>typeof Promise<"u"&&e instanceof Promise;var De;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(De||(De={}));class Co{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sk=(e,t)=>{if(Su(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new As(e.common.issues);return this._error=n,this._error}}};function Nt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(s,c)=>{const{message:l}=e;return s.code==="invalid_enum_value"?{message:l??c.defaultError}:typeof c.data>"u"?{message:l??r??c.defaultError}:s.code!=="invalid_type"?{message:c.defaultError}:{message:l??n??c.defaultError}},description:i}}class Dt{get description(){return this._def.description}_getType(t){return uo(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:uo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new wi,ctx:{common:t.parent.common,data:t.data,parsedType:uo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Ig(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:uo(t)},i=this._parseSync({data:t,path:r.path,parent:r});return Sk(r,i)}"~validate"(t){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:uo(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:n});return Su(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(a=>Su(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:uo(t)},i=this._parse({data:t,path:r.path,parent:r}),a=await(Ig(i)?i:Promise.resolve(i));return Sk(r,a)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const s=t(i),c=()=>a.addIssue({code:me.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(c(),!1)):s?!0:(c(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new Nu({schema:this,typeName:ht.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Eo.create(this,this._def)}nullable(){return Pu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ia.create(this)}promise(){return Bg.create(this,this._def)}or(t){return Dg.create([this,t],this._def)}and(t){return Lg.create(this,t,this._def)}transform(t){return new Nu({...Nt(this._def),schema:this,typeName:ht.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Uw({...Nt(this._def),innerType:this,defaultValue:n,typeName:ht.ZodDefault})}brand(){return new tK({typeName:ht.ZodBranded,type:this,...Nt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Hw({...Nt(this._def),innerType:this,catchValue:n,typeName:ht.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Zj.create(this,t)}readonly(){return Vw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Rq=/^c[^\s-]{8,}$/i,$q=/^[0-9a-z]+$/,Iq=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Mq=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Dq=/^[a-z0-9_-]{21}$/i,Lq=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Bq=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Fq=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let m0;const Uq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Hq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Vq=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Gq=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Wq=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,qq=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,RD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Kq=new RegExp(`^${RD}$`);function $D(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function Yq(e){return new RegExp(`^${$D(e)}$`)}function Xq(e){let t=`${RD}T${$D(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Zq(e,t){return!!((t==="v4"||!t)&&Uq.test(e)||(t==="v6"||!t)&&Vq.test(e))}function Jq(e,t){if(!Lq.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function Qq(e,t){return!!((t==="v4"||!t)&&Hq.test(e)||(t==="v6"||!t)&&Gq.test(e))}class jo extends Dt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Me.string){const a=this._getOrReturnCtx(t);return Ae(a,{code:me.invalid_type,expected:Me.string,received:a.parsedType}),dt}const r=new wi;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const s=t.data.length>a.value,c=t.data.length<a.value;(s||c)&&(i=this._getOrReturnCtx(t,i),s?Ae(i,{code:me.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&Ae(i,{code:me.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Fq.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"email",code:me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")m0||(m0=new RegExp(zq,"u")),m0.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"emoji",code:me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Mq.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"uuid",code:me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Dq.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"nanoid",code:me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Rq.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"cuid",code:me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")$q.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"cuid2",code:me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Iq.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"ulid",code:me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ae(i,{validation:"url",code:me.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"regex",code:me.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?Xq(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Kq.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Yq(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Bq.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"duration",code:me.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Zq(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"ip",code:me.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?Jq(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"jwt",code:me.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?Qq(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"cidr",code:me.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Wq.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"base64",code:me.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?qq.test(t.data)||(i=this._getOrReturnCtx(t,i),Ae(i,{validation:"base64url",code:me.invalid_string,message:a.message}),r.dirty()):Lt.assertNever(a);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:me.invalid_string,...De.errToObj(r)})}_addCheck(t){return new jo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...De.errToObj(t)})}url(t){return this._addCheck({kind:"url",...De.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...De.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...De.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...De.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...De.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...De.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...De.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...De.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...De.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...De.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...De.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...De.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...De.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...De.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...De.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...De.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...De.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...De.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...De.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...De.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...De.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...De.errToObj(n)})}nonempty(t){return this.min(1,De.errToObj(t))}trim(){return new jo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new jo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new jo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}jo.create=e=>new jo({checks:[],typeName:ht.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Nt(e)});function eK(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(e.toFixed(i).replace(".","")),s=Number.parseInt(t.toFixed(i).replace(".",""));return a%s/10**i}class tf extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Me.number){const a=this._getOrReturnCtx(t);return Ae(a,{code:me.invalid_type,expected:Me.number,received:a.parsedType}),dt}let r;const i=new wi;for(const a of this._def.checks)a.kind==="int"?Lt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Ae(r,{code:me.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:me.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:me.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?eK(t.data,a.value)!==0&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:me.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Ae(r,{code:me.not_finite,message:a.message}),i.dirty()):Lt.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,De.toString(n))}gt(t,n){return this.setLimit("min",t,!1,De.toString(n))}lte(t,n){return this.setLimit("max",t,!0,De.toString(n))}lt(t,n){return this.setLimit("max",t,!1,De.toString(n))}setLimit(t,n,r,i){return new tf({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:De.toString(i)}]})}_addCheck(t){return new tf({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:De.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:De.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:De.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:De.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:De.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:De.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:De.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:De.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:De.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Lt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}tf.create=e=>new tf({checks:[],typeName:ht.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Nt(e)});class nf extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Me.bigint)return this._getInvalidInput(t);let r;const i=new wi;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:me.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:me.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Ae(r,{code:me.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Lt.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ae(n,{code:me.invalid_type,expected:Me.bigint,received:n.parsedType}),dt}gte(t,n){return this.setLimit("min",t,!0,De.toString(n))}gt(t,n){return this.setLimit("min",t,!1,De.toString(n))}lte(t,n){return this.setLimit("max",t,!0,De.toString(n))}lt(t,n){return this.setLimit("max",t,!1,De.toString(n))}setLimit(t,n,r,i){return new nf({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:De.toString(i)}]})}_addCheck(t){return new nf({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:De.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:De.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:De.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:De.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:De.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}nf.create=e=>new nf({checks:[],typeName:ht.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Nt(e)});class Ek extends Dt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Me.boolean){const r=this._getOrReturnCtx(t);return Ae(r,{code:me.invalid_type,expected:Me.boolean,received:r.parsedType}),dt}return Hi(t.data)}}Ek.create=e=>new Ek({typeName:ht.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Nt(e)});class Mg extends Dt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Me.date){const a=this._getOrReturnCtx(t);return Ae(a,{code:me.invalid_type,expected:Me.date,received:a.parsedType}),dt}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Ae(a,{code:me.invalid_date}),dt}const r=new wi;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Ae(i,{code:me.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Lt.assertNever(a);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Mg({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:De.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:De.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Mg.create=e=>new Mg({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ht.ZodDate,...Nt(e)});class Nk extends Dt{_parse(t){if(this._getType(t)!==Me.symbol){const r=this._getOrReturnCtx(t);return Ae(r,{code:me.invalid_type,expected:Me.symbol,received:r.parsedType}),dt}return Hi(t.data)}}Nk.create=e=>new Nk({typeName:ht.ZodSymbol,...Nt(e)});class Pk extends Dt{_parse(t){if(this._getType(t)!==Me.undefined){const r=this._getOrReturnCtx(t);return Ae(r,{code:me.invalid_type,expected:Me.undefined,received:r.parsedType}),dt}return Hi(t.data)}}Pk.create=e=>new Pk({typeName:ht.ZodUndefined,...Nt(e)});class kk extends Dt{_parse(t){if(this._getType(t)!==Me.null){const r=this._getOrReturnCtx(t);return Ae(r,{code:me.invalid_type,expected:Me.null,received:r.parsedType}),dt}return Hi(t.data)}}kk.create=e=>new kk({typeName:ht.ZodNull,...Nt(e)});class Ck extends Dt{constructor(){super(...arguments),this._any=!0}_parse(t){return Hi(t.data)}}Ck.create=e=>new Ck({typeName:ht.ZodAny,...Nt(e)});class Ak extends Dt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Hi(t.data)}}Ak.create=e=>new Ak({typeName:ht.ZodUnknown,...Nt(e)});class Ao extends Dt{_parse(t){const n=this._getOrReturnCtx(t);return Ae(n,{code:me.invalid_type,expected:Me.never,received:n.parsedType}),dt}}Ao.create=e=>new Ao({typeName:ht.ZodNever,...Nt(e)});class Tk extends Dt{_parse(t){if(this._getType(t)!==Me.undefined){const r=this._getOrReturnCtx(t);return Ae(r,{code:me.invalid_type,expected:Me.void,received:r.parsedType}),dt}return Hi(t.data)}}Tk.create=e=>new Tk({typeName:ht.ZodVoid,...Nt(e)});class Ia extends Dt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==Me.array)return Ae(n,{code:me.invalid_type,expected:Me.array,received:n.parsedType}),dt;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,c=n.data.length<i.exactLength.value;(s||c)&&(Ae(n,{code:s?me.too_big:me.too_small,minimum:c?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ae(n,{code:me.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ae(n,{code:me.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,c)=>i.type._parseAsync(new Co(n,s,n.path,c)))).then(s=>wi.mergeArray(r,s));const a=[...n.data].map((s,c)=>i.type._parseSync(new Co(n,s,n.path,c)));return wi.mergeArray(r,a)}get element(){return this._def.type}min(t,n){return new Ia({...this._def,minLength:{value:t,message:De.toString(n)}})}max(t,n){return new Ia({...this._def,maxLength:{value:t,message:De.toString(n)}})}length(t,n){return new Ia({...this._def,exactLength:{value:t,message:De.toString(n)}})}nonempty(t){return this.min(1,t)}}Ia.create=(e,t)=>new Ia({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ht.ZodArray,...Nt(t)});function Ul(e){if(e instanceof Vn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Eo.create(Ul(r))}return new Vn({...e._def,shape:()=>t})}else return e instanceof Ia?new Ia({...e._def,type:Ul(e.element)}):e instanceof Eo?Eo.create(Ul(e.unwrap())):e instanceof Pu?Pu.create(Ul(e.unwrap())):e instanceof Wc?Wc.create(e.items.map(t=>Ul(t))):e}class Vn extends Dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Lt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==Me.object){const u=this._getOrReturnCtx(t);return Ae(u,{code:me.invalid_type,expected:Me.object,received:u.parsedType}),dt}const{status:r,ctx:i}=this._processInputParams(t),{shape:a,keys:s}=this._getCached(),c=[];if(!(this._def.catchall instanceof Ao&&this._def.unknownKeys==="strip"))for(const u in i.data)s.includes(u)||c.push(u);const l=[];for(const u of s){const d=a[u],h=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Co(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ao){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of c)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")c.length>0&&(Ae(i,{code:me.unrecognized_keys,keys:c}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of c){const h=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Co(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,f=await d.value;u.push({key:h,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>wi.mergeObjectSync(r,u)):wi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return De.errToObj,new Vn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,s;const i=((s=(a=this._def).errorMap)==null?void 0:s.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:De.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new Vn({...this._def,unknownKeys:"strip"})}passthrough(){return new Vn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Vn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Vn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ht.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Vn({...this._def,catchall:t})}pick(t){const n={};for(const r of Lt.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Vn({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Lt.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new Vn({...this._def,shape:()=>n})}deepPartial(){return Ul(this)}partial(t){const n={};for(const r of Lt.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}return new Vn({...this._def,shape:()=>n})}required(t){const n={};for(const r of Lt.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Eo;)a=a._def.innerType;n[r]=a}return new Vn({...this._def,shape:()=>n})}keyof(){return ID(Lt.objectKeys(this.shape))}}Vn.create=(e,t)=>new Vn({shape:()=>e,unknownKeys:"strip",catchall:Ao.create(),typeName:ht.ZodObject,...Nt(t)});Vn.strictCreate=(e,t)=>new Vn({shape:()=>e,unknownKeys:"strict",catchall:Ao.create(),typeName:ht.ZodObject,...Nt(t)});Vn.lazycreate=(e,t)=>new Vn({shape:e,unknownKeys:"strip",catchall:Ao.create(),typeName:ht.ZodObject,...Nt(t)});class Dg extends Dt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const s=a.map(c=>new As(c.ctx.common.issues));return Ae(n,{code:me.invalid_union,unionErrors:s}),dt}if(n.common.async)return Promise.all(r.map(async a=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let a;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const c=s.map(l=>new As(l));return Ae(n,{code:me.invalid_union,unionErrors:c}),dt}}get options(){return this._def.options}}Dg.create=(e,t)=>new Dg({options:e,typeName:ht.ZodUnion,...Nt(t)});function zw(e,t){const n=uo(e),r=uo(t);if(e===t)return{valid:!0,data:e};if(n===Me.object&&r===Me.object){const i=Lt.objectKeys(t),a=Lt.objectKeys(e).filter(c=>i.indexOf(c)!==-1),s={...e,...t};for(const c of a){const l=zw(e[c],t[c]);if(!l.valid)return{valid:!1};s[c]=l.data}return{valid:!0,data:s}}else if(n===Me.array&&r===Me.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const s=e[a],c=t[a],l=zw(s,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===Me.date&&r===Me.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Lg extends Dt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(a,s)=>{if(_k(a)||_k(s))return dt;const c=zw(a.value,s.value);return c.valid?((jk(a)||jk(s))&&n.dirty(),{status:n.value,value:c.data}):(Ae(r,{code:me.invalid_intersection_types}),dt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Lg.create=(e,t,n)=>new Lg({left:e,right:t,typeName:ht.ZodIntersection,...Nt(n)});class Wc extends Dt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Me.array)return Ae(r,{code:me.invalid_type,expected:Me.array,received:r.parsedType}),dt;if(r.data.length<this._def.items.length)return Ae(r,{code:me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),dt;!this._def.rest&&r.data.length>this._def.items.length&&(Ae(r,{code:me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((s,c)=>{const l=this._def.items[c]||this._def.rest;return l?l._parse(new Co(r,s,r.path,c)):null}).filter(s=>!!s);return r.common.async?Promise.all(a).then(s=>wi.mergeArray(n,s)):wi.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new Wc({...this._def,rest:t})}}Wc.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wc({items:e,typeName:ht.ZodTuple,rest:null,...Nt(t)})};class Ok extends Dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Me.map)return Ae(r,{code:me.invalid_type,expected:Me.map,received:r.parsedType}),dt;const i=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([c,l],u)=>({key:i._parse(new Co(r,c,r.path,[u,"key"])),value:a._parse(new Co(r,l,r.path,[u,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return dt;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),c.set(u.value,d.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const l of s){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return dt;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),c.set(u.value,d.value)}return{status:n.value,value:c}}}}Ok.create=(e,t,n)=>new Ok({valueType:t,keyType:e,typeName:ht.ZodMap,...Nt(n)});class rf extends Dt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Me.set)return Ae(r,{code:me.invalid_type,expected:Me.set,received:r.parsedType}),dt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ae(r,{code:me.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ae(r,{code:me.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function s(l){const u=new Set;for(const d of l){if(d.status==="aborted")return dt;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const c=[...r.data.values()].map((l,u)=>a._parse(new Co(r,l,r.path,u)));return r.common.async?Promise.all(c).then(l=>s(l)):s(c)}min(t,n){return new rf({...this._def,minSize:{value:t,message:De.toString(n)}})}max(t,n){return new rf({...this._def,maxSize:{value:t,message:De.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}rf.create=(e,t)=>new rf({valueType:e,minSize:null,maxSize:null,typeName:ht.ZodSet,...Nt(t)});class Rk extends Dt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Rk.create=(e,t)=>new Rk({getter:e,typeName:ht.ZodLazy,...Nt(t)});class $k extends Dt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ae(n,{received:n.data,code:me.invalid_literal,expected:this._def.value}),dt}return{status:"valid",value:t.data}}get value(){return this._def.value}}$k.create=(e,t)=>new $k({value:e,typeName:ht.ZodLiteral,...Nt(t)});function ID(e,t){return new Eu({values:e,typeName:ht.ZodEnum,...Nt(t)})}class Eu extends Dt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Ae(n,{expected:Lt.joinValues(r),received:n.parsedType,code:me.invalid_type}),dt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Ae(n,{received:n.data,code:me.invalid_enum_value,options:r}),dt}return Hi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Eu.create(t,{...this._def,...n})}exclude(t,n=this._def){return Eu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Eu.create=ID;class Ik extends Dt{_parse(t){const n=Lt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Me.string&&r.parsedType!==Me.number){const i=Lt.objectValues(n);return Ae(r,{expected:Lt.joinValues(i),received:r.parsedType,code:me.invalid_type}),dt}if(this._cache||(this._cache=new Set(Lt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Lt.objectValues(n);return Ae(r,{received:r.data,code:me.invalid_enum_value,options:i}),dt}return Hi(t.data)}get enum(){return this._def.values}}Ik.create=(e,t)=>new Ik({values:e,typeName:ht.ZodNativeEnum,...Nt(t)});class Bg extends Dt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Me.promise&&n.common.async===!1)return Ae(n,{code:me.invalid_type,expected:Me.promise,received:n.parsedType}),dt;const r=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return Hi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Bg.create=(e,t)=>new Bg({type:e,typeName:ht.ZodPromise,...Nt(t)});class Nu extends Dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ht.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:s=>{Ae(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const s=i.transform(r.data,a);if(r.common.async)return Promise.resolve(s).then(async c=>{if(n.value==="aborted")return dt;const l=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return l.status==="aborted"?dt:l.status==="dirty"||n.value==="dirty"?_h(l.value):l});{if(n.value==="aborted")return dt;const c=this._def.schema._parseSync({data:s,path:r.path,parent:r});return c.status==="aborted"?dt:c.status==="dirty"||n.value==="dirty"?_h(c.value):c}}if(i.type==="refinement"){const s=c=>{const l=i.refinement(c,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?dt:(c.status==="dirty"&&n.dirty(),s(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?dt:(c.status==="dirty"&&n.dirty(),s(c.value).then(()=>({status:n.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Su(s))return dt;const c=i.transform(s.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Su(s)?Promise.resolve(i.transform(s.value,a)).then(c=>({status:n.value,value:c})):dt);Lt.assertNever(i)}}Nu.create=(e,t,n)=>new Nu({schema:e,typeName:ht.ZodEffects,effect:t,...Nt(n)});Nu.createWithPreprocess=(e,t,n)=>new Nu({schema:t,effect:{type:"preprocess",transform:e},typeName:ht.ZodEffects,...Nt(n)});class Eo extends Dt{_parse(t){return this._getType(t)===Me.undefined?Hi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Eo.create=(e,t)=>new Eo({innerType:e,typeName:ht.ZodOptional,...Nt(t)});class Pu extends Dt{_parse(t){return this._getType(t)===Me.null?Hi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Pu.create=(e,t)=>new Pu({innerType:e,typeName:ht.ZodNullable,...Nt(t)});class Uw extends Dt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Me.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Uw.create=(e,t)=>new Uw({innerType:e,typeName:ht.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Nt(t)});class Hw extends Dt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Ig(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new As(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new As(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Hw.create=(e,t)=>new Hw({innerType:e,typeName:ht.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Nt(t)});class Mk extends Dt{_parse(t){if(this._getType(t)!==Me.nan){const r=this._getOrReturnCtx(t);return Ae(r,{code:me.invalid_type,expected:Me.nan,received:r.parsedType}),dt}return{status:"valid",value:t.data}}}Mk.create=e=>new Mk({typeName:ht.ZodNaN,...Nt(e)});class tK extends Dt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Zj extends Dt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?dt:a.status==="dirty"?(n.dirty(),_h(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?dt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new Zj({in:t,out:n,typeName:ht.ZodPipeline})}}class Vw extends Dt{_parse(t){const n=this._def.innerType._parse(t),r=i=>(Su(i)&&(i.value=Object.freeze(i.value)),i);return Ig(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Vw.create=(e,t)=>new Vw({innerType:e,typeName:ht.ZodReadonly,...Nt(t)});var ht;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ht||(ht={}));const Dk=jo.create;Ao.create;Ia.create;const nK=Vn.create;Dg.create;Lg.create;Wc.create;Eu.create;Bg.create;Eo.create;Pu.create;const rK=nK({email:Dk().email("Invalid email address").max(255,"Email too long"),password:Dk().min(6,"Password must be at least 6 characters").max(100,"Password too long")}),MD=()=>{const e=_i(),{toast:t}=lp(),[n,r]=x.useState(!1),[i,a]=x.useState(""),[s,c]=x.useState(""),[l,u]=x.useState(!1),[d,h]=x.useState(""),[f,p]=x.useState("");x.useEffect(()=>{oe.auth.getSession().then(({data:{session:w}})=>{w&&e("/")});const{data:{subscription:b}}=oe.auth.onAuthStateChange((w,y)=>{y&&e("/")});return()=>b.unsubscribe()},[e]);const m=async b=>{if(b.preventDefault(),d.length!==6){t({variant:"destructive",title:"Invalid OTP",description:"Please enter a 6-digit code"});return}r(!0);const{error:w}=await oe.auth.verifyOtp({email:f,token:d,type:"email"});r(!1),w?t({variant:"destructive",title:"Verification failed",description:w.message}):(t({title:"Success!",description:"Your email has been verified. You can now sign in."}),u(!1),h(""),p(""),a(""),c(""))},g=async()=>{r(!0);const{error:b}=await oe.auth.resend({type:"signup",email:f});r(!1),t(b?{variant:"destructive",title:"Resend failed",description:b.message}:{title:"OTP Resent",description:"Check your email for a new verification code."})},v=async b=>{b.preventDefault();const w=rK.safeParse({email:i,password:s});if(!w.success){t({variant:"destructive",title:"Validation Error",description:w.error.errors[0].message});return}r(!0);const{error:y}=await oe.auth.signInWithPassword({email:w.data.email,password:w.data.password});r(!1),y&&t({variant:"destructive",title:"Sign in failed",description:y.message})};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(xe,{className:"w-full max-w-md",children:[o.jsxs(Ne,{children:[o.jsx(Pe,{className:"text-2xl text-center",children:"Welcome to ProssMind"}),o.jsx($e,{className:"text-center",children:l?"Verify your email":"Sign in to start generating BPMN diagrams"})]}),o.jsx(Se,{children:l?o.jsxs("form",{onSubmit:m,className:"space-y-4",children:[o.jsxs(V,{type:"button",variant:"ghost",onClick:()=>{u(!1),h(""),p("")},className:"mb-4 p-0 h-auto",children:[o.jsx(MG,{className:"h-4 w-4 mr-2"}),"Back to sign up"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Et,{htmlFor:"otp",children:"Verification Code"}),o.jsx(vn,{id:"otp",type:"text",placeholder:"Enter 6-digit code",value:d,onChange:b=>h(b.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,required:!0,disabled:n,className:"text-center text-2xl tracking-widest"}),o.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Enter the 6-digit code sent to ",f]})]}),o.jsx(V,{type:"submit",className:"w-full",disabled:n||d.length!==6,children:n?"Verifying...":"Verify Email"}),o.jsx(V,{type:"button",variant:"link",className:"w-full text-sm",onClick:g,disabled:n,children:"Didn't receive the code? Resend"})]}):o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Et,{htmlFor:"signin-email",children:"Email"}),o.jsx(vn,{id:"signin-email",type:"email",placeholder:"you@example.com",value:i,onChange:b=>a(b.target.value),required:!0,disabled:n})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Et,{htmlFor:"signin-password",children:"Password"}),o.jsx(vn,{id:"signin-password",type:"password",placeholder:"",value:s,onChange:b=>c(b.target.value),required:!0,disabled:n})]}),o.jsx(V,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign In"})]})})]})})},tl=x.forwardRef(({className:e,...t},n)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:n,className:ge("w-full caption-bottom text-sm",e),...t})}));tl.displayName="Table";const nl=x.forwardRef(({className:e,...t},n)=>o.jsx("thead",{ref:n,className:ge("[&_tr]:border-b",e),...t}));nl.displayName="TableHeader";const rl=x.forwardRef(({className:e,...t},n)=>o.jsx("tbody",{ref:n,className:ge("[&_tr:last-child]:border-0",e),...t}));rl.displayName="TableBody";const iK=x.forwardRef(({className:e,...t},n)=>o.jsx("tfoot",{ref:n,className:ge("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));iK.displayName="TableFooter";const qr=x.forwardRef(({className:e,...t},n)=>o.jsx("tr",{ref:n,className:ge("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));qr.displayName="TableRow";const Yt=x.forwardRef(({className:e,...t},n)=>o.jsx("th",{ref:n,className:ge("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Yt.displayName="TableHead";const Wt=x.forwardRef(({className:e,...t},n)=>o.jsx("td",{ref:n,className:ge("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Wt.displayName="TableCell";const aK=x.forwardRef(({className:e,...t},n)=>o.jsx("caption",{ref:n,className:ge("mt-4 text-sm text-muted-foreground",e),...t}));aK.displayName="TableCaption";const sK=sp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function mn({className:e,variant:t,...n}){return o.jsx("div",{className:ge(sK({variant:t}),e),...n})}const oK=()=>{const e=_i(),[t,n]=x.useState(null),[r,i]=x.useState(!0),[a,s]=x.useState(!1),[c,l]=x.useState([]);x.useEffect(()=>{const{data:{subscription:h}}=oe.auth.onAuthStateChange((f,p)=>{n((p==null?void 0:p.user)??null),p!=null&&p.user||e("/auth")});return oe.auth.getSession().then(({data:{session:f}})=>{n((f==null?void 0:f.user)??null),f!=null&&f.user||e("/auth")}),()=>h.unsubscribe()},[e]),x.useEffect(()=>{t&&(async()=>{if(t)try{const{data:f,error:p}=await oe.from("user_roles").select("role").eq("user_id",t.id).eq("role","admin").maybeSingle();if(p&&p.code!=="PGRST116"&&p.code!=="PGRST301"){console.error("Error checking admin status:",p),$.error("Failed to verify admin status"),e("/");return}const m=!!f;s(m),m||($.error("Access denied: Admin privileges required"),e("/"))}catch(f){console.error("Unexpected error:",f),e("/")}finally{i(!1)}})()},[t,e]),x.useEffect(()=>{(async()=>{if(a)try{const{data:f,error:p}=await oe.from("user_profiles").select("*").order("created_at",{ascending:!1});if(p)throw p;const{data:m,error:g}=await oe.from("user_roles").select("user_id, role");if(g)throw g;const v=(m==null?void 0:m.reduce((w,y)=>(w[y.user_id]||(w[y.user_id]=[]),w[y.user_id].push(y.role),w),{}))||{},b=(f==null?void 0:f.map(w=>({...w,roles:v[w.user_id]||["user"]})))||[];l(b)}catch(f){console.error("Error fetching users:",f),$.error("Failed to load users")}})()},[a]);const u=async(h,f)=>{const p=f.includes("admin");try{if(p){const{error:w}=await oe.from("user_roles").delete().eq("user_id",h).eq("role","admin");if(w)throw w;$.success("Admin privileges revoked")}else{const{error:w}=await oe.from("user_roles").insert({user_id:h,role:"admin"});if(w)throw w;$.success("Admin privileges granted")}const{data:m}=await oe.from("user_profiles").select("*").order("created_at",{ascending:!1}),{data:g}=await oe.from("user_roles").select("user_id, role"),v=(g==null?void 0:g.reduce((w,y)=>(w[y.user_id]||(w[y.user_id]=[]),w[y.user_id].push(y.role),w),{}))||{},b=(m==null?void 0:m.map(w=>({...w,roles:v[w.user_id]||["user"]})))||[];l(b)}catch(m){console.error("Error toggling admin:",m),$.error("Failed to update admin status")}},d=async h=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const{error:f}=await oe.auth.admin.deleteUser(h);if(f)throw f;$.success("User deleted successfully"),l(c.filter(p=>p.user_id!==h))}catch(f){console.error("Error deleting user:",f),$.error("Failed to delete user")}};return r?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):a?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{user:t}),o.jsxs("div",{className:"container mx-auto px-6 py-24",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[o.jsx(Cs,{className:"h-8 w-8 text-primary"}),o.jsx("h1",{className:"text-4xl font-bold",children:"Admin Dashboard"})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(_W,{className:"h-5 w-5"}),"User Management"]}),o.jsx($e,{children:"Manage users, assign roles, and control access permissions"})]}),o.jsx(Se,{children:o.jsxs(tl,{children:[o.jsx(nl,{children:o.jsxs(qr,{children:[o.jsx(Yt,{children:"Email"}),o.jsx(Yt,{children:"Roles"}),o.jsx(Yt,{children:"Created At"}),o.jsx(Yt,{children:"Actions"})]})}),o.jsx(rl,{children:c.map(h=>o.jsxs(qr,{children:[o.jsx(Wt,{className:"font-medium",children:h.email}),o.jsx(Wt,{children:o.jsx("div",{className:"flex gap-2",children:h.roles.map(f=>o.jsxs(mn,{variant:f==="admin"?"default":"secondary",children:[f==="admin"&&o.jsx(ik,{className:"h-3 w-3 mr-1"}),f]},f))})}),o.jsx(Wt,{children:new Date(h.created_at).toLocaleDateString()}),o.jsx(Wt,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{variant:h.roles.includes("admin")?"destructive":"default",size:"sm",onClick:()=>u(h.user_id,h.roles),disabled:h.user_id===(t==null?void 0:t.id),children:[o.jsx(ik,{className:"h-4 w-4 mr-1"}),h.roles.includes("admin")?"Revoke Admin":"Make Admin"]}),o.jsx(V,{variant:"outline",size:"sm",onClick:()=>d(h.user_id),disabled:h.user_id===(t==null?void 0:t.id),children:o.jsx(cp,{className:"h-4 w-4"})})]})})]},h.id))})]})})]})]})]}):null},cK=()=>{const e=_i();return x.useEffect(()=>{(async()=>{try{const{data:{user:n}}=await oe.auth.getUser();if(!n){$.error("Please log in"),e("/auth");return}const{data:r,error:i}=await oe.from("vision_bpmn_jobs").select("bpmn_xml").eq("user_id",n.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).single();if(i||!(r!=null&&r.bpmn_xml)){$.error("No completed diagrams found"),e("/vision-ai");return}const a=localStorage.getItem("diagramType")||"bpmn",s=a==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(s,r.bpmn_xml);const c=a==="bpmn"?"BPMN":"P&ID";$.success(`${c} diagram loaded successfully!`),e("/")}catch(n){console.error("Error loading diagram:",n),$.error("Failed to load diagram"),e("/vision-ai")}})()},[e]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading your diagram..."})]})})},lK=()=>{const e=od();return x.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background via-muted/30 to-background",children:o.jsxs("div",{className:"text-center px-6 slide-up",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"mb-4 text-8xl md:text-9xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"404"}),o.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-primary to-accent mx-auto rounded-full"})]}),o.jsx("h2",{className:"mb-4 text-2xl md:text-3xl font-semibold",children:"Page Not Found"}),o.jsx("p",{className:"mb-8 text-lg text-muted-foreground max-w-md mx-auto",children:"The page you're looking for doesn't exist or has been moved."}),o.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl font-medium",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Return to Home"]})]})})};function Lk({className:e,...t}){return o.jsx("div",{className:ge("animate-pulse rounded-md bg-muted",e),...t})}var uK=Array.isArray,Yr=uK,dK=typeof hm=="object"&&hm&&hm.Object===Object&&hm,DD=dK,hK=DD,fK=typeof self=="object"&&self&&self.Object===Object&&self,pK=hK||fK||Function("return this")(),Wa=pK,mK=Wa,gK=mK.Symbol,dp=gK,Bk=dp,LD=Object.prototype,vK=LD.hasOwnProperty,yK=LD.toString,Zd=Bk?Bk.toStringTag:void 0;function xK(e){var t=vK.call(e,Zd),n=e[Zd];try{e[Zd]=void 0;var r=!0}catch{}var i=yK.call(e);return r&&(t?e[Zd]=n:delete e[Zd]),i}var bK=xK,wK=Object.prototype,_K=wK.toString;function jK(e){return _K.call(e)}var SK=jK,Fk=dp,EK=bK,NK=SK,PK="[object Null]",kK="[object Undefined]",zk=Fk?Fk.toStringTag:void 0;function CK(e){return e==null?e===void 0?kK:PK:zk&&zk in Object(e)?EK(e):NK(e)}var Ms=CK;function AK(e){return e!=null&&typeof e=="object"}var Ds=AK,TK=Ms,OK=Ds,RK="[object Symbol]";function $K(e){return typeof e=="symbol"||OK(e)&&TK(e)==RK}var fd=$K,IK=Yr,MK=fd,DK=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,LK=/^\w*$/;function BK(e,t){if(IK(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||MK(e)?!0:LK.test(e)||!DK.test(e)||t!=null&&e in Object(t)}var Jj=BK;function FK(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Mo=FK;const pd=rn(Mo);var zK=Ms,UK=Mo,HK="[object AsyncFunction]",VK="[object Function]",GK="[object GeneratorFunction]",WK="[object Proxy]";function qK(e){if(!UK(e))return!1;var t=zK(e);return t==VK||t==GK||t==HK||t==WK}var Qj=qK;const st=rn(Qj);var KK=Wa,YK=KK["__core-js_shared__"],XK=YK,g0=XK,Uk=function(){var e=/[^.]+$/.exec(g0&&g0.keys&&g0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ZK(e){return!!Uk&&Uk in e}var JK=ZK,QK=Function.prototype,eY=QK.toString;function tY(e){if(e!=null){try{return eY.call(e)}catch{}try{return e+""}catch{}}return""}var BD=tY,nY=Qj,rY=JK,iY=Mo,aY=BD,sY=/[\\^$.*+?()[\]{}|]/g,oY=/^\[object .+?Constructor\]$/,cY=Function.prototype,lY=Object.prototype,uY=cY.toString,dY=lY.hasOwnProperty,hY=RegExp("^"+uY.call(dY).replace(sY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fY(e){if(!iY(e)||rY(e))return!1;var t=nY(e)?hY:oY;return t.test(aY(e))}var pY=fY;function mY(e,t){return e==null?void 0:e[t]}var gY=mY,vY=pY,yY=gY;function xY(e,t){var n=yY(e,t);return vY(n)?n:void 0}var il=xY,bY=il,wY=bY(Object,"create"),Py=wY,Hk=Py;function _Y(){this.__data__=Hk?Hk(null):{},this.size=0}var jY=_Y;function SY(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var EY=SY,NY=Py,PY="__lodash_hash_undefined__",kY=Object.prototype,CY=kY.hasOwnProperty;function AY(e){var t=this.__data__;if(NY){var n=t[e];return n===PY?void 0:n}return CY.call(t,e)?t[e]:void 0}var TY=AY,OY=Py,RY=Object.prototype,$Y=RY.hasOwnProperty;function IY(e){var t=this.__data__;return OY?t[e]!==void 0:$Y.call(t,e)}var MY=IY,DY=Py,LY="__lodash_hash_undefined__";function BY(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=DY&&t===void 0?LY:t,this}var FY=BY,zY=jY,UY=EY,HY=TY,VY=MY,GY=FY;function md(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}md.prototype.clear=zY;md.prototype.delete=UY;md.prototype.get=HY;md.prototype.has=VY;md.prototype.set=GY;var WY=md;function qY(){this.__data__=[],this.size=0}var KY=qY;function YY(e,t){return e===t||e!==e&&t!==t}var eS=YY,XY=eS;function ZY(e,t){for(var n=e.length;n--;)if(XY(e[n][0],t))return n;return-1}var ky=ZY,JY=ky,QY=Array.prototype,eX=QY.splice;function tX(e){var t=this.__data__,n=JY(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():eX.call(t,n,1),--this.size,!0}var nX=tX,rX=ky;function iX(e){var t=this.__data__,n=rX(t,e);return n<0?void 0:t[n][1]}var aX=iX,sX=ky;function oX(e){return sX(this.__data__,e)>-1}var cX=oX,lX=ky;function uX(e,t){var n=this.__data__,r=lX(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var dX=uX,hX=KY,fX=nX,pX=aX,mX=cX,gX=dX;function gd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}gd.prototype.clear=hX;gd.prototype.delete=fX;gd.prototype.get=pX;gd.prototype.has=mX;gd.prototype.set=gX;var Cy=gd,vX=il,yX=Wa,xX=vX(yX,"Map"),tS=xX,Vk=WY,bX=Cy,wX=tS;function _X(){this.size=0,this.__data__={hash:new Vk,map:new(wX||bX),string:new Vk}}var jX=_X;function SX(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var EX=SX,NX=EX;function PX(e,t){var n=e.__data__;return NX(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ay=PX,kX=Ay;function CX(e){var t=kX(this,e).delete(e);return this.size-=t?1:0,t}var AX=CX,TX=Ay;function OX(e){return TX(this,e).get(e)}var RX=OX,$X=Ay;function IX(e){return $X(this,e).has(e)}var MX=IX,DX=Ay;function LX(e,t){var n=DX(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var BX=LX,FX=jX,zX=AX,UX=RX,HX=MX,VX=BX;function vd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}vd.prototype.clear=FX;vd.prototype.delete=zX;vd.prototype.get=UX;vd.prototype.has=HX;vd.prototype.set=VX;var nS=vd,FD=nS,GX="Expected a function";function rS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(GX);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=e.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(rS.Cache||FD),n}rS.Cache=FD;var zD=rS;const WX=rn(zD);var qX=zD,KX=500;function YX(e){var t=qX(e,function(r){return n.size===KX&&n.clear(),r}),n=t.cache;return t}var XX=YX,ZX=XX,JX=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,QX=/\\(\\)?/g,eZ=ZX(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(JX,function(n,r,i,a){t.push(i?a.replace(QX,"$1"):r||n)}),t}),tZ=eZ;function nZ(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var iS=nZ,Gk=dp,rZ=iS,iZ=Yr,aZ=fd,Wk=Gk?Gk.prototype:void 0,qk=Wk?Wk.toString:void 0;function UD(e){if(typeof e=="string")return e;if(iZ(e))return rZ(e,UD)+"";if(aZ(e))return qk?qk.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var sZ=UD,oZ=sZ;function cZ(e){return e==null?"":oZ(e)}var HD=cZ,lZ=Yr,uZ=Jj,dZ=tZ,hZ=HD;function fZ(e,t){return lZ(e)?e:uZ(e,t)?[e]:dZ(hZ(e))}var VD=fZ,pZ=fd;function mZ(e){if(typeof e=="string"||pZ(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ty=mZ,gZ=VD,vZ=Ty;function yZ(e,t){t=gZ(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[vZ(t[n++])];return n&&n==r?e:void 0}var aS=yZ,xZ=aS;function bZ(e,t,n){var r=e==null?void 0:xZ(e,t);return r===void 0?n:r}var GD=bZ;const yi=rn(GD);function wZ(e){return e==null}var _Z=wZ;const pt=rn(_Z);var jZ=Ms,SZ=Yr,EZ=Ds,NZ="[object String]";function PZ(e){return typeof e=="string"||!SZ(e)&&EZ(e)&&jZ(e)==NZ}var kZ=PZ;const qc=rn(kZ);var WD={exports:{}},Zt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS=Symbol.for("react.element"),oS=Symbol.for("react.portal"),Oy=Symbol.for("react.fragment"),Ry=Symbol.for("react.strict_mode"),$y=Symbol.for("react.profiler"),Iy=Symbol.for("react.provider"),My=Symbol.for("react.context"),CZ=Symbol.for("react.server_context"),Dy=Symbol.for("react.forward_ref"),Ly=Symbol.for("react.suspense"),By=Symbol.for("react.suspense_list"),Fy=Symbol.for("react.memo"),zy=Symbol.for("react.lazy"),AZ=Symbol.for("react.offscreen"),qD;qD=Symbol.for("react.module.reference");function Vi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case sS:switch(e=e.type,e){case Oy:case $y:case Ry:case Ly:case By:return e;default:switch(e=e&&e.$$typeof,e){case CZ:case My:case Dy:case zy:case Fy:case Iy:return e;default:return t}}case oS:return t}}}Zt.ContextConsumer=My;Zt.ContextProvider=Iy;Zt.Element=sS;Zt.ForwardRef=Dy;Zt.Fragment=Oy;Zt.Lazy=zy;Zt.Memo=Fy;Zt.Portal=oS;Zt.Profiler=$y;Zt.StrictMode=Ry;Zt.Suspense=Ly;Zt.SuspenseList=By;Zt.isAsyncMode=function(){return!1};Zt.isConcurrentMode=function(){return!1};Zt.isContextConsumer=function(e){return Vi(e)===My};Zt.isContextProvider=function(e){return Vi(e)===Iy};Zt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===sS};Zt.isForwardRef=function(e){return Vi(e)===Dy};Zt.isFragment=function(e){return Vi(e)===Oy};Zt.isLazy=function(e){return Vi(e)===zy};Zt.isMemo=function(e){return Vi(e)===Fy};Zt.isPortal=function(e){return Vi(e)===oS};Zt.isProfiler=function(e){return Vi(e)===$y};Zt.isStrictMode=function(e){return Vi(e)===Ry};Zt.isSuspense=function(e){return Vi(e)===Ly};Zt.isSuspenseList=function(e){return Vi(e)===By};Zt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Oy||e===$y||e===Ry||e===Ly||e===By||e===AZ||typeof e=="object"&&e!==null&&(e.$$typeof===zy||e.$$typeof===Fy||e.$$typeof===Iy||e.$$typeof===My||e.$$typeof===Dy||e.$$typeof===qD||e.getModuleId!==void 0)};Zt.typeOf=Vi;WD.exports=Zt;var TZ=WD.exports,OZ=Ms,RZ=Ds,$Z="[object Number]";function IZ(e){return typeof e=="number"||RZ(e)&&OZ(e)==$Z}var KD=IZ;const MZ=rn(KD);var DZ=KD;function LZ(e){return DZ(e)&&e!=+e}var BZ=LZ;const hp=rn(BZ);var Ir=function(t){return t===0?0:t>0?1:-1},jc=function(t){return qc(t)&&t.indexOf("%")===t.length-1},ve=function(t){return MZ(t)&&!hp(t)},FZ=function(t){return pt(t)},ir=function(t){return ve(t)||qc(t)},zZ=0,yd=function(t){var n=++zZ;return"".concat(t||"").concat(n)},Mr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ve(t)&&!qc(t))return r;var a;if(jc(t)){var s=t.indexOf("%");a=n*parseFloat(t.slice(0,s))/100}else a=+t;return hp(a)&&(a=r),i&&a>n&&(a=n),a},mo=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},UZ=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},di=function(t,n){return ve(t)&&ve(n)?function(r){return t+r*(n-t)}:function(){return n}};function Fg(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):yi(r,t))===n})}var HZ=function(t,n){return ve(t)&&ve(n)?t-n:qc(t)&&qc(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function au(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Gw(e){"@babel/helpers - typeof";return Gw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gw(e)}var VZ=["viewBox","children"],GZ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Kk=["points","pathLength"],v0={svg:VZ,polygon:Kk,polyline:Kk},cS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],zg=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(x.isValidElement(t)&&(r=t.props),!pd(r))return null;var i={};return Object.keys(r).forEach(function(a){cS.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},WZ=function(t,n,r){return function(i){return t(n,r,i),null}},Kc=function(t,n,r){if(!pd(t)||Gw(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var s=t[a];cS.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=WZ(s,n,r))}),i},qZ=["children"],KZ=["children"];function Yk(e,t){if(e==null)return{};var n=YZ(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function YZ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ww(e){"@babel/helpers - typeof";return Ww=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ww(e)}var Xk={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},bs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Zk=null,y0=null,lS=function e(t){if(t===Zk&&Array.isArray(y0))return y0;var n=[];return x.Children.forEach(t,function(r){pt(r)||(TZ.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),y0=n,Zk=t,n};function xi(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return bs(i)}):r=[bs(t)],lS(e).forEach(function(i){var a=yi(i,"type.displayName")||yi(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function ci(e,t){var n=xi(e,t);return n&&n[0]}var Jk=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!ve(r)||r<=0||!ve(i)||i<=0)},XZ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ZZ=function(t){return t&&t.type&&qc(t.type)&&XZ.indexOf(t.type)>=0},JZ=function(t){return t&&Ww(t)==="object"&&"clipDot"in t},QZ=function(t,n,r,i){var a,s=(a=v0==null?void 0:v0[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!st(t)&&(i&&s.includes(n)||GZ.includes(n))||r&&cS.includes(n)},Xe=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(x.isValidElement(t)&&(i=t.props),!pd(i))return null;var a={};return Object.keys(i).forEach(function(s){var c;QZ((c=i)===null||c===void 0?void 0:c[s],s,n,r)&&(a[s]=i[s])}),a},qw=function e(t,n){if(t===n)return!0;var r=x.Children.count(t);if(r!==x.Children.count(n))return!1;if(r===0)return!0;if(r===1)return Qk(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=t[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!e(a,s))return!1}else if(!Qk(a,s))return!1}return!0},Qk=function(t,n){if(pt(t)&&pt(n))return!0;if(!pt(t)&&!pt(n)){var r=t.props||{},i=r.children,a=Yk(r,qZ),s=n.props||{},c=s.children,l=Yk(s,KZ);return i&&c?au(a,l)&&qw(i,c):!i&&!c?au(a,l):!1}return!1},e2=function(t,n){var r=[],i={};return lS(t).forEach(function(a,s){if(ZZ(a))r.push(a);else if(a){var c=bs(a.type),l=n[c]||{},u=l.handler,d=l.once;if(u&&(!d||!i[c])){var h=u(a,c,s);r.push(h),i[c]=!0}}}),r},eJ=function(t){var n=t&&t.type;return n&&Xk[n]?Xk[n]:null},tJ=function(t,n){return lS(n).indexOf(t)},nJ=["children","width","height","viewBox","className","style","title","desc"];function Kw(){return Kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kw.apply(this,arguments)}function rJ(e,t){if(e==null)return{};var n=iJ(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function iJ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Yw(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,a=e.className,s=e.style,c=e.title,l=e.desc,u=rJ(e,nJ),d=i||{width:n,height:r,x:0,y:0},h=ct("recharts-surface",a);return O.createElement("svg",Kw({},Xe(u,!0,"svg"),{className:h,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),O.createElement("title",null,c),O.createElement("desc",null,l),t)}var aJ=["children","className"];function Xw(){return Xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xw.apply(this,arguments)}function sJ(e,t){if(e==null)return{};var n=oJ(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oJ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Bt=O.forwardRef(function(e,t){var n=e.children,r=e.className,i=sJ(e,aJ),a=ct("recharts-layer",r);return O.createElement("g",Xw({className:a},Xe(i,!0),{ref:t}),n)}),ga=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function cJ(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}var lJ=cJ,uJ=lJ;function dJ(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:uJ(e,t,n)}var hJ=dJ,fJ="\\ud800-\\udfff",pJ="\\u0300-\\u036f",mJ="\\ufe20-\\ufe2f",gJ="\\u20d0-\\u20ff",vJ=pJ+mJ+gJ,yJ="\\ufe0e\\ufe0f",xJ="\\u200d",bJ=RegExp("["+xJ+fJ+vJ+yJ+"]");function wJ(e){return bJ.test(e)}var YD=wJ;function _J(e){return e.split("")}var jJ=_J,XD="\\ud800-\\udfff",SJ="\\u0300-\\u036f",EJ="\\ufe20-\\ufe2f",NJ="\\u20d0-\\u20ff",PJ=SJ+EJ+NJ,kJ="\\ufe0e\\ufe0f",CJ="["+XD+"]",Zw="["+PJ+"]",Jw="\\ud83c[\\udffb-\\udfff]",AJ="(?:"+Zw+"|"+Jw+")",ZD="[^"+XD+"]",JD="(?:\\ud83c[\\udde6-\\uddff]){2}",QD="[\\ud800-\\udbff][\\udc00-\\udfff]",TJ="\\u200d",eL=AJ+"?",tL="["+kJ+"]?",OJ="(?:"+TJ+"(?:"+[ZD,JD,QD].join("|")+")"+tL+eL+")*",RJ=tL+eL+OJ,$J="(?:"+[ZD+Zw+"?",Zw,JD,QD,CJ].join("|")+")",IJ=RegExp(Jw+"(?="+Jw+")|"+$J+RJ,"g");function MJ(e){return e.match(IJ)||[]}var DJ=MJ,LJ=jJ,BJ=YD,FJ=DJ;function zJ(e){return BJ(e)?FJ(e):LJ(e)}var UJ=zJ,HJ=hJ,VJ=YD,GJ=UJ,WJ=HD;function qJ(e){return function(t){t=WJ(t);var n=VJ(t)?GJ(t):void 0,r=n?n[0]:t.charAt(0),i=n?HJ(n,1).join(""):t.slice(1);return r[e]()+i}}var KJ=qJ,YJ=KJ,XJ=YJ("toUpperCase"),ZJ=XJ;const Uy=rn(ZJ);function ln(e){return function(){return e}}const nL=Math.cos,Ug=Math.sin,xa=Math.sqrt,Hg=Math.PI,Hy=2*Hg,Qw=Math.PI,e_=2*Qw,dc=1e-6,JJ=e_-dc;function rL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function QJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rL;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class eQ{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?rL:QJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,c=this._y1,l=r-t,u=i-n,d=s-t,h=c-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>dc)if(!(Math.abs(h*l-u*d)>dc)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-s,m=i-c,g=l*l+u*u,v=p*p+m*m,b=Math.sqrt(g),w=Math.sqrt(f),y=a*Math.tan((Qw-Math.acos((g+f-v)/(2*b*w)))/2),_=y/w,j=y/b;Math.abs(_-1)>dc&&this._append`L${t+_*d},${n+_*h}`,this._append`A${a},${a},0,0,${+(h*p>d*m)},${this._x1=t+j*l},${this._y1=n+j*u}`}}arc(t,n,r,i,a,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),l=r*Math.sin(i),u=t+c,d=n+l,h=1^s,f=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>dc||Math.abs(this._y1-d)>dc)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%e_+e_),f>JJ?this._append`A${r},${r},0,1,${h},${t-c},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>dc&&this._append`A${r},${r},0,${+(f>=Qw)},${h},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function uS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new eQ(t)}function dS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function iL(e){this._context=e}iL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Vy(e){return new iL(e)}function aL(e){return e[0]}function sL(e){return e[1]}function oL(e,t){var n=ln(!0),r=null,i=Vy,a=null,s=uS(c);e=typeof e=="function"?e:e===void 0?aL:ln(e),t=typeof t=="function"?t:t===void 0?sL:ln(t);function c(l){var u,d=(l=dS(l)).length,h,f=!1,p;for(r==null&&(a=i(p=s())),u=0;u<=d;++u)!(u<d&&n(h=l[u],u,l))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(h,u,l),+t(h,u,l));if(p)return a=null,p+""||null}return c.x=function(l){return arguments.length?(e=typeof l=="function"?l:ln(+l),c):e},c.y=function(l){return arguments.length?(t=typeof l=="function"?l:ln(+l),c):t},c.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ln(!!l),c):n},c.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),c):i},c.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),c):r},c}function Sm(e,t,n){var r=null,i=ln(!0),a=null,s=Vy,c=null,l=uS(u);e=typeof e=="function"?e:e===void 0?aL:ln(+e),t=typeof t=="function"?t:ln(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?sL:ln(+n);function u(h){var f,p,m,g=(h=dS(h)).length,v,b=!1,w,y=new Array(g),_=new Array(g);for(a==null&&(c=s(w=l())),f=0;f<=g;++f){if(!(f<g&&i(v=h[f],f,h))===b)if(b=!b)p=f,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),m=f-1;m>=p;--m)c.point(y[m],_[m]);c.lineEnd(),c.areaEnd()}b&&(y[f]=+e(v,f,h),_[f]=+t(v,f,h),c.point(r?+r(v,f,h):y[f],n?+n(v,f,h):_[f]))}if(w)return c=null,w+""||null}function d(){return oL().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:ln(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ln(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:ln(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:ln(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ln(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ln(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:ln(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(c=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=c=null:c=s(a=h),u):a},u}class cL{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function tQ(e){return new cL(e,!0)}function nQ(e){return new cL(e,!1)}const hS={draw(e,t){const n=xa(t/Hg);e.moveTo(n,0),e.arc(0,0,n,0,Hy)}},rQ={draw(e,t){const n=xa(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},lL=xa(1/3),iQ=lL*2,aQ={draw(e,t){const n=xa(t/iQ),r=n*lL;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},sQ={draw(e,t){const n=xa(t),r=-n/2;e.rect(r,r,n,n)}},oQ=.8908130915292852,uL=Ug(Hg/10)/Ug(7*Hg/10),cQ=Ug(Hy/10)*uL,lQ=-nL(Hy/10)*uL,uQ={draw(e,t){const n=xa(t*oQ),r=cQ*n,i=lQ*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const s=Hy*a/5,c=nL(s),l=Ug(s);e.lineTo(l*n,-c*n),e.lineTo(c*r-l*i,l*r+c*i)}e.closePath()}},x0=xa(3),dQ={draw(e,t){const n=-xa(t/(x0*3));e.moveTo(0,n*2),e.lineTo(-x0*n,-n),e.lineTo(x0*n,-n),e.closePath()}},Ei=-.5,Ni=xa(3)/2,t_=1/xa(12),hQ=(t_/2+1)*3,fQ={draw(e,t){const n=xa(t/hQ),r=n/2,i=n*t_,a=r,s=n*t_+n,c=-a,l=s;e.moveTo(r,i),e.lineTo(a,s),e.lineTo(c,l),e.lineTo(Ei*r-Ni*i,Ni*r+Ei*i),e.lineTo(Ei*a-Ni*s,Ni*a+Ei*s),e.lineTo(Ei*c-Ni*l,Ni*c+Ei*l),e.lineTo(Ei*r+Ni*i,Ei*i-Ni*r),e.lineTo(Ei*a+Ni*s,Ei*s-Ni*a),e.lineTo(Ei*c+Ni*l,Ei*l-Ni*c),e.closePath()}};function pQ(e,t){let n=null,r=uS(i);e=typeof e=="function"?e:ln(e||hS),t=typeof t=="function"?t:ln(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:ln(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:ln(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Vg(){}function Gg(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function dL(e){this._context=e}dL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Gg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Gg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mQ(e){return new dL(e)}function hL(e){this._context=e}hL.prototype={areaStart:Vg,areaEnd:Vg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Gg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gQ(e){return new hL(e)}function fL(e){this._context=e}fL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Gg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vQ(e){return new fL(e)}function pL(e){this._context=e}pL.prototype={areaStart:Vg,areaEnd:Vg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yQ(e){return new pL(e)}function t2(e){return e<0?-1:1}function n2(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),c=(a*i+s*r)/(r+i);return(t2(a)+t2(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(c))||0}function r2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function b0(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,c=(a-r)/3;e._context.bezierCurveTo(r+c,i+c*t,a-c,s-c*n,a,s)}function Wg(e){this._context=e}Wg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:b0(this,this._t0,r2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,b0(this,r2(this,n=n2(this,e,t)),n);break;default:b0(this,this._t0,n=n2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function mL(e){this._context=new gL(e)}(mL.prototype=Object.create(Wg.prototype)).point=function(e,t){Wg.prototype.point.call(this,t,e)};function gL(e){this._context=e}gL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function xQ(e){return new Wg(e)}function bQ(e){return new mL(e)}function vL(e){this._context=e}vL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=i2(e),i=i2(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function i2(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function wQ(e){return new vL(e)}function Gy(e,t){this._context=e,this._t=t}Gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function _Q(e){return new Gy(e,.5)}function jQ(e){return new Gy(e,0)}function SQ(e){return new Gy(e,1)}function ku(e,t){if((s=e.length)>1)for(var n=1,r,i,a=e[t[0]],s,c=a.length;n<s;++n)for(i=a,a=e[t[n]],r=0;r<c;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function n_(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function EQ(e,t){return e[t]}function NQ(e){const t=[];return t.key=e,t}function PQ(){var e=ln([]),t=n_,n=ku,r=EQ;function i(a){var s=Array.from(e.apply(this,arguments),NQ),c,l=s.length,u=-1,d;for(const h of a)for(c=0,++u;c<l;++c)(s[c][u]=[0,+r(h,s[c].key,u,a)]).data=h;for(c=0,d=dS(t(s));c<l;++c)s[d[c]].index=c;return n(s,d),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:ln(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:ln(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?n_:typeof a=="function"?a:ln(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??ku,i):n},i}function kQ(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=e[n][i][1]||0;if(s)for(n=0;n<r;++n)e[n][i][1]/=s}ku(e,t)}}function CQ(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var s=0,c=0;s<i;++s)c+=e[s][n][1]||0;r[n][1]+=r[n][0]=-c/2}ku(e,t)}}function AQ(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var c=0,l=0,u=0;c<s;++c){for(var d=e[t[c]],h=d[r][1]||0,f=d[r-1][1]||0,p=(h-f)/2,m=0;m<c;++m){var g=e[t[m]],v=g[r][1]||0,b=g[r-1][1]||0;p+=v-b}l+=h,u+=p*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,ku(e,t)}}function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}var TQ=["type","size","sizeType"];function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r_.apply(this,arguments)}function a2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function s2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a2(Object(n),!0).forEach(function(r){OQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OQ(e,t,n){return t=RQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RQ(e){var t=$Q(e,"string");return af(t)=="symbol"?t:t+""}function $Q(e,t){if(af(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IQ(e,t){if(e==null)return{};var n=MQ(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function MQ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var yL={symbolCircle:hS,symbolCross:rQ,symbolDiamond:aQ,symbolSquare:sQ,symbolStar:uQ,symbolTriangle:dQ,symbolWye:fQ},DQ=Math.PI/180,LQ=function(t){var n="symbol".concat(Uy(t));return yL[n]||hS},BQ=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*DQ;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},FQ=function(t,n){yL["symbol".concat(Uy(t))]=n},fS=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,s=t.sizeType,c=s===void 0?"area":s,l=IQ(t,TQ),u=s2(s2({},l),{},{type:r,size:a,sizeType:c}),d=function(){var v=LQ(r),b=pQ().type(v).size(BQ(a,c,r));return b()},h=u.className,f=u.cx,p=u.cy,m=Xe(u,!0);return f===+f&&p===+p&&a===+a?O.createElement("path",r_({},m,{className:ct("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(p,")"),d:d()})):null};fS.registerSymbol=FQ;function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}function i_(){return i_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i_.apply(this,arguments)}function o2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zQ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(n),!0).forEach(function(r){sf(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bL(r.key),r)}}function VQ(e,t,n){return t&&HQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GQ(e,t,n){return t=qg(t),WQ(e,xL()?Reflect.construct(t,n||[],qg(e).constructor):t.apply(e,n))}function WQ(e,t){if(t&&(Cu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qQ(e)}function qQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xL=function(){return!!e})()}function qg(e){return qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qg(e)}function KQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a_(e,t)}function a_(e,t){return a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},a_(e,t)}function sf(e,t,n){return t=bL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bL(e){var t=YQ(e,"string");return Cu(t)=="symbol"?t:t+""}function YQ(e,t){if(Cu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pi=32,pS=function(e){function t(){return UQ(this,t),GQ(this,t,arguments)}return KQ(t,e),VQ(t,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Pi/2,s=Pi/6,c=Pi/3,l=r.inactive?i:r.color;if(r.type==="plainline")return O.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Pi,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return O.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(a,`
            H`).concat(Pi,"M").concat(2*c,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return O.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Pi/8,"h").concat(Pi,"v").concat(Pi*3/4,"h").concat(-Pi,"z"),className:"recharts-legend-icon"});if(O.isValidElement(r.legendIcon)){var u=zQ({},r);return delete u.legendIcon,O.cloneElement(r.legendIcon,u)}return O.createElement(fS,{fill:l,cx:a,cy:a,size:Pi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,c=i.layout,l=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Pi,height:Pi},h={display:c==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,m){var g=p.formatter||l,v=ct(sf(sf({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var b=st(p.value)?null:p.value;ga(!st(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?u:p.color;return O.createElement("li",i_({className:v,style:h,key:"legend-item-".concat(m)},Kc(r.props,p,m)),O.createElement(Yw,{width:s,height:s,viewBox:d,style:f},r.renderIcon(p)),O.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},g?g(b,p,m):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var c={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return O.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])}(x.PureComponent);sf(pS,"displayName","Legend");sf(pS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var XQ=Cy;function ZQ(){this.__data__=new XQ,this.size=0}var JQ=ZQ;function QQ(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var eee=QQ;function tee(e){return this.__data__.get(e)}var nee=tee;function ree(e){return this.__data__.has(e)}var iee=ree,aee=Cy,see=tS,oee=nS,cee=200;function lee(e,t){var n=this.__data__;if(n instanceof aee){var r=n.__data__;if(!see||r.length<cee-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new oee(r)}return n.set(e,t),this.size=n.size,this}var uee=lee,dee=Cy,hee=JQ,fee=eee,pee=nee,mee=iee,gee=uee;function xd(e){var t=this.__data__=new dee(e);this.size=t.size}xd.prototype.clear=hee;xd.prototype.delete=fee;xd.prototype.get=pee;xd.prototype.has=mee;xd.prototype.set=gee;var wL=xd,vee="__lodash_hash_undefined__";function yee(e){return this.__data__.set(e,vee),this}var xee=yee;function bee(e){return this.__data__.has(e)}var wee=bee,_ee=nS,jee=xee,See=wee;function Kg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new _ee;++t<n;)this.add(e[t])}Kg.prototype.add=Kg.prototype.push=jee;Kg.prototype.has=See;var _L=Kg;function Eee(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jL=Eee;function Nee(e,t){return e.has(t)}var SL=Nee,Pee=_L,kee=jL,Cee=SL,Aee=1,Tee=2;function Oee(e,t,n,r,i,a){var s=n&Aee,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var h=-1,f=!0,p=n&Tee?new Pee:void 0;for(a.set(e,t),a.set(t,e);++h<c;){var m=e[h],g=t[h];if(r)var v=s?r(g,m,h,t,e,a):r(m,g,h,e,t,a);if(v!==void 0){if(v)continue;f=!1;break}if(p){if(!kee(t,function(b,w){if(!Cee(p,w)&&(m===b||i(m,b,n,r,a)))return p.push(w)})){f=!1;break}}else if(!(m===g||i(m,g,n,r,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var EL=Oee,Ree=Wa,$ee=Ree.Uint8Array,Iee=$ee;function Mee(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var Dee=Mee;function Lee(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var mS=Lee,c2=dp,l2=Iee,Bee=eS,Fee=EL,zee=Dee,Uee=mS,Hee=1,Vee=2,Gee="[object Boolean]",Wee="[object Date]",qee="[object Error]",Kee="[object Map]",Yee="[object Number]",Xee="[object RegExp]",Zee="[object Set]",Jee="[object String]",Qee="[object Symbol]",ete="[object ArrayBuffer]",tte="[object DataView]",u2=c2?c2.prototype:void 0,w0=u2?u2.valueOf:void 0;function nte(e,t,n,r,i,a,s){switch(n){case tte:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ete:return!(e.byteLength!=t.byteLength||!a(new l2(e),new l2(t)));case Gee:case Wee:case Yee:return Bee(+e,+t);case qee:return e.name==t.name&&e.message==t.message;case Xee:case Jee:return e==t+"";case Kee:var c=zee;case Zee:var l=r&Hee;if(c||(c=Uee),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;r|=Vee,s.set(e,t);var d=Fee(c(e),c(t),r,i,a,s);return s.delete(e),d;case Qee:if(w0)return w0.call(e)==w0.call(t)}return!1}var rte=nte;function ite(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var NL=ite,ate=NL,ste=Yr;function ote(e,t,n){var r=t(e);return ste(e)?r:ate(r,n(e))}var cte=ote;function lte(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[i++]=s)}return a}var ute=lte;function dte(){return[]}var hte=dte,fte=ute,pte=hte,mte=Object.prototype,gte=mte.propertyIsEnumerable,d2=Object.getOwnPropertySymbols,vte=d2?function(e){return e==null?[]:(e=Object(e),fte(d2(e),function(t){return gte.call(e,t)}))}:pte,yte=vte;function xte(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var bte=xte,wte=Ms,_te=Ds,jte="[object Arguments]";function Ste(e){return _te(e)&&wte(e)==jte}var Ete=Ste,h2=Ete,Nte=Ds,PL=Object.prototype,Pte=PL.hasOwnProperty,kte=PL.propertyIsEnumerable,Cte=h2(function(){return arguments}())?h2:function(e){return Nte(e)&&Pte.call(e,"callee")&&!kte.call(e,"callee")},gS=Cte,Yg={exports:{}};function Ate(){return!1}var Tte=Ate;Yg.exports;(function(e,t){var n=Wa,r=Tte,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,c=s?n.Buffer:void 0,l=c?c.isBuffer:void 0,u=l||r;e.exports=u})(Yg,Yg.exports);var kL=Yg.exports,Ote=9007199254740991,Rte=/^(?:0|[1-9]\d*)$/;function $te(e,t){var n=typeof e;return t=t??Ote,!!t&&(n=="number"||n!="symbol"&&Rte.test(e))&&e>-1&&e%1==0&&e<t}var vS=$te,Ite=9007199254740991;function Mte(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ite}var yS=Mte,Dte=Ms,Lte=yS,Bte=Ds,Fte="[object Arguments]",zte="[object Array]",Ute="[object Boolean]",Hte="[object Date]",Vte="[object Error]",Gte="[object Function]",Wte="[object Map]",qte="[object Number]",Kte="[object Object]",Yte="[object RegExp]",Xte="[object Set]",Zte="[object String]",Jte="[object WeakMap]",Qte="[object ArrayBuffer]",ene="[object DataView]",tne="[object Float32Array]",nne="[object Float64Array]",rne="[object Int8Array]",ine="[object Int16Array]",ane="[object Int32Array]",sne="[object Uint8Array]",one="[object Uint8ClampedArray]",cne="[object Uint16Array]",lne="[object Uint32Array]",pn={};pn[tne]=pn[nne]=pn[rne]=pn[ine]=pn[ane]=pn[sne]=pn[one]=pn[cne]=pn[lne]=!0;pn[Fte]=pn[zte]=pn[Qte]=pn[Ute]=pn[ene]=pn[Hte]=pn[Vte]=pn[Gte]=pn[Wte]=pn[qte]=pn[Kte]=pn[Yte]=pn[Xte]=pn[Zte]=pn[Jte]=!1;function une(e){return Bte(e)&&Lte(e.length)&&!!pn[Dte(e)]}var dne=une;function hne(e){return function(t){return e(t)}}var CL=hne,Xg={exports:{}};Xg.exports;(function(e,t){var n=DD,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,c=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=c})(Xg,Xg.exports);var fne=Xg.exports,pne=dne,mne=CL,f2=fne,p2=f2&&f2.isTypedArray,gne=p2?mne(p2):pne,AL=gne,vne=bte,yne=gS,xne=Yr,bne=kL,wne=vS,_ne=AL,jne=Object.prototype,Sne=jne.hasOwnProperty;function Ene(e,t){var n=xne(e),r=!n&&yne(e),i=!n&&!r&&bne(e),a=!n&&!r&&!i&&_ne(e),s=n||r||i||a,c=s?vne(e.length,String):[],l=c.length;for(var u in e)(t||Sne.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||wne(u,l)))&&c.push(u);return c}var Nne=Ene,Pne=Object.prototype;function kne(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Pne;return e===n}var Cne=kne;function Ane(e,t){return function(n){return e(t(n))}}var TL=Ane,Tne=TL,One=Tne(Object.keys,Object),Rne=One,$ne=Cne,Ine=Rne,Mne=Object.prototype,Dne=Mne.hasOwnProperty;function Lne(e){if(!$ne(e))return Ine(e);var t=[];for(var n in Object(e))Dne.call(e,n)&&n!="constructor"&&t.push(n);return t}var Bne=Lne,Fne=Qj,zne=yS;function Une(e){return e!=null&&zne(e.length)&&!Fne(e)}var fp=Une,Hne=Nne,Vne=Bne,Gne=fp;function Wne(e){return Gne(e)?Hne(e):Vne(e)}var Wy=Wne,qne=cte,Kne=yte,Yne=Wy;function Xne(e){return qne(e,Yne,Kne)}var Zne=Xne,m2=Zne,Jne=1,Qne=Object.prototype,ere=Qne.hasOwnProperty;function tre(e,t,n,r,i,a){var s=n&Jne,c=m2(e),l=c.length,u=m2(t),d=u.length;if(l!=d&&!s)return!1;for(var h=l;h--;){var f=c[h];if(!(s?f in t:ere.call(t,f)))return!1}var p=a.get(e),m=a.get(t);if(p&&m)return p==t&&m==e;var g=!0;a.set(e,t),a.set(t,e);for(var v=s;++h<l;){f=c[h];var b=e[f],w=t[f];if(r)var y=s?r(w,b,f,t,e,a):r(b,w,f,e,t,a);if(!(y===void 0?b===w||i(b,w,n,r,a):y)){g=!1;break}v||(v=f=="constructor")}if(g&&!v){var _=e.constructor,j=t.constructor;_!=j&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(g=!1)}return a.delete(e),a.delete(t),g}var nre=tre,rre=il,ire=Wa,are=rre(ire,"DataView"),sre=are,ore=il,cre=Wa,lre=ore(cre,"Promise"),ure=lre,dre=il,hre=Wa,fre=dre(hre,"Set"),OL=fre,pre=il,mre=Wa,gre=pre(mre,"WeakMap"),vre=gre,s_=sre,o_=tS,c_=ure,l_=OL,u_=vre,RL=Ms,bd=BD,g2="[object Map]",yre="[object Object]",v2="[object Promise]",y2="[object Set]",x2="[object WeakMap]",b2="[object DataView]",xre=bd(s_),bre=bd(o_),wre=bd(c_),_re=bd(l_),jre=bd(u_),hc=RL;(s_&&hc(new s_(new ArrayBuffer(1)))!=b2||o_&&hc(new o_)!=g2||c_&&hc(c_.resolve())!=v2||l_&&hc(new l_)!=y2||u_&&hc(new u_)!=x2)&&(hc=function(e){var t=RL(e),n=t==yre?e.constructor:void 0,r=n?bd(n):"";if(r)switch(r){case xre:return b2;case bre:return g2;case wre:return v2;case _re:return y2;case jre:return x2}return t});var Sre=hc,_0=wL,Ere=EL,Nre=rte,Pre=nre,w2=Sre,_2=Yr,j2=kL,kre=AL,Cre=1,S2="[object Arguments]",E2="[object Array]",Em="[object Object]",Are=Object.prototype,N2=Are.hasOwnProperty;function Tre(e,t,n,r,i,a){var s=_2(e),c=_2(t),l=s?E2:w2(e),u=c?E2:w2(t);l=l==S2?Em:l,u=u==S2?Em:u;var d=l==Em,h=u==Em,f=l==u;if(f&&j2(e)){if(!j2(t))return!1;s=!0,d=!1}if(f&&!d)return a||(a=new _0),s||kre(e)?Ere(e,t,n,r,i,a):Nre(e,t,l,n,r,i,a);if(!(n&Cre)){var p=d&&N2.call(e,"__wrapped__"),m=h&&N2.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,v=m?t.value():t;return a||(a=new _0),i(g,v,n,r,a)}}return f?(a||(a=new _0),Pre(e,t,n,r,i,a)):!1}var Ore=Tre,Rre=Ore,P2=Ds;function $L(e,t,n,r,i){return e===t?!0:e==null||t==null||!P2(e)&&!P2(t)?e!==e&&t!==t:Rre(e,t,n,r,$L,i)}var xS=$L,$re=wL,Ire=xS,Mre=1,Dre=2;function Lre(e,t,n,r){var i=n.length,a=i,s=!r;if(e==null)return!a;for(e=Object(e);i--;){var c=n[i];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<a;){c=n[i];var l=c[0],u=e[l],d=c[1];if(s&&c[2]){if(u===void 0&&!(l in e))return!1}else{var h=new $re;if(r)var f=r(u,d,l,e,t,h);if(!(f===void 0?Ire(d,u,Mre|Dre,r,h):f))return!1}}return!0}var Bre=Lre,Fre=Mo;function zre(e){return e===e&&!Fre(e)}var IL=zre,Ure=IL,Hre=Wy;function Vre(e){for(var t=Hre(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ure(i)]}return t}var Gre=Vre;function Wre(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var ML=Wre,qre=Bre,Kre=Gre,Yre=ML;function Xre(e){var t=Kre(e);return t.length==1&&t[0][2]?Yre(t[0][0],t[0][1]):function(n){return n===e||qre(n,e,t)}}var Zre=Xre;function Jre(e,t){return e!=null&&t in Object(e)}var Qre=Jre,eie=VD,tie=gS,nie=Yr,rie=vS,iie=yS,aie=Ty;function sie(e,t,n){t=eie(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var s=aie(t[r]);if(!(a=e!=null&&n(e,s)))break;e=e[s]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&iie(i)&&rie(s,i)&&(nie(e)||tie(e)))}var oie=sie,cie=Qre,lie=oie;function uie(e,t){return e!=null&&lie(e,t,cie)}var die=uie,hie=xS,fie=GD,pie=die,mie=Jj,gie=IL,vie=ML,yie=Ty,xie=1,bie=2;function wie(e,t){return mie(e)&&gie(t)?vie(yie(e),t):function(n){var r=fie(n,e);return r===void 0&&r===t?pie(n,e):hie(t,r,xie|bie)}}var _ie=wie;function jie(e){return e}var wd=jie;function Sie(e){return function(t){return t==null?void 0:t[e]}}var Eie=Sie,Nie=aS;function Pie(e){return function(t){return Nie(t,e)}}var kie=Pie,Cie=Eie,Aie=kie,Tie=Jj,Oie=Ty;function Rie(e){return Tie(e)?Cie(Oie(e)):Aie(e)}var $ie=Rie,Iie=Zre,Mie=_ie,Die=wd,Lie=Yr,Bie=$ie;function Fie(e){return typeof e=="function"?e:e==null?Die:typeof e=="object"?Lie(e)?Mie(e[0],e[1]):Iie(e):Bie(e)}var qa=Fie;function zie(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var DL=zie;function Uie(e){return e!==e}var Hie=Uie;function Vie(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var Gie=Vie,Wie=DL,qie=Hie,Kie=Gie;function Yie(e,t,n){return t===t?Kie(e,t,n):Wie(e,qie,n)}var Xie=Yie,Zie=Xie;function Jie(e,t){var n=e==null?0:e.length;return!!n&&Zie(e,t,0)>-1}var Qie=Jie;function eae(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var tae=eae;function nae(){}var rae=nae,j0=OL,iae=rae,aae=mS,sae=1/0,oae=j0&&1/aae(new j0([,-0]))[1]==sae?function(e){return new j0(e)}:iae,cae=oae,lae=_L,uae=Qie,dae=tae,hae=SL,fae=cae,pae=mS,mae=200;function gae(e,t,n){var r=-1,i=uae,a=e.length,s=!0,c=[],l=c;if(n)s=!1,i=dae;else if(a>=mae){var u=t?null:fae(e);if(u)return pae(u);s=!1,i=hae,l=new lae}else l=t?[]:c;e:for(;++r<a;){var d=e[r],h=t?t(d):d;if(d=n||d!==0?d:0,s&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue e;t&&l.push(h),c.push(d)}else i(l,h,n)||(l!==c&&l.push(h),c.push(d))}return c}var vae=gae,yae=qa,xae=vae;function bae(e,t){return e&&e.length?xae(e,yae(t)):[]}var wae=bae;const k2=rn(wae);function LL(e,t,n){return t===!0?k2(e,n):st(t)?k2(e,t):e}function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}var _ae=["ref"];function C2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ss(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C2(Object(n),!0).forEach(function(r){qy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FL(r.key),r)}}function Sae(e,t,n){return t&&A2(e.prototype,t),n&&A2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eae(e,t,n){return t=Zg(t),Nae(e,BL()?Reflect.construct(t,n||[],Zg(e).constructor):t.apply(e,n))}function Nae(e,t){if(t&&(Au(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pae(e)}function Pae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BL=function(){return!!e})()}function Zg(e){return Zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zg(e)}function kae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d_(e,t)}function d_(e,t){return d_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},d_(e,t)}function qy(e,t,n){return t=FL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FL(e){var t=Cae(e,"string");return Au(t)=="symbol"?t:t+""}function Cae(e,t){if(Au(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Aae(e,t){if(e==null)return{};var n=Tae(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Tae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Oae(e){return e.value}function Rae(e,t){if(O.isValidElement(e))return O.cloneElement(e,t);if(typeof e=="function")return O.createElement(e,t);t.ref;var n=Aae(t,_ae);return O.createElement(pS,n)}var T2=1,su=function(e){function t(){var n;jae(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Eae(this,t,[].concat(i)),qy(n,"lastBoundingBox",{width:-1,height:-1}),n}return kae(t,e),Sae(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>T2||Math.abs(i.height-this.lastBoundingBox.height)>T2)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ss({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,c=i.verticalAlign,l=i.margin,u=i.chartWidth,d=i.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();h={left:((u||0)-p.width)/2}}else h=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(c==="middle"){var m=this.getBBoxSnapshot();f={top:((d||0)-m.height)/2}}else f=c==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ss(ss({},h),f)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,c=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=ss(ss({position:"absolute",width:s||"auto",height:c||"auto"},this.getDefaultPosition(l)),l);return O.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(p){r.wrapperNode=p}},Rae(a,ss(ss({},this.props),{},{payload:LL(d,u,Oae)})))}}],[{key:"getWithHeight",value:function(r,i){var a=ss(ss({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&ve(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(x.PureComponent);qy(su,"displayName","Legend");qy(su,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var O2=dp,$ae=gS,Iae=Yr,R2=O2?O2.isConcatSpreadable:void 0;function Mae(e){return Iae(e)||$ae(e)||!!(R2&&e&&e[R2])}var Dae=Mae,Lae=NL,Bae=Dae;function zL(e,t,n,r,i){var a=-1,s=e.length;for(n||(n=Bae),i||(i=[]);++a<s;){var c=e[a];t>0&&n(c)?t>1?zL(c,t-1,n,r,i):Lae(i,c):r||(i[i.length]=c)}return i}var UL=zL;function Fae(e){return function(t,n,r){for(var i=-1,a=Object(t),s=r(t),c=s.length;c--;){var l=s[e?c:++i];if(n(a[l],l,a)===!1)break}return t}}var zae=Fae,Uae=zae,Hae=Uae(),Vae=Hae,Gae=Vae,Wae=Wy;function qae(e,t){return e&&Gae(e,t,Wae)}var HL=qae,Kae=fp;function Yae(e,t){return function(n,r){if(n==null)return n;if(!Kae(n))return e(n,r);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var Xae=Yae,Zae=HL,Jae=Xae,Qae=Jae(Zae),bS=Qae,ese=bS,tse=fp;function nse(e,t){var n=-1,r=tse(e)?Array(e.length):[];return ese(e,function(i,a,s){r[++n]=t(i,a,s)}),r}var VL=nse;function rse(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var ise=rse,$2=fd;function ase(e,t){if(e!==t){var n=e!==void 0,r=e===null,i=e===e,a=$2(e),s=t!==void 0,c=t===null,l=t===t,u=$2(t);if(!c&&!u&&!a&&e>t||a&&s&&l&&!c&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||c&&n&&i||!s&&i||!l)return-1}return 0}var sse=ase,ose=sse;function cse(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,s=i.length,c=n.length;++r<s;){var l=ose(i[r],a[r]);if(l){if(r>=c)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return e.index-t.index}var lse=cse,S0=iS,use=aS,dse=qa,hse=VL,fse=ise,pse=CL,mse=lse,gse=wd,vse=Yr;function yse(e,t,n){t.length?t=S0(t,function(a){return vse(a)?function(s){return use(s,a.length===1?a[0]:a)}:a}):t=[gse];var r=-1;t=S0(t,pse(dse));var i=hse(e,function(a,s,c){var l=S0(t,function(u){return u(a)});return{criteria:l,index:++r,value:a}});return fse(i,function(a,s){return mse(a,s,n)})}var xse=yse;function bse(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var wse=bse,_se=wse,I2=Math.max;function jse(e,t,n){return t=I2(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=I2(r.length-t,0),s=Array(a);++i<a;)s[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(s),_se(e,this,c)}}var Sse=jse;function Ese(e){return function(){return e}}var Nse=Ese,Pse=il,kse=function(){try{var e=Pse(Object,"defineProperty");return e({},"",{}),e}catch{}}(),GL=kse,Cse=Nse,M2=GL,Ase=wd,Tse=M2?function(e,t){return M2(e,"toString",{configurable:!0,enumerable:!1,value:Cse(t),writable:!0})}:Ase,Ose=Tse,Rse=800,$se=16,Ise=Date.now;function Mse(e){var t=0,n=0;return function(){var r=Ise(),i=$se-(r-n);if(n=r,i>0){if(++t>=Rse)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Dse=Mse,Lse=Ose,Bse=Dse,Fse=Bse(Lse),zse=Fse,Use=wd,Hse=Sse,Vse=zse;function Gse(e,t){return Vse(Hse(e,t,Use),e+"")}var Wse=Gse,qse=eS,Kse=fp,Yse=vS,Xse=Mo;function Zse(e,t,n){if(!Xse(n))return!1;var r=typeof t;return(r=="number"?Kse(n)&&Yse(t,n.length):r=="string"&&t in n)?qse(n[t],e):!1}var Ky=Zse,Jse=UL,Qse=xse,eoe=Wse,D2=Ky,toe=eoe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&D2(e,t[0],t[1])?t=[]:n>2&&D2(t[0],t[1],t[2])&&(t=[t[0]]),Qse(e,Jse(t,1),[])}),noe=toe;const wS=rn(noe);function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function h_(){return h_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h_.apply(this,arguments)}function roe(e,t){return ooe(e)||soe(e,t)||aoe(e,t)||ioe()}function ioe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aoe(e,t){if(e){if(typeof e=="string")return L2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L2(e,t)}}function L2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function soe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function ooe(e){if(Array.isArray(e))return e}function B2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function E0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(n),!0).forEach(function(r){coe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function coe(e,t,n){return t=loe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function loe(e){var t=uoe(e,"string");return of(t)=="symbol"?t:t+""}function uoe(e,t){if(of(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function doe(e){return Array.isArray(e)&&ir(e[0])&&ir(e[1])?e.join(" ~ "):e}var hoe=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,s=t.itemStyle,c=s===void 0?{}:s,l=t.labelStyle,u=l===void 0?{}:l,d=t.payload,h=t.formatter,f=t.itemSorter,p=t.wrapperClassName,m=t.labelClassName,g=t.label,v=t.labelFormatter,b=t.accessibilityLayer,w=b===void 0?!1:b,y=function(){if(d&&d.length){var R={padding:0,margin:0},L=(f?wS(d,f):d).map(function(B,G){if(B.type==="none")return null;var U=E0({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},c),K=B.formatter||h||doe,te=B.value,W=B.name,fe=te,be=W;if(K&&fe!=null&&be!=null){var ne=K(te,W,B,G,d);if(Array.isArray(ne)){var ce=roe(ne,2);fe=ce[0],be=ce[1]}else fe=ne}return O.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:U},ir(be)?O.createElement("span",{className:"recharts-tooltip-item-name"},be):null,ir(be)?O.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,O.createElement("span",{className:"recharts-tooltip-item-value"},fe),O.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return O.createElement("ul",{className:"recharts-tooltip-item-list",style:R},L)}return null},_=E0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),j=E0({margin:0},u),S=!pt(g),E=S?g:"",P=ct("recharts-default-tooltip",p),k=ct("recharts-tooltip-label",m);S&&v&&d!==void 0&&d!==null&&(E=v(g,d));var T=w?{role:"status","aria-live":"assertive"}:{};return O.createElement("div",h_({className:P,style:_},T),O.createElement("p",{className:k,style:j},O.isValidElement(E)?E:"".concat(E)),y())};function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function Nm(e,t,n){return t=foe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function foe(e){var t=poe(e,"string");return cf(t)=="symbol"?t:t+""}function poe(e,t){if(cf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jd="recharts-tooltip-wrapper",moe={visibility:"hidden"};function goe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return ct(Jd,Nm(Nm(Nm(Nm({},"".concat(Jd,"-right"),ve(n)&&t&&ve(t.x)&&n>=t.x),"".concat(Jd,"-left"),ve(n)&&t&&ve(t.x)&&n<t.x),"".concat(Jd,"-bottom"),ve(r)&&t&&ve(t.y)&&r>=t.y),"".concat(Jd,"-top"),ve(r)&&t&&ve(t.y)&&r<t.y))}function F2(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,c=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(a&&ve(a[r]))return a[r];var d=n[r]-c-i,h=n[r]+i;if(t[r])return s[r]?d:h;if(s[r]){var f=d,p=l[r];return f<p?Math.max(h,l[r]):Math.max(d,l[r])}var m=h+c,g=l[r]+u;return m>g?Math.max(d,l[r]):Math.max(h,l[r])}function voe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function yoe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,a=e.reverseDirection,s=e.tooltipBox,c=e.useTranslate3d,l=e.viewBox,u,d,h;return s.height>0&&s.width>0&&n?(d=F2({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),h=F2({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=voe({translateX:d,translateY:h,useTranslate3d:c})):u=moe,{cssProperties:u,cssClasses:goe({translateX:d,translateY:h,coordinate:n})}}function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}function z2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function U2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z2(Object(n),!0).forEach(function(r){p_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function boe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qL(r.key),r)}}function woe(e,t,n){return t&&boe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _oe(e,t,n){return t=Jg(t),joe(e,WL()?Reflect.construct(t,n||[],Jg(e).constructor):t.apply(e,n))}function joe(e,t){if(t&&(Tu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Soe(e)}function Soe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WL=function(){return!!e})()}function Jg(e){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jg(e)}function Eoe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f_(e,t)}function f_(e,t){return f_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f_(e,t)}function p_(e,t,n){return t=qL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qL(e){var t=Noe(e,"string");return Tu(t)=="symbol"?t:t+""}function Noe(e,t){if(Tu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var H2=1,Poe=function(e){function t(){var n;xoe(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=_oe(this,t,[].concat(i)),p_(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),p_(n,"handleKeyDown",function(s){if(s.key==="Escape"){var c,l,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&c!==void 0?c:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return Eoe(t,e),woe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>H2||Math.abs(r.height-this.state.lastBoundingBox.height)>H2)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,l=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,p=i.offset,m=i.position,g=i.reverseDirection,v=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,y=yoe({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:p,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),_=y.cssClasses,j=y.cssProperties,S=U2(U2({transition:f&&a?"transform ".concat(c,"ms ").concat(l):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},w);return O.createElement("div",{tabIndex:-1,className:_,style:S,ref:function(P){r.wrapperNode=P}},u)}}])}(x.PureComponent),koe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},al={isSsr:koe()};function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}function V2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function G2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(n),!0).forEach(function(r){_S(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Coe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aoe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YL(r.key),r)}}function Toe(e,t,n){return t&&Aoe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ooe(e,t,n){return t=Qg(t),Roe(e,KL()?Reflect.construct(t,n||[],Qg(e).constructor):t.apply(e,n))}function Roe(e,t){if(t&&(Ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $oe(e)}function $oe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KL=function(){return!!e})()}function Qg(e){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(e)}function Ioe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m_(e,t)}function m_(e,t){return m_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},m_(e,t)}function _S(e,t,n){return t=YL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YL(e){var t=Moe(e,"string");return Ou(t)=="symbol"?t:t+""}function Moe(e,t){if(Ou(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ou(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Doe(e){return e.dataKey}function Loe(e,t){return O.isValidElement(e)?O.cloneElement(e,t):typeof e=="function"?O.createElement(e,t):O.createElement(hoe,t)}var li=function(e){function t(){return Coe(this,t),Ooe(this,t,arguments)}return Ioe(t,e),Toe(t,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,l=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,f=i.isAnimationActive,p=i.offset,m=i.payload,g=i.payloadUniqBy,v=i.position,b=i.reverseDirection,w=i.useTranslate3d,y=i.viewBox,_=i.wrapperStyle,j=m??[];h&&j.length&&(j=LL(m.filter(function(E){return E.value!=null&&(E.hide!==!0||r.props.includeHidden)}),g,Doe));var S=j.length>0;return O.createElement(Poe,{allowEscapeViewBox:s,animationDuration:c,animationEasing:l,isAnimationActive:f,active:a,coordinate:d,hasPayload:S,offset:p,position:v,reverseDirection:b,useTranslate3d:w,viewBox:y,wrapperStyle:_},Loe(u,G2(G2({},this.props),{},{payload:j})))}}])}(x.PureComponent);_S(li,"displayName","Tooltip");_S(li,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!al.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Boe=Wa,Foe=function(){return Boe.Date.now()},zoe=Foe,Uoe=/\s/;function Hoe(e){for(var t=e.length;t--&&Uoe.test(e.charAt(t)););return t}var Voe=Hoe,Goe=Voe,Woe=/^\s+/;function qoe(e){return e&&e.slice(0,Goe(e)+1).replace(Woe,"")}var Koe=qoe,Yoe=Koe,W2=Mo,Xoe=fd,q2=NaN,Zoe=/^[-+]0x[0-9a-f]+$/i,Joe=/^0b[01]+$/i,Qoe=/^0o[0-7]+$/i,ece=parseInt;function tce(e){if(typeof e=="number")return e;if(Xoe(e))return q2;if(W2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=W2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Yoe(e);var n=Joe.test(e);return n||Qoe.test(e)?ece(e.slice(2),n?2:8):Zoe.test(e)?q2:+e}var XL=tce,nce=Mo,N0=zoe,K2=XL,rce="Expected a function",ice=Math.max,ace=Math.min;function sce(e,t,n){var r,i,a,s,c,l,u=0,d=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(rce);t=K2(t)||0,nce(n)&&(d=!!n.leading,h="maxWait"in n,a=h?ice(K2(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f);function p(S){var E=r,P=i;return r=i=void 0,u=S,s=e.apply(P,E),s}function m(S){return u=S,c=setTimeout(b,t),d?p(S):s}function g(S){var E=S-l,P=S-u,k=t-E;return h?ace(k,a-P):k}function v(S){var E=S-l,P=S-u;return l===void 0||E>=t||E<0||h&&P>=a}function b(){var S=N0();if(v(S))return w(S);c=setTimeout(b,g(S))}function w(S){return c=void 0,f&&r?p(S):(r=i=void 0,s)}function y(){c!==void 0&&clearTimeout(c),u=0,r=l=i=c=void 0}function _(){return c===void 0?s:w(N0())}function j(){var S=N0(),E=v(S);if(r=arguments,i=this,l=S,E){if(c===void 0)return m(l);if(h)return clearTimeout(c),c=setTimeout(b,t),p(l)}return c===void 0&&(c=setTimeout(b,t)),s}return j.cancel=y,j.flush=_,j}var oce=sce,cce=oce,lce=Mo,uce="Expected a function";function dce(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(uce);return lce(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),cce(e,t,{leading:r,maxWait:t,trailing:i})}var hce=dce;const ZL=rn(hce);function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function Y2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(n),!0).forEach(function(r){fce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fce(e,t,n){return t=pce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pce(e){var t=mce(e,"string");return lf(t)=="symbol"?t:t+""}function mce(e,t){if(lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gce(e,t){return bce(e)||xce(e,t)||yce(e,t)||vce()}function vce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yce(e,t){if(e){if(typeof e=="string")return X2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X2(e,t)}}function X2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function bce(e){if(Array.isArray(e))return e}var km=x.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=e.width,s=a===void 0?"100%":a,c=e.height,l=c===void 0?"100%":c,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,f=e.maxHeight,p=e.children,m=e.debounce,g=m===void 0?0:m,v=e.id,b=e.className,w=e.onResize,y=e.style,_=y===void 0?{}:y,j=x.useRef(null),S=x.useRef();S.current=w,x.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var E=x.useState({containerWidth:i.width,containerHeight:i.height}),P=gce(E,2),k=P[0],T=P[1],A=x.useCallback(function(L,B){T(function(G){var U=Math.round(L),K=Math.round(B);return G.containerWidth===U&&G.containerHeight===K?G:{containerWidth:U,containerHeight:K}})},[]);x.useEffect(function(){var L=function(W){var fe,be=W[0].contentRect,ne=be.width,ce=be.height;A(ne,ce),(fe=S.current)===null||fe===void 0||fe.call(S,ne,ce)};g>0&&(L=ZL(L,g,{trailing:!0,leading:!1}));var B=new ResizeObserver(L),G=j.current.getBoundingClientRect(),U=G.width,K=G.height;return A(U,K),B.observe(j.current),function(){B.disconnect()}},[A,g]);var R=x.useMemo(function(){var L=k.containerWidth,B=k.containerHeight;if(L<0||B<0)return null;ga(jc(s)||jc(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),ga(!n||n>0,"The aspect(%s) must be greater than zero.",n);var G=jc(s)?L:s,U=jc(l)?B:l;n&&n>0&&(G?U=G/n:U&&(G=U*n),f&&U>f&&(U=f)),ga(G>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,U,s,l,d,h,n);var K=!Array.isArray(p)&&bs(p.type).endsWith("Chart");return O.Children.map(p,function(te){return O.isValidElement(te)?x.cloneElement(te,Pm({width:G,height:U},K?{style:Pm({height:"100%",width:"100%",maxHeight:U,maxWidth:G},te.props.style)}:{})):te})},[n,p,l,f,h,d,k,s]);return O.createElement("div",{id:v?"".concat(v):void 0,className:ct("recharts-responsive-container",b),style:Pm(Pm({},_),{},{width:s,height:l,minWidth:d,minHeight:h,maxHeight:f}),ref:j},R)}),Yy=function(t){return null};Yy.displayName="Cell";function uf(e){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}function Z2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function g_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z2(Object(n),!0).forEach(function(r){wce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wce(e,t,n){return t=_ce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ce(e){var t=jce(e,"string");return uf(t)=="symbol"?t:t+""}function jce(e,t){if(uf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kl={widthCache:{},cacheCount:0},Sce=2e3,Ece={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},J2="recharts_measurement_span";function Nce(e){var t=g_({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Rh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||al.isSsr)return{width:0,height:0};var r=Nce(n),i=JSON.stringify({text:t,copyStyle:r});if(kl.widthCache[i])return kl.widthCache[i];try{var a=document.getElementById(J2);a||(a=document.createElement("span"),a.setAttribute("id",J2),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=g_(g_({},Ece),r);Object.assign(a.style,s),a.textContent="".concat(t);var c=a.getBoundingClientRect(),l={width:c.width,height:c.height};return kl.widthCache[i]=l,++kl.cacheCount>Sce&&(kl.cacheCount=0,kl.widthCache={}),l}catch{return{width:0,height:0}}},Pce=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function df(e){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(e)}function ev(e,t){return Tce(e)||Ace(e,t)||Cce(e,t)||kce()}function kce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cce(e,t){if(e){if(typeof e=="string")return Q2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q2(e,t)}}function Q2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ace(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function Tce(e){if(Array.isArray(e))return e}function Oce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$ce(r.key),r)}}function Rce(e,t,n){return t&&eC(e.prototype,t),n&&eC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ce(e){var t=Ice(e,"string");return df(t)=="symbol"?t:t+""}function Ice(e,t){if(df(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var tC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Mce=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Dce=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,JL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Lce=Object.keys(JL),Gl="NaN";function Bce(e,t){return e*JL[t]}var Cm=function(){function e(t,n){Oce(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Mce.test(n)&&(this.num=NaN,this.unit=""),Lce.includes(n)&&(this.num=Bce(t,n),this.unit="px")}return Rce(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Dce.exec(n))!==null&&r!==void 0?r:[],a=ev(i,3),s=a[1],c=a[2];return new e(parseFloat(s),c??"")}}])}();function QL(e){if(e.includes(Gl))return Gl;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=tC.exec(t))!==null&&n!==void 0?n:[],i=ev(r,4),a=i[1],s=i[2],c=i[3],l=Cm.parse(a??""),u=Cm.parse(c??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Gl;t=t.replace(tC,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,f=(h=nC.exec(t))!==null&&h!==void 0?h:[],p=ev(f,4),m=p[1],g=p[2],v=p[3],b=Cm.parse(m??""),w=Cm.parse(v??""),y=g==="+"?b.add(w):b.subtract(w);if(y.isNaN())return Gl;t=t.replace(nC,y.toString())}return t}var rC=/\(([^()]*)\)/;function Fce(e){for(var t=e;t.includes("(");){var n=rC.exec(t),r=ev(n,2),i=r[1];t=t.replace(rC,QL(i))}return t}function zce(e){var t=e.replace(/\s+/g,"");return t=Fce(t),t=QL(t),t}function Uce(e){try{return zce(e)}catch{return Gl}}function P0(e){var t=Uce(e.slice(5,-1));return t===Gl?"":t}var Hce=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Vce=["dx","dy","angle","className","breakAll"];function v_(){return v_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v_.apply(this,arguments)}function iC(e,t){if(e==null)return{};var n=Gce(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gce(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function aC(e,t){return Yce(e)||Kce(e,t)||qce(e,t)||Wce()}function Wce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qce(e,t){if(e){if(typeof e=="string")return sC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sC(e,t)}}function sC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function Yce(e){if(Array.isArray(e))return e}var e5=/[ \f\n\r\t\v\u2028\u2029]+/,t5=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var a=[];pt(n)||(r?a=n.toString().split(""):a=n.toString().split(e5));var s=a.map(function(l){return{word:l,width:Rh(l,i).width}}),c=r?0:Rh("",i).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},Xce=function(t,n,r,i,a){var s=t.maxLines,c=t.children,l=t.style,u=t.breakAll,d=ve(s),h=c,f=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(U,K){var te=K.word,W=K.width,fe=U[U.length-1];if(fe&&(i==null||a||fe.width+W+r<Number(i)))fe.words.push(te),fe.width+=W+r;else{var be={words:[te],width:W};U.push(be)}return U},[])},p=f(n),m=function(G){return G.reduce(function(U,K){return U.width>K.width?U:K})};if(!d)return p;for(var g="",v=function(G){var U=h.slice(0,G),K=t5({breakAll:u,style:l,children:U+g}).wordsWithComputedWidth,te=f(K),W=te.length>s||m(te).width>Number(i);return[W,te]},b=0,w=h.length-1,y=0,_;b<=w&&y<=h.length-1;){var j=Math.floor((b+w)/2),S=j-1,E=v(S),P=aC(E,2),k=P[0],T=P[1],A=v(j),R=aC(A,1),L=R[0];if(!k&&!L&&(b=j+1),k&&L&&(w=j-1),!k&&L){_=T;break}y++}return _||p},oC=function(t){var n=pt(t)?[]:t.toString().split(e5);return[{words:n}]},Zce=function(t){var n=t.width,r=t.scaleToFit,i=t.children,a=t.style,s=t.breakAll,c=t.maxLines;if((n||r)&&!al.isSsr){var l,u,d=t5({breakAll:s,children:i,style:a});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;l=h,u=f}else return oC(i);return Xce({breakAll:s,children:i,maxLines:c,style:a},l,u,n,r)}return oC(i)},cC="#808080",Yc=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,s=t.lineHeight,c=s===void 0?"1em":s,l=t.capHeight,u=l===void 0?"0.71em":l,d=t.scaleToFit,h=d===void 0?!1:d,f=t.textAnchor,p=f===void 0?"start":f,m=t.verticalAnchor,g=m===void 0?"end":m,v=t.fill,b=v===void 0?cC:v,w=iC(t,Hce),y=x.useMemo(function(){return Zce({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:h,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,h,w.style,w.width]),_=w.dx,j=w.dy,S=w.angle,E=w.className,P=w.breakAll,k=iC(w,Vce);if(!ir(r)||!ir(a))return null;var T=r+(ve(_)?_:0),A=a+(ve(j)?j:0),R;switch(g){case"start":R=P0("calc(".concat(u,")"));break;case"middle":R=P0("calc(".concat((y.length-1)/2," * -").concat(c," + (").concat(u," / 2))"));break;default:R=P0("calc(".concat(y.length-1," * -").concat(c,")"));break}var L=[];if(h){var B=y[0].width,G=w.width;L.push("scale(".concat((ve(G)?G/B:1)/B,")"))}return S&&L.push("rotate(".concat(S,", ").concat(T,", ").concat(A,")")),L.length&&(k.transform=L.join(" ")),O.createElement("text",v_({},Xe(k,!0),{x:T,y:A,className:ct("recharts-text",E),textAnchor:p,fill:b.includes("url")?cC:b}),y.map(function(U,K){var te=U.words.join(P?"":" ");return O.createElement("tspan",{x:T,dy:K===0?R:c,key:"".concat(te,"-").concat(K)},te)}))};function No(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Jce(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jS(e){let t,n,r;e.length!==2?(t=No,n=(c,l)=>No(e(c),l),r=(c,l)=>e(c)-l):(t=e===No||e===Jce?e:Qce,n=e,r=e);function i(c,l,u=0,d=c.length){if(u<d){if(t(l,l)!==0)return d;do{const h=u+d>>>1;n(c[h],l)<0?u=h+1:d=h}while(u<d)}return u}function a(c,l,u=0,d=c.length){if(u<d){if(t(l,l)!==0)return d;do{const h=u+d>>>1;n(c[h],l)<=0?u=h+1:d=h}while(u<d)}return u}function s(c,l,u=0,d=c.length){const h=i(c,l,u,d-1);return h>u&&r(c[h-1],l)>-r(c[h],l)?h-1:h}return{left:i,center:s,right:a}}function Qce(){return 0}function n5(e){return e===null?NaN:+e}function*ele(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const tle=jS(No),pp=tle.right;jS(n5).center;class lC extends Map{constructor(t,n=ile){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(uC(this,t))}has(t){return super.has(uC(this,t))}set(t,n){return super.set(nle(this,t),n)}delete(t){return super.delete(rle(this,t))}}function uC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function nle({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function rle({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ile(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ale(e=No){if(e===No)return r5;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function r5(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const sle=Math.sqrt(50),ole=Math.sqrt(10),cle=Math.sqrt(2);function tv(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=sle?10:a>=ole?5:a>=cle?2:1;let c,l,u;return i<0?(u=Math.pow(10,-i)/s,c=Math.round(e*u),l=Math.round(t*u),c/u<e&&++c,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,c=Math.round(e/u),l=Math.round(t/u),c*u<e&&++c,l*u>t&&--l),l<c&&.5<=n&&n<2?tv(e,t,n*2):[c,l,u]}function y_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,s]=r?tv(t,e,n):tv(e,t,n);if(!(a>=i))return[];const c=a-i+1,l=new Array(c);if(r)if(s<0)for(let u=0;u<c;++u)l[u]=(a-u)/-s;else for(let u=0;u<c;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<c;++u)l[u]=(i+u)/-s;else for(let u=0;u<c;++u)l[u]=(i+u)*s;return l}function x_(e,t,n){return t=+t,e=+e,n=+n,tv(e,t,n)[2]}function b_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?x_(t,e,n):x_(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function dC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function hC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function i5(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?r5:ale(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(l-h)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(t-u*h/l+f)),m=Math.min(r,Math.floor(t+(l-u)*h/l+f));i5(e,t,p,m,i)}const a=e[t];let s=n,c=r;for(Qd(e,n,t),i(e[r],a)>0&&Qd(e,n,r);s<c;){for(Qd(e,s,c),++s,--c;i(e[s],a)<0;)++s;for(;i(e[c],a)>0;)--c}i(e[n],a)===0?Qd(e,n,c):(++c,Qd(e,c,r)),c<=t&&(n=c+1),t<=c&&(r=c-1)}return e}function Qd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function lle(e,t,n){if(e=Float64Array.from(ele(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return hC(e);if(t>=1)return dC(e);var r,i=(r-1)*t,a=Math.floor(i),s=dC(i5(e,a).subarray(0,a+1)),c=hC(e.subarray(a+1));return s+(c-s)*(i-a)}}function ule(e,t,n=n5){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),s=+n(e[a],a,e),c=+n(e[a+1],a+1,e);return s+(c-s)*(i-a)}}function dle(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Gi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ls(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const w_=Symbol("implicit");function SS(){var e=new lC,t=[],n=[],r=w_;function i(a){let s=e.get(a);if(s===void 0){if(r!==w_)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new lC;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return SS(t,n).unknown(r)},Gi.apply(i,arguments),i}function hf(){var e=SS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,s,c=!1,l=0,u=0,d=.5;delete e.unknown;function h(){var f=t().length,p=i<r,m=p?i:r,g=p?r:i;a=(g-m)/Math.max(1,f-l+u*2),c&&(a=Math.floor(a)),m+=(g-m-a*(f-l))*d,s=a*(1-l),c&&(m=Math.round(m),s=Math.round(s));var v=dle(f).map(function(b){return m+a*b});return n(p?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,c=!0,h()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(f){return arguments.length?(c=!!f,h()):c},e.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),h()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},e.copy=function(){return hf(t(),[r,i]).round(c).paddingInner(l).paddingOuter(u).align(d)},Gi.apply(h(),arguments)}function a5(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return a5(t())},e}function $h(){return a5(hf.apply(null,arguments).paddingInner(1))}function ES(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function s5(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function mp(){}var ff=.7,nv=1/ff,ou="\\s*([+-]?\\d+)\\s*",pf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hle=/^#([0-9a-f]{3,8})$/,fle=new RegExp(`^rgb\\(${ou},${ou},${ou}\\)$`),ple=new RegExp(`^rgb\\(${Ma},${Ma},${Ma}\\)$`),mle=new RegExp(`^rgba\\(${ou},${ou},${ou},${pf}\\)$`),gle=new RegExp(`^rgba\\(${Ma},${Ma},${Ma},${pf}\\)$`),vle=new RegExp(`^hsl\\(${pf},${Ma},${Ma}\\)$`),yle=new RegExp(`^hsla\\(${pf},${Ma},${Ma},${pf}\\)$`),fC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ES(mp,mf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:pC,formatHex:pC,formatHex8:xle,formatHsl:ble,formatRgb:mC,toString:mC});function pC(){return this.rgb().formatHex()}function xle(){return this.rgb().formatHex8()}function ble(){return o5(this).formatHsl()}function mC(){return this.rgb().formatRgb()}function mf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hle.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gC(t):n===3?new Wr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Am(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Am(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fle.exec(e))?new Wr(t[1],t[2],t[3],1):(t=ple.exec(e))?new Wr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mle.exec(e))?Am(t[1],t[2],t[3],t[4]):(t=gle.exec(e))?Am(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vle.exec(e))?xC(t[1],t[2]/100,t[3]/100,1):(t=yle.exec(e))?xC(t[1],t[2]/100,t[3]/100,t[4]):fC.hasOwnProperty(e)?gC(fC[e]):e==="transparent"?new Wr(NaN,NaN,NaN,0):null}function gC(e){return new Wr(e>>16&255,e>>8&255,e&255,1)}function Am(e,t,n,r){return r<=0&&(e=t=n=NaN),new Wr(e,t,n,r)}function wle(e){return e instanceof mp||(e=mf(e)),e?(e=e.rgb(),new Wr(e.r,e.g,e.b,e.opacity)):new Wr}function __(e,t,n,r){return arguments.length===1?wle(e):new Wr(e,t,n,r??1)}function Wr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ES(Wr,__,s5(mp,{brighter(e){return e=e==null?nv:Math.pow(nv,e),new Wr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ff:Math.pow(ff,e),new Wr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wr(Mc(this.r),Mc(this.g),Mc(this.b),rv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vC,formatHex:vC,formatHex8:_le,formatRgb:yC,toString:yC}));function vC(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}`}function _le(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}${Sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function yC(){const e=rv(this.opacity);return`${e===1?"rgb(":"rgba("}${Mc(this.r)}, ${Mc(this.g)}, ${Mc(this.b)}${e===1?")":`, ${e})`}`}function rv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sc(e){return e=Mc(e),(e<16?"0":"")+e.toString(16)}function xC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pa(e,t,n,r)}function o5(e){if(e instanceof pa)return new pa(e.h,e.s,e.l,e.opacity);if(e instanceof mp||(e=mf(e)),!e)return new pa;if(e instanceof pa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,c=a-i,l=(a+i)/2;return c?(t===a?s=(n-r)/c+(n<r)*6:n===a?s=(r-t)/c+2:s=(t-n)/c+4,c/=l<.5?a+i:2-a-i,s*=60):c=l>0&&l<1?0:s,new pa(s,c,l,e.opacity)}function jle(e,t,n,r){return arguments.length===1?o5(e):new pa(e,t,n,r??1)}function pa(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ES(pa,jle,s5(mp,{brighter(e){return e=e==null?nv:Math.pow(nv,e),new pa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ff:Math.pow(ff,e),new pa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Wr(k0(e>=240?e-240:e+120,i,r),k0(e,i,r),k0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new pa(bC(this.h),Tm(this.s),Tm(this.l),rv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=rv(this.opacity);return`${e===1?"hsl(":"hsla("}${bC(this.h)}, ${Tm(this.s)*100}%, ${Tm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bC(e){return e=(e||0)%360,e<0?e+360:e}function Tm(e){return Math.max(0,Math.min(1,e||0))}function k0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const NS=e=>()=>e;function Sle(e,t){return function(n){return e+n*t}}function Ele(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Nle(e){return(e=+e)==1?c5:function(t,n){return n-t?Ele(t,n,e):NS(isNaN(t)?n:t)}}function c5(e,t){var n=t-e;return n?Sle(e,n):NS(isNaN(e)?t:e)}const wC=function e(t){var n=Nle(t);function r(i,a){var s=n((i=__(i)).r,(a=__(a)).r),c=n(i.g,a.g),l=n(i.b,a.b),u=c5(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=c(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=e,r}(1);function Ple(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function kle(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cle(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=_d(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(c){for(s=0;s<r;++s)a[s]=i[s](c);return a}}function Ale(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function iv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Tle(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=_d(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var j_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,C0=new RegExp(j_.source,"g");function Ole(e){return function(){return e}}function Rle(e){return function(t){return e(t)+""}}function $le(e,t){var n=j_.lastIndex=C0.lastIndex=0,r,i,a,s=-1,c=[],l=[];for(e=e+"",t=t+"";(r=j_.exec(e))&&(i=C0.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),c[s]?c[s]+=a:c[++s]=a),(r=r[0])===(i=i[0])?c[s]?c[s]+=i:c[++s]=i:(c[++s]=null,l.push({i:s,x:iv(r,i)})),n=C0.lastIndex;return n<t.length&&(a=t.slice(n),c[s]?c[s]+=a:c[++s]=a),c.length<2?l[0]?Rle(l[0].x):Ole(t):(t=l.length,function(u){for(var d=0,h;d<t;++d)c[(h=l[d]).i]=h.x(u);return c.join("")})}function _d(e,t){var n=typeof t,r;return t==null||n==="boolean"?NS(t):(n==="number"?iv:n==="string"?(r=mf(t))?(t=r,wC):$le:t instanceof mf?wC:t instanceof Date?Ale:kle(t)?Ple:Array.isArray(t)?Cle:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Tle:iv)(e,t)}function PS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ile(e,t){t===void 0&&(t=e,e=_d);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(s){var c=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[c](s-c)}}function Mle(e){return function(){return e}}function av(e){return+e}var _C=[0,1];function Dr(e){return e}function S_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Mle(isNaN(t)?NaN:.5)}function Dle(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Lle(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=S_(i,r),a=n(s,a)):(r=S_(r,i),a=n(a,s)),function(c){return a(r(c))}}function Ble(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=S_(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(c){var l=pp(e,c,1,r)-1;return a[l](i[l](c))}}function gp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xy(){var e=_C,t=_C,n=_d,r,i,a,s=Dr,c,l,u;function d(){var f=Math.min(e.length,t.length);return s!==Dr&&(s=Dle(e[0],e[f-1])),c=f>2?Ble:Lle,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(l||(l=c(e.map(r),t,n)))(r(s(f)))}return h.invert=function(f){return s(i((u||(u=c(t,e.map(r),iv)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,av),d()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=PS,d()},h.clamp=function(f){return arguments.length?(s=f?!0:Dr,d()):s!==Dr},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,p){return r=f,i=p,d()}}function kS(){return Xy()(Dr,Dr)}function Fle(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function sv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ru(e){return e=sv(Math.abs(e)),e?e[1]:NaN}function zle(e,t){return function(n,r){for(var i=n.length,a=[],s=0,c=e[0],l=0;i>0&&c>0&&(l+c+1>r&&(c=Math.max(1,r-l)),a.push(n.substring(i-=c,i+c)),!((l+=c+1)>r));)c=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Ule(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Hle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gf(e){if(!(t=Hle.exec(e)))throw new Error("invalid format: "+e);var t;return new CS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gf.prototype=CS.prototype;function CS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}CS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vle(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var l5;function Gle(e,t){var n=sv(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(l5=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+sv(e,Math.max(0,t+a-1))[0]}function jC(e,t){var n=sv(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const SC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Fle,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>jC(e*100,t),r:jC,s:Gle,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function EC(e){return e}var NC=Array.prototype.map,PC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Wle(e){var t=e.grouping===void 0||e.thousands===void 0?EC:zle(NC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?EC:Ule(NC.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(h){h=gf(h);var f=h.fill,p=h.align,m=h.sign,g=h.symbol,v=h.zero,b=h.width,w=h.comma,y=h.precision,_=h.trim,j=h.type;j==="n"?(w=!0,j="g"):SC[j]||(y===void 0&&(y=12),_=!0,j="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",E=g==="$"?r:/[%p]/.test(j)?s:"",P=SC[j],k=/[defgprs%]/.test(j);y=y===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function T(A){var R=S,L=E,B,G,U;if(j==="c")L=P(A)+L,A="";else{A=+A;var K=A<0||1/A<0;if(A=isNaN(A)?l:P(Math.abs(A),y),_&&(A=Vle(A)),K&&+A==0&&m!=="+"&&(K=!1),R=(K?m==="("?m:c:m==="-"||m==="("?"":m)+R,L=(j==="s"?PC[8+l5/3]:"")+L+(K&&m==="("?")":""),k){for(B=-1,G=A.length;++B<G;)if(U=A.charCodeAt(B),48>U||U>57){L=(U===46?i+A.slice(B+1):A.slice(B))+L,A=A.slice(0,B);break}}}w&&!v&&(A=t(A,1/0));var te=R.length+A.length+L.length,W=te<b?new Array(b-te+1).join(f):"";switch(w&&v&&(A=t(W+A,W.length?b-L.length:1/0),W=""),p){case"<":A=R+A+L+W;break;case"=":A=R+W+A+L;break;case"^":A=W.slice(0,te=W.length>>1)+R+A+L+W.slice(te);break;default:A=W+R+A+L;break}return a(A)}return T.toString=function(){return h+""},T}function d(h,f){var p=u((h=gf(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(Ru(f)/3)))*3,g=Math.pow(10,-m),v=PC[8+m/3];return function(b){return p(g*b)+v}}return{format:u,formatPrefix:d}}var Om,AS,u5;qle({thousands:",",grouping:[3],currency:["$",""]});function qle(e){return Om=Wle(e),AS=Om.format,u5=Om.formatPrefix,Om}function Kle(e){return Math.max(0,-Ru(Math.abs(e)))}function Yle(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ru(t)/3)))*3-Ru(Math.abs(e)))}function Xle(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ru(t)-Ru(e))+1}function d5(e,t,n,r){var i=b_(e,t,n),a;switch(r=gf(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Yle(i,s))&&(r.precision=a),u5(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Xle(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Kle(i))&&(r.precision=a-(r.type==="%")*2);break}}return AS(r)}function Do(e){var t=e.domain;return e.ticks=function(n){var r=t();return y_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return d5(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,s=r[i],c=r[a],l,u,d=10;for(c<s&&(u=s,s=c,c=u,u=i,i=a,a=u);d-- >0;){if(u=x_(s,c,n),u===l)return r[i]=s,r[a]=c,t(r);if(u>0)s=Math.floor(s/u)*u,c=Math.ceil(c/u)*u;else if(u<0)s=Math.ceil(s*u)/u,c=Math.floor(c*u)/u;else break;l=u}return e},e}function ov(){var e=kS();return e.copy=function(){return gp(e,ov())},Gi.apply(e,arguments),Do(e)}function h5(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,av),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return h5(e).unknown(t)},e=arguments.length?Array.from(e,av):[0,1],Do(n)}function f5(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),e[n]=t.floor(i),e[r]=t.ceil(a),e}function kC(e){return Math.log(e)}function CC(e){return Math.exp(e)}function Zle(e){return-Math.log(-e)}function Jle(e){return-Math.exp(-e)}function Qle(e){return isFinite(e)?+("1e"+e):e<0?0:e}function eue(e){return e===10?Qle:e===Math.E?Math.exp:t=>Math.pow(e,t)}function tue(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function AC(e){return(t,n)=>-e(-t,n)}function TS(e){const t=e(kC,CC),n=t.domain;let r=10,i,a;function s(){return i=tue(r),a=eue(r),n()[0]<0?(i=AC(i),a=AC(a),e(Zle,Jle)):e(kC,CC),t}return t.base=function(c){return arguments.length?(r=+c,s()):r},t.domain=function(c){return arguments.length?(n(c),s()):n()},t.ticks=c=>{const l=n();let u=l[0],d=l[l.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=i(u),p=i(d),m,g;const v=c==null?10:+c;let b=[];if(!(r%1)&&p-f<v){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(m=1;m<r;++m)if(g=f<0?m/a(-f):m*a(f),!(g<u)){if(g>d)break;b.push(g)}}else for(;f<=p;++f)for(m=r-1;m>=1;--m)if(g=f>0?m/a(-f):m*a(f),!(g<u)){if(g>d)break;b.push(g)}b.length*2<v&&(b=y_(u,d,v))}else b=y_(f,p,Math.min(p-f,v)).map(a);return h?b.reverse():b},t.tickFormat=(c,l)=>{if(c==null&&(c=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=gf(l)).precision==null&&(l.trim=!0),l=AS(l)),c===1/0)return l;const u=Math.max(1,r*c/t.ticks().length);return d=>{let h=d/a(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=u?l(d):""}},t.nice=()=>n(f5(n(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),t}function p5(){const e=TS(Xy()).domain([1,10]);return e.copy=()=>gp(e,p5()).base(e.base()),Gi.apply(e,arguments),e}function TC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function OC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function OS(e){var t=1,n=e(TC(t),OC(t));return n.constant=function(r){return arguments.length?e(TC(t=+r),OC(t)):t},Do(n)}function m5(){var e=OS(Xy());return e.copy=function(){return gp(e,m5()).constant(e.constant())},Gi.apply(e,arguments)}function RC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nue(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rue(e){return e<0?-e*e:e*e}function RS(e){var t=e(Dr,Dr),n=1;function r(){return n===1?e(Dr,Dr):n===.5?e(nue,rue):e(RC(n),RC(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Do(t)}function $S(){var e=RS(Xy());return e.copy=function(){return gp(e,$S()).exponent(e.exponent())},Gi.apply(e,arguments),e}function iue(){return $S.apply(null,arguments).exponent(.5)}function $C(e){return Math.sign(e)*e*e}function aue(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function g5(){var e=kS(),t=[0,1],n=!1,r;function i(a){var s=aue(e(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return e.invert($C(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,av)).map($C)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return g5(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Gi.apply(i,arguments),Do(i)}function v5(){var e=[],t=[],n=[],r;function i(){var s=0,c=Math.max(1,t.length);for(n=new Array(c-1);++s<c;)n[s-1]=ule(e,s/c);return a}function a(s){return s==null||isNaN(s=+s)?r:t[pp(n,s)]}return a.invertExtent=function(s){var c=t.indexOf(s);return c<0?[NaN,NaN]:[c>0?n[c-1]:e[0],c<n.length?n[c]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let c of s)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(No),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return v5().domain(e).range(t).unknown(r)},Gi.apply(a,arguments)}function y5(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[pp(r,l,0,n)]:a}function c(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,c()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,c()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return y5().domain([e,t]).range(i).unknown(a)},Gi.apply(Do(s),arguments)}function x5(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[pp(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return x5().domain(e).range(t).unknown(n)},Gi.apply(i,arguments)}const A0=new Date,T0=new Date;function ar(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),c=i.ceil(a);return a-s<c-a?s:c},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,c)=>{const l=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<s)||!(c>0))return l;let u;do l.push(u=new Date(+a)),t(a,c),e(a);while(u<a&&a<s);return l},i.filter=a=>ar(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,c)=>{if(s>=s)if(c<0)for(;++c<=0;)for(;t(s,-1),!a(s););else for(;--c>=0;)for(;t(s,1),!a(s););}),n&&(i.count=(a,s)=>(A0.setTime(+a),T0.setTime(+s),e(A0),e(T0),Math.floor(n(A0,T0))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const cv=ar(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ar(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):cv);cv.range;const ms=1e3,Mi=ms*60,gs=Mi*60,Ts=gs*24,IS=Ts*7,IC=Ts*30,O0=Ts*365,Ec=ar(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ms)},(e,t)=>(t-e)/ms,e=>e.getUTCSeconds());Ec.range;const MS=ar(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ms)},(e,t)=>{e.setTime(+e+t*Mi)},(e,t)=>(t-e)/Mi,e=>e.getMinutes());MS.range;const DS=ar(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Mi)},(e,t)=>(t-e)/Mi,e=>e.getUTCMinutes());DS.range;const LS=ar(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ms-e.getMinutes()*Mi)},(e,t)=>{e.setTime(+e+t*gs)},(e,t)=>(t-e)/gs,e=>e.getHours());LS.range;const BS=ar(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*gs)},(e,t)=>(t-e)/gs,e=>e.getUTCHours());BS.range;const vp=ar(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mi)/Ts,e=>e.getDate()-1);vp.range;const Zy=ar(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ts,e=>e.getUTCDate()-1);Zy.range;const b5=ar(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ts,e=>Math.floor(e/Ts));b5.range;function sl(e){return ar(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Mi)/IS)}const Jy=sl(0),lv=sl(1),sue=sl(2),oue=sl(3),$u=sl(4),cue=sl(5),lue=sl(6);Jy.range;lv.range;sue.range;oue.range;$u.range;cue.range;lue.range;function ol(e){return ar(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/IS)}const Qy=ol(0),uv=ol(1),uue=ol(2),due=ol(3),Iu=ol(4),hue=ol(5),fue=ol(6);Qy.range;uv.range;uue.range;due.range;Iu.range;hue.range;fue.range;const FS=ar(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());FS.range;const zS=ar(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());zS.range;const Os=ar(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Os.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ar(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Os.range;const Rs=ar(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Rs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ar(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Rs.range;function w5(e,t,n,r,i,a){const s=[[Ec,1,ms],[Ec,5,5*ms],[Ec,15,15*ms],[Ec,30,30*ms],[a,1,Mi],[a,5,5*Mi],[a,15,15*Mi],[a,30,30*Mi],[i,1,gs],[i,3,3*gs],[i,6,6*gs],[i,12,12*gs],[r,1,Ts],[r,2,2*Ts],[n,1,IS],[t,1,IC],[t,3,3*IC],[e,1,O0]];function c(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const p=h&&typeof h.range=="function"?h:l(u,d,h),m=p?p.range(u,+d+1):[];return f?m.reverse():m}function l(u,d,h){const f=Math.abs(d-u)/h,p=jS(([,,v])=>v).right(s,f);if(p===s.length)return e.every(b_(u/O0,d/O0,h));if(p===0)return cv.every(Math.max(b_(u,d,h),1));const[m,g]=s[f/s[p-1][2]<s[p][2]/f?p-1:p];return m.every(g)}return[c,l]}const[pue,mue]=w5(Rs,zS,Qy,b5,BS,DS),[gue,vue]=w5(Os,FS,Jy,vp,LS,MS);function R0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function eh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function yue(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,c=e.months,l=e.shortMonths,u=th(i),d=nh(i),h=th(a),f=nh(a),p=th(s),m=nh(s),g=th(c),v=nh(c),b=th(l),w=nh(l),y={a:K,A:te,b:W,B:fe,c:null,d:zC,e:zC,f:zue,g:Zue,G:Que,H:Lue,I:Bue,j:Fue,L:_5,m:Uue,M:Hue,p:be,q:ne,Q:VC,s:GC,S:Vue,u:Gue,U:Wue,V:que,w:Kue,W:Yue,x:null,X:null,y:Xue,Y:Jue,Z:ede,"%":HC},_={a:ce,A:we,b:et,B:jt,c:null,d:UC,e:UC,f:ide,g:pde,G:gde,H:tde,I:nde,j:rde,L:S5,m:ade,M:sde,p:_e,q:ie,Q:VC,s:GC,S:ode,u:cde,U:lde,V:ude,w:dde,W:hde,x:null,X:null,y:fde,Y:mde,Z:vde,"%":HC},j={a:T,A,b:R,B:L,c:B,d:BC,e:BC,f:$ue,g:LC,G:DC,H:FC,I:FC,j:Aue,L:Rue,m:Cue,M:Tue,p:k,q:kue,Q:Mue,s:Due,S:Oue,u:jue,U:Sue,V:Eue,w:_ue,W:Nue,x:G,X:U,y:LC,Y:DC,Z:Pue,"%":Iue};y.x=S(n,y),y.X=S(r,y),y.c=S(t,y),_.x=S(n,_),_.X=S(r,_),_.c=S(t,_);function S(Y,re){return function(ae){var H=[],Te=-1,Ee=0,We=Y.length,gt,Jt,le;for(ae instanceof Date||(ae=new Date(+ae));++Te<We;)Y.charCodeAt(Te)===37&&(H.push(Y.slice(Ee,Te)),(Jt=MC[gt=Y.charAt(++Te)])!=null?gt=Y.charAt(++Te):Jt=gt==="e"?" ":"0",(le=re[gt])&&(gt=le(ae,Jt)),H.push(gt),Ee=Te+1);return H.push(Y.slice(Ee,Te)),H.join("")}}function E(Y,re){return function(ae){var H=eh(1900,void 0,1),Te=P(H,Y,ae+="",0),Ee,We;if(Te!=ae.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(re&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(Ee=$0(eh(H.y,0,1)),We=Ee.getUTCDay(),Ee=We>4||We===0?uv.ceil(Ee):uv(Ee),Ee=Zy.offset(Ee,(H.V-1)*7),H.y=Ee.getUTCFullYear(),H.m=Ee.getUTCMonth(),H.d=Ee.getUTCDate()+(H.w+6)%7):(Ee=R0(eh(H.y,0,1)),We=Ee.getDay(),Ee=We>4||We===0?lv.ceil(Ee):lv(Ee),Ee=vp.offset(Ee,(H.V-1)*7),H.y=Ee.getFullYear(),H.m=Ee.getMonth(),H.d=Ee.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),We="Z"in H?$0(eh(H.y,0,1)).getUTCDay():R0(eh(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(We+5)%7:H.w+H.U*7-(We+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,$0(H)):R0(H)}}function P(Y,re,ae,H){for(var Te=0,Ee=re.length,We=ae.length,gt,Jt;Te<Ee;){if(H>=We)return-1;if(gt=re.charCodeAt(Te++),gt===37){if(gt=re.charAt(Te++),Jt=j[gt in MC?re.charAt(Te++):gt],!Jt||(H=Jt(Y,ae,H))<0)return-1}else if(gt!=ae.charCodeAt(H++))return-1}return H}function k(Y,re,ae){var H=u.exec(re.slice(ae));return H?(Y.p=d.get(H[0].toLowerCase()),ae+H[0].length):-1}function T(Y,re,ae){var H=p.exec(re.slice(ae));return H?(Y.w=m.get(H[0].toLowerCase()),ae+H[0].length):-1}function A(Y,re,ae){var H=h.exec(re.slice(ae));return H?(Y.w=f.get(H[0].toLowerCase()),ae+H[0].length):-1}function R(Y,re,ae){var H=b.exec(re.slice(ae));return H?(Y.m=w.get(H[0].toLowerCase()),ae+H[0].length):-1}function L(Y,re,ae){var H=g.exec(re.slice(ae));return H?(Y.m=v.get(H[0].toLowerCase()),ae+H[0].length):-1}function B(Y,re,ae){return P(Y,t,re,ae)}function G(Y,re,ae){return P(Y,n,re,ae)}function U(Y,re,ae){return P(Y,r,re,ae)}function K(Y){return s[Y.getDay()]}function te(Y){return a[Y.getDay()]}function W(Y){return l[Y.getMonth()]}function fe(Y){return c[Y.getMonth()]}function be(Y){return i[+(Y.getHours()>=12)]}function ne(Y){return 1+~~(Y.getMonth()/3)}function ce(Y){return s[Y.getUTCDay()]}function we(Y){return a[Y.getUTCDay()]}function et(Y){return l[Y.getUTCMonth()]}function jt(Y){return c[Y.getUTCMonth()]}function _e(Y){return i[+(Y.getUTCHours()>=12)]}function ie(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var re=S(Y+="",y);return re.toString=function(){return Y},re},parse:function(Y){var re=E(Y+="",!1);return re.toString=function(){return Y},re},utcFormat:function(Y){var re=S(Y+="",_);return re.toString=function(){return Y},re},utcParse:function(Y){var re=E(Y+="",!0);return re.toString=function(){return Y},re}}}var MC={"-":"",_:" ",0:"0"},hr=/^\s*\d+/,xue=/^%/,bue=/[\\^$*+?|[\]().{}]/g;function Ft(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function wue(e){return e.replace(bue,"\\$&")}function th(e){return new RegExp("^(?:"+e.map(wue).join("|")+")","i")}function nh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function _ue(e,t,n){var r=hr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function jue(e,t,n){var r=hr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Sue(e,t,n){var r=hr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Eue(e,t,n){var r=hr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Nue(e,t,n){var r=hr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function DC(e,t,n){var r=hr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function LC(e,t,n){var r=hr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Pue(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kue(e,t,n){var r=hr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Cue(e,t,n){var r=hr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function BC(e,t,n){var r=hr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Aue(e,t,n){var r=hr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function FC(e,t,n){var r=hr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Tue(e,t,n){var r=hr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Oue(e,t,n){var r=hr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Rue(e,t,n){var r=hr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $ue(e,t,n){var r=hr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Iue(e,t,n){var r=xue.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Mue(e,t,n){var r=hr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Due(e,t,n){var r=hr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function zC(e,t){return Ft(e.getDate(),t,2)}function Lue(e,t){return Ft(e.getHours(),t,2)}function Bue(e,t){return Ft(e.getHours()%12||12,t,2)}function Fue(e,t){return Ft(1+vp.count(Os(e),e),t,3)}function _5(e,t){return Ft(e.getMilliseconds(),t,3)}function zue(e,t){return _5(e,t)+"000"}function Uue(e,t){return Ft(e.getMonth()+1,t,2)}function Hue(e,t){return Ft(e.getMinutes(),t,2)}function Vue(e,t){return Ft(e.getSeconds(),t,2)}function Gue(e){var t=e.getDay();return t===0?7:t}function Wue(e,t){return Ft(Jy.count(Os(e)-1,e),t,2)}function j5(e){var t=e.getDay();return t>=4||t===0?$u(e):$u.ceil(e)}function que(e,t){return e=j5(e),Ft($u.count(Os(e),e)+(Os(e).getDay()===4),t,2)}function Kue(e){return e.getDay()}function Yue(e,t){return Ft(lv.count(Os(e)-1,e),t,2)}function Xue(e,t){return Ft(e.getFullYear()%100,t,2)}function Zue(e,t){return e=j5(e),Ft(e.getFullYear()%100,t,2)}function Jue(e,t){return Ft(e.getFullYear()%1e4,t,4)}function Que(e,t){var n=e.getDay();return e=n>=4||n===0?$u(e):$u.ceil(e),Ft(e.getFullYear()%1e4,t,4)}function ede(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ft(t/60|0,"0",2)+Ft(t%60,"0",2)}function UC(e,t){return Ft(e.getUTCDate(),t,2)}function tde(e,t){return Ft(e.getUTCHours(),t,2)}function nde(e,t){return Ft(e.getUTCHours()%12||12,t,2)}function rde(e,t){return Ft(1+Zy.count(Rs(e),e),t,3)}function S5(e,t){return Ft(e.getUTCMilliseconds(),t,3)}function ide(e,t){return S5(e,t)+"000"}function ade(e,t){return Ft(e.getUTCMonth()+1,t,2)}function sde(e,t){return Ft(e.getUTCMinutes(),t,2)}function ode(e,t){return Ft(e.getUTCSeconds(),t,2)}function cde(e){var t=e.getUTCDay();return t===0?7:t}function lde(e,t){return Ft(Qy.count(Rs(e)-1,e),t,2)}function E5(e){var t=e.getUTCDay();return t>=4||t===0?Iu(e):Iu.ceil(e)}function ude(e,t){return e=E5(e),Ft(Iu.count(Rs(e),e)+(Rs(e).getUTCDay()===4),t,2)}function dde(e){return e.getUTCDay()}function hde(e,t){return Ft(uv.count(Rs(e)-1,e),t,2)}function fde(e,t){return Ft(e.getUTCFullYear()%100,t,2)}function pde(e,t){return e=E5(e),Ft(e.getUTCFullYear()%100,t,2)}function mde(e,t){return Ft(e.getUTCFullYear()%1e4,t,4)}function gde(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Iu(e):Iu.ceil(e),Ft(e.getUTCFullYear()%1e4,t,4)}function vde(){return"+0000"}function HC(){return"%"}function VC(e){return+e}function GC(e){return Math.floor(+e/1e3)}var Cl,N5,P5;yde({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yde(e){return Cl=yue(e),N5=Cl.format,Cl.parse,P5=Cl.utcFormat,Cl.utcParse,Cl}function xde(e){return new Date(e)}function bde(e){return e instanceof Date?+e:+new Date(+e)}function US(e,t,n,r,i,a,s,c,l,u){var d=kS(),h=d.invert,f=d.domain,p=u(".%L"),m=u(":%S"),g=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),w=u("%b %d"),y=u("%B"),_=u("%Y");function j(S){return(l(S)<S?p:c(S)<S?m:s(S)<S?g:a(S)<S?v:r(S)<S?i(S)<S?b:w:n(S)<S?y:_)(S)}return d.invert=function(S){return new Date(h(S))},d.domain=function(S){return arguments.length?f(Array.from(S,bde)):f().map(xde)},d.ticks=function(S){var E=f();return e(E[0],E[E.length-1],S??10)},d.tickFormat=function(S,E){return E==null?j:u(E)},d.nice=function(S){var E=f();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?f(f5(E,S)):d},d.copy=function(){return gp(d,US(e,t,n,r,i,a,s,c,l,u))},d}function wde(){return Gi.apply(US(gue,vue,Os,FS,Jy,vp,LS,MS,Ec,N5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _de(){return Gi.apply(US(pue,mue,Rs,zS,Qy,Zy,BS,DS,Ec,P5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ex(){var e=0,t=1,n,r,i,a,s=Dr,c=!1,l;function u(h){return h==null||isNaN(h=+h)?l:s(i===0?.5:(h=(a(h)-n)*i,c?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(h){return arguments.length?(c=!!h,u):c},u.interpolator=function(h){return arguments.length?(s=h,u):s};function d(h){return function(f){var p,m;return arguments.length?([p,m]=f,s=h(p,m),u):[s(0),s(1)]}}return u.range=d(_d),u.rangeRound=d(PS),u.unknown=function(h){return arguments.length?(l=h,u):l},function(h){return a=h,n=h(e),r=h(t),i=n===r?0:1/(r-n),u}}function Lo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function k5(){var e=Do(ex()(Dr));return e.copy=function(){return Lo(e,k5())},Ls.apply(e,arguments)}function C5(){var e=TS(ex()).domain([1,10]);return e.copy=function(){return Lo(e,C5()).base(e.base())},Ls.apply(e,arguments)}function A5(){var e=OS(ex());return e.copy=function(){return Lo(e,A5()).constant(e.constant())},Ls.apply(e,arguments)}function HS(){var e=RS(ex());return e.copy=function(){return Lo(e,HS()).exponent(e.exponent())},Ls.apply(e,arguments)}function jde(){return HS.apply(null,arguments).exponent(.5)}function T5(){var e=[],t=Dr;function n(r){if(r!=null&&!isNaN(r=+r))return t((pp(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(No),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>lle(e,a/r))},n.copy=function(){return T5(t).domain(e)},Ls.apply(n,arguments)}function tx(){var e=0,t=.5,n=1,r=1,i,a,s,c,l,u=Dr,d,h=!1,f;function p(g){return isNaN(g=+g)?f:(g=.5+((g=+d(g))-a)*(r*g<r*a?c:l),u(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,n]=g,i=d(e=+e),a=d(t=+t),s=d(n=+n),c=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,p):[e,t,n]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(u=g,p):u};function m(g){return function(v){var b,w,y;return arguments.length?([b,w,y]=v,u=Ile(g,[b,w,y]),p):[u(0),u(.5),u(1)]}}return p.range=m(_d),p.rangeRound=m(PS),p.unknown=function(g){return arguments.length?(f=g,p):f},function(g){return d=g,i=g(e),a=g(t),s=g(n),c=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,p}}function O5(){var e=Do(tx()(Dr));return e.copy=function(){return Lo(e,O5())},Ls.apply(e,arguments)}function R5(){var e=TS(tx()).domain([.1,1,10]);return e.copy=function(){return Lo(e,R5()).base(e.base())},Ls.apply(e,arguments)}function $5(){var e=OS(tx());return e.copy=function(){return Lo(e,$5()).constant(e.constant())},Ls.apply(e,arguments)}function VS(){var e=RS(tx());return e.copy=function(){return Lo(e,VS()).exponent(e.exponent())},Ls.apply(e,arguments)}function Sde(){return VS.apply(null,arguments).exponent(.5)}const WC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hf,scaleDiverging:O5,scaleDivergingLog:R5,scaleDivergingPow:VS,scaleDivergingSqrt:Sde,scaleDivergingSymlog:$5,scaleIdentity:h5,scaleImplicit:w_,scaleLinear:ov,scaleLog:p5,scaleOrdinal:SS,scalePoint:$h,scalePow:$S,scaleQuantile:v5,scaleQuantize:y5,scaleRadial:g5,scaleSequential:k5,scaleSequentialLog:C5,scaleSequentialPow:HS,scaleSequentialQuantile:T5,scaleSequentialSqrt:jde,scaleSequentialSymlog:A5,scaleSqrt:iue,scaleSymlog:m5,scaleThreshold:x5,scaleTime:wde,scaleUtc:_de,tickFormat:d5},Symbol.toStringTag,{value:"Module"}));var Ede=fd;function Nde(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(s!=null&&(c===void 0?s===s&&!Ede(s):n(s,c)))var c=s,l=a}return l}var nx=Nde;function Pde(e,t){return e>t}var I5=Pde,kde=nx,Cde=I5,Ade=wd;function Tde(e){return e&&e.length?kde(e,Ade,Cde):void 0}var Ode=Tde;const rx=rn(Ode);function Rde(e,t){return e<t}var M5=Rde,$de=nx,Ide=M5,Mde=wd;function Dde(e){return e&&e.length?$de(e,Mde,Ide):void 0}var Lde=Dde;const ix=rn(Lde);var Bde=iS,Fde=qa,zde=VL,Ude=Yr;function Hde(e,t){var n=Ude(e)?Bde:zde;return n(e,Fde(t))}var Vde=Hde,Gde=UL,Wde=Vde;function qde(e,t){return Gde(Wde(e,t),1)}var Kde=qde;const Yde=rn(Kde);var Xde=xS;function Zde(e,t){return Xde(e,t)}var Jde=Zde;const yp=rn(Jde);var jd=1e9,Qde={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},WS,wn=!0,zi="[DecimalError] ",Dc=zi+"Invalid argument: ",GS=zi+"Exponent out of range: ",Sd=Math.floor,fc=Math.pow,ehe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mi,cr=1e7,gn=7,D5=9007199254740991,dv=Sd(D5/gn),Oe={};Oe.absoluteValue=Oe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Oe.comparedTo=Oe.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Oe.decimalPlaces=Oe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*gn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Oe.dividedBy=Oe.div=function(e){return ws(this,new this.constructor(e))};Oe.dividedToIntegerBy=Oe.idiv=function(e){var t=this,n=t.constructor;return an(ws(t,new n(e),0,1),n.precision)};Oe.equals=Oe.eq=function(e){return!this.cmp(e)};Oe.exponent=function(){return Gn(this)};Oe.greaterThan=Oe.gt=function(e){return this.cmp(e)>0};Oe.greaterThanOrEqualTo=Oe.gte=function(e){return this.cmp(e)>=0};Oe.isInteger=Oe.isint=function(){return this.e>this.d.length-2};Oe.isNegative=Oe.isneg=function(){return this.s<0};Oe.isPositive=Oe.ispos=function(){return this.s>0};Oe.isZero=function(){return this.s===0};Oe.lessThan=Oe.lt=function(e){return this.cmp(e)<0};Oe.lessThanOrEqualTo=Oe.lte=function(e){return this.cmp(e)<1};Oe.logarithm=Oe.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(mi))throw Error(zi+"NaN");if(n.s<1)throw Error(zi+(n.s?"NaN":"-Infinity"));return n.eq(mi)?new r(0):(wn=!1,t=ws(vf(n,a),vf(e,a),a),wn=!0,an(t,i))};Oe.minus=Oe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?F5(t,e):L5(t,(e.s=-e.s,e))};Oe.modulo=Oe.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(zi+"NaN");return n.s?(wn=!1,t=ws(n,e,0,1).times(e),wn=!0,n.minus(t)):an(new r(n),i)};Oe.naturalExponential=Oe.exp=function(){return B5(this)};Oe.naturalLogarithm=Oe.ln=function(){return vf(this)};Oe.negated=Oe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Oe.plus=Oe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?L5(t,e):F5(t,(e.s=-e.s,e))};Oe.precision=Oe.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Dc+e);if(t=Gn(i)+1,r=i.d.length-1,n=r*gn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Oe.squareRoot=Oe.sqrt=function(){var e,t,n,r,i,a,s,c=this,l=c.constructor;if(c.s<1){if(!c.s)return new l(0);throw Error(zi+"NaN")}for(e=Gn(c),wn=!1,i=Math.sqrt(+c),i==0||i==1/0?(t=Ra(c.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Sd((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new l(t)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(ws(c,a,s+2)).times(.5),Ra(a.d).slice(0,s)===(t=Ra(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(an(a,n+1,0),a.times(a).eq(c)){r=a;break}}else if(t!="9999")break;s+=4}return wn=!0,an(r,n)};Oe.times=Oe.mul=function(e){var t,n,r,i,a,s,c,l,u,d=this,h=d.constructor,f=d.d,p=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,l=f.length,u=p.length,l<u&&(a=f,f=p,p=a,s=l,l=u,u=s),a=[],s=l+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)c=a[i]+p[r]*f[i-r-1]+t,a[i--]=c%cr|0,t=c/cr|0;a[i]=(a[i]+t)%cr|0}for(;!a[--s];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,wn?an(e,h.precision):e};Oe.toDecimalPlaces=Oe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(za(e,0,jd),t===void 0?t=r.rounding:za(t,0,8),an(n,e+Gn(n)+1,t))};Oe.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Xc(r,!0):(za(e,0,jd),t===void 0?t=i.rounding:za(t,0,8),r=an(new i(r),e+1,t),n=Xc(r,!0,e+1)),n};Oe.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Xc(i):(za(e,0,jd),t===void 0?t=a.rounding:za(t,0,8),r=an(new a(i),e+Gn(i)+1,t),n=Xc(r.abs(),!1,e+Gn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Oe.toInteger=Oe.toint=function(){var e=this,t=e.constructor;return an(new t(e),Gn(e)+1,t.rounding)};Oe.toNumber=function(){return+this};Oe.toPower=Oe.pow=function(e){var t,n,r,i,a,s,c=this,l=c.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(mi);if(c=new l(c),!c.s){if(e.s<1)throw Error(zi+"Infinity");return c}if(c.eq(mi))return c;if(r=l.precision,e.eq(mi))return an(c,r);if(t=e.e,n=e.d.length-1,s=t>=n,a=c.s,s){if((n=d<0?-d:d)<=D5){for(i=new l(mi),t=Math.ceil(r/gn+4),wn=!1;n%2&&(i=i.times(c),KC(i.d,t)),n=Sd(n/2),n!==0;)c=c.times(c),KC(c.d,t);return wn=!0,e.s<0?new l(mi).div(i):an(i,r)}}else if(a<0)throw Error(zi+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,c.s=1,wn=!1,i=e.times(vf(c,r+u)),wn=!0,i=B5(i),i.s=a,i};Oe.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=Gn(i),r=Xc(i,n<=a.toExpNeg||n>=a.toExpPos)):(za(e,1,jd),t===void 0?t=a.rounding:za(t,0,8),i=an(new a(i),e,t),n=Gn(i),r=Xc(i,e<=n||n<=a.toExpNeg,e)),r};Oe.toSignificantDigits=Oe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(za(e,1,jd),t===void 0?t=r.rounding:za(t,0,8)),an(new r(n),e,t)};Oe.toString=Oe.valueOf=Oe.val=Oe.toJSON=Oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Gn(e),n=e.constructor;return Xc(e,t<=n.toExpNeg||t>=n.toExpPos)};function L5(e,t){var n,r,i,a,s,c,l,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),wn?an(t,h):t;if(l=e.d,u=t.d,s=e.e,i=t.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,c=u.length):(r=u,i=s,c=l.length),s=Math.ceil(h/gn),c=s>c?s+1:c+1,a>c&&(a=c,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(c=l.length,a=u.length,c-a<0&&(a=c,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/cr|0,l[a]%=cr;for(n&&(l.unshift(n),++i),c=l.length;l[--c]==0;)l.pop();return t.d=l,t.e=i,wn?an(t,h):t}function za(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Dc+e)}function Ra(e){var t,n,r,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)r=e[t]+"",n=gn-r.length,n&&(a+=ho(n)),a+=r;s=e[t],r=s+"",n=gn-r.length,n&&(a+=ho(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var ws=function(){function e(r,i){var a,s=0,c=r.length;for(r=r.slice();c--;)a=r[c]*i+s,r[c]=a%cr|0,s=a/cr|0;return s&&r.unshift(s),r}function t(r,i,a,s){var c,l;if(a!=s)l=a>s?1:-1;else for(c=l=0;c<a;c++)if(r[c]!=i[c]){l=r[c]>i[c]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*cr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var c,l,u,d,h,f,p,m,g,v,b,w,y,_,j,S,E,P,k=r.constructor,T=r.s==i.s?1:-1,A=r.d,R=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(zi+"Division by zero");for(l=r.e-i.e,E=R.length,j=A.length,p=new k(T),m=p.d=[],u=0;R[u]==(A[u]||0);)++u;if(R[u]>(A[u]||0)&&--l,a==null?w=a=k.precision:s?w=a+(Gn(r)-Gn(i))+1:w=a,w<0)return new k(0);if(w=w/gn+2|0,u=0,E==1)for(d=0,R=R[0],w++;(u<j||d)&&w--;u++)y=d*cr+(A[u]||0),m[u]=y/R|0,d=y%R|0;else{for(d=cr/(R[0]+1)|0,d>1&&(R=e(R,d),A=e(A,d),E=R.length,j=A.length),_=E,g=A.slice(0,E),v=g.length;v<E;)g[v++]=0;P=R.slice(),P.unshift(0),S=R[0],R[1]>=cr/2&&++S;do d=0,c=t(R,g,E,v),c<0?(b=g[0],E!=v&&(b=b*cr+(g[1]||0)),d=b/S|0,d>1?(d>=cr&&(d=cr-1),h=e(R,d),f=h.length,v=g.length,c=t(h,g,f,v),c==1&&(d--,n(h,E<f?P:R,f))):(d==0&&(c=d=1),h=R.slice()),f=h.length,f<v&&h.unshift(0),n(g,h,v),c==-1&&(v=g.length,c=t(R,g,E,v),c<1&&(d++,n(g,E<v?P:R,v))),v=g.length):c===0&&(d++,g=[0]),m[u++]=d,c&&g[0]?g[v++]=A[_]||0:(g=[A[_]],v=1);while((_++<j||g[0]!==void 0)&&w--)}return m[0]||m.shift(),p.e=l,an(p,s?a+Gn(p)+1:a)}}();function B5(e,t){var n,r,i,a,s,c,l=0,u=0,d=e.constructor,h=d.precision;if(Gn(e)>16)throw Error(GS+Gn(e));if(!e.s)return new d(mi);for(wn=!1,c=h,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(r=Math.log(fc(2,u))/Math.LN10*2+5|0,c+=r,n=i=a=new d(mi),d.precision=c;;){if(i=an(i.times(e),c),n=n.times(++l),s=a.plus(ws(i,n,c)),Ra(s.d).slice(0,c)===Ra(a.d).slice(0,c)){for(;u--;)a=an(a.times(a),c);return d.precision=h,t==null?(wn=!0,an(a,h)):a}a=s}}function Gn(e){for(var t=e.e*gn,n=e.d[0];n>=10;n/=10)t++;return t}function I0(e,t,n){if(t>e.LN10.sd())throw wn=!0,n&&(e.precision=n),Error(zi+"LN10 precision limit exceeded");return an(new e(e.LN10),t)}function ho(e){for(var t="";e--;)t+="0";return t}function vf(e,t){var n,r,i,a,s,c,l,u,d,h=1,f=10,p=e,m=p.d,g=p.constructor,v=g.precision;if(p.s<1)throw Error(zi+(p.s?"NaN":"-Infinity"));if(p.eq(mi))return new g(0);if(t==null?(wn=!1,u=v):u=t,p.eq(10))return t==null&&(wn=!0),I0(g,u);if(u+=f,g.precision=u,n=Ra(m),r=n.charAt(0),a=Gn(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Ra(p.d),r=n.charAt(0),h++;a=Gn(p),r>1?(p=new g("0."+n),a++):p=new g(r+"."+n.slice(1))}else return l=I0(g,u+2,v).times(a+""),p=vf(new g(r+"."+n.slice(1)),u-f).plus(l),g.precision=v,t==null?(wn=!0,an(p,v)):p;for(c=s=p=ws(p.minus(mi),p.plus(mi),u),d=an(p.times(p),u),i=3;;){if(s=an(s.times(d),u),l=c.plus(ws(s,new g(i),u)),Ra(l.d).slice(0,u)===Ra(c.d).slice(0,u))return c=c.times(2),a!==0&&(c=c.plus(I0(g,u+2,v).times(a+""))),c=ws(c,new g(h),u),g.precision=v,t==null?(wn=!0,an(c,v)):c;c=l,i+=2}}function qC(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Sd(n/gn),e.d=[],r=(n+1)%gn,n<0&&(r+=gn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=gn;r<i;)e.d.push(+t.slice(r,r+=gn));t=t.slice(r),r=gn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),wn&&(e.e>dv||e.e<-dv))throw Error(GS+n)}else e.s=0,e.e=0,e.d=[0];return e}function an(e,t,n){var r,i,a,s,c,l,u,d,h=e.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=t-s,r<0)r+=gn,i=t,u=h[d=0];else{if(d=Math.ceil((r+1)/gn),a=h.length,d>=a)return e;for(u=a=h[d],s=1;a>=10;a/=10)s++;r%=gn,i=r-gn+s}if(n!==void 0&&(a=fc(10,s-i-1),c=u/a%10|0,l=t<0||h[d+1]!==void 0||u%a,l=n<4?(c||l)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||l||n==6&&(r>0?i>0?u/fc(10,s-i):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return l?(a=Gn(e),h.length=1,t=t-a-1,h[0]=fc(10,(gn-t%gn)%gn),e.e=Sd(-t/gn)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=fc(10,gn-r),h[d]=i>0?(u/fc(10,s-i)%fc(10,i)|0)*a:0),l)for(;;)if(d==0){(h[0]+=a)==cr&&(h[0]=1,++e.e);break}else{if(h[d]+=a,h[d]!=cr)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(wn&&(e.e>dv||e.e<-dv))throw Error(GS+Gn(e));return e}function F5(e,t){var n,r,i,a,s,c,l,u,d,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),wn?an(t,p):t;if(l=e.d,h=t.d,r=t.e,u=e.e,l=l.slice(),s=u-r,s){for(d=s<0,d?(n=l,s=-s,c=h.length):(n=h,r=u,c=l.length),i=Math.max(Math.ceil(p/gn),c)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,c=h.length,d=i<c,d&&(c=i),i=0;i<c;i++)if(l[i]!=h[i]){d=l[i]<h[i];break}s=0}for(d&&(n=l,l=h,h=n,t.s=-t.s),c=l.length,i=h.length-c;i>0;--i)l[c++]=0;for(i=h.length;i>s;){if(l[--i]<h[i]){for(a=i;a&&l[--a]===0;)l[a]=cr-1;--l[a],l[i]+=cr}l[i]-=h[i]}for(;l[--c]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=r,wn?an(t,p):t):new f(0)}function Xc(e,t,n){var r,i=Gn(e),a=Ra(e.d),s=a.length;return t?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+ho(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+ho(-i-1)+a,n&&(r=n-s)>0&&(a+=ho(r))):i>=s?(a+=ho(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+ho(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=ho(r))),e.s<0?"-"+a:a}function KC(e,t){if(e.length>t)return e.length=t,!0}function z5(e){var t,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Dc+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return qC(s,a.toString())}else if(typeof a!="string")throw Error(Dc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,ehe.test(a))qC(s,a);else throw Error(Dc+a)}if(i.prototype=Oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=z5,i.config=i.set=the,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function the(e){if(!e||typeof e!="object")throw Error(zi+"Object expected");var t,n,r,i=["precision",1,jd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Sd(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Dc+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Dc+n+": "+r);return this}var WS=z5(Qde);mi=new WS(1);const nn=WS;function nhe(e){return she(e)||ahe(e)||ihe(e)||rhe()}function rhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ihe(e,t){if(e){if(typeof e=="string")return E_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E_(e,t)}}function ahe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function she(e){if(Array.isArray(e))return E_(e)}function E_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ohe=function(t){return t},U5={},H5=function(t){return t===U5},YC=function(t){return function n(){return arguments.length===0||arguments.length===1&&H5(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},che=function e(t,n){return t===1?n:YC(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(c){return c!==U5}).length;return s>=t?n.apply(void 0,i):e(t-s,YC(function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var d=i.map(function(h){return H5(h)?l.shift():h});return n.apply(void 0,nhe(d).concat(l))}))})},ax=function(t){return che(t.length,t)},N_=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},lhe=ax(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),uhe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return ohe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(c,l){return l(c)},a.apply(void 0,arguments))}},P_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},V5=function(t){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(c,l){return c===n[l]})||(n=a,r=t.apply(void 0,a)),r}};function dhe(e){var t;return e===0?t=1:t=Math.floor(new nn(e).abs().log(10).toNumber())+1,t}function hhe(e,t,n){for(var r=new nn(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var fhe=ax(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),phe=ax(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),mhe=ax(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const sx={rangeStep:hhe,getDigitCount:dhe,interpolateNumber:fhe,uninterpolateNumber:phe,uninterpolateTruncation:mhe};function k_(e){return yhe(e)||vhe(e)||G5(e)||ghe()}function ghe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vhe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function yhe(e){if(Array.isArray(e))return C_(e)}function yf(e,t){return whe(e)||bhe(e,t)||G5(e,t)||xhe()}function xhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G5(e,t){if(e){if(typeof e=="string")return C_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C_(e,t)}}function C_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bhe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=e[Symbol.iterator](),c;!(r=(c=s.next()).done)&&(n.push(c.value),!(t&&n.length===t));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function whe(e){if(Array.isArray(e))return e}function W5(e){var t=yf(e,2),n=t[0],r=t[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function q5(e,t,n){if(e.lte(0))return new nn(0);var r=sx.getDigitCount(e.toNumber()),i=new nn(10).pow(r),a=e.div(i),s=r!==1?.05:.1,c=new nn(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=c.mul(i);return t?l:new nn(Math.ceil(l))}function _he(e,t,n){var r=1,i=new nn(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new nn(10).pow(sx.getDigitCount(e)-1),i=new nn(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new nn(Math.floor(e)))}else e===0?i=new nn(Math.floor((t-1)/2)):n||(i=new nn(Math.floor(e)));var s=Math.floor((t-1)/2),c=uhe(lhe(function(l){return i.add(new nn(l-s).mul(r)).toNumber()}),N_);return c(0,t)}function K5(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new nn(0),tickMin:new nn(0),tickMax:new nn(0)};var a=q5(new nn(t).sub(e).div(n-1),r,i),s;e<=0&&t>=0?s=new nn(0):(s=new nn(e).add(t).div(2),s=s.sub(new nn(s).mod(a)));var c=Math.ceil(s.sub(e).div(a).toNumber()),l=Math.ceil(new nn(t).sub(s).div(a).toNumber()),u=c+l+1;return u>n?K5(e,t,n,r,i+1):(u<n&&(l=t>0?l+(n-u):l,c=t>0?c:c+(n-u)),{step:a,tickMin:s.sub(new nn(c).mul(a)),tickMax:s.add(new nn(l).mul(a))})}function jhe(e){var t=yf(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),c=W5([n,r]),l=yf(c,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(k_(N_(0,i-1).map(function(){return 1/0}))):[].concat(k_(N_(0,i-1).map(function(){return-1/0})),[d]);return n>r?P_(h):h}if(u===d)return _he(u,i,a);var f=K5(u,d,s,a),p=f.step,m=f.tickMin,g=f.tickMax,v=sx.rangeStep(m,g.add(new nn(.1).mul(p)),p);return n>r?P_(v):v}function She(e,t){var n=yf(e,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=W5([r,i]),c=yf(s,2),l=c[0],u=c[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var d=Math.max(t,2),h=q5(new nn(u).sub(l).div(d-1),a,0),f=[].concat(k_(sx.rangeStep(new nn(l),new nn(u).sub(new nn(.99).mul(h)),h)),[u]);return r>i?P_(f):f}var Ehe=V5(jhe),Nhe=V5(She),Phe="Invariant failed";function Zc(e,t){throw new Error(Phe)}var khe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hv.apply(this,arguments)}function Che(e,t){return Rhe(e)||Ohe(e,t)||The(e,t)||Ahe()}function Ahe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function The(e,t){if(e){if(typeof e=="string")return XC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XC(e,t)}}function XC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ohe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function Rhe(e){if(Array.isArray(e))return e}function $he(e,t){if(e==null)return{};var n=Ihe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ihe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Mhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z5(r.key),r)}}function Lhe(e,t,n){return t&&Dhe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bhe(e,t,n){return t=fv(t),Fhe(e,Y5()?Reflect.construct(t,n||[],fv(e).constructor):t.apply(e,n))}function Fhe(e,t){if(t&&(Mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zhe(e)}function zhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y5=function(){return!!e})()}function fv(e){return fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fv(e)}function Uhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A_(e,t)}function A_(e,t){return A_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A_(e,t)}function X5(e,t,n){return t=Z5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z5(e){var t=Hhe(e,"string");return Mu(t)=="symbol"?t:t+""}function Hhe(e,t){if(Mu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xp=function(e){function t(){return Mhe(this,t),Bhe(this,t,arguments)}return Uhe(t,e),Lhe(t,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,c=r.dataKey,l=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=$he(r,khe),p=Xe(f,!1);this.props.direction==="x"&&d.type!=="number"&&Zc();var m=l.map(function(g){var v=u(g,c),b=v.x,w=v.y,y=v.value,_=v.errorVal;if(!_)return null;var j=[],S,E;if(Array.isArray(_)){var P=Che(_,2);S=P[0],E=P[1]}else S=E=_;if(a==="vertical"){var k=d.scale,T=w+i,A=T+s,R=T-s,L=k(y-S),B=k(y+E);j.push({x1:B,y1:A,x2:B,y2:R}),j.push({x1:L,y1:T,x2:B,y2:T}),j.push({x1:L,y1:A,x2:L,y2:R})}else if(a==="horizontal"){var G=h.scale,U=b+i,K=U-s,te=U+s,W=G(y-S),fe=G(y+E);j.push({x1:K,y1:fe,x2:te,y2:fe}),j.push({x1:U,y1:W,x2:U,y2:fe}),j.push({x1:K,y1:W,x2:te,y2:W})}return O.createElement(Bt,hv({className:"recharts-errorBar",key:"bar-".concat(j.map(function(be){return"".concat(be.x1,"-").concat(be.x2,"-").concat(be.y1,"-").concat(be.y2)}))},p),j.map(function(be){return O.createElement("line",hv({},be,{key:"line-".concat(be.x1,"-").concat(be.x2,"-").concat(be.y1,"-").concat(be.y2)}))}))});return O.createElement(Bt,{className:"recharts-errorBars"},m)}}])}(O.Component);X5(xp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});X5(xp,"displayName","ErrorBar");function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function ZC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(n),!0).forEach(function(r){Vhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vhe(e,t,n){return t=Ghe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ghe(e){var t=Whe(e,"string");return xf(t)=="symbol"?t:t+""}function Whe(e,t){if(xf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J5=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,s=ci(n,su);if(!s)return null;var c=su.defaultProps,l=c!==void 0?rc(rc({},c),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,p=h.props,m=p.sectors||p.data||[];return d.concat(m.map(function(g){return{type:s.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,p=f!==void 0?rc(rc({},f),h.props):{},m=p.dataKey,g=p.name,v=p.legendType,b=p.hide;return{inactive:b,dataKey:m,type:l.iconType||v||"square",color:qS(h),value:g||m,payload:p}}),rc(rc(rc({},l),su.getWithHeight(s,i)),{},{payload:u,item:s})};function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function JC(e){return Xhe(e)||Yhe(e)||Khe(e)||qhe()}function qhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Khe(e,t){if(e){if(typeof e=="string")return T_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T_(e,t)}}function Yhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xhe(e){if(Array.isArray(e))return T_(e)}function T_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function QC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(n),!0).forEach(function(r){cu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cu(e,t,n){return t=Zhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zhe(e){var t=Jhe(e,"string");return bf(t)=="symbol"?t:t+""}function Jhe(e,t){if(bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rr(e,t,n){return pt(e)||pt(t)?n:ir(t)?yi(e,t,n):st(t)?t(e):n}function Ih(e,t,n,r){var i=Yde(e,function(c){return rr(c,t)});if(n==="number"){var a=i.filter(function(c){return ve(c)||parseFloat(c)});return a.length?[ix(a),rx(a)]:[1/0,-1/0]}var s=r?i.filter(function(c){return!pt(c)}):i;return s.map(function(c){return ir(c)||c instanceof Date?c:""})}var Qhe=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,c=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(c<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<c;u++){var d=u>0?i[u-1].coordinate:i[c-1].coordinate,h=i[u].coordinate,f=u>=c-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Ir(h-d)!==Ir(f-h)){var m=[];if(Ir(f-h)===Ir(l[1]-l[0])){p=f;var g=h+l[1]-l[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{p=d;var v=f+l[1]-l[0];m[0]=Math.min(h,(v+h)/2),m[1]=Math.max(h,(v+h)/2)}var b=[Math.min(h,(p+h)/2),Math.max(h,(p+h)/2)];if(t>b[0]&&t<=b[1]||t>=m[0]&&t<=m[1]){s=i[u].index;break}}else{var w=Math.min(d,f),y=Math.max(d,f);if(t>(w+h)/2&&t<=(y+h)/2){s=i[u].index;break}}}else for(var _=0;_<c;_++)if(_===0&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<c-1&&t>(r[_].coordinate+r[_-1].coordinate)/2&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_===c-1&&t>(r[_].coordinate+r[_-1].coordinate)/2){s=r[_].index;break}return s},qS=function(t){var n,r=t,i=r.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Pn(Pn({},t.type.defaultProps),t.props):t.props,s=a.stroke,c=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:c;break;default:l=c;break}return l},efe=function(t){var n=t.barSize,r=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},c=Object.keys(a),l=0,u=c.length;l<u;l++)for(var d=a[c[l]].stackGroups,h=Object.keys(d),f=0,p=h.length;f<p;f++){var m=d[h[f]],g=m.items,v=m.cateAxisId,b=g.filter(function(E){return bs(E.type).indexOf("Bar")>=0});if(b&&b.length){var w=b[0].type.defaultProps,y=w!==void 0?Pn(Pn({},w),b[0].props):b[0].props,_=y.barSize,j=y[v];s[j]||(s[j]=[]);var S=pt(_)?n:_;s[j].push({item:b[0],stackList:b.slice(1),barSize:pt(S)?void 0:Mr(S,r,0)})}}return s},tfe=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,a=t.sizeList,s=a===void 0?[]:a,c=t.maxBarSize,l=s.length;if(l<1)return null;var u=Mr(n,i,0,!0),d,h=[];if(s[0].barSize===+s[0].barSize){var f=!1,p=i/l,m=s.reduce(function(_,j){return _+j.barSize||0},0);m+=(l-1)*u,m>=i&&(m-=(l-1)*u,u=0),m>=i&&p>0&&(f=!0,p*=.9,m=l*p);var g=(i-m)/2>>0,v={offset:g-u,size:0};d=s.reduce(function(_,j){var S={item:j.item,position:{offset:v.offset+v.size+u,size:f?p:j.barSize}},E=[].concat(JC(_),[S]);return v=E[E.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(P){E.push({item:P,position:v})}),E},h)}else{var b=Mr(r,i,0,!0);i-2*b-(l-1)*u<=0&&(u=0);var w=(i-2*b-(l-1)*u)/l;w>1&&(w>>=0);var y=c===+c?Math.min(w,c):w;d=s.reduce(function(_,j,S){var E=[].concat(JC(_),[{item:j.item,position:{offset:b+(w+u)*S+(w-y)/2,size:y}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(P){E.push({item:P,position:E[E.length-1].position})}),E},h)}return d},nfe=function(t,n,r,i){var a=r.children,s=r.width,c=r.margin,l=s-(c.left||0)-(c.right||0),u=J5({children:a,legendWidth:l});if(u){var d=i||{},h=d.width,f=d.height,p=u.align,m=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&p!=="center"&&ve(t[p]))return Pn(Pn({},t),{},cu({},p,t[p]+(h||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&m!=="middle"&&ve(t[m]))return Pn(Pn({},t),{},cu({},m,t[m]+(f||0)))}return t},rfe=function(t,n,r){return pt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Q5=function(t,n,r,i,a){var s=n.props.children,c=xi(s,xp).filter(function(u){return rfe(i,a,u.props.direction)});if(c&&c.length){var l=c.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=rr(d,r);if(pt(h))return u;var f=Array.isArray(h)?[ix(h),rx(h)]:[h,h],p=l.reduce(function(m,g){var v=rr(d,g,0),b=f[0]-Math.abs(Array.isArray(v)?v[0]:v),w=f[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,m[0]),Math.max(w,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},ife=function(t,n,r,i,a){var s=n.map(function(c){return Q5(t,c,r,a,i)}).filter(function(c){return!pt(c)});return s&&s.length?s.reduce(function(c,l){return[Math.min(c[0],l[0]),Math.max(c[1],l[1])]},[1/0,-1/0]):null},e4=function(t,n,r,i,a){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&Q5(t,l,u,i)||Ih(t,u,r,a)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var c={};return s.reduce(function(l,u){for(var d=0,h=u.length;d<h;d++)c[u[d]]||(c[u[d]]=!0,l.push(u[d]));return l},[])},t4=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},n4=function(t,n,r,i){if(i)return t.map(function(l){return l.coordinate});var a,s,c=t.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||c.push(n),s||c.push(r),c},vs=function(t,n,r){if(!t)return null;var i=t.scale,a=t.duplicateDomain,s=t.type,c=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?Ir(c[0]-c[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:i(f)+u,value:h,offset:u}});return d.filter(function(h){return!hp(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,f){return{coordinate:i(h)+u,value:h,index:f,offset:u}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,f){return{coordinate:i(h)+u,value:a?a[h]:h,index:f,offset:u}})},M0=new WeakMap,Rm=function(t,n){if(typeof n!="function")return t;M0.has(t)||M0.set(t,new WeakMap);var r=M0.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},r4=function(t,n,r){var i=t.scale,a=t.type,s=t.layout,c=t.axisType;if(i==="auto")return s==="radial"&&c==="radiusAxis"?{scale:hf(),realScaleType:"band"}:s==="radial"&&c==="angleAxis"?{scale:ov(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:$h(),realScaleType:"point"}:a==="category"?{scale:hf(),realScaleType:"band"}:{scale:ov(),realScaleType:"linear"};if(qc(i)){var l="scale".concat(Uy(i));return{scale:(WC[l]||$h)(),realScaleType:WC[l]?l:"point"}}return st(i)?{scale:i}:{scale:$h(),realScaleType:"point"}},eA=1e-4,i4=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),a=Math.min(i[0],i[1])-eA,s=Math.max(i[0],i[1])+eA,c=t(n[0]),l=t(n[r-1]);(c<a||c>s||l<a||l>s)&&t.domain([n[0],n[r-1]])}},afe=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},sfe=function(t,n){if(!n||n.length!==2||!ve(n[0])||!ve(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!ve(t[0])||t[0]<r)&&(a[0]=r),(!ve(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},ofe=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,s=0,c=0;c<n;++c){var l=hp(t[c][r][1])?t[c][r][0]:t[c][r][1];l>=0?(t[c][r][0]=a,t[c][r][1]=a+l,a=t[c][r][1]):(t[c][r][0]=s,t[c][r][1]=s+l,s=t[c][r][1])}},cfe=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var c=hp(t[s][r][1])?t[s][r][0]:t[s][r][1];c>=0?(t[s][r][0]=a,t[s][r][1]=a+c,a=t[s][r][1]):(t[s][r][0]=0,t[s][r][1]=0)}},lfe={sign:ofe,expand:kQ,none:ku,silhouette:CQ,wiggle:AQ,positive:cfe},ufe=function(t,n,r){var i=n.map(function(c){return c.props.dataKey}),a=lfe[r],s=PQ().keys(i).value(function(c,l){return+rr(c,l,0)}).order(n_).offset(a);return s(t)},dfe=function(t,n,r,i,a,s){if(!t)return null;var c=s?n.reverse():n,l={},u=c.reduce(function(h,f){var p,m=(p=f.type)!==null&&p!==void 0&&p.defaultProps?Pn(Pn({},f.type.defaultProps),f.props):f.props,g=m.stackId,v=m.hide;if(v)return h;var b=m[r],w=h[b]||{hasStack:!1,stackGroups:{}};if(ir(g)){var y=w.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};y.items.push(f),w.hasStack=!0,w.stackGroups[g]=y}else w.stackGroups[yd("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return Pn(Pn({},h),{},cu({},b,w))},l),d={};return Object.keys(u).reduce(function(h,f){var p=u[f];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,v){var b=p.stackGroups[v];return Pn(Pn({},g),{},cu({},v,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:ufe(t,b.items,a)}))},m)}return Pn(Pn({},h),{},cu({},f,p))},d)},a4=function(t,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,c=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=Ehe(u,a,c);return t.domain([ix(d),rx(d)]),{niceTicks:d}}if(a&&i==="number"){var h=t.domain(),f=Nhe(h,a,c);return{niceTicks:f}}return null};function tA(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,a=e.index,s=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!pt(i[t.dataKey])){var c=Fg(n,"value",i[t.dataKey]);if(c)return c.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=rr(i,pt(s)?t.dataKey:s);return pt(l)?null:t.scale(l)}var nA=function(t){var n=t.axis,r=t.ticks,i=t.offset,a=t.bandSize,s=t.entry,c=t.index;if(n.type==="category")return r[c]?r[c].coordinate+i:null;var l=rr(s,n.dataKey,n.domain[c]);return pt(l)?null:n.scale(l)-a/2+i},hfe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},ffe=function(t,n){var r,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Pn(Pn({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(ir(a)){var s=n[a];if(s){var c=s.items.indexOf(t);return c>=0?s.stackedData[c]:null}}return null},pfe=function(t){return t.reduce(function(n,r){return[ix(r.concat([n[0]]).filter(ve)),rx(r.concat([n[1]]).filter(ve))]},[1/0,-1/0])},s4=function(t,n,r){return Object.keys(t).reduce(function(i,a){var s=t[a],c=s.stackedData,l=c.reduce(function(u,d){var h=pfe(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},rA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,O_=function(t,n,r){if(st(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(ve(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(rA.test(t[0])){var a=+rA.exec(t[0])[1];i[0]=n[0]-a}else st(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(ve(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if(iA.test(t[1])){var s=+iA.exec(t[1])[1];i[1]=n[1]+s}else st(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},pv=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var a=wS(n,function(h){return h.coordinate}),s=1/0,c=1,l=a.length;c<l;c++){var u=a[c],d=a[c-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},aA=function(t,n,r){return!t||!t.length||yp(t,yi(r,"type.defaultProps.domain"))?n:t},o4=function(t,n){var r=t.type.defaultProps?Pn(Pn({},t.type.defaultProps),t.props):t.props,i=r.dataKey,a=r.name,s=r.unit,c=r.formatter,l=r.tooltipType,u=r.chartType,d=r.hide;return Pn(Pn({},Xe(t,!1)),{},{dataKey:i,unit:s,formatter:c,name:a||i,color:qS(t),value:rr(n,i),type:l,payload:n,chartType:u,hide:d})};function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function sA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(n),!0).forEach(function(r){c4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c4(e,t,n){return t=mfe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mfe(e){var t=gfe(e,"string");return wf(t)=="symbol"?t:t+""}function gfe(e,t){if(wf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vfe(e,t){return wfe(e)||bfe(e,t)||xfe(e,t)||yfe()}function yfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xfe(e,t){if(e){if(typeof e=="string")return oA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oA(e,t)}}function oA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function wfe(e){if(Array.isArray(e))return e}var mv=Math.PI/180,_fe=function(t){return t*180/Math.PI},un=function(t,n,r,i){return{x:t+Math.cos(-mv*i)*r,y:n+Math.sin(-mv*i)*r}},l4=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},jfe=function(t,n,r,i,a){var s=t.width,c=t.height,l=t.startAngle,u=t.endAngle,d=Mr(t.cx,s,s/2),h=Mr(t.cy,c,c/2),f=l4(s,c,r),p=Mr(t.innerRadius,f,0),m=Mr(t.outerRadius,f,f*.8),g=Object.keys(n);return g.reduce(function(v,b){var w=n[b],y=w.domain,_=w.reversed,j;if(pt(w.range))i==="angleAxis"?j=[l,u]:i==="radiusAxis"&&(j=[p,m]),_&&(j=[j[1],j[0]]);else{j=w.range;var S=j,E=vfe(S,2);l=E[0],u=E[1]}var P=r4(w,a),k=P.realScaleType,T=P.scale;T.domain(y).range(j),i4(T);var A=a4(T,hs(hs({},w),{},{realScaleType:k})),R=hs(hs(hs({},w),A),{},{range:j,radius:m,realScaleType:k,scale:T,cx:d,cy:h,innerRadius:p,outerRadius:m,startAngle:l,endAngle:u});return hs(hs({},v),{},c4({},b,R))},{})},Sfe=function(t,n){var r=t.x,i=t.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},Efe=function(t,n){var r=t.x,i=t.y,a=n.cx,s=n.cy,c=Sfe({x:r,y:i},{x:a,y:s});if(c<=0)return{radius:c};var l=(r-a)/c,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:c,angle:_fe(u),angleInRadian:u}},Nfe=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},Pfe=function(t,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),c=Math.min(a,s);return t+c*360},cA=function(t,n){var r=t.x,i=t.y,a=Efe({x:r,y:i},n),s=a.radius,c=a.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var d=Nfe(n),h=d.startAngle,f=d.endAngle,p=c,m;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}return m?hs(hs({},n),{},{radius:s,angle:Pfe(p,n)}):null},u4=function(t){return!x.isValidElement(t)&&!st(t)&&typeof t!="boolean"?t.className:""};function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}var kfe=["offset"];function Cfe(e){return Rfe(e)||Ofe(e)||Tfe(e)||Afe()}function Afe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tfe(e,t){if(e){if(typeof e=="string")return R_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R_(e,t)}}function Ofe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rfe(e){if(Array.isArray(e))return R_(e)}function R_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $fe(e,t){if(e==null)return{};var n=Ife(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ife(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function lA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lA(Object(n),!0).forEach(function(r){Mfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mfe(e,t,n){return t=Dfe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dfe(e){var t=Lfe(e,"string");return _f(t)=="symbol"?t:t+""}function Lfe(e,t){if(_f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jf(){return jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jf.apply(this,arguments)}var Bfe=function(t){var n=t.value,r=t.formatter,i=pt(t.children)?n:t.children;return st(r)?r(i):i},Ffe=function(t,n){var r=Ir(n-t),i=Math.min(Math.abs(n-t),360);return r*i},zfe=function(t,n,r){var i=t.position,a=t.viewBox,s=t.offset,c=t.className,l=a,u=l.cx,d=l.cy,h=l.innerRadius,f=l.outerRadius,p=l.startAngle,m=l.endAngle,g=l.clockWise,v=(h+f)/2,b=Ffe(p,m),w=b>=0?1:-1,y,_;i==="insideStart"?(y=p+w*s,_=g):i==="insideEnd"?(y=m-w*s,_=!g):i==="end"&&(y=m+w*s,_=g),_=b<=0?_:!_;var j=un(u,d,v,y),S=un(u,d,v,y+(_?1:-1)*359),E="M".concat(j.x,",").concat(j.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(S.x,",").concat(S.y),P=pt(t.id)?yd("recharts-radial-line-"):t.id;return O.createElement("text",jf({},r,{dominantBaseline:"central",className:ct("recharts-radial-bar-label",c)}),O.createElement("defs",null,O.createElement("path",{id:P,d:E})),O.createElement("textPath",{xlinkHref:"#".concat(P)},n))},Ufe=function(t){var n=t.viewBox,r=t.offset,i=t.position,a=n,s=a.cx,c=a.cy,l=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,f=(d+h)/2;if(i==="outside"){var p=un(s,c,u+r,f),m=p.x,g=p.y;return{x:m,y:g,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,b=un(s,c,v,f),w=b.x,y=b.y;return{x:w,y,textAnchor:"middle",verticalAnchor:"middle"}},Hfe=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,a=t.position,s=n,c=s.x,l=s.y,u=s.width,d=s.height,h=d>=0?1:-1,f=h*i,p=h>0?"end":"start",m=h>0?"start":"end",g=u>=0?1:-1,v=g*i,b=g>0?"end":"start",w=g>0?"start":"end";if(a==="top"){var y={x:c+u/2,y:l-h*i,textAnchor:"middle",verticalAnchor:p};return Xn(Xn({},y),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var _={x:c+u/2,y:l+d+f,textAnchor:"middle",verticalAnchor:m};return Xn(Xn({},_),r?{height:Math.max(r.y+r.height-(l+d),0),width:u}:{})}if(a==="left"){var j={x:c-v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return Xn(Xn({},j),r?{width:Math.max(j.x-r.x,0),height:d}:{})}if(a==="right"){var S={x:c+u+v,y:l+d/2,textAnchor:w,verticalAnchor:"middle"};return Xn(Xn({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:d}:{})}var E=r?{width:u,height:d}:{};return a==="insideLeft"?Xn({x:c+v,y:l+d/2,textAnchor:w,verticalAnchor:"middle"},E):a==="insideRight"?Xn({x:c+u-v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},E):a==="insideTop"?Xn({x:c+u/2,y:l+f,textAnchor:"middle",verticalAnchor:m},E):a==="insideBottom"?Xn({x:c+u/2,y:l+d-f,textAnchor:"middle",verticalAnchor:p},E):a==="insideTopLeft"?Xn({x:c+v,y:l+f,textAnchor:w,verticalAnchor:m},E):a==="insideTopRight"?Xn({x:c+u-v,y:l+f,textAnchor:b,verticalAnchor:m},E):a==="insideBottomLeft"?Xn({x:c+v,y:l+d-f,textAnchor:w,verticalAnchor:p},E):a==="insideBottomRight"?Xn({x:c+u-v,y:l+d-f,textAnchor:b,verticalAnchor:p},E):pd(a)&&(ve(a.x)||jc(a.x))&&(ve(a.y)||jc(a.y))?Xn({x:c+Mr(a.x,u),y:l+Mr(a.y,d),textAnchor:"end",verticalAnchor:"end"},E):Xn({x:c+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},E)},Vfe=function(t){return"cx"in t&&ve(t.cx)};function lr(e){var t=e.offset,n=t===void 0?5:t,r=$fe(e,kfe),i=Xn({offset:n},r),a=i.viewBox,s=i.position,c=i.value,l=i.children,u=i.content,d=i.className,h=d===void 0?"":d,f=i.textBreakAll;if(!a||pt(c)&&pt(l)&&!x.isValidElement(u)&&!st(u))return null;if(x.isValidElement(u))return x.cloneElement(u,i);var p;if(st(u)){if(p=x.createElement(u,i),x.isValidElement(p))return p}else p=Bfe(i);var m=Vfe(a),g=Xe(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return zfe(i,p,g);var v=m?Ufe(i):Hfe(i);return O.createElement(Yc,jf({className:ct("recharts-label",h)},g,v,{breakAll:f}),p)}lr.displayName="Label";var d4=function(t){var n=t.cx,r=t.cy,i=t.angle,a=t.startAngle,s=t.endAngle,c=t.r,l=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,f=t.y,p=t.top,m=t.left,g=t.width,v=t.height,b=t.clockWise,w=t.labelViewBox;if(w)return w;if(ve(g)&&ve(v)){if(ve(h)&&ve(f))return{x:h,y:f,width:g,height:v};if(ve(p)&&ve(m))return{x:p,y:m,width:g,height:v}}return ve(h)&&ve(f)?{x:h,y:f,width:0,height:0}:ve(n)&&ve(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||l||c||0,clockWise:b}:t.viewBox?t.viewBox:{}},Gfe=function(t,n){return t?t===!0?O.createElement(lr,{key:"label-implicit",viewBox:n}):ir(t)?O.createElement(lr,{key:"label-implicit",viewBox:n,value:t}):x.isValidElement(t)?t.type===lr?x.cloneElement(t,{key:"label-implicit",viewBox:n}):O.createElement(lr,{key:"label-implicit",content:t,viewBox:n}):st(t)?O.createElement(lr,{key:"label-implicit",content:t,viewBox:n}):pd(t)?O.createElement(lr,jf({viewBox:n},t,{key:"label-implicit"})):null:null},Wfe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,a=d4(t),s=xi(i,lr).map(function(l,u){return x.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var c=Gfe(t.label,n||a);return[c].concat(Cfe(s))};lr.parseViewBox=d4;lr.renderCallByParent=Wfe;function qfe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Kfe=qfe;const Yfe=rn(Kfe);function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}var Xfe=["valueAccessor"],Zfe=["data","dataKey","clockWise","id","textBreakAll"];function Jfe(e){return npe(e)||tpe(e)||epe(e)||Qfe()}function Qfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function epe(e,t){if(e){if(typeof e=="string")return $_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $_(e,t)}}function tpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function npe(e){if(Array.isArray(e))return $_(e)}function $_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gv.apply(this,arguments)}function uA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uA(Object(n),!0).forEach(function(r){rpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rpe(e,t,n){return t=ipe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ipe(e){var t=ape(e,"string");return Sf(t)=="symbol"?t:t+""}function ape(e,t){if(Sf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hA(e,t){if(e==null)return{};var n=spe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function spe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var ope=function(t){return Array.isArray(t.value)?Yfe(t.value):t.value};function _s(e){var t=e.valueAccessor,n=t===void 0?ope:t,r=hA(e,Xfe),i=r.data,a=r.dataKey,s=r.clockWise,c=r.id,l=r.textBreakAll,u=hA(r,Zfe);return!i||!i.length?null:O.createElement(Bt,{className:"recharts-label-list"},i.map(function(d,h){var f=pt(a)?n(d,h):rr(d&&d.payload,a),p=pt(c)?{}:{id:"".concat(c,"-").concat(h)};return O.createElement(lr,gv({},Xe(d,!0),u,p,{parentViewBox:d.parentViewBox,value:f,textBreakAll:l,viewBox:lr.parseViewBox(pt(s)?d:dA(dA({},d),{},{clockWise:s})),key:"label-".concat(h),index:h}))}))}_s.displayName="LabelList";function cpe(e,t){return e?e===!0?O.createElement(_s,{key:"labelList-implicit",data:t}):O.isValidElement(e)||st(e)?O.createElement(_s,{key:"labelList-implicit",data:t,content:e}):pd(e)?O.createElement(_s,gv({data:t},e,{key:"labelList-implicit"})):null:null}function lpe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=xi(r,_s).map(function(s,c){return x.cloneElement(s,{data:t,key:"labelList-".concat(c)})});if(!n)return i;var a=cpe(e.label,t);return[a].concat(Jfe(i))}_s.renderCallByParent=lpe;function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(e)}function I_(){return I_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I_.apply(this,arguments)}function fA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(n),!0).forEach(function(r){upe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function upe(e,t,n){return t=dpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dpe(e){var t=hpe(e,"string");return Ef(t)=="symbol"?t:t+""}function hpe(e,t){if(Ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fpe=function(t,n){var r=Ir(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},$m=function(t){var n=t.cx,r=t.cy,i=t.radius,a=t.angle,s=t.sign,c=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,d=l*(c?1:-1)+i,h=Math.asin(l/d)/mv,f=u?a:a+s*h,p=un(n,r,d,f),m=un(n,r,i,f),g=u?a-s*h:a,v=un(n,r,d*Math.cos(h*mv),g);return{center:p,circleTangency:m,lineTangency:v,theta:h}},h4=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.startAngle,c=t.endAngle,l=fpe(s,c),u=s+l,d=un(n,r,a,s),h=un(n,r,a,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var p=un(n,r,i,s),m=un(n,r,i,u);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},ppe=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.cornerRadius,c=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=Ir(d-u),f=$m({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:s,cornerIsExternal:l}),p=f.circleTangency,m=f.lineTangency,g=f.theta,v=$m({cx:n,cy:r,radius:a,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:l}),b=v.circleTangency,w=v.lineTangency,y=v.theta,_=l?Math.abs(u-d):Math.abs(u-d)-g-y;if(_<0)return c?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):h4({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var j="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(_>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var S=$m({cx:n,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),E=S.circleTangency,P=S.lineTangency,k=S.theta,T=$m({cx:n,cy:r,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),A=T.circleTangency,R=T.lineTangency,L=T.theta,B=l?Math.abs(u-d):Math.abs(u-d)-k-L;if(B<0&&s===0)return"".concat(j,"L").concat(n,",").concat(r,"Z");j+="L".concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(B>180),",").concat(+(h>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,"Z")}else j+="L".concat(n,",").concat(r,"Z");return j},mpe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},f4=function(t){var n=pA(pA({},mpe),t),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,c=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(s<a||d===h)return null;var p=ct("recharts-sector",f),m=s-a,g=Mr(c,m,0,!0),v;return g>0&&Math.abs(d-h)<360?v=ppe({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}):v=h4({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:h}),O.createElement("path",I_({},Xe(n,!0),{className:p,d:v,role:"img"}))};function Nf(e){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nf(e)}function M_(){return M_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M_.apply(this,arguments)}function mA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(n),!0).forEach(function(r){gpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gpe(e,t,n){return t=vpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vpe(e){var t=ype(e,"string");return Nf(t)=="symbol"?t:t+""}function ype(e,t){if(Nf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vA={curveBasisClosed:gQ,curveBasisOpen:vQ,curveBasis:mQ,curveBumpX:tQ,curveBumpY:nQ,curveLinearClosed:yQ,curveLinear:Vy,curveMonotoneX:xQ,curveMonotoneY:bQ,curveNatural:wQ,curveStep:_Q,curveStepAfter:SQ,curveStepBefore:jQ},Im=function(t){return t.x===+t.x&&t.y===+t.y},rh=function(t){return t.x},ih=function(t){return t.y},xpe=function(t,n){if(st(t))return t;var r="curve".concat(Uy(t));return(r==="curveMonotone"||r==="curveBump")&&n?vA["".concat(r).concat(n==="vertical"?"Y":"X")]:vA[r]||Vy},bpe=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,s=t.baseLine,c=t.layout,l=t.connectNulls,u=l===void 0?!1:l,d=xpe(r,c),h=u?a.filter(function(g){return Im(g)}):a,f;if(Array.isArray(s)){var p=u?s.filter(function(g){return Im(g)}):s,m=h.map(function(g,v){return gA(gA({},g),{},{base:p[v]})});return c==="vertical"?f=Sm().y(ih).x1(rh).x0(function(g){return g.base.x}):f=Sm().x(rh).y1(ih).y0(function(g){return g.base.y}),f.defined(Im).curve(d),f(m)}return c==="vertical"&&ve(s)?f=Sm().y(ih).x1(rh).x0(s):ve(s)?f=Sm().x(rh).y1(ih).y0(s):f=oL().x(rh).y(ih),f.defined(Im).curve(d),f(h)},vv=function(t){var n=t.className,r=t.points,i=t.path,a=t.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?bpe(t):i;return x.createElement("path",M_({},Xe(t,!1),zg(t),{className:ct("recharts-curve",n),d:s,ref:a}))},p4={exports:{}},wpe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_pe=wpe,jpe=_pe;function m4(){}function g4(){}g4.resetWarningCache=m4;var Spe=function(){function e(r,i,a,s,c,l){if(l!==jpe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:g4,resetWarningCache:m4};return n.PropTypes=n,n};p4.exports=Spe();var Epe=p4.exports;const Vt=rn(Epe);var Npe=Object.getOwnPropertyNames,Ppe=Object.getOwnPropertySymbols,kpe=Object.prototype.hasOwnProperty;function yA(e,t){return function(r,i,a){return e(r,i,a)&&t(r,i,a)}}function Mm(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var a=i.cache,s=a.get(n),c=a.get(r);if(s&&c)return s===r&&c===n;a.set(n,r),a.set(r,n);var l=e(n,r,i);return a.delete(n),a.delete(r),l}}function Cpe(e){return e!=null?e[Symbol.toStringTag]:void 0}function xA(e){return Npe(e).concat(Ppe(e))}var Ape=Object.hasOwn||function(e,t){return kpe.call(e,t)};function cl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Tpe="__v",Ope="__o",Rpe="_owner",bA=Object.getOwnPropertyDescriptor,wA=Object.keys;function $pe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Ipe(e,t){return cl(e.getTime(),t.getTime())}function Mpe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Dpe(e,t){return e===t}function _A(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.entries(),s,c,l=0;(s=a.next())&&!s.done;){for(var u=t.entries(),d=!1,h=0;(c=u.next())&&!c.done;){if(i[h]){h++;continue}var f=s.value,p=c.value;if(n.equals(f[0],p[0],l,h,e,t,n)&&n.equals(f[1],p[1],f[0],p[0],e,t,n)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}var Lpe=cl;function Bpe(e,t,n){var r=wA(e),i=r.length;if(wA(t).length!==i)return!1;for(;i-- >0;)if(!v4(e,t,n,r[i]))return!1;return!0}function ah(e,t,n){var r=xA(e),i=r.length;if(xA(t).length!==i)return!1;for(var a,s,c;i-- >0;)if(a=r[i],!v4(e,t,n,a)||(s=bA(e,a),c=bA(t,a),(s||c)&&(!s||!c||s.configurable!==c.configurable||s.enumerable!==c.enumerable||s.writable!==c.writable)))return!1;return!0}function Fpe(e,t){return cl(e.valueOf(),t.valueOf())}function zpe(e,t){return e.source===t.source&&e.flags===t.flags}function jA(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.values(),s,c;(s=a.next())&&!s.done;){for(var l=t.values(),u=!1,d=0;(c=l.next())&&!c.done;){if(!i[d]&&n.equals(s.value,c.value,s.value,c.value,e,t,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Upe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Hpe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function v4(e,t,n,r){return(r===Rpe||r===Ope||r===Tpe)&&(e.$$typeof||t.$$typeof)?!0:Ape(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var Vpe="[object Arguments]",Gpe="[object Boolean]",Wpe="[object Date]",qpe="[object Error]",Kpe="[object Map]",Ype="[object Number]",Xpe="[object Object]",Zpe="[object RegExp]",Jpe="[object Set]",Qpe="[object String]",eme="[object URL]",tme=Array.isArray,SA=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,EA=Object.assign,nme=Object.prototype.toString.call.bind(Object.prototype.toString);function rme(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,c=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,f=e.areUrlsEqual,p=e.unknownTagComparators;return function(g,v,b){if(g===v)return!0;if(g==null||v==null)return!1;var w=typeof g;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?s(g,v,b):w==="function"?i(g,v,b):!1;var y=g.constructor;if(y!==v.constructor)return!1;if(y===Object)return c(g,v,b);if(tme(g))return t(g,v,b);if(SA!=null&&SA(g))return h(g,v,b);if(y===Date)return n(g,v,b);if(y===RegExp)return u(g,v,b);if(y===Map)return a(g,v,b);if(y===Set)return d(g,v,b);var _=nme(g);if(_===Wpe)return n(g,v,b);if(_===Zpe)return u(g,v,b);if(_===Kpe)return a(g,v,b);if(_===Jpe)return d(g,v,b);if(_===Xpe)return typeof g.then!="function"&&typeof v.then!="function"&&c(g,v,b);if(_===eme)return f(g,v,b);if(_===qpe)return r(g,v,b);if(_===Vpe)return c(g,v,b);if(_===Gpe||_===Ype||_===Qpe)return l(g,v,b);if(p){var j=p[_];if(!j){var S=Cpe(g);S&&(j=p[S])}if(j)return j(g,v,b)}return!1}}function ime(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?ah:$pe,areDatesEqual:Ipe,areErrorsEqual:Mpe,areFunctionsEqual:Dpe,areMapsEqual:r?yA(_A,ah):_A,areNumbersEqual:Lpe,areObjectsEqual:r?ah:Bpe,arePrimitiveWrappersEqual:Fpe,areRegExpsEqual:zpe,areSetsEqual:r?yA(jA,ah):jA,areTypedArraysEqual:r?ah:Upe,areUrlsEqual:Hpe,unknownTagComparators:void 0};if(n&&(i=EA({},i,n(i))),t){var a=Mm(i.areArraysEqual),s=Mm(i.areMapsEqual),c=Mm(i.areObjectsEqual),l=Mm(i.areSetsEqual);i=EA({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:c,areSetsEqual:l})}return i}function ame(e){return function(t,n,r,i,a,s,c){return e(t,n,c)}}function sme(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,a=e.strict;if(r)return function(l,u){var d=r(),h=d.cache,f=h===void 0?t?new WeakMap:void 0:h,p=d.meta;return n(l,u,{cache:f,equals:i,meta:p,strict:a})};if(t)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return n(l,u,s)}}var ome=Bo();Bo({strict:!0});Bo({circular:!0});Bo({circular:!0,strict:!0});Bo({createInternalComparator:function(){return cl}});Bo({strict:!0,createInternalComparator:function(){return cl}});Bo({circular:!0,createInternalComparator:function(){return cl}});Bo({circular:!0,createInternalComparator:function(){return cl},strict:!0});function Bo(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,a=e.strict,s=a===void 0?!1:a,c=ime(e),l=rme(c),u=r?r(l):ame(l);return sme({circular:n,comparator:l,createState:i,equals:u,strict:s})}function cme(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function NA(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):cme(i)};requestAnimationFrame(r)}function D_(e){"@babel/helpers - typeof";return D_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D_(e)}function lme(e){return fme(e)||hme(e)||dme(e)||ume()}function ume(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dme(e,t){if(e){if(typeof e=="string")return PA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PA(e,t)}}function PA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fme(e){if(Array.isArray(e))return e}function pme(){var e={},t=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,c=lme(s),l=c[0],u=c.slice(1);if(typeof l=="number"){NA(i.bind(null,u),l);return}i(l),NA(i.bind(null,u));return}D_(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function Pf(e){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}function kA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(n),!0).forEach(function(r){y4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y4(e,t,n){return t=mme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mme(e){var t=gme(e,"string");return Pf(t)==="symbol"?t:String(t)}function gme(e,t){if(Pf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Pf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vme=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},yme=function(t){return t},xme=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Mh=function(t,n){return Object.keys(n).reduce(function(r,i){return CA(CA({},r),{},y4({},i,t(i,n[i])))},{})},AA=function(t,n,r){return t.map(function(i){return"".concat(xme(i)," ").concat(n,"ms ").concat(r)}).join(",")};function bme(e,t){return jme(e)||_me(e,t)||x4(e,t)||wme()}function wme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _me(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function jme(e){if(Array.isArray(e))return e}function Sme(e){return Pme(e)||Nme(e)||x4(e)||Eme()}function Eme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x4(e,t){if(e){if(typeof e=="string")return L_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L_(e,t)}}function Nme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pme(e){if(Array.isArray(e))return L_(e)}function L_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yv=1e-4,b4=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},w4=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},TA=function(t,n){return function(r){var i=b4(t,n);return w4(i,r)}},kme=function(t,n){return function(r){var i=b4(t,n),a=[].concat(Sme(i.map(function(s,c){return s*c}).slice(1)),[0]);return w4(a,r)}},OA=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],c=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,c=1;break;case"ease":i=.25,a=.1,s=.25,c=1;break;case"ease-in":i=.42,a=0,s=1,c=1;break;case"ease-out":i=.42,a=0,s=.58,c=1;break;case"ease-in-out":i=0,a=0,s=.58,c=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=bme(u,4);i=d[0],a=d[1],s=d[2],c=d[3]}}}var h=TA(i,s),f=TA(a,c),p=kme(i,s),m=function(b){return b>1?1:b<0?0:b},g=function(b){for(var w=b>1?1:b,y=w,_=0;_<8;++_){var j=h(y)-w,S=p(y);if(Math.abs(j-w)<yv||S<yv)return f(y);y=m(y-j/S)}return f(y)};return g.isStepper=!1,g},Cme=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,s=t.dt,c=s===void 0?17:s,l=function(d,h,f){var p=-(d-h)*r,m=f*a,g=f+(p-m)*c/1e3,v=f*c/1e3+d;return Math.abs(v-h)<yv&&Math.abs(g)<yv?[h,0]:[v,g]};return l.isStepper=!0,l.dt=c,l},Ame=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return OA(i);case"spring":return Cme();default:if(i.split("(")[0]==="cubic-bezier")return OA(i)}return typeof i=="function"?i:null};function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function RA(e){return Rme(e)||Ome(e)||_4(e)||Tme()}function Tme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ome(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rme(e){if(Array.isArray(e))return F_(e)}function $A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(n),!0).forEach(function(r){B_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B_(e,t,n){return t=$me(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $me(e){var t=Ime(e,"string");return kf(t)==="symbol"?t:String(t)}function Ime(e,t){if(kf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mme(e,t){return Bme(e)||Lme(e,t)||_4(e,t)||Dme()}function Dme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _4(e,t){if(e){if(typeof e=="string")return F_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F_(e,t)}}function F_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function Bme(e){if(Array.isArray(e))return e}var xv=function(t,n,r){return t+(n-t)*r},z_=function(t){var n=t.from,r=t.to;return n!==r},Fme=function e(t,n,r){var i=Mh(function(a,s){if(z_(s)){var c=t(s.from,s.to,s.velocity),l=Mme(c,2),u=l[0],d=l[1];return gr(gr({},s),{},{from:u,velocity:d})}return s},n);return r<1?Mh(function(a,s){return z_(s)?gr(gr({},s),{},{velocity:xv(s.velocity,i[a].velocity,r),from:xv(s.from,i[a].from,r)}):s},n):e(t,i,r-1)};const zme=function(e,t,n,r,i){var a=vme(e,t),s=a.reduce(function(v,b){return gr(gr({},v),{},B_({},b,[e[b],t[b]]))},{}),c=a.reduce(function(v,b){return gr(gr({},v),{},B_({},b,{from:e[b],velocity:0,to:t[b]}))},{}),l=-1,u,d,h=function(){return null},f=function(){return Mh(function(b,w){return w.from},c)},p=function(){return!Object.values(c).filter(z_).length},m=function(b){u||(u=b);var w=b-u,y=w/n.dt;c=Fme(n,c,y),i(gr(gr(gr({},e),t),f())),u=b,p()||(l=requestAnimationFrame(h))},g=function(b){d||(d=b);var w=(b-d)/r,y=Mh(function(j,S){return xv.apply(void 0,RA(S).concat([n(w)]))},s);if(i(gr(gr(gr({},e),t),y)),w<1)l=requestAnimationFrame(h);else{var _=Mh(function(j,S){return xv.apply(void 0,RA(S).concat([n(1)]))},s);i(gr(gr(gr({},e),t),_))}};return h=n.isStepper?m:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(l)}}};function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}var Ume=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Hme(e,t){if(e==null)return{};var n=Vme(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Vme(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function D0(e){return Kme(e)||qme(e)||Wme(e)||Gme()}function Gme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wme(e,t){if(e){if(typeof e=="string")return U_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U_(e,t)}}function qme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kme(e){if(Array.isArray(e))return U_(e)}function U_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function IA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IA(Object(n),!0).forEach(function(r){jh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jh(e,t,n){return t=j4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j4(r.key),r)}}function Zme(e,t,n){return t&&Xme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j4(e){var t=Jme(e,"string");return Du(t)==="symbol"?t:String(t)}function Jme(e,t){if(Du(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Du(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H_(e,t)}function H_(e,t){return H_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},H_(e,t)}function ege(e){var t=tge();return function(){var r=bv(e),i;if(t){var a=bv(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return V_(this,i)}}function V_(e,t){if(t&&(Du(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G_(e)}function G_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bv(e){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bv(e)}var Ua=function(e){Qme(n,e);var t=ege(n);function n(r,i){var a;Yme(this,n),a=t.call(this,r,i);var s=a.props,c=s.isActive,l=s.attributeName,u=s.from,d=s.to,h=s.steps,f=s.children,p=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(G_(a)),a.changeStyle=a.changeStyle.bind(G_(a)),!c||p<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:d}),V_(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof f=="function")return a.state={style:u},V_(a);a.state={style:l?jh({},l,u):u}}else a.state={style:{}};return a}return Zme(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,c=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,f=this.state.style;if(c){if(!s){var p={style:l?jh({},l,d):d};this.state&&f&&(l&&f[l]!==d||!l&&f!==d)&&this.setState(p);return}if(!(ome(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||u?h:i.to;if(this.state&&f){var v={style:l?jh({},l,g):g};(l&&f[l]!==g||!l&&f!==g)&&this.setState(v)}this.runAnimation(ea(ea({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,c=i.to,l=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,p=zme(s,c,Ame(u),l,this.changeStyle),m=function(){a.stopJSAnimation=p()};this.manager.start([f,d,m,l,h])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,c=i.begin,l=i.onAnimationStart,u=s[0],d=u.style,h=u.duration,f=h===void 0?0:h,p=function(g,v,b){if(b===0)return g;var w=v.duration,y=v.easing,_=y===void 0?"ease":y,j=v.style,S=v.properties,E=v.onAnimationEnd,P=b>0?s[b-1]:v,k=S||Object.keys(j);if(typeof _=="function"||_==="spring")return[].concat(D0(g),[a.runJSAnimation.bind(a,{from:P.style,to:j,duration:w,easing:_}),w]);var T=AA(k,w,_),A=ea(ea(ea({},P.style),j),{},{transition:T});return[].concat(D0(g),[A,w,E]).filter(yme)};return this.manager.start([l].concat(D0(s.reduce(p,[d,Math.max(f,c)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=pme());var a=i.begin,s=i.duration,c=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var g=c?jh({},c,l):l,v=AA(Object.keys(g),s,u);m.start([d,a,ea(ea({},g),{},{transition:v}),s,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var c=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Hme(i,Ume),u=x.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!c||u===0||s<=0)return a;var h=function(p){var m=p.props,g=m.style,v=g===void 0?{}:g,b=m.className,w=x.cloneElement(p,ea(ea({},l),{},{style:ea(ea({},v),d),className:b}));return w};return u===1?h(x.Children.only(a)):O.createElement("div",null,x.Children.map(a,function(f){return h(f)}))}}]),n}(x.PureComponent);Ua.displayName="Animate";Ua.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ua.propTypes={from:Vt.oneOfType([Vt.object,Vt.string]),to:Vt.oneOfType([Vt.object,Vt.string]),attributeName:Vt.string,duration:Vt.number,begin:Vt.number,easing:Vt.oneOfType([Vt.string,Vt.func]),steps:Vt.arrayOf(Vt.shape({duration:Vt.number.isRequired,style:Vt.object.isRequired,easing:Vt.oneOfType([Vt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Vt.func]),properties:Vt.arrayOf("string"),onAnimationEnd:Vt.func})),children:Vt.oneOfType([Vt.node,Vt.func]),isActive:Vt.bool,canBegin:Vt.bool,onAnimationEnd:Vt.func,shouldReAnimate:Vt.bool,onAnimationStart:Vt.func,onAnimationReStart:Vt.func};function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wv.apply(this,arguments)}function nge(e,t){return sge(e)||age(e,t)||ige(e,t)||rge()}function rge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ige(e,t){if(e){if(typeof e=="string")return MA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MA(e,t)}}function MA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function age(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function sge(e){if(Array.isArray(e))return e}function DA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(n),!0).forEach(function(r){oge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oge(e,t,n){return t=cge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cge(e){var t=lge(e,"string");return Cf(t)=="symbol"?t:t+""}function lge(e,t){if(Cf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BA=function(t,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),c=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,p=4;f<p;f++)h[f]=a[f]>s?s:a[f];d="M".concat(t,",").concat(n+c*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+l*h[0],",").concat(n)),d+="L ".concat(t+r-l*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+c*h[1])),d+="L ".concat(t+r,",").concat(n+i-c*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-l*h[2],",").concat(n+i)),d+="L ".concat(t+l*h[3],",").concat(n+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+i-c*h[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);d="M ".concat(t,",").concat(n+c*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+l*m,",").concat(n,`
            L `).concat(t+r-l*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+r,",").concat(n+c*m,`
            L `).concat(t+r,",").concat(n+i-c*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+r-l*m,",").concat(n+i,`
            L `).concat(t+l*m,",").concat(n+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t,",").concat(n+i-c*m," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},uge=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,a=n.x,s=n.y,c=n.width,l=n.height;if(Math.abs(c)>0&&Math.abs(l)>0){var u=Math.min(a,a+c),d=Math.max(a,a+c),h=Math.min(s,s+l),f=Math.max(s,s+l);return r>=u&&r<=d&&i>=h&&i<=f}return!1},dge={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KS=function(t){var n=LA(LA({},dge),t),r=x.useRef(),i=x.useState(-1),a=nge(i,2),s=a[0],c=a[1];x.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&c(_)}catch{}},[]);var l=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,p=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,b=n.isAnimationActive,w=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var y=ct("recharts-rectangle",p);return w?O.createElement(Ua,{canBegin:s>0,from:{width:d,height:h,x:l,y:u},to:{width:d,height:h,x:l,y:u},duration:g,animationEasing:m,isActive:w},function(_){var j=_.width,S=_.height,E=_.x,P=_.y;return O.createElement(Ua,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:b,easing:m},O.createElement("path",wv({},Xe(n,!0),{className:y,d:BA(E,P,j,S,f),ref:r})))}):O.createElement("path",wv({},Xe(n,!0),{className:y,d:BA(l,u,d,h,f)}))},hge=["points","className","baseLinePoints","connectNulls"];function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wl.apply(this,arguments)}function fge(e,t){if(e==null)return{};var n=pge(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function FA(e){return yge(e)||vge(e)||gge(e)||mge()}function mge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gge(e,t){if(e){if(typeof e=="string")return W_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W_(e,t)}}function vge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yge(e){if(Array.isArray(e))return W_(e)}function W_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zA=function(t){return t&&t.x===+t.x&&t.y===+t.y},xge=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){zA(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),zA(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Dh=function(t,n){var r=xge(t);n&&(r=[r.reduce(function(a,s){return[].concat(FA(a),FA(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,c,l){return"".concat(s).concat(l===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},bge=function(t,n,r){var i=Dh(t,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Dh(n.reverse(),r).slice(1))},wge=function(t){var n=t.points,r=t.className,i=t.baseLinePoints,a=t.connectNulls,s=fge(t,hge);if(!n||!n.length)return null;var c=ct("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",u=bge(n,i,a);return O.createElement("g",{className:c},O.createElement("path",Wl({},Xe(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),l?O.createElement("path",Wl({},Xe(s,!0),{fill:"none",d:Dh(n,a)})):null,l?O.createElement("path",Wl({},Xe(s,!0),{fill:"none",d:Dh(i,a)})):null)}var d=Dh(n,a);return O.createElement("path",Wl({},Xe(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:c,d}))};function q_(){return q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q_.apply(this,arguments)}var ox=function(t){var n=t.cx,r=t.cy,i=t.r,a=t.className,s=ct("recharts-dot",a);return n===+n&&r===+r&&i===+i?x.createElement("circle",q_({},Xe(t,!1),zg(t),{className:s,cx:n,cy:r,r:i})):null};function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}var _ge=["x","y","top","left","width","height","className"];function K_(){return K_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K_.apply(this,arguments)}function UA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UA(Object(n),!0).forEach(function(r){Sge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sge(e,t,n){return t=Ege(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ege(e){var t=Nge(e,"string");return Af(t)=="symbol"?t:t+""}function Nge(e,t){if(Af(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pge(e,t){if(e==null)return{};var n=kge(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Cge=function(t,n,r,i,a,s){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},Age=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,s=t.top,c=s===void 0?0:s,l=t.left,u=l===void 0?0:l,d=t.width,h=d===void 0?0:d,f=t.height,p=f===void 0?0:f,m=t.className,g=Pge(t,_ge),v=jge({x:r,y:a,top:c,left:u,width:h,height:p},g);return!ve(r)||!ve(a)||!ve(h)||!ve(p)||!ve(c)||!ve(u)?null:O.createElement("path",K_({},Xe(v,!0),{className:ct("recharts-cross",m),d:Cge(r,a,h,p,c,u)}))},Tge=nx,Oge=I5,Rge=qa;function $ge(e,t){return e&&e.length?Tge(e,Rge(t),Oge):void 0}var Ige=$ge;const Mge=rn(Ige);var Dge=nx,Lge=qa,Bge=M5;function Fge(e,t){return e&&e.length?Dge(e,Lge(t),Bge):void 0}var zge=Fge;const Uge=rn(zge);var Hge=["cx","cy","angle","ticks","axisLine"],Vge=["ticks","tick","angle","tickFormatter","stroke"];function Lu(e){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(e)}function Lh(){return Lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lh.apply(this,arguments)}function HA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ic(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(n),!0).forEach(function(r){cx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VA(e,t){if(e==null)return{};var n=Gge(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Wge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E4(r.key),r)}}function qge(e,t,n){return t&&GA(e.prototype,t),n&&GA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kge(e,t,n){return t=_v(t),Yge(e,S4()?Reflect.construct(t,n||[],_v(e).constructor):t.apply(e,n))}function Yge(e,t){if(t&&(Lu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xge(e)}function Xge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S4=function(){return!!e})()}function _v(e){return _v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_v(e)}function Zge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y_(e,t)}function Y_(e,t){return Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Y_(e,t)}function cx(e,t,n){return t=E4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E4(e){var t=Jge(e,"string");return Lu(t)=="symbol"?t:t+""}function Jge(e,t){if(Lu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Lu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lx=function(e){function t(){return Wge(this,t),Kge(this,t,arguments)}return Zge(t,e),qge(t,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,c=a.cx,l=a.cy;return un(c,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,c=r.ticks,l=Mge(c,function(d){return d.coordinate||0}),u=Uge(c,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,c=r.ticks,l=r.axisLine,u=VA(r,Hge),d=c.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),h=un(i,a,d[0],s),f=un(i,a,d[1],s),p=ic(ic(ic({},Xe(u,!1)),{},{fill:"none"},Xe(l,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return O.createElement("line",Lh({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,c=i.angle,l=i.tickFormatter,u=i.stroke,d=VA(i,Vge),h=this.getTickTextAnchor(),f=Xe(d,!1),p=Xe(s,!1),m=a.map(function(g,v){var b=r.getTickValueCoord(g),w=ic(ic(ic(ic({textAnchor:h,transform:"rotate(".concat(90-c,", ").concat(b.x,", ").concat(b.y,")")},f),{},{stroke:"none",fill:u},p),{},{index:v},b),{},{payload:g});return O.createElement(Bt,Lh({className:ct("recharts-polar-radius-axis-tick",u4(s)),key:"tick-".concat(g.coordinate)},Kc(r.props,g,v)),t.renderTickItem(s,w,l?l(g.value,v):g.value))});return O.createElement(Bt,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:O.createElement(Bt,{className:ct("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),lr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return O.isValidElement(r)?s=O.cloneElement(r,i):st(r)?s=r(i):s=O.createElement(Yc,Lh({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(x.PureComponent);cx(lx,"displayName","PolarRadiusAxis");cx(lx,"axisType","radiusAxis");cx(lx,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(this,arguments)}function WA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(n),!0).forEach(function(r){ux(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P4(r.key),r)}}function eve(e,t,n){return t&&qA(e.prototype,t),n&&qA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tve(e,t,n){return t=jv(t),nve(e,N4()?Reflect.construct(t,n||[],jv(e).constructor):t.apply(e,n))}function nve(e,t){if(t&&(Bu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rve(e)}function rve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N4=function(){return!!e})()}function jv(e){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jv(e)}function ive(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X_(e,t)}function X_(e,t){return X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},X_(e,t)}function ux(e,t,n){return t=P4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P4(e){var t=ave(e,"string");return Bu(t)=="symbol"?t:t+""}function ave(e,t){if(Bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sve=Math.PI/180,KA=1e-5,dx=function(e){function t(){return Qge(this,t),tve(this,t,arguments)}return ive(t,e),eve(t,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,c=i.radius,l=i.orientation,u=i.tickSize,d=u||8,h=un(a,s,c,r.coordinate),f=un(a,s,c+(l==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*sve),s;return a>KA?s=i==="outer"?"start":"end":a<-KA?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,c=r.axisLine,l=r.axisLineType,u=ac(ac({},Xe(this.props,!1)),{},{fill:"none"},Xe(c,!1));if(l==="circle")return O.createElement(ox,bc({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var d=this.props.ticks,h=d.map(function(f){return un(i,a,s,f.coordinate)});return O.createElement(wge,bc({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,c=i.tickLine,l=i.tickFormatter,u=i.stroke,d=Xe(this.props,!1),h=Xe(s,!1),f=ac(ac({},d),{},{fill:"none"},Xe(c,!1)),p=a.map(function(m,g){var v=r.getTickLineCoord(m),b=r.getTickTextAnchor(m),w=ac(ac(ac({textAnchor:b},d),{},{stroke:"none",fill:u},h),{},{index:g,payload:m,x:v.x2,y:v.y2});return O.createElement(Bt,bc({className:ct("recharts-polar-angle-axis-tick",u4(s)),key:"tick-".concat(m.coordinate)},Kc(r.props,m,g)),c&&O.createElement("line",bc({className:"recharts-polar-angle-axis-tick-line"},f,v)),s&&t.renderTickItem(s,w,l?l(m.value,g):m.value))});return O.createElement(Bt,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:O.createElement(Bt,{className:ct("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return O.isValidElement(r)?s=O.cloneElement(r,i):st(r)?s=r(i):s=O.createElement(Yc,bc({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(x.PureComponent);ux(dx,"displayName","PolarAngleAxis");ux(dx,"axisType","angleAxis");ux(dx,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ove=TL,cve=ove(Object.getPrototypeOf,Object),lve=cve,uve=Ms,dve=lve,hve=Ds,fve="[object Object]",pve=Function.prototype,mve=Object.prototype,k4=pve.toString,gve=mve.hasOwnProperty,vve=k4.call(Object);function yve(e){if(!hve(e)||uve(e)!=fve)return!1;var t=dve(e);if(t===null)return!0;var n=gve.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&k4.call(n)==vve}var xve=yve;const bve=rn(xve);var wve=Ms,_ve=Ds,jve="[object Boolean]";function Sve(e){return e===!0||e===!1||_ve(e)&&wve(e)==jve}var Eve=Sve;const Nve=rn(Eve);function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sv.apply(this,arguments)}function Pve(e,t){return Tve(e)||Ave(e,t)||Cve(e,t)||kve()}function kve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cve(e,t){if(e){if(typeof e=="string")return YA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YA(e,t)}}function YA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ave(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function Tve(e){if(Array.isArray(e))return e}function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(r){Ove(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ove(e,t,n){return t=Rve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rve(e){var t=$ve(e,"string");return Tf(t)=="symbol"?t:t+""}function $ve(e,t){if(Tf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JA=function(t,n,r,i,a){var s=r-i,c;return c="M ".concat(t,",").concat(n),c+="L ".concat(t+r,",").concat(n),c+="L ".concat(t+r-s/2,",").concat(n+a),c+="L ".concat(t+r-s/2-i,",").concat(n+a),c+="L ".concat(t,",").concat(n," Z"),c},Ive={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Mve=function(t){var n=ZA(ZA({},Ive),t),r=x.useRef(),i=x.useState(-1),a=Pve(i,2),s=a[0],c=a[1];x.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&c(y)}catch{}},[]);var l=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,p=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,b=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var w=ct("recharts-trapezoid",p);return b?O.createElement(Ua,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:l,y:u},duration:g,animationEasing:m,isActive:b},function(y){var _=y.upperWidth,j=y.lowerWidth,S=y.height,E=y.x,P=y.y;return O.createElement(Ua,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:m},O.createElement("path",Sv({},Xe(n,!0),{className:w,d:JA(E,P,_,j,S),ref:r})))}):O.createElement("g",null,O.createElement("path",Sv({},Xe(n,!0),{className:w,d:JA(l,u,d,h,f)})))},Dve=["option","shapeType","propTransformer","activeClassName","isActive"];function Of(e){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(e)}function Lve(e,t){if(e==null)return{};var n=Bve(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Bve(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ev(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(n),!0).forEach(function(r){Fve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fve(e,t,n){return t=zve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zve(e){var t=Uve(e,"string");return Of(t)=="symbol"?t:t+""}function Uve(e,t){if(Of(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hve(e,t){return Ev(Ev({},t),e)}function Vve(e,t){return e==="symbols"}function eT(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return O.createElement(KS,n);case"trapezoid":return O.createElement(Mve,n);case"sector":return O.createElement(f4,n);case"symbols":if(Vve(t))return O.createElement(fS,n);break;default:return null}}function Gve(e){return x.isValidElement(e)?e.props:e}function C4(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?Hve:r,a=e.activeClassName,s=a===void 0?"recharts-active-shape":a,c=e.isActive,l=Lve(e,Dve),u;if(x.isValidElement(t))u=x.cloneElement(t,Ev(Ev({},l),Gve(t)));else if(st(t))u=t(l);else if(bve(t)&&!Nve(t)){var d=i(t,l);u=O.createElement(eT,{shapeType:n,elementProps:d})}else{var h=l;u=O.createElement(eT,{shapeType:n,elementProps:h})}return c?O.createElement(Bt,{className:s},u):u}function hx(e,t){return t!=null&&"trapezoids"in e.props}function fx(e,t){return t!=null&&"sectors"in e.props}function Rf(e,t){return t!=null&&"points"in e.props}function Wve(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&a}function qve(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function Kve(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function Yve(e,t){var n;return hx(e,t)?n=Wve:fx(e,t)?n=qve:Rf(e,t)&&(n=Kve),n}function Xve(e,t){var n;return hx(e,t)?n="trapezoids":fx(e,t)?n="sectors":Rf(e,t)&&(n="points"),n}function Zve(e,t){if(hx(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(fx(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Rf(e,t)?t.payload:{}}function Jve(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=Xve(n,t),a=Zve(n,t),s=r.filter(function(l,u){var d=yp(a,l),h=n.props[i].filter(function(m){var g=Yve(n,t);return g(m,t)}),f=n.props[i].indexOf(h[h.length-1]),p=u===f;return d&&p}),c=r.indexOf(s[s.length-1]);return c}var dg;function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ql.apply(this,arguments)}function tT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tT(Object(n),!0).forEach(function(r){Ii(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T4(r.key),r)}}function eye(e,t,n){return t&&nT(e.prototype,t),n&&nT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tye(e,t,n){return t=Nv(t),nye(e,A4()?Reflect.construct(t,n||[],Nv(e).constructor):t.apply(e,n))}function nye(e,t){if(t&&(Fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rye(e)}function rye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A4=function(){return!!e})()}function Nv(e){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nv(e)}function iye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z_(e,t)}function Z_(e,t){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Z_(e,t)}function Ii(e,t,n){return t=T4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T4(e){var t=aye(e,"string");return Fu(t)=="symbol"?t:t+""}function aye(e,t){if(Fu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Fu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bs=function(e){function t(n){var r;return Qve(this,t),r=tye(this,t,[n]),Ii(r,"pieRef",null),Ii(r,"sectorRefs",[]),Ii(r,"id",yd("recharts-pie-")),Ii(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),st(i)&&i()}),Ii(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),st(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return iye(t,e),eye(t,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,c=a.labelLine,l=a.dataKey,u=a.valueKey,d=Xe(this.props,!1),h=Xe(s,!1),f=Xe(c,!1),p=s&&s.offsetRadius||20,m=r.map(function(g,v){var b=(g.startAngle+g.endAngle)/2,w=un(g.cx,g.cy,g.outerRadius+p,b),y=cn(cn(cn(cn({},d),g),{},{stroke:"none"},h),{},{index:v,textAnchor:t.getTextAnchor(w.x,g.cx)},w),_=cn(cn(cn(cn({},d),g),{},{fill:"none",stroke:g.fill},f),{},{index:v,points:[un(g.cx,g.cy,g.outerRadius,b),w]}),j=l;return pt(l)&&pt(u)?j="value":pt(l)&&(j=u),O.createElement(Bt,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},c&&t.renderLabelLineItem(c,_,"line"),t.renderLabelItem(s,y,rr(g,j)))});return O.createElement(Bt,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,c=a.blendStroke,l=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=i.isActiveIndex(d),f=l&&i.hasActiveIndex()?l:null,p=h?s:f,m=cn(cn({},u),{},{stroke:c?u.fill:u.stroke,tabIndex:-1});return O.createElement(Bt,ql({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Kc(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),O.createElement(C4,ql({option:p,isActive:h,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,c=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state,f=h.prevSectors,p=h.prevIsAnimationActive;return O.createElement(Ua,{begin:c,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,v=[],b=a&&a[0],w=b.startAngle;return a.forEach(function(y,_){var j=f&&f[_],S=_>0?yi(y,"paddingAngle",0):0;if(j){var E=di(j.endAngle-j.startAngle,y.endAngle-y.startAngle),P=cn(cn({},y),{},{startAngle:w+S,endAngle:w+E(g)+S});v.push(P),w=P.endAngle}else{var k=y.endAngle,T=y.startAngle,A=di(0,k-T),R=A(g),L=cn(cn({},y),{},{startAngle:w+S,endAngle:w+R+S});v.push(L),w=L.endAngle}}),O.createElement(Bt,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var c=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!yp(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,c=i.className,l=i.label,u=i.cx,d=i.cy,h=i.innerRadius,f=i.outerRadius,p=i.isAnimationActive,m=this.state.isAnimationFinished;if(a||!s||!s.length||!ve(u)||!ve(d)||!ve(h)||!ve(f))return null;var g=ct("recharts-pie",c);return O.createElement(Bt,{tabIndex:this.props.rootTabIndex,className:g,ref:function(b){r.pieRef=b}},this.renderSectors(),l&&this.renderLabels(s),lr.renderCallByParent(this.props,null,!1),(!p||m)&&_s.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(O.isValidElement(r))return O.cloneElement(r,i);if(st(r))return r(i);var s=ct("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return O.createElement(vv,ql({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(O.isValidElement(r))return O.cloneElement(r,i);var s=a;if(st(r)&&(s=r(i),O.isValidElement(s)))return s;var c=ct("recharts-pie-label-text",typeof r!="boolean"&&!st(r)?r.className:"");return O.createElement(Yc,ql({},i,{alignmentBaseline:"middle",className:c}),s)}}])}(x.PureComponent);dg=Bs;Ii(Bs,"displayName","Pie");Ii(Bs,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!al.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ii(Bs,"parseDeltaAngle",function(e,t){var n=Ir(t-e),r=Math.min(Math.abs(t-e),360);return n*r});Ii(Bs,"getRealPieData",function(e){var t=e.data,n=e.children,r=Xe(e,!1),i=xi(n,Yy);return t&&t.length?t.map(function(a,s){return cn(cn(cn({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return cn(cn({},r),a.props)}):[]});Ii(Bs,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,i=t.width,a=t.height,s=l4(i,a),c=r+Mr(e.cx,i,i/2),l=n+Mr(e.cy,a,a/2),u=Mr(e.innerRadius,s,0),d=Mr(e.outerRadius,s,s*.8),h=e.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:c,cy:l,innerRadius:u,outerRadius:d,maxRadius:h}});Ii(Bs,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?cn(cn({},t.type.defaultProps),t.props):t.props,i=dg.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,c=r.endAngle,l=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,p=Math.abs(r.minAngle),m=dg.parseCoordinateOfPie(r,n),g=dg.parseDeltaAngle(s,c),v=Math.abs(g),b=u;pt(u)&&pt(h)?(ga(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):pt(u)&&(ga(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=h);var w=i.filter(function(P){return rr(P,b,0)!==0}).length,y=(v>=360?w:w-1)*l,_=v-w*p-y,j=i.reduce(function(P,k){var T=rr(k,b,0);return P+(ve(T)?T:0)},0),S;if(j>0){var E;S=i.map(function(P,k){var T=rr(P,b,0),A=rr(P,d,k),R=(ve(T)?T:0)/j,L;k?L=E.endAngle+Ir(g)*l*(T!==0?1:0):L=s;var B=L+Ir(g)*((T!==0?p:0)+R*_),G=(L+B)/2,U=(m.innerRadius+m.outerRadius)/2,K=[{name:A,value:T,payload:P,dataKey:b,type:f}],te=un(m.cx,m.cy,U,G);return E=cn(cn(cn({percent:R,cornerRadius:a,name:A,tooltipPayload:K,midAngle:G,middleRadius:U,tooltipPosition:te},P),m),{},{value:rr(P,b),startAngle:L,endAngle:B,payload:P,paddingAngle:Ir(g)*l}),E})}return cn(cn({},m),{},{sectors:S,data:i})});var sye=Math.ceil,oye=Math.max;function cye(e,t,n,r){for(var i=-1,a=oye(sye((t-e)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=e,e+=n;return s}var lye=cye,uye=XL,rT=1/0,dye=17976931348623157e292;function hye(e){if(!e)return e===0?e:0;if(e=uye(e),e===rT||e===-rT){var t=e<0?-1:1;return t*dye}return e===e?e:0}var O4=hye,fye=lye,pye=Ky,L0=O4;function mye(e){return function(t,n,r){return r&&typeof r!="number"&&pye(t,n,r)&&(n=r=void 0),t=L0(t),n===void 0?(n=t,t=0):n=L0(n),r=r===void 0?t<n?1:-1:L0(r),fye(t,n,r,e)}}var gye=mye,vye=gye,yye=vye(),xye=yye;const Pv=rn(xye);function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function iT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iT(Object(n),!0).forEach(function(r){R4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R4(e,t,n){return t=bye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bye(e){var t=wye(e,"string");return $f(t)=="symbol"?t:t+""}function wye(e,t){if($f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _ye=["Webkit","Moz","O","ms"],jye=function(t,n){var r=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=_ye.reduce(function(a,s){return aT(aT({},a),{},R4({},s+r,n))},{});return i[t]=n,i};function zu(e){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(e)}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kv.apply(this,arguments)}function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function B0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(n),!0).forEach(function(r){oi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I4(r.key),r)}}function Eye(e,t,n){return t&&oT(e.prototype,t),n&&oT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nye(e,t,n){return t=Cv(t),Pye(e,$4()?Reflect.construct(t,n||[],Cv(e).constructor):t.apply(e,n))}function Pye(e,t){if(t&&(zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kye(e)}function kye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($4=function(){return!!e})()}function Cv(e){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cv(e)}function Cye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J_(e,t)}function J_(e,t){return J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},J_(e,t)}function oi(e,t,n){return t=I4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I4(e){var t=Aye(e,"string");return zu(t)=="symbol"?t:t+""}function Aye(e,t){if(zu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tye=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,a=t.x,s=t.width,c=t.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=$h().domain(Pv(0,l)).range([a,a+s-c]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},cT=function(t){return t.changedTouches&&!!t.changedTouches.length},Uu=function(e){function t(n){var r;return Sye(this,t),r=Nye(this,t,[n]),oi(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),oi(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),oi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,c=i.startIndex;s==null||s({endIndex:a,startIndex:c})}),r.detachDragEndListener()}),oi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),oi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),oi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),oi(r,"handleSlideDragStart",function(i){var a=cT(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Cye(t,e),Eye(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,c=this.props,l=c.gap,u=c.data,d=u.length-1,h=Math.min(i,a),f=Math.max(i,a),p=t.getIndexInRange(s,h),m=t.getIndexInRange(s,f);return{startIndex:p-p%l,endIndex:m===d?d:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,c=i.dataKey,l=rr(a[r],c,r);return st(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,c=i.endX,l=this.props,u=l.x,d=l.width,h=l.travellerWidth,f=l.startIndex,p=l.endIndex,m=l.onChange,g=r.pageX-a;g>0?g=Math.min(g,u+d-h-c,u+d-h-s):g<0&&(g=Math.max(g,u-s,u-c));var v=this.getIndex({startX:s+g,endX:c+g});(v.startIndex!==f||v.endIndex!==p)&&m&&m(v),this.setState({startX:s+g,endX:c+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=cT(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,c=i.endX,l=i.startX,u=this.state[s],d=this.props,h=d.x,f=d.width,p=d.travellerWidth,m=d.onChange,g=d.gap,v=d.data,b={startX:this.state.startX,endX:this.state.endX},w=r.pageX-a;w>0?w=Math.min(w,h+f-p-u):w<0&&(w=Math.max(w,h-u)),b[s]=u+w;var y=this.getIndex(b),_=y.startIndex,j=y.endIndex,S=function(){var P=v.length-1;return s==="startX"&&(c>l?_%g===0:j%g===0)||c<l&&j===P||s==="endX"&&(c>l?j%g===0:_%g===0)||c>l&&j===P};this.setState(oi(oi({},s,u+w),"brushMoveStartX",r.pageX),function(){m&&S()&&m(y)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,c=s.scaleValues,l=s.startX,u=s.endX,d=this.state[i],h=c.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=c.length)){var p=c[f];i==="startX"&&p>=u||i==="endX"&&p<=l||this.setState(oi({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,c=r.height,l=r.fill,u=r.stroke;return O.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:s,height:c})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,c=r.height,l=r.data,u=r.children,d=r.padding,h=x.Children.only(u);return h?O.cloneElement(h,{x:i,y:a,width:s,height:c,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,c=this,l=this.props,u=l.y,d=l.travellerWidth,h=l.height,f=l.traveller,p=l.ariaLabel,m=l.data,g=l.startIndex,v=l.endIndex,b=Math.max(r,this.props.x),w=B0(B0({},Xe(this.props,!1)),{},{x:b,y:u,width:d,height:h}),y=p||"Min value: ".concat((a=m[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=m[v])===null||s===void 0?void 0:s.name);return O.createElement(Bt,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),c.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,i))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,w))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,c=a.height,l=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return O.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:s,width:h,height:c})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,c=r.height,l=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,p=5,m={pointerEvents:"none",fill:u};return O.createElement(Bt,{className:"recharts-brush-texts"},O.createElement(Yc,kv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-p,y:s+c/2},m),this.getTextOfTick(i)),O.createElement(Yc,kv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+l+p,y:s+c/2},m),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,c=r.x,l=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,p=f.startX,m=f.endX,g=f.isTextActive,v=f.isSlideMoving,b=f.isTravellerMoving,w=f.isTravellerFocused;if(!i||!i.length||!ve(c)||!ve(l)||!ve(u)||!ve(d)||u<=0||d<=0)return null;var y=ct("recharts-brush",a),_=O.Children.count(s)===1,j=jye("userSelect","none");return O.createElement(Bt,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||v||b||w||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,c=r.height,l=r.stroke,u=Math.floor(a+c/2)-1;return O.createElement(O.Fragment,null,O.createElement("rect",{x:i,y:a,width:s,height:c,fill:l,stroke:"none"}),O.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),O.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return O.isValidElement(r)?a=O.cloneElement(r,i):st(r)?a=r(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,c=r.x,l=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return B0({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:c,prevWidth:s},a&&a.length?Tye({data:a,width:s,x:c,travellerWidth:l,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||c!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([c,c+s-l]);var f=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:c,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,c=a-1;c-s>1;){var l=Math.floor((s+c)/2);r[l]>i?c=l:s=l}return i>=r[c]?c:s}}])}(x.PureComponent);oi(Uu,"displayName","Brush");oi(Uu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Oye=bS;function Rye(e,t){var n;return Oye(e,function(r,i,a){return n=t(r,i,a),!n}),!!n}var $ye=Rye,Iye=jL,Mye=qa,Dye=$ye,Lye=Yr,Bye=Ky;function Fye(e,t,n){var r=Lye(e)?Iye:Dye;return n&&Bye(e,t,n)&&(t=void 0),r(e,Mye(t))}var zye=Fye;const Uye=rn(zye);var Da=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},lT=GL;function Hye(e,t,n){t=="__proto__"&&lT?lT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Vye=Hye,Gye=Vye,Wye=HL,qye=qa;function Kye(e,t){var n={};return t=qye(t),Wye(e,function(r,i,a){Gye(n,i,t(r,i,a))}),n}var Yye=Kye;const Xye=rn(Yye);function Zye(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var Jye=Zye,Qye=bS;function exe(e,t){var n=!0;return Qye(e,function(r,i,a){return n=!!t(r,i,a),n}),n}var txe=exe,nxe=Jye,rxe=txe,ixe=qa,axe=Yr,sxe=Ky;function oxe(e,t,n){var r=axe(e)?nxe:rxe;return n&&sxe(e,t,n)&&(t=void 0),r(e,ixe(t))}var cxe=oxe;const M4=rn(cxe);var lxe=["x","y"];function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}function Q_(){return Q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q_.apply(this,arguments)}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(n),!0).forEach(function(r){uxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uxe(e,t,n){return t=dxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dxe(e){var t=hxe(e,"string");return If(t)=="symbol"?t:t+""}function hxe(e,t){if(If(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fxe(e,t){if(e==null)return{};var n=pxe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pxe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function mxe(e,t){var n=e.x,r=e.y,i=fxe(e,lxe),a="".concat(n),s=parseInt(a,10),c="".concat(r),l=parseInt(c,10),u="".concat(t.height||i.height),d=parseInt(u,10),h="".concat(t.width||i.width),f=parseInt(h,10);return sh(sh(sh(sh(sh({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:f,name:t.name,radius:t.radius})}function dT(e){return O.createElement(C4,Q_({shapeType:"rectangle",propTransformer:mxe,activeClassName:"recharts-active-bar"},e))}var gxe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof t=="number")return t;var a=ve(r)||FZ(r);return a?t(r,i):(a||Zc(),n)}},vxe=["value","background"],D4;function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function yxe(e,t){if(e==null)return{};var n=xxe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xxe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Av.apply(this,arguments)}function hT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hT(Object(n),!0).forEach(function(r){So(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B4(r.key),r)}}function wxe(e,t,n){return t&&fT(e.prototype,t),n&&fT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _xe(e,t,n){return t=Tv(t),jxe(e,L4()?Reflect.construct(t,n||[],Tv(e).constructor):t.apply(e,n))}function jxe(e,t){if(t&&(Hu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sxe(e)}function Sxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L4=function(){return!!e})()}function Tv(e){return Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tv(e)}function Exe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e1(e,t)}function e1(e,t){return e1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},e1(e,t)}function So(e,t,n){return t=B4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B4(e){var t=Nxe(e,"string");return Hu(t)=="symbol"?t:t+""}function Nxe(e,t){if(Hu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var To=function(e){function t(){var n;bxe(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=_xe(this,t,[].concat(i)),So(n,"state",{isAnimationFinished:!1}),So(n,"id",yd("recharts-bar-")),So(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),So(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return Exe(t,e),wxe(t,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,c=a.dataKey,l=a.activeIndex,u=a.activeBar,d=Xe(this.props,!1);return r&&r.map(function(h,f){var p=f===l,m=p?u:s,g=Ln(Ln(Ln({},d),h),{},{isActive:p,option:m,index:f,dataKey:c,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return O.createElement(Bt,Av({className:"recharts-bar-rectangle"},Kc(i.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),O.createElement(dT,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,c=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,f=this.state.prevData;return O.createElement(Ua,{begin:l,duration:u,isActive:c,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,g=a.map(function(v,b){var w=f&&f[b];if(w){var y=di(w.x,v.x),_=di(w.y,v.y),j=di(w.width,v.width),S=di(w.height,v.height);return Ln(Ln({},v),{},{x:y(m),y:_(m),width:j(m),height:S(m)})}if(s==="horizontal"){var E=di(0,v.height),P=E(m);return Ln(Ln({},v),{},{y:v.y+v.height-P,height:P})}var k=di(0,v.width),T=k(m);return Ln(Ln({},v),{},{width:T})});return O.createElement(Bt,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!yp(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,c=i.activeIndex,l=Xe(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,f=yxe(u,vxe);if(!h)return null;var p=Ln(Ln(Ln(Ln(Ln({},f),{},{fill:"#eee"},h),l),Kc(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return O.createElement(dT,Av({key:"background-bar-".concat(d),option:r.props.background,isActive:d===c},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,c=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,h=xi(d,xp);if(!h)return null;var f=u==="vertical"?s[0].height/2:s[0].width/2,p=function(v,b){var w=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:w,errorVal:rr(v,b)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return O.createElement(Bt,m,h.map(function(g){return O.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:s,xAxis:c,yAxis:l,layout:u,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,c=r.xAxis,l=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,p=r.isAnimationActive,m=r.background,g=r.id;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,b=ct("recharts-bar",s),w=c&&c.allowDataOverflow,y=l&&l.allowDataOverflow,_=w||y,j=pt(g)?this.id:g;return O.createElement(Bt,{className:b},w||y?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(j)},O.createElement("rect",{x:w?u:u-h/2,y:y?d:d-f/2,width:w?h:h*2,height:y?f:f*2}))):null,O.createElement(Bt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(j,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,j),(!p||v)&&_s.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(x.PureComponent);D4=To;So(To,"displayName","Bar");So(To,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!al.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});So(To,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,a=e.xAxis,s=e.yAxis,c=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,f=e.offset,p=afe(r,n);if(!p)return null;var m=t.layout,g=n.type.defaultProps,v=g!==void 0?Ln(Ln({},g),n.props):n.props,b=v.dataKey,w=v.children,y=v.minPointSize,_=m==="horizontal"?s:a,j=u?_.scale.domain():null,S=hfe({numericAxis:_}),E=xi(w,Yy),P=h.map(function(k,T){var A,R,L,B,G,U;u?A=sfe(u[d+T],j):(A=rr(k,b),Array.isArray(A)||(A=[S,A]));var K=gxe(y,D4.defaultProps.minPointSize)(A[1],T);if(m==="horizontal"){var te,W=[s.scale(A[0]),s.scale(A[1])],fe=W[0],be=W[1];R=nA({axis:a,ticks:c,bandSize:i,offset:p.offset,entry:k,index:T}),L=(te=be??fe)!==null&&te!==void 0?te:void 0,B=p.size;var ne=fe-be;if(G=Number.isNaN(ne)?0:ne,U={x:R,y:s.y,width:B,height:s.height},Math.abs(K)>0&&Math.abs(G)<Math.abs(K)){var ce=Ir(G||K)*(Math.abs(K)-Math.abs(G));L-=ce,G+=ce}}else{var we=[a.scale(A[0]),a.scale(A[1])],et=we[0],jt=we[1];if(R=et,L=nA({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:k,index:T}),B=jt-et,G=p.size,U={x:a.x,y:L,width:a.width,height:G},Math.abs(K)>0&&Math.abs(B)<Math.abs(K)){var _e=Ir(B||K)*(Math.abs(K)-Math.abs(B));B+=_e}}return Ln(Ln(Ln({},k),{},{x:R,y:L,width:B,height:G,value:u?A:A[1],payload:k,background:U},E&&E[T]&&E[T].props),{},{tooltipPayload:[o4(n,k)],tooltipPosition:{x:R+B/2,y:L+G/2}})});return Ln({data:P,layout:m},f)});function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function Pxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F4(r.key),r)}}function kxe(e,t,n){return t&&pT(e.prototype,t),n&&pT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mT(Object(n),!0).forEach(function(r){px(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function px(e,t,n){return t=F4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F4(e){var t=Cxe(e,"string");return Mf(t)=="symbol"?t:t+""}function Cxe(e,t){if(Mf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z4=function(t,n,r,i,a){var s=t.width,c=t.height,l=t.layout,u=t.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:c-r.bottom,bottomMirror:c-r.bottom},f=!!ci(u,To);return d.reduce(function(p,m){var g=n[m],v=g.orientation,b=g.domain,w=g.padding,y=w===void 0?{}:w,_=g.mirror,j=g.reversed,S="".concat(v).concat(_?"Mirror":""),E,P,k,T,A;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var R=b[1]-b[0],L=1/0,B=g.categoricalDomain.sort(HZ);if(B.forEach(function(we,et){et>0&&(L=Math.min((we||0)-(B[et-1]||0),L))}),Number.isFinite(L)){var G=L/R,U=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(E=G*U/2),g.padding==="no-gap"){var K=Mr(t.barCategoryGap,G*U),te=G*U/2;E=te-K-(te-K)/U*K}}}i==="xAxis"?P=[r.left+(y.left||0)+(E||0),r.left+r.width-(y.right||0)-(E||0)]:i==="yAxis"?P=l==="horizontal"?[r.top+r.height-(y.bottom||0),r.top+(y.top||0)]:[r.top+(y.top||0)+(E||0),r.top+r.height-(y.bottom||0)-(E||0)]:P=g.range,j&&(P=[P[1],P[0]]);var W=r4(g,a,f),fe=W.scale,be=W.realScaleType;fe.domain(b).range(P),i4(fe);var ne=a4(fe,da(da({},g),{},{realScaleType:be}));i==="xAxis"?(A=v==="top"&&!_||v==="bottom"&&_,k=r.left,T=h[S]-A*g.height):i==="yAxis"&&(A=v==="left"&&!_||v==="right"&&_,k=h[S]-A*g.width,T=r.top);var ce=da(da(da({},g),ne),{},{realScaleType:be,x:k,y:T,scale:fe,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return ce.bandSize=pv(ce,ne),!g.hide&&i==="xAxis"?h[S]+=(A?-1:1)*ce.height:g.hide||(h[S]+=(A?-1:1)*ce.width),da(da({},p),{},px({},m,ce))},{})},U4=function(t,n){var r=t.x,i=t.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},Axe=function(t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2;return U4({x:n,y:r},{x:i,y:a})},H4=function(){function e(t){Pxe(this,e),this.scale=t}return kxe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(n)+c}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();px(H4,"EPS",1e-4);var YS=function(t){var n=Object.keys(t).reduce(function(r,i){return da(da({},r),{},px({},i,H4.create(t[i])))},{});return da(da({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,c=a.position;return Xye(i,function(l,u){return n[u].apply(l,{bandAware:s,position:c})})},isInRange:function(i){return M4(i,function(a,s){return n[s].isInRange(a)})}})};function Txe(e){return(e%180+180)%180}var Oxe=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Txe(i),s=a*Math.PI/180,c=Math.atan(r/n),l=s>c&&s<Math.PI-c?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},Rxe=qa,$xe=fp,Ixe=Wy;function Mxe(e){return function(t,n,r){var i=Object(t);if(!$xe(t)){var a=Rxe(n);t=Ixe(t),n=function(c){return a(i[c],c,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:void 0}}var Dxe=Mxe,Lxe=O4;function Bxe(e){var t=Lxe(e),n=t%1;return t===t?n?t-n:t:0}var Fxe=Bxe,zxe=DL,Uxe=qa,Hxe=Fxe,Vxe=Math.max;function Gxe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:Hxe(n);return i<0&&(i=Vxe(r+i,0)),zxe(e,Uxe(t),i)}var Wxe=Gxe,qxe=Dxe,Kxe=Wxe,Yxe=qxe(Kxe),Xxe=Yxe;const Zxe=rn(Xxe);var Jxe=WX(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),XS=x.createContext(void 0),ZS=x.createContext(void 0),V4=x.createContext(void 0),G4=x.createContext({}),W4=x.createContext(void 0),q4=x.createContext(0),K4=x.createContext(0),gT=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=t.clipPathId,c=t.children,l=t.width,u=t.height,d=Jxe(a);return O.createElement(XS.Provider,{value:r},O.createElement(ZS.Provider,{value:i},O.createElement(G4.Provider,{value:a},O.createElement(V4.Provider,{value:d},O.createElement(W4.Provider,{value:s},O.createElement(q4.Provider,{value:u},O.createElement(K4.Provider,{value:l},c)))))))},Qxe=function(){return x.useContext(W4)},Y4=function(t){var n=x.useContext(XS);n==null&&Zc();var r=n[t];return r==null&&Zc(),r},ebe=function(){var t=x.useContext(XS);return mo(t)},tbe=function(){var t=x.useContext(ZS),n=Zxe(t,function(r){return M4(r.domain,Number.isFinite)});return n||mo(t)},X4=function(t){var n=x.useContext(ZS);n==null&&Zc();var r=n[t];return r==null&&Zc(),r},nbe=function(){var t=x.useContext(V4);return t},rbe=function(){return x.useContext(G4)},JS=function(){return x.useContext(K4)},QS=function(){return x.useContext(q4)};function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}function ibe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function abe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J4(r.key),r)}}function sbe(e,t,n){return t&&abe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function obe(e,t,n){return t=Ov(t),cbe(e,Z4()?Reflect.construct(t,n||[],Ov(e).constructor):t.apply(e,n))}function cbe(e,t){if(t&&(Vu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lbe(e)}function lbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z4=function(){return!!e})()}function Ov(e){return Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ov(e)}function ube(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t1(e,t)}function t1(e,t){return t1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},t1(e,t)}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(n),!0).forEach(function(r){eE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eE(e,t,n){return t=J4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J4(e){var t=dbe(e,"string");return Vu(t)=="symbol"?t:t+""}function dbe(e,t){if(Vu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function hbe(e,t){return gbe(e)||mbe(e,t)||pbe(e,t)||fbe()}function fbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pbe(e,t){if(e){if(typeof e=="string")return xT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xT(e,t)}}function xT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mbe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function gbe(e){if(Array.isArray(e))return e}function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n1.apply(this,arguments)}var vbe=function(t,n){var r;return O.isValidElement(t)?r=O.cloneElement(t,n):st(t)?r=t(n):r=O.createElement("line",n1({},n,{className:"recharts-reference-line-line"})),r},ybe=function(t,n,r,i,a,s,c,l,u){var d=a.x,h=a.y,f=a.width,p=a.height;if(r){var m=u.y,g=t.y.apply(m,{position:s});if(Da(u,"discard")&&!t.y.isInRange(g))return null;var v=[{x:d+f,y:g},{x:d,y:g}];return l==="left"?v.reverse():v}if(n){var b=u.x,w=t.x.apply(b,{position:s});if(Da(u,"discard")&&!t.x.isInRange(w))return null;var y=[{x:w,y:h+p},{x:w,y:h}];return c==="top"?y.reverse():y}if(i){var _=u.segment,j=_.map(function(S){return t.apply(S,{position:s})});return Da(u,"discard")&&Uye(j,function(S){return!t.isInRange(S)})?null:j}return null};function xbe(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,a=e.yAxisId,s=e.shape,c=e.className,l=e.alwaysShow,u=Qxe(),d=Y4(i),h=X4(a),f=nbe();if(!u||!f)return null;ga(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=YS({x:d.scale,y:h.scale}),m=ir(t),g=ir(n),v=r&&r.length===2,b=ybe(p,m,g,v,f,e.position,d.orientation,h.orientation,e);if(!b)return null;var w=hbe(b,2),y=w[0],_=y.x,j=y.y,S=w[1],E=S.x,P=S.y,k=Da(e,"hidden")?"url(#".concat(u,")"):void 0,T=yT(yT({clipPath:k},Xe(e,!0)),{},{x1:_,y1:j,x2:E,y2:P});return O.createElement(Bt,{className:ct("recharts-reference-line",c)},vbe(s,T),lr.renderCallByParent(e,Axe({x1:_,y1:j,x2:E,y2:P})))}var tE=function(e){function t(){return ibe(this,t),obe(this,t,arguments)}return ube(t,e),sbe(t,[{key:"render",value:function(){return O.createElement(xbe,this.props)}}])}(O.Component);eE(tE,"displayName","ReferenceLine");eE(tE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function r1(){return r1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r1.apply(this,arguments)}function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function bT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(n),!0).forEach(function(r){mx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e3(r.key),r)}}function _be(e,t,n){return t&&wbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jbe(e,t,n){return t=Rv(t),Sbe(e,Q4()?Reflect.construct(t,n||[],Rv(e).constructor):t.apply(e,n))}function Sbe(e,t){if(t&&(Gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ebe(e)}function Ebe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q4=function(){return!!e})()}function Rv(e){return Rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rv(e)}function Nbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i1(e,t)}function i1(e,t){return i1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},i1(e,t)}function mx(e,t,n){return t=e3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e3(e){var t=Pbe(e,"string");return Gu(t)=="symbol"?t:t+""}function Pbe(e,t){if(Gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kbe=function(t){var n=t.x,r=t.y,i=t.xAxis,a=t.yAxis,s=YS({x:i.scale,y:a.scale}),c=s.apply({x:n,y:r},{bandAware:!0});return Da(t,"discard")&&!s.isInRange(c)?null:c},gx=function(e){function t(){return bbe(this,t),jbe(this,t,arguments)}return Nbe(t,e),_be(t,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,c=r.alwaysShow,l=r.clipPathId,u=ir(i),d=ir(a);if(ga(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=kbe(this.props);if(!h)return null;var f=h.x,p=h.y,m=this.props,g=m.shape,v=m.className,b=Da(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=wT(wT({clipPath:b},Xe(this.props,!0)),{},{cx:f,cy:p});return O.createElement(Bt,{className:ct("recharts-reference-dot",v)},t.renderDot(g,w),lr.renderCallByParent(this.props,{x:f-s,y:p-s,width:2*s,height:2*s}))}}])}(O.Component);mx(gx,"displayName","ReferenceDot");mx(gx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});mx(gx,"renderDot",function(e,t){var n;return O.isValidElement(e)?n=O.cloneElement(e,t):st(e)?n=e(t):n=O.createElement(ox,r1({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function a1(){return a1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a1.apply(this,arguments)}function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function _T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(n),!0).forEach(function(r){vx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_T(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Abe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n3(r.key),r)}}function Tbe(e,t,n){return t&&Abe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Obe(e,t,n){return t=$v(t),Rbe(e,t3()?Reflect.construct(t,n||[],$v(e).constructor):t.apply(e,n))}function Rbe(e,t){if(t&&(Wu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $be(e)}function $be(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t3=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$v(e)}function Ibe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s1(e,t)}function s1(e,t){return s1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},s1(e,t)}function vx(e,t,n){return t=n3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n3(e){var t=Mbe(e,"string");return Wu(t)=="symbol"?t:t+""}function Mbe(e,t){if(Wu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Dbe=function(t,n,r,i,a){var s=a.x1,c=a.x2,l=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var f=YS({x:d.scale,y:h.scale}),p={x:t?f.x.apply(s,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},m={x:n?f.x.apply(c,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Da(a,"discard")&&(!f.isInRange(p)||!f.isInRange(m))?null:U4(p,m)},yx=function(e){function t(){return Cbe(this,t),Obe(this,t,arguments)}return Ibe(t,e),Tbe(t,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,c=r.y2,l=r.className,u=r.alwaysShow,d=r.clipPathId;ga(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=ir(i),f=ir(a),p=ir(s),m=ir(c),g=this.props.shape;if(!h&&!f&&!p&&!m&&!g)return null;var v=Dbe(h,f,p,m,this.props);if(!v&&!g)return null;var b=Da(this.props,"hidden")?"url(#".concat(d,")"):void 0;return O.createElement(Bt,{className:ct("recharts-reference-area",l)},t.renderRect(g,jT(jT({clipPath:b},Xe(this.props,!0)),v)),lr.renderCallByParent(this.props,v))}}])}(O.Component);vx(yx,"displayName","ReferenceArea");vx(yx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});vx(yx,"renderRect",function(e,t){var n;return O.isValidElement(e)?n=O.cloneElement(e,t):st(e)?n=e(t):n=O.createElement(KS,a1({},t,{className:"recharts-reference-area-rect"})),n});function r3(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function Lbe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Oxe(r,n)}function Bbe(e,t,n){var r=n==="width",i=e.x,a=e.y,s=e.width,c=e.height;return t===1?{start:r?i:a,end:r?i+s:a+c}:{start:r?i+s:a+c,end:r?i:a}}function Iv(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function Fbe(e,t){return r3(e,t+1)}function zbe(e,t,n,r,i){for(var a=(r||[]).slice(),s=t.start,c=t.end,l=0,u=1,d=s,h=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:r3(r,u)};var g=l,v,b=function(){return v===void 0&&(v=n(m,g)),v},w=m.coordinate,y=l===0||Iv(e,w,b,d,c);y||(l=0,d=s,u+=1),y&&(d=w+e*(b()/2+i),l+=u)},f;u<=a.length;)if(f=h(),f)return f.v;return[]}function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function ST(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ST(Object(n),!0).forEach(function(r){Ube(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ST(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ube(e,t,n){return t=Hbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hbe(e){var t=Vbe(e,"string");return Df(t)=="symbol"?t:t+""}function Vbe(e,t){if(Df(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gbe(e,t,n,r,i){for(var a=(r||[]).slice(),s=a.length,c=t.start,l=t.end,u=function(f){var p=a[f],m,g=function(){return m===void 0&&(m=n(p,f)),m};if(f===s-1){var v=e*(p.coordinate+e*g()/2-l);a[f]=p=wr(wr({},p),{},{tickCoord:v>0?p.coordinate-v*e:p.coordinate})}else a[f]=p=wr(wr({},p),{},{tickCoord:p.coordinate});var b=Iv(e,p.tickCoord,g,c,l);b&&(l=p.tickCoord-e*(g()/2+i),a[f]=wr(wr({},p),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function Wbe(e,t,n,r,i,a){var s=(r||[]).slice(),c=s.length,l=t.start,u=t.end;if(a){var d=r[c-1],h=n(d,c-1),f=e*(d.coordinate+e*h/2-u);s[c-1]=d=wr(wr({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var p=Iv(e,d.tickCoord,function(){return h},l,u);p&&(u=d.tickCoord-e*(h/2+i),s[c-1]=wr(wr({},d),{},{isShow:!0}))}for(var m=a?c-1:c,g=function(w){var y=s[w],_,j=function(){return _===void 0&&(_=n(y,w)),_};if(w===0){var S=e*(y.coordinate-e*j()/2-l);s[w]=y=wr(wr({},y),{},{tickCoord:S<0?y.coordinate-S*e:y.coordinate})}else s[w]=y=wr(wr({},y),{},{tickCoord:y.coordinate});var E=Iv(e,y.tickCoord,j,l,u);E&&(l=y.tickCoord+e*(j()/2+i),s[w]=wr(wr({},y),{},{isShow:!0}))},v=0;v<m;v++)g(v);return s}function nE(e,t,n){var r=e.tick,i=e.ticks,a=e.viewBox,s=e.minTickGap,c=e.orientation,l=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!i||!i.length||!r)return[];if(ve(l)||al.isSsr)return Fbe(i,typeof l=="number"&&ve(l)?l:0);var f=[],p=c==="top"||c==="bottom"?"width":"height",m=d&&p==="width"?Rh(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(y,_){var j=st(u)?u(y.value,_):y.value;return p==="width"?Lbe(Rh(j,{fontSize:t,letterSpacing:n}),m,h):Rh(j,{fontSize:t,letterSpacing:n})[p]},v=i.length>=2?Ir(i[1].coordinate-i[0].coordinate):1,b=Bbe(a,v,p);return l==="equidistantPreserveStart"?zbe(v,b,g,i,s):(l==="preserveStart"||l==="preserveStartEnd"?f=Wbe(v,b,g,i,s,l==="preserveStartEnd"):f=Gbe(v,b,g,i,s),f.filter(function(w){return w.isShow}))}var qbe=["viewBox"],Kbe=["viewBox"],Ybe=["ticks"];function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function Kl(){return Kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kl.apply(this,arguments)}function ET(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ET(Object(n),!0).forEach(function(r){rE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F0(e,t){if(e==null)return{};var n=Xbe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Zbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a3(r.key),r)}}function Jbe(e,t,n){return t&&NT(e.prototype,t),n&&NT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qbe(e,t,n){return t=Mv(t),e0e(e,i3()?Reflect.construct(t,n||[],Mv(e).constructor):t.apply(e,n))}function e0e(e,t){if(t&&(qu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t0e(e)}function t0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i3=function(){return!!e})()}function Mv(e){return Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mv(e)}function n0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o1(e,t)}function o1(e,t){return o1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},o1(e,t)}function rE(e,t,n){return t=a3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a3(e){var t=r0e(e,"string");return qu(t)=="symbol"?t:t+""}function r0e(e,t){if(qu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ed=function(e){function t(n){var r;return Zbe(this,t),r=Qbe(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return n0e(t,e),Jbe(t,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=F0(r,qbe),c=this.props,l=c.viewBox,u=F0(c,Kbe);return!au(a,l)||!au(s,u)||!au(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,c=i.width,l=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,f=i.tickMargin,p,m,g,v,b,w,y=h?-1:1,_=r.tickSize||d,j=ve(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=m=r.coordinate,v=s+ +!h*l,g=v-y*_,w=g-y*f,b=j;break;case"left":g=v=r.coordinate,m=a+ +!h*c,p=m-y*_,b=p-y*f,w=j;break;case"right":g=v=r.coordinate,m=a+ +h*c,p=m+y*_,b=p+y*f,w=j;break;default:p=m=r.coordinate,v=s+ +h*l,g=v+y*_,w=g+y*f,b=j;break}return{line:{x1:p,y1:g,x2:m,y2:v},tick:{x:b,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,c=r.height,l=r.orientation,u=r.mirror,d=r.axisLine,h=Yn(Yn(Yn({},Xe(this.props,!1)),Xe(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!u||l==="bottom"&&u);h=Yn(Yn({},h),{},{x1:i,y1:a+f*c,x2:i+s,y2:a+f*c})}else{var p=+(l==="left"&&!u||l==="right"&&u);h=Yn(Yn({},h),{},{x1:i+p*s,y1:a,x2:i+p*s,y2:a+c})}return O.createElement("line",Kl({},h,{className:ct("recharts-cartesian-axis-line",yi(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,c=this.props,l=c.tickLine,u=c.stroke,d=c.tick,h=c.tickFormatter,f=c.unit,p=nE(Yn(Yn({},this.props),{},{ticks:r}),i,a),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=Xe(this.props,!1),b=Xe(d,!1),w=Yn(Yn({},v),{},{fill:"none"},Xe(l,!1)),y=p.map(function(_,j){var S=s.getTickLineCoord(_),E=S.line,P=S.tick,k=Yn(Yn(Yn(Yn({textAnchor:m,verticalAnchor:g},v),{},{stroke:"none",fill:u},b),P),{},{index:j,payload:_,visibleTicksCount:p.length,tickFormatter:h});return O.createElement(Bt,Kl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Kc(s.props,_,j)),l&&O.createElement("line",Kl({},w,E,{className:ct("recharts-cartesian-axis-tick-line",yi(l,"className"))})),d&&t.renderTickItem(d,k,"".concat(st(h)?h(_.value,j):_.value).concat(f||"")))});return O.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,c=i.height,l=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,f=h.ticks,p=F0(h,Ybe),m=f;return st(l)&&(m=f&&f.length>0?l(this.props):l(p)),s<=0||c<=0||!m||!m.length?null:O.createElement(Bt,{className:ct("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),lr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,c=ct(i.className,"recharts-cartesian-axis-tick-value");return O.isValidElement(r)?s=O.cloneElement(r,Yn(Yn({},i),{},{className:c})):st(r)?s=r(Yn(Yn({},i),{},{className:c})):s=O.createElement(Yc,Kl({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(x.Component);rE(Ed,"displayName","CartesianAxis");rE(Ed,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var i0e=["x1","y1","x2","y2","key"],a0e=["offset"];function Jc(e){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jc(e)}function PT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(n),!0).forEach(function(r){s0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s0e(e,t,n){return t=o0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o0e(e){var t=c0e(e,"string");return Jc(t)=="symbol"?t:t+""}function c0e(e,t){if(Jc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nc(){return Nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nc.apply(this,arguments)}function kT(e,t){if(e==null)return{};var n=l0e(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function l0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var u0e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,a=t.y,s=t.width,c=t.height,l=t.ry;return O.createElement("rect",{x:i,y:a,ry:l,width:s,height:c,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function s3(e,t){var n;if(O.isValidElement(e))n=O.cloneElement(e,t);else if(st(e))n=e(t);else{var r=t.x1,i=t.y1,a=t.x2,s=t.y2,c=t.key,l=kT(t,i0e),u=Xe(l,!1);u.offset;var d=kT(u,a0e);n=O.createElement("line",Nc({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:c}))}return n}function d0e(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,l){var u=_r(_r({},e),{},{x1:t,y1:c,x2:t+n,y2:c,key:"line-".concat(l),index:l});return s3(i,u)});return O.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function h0e(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,a=e.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,l){var u=_r(_r({},e),{},{x1:c,y1:t,x2:c,y2:t+n,key:"line-".concat(l),index:l});return s3(i,u)});return O.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function f0e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,a=e.width,s=e.height,c=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var d=c.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==d[0]&&d.unshift(0);var h=d.map(function(f,p){var m=!d[p+1],g=m?i+s-f:d[p+1]-f;if(g<=0)return null;var v=p%t.length;return O.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:g,width:a,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function p0e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,a=e.x,s=e.y,c=e.width,l=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==d[0]&&d.unshift(0);var h=d.map(function(f,p){var m=!d[p+1],g=m?a+c-f:d[p+1]-f;if(g<=0)return null;var v=p%r.length;return O.createElement("rect",{key:"react-".concat(p),x:f,y:s,width:g,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var m0e=function(t,n){var r=t.xAxis,i=t.width,a=t.height,s=t.offset;return n4(nE(_r(_r(_r({},Ed.defaultProps),r),{},{ticks:vs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},g0e=function(t,n){var r=t.yAxis,i=t.width,a=t.height,s=t.offset;return n4(nE(_r(_r(_r({},Ed.defaultProps),r),{},{ticks:vs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Al={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function hg(e){var t,n,r,i,a,s,c=JS(),l=QS(),u=rbe(),d=_r(_r({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Al.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Al.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Al.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Al.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Al.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:Al.verticalFill,x:ve(e.x)?e.x:u.left,y:ve(e.y)?e.y:u.top,width:ve(e.width)?e.width:u.width,height:ve(e.height)?e.height:u.height}),h=d.x,f=d.y,p=d.width,m=d.height,g=d.syncWithTicks,v=d.horizontalValues,b=d.verticalValues,w=ebe(),y=tbe();if(!ve(p)||p<=0||!ve(m)||m<=0||!ve(h)||h!==+h||!ve(f)||f!==+f)return null;var _=d.verticalCoordinatesGenerator||m0e,j=d.horizontalCoordinatesGenerator||g0e,S=d.horizontalPoints,E=d.verticalPoints;if((!S||!S.length)&&st(j)){var P=v&&v.length,k=j({yAxis:y?_r(_r({},y),{},{ticks:P?v:y.ticks}):void 0,width:c,height:l,offset:u},P?!0:g);ga(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Jc(k),"]")),Array.isArray(k)&&(S=k)}if((!E||!E.length)&&st(_)){var T=b&&b.length,A=_({xAxis:w?_r(_r({},w),{},{ticks:T?b:w.ticks}):void 0,width:c,height:l,offset:u},T?!0:g);ga(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Jc(A),"]")),Array.isArray(A)&&(E=A)}return O.createElement("g",{className:"recharts-cartesian-grid"},O.createElement(u0e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),O.createElement(d0e,Nc({},d,{offset:u,horizontalPoints:S,xAxis:w,yAxis:y})),O.createElement(h0e,Nc({},d,{offset:u,verticalPoints:E,xAxis:w,yAxis:y})),O.createElement(f0e,Nc({},d,{horizontalPoints:S})),O.createElement(p0e,Nc({},d,{verticalPoints:E})))}hg.displayName="CartesianGrid";var v0e=["type","layout","connectNulls","ref"],y0e=["key"];function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}function CT(e,t){if(e==null)return{};var n=x0e(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function x0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bh.apply(this,arguments)}function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ii(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(n),!0).forEach(function(r){ha(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tl(e){return j0e(e)||_0e(e)||w0e(e)||b0e()}function b0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w0e(e,t){if(e){if(typeof e=="string")return c1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c1(e,t)}}function _0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function j0e(e){if(Array.isArray(e))return c1(e)}function c1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c3(r.key),r)}}function E0e(e,t,n){return t&&TT(e.prototype,t),n&&TT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function N0e(e,t,n){return t=Dv(t),P0e(e,o3()?Reflect.construct(t,n||[],Dv(e).constructor):t.apply(e,n))}function P0e(e,t){if(t&&(Ku(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k0e(e)}function k0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o3=function(){return!!e})()}function Dv(e){return Dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dv(e)}function C0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l1(e,t)}function l1(e,t){return l1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},l1(e,t)}function ha(e,t,n){return t=c3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c3(e){var t=A0e(e,"string");return Ku(t)=="symbol"?t:t+""}function A0e(e,t){if(Ku(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ku(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bp=function(e){function t(){var n;S0e(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=N0e(this,t,[].concat(i)),ha(n,"state",{isAnimationFinished:!0,totalLength:0}),ha(n,"generateSimpleStrokeDasharray",function(s,c){return"".concat(c,"px ").concat(s-c,"px")}),ha(n,"getStrokeDasharray",function(s,c,l){var u=l.reduce(function(b,w){return b+w});if(!u)return n.generateSimpleStrokeDasharray(c,s);for(var d=Math.floor(s/u),h=s%u,f=c-s,p=[],m=0,g=0;m<l.length;g+=l[m],++m)if(g+l[m]>h){p=[].concat(Tl(l.slice(0,m)),[h-g]);break}var v=p.length%2===0?[0,f]:[f];return[].concat(Tl(t.repeat(l,d)),Tl(p),v).map(function(b){return"".concat(b,"px")}).join(", ")}),ha(n,"id",yd("recharts-line-")),ha(n,"pathRef",function(s){n.mainCurve=s}),ha(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ha(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return C0e(t,e),E0e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,c=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,h=xi(d,xp);if(!h)return null;var f=function(g,v){return{x:g.x,y:g.y,value:g.value,errorVal:rr(g.payload,v)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return O.createElement(Bt,p,h.map(function(m){return O.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:s,xAxis:c,yAxis:l,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var c=this.props,l=c.dot,u=c.points,d=c.dataKey,h=Xe(this.props,!1),f=Xe(l,!0),p=u.map(function(g,v){var b=ii(ii(ii({key:"dot-".concat(v),r:3},h),f),{},{index:v,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return t.renderDotItem(l,b)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return O.createElement(Bt,Bh({className:"recharts-line-dots",key:"dots"},m),p)}},{key:"renderCurveStatically",value:function(r,i,a,s){var c=this.props,l=c.type,u=c.layout,d=c.connectNulls;c.ref;var h=CT(c,v0e),f=ii(ii(ii({},Xe(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:l,layout:u,connectNulls:d});return O.createElement(vv,Bh({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,c=s.points,l=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,h=s.animationDuration,f=s.animationEasing,p=s.animationId,m=s.animateNewValues,g=s.width,v=s.height,b=this.state,w=b.prevPoints,y=b.totalLength;return O.createElement(Ua,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(w){var S=w.length/c.length,E=c.map(function(R,L){var B=Math.floor(L*S);if(w[B]){var G=w[B],U=di(G.x,R.x),K=di(G.y,R.y);return ii(ii({},R),{},{x:U(j),y:K(j)})}if(m){var te=di(g*2,R.x),W=di(v/2,R.y);return ii(ii({},R),{},{x:te(j),y:W(j)})}return ii(ii({},R),{},{x:R.x,y:R.y})});return a.renderCurveStatically(E,r,i)}var P=di(0,y),k=P(j),T;if(l){var A="".concat(l).split(/[,\s]+/gim).map(function(R){return parseFloat(R)});T=a.getStrokeDasharray(k,y,A)}else T=a.generateSimpleStrokeDasharray(y,k);return a.renderCurveStatically(c,r,i,{strokeDasharray:T})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,c=a.isAnimationActive,l=this.state,u=l.prevPoints,d=l.totalLength;return c&&s&&s.length&&(!u&&d>0||!yp(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,c=i.points,l=i.className,u=i.xAxis,d=i.yAxis,h=i.top,f=i.left,p=i.width,m=i.height,g=i.isAnimationActive,v=i.id;if(a||!c||!c.length)return null;var b=this.state.isAnimationFinished,w=c.length===1,y=ct("recharts-line",l),_=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,S=_||j,E=pt(v)?this.id:v,P=(r=Xe(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=P.r,T=k===void 0?3:k,A=P.strokeWidth,R=A===void 0?2:A,L=JZ(s)?s:{},B=L.clipDot,G=B===void 0?!0:B,U=T*2+R;return O.createElement(Bt,{className:y},_||j?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(E)},O.createElement("rect",{x:_?f:f-p/2,y:j?h:h-m/2,width:_?p:p*2,height:j?m:m*2})),!G&&O.createElement("clipPath",{id:"clipPath-dots-".concat(E)},O.createElement("rect",{x:f-U/2,y:h-U/2,width:p+U,height:m+U}))):null,!w&&this.renderCurve(S,E),this.renderErrorBar(S,E),(w||s)&&this.renderDots(S,G,E),(!g||b)&&_s.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Tl(r),[0]):r,s=[],c=0;c<i;++c)s=[].concat(Tl(s),Tl(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(O.isValidElement(r))a=O.cloneElement(r,i);else if(st(r))a=r(i);else{var s=i.key,c=CT(i,y0e),l=ct("recharts-line-dot",typeof r!="boolean"?r.className:"");a=O.createElement(ox,Bh({key:s},c,{className:l}))}return a}}])}(x.PureComponent);ha(bp,"displayName","Line");ha(bp,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!al.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ha(bp,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,s=e.dataKey,c=e.bandSize,l=e.displayedData,u=e.offset,d=t.layout,h=l.map(function(f,p){var m=rr(f,s);return d==="horizontal"?{x:tA({axis:n,ticks:i,bandSize:c,entry:f,index:p}),y:pt(m)?null:r.scale(m),value:m,payload:f}:{x:pt(m)?null:n.scale(m),y:tA({axis:r,ticks:a,bandSize:c,entry:f,index:p}),value:m,payload:f}});return ii({points:h,layout:d},u)});function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}function T0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d3(r.key),r)}}function R0e(e,t,n){return t&&O0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $0e(e,t,n){return t=Lv(t),I0e(e,l3()?Reflect.construct(t,n||[],Lv(e).constructor):t.apply(e,n))}function I0e(e,t){if(t&&(Yu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M0e(e)}function M0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l3=function(){return!!e})()}function Lv(e){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lv(e)}function D0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u1(e,t)}function u1(e,t){return u1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},u1(e,t)}function u3(e,t,n){return t=d3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d3(e){var t=L0e(e,"string");return Yu(t)=="symbol"?t:t+""}function L0e(e,t){if(Yu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Yu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d1.apply(this,arguments)}function B0e(e){var t=e.xAxisId,n=JS(),r=QS(),i=Y4(t);return i==null?null:x.createElement(Ed,d1({},i,{className:ct("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return vs(s,!0)}}))}var Lc=function(e){function t(){return T0e(this,t),$0e(this,t,arguments)}return D0e(t,e),R0e(t,[{key:"render",value:function(){return x.createElement(B0e,this.props)}}])}(x.Component);u3(Lc,"displayName","XAxis");u3(Lc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function F0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p3(r.key),r)}}function U0e(e,t,n){return t&&z0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function H0e(e,t,n){return t=Bv(t),V0e(e,h3()?Reflect.construct(t,n||[],Bv(e).constructor):t.apply(e,n))}function V0e(e,t){if(t&&(Xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G0e(e)}function G0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h3=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bv(e)}function W0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h1(e,t)}function h1(e,t){return h1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},h1(e,t)}function f3(e,t,n){return t=p3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p3(e){var t=q0e(e,"string");return Xu(t)=="symbol"?t:t+""}function q0e(e,t){if(Xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function f1(){return f1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f1.apply(this,arguments)}var K0e=function(t){var n=t.yAxisId,r=JS(),i=QS(),a=X4(n);return a==null?null:x.createElement(Ed,f1({},a,{className:ct("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(c){return vs(c,!0)}}))},Bc=function(e){function t(){return F0e(this,t),H0e(this,t,arguments)}return W0e(t,e),U0e(t,[{key:"render",value:function(){return x.createElement(K0e,this.props)}}])}(x.Component);f3(Bc,"displayName","YAxis");f3(Bc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function OT(e){return J0e(e)||Z0e(e)||X0e(e)||Y0e()}function Y0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X0e(e,t){if(e){if(typeof e=="string")return p1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p1(e,t)}}function Z0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function J0e(e){if(Array.isArray(e))return p1(e)}function p1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m1=function(t,n,r,i,a){var s=xi(t,tE),c=xi(t,gx),l=[].concat(OT(s),OT(c)),u=xi(t,yx),d="".concat(i,"Id"),h=i[0],f=n;if(l.length&&(f=l.reduce(function(g,v){if(v.props[d]===r&&Da(v.props,"extendDomain")&&ve(v.props[h])){var b=v.props[h];return[Math.min(g[0],b),Math.max(g[1],b)]}return g},f)),u.length){var p="".concat(h,"1"),m="".concat(h,"2");f=u.reduce(function(g,v){if(v.props[d]===r&&Da(v.props,"extendDomain")&&ve(v.props[p])&&ve(v.props[m])){var b=v.props[p],w=v.props[m];return[Math.min(g[0],b,w),Math.max(g[1],b,w)]}return g},f)}return a&&a.length&&(f=a.reduce(function(g,v){return ve(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},f)),f},m3={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,h||l,f),m=n?n+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},c.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,m=new Array(p);f<p;f++)m[f]=h[f].fn;return m},c.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},c.prototype.emit=function(u,d,h,f,p,m){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],b=arguments.length,w,y;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,h),!0;case 4:return v.fn.call(v.context,d,h,f),!0;case 5:return v.fn.call(v.context,d,h,f,p),!0;case 6:return v.fn.call(v.context,d,h,f,p,m),!0}for(y=1,w=new Array(b-1);y<b;y++)w[y-1]=arguments[y];v.fn.apply(v.context,w)}else{var _=v.length,j;for(y=0;y<_;y++)switch(v[y].once&&this.removeListener(u,v[y].fn,void 0,!0),b){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,d);break;case 3:v[y].fn.call(v[y].context,d,h);break;case 4:v[y].fn.call(v[y].context,d,h,f);break;default:if(!w)for(j=1,w=new Array(b-1);j<b;j++)w[j-1]=arguments[j];v[y].fn.apply(v[y].context,w)}}return!0},c.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},c.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},c.prototype.removeListener=function(u,d,h,f){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return s(this,p),this;var m=this._events[p];if(m.fn)m.fn===d&&(!f||m.once)&&(!h||m.context===h)&&s(this,p);else{for(var g=0,v=[],b=m.length;g<b;g++)(m[g].fn!==d||f&&!m[g].once||h&&m[g].context!==h)&&v.push(m[g]);v.length?this._events[p]=v.length===1?v[0]:v:s(this,p)}return this},c.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c})(m3);var Q0e=m3.exports;const ewe=rn(Q0e);var z0=new ewe,U0="recharts.syncMouseEvents";function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function twe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g3(r.key),r)}}function rwe(e,t,n){return t&&nwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function H0(e,t,n){return t=g3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g3(e){var t=iwe(e,"string");return Lf(t)=="symbol"?t:t+""}function iwe(e,t){if(Lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var awe=function(){function e(){twe(this,e),H0(this,"activeIndex",0),H0(this,"coordinateList",[]),H0(this,"layout","horizontal")}return rwe(e,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,c=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=c??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,c=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+l+u,f=s+this.offset.top+c/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function swe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&ve(r)&&ve(i))return!0}return!1}function owe(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function v3(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,a=e.endAngle,s=un(t,n,r,i),c=un(t,n,r,a);return{points:[s,c],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function cwe(e,t,n){var r,i,a,s;if(e==="horizontal")r=t.x,a=r,i=n.top,s=n.top+n.height;else if(e==="vertical")i=t.y,s=i,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var c=t.cx,l=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,f=un(c,l,u,h),p=un(c,l,d,h);r=f.x,i=f.y,a=p.x,s=p.y}else return v3(t);return[{x:r,y:i},{x:a,y:s}]}function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function RT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RT(Object(n),!0).forEach(function(r){lwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lwe(e,t,n){return t=uwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uwe(e){var t=dwe(e,"string");return Bf(t)=="symbol"?t:t+""}function dwe(e,t){if(Bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hwe(e){var t,n,r=e.element,i=e.tooltipEventType,a=e.isActive,s=e.activeCoordinate,c=e.activePayload,l=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!s||f!=="ScatterChart"&&i!=="axis")return null;var m,g=vv;if(f==="ScatterChart")m=s,g=Age;else if(f==="BarChart")m=owe(h,s,l,d),g=KS;else if(h==="radial"){var v=v3(s),b=v.cx,w=v.cy,y=v.radius,_=v.startAngle,j=v.endAngle;m={cx:b,cy:w,startAngle:_,endAngle:j,innerRadius:y,outerRadius:y},g=f4}else m={points:cwe(h,s,l)},g=vv;var S=Dm(Dm(Dm(Dm({stroke:"#ccc",pointerEvents:"none"},l),m),Xe(p,!1)),{},{payload:c,payloadIndex:u,className:ct("recharts-tooltip-cursor",p.className)});return x.isValidElement(p)?x.cloneElement(p,S):x.createElement(g,S)}var fwe=["item"],pwe=["children","className","width","height","style","compact","title","desc"];function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function Yl(){return Yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yl.apply(this,arguments)}function $T(e,t){return vwe(e)||gwe(e,t)||x3(e,t)||mwe()}function mwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return c}}function vwe(e){if(Array.isArray(e))return e}function IT(e,t){if(e==null)return{};var n=ywe(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ywe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function xwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b3(r.key),r)}}function wwe(e,t,n){return t&&bwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _we(e,t,n){return t=Fv(t),jwe(e,y3()?Reflect.construct(t,n||[],Fv(e).constructor):t.apply(e,n))}function jwe(e,t){if(t&&(Zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Swe(e)}function Swe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y3=function(){return!!e})()}function Fv(e){return Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fv(e)}function Ewe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g1(e,t)}function g1(e,t){return g1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},g1(e,t)}function Ju(e){return kwe(e)||Pwe(e)||x3(e)||Nwe()}function Nwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x3(e,t){if(e){if(typeof e=="string")return v1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v1(e,t)}}function Pwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kwe(e){if(Array.isArray(e))return v1(e)}function v1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function MT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(n),!0).forEach(function(r){Je(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Je(e,t,n){return t=b3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b3(e){var t=Cwe(e,"string");return Zu(t)=="symbol"?t:t+""}function Cwe(e,t){if(Zu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Awe={xAxis:["bottom","top"],yAxis:["left","right"]},Twe={width:"100%",height:"100%"},w3={x:0,y:0};function Lm(e){return e}var Owe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},Rwe=function(t,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var s=a.coordinate,c=i.radius;return Q(Q(Q({},i),un(i.cx,i.cy,c,s)),{},{angle:s,radius:c})}var l=a.coordinate,u=i.angle;return Q(Q(Q({},i),un(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return w3},xx=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(c,l){var u=l.props.data;return u&&u.length?[].concat(Ju(c),Ju(u)):c},[]);return s.length>0?s:t&&t.length&&ve(i)&&ve(a)?t.slice(i,a+1):[]};function _3(e){return e==="number"?[0,"auto"]:void 0}var y1=function(t,n,r,i){var a=t.graphicalItems,s=t.tooltipAxis,c=xx(n,t);return r<0||!a||!a.length||r>=c.length?null:a.reduce(function(l,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(s.dataKey&&!s.allowDuplicatedCategory){var p=h===void 0?c:h;f=Fg(p,s.dataKey,i)}else f=h&&h[r]||c[r];return f?[].concat(Ju(l),[o4(u,f)]):l},[])},DT=function(t,n,r,i){var a=i||{x:t.chartX,y:t.chartY},s=Owe(a,r),c=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,d=Qhe(s,c,u,l);if(d>=0&&u){var h=u[d]&&u[d].value,f=y1(t,n,d,h),p=Rwe(r,c,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:p}}return null},$we=function(t,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,c=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=t.stackOffset,p=t4(d,a);return r.reduce(function(m,g){var v,b=g.type.defaultProps!==void 0?Q(Q({},g.type.defaultProps),g.props):g.props,w=b.type,y=b.dataKey,_=b.allowDataOverflow,j=b.allowDuplicatedCategory,S=b.scale,E=b.ticks,P=b.includeHidden,k=b[s];if(m[k])return m;var T=xx(t.data,{graphicalItems:i.filter(function(ne){var ce,we=s in ne.props?ne.props[s]:(ce=ne.type.defaultProps)===null||ce===void 0?void 0:ce[s];return we===k}),dataStartIndex:l,dataEndIndex:u}),A=T.length,R,L,B;swe(b.domain,_,w)&&(R=O_(b.domain,null,_),p&&(w==="number"||S!=="auto")&&(B=Ih(T,y,"category")));var G=_3(w);if(!R||R.length===0){var U,K=(U=b.domain)!==null&&U!==void 0?U:G;if(y){if(R=Ih(T,y,w),w==="category"&&p){var te=UZ(R);j&&te?(L=R,R=Pv(0,A)):j||(R=aA(K,R,g).reduce(function(ne,ce){return ne.indexOf(ce)>=0?ne:[].concat(Ju(ne),[ce])},[]))}else if(w==="category")j?R=R.filter(function(ne){return ne!==""&&!pt(ne)}):R=aA(K,R,g).reduce(function(ne,ce){return ne.indexOf(ce)>=0||ce===""||pt(ce)?ne:[].concat(Ju(ne),[ce])},[]);else if(w==="number"){var W=ife(T,i.filter(function(ne){var ce,we,et=s in ne.props?ne.props[s]:(ce=ne.type.defaultProps)===null||ce===void 0?void 0:ce[s],jt="hide"in ne.props?ne.props.hide:(we=ne.type.defaultProps)===null||we===void 0?void 0:we.hide;return et===k&&(P||!jt)}),y,a,d);W&&(R=W)}p&&(w==="number"||S!=="auto")&&(B=Ih(T,y,"category"))}else p?R=Pv(0,A):c&&c[k]&&c[k].hasStack&&w==="number"?R=f==="expand"?[0,1]:s4(c[k].stackGroups,l,u):R=e4(T,i.filter(function(ne){var ce=s in ne.props?ne.props[s]:ne.type.defaultProps[s],we="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return ce===k&&(P||!we)}),w,d,!0);if(w==="number")R=m1(h,R,k,a,E),K&&(R=O_(K,R,_));else if(w==="category"&&K){var fe=K,be=R.every(function(ne){return fe.indexOf(ne)>=0});be&&(R=fe)}}return Q(Q({},m),{},Je({},k,Q(Q({},b),{},{axisType:a,domain:R,categoricalDomain:B,duplicateDomain:L,originalDomain:(v=b.domain)!==null&&v!==void 0?v:G,isCategorical:p,layout:d})))},{})},Iwe=function(t,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,c=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=xx(t.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),p=f.length,m=t4(d,a),g=-1;return r.reduce(function(v,b){var w=b.type.defaultProps!==void 0?Q(Q({},b.type.defaultProps),b.props):b.props,y=w[s],_=_3("number");if(!v[y]){g++;var j;return m?j=Pv(0,p):c&&c[y]&&c[y].hasStack?(j=s4(c[y].stackGroups,l,u),j=m1(h,j,y,a)):(j=O_(_,e4(f,r.filter(function(S){var E,P,k=s in S.props?S.props[s]:(E=S.type.defaultProps)===null||E===void 0?void 0:E[s],T="hide"in S.props?S.props.hide:(P=S.type.defaultProps)===null||P===void 0?void 0:P.hide;return k===y&&!T}),"number",d),i.defaultProps.allowDataOverflow),j=m1(h,j,y,a)),Q(Q({},v),{},Je({},y,Q(Q({axisType:a},i.defaultProps),{},{hide:!0,orientation:yi(Awe,"".concat(a,".").concat(g%2),null),domain:j,originalDomain:_,isCategorical:m,layout:d})))}return v},{})},Mwe=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,c=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=t.children,h="".concat(i,"Id"),f=xi(d,a),p={};return f&&f.length?p=$we(t,{axes:f,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:c,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(p=Iwe(t,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:c,dataStartIndex:l,dataEndIndex:u})),p},Dwe=function(t){var n=mo(t),r=vs(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:wS(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:pv(n,r)}},LT=function(t){var n=t.children,r=t.defaultShowTooltip,i=ci(n,Uu),a=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Lwe=function(t){return!t||!t.length?!1:t.some(function(n){var r=bs(n&&n.type);return r&&r.indexOf("Bar")>=0})},BT=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Bwe=function(t,n){var r=t.props,i=t.graphicalItems,a=t.xAxisMap,s=a===void 0?{}:a,c=t.yAxisMap,l=c===void 0?{}:c,u=r.width,d=r.height,h=r.children,f=r.margin||{},p=ci(h,Uu),m=ci(h,su),g=Object.keys(l).reduce(function(j,S){var E=l[S],P=E.orientation;return!E.mirror&&!E.hide?Q(Q({},j),{},Je({},P,j[P]+E.width)):j},{left:f.left||0,right:f.right||0}),v=Object.keys(s).reduce(function(j,S){var E=s[S],P=E.orientation;return!E.mirror&&!E.hide?Q(Q({},j),{},Je({},P,yi(j,"".concat(P))+E.height)):j},{top:f.top||0,bottom:f.bottom||0}),b=Q(Q({},v),g),w=b.bottom;p&&(b.bottom+=p.props.height||Uu.defaultProps.height),m&&n&&(b=nfe(b,i,r,n));var y=u-b.left-b.right,_=d-b.top-b.bottom;return Q(Q({brushBottom:w},b),{},{width:Math.max(y,0),height:Math.max(_,0)})},Fwe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},iE=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,s=t.validateTooltipEventTypes,c=s===void 0?["axis"]:s,l=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,f=function(b,w){var y=w.graphicalItems,_=w.stackGroups,j=w.offset,S=w.updateId,E=w.dataStartIndex,P=w.dataEndIndex,k=b.barSize,T=b.layout,A=b.barGap,R=b.barCategoryGap,L=b.maxBarSize,B=BT(T),G=B.numericAxisName,U=B.cateAxisName,K=Lwe(y),te=[];return y.forEach(function(W,fe){var be=xx(b.data,{graphicalItems:[W],dataStartIndex:E,dataEndIndex:P}),ne=W.type.defaultProps!==void 0?Q(Q({},W.type.defaultProps),W.props):W.props,ce=ne.dataKey,we=ne.maxBarSize,et=ne["".concat(G,"Id")],jt=ne["".concat(U,"Id")],_e={},ie=l.reduce(function(mt,He){var Ye=w["".concat(He.axisType,"Map")],At=ne["".concat(He.axisType,"Id")];Ye&&Ye[At]||He.axisType==="zAxis"||Zc();var Tt=Ye[At];return Q(Q({},mt),{},Je(Je({},He.axisType,Tt),"".concat(He.axisType,"Ticks"),vs(Tt)))},_e),Y=ie[U],re=ie["".concat(U,"Ticks")],ae=_&&_[et]&&_[et].hasStack&&ffe(W,_[et].stackGroups),H=bs(W.type).indexOf("Bar")>=0,Te=pv(Y,re),Ee=[],We=K&&efe({barSize:k,stackGroups:_,totalSize:Fwe(ie,U)});if(H){var gt,Jt,le=pt(we)?L:we,ze=(gt=(Jt=pv(Y,re,!0))!==null&&Jt!==void 0?Jt:le)!==null&&gt!==void 0?gt:0;Ee=tfe({barGap:A,barCategoryGap:R,bandSize:ze!==Te?ze:Te,sizeList:We[jt],maxBarSize:le}),ze!==Te&&(Ee=Ee.map(function(mt){return Q(Q({},mt),{},{position:Q(Q({},mt.position),{},{offset:mt.position.offset-ze/2})})}))}var Le=W&&W.type&&W.type.getComposedData;Le&&te.push({props:Q(Q({},Le(Q(Q({},ie),{},{displayedData:be,props:b,dataKey:ce,item:W,bandSize:Te,barPosition:Ee,offset:j,stackedData:ae,layout:T,dataStartIndex:E,dataEndIndex:P}))),{},Je(Je(Je({key:W.key||"item-".concat(fe)},G,ie[G]),U,ie[U]),"animationId",S)),childIndex:tJ(W,b.children),item:W})}),te},p=function(b,w){var y=b.props,_=b.dataStartIndex,j=b.dataEndIndex,S=b.updateId;if(!Jk({props:y}))return null;var E=y.children,P=y.layout,k=y.stackOffset,T=y.data,A=y.reverseStackOrder,R=BT(P),L=R.numericAxisName,B=R.cateAxisName,G=xi(E,r),U=dfe(T,G,"".concat(L,"Id"),"".concat(B,"Id"),k,A),K=l.reduce(function(ne,ce){var we="".concat(ce.axisType,"Map");return Q(Q({},ne),{},Je({},we,Mwe(y,Q(Q({},ce),{},{graphicalItems:G,stackGroups:ce.axisType===L&&U,dataStartIndex:_,dataEndIndex:j}))))},{}),te=Bwe(Q(Q({},K),{},{props:y,graphicalItems:G}),w==null?void 0:w.legendBBox);Object.keys(K).forEach(function(ne){K[ne]=d(y,K[ne],te,ne.replace("Map",""),n)});var W=K["".concat(B,"Map")],fe=Dwe(W),be=f(y,Q(Q({},K),{},{dataStartIndex:_,dataEndIndex:j,updateId:S,graphicalItems:G,stackGroups:U,offset:te}));return Q(Q({formattedGraphicalItems:be,graphicalItems:G,offset:te,stackGroups:U},fe),K)},m=function(v){function b(w){var y,_,j;return xwe(this,b),j=_we(this,b,[w]),Je(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Je(j,"accessibilityManager",new awe),Je(j,"handleLegendBBoxUpdate",function(S){if(S){var E=j.state,P=E.dataStartIndex,k=E.dataEndIndex,T=E.updateId;j.setState(Q({legendBBox:S},p({props:j.props,dataStartIndex:P,dataEndIndex:k,updateId:T},Q(Q({},j.state),{},{legendBBox:S}))))}}),Je(j,"handleReceiveSyncEvent",function(S,E,P){if(j.props.syncId===S){if(P===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(E)}}),Je(j,"handleBrushChange",function(S){var E=S.startIndex,P=S.endIndex;if(E!==j.state.dataStartIndex||P!==j.state.dataEndIndex){var k=j.state.updateId;j.setState(function(){return Q({dataStartIndex:E,dataEndIndex:P},p({props:j.props,dataStartIndex:E,dataEndIndex:P,updateId:k},j.state))}),j.triggerSyncEvent({dataStartIndex:E,dataEndIndex:P})}}),Je(j,"handleMouseEnter",function(S){var E=j.getMouseInfo(S);if(E){var P=Q(Q({},E),{},{isTooltipActive:!0});j.setState(P),j.triggerSyncEvent(P);var k=j.props.onMouseEnter;st(k)&&k(P,S)}}),Je(j,"triggeredAfterMouseMove",function(S){var E=j.getMouseInfo(S),P=E?Q(Q({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(P),j.triggerSyncEvent(P);var k=j.props.onMouseMove;st(k)&&k(P,S)}),Je(j,"handleItemMouseEnter",function(S){j.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Je(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),Je(j,"handleMouseMove",function(S){S.persist(),j.throttleTriggeredAfterMouseMove(S)}),Je(j,"handleMouseLeave",function(S){j.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};j.setState(E),j.triggerSyncEvent(E);var P=j.props.onMouseLeave;st(P)&&P(E,S)}),Je(j,"handleOuterEvent",function(S){var E=eJ(S),P=yi(j.props,"".concat(E));if(E&&st(P)){var k,T;/.*touch.*/i.test(E)?T=j.getMouseInfo(S.changedTouches[0]):T=j.getMouseInfo(S),P((k=T)!==null&&k!==void 0?k:{},S)}}),Je(j,"handleClick",function(S){var E=j.getMouseInfo(S);if(E){var P=Q(Q({},E),{},{isTooltipActive:!0});j.setState(P),j.triggerSyncEvent(P);var k=j.props.onClick;st(k)&&k(P,S)}}),Je(j,"handleMouseDown",function(S){var E=j.props.onMouseDown;if(st(E)){var P=j.getMouseInfo(S);E(P,S)}}),Je(j,"handleMouseUp",function(S){var E=j.props.onMouseUp;if(st(E)){var P=j.getMouseInfo(S);E(P,S)}}),Je(j,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Je(j,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseDown(S.changedTouches[0])}),Je(j,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseUp(S.changedTouches[0])}),Je(j,"handleDoubleClick",function(S){var E=j.props.onDoubleClick;if(st(E)){var P=j.getMouseInfo(S);E(P,S)}}),Je(j,"handleContextMenu",function(S){var E=j.props.onContextMenu;if(st(E)){var P=j.getMouseInfo(S);E(P,S)}}),Je(j,"triggerSyncEvent",function(S){j.props.syncId!==void 0&&z0.emit(U0,j.props.syncId,S,j.eventEmitterSymbol)}),Je(j,"applySyncEvent",function(S){var E=j.props,P=E.layout,k=E.syncMethod,T=j.state.updateId,A=S.dataStartIndex,R=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)j.setState(Q({dataStartIndex:A,dataEndIndex:R},p({props:j.props,dataStartIndex:A,dataEndIndex:R,updateId:T},j.state)));else if(S.activeTooltipIndex!==void 0){var L=S.chartX,B=S.chartY,G=S.activeTooltipIndex,U=j.state,K=U.offset,te=U.tooltipTicks;if(!K)return;if(typeof k=="function")G=k(te,S);else if(k==="value"){G=-1;for(var W=0;W<te.length;W++)if(te[W].value===S.activeLabel){G=W;break}}var fe=Q(Q({},K),{},{x:K.left,y:K.top}),be=Math.min(L,fe.x+fe.width),ne=Math.min(B,fe.y+fe.height),ce=te[G]&&te[G].value,we=y1(j.state,j.props.data,G),et=te[G]?{x:P==="horizontal"?te[G].coordinate:be,y:P==="horizontal"?ne:te[G].coordinate}:w3;j.setState(Q(Q({},S),{},{activeLabel:ce,activeCoordinate:et,activePayload:we,activeTooltipIndex:G}))}else j.setState(S)}),Je(j,"renderCursor",function(S){var E,P=j.state,k=P.isTooltipActive,T=P.activeCoordinate,A=P.activePayload,R=P.offset,L=P.activeTooltipIndex,B=P.tooltipAxisBandSize,G=j.getTooltipEventType(),U=(E=S.props.active)!==null&&E!==void 0?E:k,K=j.props.layout,te=S.key||"_recharts-cursor";return O.createElement(hwe,{key:te,activeCoordinate:T,activePayload:A,activeTooltipIndex:L,chartName:n,element:S,isActive:U,layout:K,offset:R,tooltipAxisBandSize:B,tooltipEventType:G})}),Je(j,"renderPolarAxis",function(S,E,P){var k=yi(S,"type.axisType"),T=yi(j.state,"".concat(k,"Map")),A=S.type.defaultProps,R=A!==void 0?Q(Q({},A),S.props):S.props,L=T&&T[R["".concat(k,"Id")]];return x.cloneElement(S,Q(Q({},L),{},{className:ct(k,L.className),key:S.key||"".concat(E,"-").concat(P),ticks:vs(L,!0)}))}),Je(j,"renderPolarGrid",function(S){var E=S.props,P=E.radialLines,k=E.polarAngles,T=E.polarRadius,A=j.state,R=A.radiusAxisMap,L=A.angleAxisMap,B=mo(R),G=mo(L),U=G.cx,K=G.cy,te=G.innerRadius,W=G.outerRadius;return x.cloneElement(S,{polarAngles:Array.isArray(k)?k:vs(G,!0).map(function(fe){return fe.coordinate}),polarRadius:Array.isArray(T)?T:vs(B,!0).map(function(fe){return fe.coordinate}),cx:U,cy:K,innerRadius:te,outerRadius:W,key:S.key||"polar-grid",radialLines:P})}),Je(j,"renderLegend",function(){var S=j.state.formattedGraphicalItems,E=j.props,P=E.children,k=E.width,T=E.height,A=j.props.margin||{},R=k-(A.left||0)-(A.right||0),L=J5({children:P,formattedGraphicalItems:S,legendWidth:R,legendContent:u});if(!L)return null;var B=L.item,G=IT(L,fwe);return x.cloneElement(B,Q(Q({},G),{},{chartWidth:k,chartHeight:T,margin:A,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),Je(j,"renderTooltip",function(){var S,E=j.props,P=E.children,k=E.accessibilityLayer,T=ci(P,li);if(!T)return null;var A=j.state,R=A.isTooltipActive,L=A.activeCoordinate,B=A.activePayload,G=A.activeLabel,U=A.offset,K=(S=T.props.active)!==null&&S!==void 0?S:R;return x.cloneElement(T,{viewBox:Q(Q({},U),{},{x:U.left,y:U.top}),active:K,label:G,payload:K?B:[],coordinate:L,accessibilityLayer:k})}),Je(j,"renderBrush",function(S){var E=j.props,P=E.margin,k=E.data,T=j.state,A=T.offset,R=T.dataStartIndex,L=T.dataEndIndex,B=T.updateId;return x.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Rm(j.handleBrushChange,S.props.onChange),data:k,x:ve(S.props.x)?S.props.x:A.left,y:ve(S.props.y)?S.props.y:A.top+A.height+A.brushBottom-(P.bottom||0),width:ve(S.props.width)?S.props.width:A.width,startIndex:R,endIndex:L,updateId:"brush-".concat(B)})}),Je(j,"renderReferenceElement",function(S,E,P){if(!S)return null;var k=j,T=k.clipPathId,A=j.state,R=A.xAxisMap,L=A.yAxisMap,B=A.offset,G=S.type.defaultProps||{},U=S.props,K=U.xAxisId,te=K===void 0?G.xAxisId:K,W=U.yAxisId,fe=W===void 0?G.yAxisId:W;return x.cloneElement(S,{key:S.key||"".concat(E,"-").concat(P),xAxis:R[te],yAxis:L[fe],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:T})}),Je(j,"renderActivePoints",function(S){var E=S.item,P=S.activePoint,k=S.basePoint,T=S.childIndex,A=S.isRange,R=[],L=E.props.key,B=E.item.type.defaultProps!==void 0?Q(Q({},E.item.type.defaultProps),E.item.props):E.item.props,G=B.activeDot,U=B.dataKey,K=Q(Q({index:T,dataKey:U,cx:P.x,cy:P.y,r:4,fill:qS(E.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Xe(G,!1)),zg(G));return R.push(b.renderActiveDot(G,K,"".concat(L,"-activePoint-").concat(T))),k?R.push(b.renderActiveDot(G,Q(Q({},K),{},{cx:k.x,cy:k.y}),"".concat(L,"-basePoint-").concat(T))):A&&R.push(null),R}),Je(j,"renderGraphicChild",function(S,E,P){var k=j.filterFormatItem(S,E,P);if(!k)return null;var T=j.getTooltipEventType(),A=j.state,R=A.isTooltipActive,L=A.tooltipAxis,B=A.activeTooltipIndex,G=A.activeLabel,U=j.props.children,K=ci(U,li),te=k.props,W=te.points,fe=te.isRange,be=te.baseLine,ne=k.item.type.defaultProps!==void 0?Q(Q({},k.item.type.defaultProps),k.item.props):k.item.props,ce=ne.activeDot,we=ne.hide,et=ne.activeBar,jt=ne.activeShape,_e=!!(!we&&R&&K&&(ce||et||jt)),ie={};T!=="axis"&&K&&K.props.trigger==="click"?ie={onClick:Rm(j.handleItemMouseEnter,S.props.onClick)}:T!=="axis"&&(ie={onMouseLeave:Rm(j.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Rm(j.handleItemMouseEnter,S.props.onMouseEnter)});var Y=x.cloneElement(S,Q(Q({},k.props),ie));function re(He){return typeof L.dataKey=="function"?L.dataKey(He.payload):null}if(_e)if(B>=0){var ae,H;if(L.dataKey&&!L.allowDuplicatedCategory){var Te=typeof L.dataKey=="function"?re:"payload.".concat(L.dataKey.toString());ae=Fg(W,Te,G),H=fe&&be&&Fg(be,Te,G)}else ae=W==null?void 0:W[B],H=fe&&be&&be[B];if(jt||et){var Ee=S.props.activeIndex!==void 0?S.props.activeIndex:B;return[x.cloneElement(S,Q(Q(Q({},k.props),ie),{},{activeIndex:Ee})),null,null]}if(!pt(ae))return[Y].concat(Ju(j.renderActivePoints({item:k,activePoint:ae,basePoint:H,childIndex:B,isRange:fe})))}else{var We,gt=(We=j.getItemByXY(j.state.activeCoordinate))!==null&&We!==void 0?We:{graphicalItem:Y},Jt=gt.graphicalItem,le=Jt.item,ze=le===void 0?S:le,Le=Jt.childIndex,mt=Q(Q(Q({},k.props),ie),{},{activeIndex:Le});return[x.cloneElement(ze,mt),null,null]}return fe?[Y,null,null]:[Y,null]}),Je(j,"renderCustomized",function(S,E,P){return x.cloneElement(S,Q(Q({key:"recharts-customized-".concat(P)},j.props),j.state))}),Je(j,"renderMap",{CartesianGrid:{handler:Lm,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Lm},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Lm},YAxis:{handler:Lm},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((y=w.id)!==null&&y!==void 0?y:yd("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=ZL(j.triggeredAfterMouseMove,(_=w.throttleDelay)!==null&&_!==void 0?_:1e3/60),j.state={},j}return Ewe(b,v),wwe(b,[{key:"componentDidMount",value:function(){var y,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,_=y.children,j=y.data,S=y.height,E=y.layout,P=ci(_,li);if(P){var k=P.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,A=y1(this.state,j,k,T),R=this.state.tooltipTicks[k].coordinate,L=(this.state.offset.top+S)/2,B=E==="horizontal",G=B?{x:R,y:L}:{y:R,x:L},U=this.state.formattedGraphicalItems.find(function(te){var W=te.item;return W.type.name==="Scatter"});U&&(G=Q(Q({},G),U.props.points[k].tooltipPosition),A=U.props.points[k].tooltipPayload);var K={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:T,activePayload:A,activeCoordinate:G};this.setState(K),this.renderCursor(P),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var j,S;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(y){qw([ci(y.children,li)],[ci(this.props.children,li)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=ci(this.props.children,li);if(y&&typeof y.props.shared=="boolean"){var _=y.props.shared?"axis":"item";return c.indexOf(_)>=0?_:a}return a}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var _=this.container,j=_.getBoundingClientRect(),S=Pce(j),E={chartX:Math.round(y.pageX-S.left),chartY:Math.round(y.pageY-S.top)},P=j.width/_.offsetWidth||1,k=this.inRange(E.chartX,E.chartY,P);if(!k)return null;var T=this.state,A=T.xAxisMap,R=T.yAxisMap,L=this.getTooltipEventType(),B=DT(this.state,this.props.data,this.props.layout,k);if(L!=="axis"&&A&&R){var G=mo(A).scale,U=mo(R).scale,K=G&&G.invert?G.invert(E.chartX):null,te=U&&U.invert?U.invert(E.chartY):null;return Q(Q({},E),{},{xValue:K,yValue:te},B)}return B?Q(Q({},E),B):null}},{key:"inRange",value:function(y,_){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,E=y/j,P=_/j;if(S==="horizontal"||S==="vertical"){var k=this.state.offset,T=E>=k.left&&E<=k.left+k.width&&P>=k.top&&P<=k.top+k.height;return T?{x:E,y:P}:null}var A=this.state,R=A.angleAxisMap,L=A.radiusAxisMap;if(R&&L){var B=mo(R);return cA({x:E,y:P},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,_=this.getTooltipEventType(),j=ci(y,li),S={};j&&_==="axis"&&(j.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=zg(this.props,this.handleOuterEvent);return Q(Q({},E),S)}},{key:"addListener",value:function(){z0.on(U0,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){z0.removeListener(U0,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,_,j){for(var S=this.state.formattedGraphicalItems,E=0,P=S.length;E<P;E++){var k=S[E];if(k.item===y||k.props.key===y.key||_===bs(k.item.type)&&j===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,_=this.state.offset,j=_.left,S=_.top,E=_.height,P=_.width;return O.createElement("defs",null,O.createElement("clipPath",{id:y},O.createElement("rect",{x:j,y:S,height:E,width:P})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(_,j){var S=$T(j,2),E=S[0],P=S[1];return Q(Q({},_),{},Je({},E,P.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(_,j){var S=$T(j,2),E=S[0],P=S[1];return Q(Q({},_),{},Je({},E,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[y])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(y){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[y])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(y){var _=this.state,j=_.formattedGraphicalItems,S=_.activeItem;if(j&&j.length)for(var E=0,P=j.length;E<P;E++){var k=j[E],T=k.props,A=k.item,R=A.type.defaultProps!==void 0?Q(Q({},A.type.defaultProps),A.props):A.props,L=bs(A.type);if(L==="Bar"){var B=(T.data||[]).find(function(te){return uge(y,te)});if(B)return{graphicalItem:k,payload:B}}else if(L==="RadialBar"){var G=(T.data||[]).find(function(te){return cA(y,te)});if(G)return{graphicalItem:k,payload:G}}else if(hx(k,S)||fx(k,S)||Rf(k,S)){var U=Jve({graphicalItem:k,activeTooltipItem:S,itemData:R.data}),K=R.activeIndex===void 0?U:R.activeIndex;return{graphicalItem:Q(Q({},k),{},{childIndex:K}),payload:Rf(k,S)?R.data[U]:k.props.data[U]}}}return null}},{key:"render",value:function(){var y=this;if(!Jk(this))return null;var _=this.props,j=_.children,S=_.className,E=_.width,P=_.height,k=_.style,T=_.compact,A=_.title,R=_.desc,L=IT(_,pwe),B=Xe(L,!1);if(T)return O.createElement(gT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},O.createElement(Yw,Yl({},B,{width:E,height:P,title:A,desc:R}),this.renderClipPath(),e2(j,this.renderMap)));if(this.props.accessibilityLayer){var G,U;B.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,B.role=(U=this.props.role)!==null&&U!==void 0?U:"application",B.onKeyDown=function(te){y.accessibilityManager.keyboardEvent(te)},B.onFocus=function(){y.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return O.createElement(gT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},O.createElement("div",Yl({className:ct("recharts-wrapper",S),style:Q({position:"relative",cursor:"default",width:E,height:P},k)},K,{ref:function(W){y.container=W}}),O.createElement(Yw,Yl({},B,{width:E,height:P,title:A,desc:R,style:Twe}),this.renderClipPath(),e2(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);Je(m,"displayName",n),Je(m,"defaultProps",Q({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Je(m,"getDerivedStateFromProps",function(v,b){var w=v.dataKey,y=v.data,_=v.children,j=v.width,S=v.height,E=v.layout,P=v.stackOffset,k=v.margin,T=b.dataStartIndex,A=b.dataEndIndex;if(b.updateId===void 0){var R=LT(v);return Q(Q(Q({},R),{},{updateId:0},p(Q(Q({props:v},R),{},{updateId:0}),b)),{},{prevDataKey:w,prevData:y,prevWidth:j,prevHeight:S,prevLayout:E,prevStackOffset:P,prevMargin:k,prevChildren:_})}if(w!==b.prevDataKey||y!==b.prevData||j!==b.prevWidth||S!==b.prevHeight||E!==b.prevLayout||P!==b.prevStackOffset||!au(k,b.prevMargin)){var L=LT(v),B={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},G=Q(Q({},DT(b,y,E)),{},{updateId:b.updateId+1}),U=Q(Q(Q({},L),B),G);return Q(Q(Q({},U),p(Q({props:v},U),b)),{},{prevDataKey:w,prevData:y,prevWidth:j,prevHeight:S,prevLayout:E,prevStackOffset:P,prevMargin:k,prevChildren:_})}if(!qw(_,b.prevChildren)){var K,te,W,fe,be=ci(_,Uu),ne=be&&(K=(te=be.props)===null||te===void 0?void 0:te.startIndex)!==null&&K!==void 0?K:T,ce=be&&(W=(fe=be.props)===null||fe===void 0?void 0:fe.endIndex)!==null&&W!==void 0?W:A,we=ne!==T||ce!==A,et=!pt(y),jt=et&&!we?b.updateId:b.updateId+1;return Q(Q({updateId:jt},p(Q(Q({props:v},b),{},{updateId:jt,dataStartIndex:ne,dataEndIndex:ce}),b)),{},{prevChildren:_,dataStartIndex:ne,dataEndIndex:ce})}return null}),Je(m,"renderActiveDot",function(v,b,w){var y;return x.isValidElement(v)?y=x.cloneElement(v,b):st(v)?y=v(b):y=O.createElement(ox,b),O.createElement(Bt,{className:"recharts-active-dot",key:w},y)});var g=x.forwardRef(function(b,w){return O.createElement(m,Yl({},b,{ref:w}))});return g.displayName=m.displayName,g},zwe=iE({chartName:"LineChart",GraphicalChild:bp,axisComponents:[{axisType:"xAxis",AxisComp:Lc},{axisType:"yAxis",AxisComp:Bc}],formatAxisMap:z4}),FT=iE({chartName:"BarChart",GraphicalChild:To,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Lc},{axisType:"yAxis",AxisComp:Bc}],formatAxisMap:z4}),Uwe=iE({chartName:"PieChart",GraphicalChild:Bs,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:dx},{axisType:"radiusAxis",AxisComp:lx}],formatAxisMap:jfe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Wi(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Oo(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Hwe(e,t){const n=Wi(e);return isNaN(t)?Oo(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const j3=6048e5,Vwe=864e5;let Gwe={};function bx(){return Gwe}function Ff(e,t){var c,l,u,d;const n=bx(),r=(t==null?void 0:t.weekStartsOn)??((l=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Wi(e),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function zv(e){return Ff(e,{weekStartsOn:1})}function S3(e){const t=Wi(e),n=t.getFullYear(),r=Oo(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=zv(r),a=Oo(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const s=zv(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function Uv(e){const t=Wi(e);return t.setHours(0,0,0,0),t}function zT(e){const t=Wi(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Wwe(e,t){const n=Uv(e),r=Uv(t),i=+n-zT(n),a=+r-zT(r);return Math.round((i-a)/Vwe)}function qwe(e){const t=S3(e),n=Oo(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),zv(n)}function Kwe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ywe(e){if(!Kwe(e)&&typeof e!="number")return!1;const t=Wi(e);return!isNaN(Number(t))}function Xwe(e){const t=Wi(e),n=Oo(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Zwe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Jwe=(e,t,n)=>{let r;const i=Zwe[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function V0(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Qwe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},e_e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},t_e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},n_e={date:V0({formats:Qwe,defaultWidth:"full"}),time:V0({formats:e_e,defaultWidth:"full"}),dateTime:V0({formats:t_e,defaultWidth:"full"})},r_e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},i_e=(e,t,n,r)=>r_e[e];function oh(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,c=n!=null&&n.width?String(n.width):s;i=e.formattingValues[c]||e.formattingValues[s]}else{const s=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[c]||e.values[s]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const a_e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},s_e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},o_e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},c_e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},l_e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},u_e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},d_e=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},h_e={ordinalNumber:d_e,era:oh({values:a_e,defaultWidth:"wide"}),quarter:oh({values:s_e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:oh({values:o_e,defaultWidth:"wide"}),day:oh({values:c_e,defaultWidth:"wide"}),dayPeriod:oh({values:l_e,defaultWidth:"wide",formattingValues:u_e,defaultFormattingWidth:"wide"})};function ch(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const s=a[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?p_e(c,h=>h.test(s)):f_e(c,h=>h.test(s));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(s.length);return{value:u,rest:d}}}function f_e(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function p_e(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function m_e(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],a=t.match(e.parsePattern);if(!a)return null;let s=e.valueCallback?e.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const c=t.slice(i.length);return{value:s,rest:c}}}const g_e=/^(\d+)(th|st|nd|rd)?/i,v_e=/\d+/i,y_e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},x_e={any:[/^b/i,/^(a|c)/i]},b_e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},w_e={any:[/1/i,/2/i,/3/i,/4/i]},__e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},j_e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},S_e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},E_e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},N_e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},P_e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},k_e={ordinalNumber:m_e({matchPattern:g_e,parsePattern:v_e,valueCallback:e=>parseInt(e,10)}),era:ch({matchPatterns:y_e,defaultMatchWidth:"wide",parsePatterns:x_e,defaultParseWidth:"any"}),quarter:ch({matchPatterns:b_e,defaultMatchWidth:"wide",parsePatterns:w_e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ch({matchPatterns:__e,defaultMatchWidth:"wide",parsePatterns:j_e,defaultParseWidth:"any"}),day:ch({matchPatterns:S_e,defaultMatchWidth:"wide",parsePatterns:E_e,defaultParseWidth:"any"}),dayPeriod:ch({matchPatterns:N_e,defaultMatchWidth:"any",parsePatterns:P_e,defaultParseWidth:"any"})},C_e={code:"en-US",formatDistance:Jwe,formatLong:n_e,formatRelative:i_e,localize:h_e,match:k_e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function A_e(e){const t=Wi(e);return Wwe(t,Xwe(t))+1}function T_e(e){const t=Wi(e),n=+zv(t)-+qwe(t);return Math.round(n/j3)+1}function E3(e,t){var d,h,f,p;const n=Wi(e),r=n.getFullYear(),i=bx(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,s=Oo(e,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const c=Ff(s,t),l=Oo(e,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=Ff(l,t);return n.getTime()>=c.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function O_e(e,t){var c,l,u,d;const n=bx(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=E3(e,t),a=Oo(e,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Ff(a,t)}function R_e(e,t){const n=Wi(e),r=+Ff(n,t)-+O_e(n,t);return Math.round(r/j3)+1}function Kt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ro={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Kt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Kt(n+1,2)},d(e,t){return Kt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Kt(e.getHours()%12||12,t.length)},H(e,t){return Kt(e.getHours(),t.length)},m(e,t){return Kt(e.getMinutes(),t.length)},s(e,t){return Kt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Kt(i,t.length)}},Ol={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},UT={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ro.y(e,t)},Y:function(e,t,n,r){const i=E3(e,r),a=i>0?i:1-i;if(t==="YY"){const s=a%100;return Kt(s,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Kt(a,t.length)},R:function(e,t){const n=S3(e);return Kt(n,t.length)},u:function(e,t){const n=e.getFullYear();return Kt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Kt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Kt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ro.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Kt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=R_e(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Kt(i,t.length)},I:function(e,t,n){const r=T_e(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Kt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ro.d(e,t)},D:function(e,t,n){const r=A_e(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Kt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Kt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Kt(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Kt(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Ol.noon:r===0?i=Ol.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Ol.evening:r>=12?i=Ol.afternoon:r>=4?i=Ol.morning:i=Ol.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ro.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ro.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Kt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Kt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ro.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ro.s(e,t)},S:function(e,t){return ro.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return VT(r);case"XXXX":case"XX":return pc(r);case"XXXXX":case"XXX":default:return pc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return VT(r);case"xxxx":case"xx":return pc(r);case"xxxxx":case"xxx":default:return pc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+HT(r,":");case"OOOO":default:return"GMT"+pc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+HT(r,":");case"zzzz":default:return"GMT"+pc(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Kt(r,t.length)},T:function(e,t,n){const r=e.getTime();return Kt(r,t.length)}};function HT(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+t+Kt(a,2)}function VT(e,t){return e%60===0?(e>0?"-":"+")+Kt(Math.abs(e)/60,2):pc(e,t)}function pc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Kt(Math.trunc(r/60),2),a=Kt(r%60,2);return n+i+t+a}const GT=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},N3=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},$_e=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return GT(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",GT(r,t)).replace("{{time}}",N3(i,t))},I_e={p:N3,P:$_e},M_e=/^D+$/,D_e=/^Y+$/,L_e=["D","DD","YY","YYYY"];function B_e(e){return M_e.test(e)}function F_e(e){return D_e.test(e)}function z_e(e,t,n){const r=U_e(e,t,n);if(console.warn(r),L_e.includes(e))throw new RangeError(r)}function U_e(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const H_e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,V_e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,G_e=/^'([^]*?)'?$/,W_e=/''/g,q_e=/[a-zA-Z]/;function WT(e,t,n){var d,h,f,p;const r=bx(),i=r.locale??C_e,a=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,c=Wi(e);if(!Ywe(c))throw new RangeError("Invalid time value");let l=t.match(V_e).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=I_e[g];return v(m,i.formatLong)}return m}).join("").match(H_e).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:K_e(m)};if(UT[g])return{isToken:!0,value:m};if(g.match(q_e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(c,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(F_e(g)||B_e(g))&&z_e(g,t,String(e));const v=UT[g[0]];return v(c,g,i.localize,u)}).join("")}function K_e(e){const t=e.match(G_e);return t?t[1].replace(W_e,"'"):e}function Y_e(e,t){return Hwe(e,-t)}const qT=["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--accent))","hsl(var(--muted))"],X_e=()=>{const[e,t]=x.useState(!0),[n,r]=x.useState([]),[i,a]=x.useState({totalVisits:0,uniquePages:0,topCountry:"",topDevice:""});x.useEffect(()=>{s()},[]);const s=async()=>{try{const{data:f,error:p}=await oe.from("visitor_tracking").select("*").order("created_at",{ascending:!1}).limit(1e3);if(p)throw p;f&&(r(f),c(f))}catch(f){console.error("Error fetching analytics:",f)}finally{t(!1)}},c=f=>{const p=new Set(f.map(w=>w.page_path)).size,m={},g={};f.forEach(w=>{w.country&&(m[w.country]=(m[w.country]||0)+1),w.device_type&&(g[w.device_type]=(g[w.device_type]||0)+1)});const v=Object.keys(m).sort((w,y)=>m[y]-m[w])[0]||"N/A",b=Object.keys(g).sort((w,y)=>g[y]-g[w])[0]||"N/A";a({totalVisits:f.length,uniquePages:p,topCountry:v,topDevice:b})},l=()=>{const f=Array.from({length:7},(p,m)=>{const g=Uv(Y_e(new Date,6-m));return{date:WT(g,"MMM dd"),visits:0}});return n.forEach(p=>{const m=WT(Uv(new Date(p.created_at)),"MMM dd"),g=f.find(v=>v.date===m);g&&g.visits++}),f},u=()=>{const f={};return n.forEach(p=>{f[p.page_path]=(f[p.page_path]||0)+1}),Object.entries(f).sort((p,m)=>m[1]-p[1]).slice(0,5).map(([p,m])=>({page:p,count:m}))},d=()=>{const f={};return n.forEach(p=>{const m=p.device_type||"Unknown";f[m]=(f[m]||0)+1}),Object.entries(f).map(([p,m])=>({name:p,value:m}))},h=()=>{const f={};return n.forEach(p=>{const m=p.browser||"Unknown";f[m]=(f[m]||0)+1}),Object.entries(f).sort((p,m)=>m[1]-p[1]).slice(0,5).map(([p,m])=>({name:p,value:m}))};return e?o.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[o.jsx(Lr,{}),o.jsx(Mt,{className:"flex-1",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx(Lk,{className:"h-12 w-64"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((f,p)=>o.jsx(Lk,{className:"h-32"},p))})]})}),o.jsx(Og,{})]}):o.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[o.jsx(Lr,{}),o.jsx(Mt,{className:"flex-1 py-8",children:o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Analytics Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Visitor tracking and website statistics"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Pe,{className:"text-sm font-medium",children:"Total Visits"}),o.jsx(ya,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(Se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:i.totalVisits}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time visits"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Pe,{className:"text-sm font-medium",children:"Unique Pages"}),o.jsx(wW,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(Se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:i.uniquePages}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pages visited"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Pe,{className:"text-sm font-medium",children:"Top Country"}),o.jsx(yy,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(Se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:i.topCountry}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Most visitors"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Pe,{className:"text-sm font-medium",children:"Top Device"}),o.jsx(oW,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(Se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:i.topDevice}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Most used"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Visits Over Time"}),o.jsx($e,{children:"Last 7 days"})]}),o.jsx(Se,{children:o.jsx(km,{width:"100%",height:300,children:o.jsxs(zwe,{data:l(),children:[o.jsx(hg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),o.jsx(Lc,{dataKey:"date",stroke:"hsl(var(--muted-foreground))"}),o.jsx(Bc,{stroke:"hsl(var(--muted-foreground))"}),o.jsx(li,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),o.jsx(bp,{type:"monotone",dataKey:"visits",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Top Pages"}),o.jsx($e,{children:"Most visited pages"})]}),o.jsx(Se,{children:o.jsx(km,{width:"100%",height:300,children:o.jsxs(FT,{data:u(),children:[o.jsx(hg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),o.jsx(Lc,{dataKey:"page",stroke:"hsl(var(--muted-foreground))"}),o.jsx(Bc,{stroke:"hsl(var(--muted-foreground))"}),o.jsx(li,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),o.jsx(To,{dataKey:"count",fill:"hsl(var(--primary))"})]})})})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Device Distribution"}),o.jsx($e,{children:"Visitors by device type"})]}),o.jsx(Se,{children:o.jsx(km,{width:"100%",height:300,children:o.jsxs(Uwe,{children:[o.jsx(Bs,{data:d(),cx:"50%",cy:"50%",labelLine:!1,label:({name:f,percent:p})=>`${f} ${(p*100).toFixed(0)}%`,outerRadius:80,fill:"hsl(var(--primary))",dataKey:"value",children:d().map((f,p)=>o.jsx(Yy,{fill:qT[p%qT.length]},`cell-${p}`))}),o.jsx(li,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}})]})})})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Browser Distribution"}),o.jsx($e,{children:"Top 5 browsers"})]}),o.jsx(Se,{children:o.jsx(km,{width:"100%",height:300,children:o.jsxs(FT,{data:h(),layout:"vertical",children:[o.jsx(hg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),o.jsx(Lc,{type:"number",stroke:"hsl(var(--muted-foreground))"}),o.jsx(Bc,{dataKey:"name",type:"category",stroke:"hsl(var(--muted-foreground))"}),o.jsx(li,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),o.jsx(To,{dataKey:"value",fill:"hsl(var(--secondary))"})]})})})]})]})]})}),o.jsx(Og,{})]})},P3=()=>o.jsxs(o.Fragment,{children:[o.jsx(VV,{}),o.jsxs(cd,{children:[o.jsx(rt,{path:"/",element:o.jsx(ka,{children:o.jsx(M7,{})})}),o.jsx(rt,{path:"/features",element:o.jsx(ka,{children:o.jsx(L7,{})})}),o.jsx(rt,{path:"/vision-ai",element:o.jsx(ka,{children:o.jsx(xD,{})})}),o.jsx(rt,{path:"/pricing",element:o.jsx(ka,{children:o.jsx(rq,{})})}),o.jsx(rt,{path:"/contact",element:o.jsx(ka,{children:o.jsx(Eq,{})})}),o.jsx(rt,{path:"/auth",element:o.jsx(ka,{children:o.jsx(MD,{})})}),o.jsx(rt,{path:"/admin",element:o.jsx(ka,{children:o.jsx(oK,{})})}),o.jsx(rt,{path:"/analytics",element:o.jsx(ka,{children:o.jsx(X_e,{})})}),o.jsx(rt,{path:"/load-diagram",element:o.jsx(ka,{children:o.jsx(cK,{})})}),o.jsx(rt,{path:"*",element:o.jsx(ka,{children:o.jsx(lK,{})})})]})]}),Z_e=()=>o.jsxs("div",{children:[o.jsx("h1",{children:"BPMN Subdomain"}),o.jsx("p",{children:"This is the BPMN subdomain."})]}),G0="prossmind_free_prompts",lh=5,wx=e=>{const[t,n]=x.useState(lh),[r,i]=x.useState(!1);return x.useEffect(()=>{if(e)n(1/0),i(!1);else{const s=localStorage.getItem(G0),c=s?parseInt(s,10):0,l=Math.max(0,lh-c);n(l),i(l===0)}},[e]),{remainingPrompts:t,hasUsedAllPrompts:r,usePrompt:()=>{if(e)return!0;if(r)return!1;const s=localStorage.getItem(G0),c=s?parseInt(s,10):0;if(c>=lh)return i(!0),n(0),!1;const l=c+1;return localStorage.setItem(G0,l.toString()),n(lh-l),l>=lh&&i(!0),!0},isUnlimited:e}};function wp(e){uj.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}Ie(wp,uj);wp.prototype._createModdle=function(e){var t=uj.prototype._createModdle.call(this,e);return t.ids=new QU([32,36,1]),t};wp.prototype._collectIds=function(e,t){var n=e.$model,r=n.ids,i;r.clear();for(i in t)r.claim(i,t[i])};var J_e=["c","C"],Q_e=["v","V"],e1e=["y","Y"],k3=["z","Z"];function t1e(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Li(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function nr(e,t){return e=_t(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function aE(e){return e.shiftKey}function n1e(e){return Li(e)&&nr(J_e,e)}function r1e(e){return Li(e)&&nr(Q_e,e)}function i1e(e){return Li(e)&&!aE(e)&&nr(k3,e)}function a1e(e){return Li(e)&&(nr(e1e,e)||nr(k3,e)&&aE(e))}var _x="keyboard.keydown",s1e="keyboard.keyup",o1e=1e3,C3="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function Nr(e,t){var n=this;this._config=e=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),e.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(C3));var r=e&&e.bind!==!1;t.on("canvas.init",function(i){n._target=i.svg,r&&n.bind(),n._fire("init")})}Nr.$inject=["config.keyboard","eventBus"];Nr.prototype._keydownHandler=function(e){this._keyHandler(e,_x)};Nr.prototype._keyupHandler=function(e){this._keyHandler(e,s1e)};Nr.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var r={keyEvent:e};n=this._eventBus.fire(t||_x,r),n&&e.preventDefault()}};Nr.prototype._isEventIgnored=function(e){return!1};Nr.prototype.bind=function(e){e&&console.error("unsupported argument <node>",new Error(C3)),this.unbind(),e=this._node=this._target,at.bind(e,"keydown",this._keydownHandler),at.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Nr.prototype.getBinding=function(){return this._node};Nr.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),at.unbind(e,"keydown",this._keydownHandler),at.unbind(e,"keyup",this._keyupHandler)),this._node=null};Nr.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Nr.prototype.addListener=function(e,t,n){Fi(e)&&(n=t,t=e,e=o1e),this._eventBus.on(n||_x,e,t)};Nr.prototype.removeListener=function(e,t){this._eventBus.off(t||_x,e)};Nr.prototype.hasModifier=t1e;Nr.prototype.isCmd=Li;Nr.prototype.isShift=aE;Nr.prototype.isKey=nr;var c1e=500;function Nd(e,t){var n=this;e.on("editorActions.init",c1e,function(r){var i=r.editorActions;n.registerBindings(t,i)})}Nd.$inject=["eventBus","keyboard"];Nd.prototype.registerBindings=function(e,t){function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("undo",function(r){var i=r.keyEvent;if(i1e(i))return t.trigger("undo"),!0}),n("redo",function(r){var i=r.keyEvent;if(a1e(i))return t.trigger("redo"),!0}),n("copy",function(r){var i=r.keyEvent;if(n1e(i))return t.trigger("copy"),!0}),n("paste",function(r){var i=r.keyEvent;if(r1e(i))return t.trigger("paste"),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(nr(["+","Add","="],i)&&Li(i))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(nr(["-","Subtract"],i)&&Li(i))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(r){var i=r.keyEvent;if(nr("0",i)&&Li(i))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(r){var i=r.keyEvent;if(nr(["Backspace","Delete","Del"],i))return t.trigger("removeSelection"),!0})};const sE={__init__:["keyboard","keyboardBindings"],keyboard:["type",Nr],keyboardBindings:["type",Nd]};var l1e={moveSpeed:50,moveSpeedAccelerated:200};function A3(e,t,n){var r=this;this._config=J({},l1e,e||{}),t.addListener(i);function i(a){var s=a.keyEvent,c=r._config;if(t.isCmd(s)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],s)){var l=t.isShift(s)?c.moveSpeedAccelerated:c.moveSpeed,u;switch(s.key){case"ArrowLeft":case"Left":u="left";break;case"ArrowUp":case"Up":u="up";break;case"ArrowRight":case"Right":u="right";break;case"ArrowDown":case"Down":u="down";break}return r.moveCanvas({speed:l,direction:u}),!0}}this.moveCanvas=function(a){var s=0,c=0,l=a.speed,u=l/Math.min(Math.sqrt(n.viewbox().scale),1);switch(a.direction){case"left":s=u;break;case"up":c=u;break;case"right":s=-u;break;case"down":c=-u;break}n.scroll({dx:s,dy:c})}}A3.$inject=["config.keyboardMove","keyboard","canvas"];const T3={__depends__:[sE],__init__:["keyboardMove"],keyboardMove:["type",A3]};var u1e=/^djs-cursor-.*$/;function jx(e){var t=Wn(document.body);t.removeMatching(u1e),e&&t.add("djs-cursor-"+e)}function O3(){jx(null)}var d1e=5e3;function R3(e,t){t=t||"element.click";function n(){return!1}return e.once(t,d1e,n),function(){e.off(t,n)}}function Fh(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function va(e,t){return{x:e.x-t.x,y:e.y-t.y}}var h1e=15;function $3(e,t){var n;function r(c){return s(c.originalEvent)}e.on("canvas.focus.changed",function(c){c.focused?e.on("element.mousedown",500,r):e.off("element.mousedown",r)});function i(c){var l=n.start,u=n.button,d=Uc(c),h=va(d,l);if(!n.dragging&&f1e(h)>h1e&&(n.dragging=!0,u===0&&R3(e),jx("grab")),n.dragging){var f=n.last||n.start;h=va(d,f),t.scroll({dx:h.x,dy:h.y}),n.last=d}c.preventDefault()}function a(c){at.unbind(document,"mousemove",i),at.unbind(document,"mouseup",a),n=null,O3()}function s(c){if(!tp(c.target,".djs-draggable")){var l=c.button;if(!(l>=2||c.ctrlKey||c.shiftKey||c.altKey))return n={button:l,start:Uc(c)},at.bind(document,"mousemove",i),at.bind(document,"mouseup",a),!0}}this.isActive=function(){return!!n}}$3.$inject=["eventBus","canvas"];function f1e(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const I3={__init__:["moveCanvas"],moveCanvas:["type",$3]};function x1(e){return Math.log(e)/Math.log(10)}function M3(e,t){var n=x1(e.min),r=x1(e.max),i=Math.abs(n)+Math.abs(r);return i/t}function p1e(e,t){return Math.max(e.min,Math.min(e.max,t))}var m1e=Math.sign||function(e){return e>=0?1:-1},oE={min:.2,max:4},D3=10,g1e=.1,v1e=.75;function Ka(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=Hc(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||v1e;var r=this;t.on("canvas.focus.changed",function(i){r._init(i.focused&&e.enabled!==!1)})}Ka.$inject=["config.zoomScroll","eventBus","canvas"];Ka.prototype.scroll=function(t){this._canvas.scroll(t)};Ka.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Ka.prototype.zoom=function(t,n){var r=M3(oE,D3*2);this._totalDelta+=t,Math.abs(this._totalDelta)>g1e&&(this._zoom(t,n,r),this._totalDelta=0)};Ka.prototype._handleWheel=function(t){if(this._canvas.isFocused()){var n=this._container;t.preventDefault();var r=t.ctrlKey||eH()&&t.metaKey,i=t.shiftKey,a=-1*this._scale,s;if(r?a*=t.deltaMode===0?.02:.32:a*=t.deltaMode===0?1:16,r){var c=n.getBoundingClientRect(),l={x:t.clientX-c.left,y:t.clientY-c.top};s=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*m1e(t.deltaY)*a,this.zoom(s,l)}else i?s={dx:a*t.deltaY,dy:0}:s={dx:a*t.deltaX,dy:a*t.deltaY},this.scroll(s)}};Ka.prototype.stepZoom=function(t,n){var r=M3(oE,D3);this._zoom(t,n,r)};Ka.prototype._zoom=function(e,t,n){var r=this._canvas,i=e>0?1:-1,a=x1(r.zoom()),s=Math.round(a/n)*n;s+=n*i;var c=Math.pow(10,s);r.zoom(p1e(oE,c),t)};Ka.prototype.toggle=function(t){var n=this._container,r=this._handleWheel,i=this._enabled;return typeof t>"u"&&(t=!i),i!==t&&at[t?"bind":"unbind"](n,"wheel",r,!1),this._enabled=t,t};Ka.prototype._init=function(e){this.toggle(e)};const L3={__init__:["zoomScroll"],zoomScroll:["type",Ka]};function zf(e){np.call(this,e)}Ie(zf,np);zf.prototype._navigationModules=[T3,I3,L3];zf.prototype._modules=[].concat(np.prototype._modules,zf.prototype._navigationModules);function W0(e){return e&&e[e.length-1]}function KT(e){return e.y}function YT(e){return e.x}var y1e={left:YT,center:YT,right:function(e){return e.x+e.width},top:KT,middle:KT,bottom:function(e){return e.y+e.height}};function Pd(e,t){this._modeling=e,this._rules=t}Pd.$inject=["modeling","rules"];Pd.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",r="width";return t.indexOf(e)!==-1&&(n="y",r="height"),{axis:n,dimension:r}};Pd.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Pd.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),r=n.axis,i=n.dimension,a={},s={},c=!1,l,u,d;function h(f,p){return Math.round((f[r]+p[r]+p[i])/2)}if(this._isType(e,["left","top"]))a[e]=t[0][r];else if(this._isType(e,["right","bottom"]))d=W0(t),a[e]=d[r]+d[i];else if(this._isType(e,["center","middle"])){if(q(t,function(f){var p=f[r]+Math.round(f[i]/2);s[p]?s[p].elements.push(f):s[p]={elements:[f],center:p}}),l=Ps(s,function(f){return f.elements.length>1&&(c=!0),f.elements.length}),c)return a[e]=W0(l).center,a;u=t[0],t=Ps(t,function(f){return f[r]+f[i]}),d=W0(t),a[e]=h(u,d)}return a};Pd.prototype.trigger=function(e,t){var n=this._modeling,r,i=St(e,function(l){return!(l.waypoints||l.host||l.labelTarget)});if(r=this._rules.allowed("elements.align",{elements:i}),_t(r)&&(i=r),!(i.length<2||!r)){var a=y1e[t],s=Ps(i,a),c=this._alignmentPosition(t,s);n.alignElements(s,c)}};const x1e={__init__:["alignElements"],alignElements:["type",Pd]},b1e=new dj;function kd(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}kd.$inject=["eventBus"];kd.prototype.schedule=function(e,t=b1e.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};kd.prototype._schedule=function(e,t){const n=w1e();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{n.resolve(e())}catch(i){n.reject(i)}}catch(i){console.error("Scheduler#_schedule execution failed",i)}}),promise:n.promise}};kd.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};kd.prototype._cancel=function(e){clearTimeout(e.executionId)};function w1e(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}const _1e={scheduler:["type",kd]};var j1e="djs-element-hidden",Bm=".entry",S1e=1e3,XT=8,E1e=300;function On(e,t,n,r){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=r,this._current=null,this._init()}On.$inject=["canvas","elementRegistry","eventBus","scheduler"];On.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,r=n.length?n.length===1?n[0]:n:null;r?e.open(r,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,r=e._current;if(r){var i=r.target,a=_t(i)?i:[i],s=a.filter(function(l){return n.includes(l)});if(s.length){e.close();var c=a.filter(function(l){return e._elementRegistry.get(l.id)});c.length&&e._updateAndOpen(c.length>1?c:c[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,r=e._current,i=_t(r.target)?r.target:[r.target];i.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};On.prototype._createContainer=function(){var e=ur('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};On.prototype.registerProvider=function(e,t){t||(t=e,e=S1e),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};On.prototype.getEntries=function(e){var t=this._getProviders(),n=_t(e)?"getMultiElementContextPadEntries":"getContextPadEntries",r={};return q(t,function(i){if(Fi(i[n])){var a=i[n](e);Fi(a)?r=a(r):q(a,function(s,c){r[c]=s})}}),r};On.prototype.trigger=function(e,t,n){var r=this,i,a,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();if(i=Rr(s,"data-action"),a=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){r._mouseout=r.triggerEntry(i,"hover",a,n)},E1e);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(i,e,a,n)};On.prototype.triggerEntry=function(e,t,n,r){if(this.isShown()){var i=this._current.target,a=this._current.entries,s=a[e];if(s){var c=s.action;if(this._eventBus.fire("contextPad.trigger",{entry:s,event:n})!==!1){if(Fi(c)){if(t==="click")return c(n,i,r)}else if(c[t])return c[t](n,i,r);n.preventDefault()}}}};On.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};On.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};On.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),r;q(t,function(i,a){var s=i.group||"default",c=ur(i.html||'<div class="entry" draggable="true"></div>'),l;Rr(c,"data-action",a),l=An("[data-group="+Hh(s)+"]",n),l||(l=ur('<div class="group"></div>'),Rr(l,"data-group",s),n.appendChild(l)),l.appendChild(c),i.className&&N1e(c,i.className),i.title&&Rr(c,"title",i.title),i.imageUrl&&(r=ur("<img>"),Rr(r,"src",i.imageUrl),r.style.width="100%",r.style.height="100%",c.appendChild(r))}),Wn(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};On.prototype._createHtml=function(e){var t=this,n=ur('<div class="djs-context-pad"></div>');return ma.bind(n,Bm,"click",function(r){t.trigger("click",r)}),ma.bind(n,Bm,"dragstart",function(r){t.trigger("dragstart",r)}),ma.bind(n,Bm,"mouseover",function(r){t.trigger("mouseover",r)}),ma.bind(n,Bm,"mouseout",function(r){t.trigger("mouseout",r)}),at.bind(n,"mousedown",function(r){r.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};On.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&k1e(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};On.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};On.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return _t(e)!==_t(n)?!1:_t(e)?e.length===n.length&&cy(e,function(r){return n.includes(r)}):n===e};On.prototype.isShown=function(){return this.isOpen()&&Wn(this._current.html).has("open")};On.prototype.show=function(){this.isOpen()&&(Wn(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};On.prototype.hide=function(){this.isOpen()&&(Wn(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};On.prototype._getPosition=function(e){if(!_t(e)&&qt(e)){var t=this._canvas.viewbox(),n=P1e(e),r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale;return{left:r+XT*this._canvas.zoom(),top:i}}var a=this._canvas.getContainer(),s=a.getBoundingClientRect(),c=this._getTargetBounds(e);return{left:c.right-s.left+XT*this._canvas.zoom(),top:c.top-s.top}};On.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(r){r in n&&(t.style[r]=n[r]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};On.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,r=_t(n)?n:[n],i=r.some(function(a){return t._canvas.hasMarker(a,j1e)});i?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};On.prototype._getTargetBounds=function(e){var t=this,n=_t(e)?e:[e],r=n.map(function(i){return t._canvas.getGraphics(i)});return r.reduce(function(i,a){const s=a.getBoundingClientRect();return i.top=Math.min(i.top,s.top),i.right=Math.max(i.right,s.right),i.bottom=Math.max(i.bottom,s.bottom),i.left=Math.min(i.left,s.left),i.x=i.left,i.y=i.top,i.width=i.right-i.left,i.height=i.bottom-i.top,i},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function N1e(e,t){var n=Wn(e);t=_t(t)?t:t.split(/\s+/g),t.forEach(function(r){n.add(r)})}function P1e(e){return e.waypoints[e.waypoints.length-1]}function k1e(e,t){return e=_t(e)?e:[e],t=_t(t)?t:[t],e.length===t.length&&cy(e,function(n){return t.includes(n)})}const B3={__depends__:[hj,_1e,fI],contextPad:["type",On]};var Sx,yn,F3,wc,ZT,z3,U3,H3,cE,b1,w1,Uf={},V3=[],C1e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ex=Array.isArray;function ys(e,t){for(var n in t)e[n]=t[n];return e}function lE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function G3(e,t,n){var r,i,a,s={};for(a in t)a=="key"?r=t[a]:a=="ref"?i=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?Sx.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return fg(e,s,r,i,null)}function fg(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++F3,__i:-1,__u:0};return i==null&&yn.vnode!=null&&yn.vnode(a),a}function Nx(e){return e.children}function pg(e,t){this.props=e,this.context=t}function Qu(e,t){if(t==null)return e.__?Qu(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Qu(e):null}function W3(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return W3(e)}}function JT(e){(!e.__d&&(e.__d=!0)&&wc.push(e)&&!Hv.__r++||ZT!=yn.debounceRendering)&&((ZT=yn.debounceRendering)||z3)(Hv)}function Hv(){for(var e,t,n,r,i,a,s,c=1;wc.length;)wc.length>c&&wc.sort(U3),e=wc.shift(),c=wc.length,e.__d&&(n=void 0,r=void 0,i=(r=(t=e).__v).__e,a=[],s=[],t.__P&&((n=ys({},r)).__v=r.__v+1,yn.vnode&&yn.vnode(n),uE(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,a,i??Qu(r),!!(32&r.__u),s),n.__v=r.__v,n.__.__k[n.__i]=n,Y3(a,n,s),r.__e=r.__=null,n.__e!=i&&W3(n)));Hv.__r=0}function q3(e,t,n,r,i,a,s,c,l,u,d){var h,f,p,m,g,v,b,w=r&&r.__k||V3,y=t.length;for(l=A1e(n,t,w,l,y),h=0;h<y;h++)(p=n.__k[h])!=null&&(f=p.__i==-1?Uf:w[p.__i]||Uf,p.__i=h,v=uE(e,p,f,i,a,s,c,l,u,d),m=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&dE(f.ref,null,p),d.push(p.ref,p.__c||m,p)),g==null&&m!=null&&(g=m),(b=!!(4&p.__u))||f.__k===p.__k?l=K3(p,l,e,b):typeof p.type=="function"&&v!==void 0?l=v:m&&(l=m.nextSibling),p.__u&=-7);return n.__e=g,l}function A1e(e,t,n,r,i){var a,s,c,l,u,d=n.length,h=d,f=0;for(e.__k=new Array(i),a=0;a<i;a++)(s=t[a])!=null&&typeof s!="boolean"&&typeof s!="function"?(l=a+f,(s=e.__k[a]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?fg(null,s,null,null,null):Ex(s)?fg(Nx,{children:s},null,null,null):s.constructor==null&&s.__b>0?fg(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,c=null,(u=s.__i=T1e(s,n,l,h))!=-1&&(h--,(c=n[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(i>d?f--:i<d&&f++),typeof s.type!="function"&&(s.__u|=4)):u!=l&&(u==l-1?f--:u==l+1?f++:(u>l?f--:f++,s.__u|=4))):e.__k[a]=null;if(h)for(a=0;a<d;a++)(c=n[a])!=null&&!(2&c.__u)&&(c.__e==r&&(r=Qu(c)),Z3(c,c));return r}function K3(e,t,n,r){var i,a;if(typeof e.type=="function"){for(i=e.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=e,t=K3(i[a],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=Qu(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function T1e(e,t,n,r){var i,a,s,c=e.key,l=e.type,u=t[n],d=u!=null&&(2&u.__u)==0;if(u===null&&e.key==null||d&&c==u.key&&l==u.type)return n;if(r>(d?1:0)){for(i=n-1,a=n+1;i>=0||a<t.length;)if((u=t[s=i>=0?i--:a++])!=null&&!(2&u.__u)&&c==u.key&&l==u.type)return s}return-1}function QT(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||C1e.test(t)?n:n+"px"}function Fm(e,t,n,r,i){var a,s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||QT(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||QT(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(H3,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=cE,e.addEventListener(t,a?w1:b1,a)):e.removeEventListener(t,a?w1:b1,a);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function eO(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=cE++;else if(t.t<n.u)return;return n(yn.event?yn.event(t):t)}}}function uE(e,t,n,r,i,a,s,c,l,u){var d,h,f,p,m,g,v,b,w,y,_,j,S,E,P,k,T,A=t.type;if(t.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),a=[c=t.__e=n.__e]),(d=yn.__b)&&d(t);e:if(typeof A=="function")try{if(b=t.props,w="prototype"in A&&A.prototype.render,y=(d=A.contextType)&&r[d.__c],_=d?y?y.props.value:d.__:r,n.__c?v=(h=t.__c=n.__c).__=h.__E:(w?t.__c=h=new A(b,_):(t.__c=h=new pg(b,_),h.constructor=A,h.render=R1e),y&&y.sub(h),h.props=b,h.state||(h.state={}),h.context=_,h.__n=r,f=h.__d=!0,h.__h=[],h._sb=[]),w&&h.__s==null&&(h.__s=h.state),w&&A.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=ys({},h.__s)),ys(h.__s,A.getDerivedStateFromProps(b,h.__s))),p=h.props,m=h.state,h.__v=t,f)w&&A.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),w&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(w&&A.getDerivedStateFromProps==null&&b!==p&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(b,_),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(b,h.__s,_)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(h.props=b,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(R){R&&(R.__=t)}),j=0;j<h._sb.length;j++)h.__h.push(h._sb[j]);h._sb=[],h.__h.length&&s.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(b,h.__s,_),w&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(p,m,g)})}if(h.context=_,h.props=b,h.__P=e,h.__e=!1,S=yn.__r,E=0,w){for(h.state=h.__s,h.__d=!1,S&&S(t),d=h.render(h.props,h.state,h.context),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[]}else do h.__d=!1,S&&S(t),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++E<25);h.state=h.__s,h.getChildContext!=null&&(r=ys(ys({},r),h.getChildContext())),w&&!f&&h.getSnapshotBeforeUpdate!=null&&(g=h.getSnapshotBeforeUpdate(p,m)),k=d,d!=null&&d.type===Nx&&d.key==null&&(k=X3(d.props.children)),c=q3(e,Ex(k)?k:[k],t,n,r,i,a,s,c,l,u),h.base=t.__e,t.__u&=-161,h.__h.length&&s.push(h),v&&(h.__E=h.__=null)}catch(R){if(t.__v=null,l||a!=null)if(R.then){for(t.__u|=l?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else{for(T=a.length;T--;)lE(a[T]);_1(t)}else t.__e=n.__e,t.__k=n.__k,R.then||_1(t);yn.__e(R,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=O1e(n.__e,t,n,r,i,a,s,l,u);return(d=yn.diffed)&&d(t),128&t.__u?void 0:c}function _1(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(_1)}function Y3(e,t,n){for(var r=0;r<n.length;r++)dE(n[r],n[++r],n[++r]);yn.__c&&yn.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(a){a.call(i)})}catch(a){yn.__e(a,i.__v)}})}function X3(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Ex(e)?e.map(X3):ys({},e)}function O1e(e,t,n,r,i,a,s,c,l){var u,d,h,f,p,m,g,v=n.props,b=t.props,w=t.type;if(w=="svg"?i="http://www.w3.org/2000/svg":w=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(u=0;u<a.length;u++)if((p=a[u])&&"setAttribute"in p==!!w&&(w?p.localName==w:p.nodeType==3)){e=p,a[u]=null;break}}if(e==null){if(w==null)return document.createTextNode(b);e=document.createElementNS(i,w,b.is&&b),c&&(yn.__m&&yn.__m(t,a),c=!1),a=null}if(w==null)v===b||c&&e.data==b||(e.data=b);else{if(a=a&&Sx.call(e.childNodes),v=n.props||Uf,!c&&a!=null)for(v={},u=0;u<e.attributes.length;u++)v[(p=e.attributes[u]).name]=p.value;for(u in v)if(p=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")h=p;else if(!(u in b)){if(u=="value"&&"defaultValue"in b||u=="checked"&&"defaultChecked"in b)continue;Fm(e,u,null,p,i)}}for(u in b)p=b[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?m=p:u=="checked"?g=p:c&&typeof p!="function"||v[u]===p||Fm(e,u,p,v[u],i);if(d)c||h&&(d.__html==h.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(h&&(e.innerHTML=""),q3(t.type=="template"?e.content:e,Ex(f)?f:[f],t,n,r,w=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,s,a?a[0]:n.__k&&Qu(n,0),c,l),a!=null)for(u=a.length;u--;)lE(a[u]);c||(u="value",w=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[u]||w=="progress"&&!m||w=="option"&&m!=v[u])&&Fm(e,u,m,v[u],i),u="checked",g!=null&&g!=e[u]&&Fm(e,u,g,v[u],i))}return e}function dE(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){yn.__e(i,n)}}function Z3(e,t,n){var r,i;if(yn.unmount&&yn.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||dE(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){yn.__e(a,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&Z3(r[i],t,n||typeof e.type!="function");n||lE(e.__e),e.__c=e.__=e.__e=void 0}function R1e(e,t,n){return this.constructor(e,n)}function J3(e,t,n){var r,i,a,s;t==document&&(t=document.documentElement),yn.__&&yn.__(e,t),i=(r=!1)?null:t.__k,a=[],s=[],uE(t,e=t.__k=G3(Nx,null,[e]),i||Uf,Uf,t.namespaceURI,i?null:t.firstChild?Sx.call(t.childNodes):null,a,i?i.__e:t.firstChild,r,s),Y3(a,e,s)}Sx=V3.slice,yn={__e:function(e,t,n,r){for(var i,a,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(c){e=c}throw e}},F3=0,pg.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ys({},this.state),typeof e=="function"&&(e=e(ys({},n),this.props)),e&&ys(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),JT(this))},pg.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),JT(this))},pg.prototype.render=Nx,wc=[],z3=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U3=function(e,t){return e.__v.__b-t.__v.__b},Hv.__r=0,H3=/(PointerCapture)$|Capture$/i,cE=0,b1=eO(!1),w1=eO(!0);var Q3=function(e,t,n,r){var i;t[0]=0;for(var a=1;a<t.length;a++){var s=t[a++],c=t[a]?(t[0]|=s?1:2,n[t[a++]]):t[++a];s===3?r[0]=c:s===4?r[1]=Object.assign(r[1]||{},c):s===5?(r[1]=r[1]||{})[t[++a]]=c:s===6?r[1][t[++a]]+=c+"":s?(i=e.apply(c,Q3(e,c,n,["",null])),r.push(i),c[0]?t[0]|=2:(t[a-2]=0,t[a]=i)):r.push(c)}return r},tO=new Map;function $1e(e){var t=tO.get(this);return t||(t=new Map,tO.set(this,t)),(t=Q3(this,t.get(e)||(t.set(e,t=function(n){for(var r,i,a=1,s="",c="",l=[0],u=function(f){a===1&&(f||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,f,s):a===3&&(f||s)?(l.push(3,f,s),a=2):a===2&&s==="..."&&f?l.push(4,f,0):a===2&&s&&!f?l.push(5,0,!0,s):a>=5&&((s||!f&&a===5)&&(l.push(a,0,s,i),a=6),f&&(l.push(a,f,0,i),a=6)),s=""},d=0;d<n.length;d++){d&&(a===1&&u(),u(d));for(var h=0;h<n[d].length;h++)r=n[d][h],a===1?r==="<"?(u(),l=[l],a=3):s+=r:a===4?s==="--"&&r===">"?(a=1,s=""):s=r+s[0]:c?r===c?c="":s+=r:r==='"'||r==="'"?c=r:r===">"?(u(),a=1):a&&(r==="="?(a=5,i=s,s=""):r==="/"&&(a<5||n[d][h+1]===">")?(u(),a===3&&(l=l[0]),a=l,(l=l[0]).push(2,0,a),a=0):r===" "||r==="	"||r===`
`||r==="\r"?(u(),a=2):s+=r),a===3&&s==="!--"&&(a=4,l=l[0])}return u(),l}(e)),t),arguments,[])).length>1?t:t[0]}var En=$1e.bind(G3),ed,kn,q0,nO,Hf=0,eB=[],In=yn,rO=In.__b,iO=In.__r,aO=In.diffed,sO=In.__c,oO=In.unmount,cO=In.__;function Px(e,t){In.__h&&In.__h(kn,e,Hf||t),Hf=0;var n=kn.__H||(kn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function K0(e){return Hf=1,I1e(nB,e)}function I1e(e,t,n){var r=Px(ed++,2);if(r.t=e,!r.__c&&(r.__=[nB(void 0,t),function(c){var l=r.__N?r.__N[0]:r.__[0],u=r.t(l,c);l!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=kn,!kn.__f)){var i=function(c,l,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!a||a.call(this,c,l,u);var h=r.__c.props!==c;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(h=!0)}}),a&&a.call(this,c,l,u)||h};kn.__f=!0;var a=kn.shouldComponentUpdate,s=kn.componentWillUpdate;kn.componentWillUpdate=function(c,l,u){if(this.__e){var d=a;a=void 0,i(c,l,u),a=d}s&&s.call(this,c,l,u)},kn.shouldComponentUpdate=i}return r.__N||r.__}function j1(e,t){var n=Px(ed++,3);!In.__s&&hE(n.__H,t)&&(n.__=e,n.u=t,kn.__H.__h.push(n))}function S1(e,t){var n=Px(ed++,4);!In.__s&&hE(n.__H,t)&&(n.__=e,n.u=t,kn.__h.push(n))}function tB(e){return Hf=5,lu(function(){return{current:e}},[])}function lu(e,t){var n=Px(ed++,7);return hE(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function uh(e,t){return Hf=8,lu(function(){return e},t)}function M1e(){for(var e;e=eB.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(mg),e.__H.__h.forEach(E1),e.__H.__h=[]}catch(t){e.__H.__h=[],In.__e(t,e.__v)}}In.__b=function(e){kn=null,rO&&rO(e)},In.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),cO&&cO(e,t)},In.__r=function(e){iO&&iO(e),ed=0;var t=(kn=e.__c).__H;t&&(q0===kn?(t.__h=[],kn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(mg),t.__h.forEach(E1),t.__h=[],ed=0)),q0=kn},In.diffed=function(e){aO&&aO(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(eB.push(t)!==1&&nO===In.requestAnimationFrame||((nO=In.requestAnimationFrame)||D1e)(M1e)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),q0=kn=null},In.__c=function(e,t){t.some(function(n){try{n.__h.forEach(mg),n.__h=n.__h.filter(function(r){return!r.__||E1(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],In.__e(r,n.__v)}}),sO&&sO(e,t)},In.unmount=function(e){oO&&oO(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{mg(r)}catch(i){t=i}}),n.__H=void 0,t&&In.__e(t,n.__v))};var lO=typeof requestAnimationFrame=="function";function D1e(e){var t,n=function(){clearTimeout(r),lO&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);lO&&(t=requestAnimationFrame(n))}function mg(e){var t=kn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),kn=t}function E1(e){var t=kn;e.__c=e.__(),kn=t}function hE(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function nB(e,t){return typeof t=="function"?t(e):t}function L1e(e){const{headerEntries:t,onSelect:n,selectedEntry:r,setSelectedEntry:i,title:a}=e,s=lu(()=>B1e(t),[t]),c=u=>u.action&&!u.disabled,l=(u,d)=>{if(c(d))return n(u,d)};return En`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${a}>${a}</h3>
      ${s.map(u=>En`
        <ul key=${u.id} class="djs-popup-header-group" data-header-group=${u.id}>

          ${u.entries.map(d=>En`
            <li key=${d.id}>
              <${c(d)?"button":"span"}
                class=${F1e(d,d===r)}
                onClick=${h=>l(h,d)}
                title=${d.title||d.label}
                data-id=${d.id}
                aria-disabled=${d.disabled||void 0}
                onMouseEnter=${()=>c(d)&&i(d)}
                onMouseLeave=${()=>c(d)&&i(null)}
                onFocus=${()=>c(d)&&i(d)}
                onBlur=${()=>c(d)&&i(null)}
              >
                ${d.imageUrl&&En`<img class="djs-popup-entry-icon" src=${d.imageUrl} alt="" />`||d.imageHtml&&En`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:d.imageHtml}} />`}
                ${d.label?En`
                  <span class="djs-popup-label">${d.label}</span>
                `:null}
              </${d.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function B1e(e){return e.reduce((t,n)=>{const r=n.group||"default",i=t.find(a=>a.id===r);return i?i.entries.push(n):t.push({id:r,entries:[n]}),t},[])}function F1e(e,t){return ct("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function z1e(e){const{entry:t,selected:n,onMouseEnter:r,onMouseLeave:i,onAction:a}=e,s=(c,l)=>{if(!t.disabled)return a(c,t,l)};return En`
    <li
      class=${ct("entry",{selected:n,disabled:t.disabled})}
      data-id=${t.id}
      title=${t.title||t.label}
      aria-disabled=${t.disabled||void 0}
      tabIndex="0"
      onClick=${s}
      onFocus=${r}
      onBlur=${i}
      onMouseEnter=${r}
      onMouseLeave=${i}
      onDragStart=${c=>s(c,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${ct("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&En`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&En`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?En`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&En`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&En`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${c=>c.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function U1e(e){const{selectedEntry:t,setSelectedEntry:n,groupedEntries:r,...i}=e,a=tB();return S1(()=>{const s=a.current;if(!s)return;const c=s.querySelector(".selected");c&&H1e(c)},[t]),En`
    <div class="djs-popup-results" ref=${a}>
      ${r.map(s=>En`
        ${s.name&&En`
          <div key=${s.id} class="entry-header" title=${s.name}>
            ${s.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${s.id}>
          ${s.entries.map(c=>En`
            <${z1e}
              key=${c.id}
              entry=${c}
              selected=${c===t}
              onMouseEnter=${()=>n(c)}
              onMouseLeave=${()=>n(null)}
              ...${i}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function H1e(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function V1e(e){const{onClose:t,onSelect:n,className:r,headerEntries:i,position:a,title:s,width:c,scale:l,search:u,emptyPlaceholder:d,searchFn:h,entries:f,onOpened:p,onClosed:m}=e,g=lu(()=>ui(u)?f.length>5:!1,[u,f]),[v,b]=K0(""),w=uh((L,B)=>{if(!g)return L;if(!B.trim())return L.filter(({rank:U=0})=>U>=0);const G=L.filter(({searchable:U})=>U!==!1);return h(G,B,{keys:["label","search","description"]}).map(({item:U})=>U)},[g]),[y,_]=K0(w(f,v)),[j,S]=K0(y[0]),E=lu(()=>q1e(y),[y]),P=uh(L=>{S(L[0]),_(L)},[_,S]);j1(()=>{P(w(f,v))},[v,f]);const k=uh(L=>{const B=W1e(E);let U=B.indexOf(j)+L;U<0&&(U=B.length-1),U>=B.length&&(U=0),S(B[U])},[E,j,S]),T=uh(L=>{if(L.key==="Enter"&&j)return j.disabled?void 0:n(L,j);if(L.key==="ArrowUp")return k(-1),L.preventDefault();if(L.key==="ArrowDown")return k(1),L.preventDefault()},[n,j,k]),A=uh(L=>{pI(L.target,"input")&&b(()=>L.target.value)},[b]);j1(()=>(p(),()=>{m()}),[]);const R=lu(()=>s||i.length>0,[s,i]);return En`
    <${uO}
      onClose=${t}
      onKeyup=${A}
      onKeydown=${T}
      className=${r}
      position=${a}
      width=${c}
      scale=${l}
    >
      ${R&&En`
        <${L1e}
          headerEntries=${i}
          onSelect=${n}
          selectedEntry=${j}
          setSelectedEntry=${S}
          title=${s}
        />
      `}
      ${f.length>0&&En`
        <div class="djs-popup-body">

          ${g&&En`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${s}" />
          </div>
          `}

          <${U1e}
            groupedEntries=${E}
            selectedEntry=${j}
            setSelectedEntry=${S}
            onAction=${n}
          />
        </div>
      `}
    ${d&&y.length===0&&En`
      <div class="djs-popup-no-results">${Fi(d)?d(v):d}</div>
    `}
    </${uO}>
  `}function uO(e){const{onClose:t,onKeydown:n,onKeyup:r,className:i,children:a,position:s}=e,c=tB();return S1(()=>{if(typeof s!="function")return;const l=c.current,u=s(l);l.style.left=`${u.x}px`,l.style.top=`${u.y}px`},[c.current,s]),S1(()=>{const l=c.current;if(!l)return;(l.querySelector("input")||l).focus()},[]),j1(()=>{const l=d=>{if(d.key==="Escape")return d.preventDefault(),t()},u=d=>{if(!tp(d.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",l),document.body.addEventListener("click",u),()=>{document.documentElement.removeEventListener("keydown",l),document.body.removeEventListener("click",u)}},[]),En`
    <div
      class=${ct("djs-popup",i)}
      style=${G1e(e)}
      onKeydown=${n}
      onKeyup=${r}
      ref=${c}
      tabIndex="-1"
    >
      ${a}
    </div>
  `}function G1e(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}function W1e(e){const t=[];return e.forEach(n=>{n.entries.forEach(r=>{t.push(r)})}),t}function q1e(e){const t=[],n=a=>t.find(s=>a.id===s.id),r=a=>!!n(a),i=a=>typeof a=="string"?{id:a}:a;return e.forEach(a=>{const s=a.group?i(a.group):{id:"default"};r(s)?n(s).entries.push(a):t.push({...s,entries:[a]})}),t}var K1e="data-id",rB=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],Y1e=1e3;function xn(e,t,n,r){this._eventBus=t,this._canvas=n,this._search=r,this._current=null;var i=ui(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:i},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",a=>{const s=this.isOpen()&&this._current.target;a.element===s&&this.refresh()})}xn.$inject=["config.popupMenu","eventBus","canvas","search"];xn.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:r,emptyPlaceholder:i,options:a}=this._current,s=Object.entries(n).map(([f,p])=>({id:f,...p})),c=Object.entries(r).map(([f,p])=>({id:f,...p})),l=e&&(f=>this._ensureVisible(f,e)),u=this._updateScale(this._current.container);J3(En`
      <${V1e}
        onClose=${f=>this.close(f)}
        onSelect=${(f,p,m)=>this.trigger(f,p,m)}
        position=${l}
        className=${t}
        entries=${s}
        headerEntries=${c}
        emptyPlaceholder=${i}
        scale=${u}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        searchFn=${this._search}
        ...${{...a}}
      />
    `,this._current.container)};xn.prototype.open=function(e,t,n,r){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:i,headerEntries:a,emptyPlaceholder:s}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:i,headerEntries:a,emptyPlaceholder:s,container:this._createContainer({provider:t}),options:r},this._emit("open"),this._bindAutoClose(),this._render()};xn.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:r,emptyPlaceholder:i}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:r,emptyPlaceholder:i},this._emit("refresh"),this._render()};xn.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const r=this._getEntries(e,n),i=this._getHeaderEntries(e,n),a=this._getEmptyPlaceholder(n);return{entries:r,headerEntries:i,emptyPlaceholder:a,empty:!(Object.keys(r).length||Object.keys(i).length)}};xn.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._canvas.restoreFocus(),this._current=null)};xn.prototype.reset=function(){const e=this._current.container;J3(null,e),xu(e)};xn.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};xn.prototype._onOpened=function(){this._emit("opened")};xn.prototype._onClosed=function(){this._emit("closed")};xn.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const r=ur(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(r),r};xn.prototype._bindAutoClose=function(){this._eventBus.once(rB,this.close,this)};xn.prototype._unbindAutoClose=function(){this._eventBus.off(rB,this.close,this)};xn.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,r,i=e;return t!==!0&&(t===!1?(n=1,r=1):(n=t.min,r=t.max),ui(n)&&e<n&&(i=n),ui(r)&&e>r&&(i=r)),i};xn.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect(),i={},a=t.x,s=t.y;return t.x+r.width>n.width&&(i.x=!0),t.y+r.height>n.height&&(i.y=!0),i.x&&i.y?(a=t.x-r.width,s=t.y-r.height):i.x?(a=t.x-r.width,s=t.y):i.y&&t.y<r.height?(a=t.x,s=10):i.y&&(a=t.x,s=t.y-r.height),t.y<n.top&&(s=t.y+r.height),{x:a,y:s}};xn.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};xn.prototype.registerProvider=function(e,t,n){n||(n=t,t=Y1e),this._eventBus.on("popupMenu.getProviders."+e,t,function(r){r.providers.push(n)})};xn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};xn.prototype._getEntries=function(e,t){var n={};return q(t,function(r){if(!r.getPopupMenuEntries){q(r.getEntries(e),function(a){var s=a.id;if(!s)throw new Error("entry ID is missing");n[s]=Is(a,["id"])});return}var i=r.getPopupMenuEntries(e);Fi(i)?n=i(n):q(i,function(a,s){n[s]=a})}),n};xn.prototype._getHeaderEntries=function(e,t){var n={};return q(t,function(r){if(!r.getPopupMenuHeaderEntries){if(!r.getHeaderEntries)return;q(r.getHeaderEntries(e),function(a){var s=a.id;if(!s)throw new Error("entry ID is missing");n[s]=Is(a,["id"])});return}var i=r.getPopupMenuHeaderEntries(e);Fi(i)?n=i(n):q(i,function(a,s){n[s]=a})}),n};xn.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>Fi(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};xn.prototype.isOpen=function(){return!!this._current};xn.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let i=tp(e.delegateTarget||e.target,".entry",!0),a=Rr(i,K1e);t={id:a,...this._getEntry(a)}}const r=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(Fi(r)){if(n==="click")return r(e,t)}else if(r[n])return r[n](e,t)}};xn.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};function X1e(e,t,n){const{keys:r}=n;if(t=t.trim().toLowerCase(),!t)throw new Error("<pattern> must not be empty");const i=t.trim().toLowerCase().split(/\s+/);return e.flatMap(a=>{const s=Z1e(a,i,r);return s?{item:a,tokens:s}:[]}).sort(J1e(r))}function Z1e(e,t,n){const{matchedWords:r,tokens:i}=n.reduce((a,s)=>{const c=e[s],{tokens:l,matchedWords:u}=_t(c)?c.reduce((d,h)=>{const{tokens:f,matchedWords:p}=fO(h,t);return{tokens:[...d.tokens,f],matchedWords:{...d.matchedWords,...p}}},{matchedWords:{},tokens:[]}):fO(c,t);return{tokens:{...a.tokens,[s]:l},matchedWords:{...a.matchedWords,...u}}},{matchedWords:{},tokens:{}});return Object.keys(r).length!==t.length?null:i}function J1e(e){return(t,n)=>{let r=0,i=1;for(const a of e){const s=Q1e(t.tokens[a],n.tokens[a]);if(s!==0){r+=s*i,i*=.9;continue}const c=eje(t.item[a],n.item[a]);if(c!==0){r+=c*i,i*=.9;continue}}return r}}function Q1e(e,t){return dO(t)-dO(e)}function dO(e){return e.reduce((t,n)=>t+iB(n),0)}function iB(e){if(_t(e))return Math.max(...e.map(iB));const t=Math.log(e.value.length);return e.match?(e.start?e.end?131.9:7.87:e.wordStart?2.19:1)*t:-.07*t}function hO(e=""){return _t(e)?e.join(", "):e}function eje(e,t){return hO(e).localeCompare(hO(t))}function fO(e,t){if(!e)return{tokens:[],matchedWords:{}};const n=[],r={},i=t.map(tje),a=[`(?<all>${i.join("\\s+")})`,...i].join("|"),s=new RegExp(a,"ig");let c,l=0;for(;c=s.exec(e);){const[u]=c,d=c.index,h=c.index+u.length,f=d===0,p=h===e.length,m=!!c.groups.all,g=f||/\s/.test(e.charAt(d-1)),v=p||/\s/.test(e.charAt(h));c.index>l&&n.push({value:e.slice(l,c.index),index:l}),n.push({value:u,index:c.index,match:!0,wordStart:g,wordEnd:v,start:f,end:p,all:m});const b=m?t:[u];for(const w of b)r[w.toLowerCase()]=!0;l=c.index+u.length}return l<e.length&&n.push({value:e.slice(l),index:l}),{tokens:n,matchedWords:r}}function tje(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}const aB={search:["value",X1e]},fE={__depends__:[aB],__init__:["popupMenu"],popupMenu:["type",xn]};var sB={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},nje=900;function Cd(e,t,n,r){e.registerProvider(nje,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=r}Cd.$inject=["contextPad","popupMenu","translate","canvas"];Cd.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&J(t,this._getEntries(e)),t};Cd.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};Cd.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${sB.align}</div>`,action:{click:function(t,n){var r=e._getMenuPosition(n);J(r,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",r)}}}}};Cd.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,r=n.getBoundingClientRect(),i={x:r.left,y:r.bottom+t};return i};var rje=["left","center","right","top","middle","bottom"];function _p(e,t,n,r){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",this)}_p.$inject=["popupMenu","alignElements","translate","rules"];_p.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&J(t,this._getEntries(e)),t};_p.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};_p.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,r=this._popupMenu,i={};return q(rje,function(a){i["align-elements-"+a]={group:"align",title:n("Align elements "+a),className:"bjs-align-elements-menu-entry",imageHtml:sB[a],action:function(){t.trigger(e,a),r.close()}}}),i};function qi(e){he.call(this,e),this.init()}qi.$inject=["eventBus"];Ie(qi,he);qi.prototype.addRule=function(e,t,n){var r=this;typeof e=="string"&&(e=[e]),e.forEach(function(i){r.canExecute(i,t,function(a,s,c){return n(a)},!0)})};qi.prototype.init=function(){};function kx(e){qi.call(this,e)}kx.$inject=["eventBus"];Ie(kx,qi);kx.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=St(t,function(r){return!(r.waypoints||r.host||r.labelTarget)});return n=ly(n),n.length<2?!1:n})};const ije={__depends__:[x1e,B3,fE],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Cd],alignElementsMenuProvider:["type",_p],bpmnAlignElements:["type",kx]};var aje=10,oB=50,sje=250;function pE(e,t,n,r){for(var i;i=oje(e,n,t);)n=r(t,n,i);return n}function mE(e){return function(t,n,r){var i={x:n.x,y:n.y};return["x","y"].forEach(function(a){var s=e[a];if(s){var c=a==="x"?"width":"height",l=s.margin,u=s.minDistance;l<0?i[a]=Math.min(r[a]+l-t[c]/2,n[a]-u+l):i[a]=Math.max(r[a]+r[c]+l+t[c]/2,n[a]+u+l)}}),i}}function oje(e,t,n){var r={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},i=lje(e);return dn(i,function(a){if(a===n)return!1;var s=vr(a,r,aje);return s==="intersect"})}function cje(e,t){t||(t={});function n(m){return m.source===e?1:-1}var r=t.defaultDistance||oB,i=t.direction||"e",a=t.filter,s=t.getWeight||n,c=t.maxDistance||sje,l=t.reference||"start";a||(a=hje);function u(m,g){return i==="n"?l==="start"?Ge(m).top-Ge(g).bottom:l==="center"?Ge(m).top-Qe(g).y:Ge(m).top-Ge(g).top:i==="w"?l==="start"?Ge(m).left-Ge(g).right:l==="center"?Ge(m).left-Qe(g).x:Ge(m).left-Ge(g).left:i==="s"?l==="start"?Ge(g).top-Ge(m).bottom:l==="center"?Qe(g).y-Ge(m).bottom:Ge(g).bottom-Ge(m).bottom:l==="start"?Ge(g).left-Ge(m).right:l==="center"?Qe(g).x-Ge(m).right:Ge(g).right-Ge(m).right}var d=e.incoming.filter(a).map(function(m){var g=s(m),v=g<0?u(m.source,e):u(e,m.source);return{id:m.source.id,distance:v,weight:g}}),h=e.outgoing.filter(a).map(function(m){var g=s(m),v=g>0?u(e,m.target):u(m.target,e);return{id:m.target.id,distance:v,weight:g}}),f=d.concat(h).reduce(function(m,g){return m[g.id+"__weight_"+g.weight]=g,m},{}),p=$o(f,function(m,g){var v=g.distance,b=g.weight;return v<0||v>c||(m[String(v)]||(m[String(v)]=0),m[String(v)]+=1*b,(!m.distance||m[m.distance]<m[String(v)])&&(m.distance=v)),m},{});return p.distance||r}function lje(e){var t=Y0(e);return e.host&&(t=t.concat(Y0(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,r){return n.concat(Y0(r))},[]))),t}function Y0(e){return dje(e).concat(uje(e))}function uje(e){return e.incoming.map(function(t){return t.source})}function dje(e){return e.outgoing.map(function(t){return t.target})}function hje(){return!0}var fje=100;function cB(e,t,n){e.on("autoPlace",fje,function(r){var i=r.shape,a=r.source;return pje(a,i)}),e.on("autoPlace.end",function(r){n.scrollToElement(r.shape)}),this.append=function(r,i,a){e.fire("autoPlace.start",{source:r,shape:i});var s=e.fire("autoPlace",{source:r,shape:i}),c=t.appendShape(r,i,s,r.parent,a);return e.fire("autoPlace.end",{source:r,shape:c}),c}}cB.$inject=["eventBus","modeling","canvas"];function pje(e,t,n){n||(n={});var r=n.defaultDistance||oB,i=Qe(e),a=Ge(e);return{x:a.right+r+t.width/2,y:i.y}}function lB(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}lB.$inject=["eventBus","selection"];const mje={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",cB],autoPlaceSelectionBehavior:["type",lB]};function td(e,t){for(uy(t)&&(t=[t]);e=e.parent;)if(ft(e,t))return e;return null}function uB(e,t){var n=td(e,"bpmn:Process");if(n)return!0;var r=["bpmn:Participant","bpmn:Lane"];if(n=td(e,r),n)return dr(n);if(ft(e,r))return dr(e);var i;for(i=Ce(e);i&&!C(i,"bpmn:Process");i=i.$parent);if(!t)return!0;var a=t.find(function(s){var c=Ce(s);return c&&c.get("processRef")===i});return a?dr(a):!0}function dB(e,t,n){var r=uB(e,n);if(C(t,"bpmn:TextAnnotation"))return vje(e,t,r);if(ft(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return yje(e,t,r);if(C(t,"bpmn:FlowNode"))return gje(e,t,r)}function gje(e,t,n){var r=Ge(e),i=Qe(e),a=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},s=cje(e,{filter:function(p){return C(p,"bpmn:SequenceFlow")},direction:a.directionHint}),c=30,l=a.minDistance,u=a.baseOrientation;C(e,"bpmn:BoundaryEvent")&&(u=vr(e,e.host,-25),u.indexOf(a.boundaryOrientation)!==-1&&(c*=-1));var d=n?{x:r.right+s+t.width/2,y:i.y+pO(u,l,a)}:{x:i.x+pO(u,l,a),y:r.bottom+s+t.height/2},h={margin:c,minDistance:l},f=n?{y:h}:{x:h};return pE(e,t,d,mE(f))}function pO(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function vje(e,t,n){var r=Ge(e),i=n?{x:r.right+t.width/2,y:r.top-50-t.height/2}:{x:r.right+50+t.width/2,y:r.bottom+t.height/2};qt(e)&&(i=Qe(e),n?(i.x+=100,i.y-=50):(i.x+=100,i.y+=50));var a={margin:n?-30:30,minDistance:20},s=n?{y:a}:{x:a};return pE(e,t,i,mE(s))}function yje(e,t,n){var r=Ge(e),i=n?{x:r.right-10+t.width/2,y:r.bottom+40+t.width/2}:{x:r.left-40-t.width/2,y:r.bottom-10+t.height/2},a={margin:30,minDistance:30},s=n?{x:a}:{y:a};return pE(e,t,i,mE(s))}function hB(e,t){e.on("autoPlace",function(n){var r=n.shape,i=n.source;return dB(i,r,t)})}hB.$inject=["eventBus","elementRegistry"];const gE={__depends__:[mje],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",hB]};function Fs(e,t,n,r){he.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=r;var i=this;this.postExecuted(["shape.create"],function(a){var s=a.context,c=s.hints||{},l=s.shape,u=s.parent||s.newParent;c.autoResize!==!1&&i._expand([l],u)}),this.postExecuted(["elements.move"],function(a){var s=a.context,c=fj(dy(s.closure.topLevel)),l=s.hints,u=l?l.autoResize:!0;if(u!==!1){var d=hy(c,function(h){return h.parent.id});q(d,function(h,f){_t(u)&&(h=h.filter(function(p){return dn(u,xs({id:p.id}))})),i._expand(h,f)})}}),this.postExecuted(["shape.toggleCollapse"],function(a){var s=a.context,c=s.hints,l=s.shape;c&&c.autoResize===!1||l.collapsed||i._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(a){var s=a.context,c=s.hints,l=s.shape,u=l.parent;c&&c.autoResize===!1||u&&i._expand([l],u)})}Fs.$inject=["eventBus","elementRegistry","modeling","rules"];Ie(Fs,he);Fs.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),r=this.getPadding(t),i=Ge($r(e)),a=Ge(t),s={};return i.top-a.top<r.top&&(s.top=i.top-n.top),i.left-a.left<r.left&&(s.left=i.left-n.left),a.right-i.right<r.right&&(s.right=i.right+n.right),a.bottom-i.bottom<r.bottom&&(s.bottom=i.bottom+n.bottom),pj(J({},a,s))};Fs.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var r=this._getOptimalBounds(e,t);if(xje(r,t)){var i=bje(Fa(t,["x","y","width","height"]),r);this.resize(t,r,{autoResize:i});var a=t.parent;a&&this._expand([t],a)}}};Fs.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};Fs.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};Fs.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function xje(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function bje(e,t){var n="";return e=Ge(e),t=Ge(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function Cx(e){e.invoke(Fs,this)}Cx.$inject=["injector"];Ie(Cx,Fs);Cx.prototype.resize=function(e,t,n){C(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function jp(e){qi.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}jp.$inject=["eventBus"];Ie(jp,qi);jp.prototype.canResize=function(e,t){return!1};function Ax(e,t){jp.call(this,e),this._modeling=t}Ie(Ax,jp);Ax.$inject=["eventBus","modeling"];Ax.prototype.canResize=function(e,t){if(C(t.di,"bpmndi:BPMNPlane")||!C(t,"bpmn:Participant")&&!C(t,"bpmn:Lane")&&!C(t,"bpmn:SubProcess"))return!1;var n=!0;return q(e,function(r){if(C(r,"bpmn:Lane")||Pt(r)){n=!1;return}}),n};const wje={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Cx],bpmnAutoResizeProvider:["type",Ax]};var mO=1500;function fB(e,t,n){var r=this,i=n.get("dragging",!1);function a(s){if(!s.hover){var c=s.originalEvent,l=r._findTargetGfx(c),u=l&&e.get(l);l&&u&&(s.stopPropagation(),i.hover({element:u,gfx:l}),i.move(c))}}i&&t.on("drag.start",function(s){t.once("drag.move",mO,function(c){a(c)})}),function(){var s,c;t.on("element.hover",function(l){s=l.gfx,c=l.element}),t.on("element.hover",mO,function(l){c&&t.fire("element.out",{element:c,gfx:s})}),t.on("element.out",function(){s=null,c=null})}(),this._findTargetGfx=function(s){var c,l;if(s instanceof MouseEvent)return c=Uc(s),l=document.elementFromPoint(c.x,c.y),_je(l)}}fB.$inject=["elementRegistry","eventBus","injector"];function _je(e){return tp(e,"svg, .djs-element",!0)}const jje={__init__:["hoverFix"],hoverFix:["type",fB]};var Rl=Math.round,gO="djs-drag-active";function sc(e){e.preventDefault()}function Sje(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function Eje(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function pB(e,t,n,r){var i={threshold:5,trapClick:!0},a;function s(y){var _=t.viewbox(),j=t._container.getBoundingClientRect();return{x:_.x+(y.x-j.left)/_.scale,y:_.y+(y.y-j.top)/_.scale}}function c(y,_){_=_||a;var j=e.createEvent(J({},_.payload,_.data,{isTouch:_.isTouch}));return e.fire("drag."+y,j)===!1?!1:e.fire(_.prefix+"."+y,j)}function l(y){var _=y.filter(function(j){return r.get(j.id)});_.length&&n.select(_)}function u(y,_){var j=a.payload,S=a.displacement,E=a.globalStart,P=Uc(y),k=va(P,E),T=a.localStart,A=s(P),R=va(A,T);if(!a.active&&(_||Eje(k)>a.threshold)){if(J(j,{x:Rl(T.x+S.x),y:Rl(T.y+S.y),dx:0,dy:0},{originalEvent:y}),c("start")===!1)return v();a.active=!0,a.keepSelection||(j.previousSelection=n.get(),n.select(null)),a.cursor&&jx(a.cursor),t.addMarker(t.getRootElement(),gO)}qb(y),a.active&&(J(j,{x:Rl(A.x+S.x),y:Rl(A.y+S.y),dx:Rl(R.x),dy:Rl(R.y)},{originalEvent:y}),c("move"))}function d(y){var _,j=!0;a.active&&(y&&(a.payload.originalEvent=y,qb(y)),j=c("end")),j===!1&&c("rejected"),_=b(j!==!0),c("ended",_)}function h(y){nr("Escape",y)&&(sc(y),v())}function f(y){var _;a.active&&(_=R3(e),setTimeout(_,400),sc(y)),d(y)}function p(y){u(y)}function m(y){var _=a.payload;_.hoverGfx=y.gfx,_.hover=y.element,c("hover")}function g(y){c("out");var _=a.payload;_.hoverGfx=null,_.hover=null}function v(y){var _;if(a){var j=a.active;j&&c("cancel"),_=b(y),j&&c("canceled",_)}}function b(y){var _,j;c("cleanup"),O3(),a.trapClick?j=f:j=d,at.unbind(document,"mousemove",u),at.unbind(document,"dragstart",sc),at.unbind(document,"selectstart",sc),at.unbind(document,"mousedown",j,!0),at.unbind(document,"mouseup",j,!0),at.unbind(document,"keyup",h),at.unbind(document,"touchstart",p,!0),at.unbind(document,"touchcancel",v,!0),at.unbind(document,"touchmove",u,!0),at.unbind(document,"touchend",d,!0),e.off("element.hover",m),e.off("element.out",g),t.removeMarker(t.getRootElement(),gO);var S=a.payload.previousSelection;return y!==!1&&S&&!n.get().length&&l(S),_=a,a=null,_}function w(y,_,j,S){a&&v(!1),typeof _=="string"&&(S=j,j=_,_=null),S=J({},i,S||{});var E=S.data||{},P,k,T,A,R;S.trapClick?A=f:A=d,y?(P=mI(y)||y,k=Uc(y),qb(y),P.type==="dragstart"&&sc(P)):(P=null,k={x:0,y:0}),T=s(k),_||(_=T),R=Sje(P),a=J({prefix:j,data:E,payload:{},globalStart:k,displacement:va(_,T),localStart:T,isTouch:R},S),S.manual||(R?(at.bind(document,"touchstart",p,!0),at.bind(document,"touchcancel",v,!0),at.bind(document,"touchmove",u,!0),at.bind(document,"touchend",d,!0)):(at.bind(document,"mousemove",u),at.bind(document,"dragstart",sc),at.bind(document,"selectstart",sc),at.bind(document,"mousedown",A,!0),at.bind(document,"mouseup",A,!0)),at.bind(document,"keyup",h),e.on("element.hover",m),e.on("element.out",g)),c("init"),S.autoActivate&&u(y,!0)}e.on("diagram.destroy",v),this.init=w,this.move=u,this.hover=m,this.out=g,this.end=d,this.cancel=v,this.context=function(){return a},this.setOptions=function(y){J(i,y)}}pB.$inject=["eventBus","canvas","selection","elementRegistry"];const zs={__depends__:[jje,Ha],dragging:["type",pB]};function Ad(e,t,n){this._canvas=n,this._opts=J({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var r=this;t.on("drag.move",function(i){var a=r._toBorderPoint(i);r.startScroll(a)}),t.on(["drag.cleanup"],function(){r.stopScroll()})}Ad.$inject=["config.autoScroll","eventBus","canvas"];Ad.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,r=this,i=t.getContainer().getBoundingClientRect(),a=[e.x,e.y,i.width-e.x,i.height-e.y];this.stopScroll();for(var s=0,c=0,l=0;l<4;l++)Nje(a[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?s=n.scrollStep:l==1?c=n.scrollStep:l==2?s=-n.scrollStep:l==3&&(c=-n.scrollStep));(s!==0||c!==0)&&(t.scroll({dx:s,dy:c}),this._scrolling=setTimeout(function(){r.startScroll(e)},n.scrollRepeatTimeout))};function Nje(e,t,n){return t<e&&e<n}Ad.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Ad.prototype.setOptions=function(e){this._opts=J({},this._opts,e)};Ad.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=Uc(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const Pje={__depends__:[zs],__init__:["autoScroll"],autoScroll:["type",Ad]};function vE(e){this._commandStack=e.get("commandStack",!1)}vE.$inject=["injector"];vE.prototype.allowed=function(e,t){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(e,t)),n===void 0?!0:n};const Ya={__init__:["rules"],rules:["type",vE]};var zm=Math.round,kje=Math.max;function Cje(e,t){var n=e.x,r=e.y;return[["M",n,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function Aje(e){var t=[];return e.forEach(function(n,r){t.push([r===0?"M":"L",n.x,n.y])}),t}var mB=10;function Tje(e,t){var n,r;for(n=0;r=e[n];n++)if(gI(r,t)<=mB)return{point:e[n],bendpoint:!0,index:n};return null}function Oje(e,t){var n=tH(Cje(t,mB),Aje(e)),r=n[0],i=n[n.length-1],a;return r?r!==i?r.segment2!==i.segment2?(a=kje(r.segment2,i.segment2)-1,{point:e[a],bendpoint:!0,index:a}):{point:{x:zm(r.x+i.x)/2,y:zm(r.y+i.y)/2},index:r.segment2}:{point:{x:zm(r.x),y:zm(r.y)},index:r.segment2}:null}function N1(e,t){return Tje(e,t)||Oje(e,t)}function gB(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function vO(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function Rje(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function $je(e,t,n){var r=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],i=r[0].n*t[0]+r[1].n*t[1],a=r[0].lambda*t[0]+r[1].lambda*t[1];return-i/a}function yE(e,t){var n=t[0],r=t[1],i={x:r.x-n.x,y:r.y-n.y},a=$je([n.x,n.y],[i.x,i.y],[e.x,e.y]);return{x:n.x+a*i.x,y:n.y+a*i.y}}function vB(e,t){var n=yE(e,t),r={x:n.x-e.x,y:n.y-e.y};return gB(r)}function Vv(e,t){return gB({x:e.x-t.x,y:e.y-t.y})}var yB="djs-bendpoint",xB="djs-segment-dragger";function Ije(e,t){var n=Uc(t),r=e._container.getBoundingClientRect(),i;i={x:r.left,y:r.top};var a=e.viewbox();return{x:a.x+(n.x-i.x)/a.scale,y:a.y+(n.y-i.y)/a.scale}}function P1(e,t,n){var r=Ije(e,n),i=N1(t,r);return i}function k1(e,t){var n=je("g");Xt(n).add(yB),ke(e,n);var r=je("circle");de(r,{cx:0,cy:0,r:4}),Xt(r).add("djs-visual"),ke(n,r);var i=je("circle");return de(i,{cx:0,cy:0,r:10}),Xt(i).add("djs-hit"),ke(n,i),t&&Xt(n).add(t),n}function Mje(e,t,n,r){var i=je("g");ke(e,i);var a=18,s=6,c=11,l=Lje(t,n,r),u=s+c,d=je("rect");de(d,{x:-a/2,y:-s/2,width:a,height:s}),Xt(d).add("djs-visual"),ke(i,d);var h=je("rect");return de(h,{x:-l/2,y:-u/2,width:l,height:u}),Xt(h).add("djs-hit"),ke(i,h),nH(i,r==="v"?90:0),i}function bB(e,t,n){var r=je("g"),i=pw(t,n),a=ps(t,n);return ke(e,r),Mje(r,t,n,a),Xt(r).add(xB),Xt(r).add(a==="h"?"horizontal":"vertical"),jr(r,i.x,i.y),r}function C1(e){return Math.abs(Math.round(e*2/3))}function Dje(e,t){var n=Bje(e,t);return yE(e,n)}function Lje(e,t,n){var r=t.x-e.x,i=t.y-e.y;return C1(n==="h"?r:i)}function Bje(e,t){for(var n=t.waypoints,r=1/0,i,a=0;a<n.length-1;a++){var s=n[a],c=n[a+1],l=vB(e,[s,c]);l<r&&(r=l,i=a)}return[n[i],n[i+1]]}function wB(e,t,n,r,i){function a(y,_,j){var S=y.index,E=y.point,P,k,T,A,R,L;return S<=0||y.bendpoint?!1:(P=_[S-1],k=_[S],T=pw(P,k),A=ps(P,k),R=Math.abs(E.x-T.x),L=Math.abs(E.y-T.y),A&&R<=j&&L<=j)}function s(y,_){var j=y.waypoints,S,E,P,k;return _.index<=0||_.bendpoint||(S={start:j[_.index-1],end:j[_.index]},E=ps(S.start,S.end),!E)?null:(E==="h"?P=S.end.x-S.start.x:P=S.end.y-S.start.y,k=C1(P)/2,k)}function c(y,_){var j=_.waypoints,S=P1(t,j,y),E;if(S)return E=s(_,S),a(S,j,E)?i.start(y,_,S.index):r.start(y,_,S.index,!S.bendpoint),!0}function l(y,_,j){at.bind(y,_,function(S){n.triggerMouseEvent(_,S,j),S.stopPropagation()})}function u(y,_){var j=t.getLayer("overlays"),S=An('.djs-bendpoints[data-element-id="'+Hh(y.id)+'"]',j);return!S&&_&&(S=je("g"),de(S,{"data-element-id":y.id}),Xt(S).add("djs-bendpoints"),ke(j,S),l(S,"mousedown",y),l(S,"click",y),l(S,"dblclick",y)),S}function d(y,_){return An('.djs-segment-dragger[data-segment-idx="'+y+'"]',_)}function h(y,_){_.waypoints.forEach(function(j,S){var E=k1(y);ke(y,E),jr(E,j.x,j.y)}),k1(y,"floating")}function f(y,_){for(var j=_.waypoints,S,E,P,k=1;k<j.length;k++)S=j[k-1],E=j[k],ps(S,E)&&(P=bB(y,S,E),de(P,{"data-segment-idx":k}),l(P,"mousemove",_))}function p(y){q(jP("."+yB,y),function(_){Sr(_)})}function m(y){q(jP("."+xB,y),function(_){Sr(_)})}function g(y){var _=u(y);return _||(_=u(y,!0),h(_,y),f(_,y)),_}function v(y){var _=u(y);_&&(m(_),p(_),f(_,y),h(_,y))}function b(y,_){var j=An(".floating",y),S=_.point;j&&jr(j,S.x,S.y)}function w(y,_,j){var S=d(_.index,y),E=j[_.index-1],P=j[_.index],k=_.point,T=pw(E,P),A=ps(E,P),R,L;S&&(R=Fje(S),L={x:k.x-T.x,y:k.y-T.y},A==="v"&&(L={x:L.y,y:L.x}),jr(R,L.x,L.y))}e.on("connection.changed",function(y){v(y.element)}),e.on("connection.remove",function(y){var _=u(y.element);_&&Sr(_)}),e.on("element.marker.update",function(y){var _=y.element,j;_.waypoints&&(j=g(_),y.add?Xt(j).add(y.marker):Xt(j).remove(y.marker))}),e.on("element.mousemove",function(y){var _=y.element,j=_.waypoints,S,E;if(j){if(S=u(_,!0),E=P1(t,j,y.originalEvent),!E)return;b(S,E),E.bendpoint||w(S,E,j)}}),e.on("element.mousedown",function(y){if(mj(y)){var _=y.originalEvent,j=y.element;if(j.waypoints)return c(_,j)}}),e.on("selection.changed",function(y){var _=y.newSelection,j=_[0];j&&j.waypoints&&g(j)}),e.on("element.hover",function(y){var _=y.element;_.waypoints&&(g(_),n.registerEvent(y.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(y){n.unregisterEvent(y.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(y){var _=y.element,j=y.newId;if(_.waypoints){var S=u(_);S&&de(S,{"data-element-id":j})}}),this.addHandles=g,this.updateHandles=v,this.getBendpointsContainer=u,this.getSegmentDragger=d}wB.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function Fje(e){return An(".djs-visual",e)}var yO=Math.round,mc="reconnectStart",gc="reconnectEnd",dh="updateWaypoints";function xE(e,t,n,r,i,a){this._injector=e,this.start=function(s,c,l,u){var d=n.getGraphics(c),h=c.source,f=c.target,p=c.waypoints,m;!u&&l===0?m=mc:!u&&l===p.length-1?m=gc:m=dh;var g=m===dh?"connection.updateWaypoints":"connection.reconnect",v=i.allowed(g,{connection:c,source:h,target:f});v===!1&&(v=i.allowed(g,{connection:c,source:f,target:h})),v!==!1&&r.init(s,"bendpoint.move",{data:{connection:c,connectionGfx:d,context:{allowed:v,bendpointIndex:l,connection:c,source:h,target:f,insert:u,type:m}}})},t.on("bendpoint.move.hover",function(s){var c=s.context,l=c.connection,u=l.source,d=l.target,h=s.hover,f=c.type;c.hover=h;var p;if(h){var m=f===dh?"connection.updateWaypoints":"connection.reconnect";if(p=c.allowed=i.allowed(m,{connection:l,source:f===mc?h:u,target:f===gc?h:d}),p){c.source=f===mc?h:u,c.target=f===gc?h:d;return}p===!1&&(p=c.allowed=i.allowed(m,{connection:l,source:f===gc?h:d,target:f===mc?h:u})),p&&(c.source=f===gc?h:d,c.target=f===mc?h:u)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(s){var c=s.context,l=c.type;c.hover=null,c.source=null,c.target=null,l!==dh&&(c.allowed=!1)}),t.on("bendpoint.move.end",function(s){var c=s.context,l=c.allowed,u=c.bendpointIndex,d=c.connection,h=c.insert,f=d.waypoints.slice(),p=c.source,m=c.target,g=c.type,v=c.hints||{},b={x:yO(s.x),y:yO(s.y)};if(!l)return!1;g===dh?(h?f.splice(u,0,b):f[u]=b,v.bendpointMove={insert:h,bendpointIndex:u},f=this.cropWaypoints(d,f),a.updateWaypoints(d,rH(f),v)):(g===mc?(v.docking="source",Gv(c)&&(v.docking="target",v.newWaypoints=f.reverse())):g===gc&&(v.docking="target",Gv(c)&&(v.docking="source",v.newWaypoints=f.reverse())),a.reconnect(d,p,m,b,v))},this)}xE.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];xE.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var r=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=r,t};function Gv(e){var t=e.hover,n=e.source,r=e.target,i=e.type;if(i===mc)return t&&r&&t===r&&n!==r;if(i===gc)return t&&n&&t===n&&n!==r}var zje="reconnectStart",Uje="reconnectEnd",xO="updateWaypoints",hh="connect-ok",Um="connect-not-ok",bO="connect-hover",wO="djs-updating",_O="djs-dragging",jO=1100;function _B(e,t,n,r){this._injector=t;var i=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(a){var s=a.context,c=s.bendpointIndex,l=s.connection,u=s.insert,d=l.waypoints,h=d.slice();s.waypoints=d,u&&h.splice(c,0,{x:a.x,y:a.y}),l.waypoints=h;var f=s.draggerGfx=k1(r.getLayer("overlays"));Xt(f).add("djs-dragging"),r.addMarker(l,_O),r.addMarker(l,wO)}),n.on("bendpoint.move.hover",function(a){var s=a.context,c=s.allowed,l=s.hover,u=s.type;if(l){if(r.addMarker(l,bO),u===xO)return;c?(r.removeMarker(l,Um),r.addMarker(l,hh)):c===!1&&(r.removeMarker(l,hh),r.addMarker(l,Um))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],jO,function(a){var s=a.context,c=s.hover,l=s.target;c&&(r.removeMarker(c,bO),r.removeMarker(c,l?hh:Um))}),n.on("bendpoint.move.move",function(a){var s=a.context,c=s.allowed,l=s.bendpointIndex,u=s.draggerGfx,d=s.hover,h=s.type,f=s.connection,p=f.source,m=f.target,g=f.waypoints.slice(),v={x:a.x,y:a.y},b=s.hints||{},w={};i&&(b.connectionStart&&(w.connectionStart=b.connectionStart),b.connectionEnd&&(w.connectionEnd=b.connectionEnd),h===zje?Gv(s)?(w.connectionEnd=w.connectionEnd||v,w.source=m,w.target=d||p,g=g.reverse()):(w.connectionStart=w.connectionStart||v,w.source=d||p,w.target=m):h===Uje?Gv(s)?(w.connectionStart=w.connectionStart||v,w.source=d||m,w.target=p,g=g.reverse()):(w.connectionEnd=w.connectionEnd||v,w.source=p,w.target=d||m):(w.noCropping=!0,w.noLayout=!0,g[l]=v),h===xO&&(g=e.cropWaypoints(f,g)),w.waypoints=g,i.drawPreview(s,c,w)),jr(u,a.x,a.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],jO,function(a){var s=a.context,c=s.connection,l=s.draggerGfx,u=s.hover,d=s.target,h=s.waypoints;c.waypoints=h,Sr(l),r.removeMarker(c,wO),r.removeMarker(c,_O),u&&(r.removeMarker(u,hh),r.removeMarker(u,d?hh:Um)),i&&i.cleanUp(s)})}_B.$inject=["bendpointMove","injector","eventBus","canvas"];var SO="connect-hover",EO="djs-updating";function NO(e,t,n){return bE(e,t,e[t]+n)}function bE(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function Hje(e,t,n,r){var i=Math.max(t[r],n[r]),a=Math.min(t[r],n[r]),s=20,c=Math.min(Math.max(a+s,e[r]),i-s);return bE(t,r,c)}function jB(e){return e==="x"?"y":"x"}function PO(e,t,n){var r,i;return e.original?e.original:(r=Qe(t),i=jB(n),bE(e,i,r[i]))}function SB(e,t,n,r,i,a){var s=e.get("connectionDocking",!1);this.start=function(h,f,p){var m,g=n.getGraphics(f),v=p-1,b=p,w=f.waypoints,y=w[v],_=w[b],j=P1(n,w,h),S,E,P;S=ps(y,_),S&&(E=S==="v"?"x":"y",v===0&&(y=PO(y,f.source,E)),b===w.length-1&&(_=PO(_,f.target,E)),j?P=j.point:P={x:(y.x+_.x)/2,y:(y.y+_.y)/2},m={connection:f,segmentStartIndex:v,segmentEndIndex:b,segmentStart:y,segmentEnd:_,axis:E,dragPosition:P},r.init(h,P,"connectionSegment.move",{cursor:E==="x"?"resize-ew":"resize-ns",data:{connection:f,connectionGfx:g,context:m}}))};function c(h,f){if(!s)return f;var p=h.waypoints,m;return h.waypoints=f,m=s.getCroppedWaypoints(h),h.waypoints=p,m}function l(h){i.update("connection",h.connection,h.connectionGfx)}function u(h,f,p){var m=h.newWaypoints,g=h.segmentStartIndex+f,v=m[g],b=h.segmentEndIndex+f,w=m[b],y=jB(h.axis),_=Hje(p,v,w,y);jr(h.draggerGfx,_.x,_.y)}function d(h,f){var p=0,m=h.filter(function(g,v){return vI(h[v-1],h[v+1],g)?(p=v<=f?p-1:p,!1):!0});return{waypoints:m,segmentOffset:p}}t.on("connectionSegment.move.start",function(h){var f=h.context,p=h.connection,m=n.getLayer("overlays");f.originalWaypoints=p.waypoints.slice(),f.draggerGfx=bB(m,f.segmentStart,f.segmentEnd),Xt(f.draggerGfx).add("djs-dragging"),n.addMarker(p,EO)}),t.on("connectionSegment.move.move",function(h){var f=h.context,p=f.connection,m=f.segmentStartIndex,g=f.segmentEndIndex,v=f.segmentStart,b=f.segmentEnd,w=f.axis,y=f.originalWaypoints.slice(),_=NO(v,w,h["d"+w]),j=NO(b,w,h["d"+w]),S=y.length,E=0;y[m]=_,y[g]=j;var P,k;m<2&&(P=vr(p.source,_),m===1?P==="intersect"&&(y.shift(),y[0]=_,E--):P!=="intersect"&&(y.unshift(v),E++)),g>S-3&&(k=vr(p.target,j),g===S-2?k==="intersect"&&(y.pop(),y[y.length-1]=j):k!=="intersect"&&y.push(b)),f.newWaypoints=p.waypoints=c(p,y),u(f,E,h),f.newSegmentStartIndex=m+E,l(h)}),t.on("connectionSegment.move.hover",function(h){h.context.hover=h.hover,n.addMarker(h.hover,SO)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(h){var f=h.context.hover;f&&n.removeMarker(f,SO)}),t.on("connectionSegment.move.cleanup",function(h){var f=h.context,p=f.connection;f.draggerGfx&&Sr(f.draggerGfx),n.removeMarker(p,EO)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(h){var f=h.context,p=f.connection;p.waypoints=f.originalWaypoints,l(h)}),t.on("connectionSegment.move.end",function(h){var f=h.context,p=f.connection,m=f.newWaypoints,g=f.newSegmentStartIndex;m=m.map(function(j){return{original:j.original,x:Math.round(j.x),y:Math.round(j.y)}});var v=d(m,g),b=v.waypoints,w=c(p,b),y=v.segmentOffset,_={segmentMove:{segmentStartIndex:f.segmentStartIndex,newSegmentStartIndex:g+y}};a.updateWaypoints(p,w,_)})}SB.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var Vje=Math.abs,kO=Math.round;function Gje(e,t,n){n=n===void 0?10:n;var r,i;for(r=0;r<t.length;r++)if(i=t[r],Vje(i-e)<=n)return i}function EB(e){return{x:e.x,y:e.y}}function NB(e){return{x:e.x+e.width,y:e.y+e.height}}function Di(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:kO(e.x+e.width/2),y:kO(e.y+e.height/2)}}function nd(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function Cn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var r,i=e[t],a=e.snapped=e.snapped||{};return n===!1?a[t]=!1:(a[t]=!0,r=n-i,e[t]+=r,e["d"+t]+=r),i}function PB(e){return e.children||[]}var Wje=Math.abs,CO=Math.round,X0=10;function kB(e){function t(a,s){if(_t(a)){for(var c=a.length;c--;)if(Wje(a[c]-s)<=X0)return a[c]}else{a=+a;var l=s%a;if(l<X0)return s-l;if(l>a-X0)return s-l+a}return s}function n(a,s){if(a.waypoints)return Dje(s,a);if(a.width)return{x:CO(a.width/2+a.x),y:CO(a.height/2+a.y)}}function r(a){var s=a.context,c=s.snapPoints,l=s.connection,u=l.waypoints,d=s.segmentStart,h=s.segmentStartIndex,f=s.segmentEnd,p=s.segmentEndIndex,m=s.axis;if(c)return c;var g=[u[h-1],d,f,u[p+1]];return h<2&&g.unshift(n(l.source,a)),p>u.length-3&&g.unshift(n(l.target,a)),s.snapPoints=c={horizontal:[],vertical:[]},q(g,function(v){v&&(v=v.original||v,m==="y"&&c.horizontal.push(v.y),m==="x"&&c.vertical.push(v.x))}),c}e.on("connectionSegment.move.move",1500,function(a){var s=r(a),c=a.x,l=a.y,u,d;if(s){u=t(s.vertical,c),d=t(s.horizontal,l);var h=c-u,f=l-d;J(a,{dx:a.dx-h,dy:a.dy-f,x:u,y:d}),(h||s.vertical.indexOf(c)!==-1)&&Cn(a,"x",u),(f||s.horizontal.indexOf(l)!==-1)&&Cn(a,"y",d)}});function i(a){var s=a.snapPoints,c=a.connection.waypoints,l=a.bendpointIndex;if(s)return s;var u=[c[l-1],c[l+1]];return a.snapPoints=s={horizontal:[],vertical:[]},q(u,function(d){d&&(d=d.original||d,s.horizontal.push(d.y),s.vertical.push(d.x))}),s}e.on(["connect.hover","connect.move","connect.end"],1500,function(a){var s=a.context,c=s.hover,l=c&&n(c,a);!qt(c)||!l||!l.x||!l.y||(Cn(a,"x",l.x),Cn(a,"y",l.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(a){var s=a.context,c=i(s),l=s.hover,u=l&&n(l,a),d=a.x,h=a.y,f,p;if(c){f=t(u?c.vertical.concat([u.x]):c.vertical,d),p=t(u?c.horizontal.concat([u.y]):c.horizontal,h);var m=d-f,g=h-p;J(a,{dx:a.dx-m,dy:a.dy-g,x:a.x-m,y:a.y-g}),(m||c.vertical.indexOf(d)!==-1)&&Cn(a,"x",f),(g||c.horizontal.indexOf(h)!==-1)&&Cn(a,"y",p)}})}kB.$inject=["eventBus"];const qje={__depends__:[zs,Ya],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",wB],bendpointMove:["type",xE],bendpointMovePreview:["type",_B],connectionSegmentMove:["type",SB],bendpointSnapping:["type",kB]};function CB(e,t,n,r){function i(s,c){return r.allowed("connection.create",{source:s,target:c})}function a(s,c){return i(c,s)}e.on("connect.hover",function(s){var c=s.context,l=c.start,u=s.hover,d;if(c.hover=u,d=c.canExecute=i(l,u),!mw(d)){if(d!==!1){c.source=l,c.target=u;return}d=c.canExecute=a(l,u),!mw(d)&&d!==!1&&(c.source=u,c.target=l)}}),e.on(["connect.out","connect.cleanup"],function(s){var c=s.context;c.hover=null,c.source=null,c.target=null,c.canExecute=!1}),e.on("connect.end",function(s){var c=s.context,l=c.canExecute,u=c.connectionStart,d={x:s.x,y:s.y},h=c.source,f=c.target;if(!l)return!1;var p=null,m={connectionStart:A1(c)?d:u,connectionEnd:A1(c)?u:d};ks(l)&&(p=l),c.connection=n.connect(h,f,p,m)}),this.start=function(s,c,l,u){ks(l)||(u=l,l=Qe(c)),t.init(s,"connect",{autoActivate:u,data:{shape:c,context:{start:c,connectionStart:l}}})}}CB.$inject=["eventBus","dragging","modeling","rules"];function A1(e){var t=e.hover,n=e.source,r=e.target;return t&&n&&t===n&&n!==r}var Kje=1100,Yje=900,AO="connect-ok",TO="connect-not-ok";function AB(e,t,n){var r=e.get("connectionPreview",!1);r&&t.on("connect.move",function(i){var a=i.context,s=a.canExecute,c=a.hover,l=a.source,u=a.start,d=a.startPosition,h=a.target,f=a.connectionStart||d,p=a.connectionEnd||{x:i.x,y:i.y},m=f,g=p;A1(a)&&(m=p,g=f),r.drawPreview(a,s,{source:l||u,target:h||c,connectionStart:m,connectionEnd:g})}),t.on("connect.hover",Yje,function(i){var a=i.context,s=i.hover,c=a.canExecute;c!==null&&n.addMarker(s,c?AO:TO)}),t.on(["connect.out","connect.cleanup"],Kje,function(i){var a=i.hover;a&&(n.removeMarker(a,AO),n.removeMarker(a,TO))}),r&&t.on("connect.cleanup",function(i){r.cleanUp(i.context)})}AB.$inject=["injector","eventBus","canvas"];const wE={__depends__:[Ha,Ya,zs],__init__:["connectPreview"],connect:["type",CB],connectPreview:["type",AB]};var Xje="djs-dragger";function Us(e,t,n,r){this._canvas=t,this._graphicsFactory=n,this._elementFactory=r,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Us.$inject=["injector","canvas","graphicsFactory","elementFactory"];Us.prototype.drawPreview=function(e,t,n){n=n||{};var r=e.connectionPreviewGfx,i=e.getConnection,a=n.source,s=n.target,c=n.waypoints,l=n.connectionStart,u=n.connectionEnd,d=n.noLayout,h=n.noCropping,f=n.noNoop,p,m=this;if(r||(r=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),fy(r),i||(i=e.getConnection=Zje(function(g,v,b){return m.getConnection(g,v,b)})),t&&(p=i(t,a,s)),!p){!f&&this.drawNoopPreview(r,n);return}p.waypoints=c||[],this._layouter&&!d&&(p.waypoints=this._layouter.layoutConnection(p,{source:a,target:s,connectionStart:l,connectionEnd:u,waypoints:n.waypoints||p.waypoints})),(!p.waypoints||!p.waypoints.length)&&(p.waypoints=[a?Qe(a):l,s?Qe(s):u]),this._connectionDocking&&(a||s)&&!h&&(p.waypoints=this._connectionDocking.getCroppedWaypoints(p,a,s)),this._graphicsFactory.drawConnection(r,p,{stroke:"var(--element-dragger-color)"})};Us.prototype.drawNoopPreview=function(e,t){var n=t.source,r=t.target,i=t.connectionStart||Qe(n),a=t.connectionEnd||Qe(r),s=this.cropWaypoints(i,a,n,r),c=this.createNoopConnection(s[0],s[1]);ke(e,c)};Us.prototype.cropWaypoints=function(e,t,n,r){var i=this._graphicsFactory,a=n&&i.getShapePath(n),s=r&&i.getShapePath(r),c=i.getConnectionPath({waypoints:[e,t]});return e=n&&gw(a,c,!0)||e,t=r&&gw(s,c,!1)||t,[e,t]};Us.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Sr(e.connectionPreviewGfx)};Us.prototype.getConnection=function(e){var t=Jje(e);return this._elementFactory.createConnection(t)};Us.prototype.createConnectionPreviewGfx=function(){var e=je("g");return de(e,{pointerEvents:"none"}),Xt(e).add(Xje),ke(this._canvas.getActiveLayer(),e),e};Us.prototype.createNoopConnection=function(e,t){return iH([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function Zje(e){var t={};return function(n){var r=JSON.stringify(n),i=t[r];return i||(i=t[r]=e.apply(null,arguments)),i}}function Jje(e){return ks(e)?e:{}}const Qje={__init__:["connectionPreview"],connectionPreview:["type",Us]},eSe=new dj("ps");var tSe=["marker-start","marker-mid","marker-end"],nSe=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Fo(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._styles=r}Fo.$inject=["elementRegistry","eventBus","canvas","styles"];Fo.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};Fo.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};Fo.prototype.addDragger=function(e,t,n,r="djs-dragger"){n=n||this.getGfx(e);var i=yI(n),a=n.getBoundingClientRect();return this._cloneMarkers(Ql(i),r),de(i,this._styles.cls(r,[],{x:a.top,y:a.left})),ke(t,i),de(i,"data-preview-support-element-id",e.id),i};Fo.prototype.addFrame=function(e,t){var n=je("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return ke(t,n),de(n,"data-preview-support-element-id",e.id),n};Fo.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var r=this;e.childNodes&&e.childNodes.forEach(i=>{r._cloneMarkers(i,t,n)}),sSe(e)&&tSe.forEach(function(i){if(de(e,i)){var a=rSe(e,i,r._canvas.getContainer());a&&r._cloneMarker(n,e,a,i,t)}})};Fo.prototype._cloneMarker=function(e,t,n,r,i="djs-dragger"){var a=[n.id,i,eSe.next()].join("-"),s=An("marker#"+n.id,e);e=e||this._canvas._svg;var c=s||yI(n);c.id=a,Xt(c).add(i);var l=An(":scope > defs",e);l||(l=je("defs"),ke(e,l)),ke(l,c);var u=aSe(c.id);de(t,r,u)};function rSe(e,t,n){var r=iSe(de(e,t));return An("marker#"+r,n||document)}function iSe(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function aSe(e){return"url(#"+e+")"}function sSe(e){return nSe.indexOf(e.nodeName)!==-1}const Td={__init__:["previewSupport"],previewSupport:["type",Fo]},Hm="complex-preview";class TB{constructor(t,n,r){this._canvas=t,this._graphicsFactory=n,this._previewSupport=r,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:r=[],removed:i=[],resized:a=[]}=t,s=this._canvas.getLayer(Hm);n.filter(c=>!oSe(c)).forEach(c=>{let l;qt(c)?(l=this._graphicsFactory._createContainer("connection",je("g")),this._graphicsFactory.drawConnection(Ql(l),c)):(l=this._graphicsFactory._createContainer("shape",je("g")),this._graphicsFactory.drawShape(Ql(l),c),jr(l,c.x,c.y)),this._previewSupport.addDragger(c,s,l)}),r.forEach(({element:c,delta:l})=>{this._previewSupport.addDragger(c,s,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"]);const u=this._previewSupport.addDragger(c,s);qt(c)?jr(u,l.x,l.y):jr(u,c.x+l.x,c.y+l.y)}),i.forEach(c=>{this._previewSupport.addDragger(c,s,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"])}),a.forEach(({shape:c,bounds:l})=>{this._canvas.addMarker(c,"djs-hidden"),this._markers.push([c,"djs-hidden"]),this._previewSupport.addDragger(c,s,void 0,"djs-dragging");const u=this._graphicsFactory._createContainer("shape",je("g"));this._graphicsFactory.drawShape(Ql(u),c,{width:l.width,height:l.height}),jr(u,l.x,l.y),this._previewSupport.addDragger(c,s,u)})}cleanUp(){fy(this._canvas.getLayer(Hm)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(Hm)}hide(){this._canvas.hideLayer(Hm)}}TB.$inject=["canvas","graphicsFactory","previewSupport"];function oSe(e){return e.hidden}const cSe={__depends__:[Td],__init__:["complexPreview"],complexPreview:["type",TB]};var _E=["top","bottom","left","right"],Vm=10;function jE(e,t){he.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(i){var a=i.context,s=a.connection,c=s.source,l=s.target,u=a.hints||{};u.createElementsBehavior!==!1&&(n(c),n(l))}),this.postExecuted(["label.create"],function(i){var a=i.context,s=a.shape,c=a.hints||{};c.createElementsBehavior!==!1&&n(s.labelTarget)}),this.postExecuted(["elements.create"],function(i){var a=i.context,s=a.elements,c=a.hints||{};c.createElementsBehavior!==!1&&s.forEach(function(l){n(l)})});function n(i){if(py(i)&&!qt(i)){var a=dSe(i);a&&r(i,a)}}function r(i,a){var s=Qe(i),c=i.label,l=Qe(c);if(c.parent){var u=Ge(i),d;switch(a){case"top":d={x:s.x,y:u.top-Vm-c.height/2};break;case"left":d={x:u.left-Vm-c.width/2,y:s.y};break;case"bottom":d={x:s.x,y:u.bottom+Vm+c.height/2};break;case"right":d={x:u.right+Vm+c.width/2,y:s.y};break}var h=va(d,l);t.moveShape(c,h)}}}Ie(jE,he);jE.$inject=["eventBus","modeling"];function lSe(e){var t=e.host,n=Qe(e),r=vr(n,t),i;r.indexOf("-")>=0?i=r.split("-"):i=[r];var a=_E.filter(function(s){return i.indexOf(s)===-1});return a}function uSe(e){var t=Qe(e),n=[].concat(e.incoming.map(function(r){return r.waypoints[r.waypoints.length-2]}),e.outgoing.map(function(r){return r.waypoints[1]})).map(function(r){return OB(t,r)});return n}function dSe(e){var t=Qe(e.label),n=Qe(e),r=OB(n,t);if(hSe(r)){var i=uSe(e);if(e.host){var a=lSe(e);i=i.concat(a)}var s=_E.filter(function(c){return i.indexOf(c)===-1});if(s.indexOf(r)===-1)return s[0]}}function OB(e,t){return vr(t,e,5)}function hSe(e){return _E.indexOf(e)!==-1}function SE(e){he.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,r=t.shape;t.position||(C(r,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-r.height/2}:t.position={x:n.x+n.width+80+r.width/2,y:n.y+n.height/2})},!0)}Ie(SE,he);SE.$inject=["eventBus"];function EE(e,t){e.invoke(he,this),this.postExecute("shape.move",function(n){var r=n.newParent,i=n.shape,a=St(i.incoming.concat(i.outgoing),function(s){return C(s,"bpmn:Association")});q(a,function(s){t.moveConnection(s,{x:0,y:0},r)})},!0)}Ie(EE,he);EE.$inject=["injector","modeling"];var OO=500;function Tx(e,t){t.invoke(he,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",OO,function(r){var i=r.elements;i=i.filter(function(a){var s=a.host;return RO(a,s)}),i.length===1&&i.map(function(a){return i.indexOf(a)}).forEach(function(a){var s=i[a];r.elements[a]=n._replaceShape(i[a],s)})},!0),this.preExecute("elements.move",OO,function(r){var i=r.shapes,a=r.newHost;if(i.length===1){var s=i[0];RO(s,a)&&(r.shapes=[n._replaceShape(s,a)])}},!0)}Tx.$inject=["bpmnReplace","injector"];Ie(Tx,he);Tx.prototype._replaceShape=function(e,t){var n=fSe(e),r={type:"bpmn:BoundaryEvent",host:t};return n&&(r.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})};function fSe(e){var t=Ce(e),n=t.eventDefinitions;return n&&n[0]}function RO(e,t){return!Pt(e)&&ft(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function NE(e,t){he.call(this,e);function n(r){return St(r.attachers,function(i){return C(i,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(r){var i=r.context.source,a=r.context.target,s=n(a);C(i,"bpmn:EventBasedGateway")&&C(a,"bpmn:ReceiveTask")&&s.length>0&&t.removeElements(s)}),this.postExecute("connection.reconnect",function(r){var i=r.context.oldSource,a=r.context.newSource;C(i,"bpmn:Gateway")&&C(a,"bpmn:EventBasedGateway")&&q(a.outgoing,function(s){var c=s.target,l=n(c);C(c,"bpmn:ReceiveTask")&&l.length>0&&t.removeElements(l)})})}NE.$inject=["eventBus","modeling"];Ie(NE,he);function PE(e,t,n){he.call(this,e),this.preExecute("shape.replace",c,!0),this.postExecuted("shape.replace",l,!0),this.preExecute("connection.create",i,!0),this.postExecuted("connection.delete",r,!0),this.postExecuted("connection.reconnect",a,!0),this.postExecuted("element.updateProperties",s,!0);function r(v){const b=v.source,w=v.target;$l(b)&&fh(w)&&d(w)}function i(v){const b=v.connection,w=v.source,y=v.target;$l(w)&&Gm(y)&&(u(y),f(w,[b]))}function a(v){const b=v.newTarget,w=v.oldSource,y=v.oldTarget;if(y!==b){const _=w;fh(y)&&d(y),$l(_)&&Gm(b)&&u(b)}}function s(v){const{element:b}=v;fh(b)?(h(b),p(b)):Gm(b)&&m(b)}function c(v){const{newData:b,oldShape:w}=v;if($l(v.oldShape)&&b.eventDefinitionType!=="bpmn:CompensateEventDefinition"||b.type!=="bpmn:BoundaryEvent"){const y=w.outgoing.find(({target:_})=>fh(_));y&&y.target&&(v._connectionTarget=y.target)}else if(!$l(v.oldShape)&&b.eventDefinitionType==="bpmn:CompensateEventDefinition"&&b.type==="bpmn:BoundaryEvent"){const y=w.outgoing.find(({target:_})=>Gm(_));y&&y.target&&(v._connectionTarget=y.target),g(w)}}function l(v){const{_connectionTarget:b,newShape:w}=v;b&&t.connect(w,b)}function u(v){t.updateProperties(v,{isForCompensation:!0})}function d(v){t.updateProperties(v,{isForCompensation:void 0})}function h(v){for(const b of v.incoming)n.canConnect(b.source,v)||t.removeConnection(b);for(const b of v.outgoing)n.canConnect(v,b.target)||t.removeConnection(b)}function f(v,b){v.outgoing.filter(_=>C(_,"bpmn:Association")).filter(_=>fh(_.target)&&!b.includes(_)).forEach(_=>t.removeConnection(_))}function p(v){const b=v.attachers.slice();b.length&&t.removeElements(b)}function m(v){const b=v.incoming.filter(w=>$l(w.source));t.removeElements(b)}function g(v){const b=v.outgoing.filter(w=>C(w,"bpmn:SequenceFlow"));t.removeElements(b)}}Ie(PE,he);PE.$inject=["eventBus","modeling","bpmnRules"];function fh(e){const t=Ce(e);return t&&t.get("isForCompensation")}function $l(e){return e&&C(e,"bpmn:BoundaryEvent")&&gj(e,"bpmn:CompensateEventDefinition")}function Gm(e){return e&&C(e,"bpmn:Activity")&&!Er(e)}function kE(e){e.invoke(he,this),this.preExecute("shape.create",1500,function(t){var n=t.context,r=n.parent,i=n.shape;C(r,"bpmn:Lane")&&!C(i,"bpmn:Lane")&&(n.parent=td(r,"bpmn:Participant"))})}kE.$inject=["injector"];Ie(kE,he);function CE(e,t){he.call(this,e),this.preExecute("shape.create",function(n){var s;var r=n.context,i=r.shape;if(C(i,"bpmn:DataObjectReference")&&i.type!=="label"){var a=t.create("bpmn:DataObject");a.isCollection=((s=i.businessObject.dataObjectRef)==null?void 0:s.isCollection)||!1,i.businessObject.dataObjectRef=a}})}CE.$inject=["eventBus","bpmnFactory"];Ie(CE,he);var T1=20,O1=20,RB=30,Wm=2e3;function AE(e,t,n){he.call(this,t),t.on(["create.start","shape.move.start"],Wm,function(i){var a=i.context,s=a.shape,c=e.getRootElement();if(!(!C(s,"bpmn:Participant")||!C(c,"bpmn:Process")||!c.children.length)){var l=c.children.filter(function(h){return!C(h,"bpmn:Group")&&!Pt(h)&&!qt(h)});if(l.length){var u=$r(l),d=pSe(s,u);J(s,d),a.createConstraints=mSe(s,u)}}}),t.on("create.start",Wm,function(i){var a=i.context,s=a.shape,c=e.getRootElement(),l=e.getGraphics(c);function u(d){d.element=c,d.gfx=l}C(s,"bpmn:Participant")&&C(c,"bpmn:Process")&&(t.on("element.hover",Wm,u),t.once("create.cleanup",function(){t.off("element.hover",u)}))});function r(){var i=e.getRootElement();return C(i,"bpmn:Collaboration")?i:n.makeCollaboration()}this.preExecute("elements.create",Wm,function(i){var a=i.elements,s=i.parent,c=gSe(a),l;c&&C(s,"bpmn:Process")&&(i.parent=r(),l=i.hints=i.hints||{},l.participant=c,l.process=s,l.processRef=Ce(c).get("processRef"))},!0),this.preExecute("shape.create",function(i){var a=i.parent,s=i.shape;C(s,"bpmn:Participant")&&C(a,"bpmn:Process")&&(i.parent=r(),i.process=a,i.processRef=Ce(s).get("processRef"))},!0),this.execute("shape.create",function(i){var a=i.hints||{},s=i.process||a.process,c=i.shape,l=a.participant;s&&(!l||c===l)&&Ce(c).set("processRef",Ce(s))},!0),this.revert("shape.create",function(i){var a=i.hints||{},s=i.process||a.process,c=i.processRef||a.processRef,l=i.shape,u=a.participant;s&&(!u||l===u)&&Ce(l).set("processRef",c)},!0),this.postExecute("shape.create",function(i){var a=i.hints||{},s=i.process||i.hints.process,c=i.shape,l=a.participant;if(s){var u=s.children.slice();l?c===l&&n.moveElements(u,{x:0,y:0},l):n.moveElements(u,{x:0,y:0},c)}},!0)}AE.$inject=["canvas","eventBus","modeling"];Ie(AE,he);function pSe(e,t){t={width:t.width+T1*2+RB,height:t.height+O1*2};var n=Math.max(e.width,t.width),r=Math.max(e.height,t.height);return{x:-n/2,y:-r/2,width:n,height:r}}function mSe(e,t){return t=Ge(t),{bottom:t.top+e.height/2-O1,left:t.right-e.width/2+T1,top:t.bottom-e.height/2+O1,right:t.left+e.width/2-T1-RB}}function gSe(e){return dn(e,function(t){return C(t,"bpmn:Participant")})}var $O="__targetRef_placeholder";function TE(e,t){he.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],IO(a)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],IO(a));function n(s,c,l){var u=s.get("dataInputAssociations");return dn(u,function(d){return d!==l&&d.targetRef===c})}function r(s,c){var l=s.get("properties"),u=dn(l,function(d){return d.name===$O});return!u&&c&&(u=t.create("bpmn:Property",{name:$O}),qn(l,u)),u}function i(s,c){var l=r(s);l&&(n(s,l,c)||Dn(s.get("properties"),l))}function a(s){var c=s.context,l=c.connection,u=l.businessObject,d=l.target,h=d&&d.businessObject,f=c.newTarget,p=f&&f.businessObject,m=c.oldTarget||c.target,g=m&&m.businessObject,v=l.businessObject,b;g&&g!==h&&i(g,u),p&&p!==h&&i(p,u),h?(b=r(h,!0),v.targetRef=b):v.targetRef=null}}TE.$inject=["eventBus","bpmnFactory"];Ie(TE,he);function IO(e){return function(t){var n=t.context,r=n.connection;if(C(r,"bpmn:DataInputAssociation"))return e(t)}}function Ox(e){this._bpmnUpdater=e}Ox.$inject=["bpmnUpdater"];Ox.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.newSemanticParent,i=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};Ox.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.oldSemanticParent,i=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};function OE(e,t,n,r){he.call(this,r),t.registerHandler("dataStore.updateContainment",Ox);function i(){return n.filter(function(c){return C(c,"bpmn:Participant")&&Ce(c).processRef})[0]}function a(c){return c.children.filter(function(l){return C(l,"bpmn:DataStoreReference")&&!l.labelTarget})}function s(c,l){var u=c.businessObject||c;if(l=l||i(),l){var d=l.businessObject||l;t.execute("dataStore.updateContainment",{dataStoreBo:u,dataStoreDi:zt(c),newSemanticParent:d.processRef||d,newDiParent:zt(l)})}}this.preExecute("shape.create",function(c){var l=c.context,u=l.shape;C(u,"bpmn:DataStoreReference")&&u.type!=="label"&&(l.hints||(l.hints={}),l.hints.autoResize=!1)}),this.preExecute("elements.move",function(c){var l=c.context,u=l.shapes,d=u.filter(function(h){return C(h,"bpmn:DataStoreReference")});d.length&&(l.hints||(l.hints={}),l.hints.autoResize=u.filter(function(h){return!C(h,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(c){var l=c.context,u=l.shape,d=u.parent;C(u,"bpmn:DataStoreReference")&&u.type!=="label"&&C(d,"bpmn:Collaboration")&&s(u)}),this.postExecute("shape.move",function(c){var l=c.context,u=l.shape,d=l.oldParent,h=u.parent;if(!C(d,"bpmn:Collaboration")&&C(u,"bpmn:DataStoreReference")&&u.type!=="label"&&C(h,"bpmn:Collaboration")){var f=C(d,"bpmn:Participant")?d:ySe(d,"bpmn:Participant");s(u,f)}}),this.postExecute("shape.delete",function(c){var l=c.context,u=l.shape,d=e.getRootElement();ft(u,["bpmn:Participant","bpmn:SubProcess"])&&C(d,"bpmn:Collaboration")&&a(d).filter(function(h){return vSe(h,u)}).forEach(function(h){s(h)})}),this.postExecute("canvas.updateRoot",function(c){var l=c.context,u=l.oldRoot,d=l.newRoot,h=a(u);h.forEach(function(f){C(d,"bpmn:Process")&&s(f,d)})})}OE.$inject=["canvas","commandStack","elementRegistry","eventBus"];Ie(OE,he);function vSe(e,t){for(var n=e.businessObject||e,r=t.businessObject||t;n.$parent;){if(n.$parent===r.processRef||r)return!0;n=n.$parent}return!1}function ySe(e,t){for(;e.parent;){if(C(e.parent,t))return e.parent;e=e.parent}}var Wv=Math.max,qv=Math.min,xSe=20;function $B(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function bSe(e,t,n){var r=n.x,i=n.y,a={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(a.y=e.y+i,a.height=e.height-i):t.indexOf("s")!==-1&&(a.height=e.height+i),t.indexOf("e")!==-1?a.width=e.width+r:t.indexOf("w")!==-1&&(a.x=e.x+r,a.width=e.width-r),a}function wSe(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function qm(e,t,n){var r=t[e],i=n.min&&n.min[e],a=n.max&&n.max[e];return wt(i)&&(r=(/top|left/.test(e)?qv:Wv)(r,i)),wt(a)&&(r=(/top|left/.test(e)?Wv:qv)(r,a)),r}function _Se(e,t){if(!t)return e;var n=Ge(e);return pj({top:qm("top",n,t),right:qm("right",n,t),bottom:qm("bottom",n,t),left:qm("left",n,t)})}function jSe(e,t,n,r){var i=Ge(t),a={top:/n/.test(e)?i.bottom-n.height:i.top,left:/w/.test(e)?i.right-n.width:i.left,bottom:/s/.test(e)?i.top+n.height:i.bottom,right:/e/.test(e)?i.left+n.width:i.right},s=r?Ge(r):a,c={top:qv(a.top,s.top),left:qv(a.left,s.left),bottom:Wv(a.bottom,s.bottom),right:Wv(a.right,s.right)};return pj(c)}function ph(e,t){return typeof e<"u"?e:xSe}function SSe(e,t){var n,r,i,a;return typeof t=="object"?(n=ph(t.left),r=ph(t.right),i=ph(t.top),a=ph(t.bottom)):n=r=i=a=ph(t),{x:e.x-n,y:e.y-i,width:e.width+n+r,height:e.height+i+a}}function ESe(e){return!(e.waypoints||e.type==="label")}function IB(e,t){var n;if(e.length===void 0?n=St(e.children,ESe):n=e,n.length)return SSe($r(n),t)}var io=Math.abs;function NSe(e,t){return $B(Ge(t),Ge(e))}var PSe=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],Ai=30;function Rx(e,t){return t=t||[],e.children.filter(function(n){C(n,"bpmn:Lane")&&(Rx(n,t),t.push(n))}),t}function zo(e){return e.children.filter(function(t){return C(t,"bpmn:Lane")})}function Ri(e){return td(e,PSe)||e}function kSe(e,t){var n=Ri(e),r=C(n,"bpmn:Process")?[]:[n],i=Rx(n,r),a=Ge(e),s=Ge(t),c=NSe(e,t),l=[],u=dr(e);return i.forEach(function(d){if(d!==e){var h=u?0:c.top,f=u?c.right:0,p=u?0:c.bottom,m=u?c.left:0,g=Ge(d);c.top&&(io(g.bottom-a.top)<10&&(p=s.top-g.bottom),io(g.top-a.top)<5&&(h=s.top-g.top)),c.left&&(io(g.right-a.left)<10&&(f=s.left-g.right),io(g.left-a.left)<5&&(m=s.left-g.left)),c.bottom&&(io(g.top-a.bottom)<10&&(h=s.bottom-g.top),io(g.bottom-a.bottom)<5&&(p=s.bottom-g.bottom)),c.right&&(io(g.left-a.right)<10&&(m=s.right-g.left),io(g.right-a.right)<5&&(f=s.right-g.right)),(h||f||p||m)&&l.push({shape:d,newBounds:wSe(d,{top:h,right:f,bottom:p,left:m})})}}),l}var CSe=500;function RE(e,t){he.call(this,e);function n(r,i){var a=dr(r),s=zo(i),c=[],l=[],u=[],d=[];if(my(s,function(v){return a?v.y>r.y?l.push(v):c.push(v):v.x>r.x?d.push(v):u.push(v),v.children}),!!s.length){var h;a?l.length&&c.length?h=r.height/2:h=r.height:d.length&&u.length?h=r.width/2:h=r.width;var f,p,m,g;c.length&&(f=t.calculateAdjustments(c,"y",h,r.y-10),t.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:h},"s")),l.length&&(p=t.calculateAdjustments(l,"y",-h,r.y+r.height+10),t.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:-h},"n")),u.length&&(m=t.calculateAdjustments(u,"x",h,r.x-10),t.makeSpace(m.movingShapes,m.resizingShapes,{x:h,y:0},"e")),d.length&&(g=t.calculateAdjustments(d,"x",-h,r.x+r.width+10),t.makeSpace(g.movingShapes,g.resizingShapes,{x:-h,y:0},"w"))}}this.postExecuted("shape.delete",CSe,function(r){var i=r.context,a=i.hints,s=i.shape,c=i.oldParent;C(s,"bpmn:Lane")&&(a&&a.nested||n(s,c))})}RE.$inject=["eventBus","spaceTool"];Ie(RE,he);var MO=500;function $x(e,t){t.invoke(he,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",MO,function(r){var i=r.elements;i.filter(function(a){var s=a.host;return DO(a,s)}).map(function(a){return i.indexOf(a)}).forEach(function(a){r.elements[a]=n._replaceShape(i[a])})},!0),this.preExecute("elements.move",MO,function(r){var i=r.shapes,a=r.newHost;i.forEach(function(s,c){var l=s.host;DO(s,TSe(i,l)?l:a)&&(i[c]=n._replaceShape(s))})},!0)}$x.$inject=["bpmnReplace","injector"];Ie($x,he);$x.prototype._replaceShape=function(e){var t=ASe(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function ASe(e){var t=Ce(e),n=t.eventDefinitions;return n&&n[0]}function DO(e,t){return!Pt(e)&&C(e,"bpmn:BoundaryEvent")&&!t}function TSe(e,t){return e.indexOf(t)!==-1}function $E(e,t,n){he.call(this,e);function r(i,a,s){var c=a.waypoints,l,u,d,h,f,p,m,g=i.outgoing.slice(),v=i.incoming.slice(),b;wt(s.width)?b=Qe(s):b=s;var w=N1(c,b);if(w){if(l=c.slice(0,w.index),u=c.slice(w.index+(w.bendpoint?1:0)),!l.length||!u.length)return;d=w.bendpoint?c[w.index]:b,(l.length===1||!LO(i,l[l.length-1]))&&l.push(BO(d)),(u.length===1||!LO(i,u[0]))&&u.unshift(BO(d))}h=a.source,f=a.target,t.canConnect(h,i,a)&&(n.reconnectEnd(a,i,l||b),p=a),t.canConnect(i,f,a)&&(p?m=n.connect(i,f,{type:a.type,waypoints:u}):(n.reconnectStart(a,i,u||b),m=a));var y=[].concat(p&&St(v,function(_){return _.source===p.source})||[],m&&St(g,function(_){return _.target===m.target})||[]);y.length&&n.removeElements(y)}this.preExecute("elements.move",function(i){var a=i.newParent,s=i.shapes,c=i.delta,l=s[0];if(!(!l||!a)){a&&a.waypoints&&(i.newParent=a=a.parent);var u=Qe(l),d={x:u.x+c.x,y:u.y+c.y},h=dn(a.children,function(f){var p=t.canInsert(s,f);return p&&N1(f.waypoints,d)});h&&(i.targetFlow=h,i.position=d)}},!0),this.postExecuted("elements.move",function(i){var a=i.shapes,s=i.targetFlow,c=i.position;s&&r(a[0],s,c)},!0),this.preExecute("shape.create",function(i){var a=i.parent,s=i.shape;t.canInsert(s,a)&&(i.targetFlow=a,i.parent=a.parent)},!0),this.postExecuted("shape.create",function(i){var a=i.shape,s=i.targetFlow,c=i.position;s&&r(a,s,c)},!0)}Ie($E,he);$E.$inject=["eventBus","bpmnRules","modeling"];function LO(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function BO(e){return J({},e)}function IE(e,t){he.call(this,e),this.preExecuted("connection.create",function(n){var r=n.context,i=r.connection,a=r.source,s=r.target,c=r.hints;if(!(c&&c.createElementsBehavior===!1)&&Il(i)){var l=[];C(a,"bpmn:EventBasedGateway")?l=s.incoming.filter(u=>u!==i&&Il(u)):l=s.incoming.filter(u=>u!==i&&Il(u)&&C(u.source,"bpmn:EventBasedGateway")),l.forEach(function(u){t.removeConnection(u)})}}),this.preExecuted("shape.replace",function(n){var r=n.context,i=r.newShape;if(C(i,"bpmn:EventBasedGateway")){var a=i.outgoing.filter(Il).reduce(function(s,c){return s.includes(c.target)?s:s.concat(c.target)},[]);a.forEach(function(s){s.incoming.filter(Il).forEach(function(c){const l=s.incoming.filter(Il).filter(function(u){return u.source===i});(c.source!==i||l.length>1)&&t.removeConnection(c)})})}})}IE.$inject=["eventBus","modeling"];Ie(IE,he);function Il(e){return C(e,"bpmn:SequenceFlow")}var Km=1500,FO=2e3;function MB(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Km,function(r){var i=r.context,a=i.shape||r.shape,s=r.hover;C(s,"bpmn:Lane")&&!ft(a,["bpmn:Lane","bpmn:Participant"])&&(r.hover=Ri(s),r.hoverGfx=e.getGraphics(r.hover));var c=n.getRootElement();s!==c&&(a.labelTarget||ft(a,["bpmn:Group","bpmn:TextAnnotation"]))&&(r.hover=c,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Km,function(r){var i=r.hover;C(i,"bpmn:Lane")&&(r.hover=Ri(i)||i,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["bendpoint.move.hover"],Km,function(r){var i=r.context,a=r.hover,s=i.type;C(a,"bpmn:Lane")&&/reconnect/.test(s)&&(r.hover=Ri(a)||a,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.start"],Km,function(r){var i=r.context,a=i.start;C(a,"bpmn:Lane")&&(i.start=Ri(a)||a)}),t.on("shape.move.start",FO,function(r){var i=r.shape;C(i,"bpmn:Lane")&&(r.shape=Ri(i)||i)}),t.on("spaceTool.move",FO,function(r){var i=r.hover;i&&C(i,"bpmn:Lane")&&(r.hover=Ri(i))})}MB.$inject=["elementRegistry","eventBus","canvas"];function OSe(e){return e.create("bpmn:Category")}function RSe(e){return e.create("bpmn:CategoryValue")}function $Se(e,t,n){return qn(t.get("categoryValue"),e),e.$parent=t,qn(n.get("rootElements"),t),t.$parent=n,e}function ISe(e){var t=e.$parent;return t&&(Dn(t.get("categoryValue"),e),e.$parent=null),e}function MSe(e){var t=e.$parent;return t&&(Dn(t.get("rootElements"),e),e.$parent=null),e}var zO=770;function ME(e,t,n,r,i,a){i.invoke(he,this);function s(){return n.filter(function(m){return C(m,"bpmn:Group")})}function c(m,g){return m.some(function(v){var b=Ce(v),w=b.categoryValueRef&&b.categoryValueRef.$parent;return w===g})}function l(m,g){return m.some(function(v){var b=Ce(v);return b.categoryValueRef===g})}function u(m,g,v){var b=s().filter(function(w){return w.businessObject!==v});g&&!c(b,g)&&MSe(g),m&&!l(b,m)&&ISe(m)}function d(m,g){return $Se(m,g,t.getDefinitions())}function h(m,g){var v=Ce(m),b=v.categoryValueRef;b||(b=v.categoryValueRef=g.categoryValue=g.categoryValue||RSe(e));var w=b.$parent;w||(w=b.$parent=g.category=g.category||OSe(e)),d(b,w,t.getDefinitions())}function f(m,g){var v=g.category,b=g.categoryValue,w=Ce(m);b?(w.categoryValueRef=null,u(b,v,w)):u(null,w.categoryValueRef.$parent,w)}this.execute("label.create",function(m){var g=m.context,v=g.labelTarget;C(v,"bpmn:Group")&&h(v,g)}),this.revert("label.create",function(m){var g=m.context,v=g.labelTarget;C(v,"bpmn:Group")&&f(v,g)}),this.execute("shape.delete",function(m){var g=m.context,v=g.shape,b=Ce(v);if(!(!C(v,"bpmn:Group")||v.labelTarget)){var w=g.categoryValue=b.categoryValueRef,y;w&&(y=g.category=w.$parent,u(w,y,b),b.categoryValueRef=null)}}),this.reverted("shape.delete",function(m){var g=m.context,v=g.shape;if(!(!C(v,"bpmn:Group")||v.labelTarget)){var b=g.category,w=g.categoryValue,y=Ce(v);w&&(y.categoryValueRef=w,d(w,b))}}),this.execute("shape.create",function(m){var g=m.context,v=g.shape;!C(v,"bpmn:Group")||v.labelTarget||Ce(v).categoryValueRef&&h(v,g)}),this.reverted("shape.create",function(m){var g=m.context,v=g.shape;!C(v,"bpmn:Group")||v.labelTarget||Ce(v).categoryValueRef&&f(v,g)});function p(m,g){var v=e.create(m.$type);return a.copyElement(m,v,null,g)}r.on("copyPaste.copyElement",zO,function(m){var g=m.descriptor,v=m.element;if(!(!C(v,"bpmn:Group")||v.labelTarget)){var b=Ce(v);if(b.categoryValueRef){var w=b.categoryValueRef;g.categoryValue=p(w,!0),w.$parent&&(g.category=p(w.$parent,!0))}}}),r.on("copyPaste.pasteElement",zO,function(m){var g=m.descriptor,v=g.businessObject,b=g.categoryValue,w=g.category;b&&(b=v.categoryValueRef=p(b)),w&&(b.$parent=p(w)),delete g.category,delete g.categoryValue})}ME.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];Ie(ME,he);function R1(e,t,n,r){var i,a,s,c,l;return i=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y),i==0?null:(a=e.y-n.y,s=e.x-n.x,l=(r.x-n.x)*a-(r.y-n.y)*s,c=l/i,{x:Math.round(e.x+c*(t.x-e.x)),y:Math.round(e.y+c*(t.y-e.y))})}function DB(e){function t(r,i,a){var s={x:a.x,y:a.y-50},c={x:a.x-50,y:a.y},l=R1(r,i,a,s),u=R1(r,i,a,c),d;l&&u?UO(l,a)>UO(u,a)?d=u:d=l:d=l||u,r.original=d}function n(r){var i=r.waypoints;t(i[0],i[1],Qe(r.source)),t(i[i.length-1],i[i.length-2],Qe(r.target))}e.on("bpmnElement.added",function(r){var i=r.element;i.waypoints&&n(i)})}DB.$inject=["eventBus"];function UO(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function DE(e){he.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var r=n.context.shape,i=Ce(r),a=zt(r);if(ft(i,t)){var s=a.get("isHorizontal");s===void 0&&(s=!0),a.set("isHorizontal",s)}})}DE.$inject=["eventBus"];Ie(DE,he);var LB=Math.sqrt,BB=Math.min,DSe=Math.max,HO=Math.abs;function VO(e){return Math.pow(e,2)}function mh(e,t){return LB(VO(e.x-t.x)+VO(e.y-t.y))}function LSe(e,t){var n=0,r,i,a,s,c,l,u,d,h,f,p;for(n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],WO(r,i)?u=[r]:(a=mh(e,r),s=mh(e,i),l=BB(a,s),u=BSe(r,i,e,l)),u.length<1)throw new Error("expected between [1, 2] circle -> line intersections");u.length===1&&(d={type:"bendpoint",position:u[0],segmentIndex:n,bendpointIndex:WO(r,u[0])?n:n+1}),u.length===2&&(c=zSe(u[0],u[1]),d={type:"segment",position:c,segmentIndex:n,relativeLocation:mh(r,c)/mh(r,i)}),h=mh(d.position,e),(!p||f>h)&&(p=d,f=h)}return p}function BSe(e,t,n,r){var i=t.x-e.x,a=t.y-e.y,s=n.x-e.x,c=n.y-e.y,l=i*i+a*a,u=i*s+a*c,d=s*s+c*c-r*r,h=u/l,f=d/l,p=h*h-f;if(p<0&&p>-1e-6&&(p=0),p<0)return[];var m=LB(p),g=-h+m,v=-h-m,b={x:e.x-i*g,y:e.y-a*g};if(p===0)return[b];var w={x:e.x-i*v,y:e.y-a*v};return[b,w].filter(function(y){return FSe(y,e,t)})}function FSe(e,t,n){return GO(e.x,t.x,n.x)&&GO(e.y,t.y,n.y)}function GO(e,t,n){return e>=BB(t,n)-Kv&&e<=DSe(t,n)+Kv}function zSe(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var Kv=.1;function WO(e,t){return HO(e.x-t.x)<=Kv&&HO(e.y-t.y)<=Kv}function USe(e,t,n,r){var i=n.segmentIndex,a=t.length-e.length;if(r.segmentMove){var s=r.segmentMove.segmentStartIndex,c=r.segmentMove.newSegmentStartIndex;return i===s?c:i>=c?i+a<c?c:i+a:i}if(r.bendpointMove){var l=r.bendpointMove.insert,u=r.bendpointMove.bendpointIndex,d;if(a===0)return i;if(i>=u&&(d=l?i+1:i-1),i<u&&(d=i,l&&n.type!=="bendpoint"&&u-1===i)){var h=zB(t,u);h<n.relativeLocation&&d++}return d}return a===0?i:r.connectionStart&&i===0?0:r.connectionEnd&&i===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function FB(e,t,n,r){var i=0,a=0,s={point:e,delta:{x:0,y:0}},c=LSe(e,n),l=c.segmentIndex,u=USe(n,t,c,r);if(u<0||u>t.length-2||u===null)return s;var d=qO(n,l),h=qO(t,u),f=c.position,p=VSe(d,f),m=HSe(d,h);if(c.type==="bendpoint"){var g=t.length-n.length,v=c.bendpointIndex,b=n[v];if(t.indexOf(b)!==-1)return s;if(g===0){var w=t[v];return i=w.x-c.position.x,a=w.y-c.position.y,{delta:{x:i,y:a},point:{x:e.x+i,y:e.y+a}}}g<0&&v!==0&&v<n.length-1&&(p=zB(n,v))}var y={x:(h[1].x-h[0].x)*p+h[0].x,y:(h[1].y-h[0].y)*p+h[0].y},_=Rje({x:e.x-f.x,y:e.y-f.y},m);return i=y.x+_.x-e.x,a=y.y+_.y-e.y,{point:Vh(y),delta:Vh({x:i,y:a})}}function zB(e,t){var n=Vv(e[t-1],e[t]),r=Vv(e[t],e[t+1]),i=n/(n+r);return i}function HSe(e,t){var n=vO(e),r=vO(t);return r-n}function qO(e,t){return[e[t],e[t+1]]}function VSe(e,t){var n=Vv(e[0],e[1]),r=Vv(e[0],t);return n===0?0:r/n}function GSe(e,t,n,r){var i=Qe(e);return FB(i,t,n,r).delta}function Sp(e,t,n){var r=Fh(t),i=Fh(n),a=va(e,r),s={x:a.x*(n.width/t.width),y:a.y*(n.height/t.height)};return Vh({x:i.x+s.x,y:i.y+s.y})}function KO(e,t,n){var r=Fh(e),i=Fh(t),a=Fh(n),s=va(e,r),c=va(r,i),l=WSe(r,t,n);if(l)return l;var u={x:c.x*(n.width/t.width),y:c.y*(n.height/t.height)},d={x:a.x+u.x,y:a.y+u.y};return Vh({x:d.x+s.x-e.x,y:d.y+s.y-e.y})}function WSe(e,t,n){var r=Ge(t),i=Ge(n);if(qSe(r,i))return null;var a=vr(t,e),s,c,l;if(a==="top")s={x:0,y:i.bottom-r.bottom};else if(a==="bottom")s={x:0,y:i.top-r.top};else if(a==="right")s={x:i.left-r.left,y:0};else if(a==="left")s={x:i.right-r.right,y:0};else return null;return c={x:e.x+s.x,y:e.y+s.y},l=vr(n,c),l!==a?null:s}function qSe(e,t){return KSe(e,t)||YSe(e,t)}function KSe(e,t){return e.right!==t.right&&e.left!==t.left}function YSe(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var YO="name",XO="text";function LE(e,t,n,r){he.call(this,e),this.postExecute("element.updateProperties",i),this.postExecute("element.updateModdleProperties",s=>{Ce(s.context.element)===s.context.moddleElement&&i(s)});function i(s){var c=s.context,l=c.element,u=c.properties;if(YO in u&&t.updateLabel(l,u[YO]),XO in u&&C(l,"bpmn:TextAnnotation")){var d=r.getTextAnnotationBounds({x:l.x,y:l.y,width:l.width,height:l.height},u[XO]||"");t.updateLabel(l,u.text,d)}}this.postExecute(["shape.create","connection.create"],function(s){var c=s.context,l=c.hints||{};if(l.createElementsBehavior!==!1){var u=c.shape||c.connection;Pt(u)||!bu(u)||Vc(u)&&t.updateLabel(u,Vc(u))}}),this.postExecute("shape.delete",function(s){var c=s.context,l=c.labelTarget,u=c.hints||{};l&&u.unsetLabel!==!1&&t.updateLabel(l,null,null,{removeShape:!1})});function a(s){var c=s.context,l=c.connection,u=l.label,d=J({},c.hints),h=c.newWaypoints||l.waypoints,f=c.oldWaypoints;return typeof d.startChanged>"u"&&(d.startChanged=!!d.connectionStart),typeof d.endChanged>"u"&&(d.endChanged=!!d.connectionEnd),GSe(u,h,f,d)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(s){var c=s.context,l=c.hints||{};if(l.labelBehavior!==!1){var u=c.connection,d=u.label,h;!d||!d.parent||(h=a(s),t.moveShape(d,h))}}),this.postExecute(["shape.replace"],function(s){var c=s.context,l=c.newShape,u=c.oldShape,d=Ce(l);d&&bu(d)&&u.label&&l.label&&(l.label.x=u.label.x,l.label.y=u.label.y)}),this.postExecute("shape.resize",function(s){var c=s.context,l=c.shape,u=c.newBounds,d=c.oldBounds;if(py(l)){var h=l.label,f=Qe(h),p=JSe(d),m=ZSe(f,p),g=XSe(m,d,u);t.moveShape(h,g)}})}Ie(LE,he);LE.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function XSe(e,t,n){var r=Sp(e,t,n);return Vh(va(r,e))}function ZSe(e,t){if(t.length){var n=QSe(e,t);return yE(e,n)}}function JSe(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function QSe(e,t){var n=t.map(function(i){return{line:i,distance:vB(e,i)}}),r=Ps(n,"distance");return r[0].line}function eEe(e,t,n,r){return FB(e,t,n,r).point}function BE(e,t){he.call(this,e);function n(r,i){var a=r.context,s=a.connection,c=J({},a.hints),l=a.newWaypoints||s.waypoints,u=a.oldWaypoints;return typeof c.startChanged>"u"&&(c.startChanged=!!c.connectionStart),typeof c.endChanged>"u"&&(c.endChanged=!!c.connectionEnd),eEe(i,l,u,c)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(r){var i=r.context,a=i.connection,s=a.outgoing,c=a.incoming;c.forEach(function(l){var u=l.waypoints[l.waypoints.length-1],d=n(r,u),h=[].concat(l.waypoints.slice(0,-1),[d]);t.updateWaypoints(l,h)}),s.forEach(function(l){var u=l.waypoints[0],d=n(r,u),h=[].concat([d],l.waypoints.slice(1));t.updateWaypoints(l,h)})}),this.postExecute(["connection.move"],function(r){var i=r.context,a=i.connection,s=a.outgoing,c=a.incoming,l=i.delta;c.forEach(function(u){var d=u.waypoints[u.waypoints.length-1],h={x:d.x+l.x,y:d.y+l.y},f=[].concat(u.waypoints.slice(0,-1),[h]);t.updateWaypoints(u,f)}),s.forEach(function(u){var d=u.waypoints[0],h={x:d.x+l.x,y:d.y+l.y},f=[].concat([h],u.waypoints.slice(1));t.updateWaypoints(u,f)})})}Ie(BE,he);BE.$inject=["eventBus","modeling"];function Ix(e,t,n){var r=Dx(e),i=HB(r,t),a=r[0];return i.length?i[i.length-1]:Sp(a.original||a,n,t)}function Mx(e,t,n){var r=Dx(e),i=HB(r,t),a=r[r.length-1];return i.length?i[0]:Sp(a.original||a,n,t)}function FE(e,t,n){var r=Dx(e),i=UB(t,n),a=r[0];return Sp(a.original||a,i,t)}function zE(e,t,n){var r=Dx(e),i=UB(t,n),a=r[r.length-1];return Sp(a.original||a,i,t)}function UB(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function Dx(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function HB(e,t){var n=gi(e,nEe);return St(n,function(r){return tEe(r,t)})}function tEe(e,t){return vr(t,e,1)==="intersect"}function nEe(e){return e.original||e}function UE(e,t){he.call(this,e),this.postExecute("shape.replace",function(n){var r=n.oldShape,i=n.newShape;if(rEe(r,i)){var a=iEe(r);a.incoming.forEach(function(s){var c=Mx(s,i,r);t.reconnectEnd(s,i,c)}),a.outgoing.forEach(function(s){var c=Ix(s,i,r);t.reconnectStart(s,i,c)})}},!0)}UE.$inject=["eventBus","modeling"];Ie(UE,he);function rEe(e,t){return C(e,"bpmn:Participant")&&$t(e)&&C(t,"bpmn:Participant")&&!$t(t)}function iEe(e){var t=rp([e],!1),n=[],r=[];return t.forEach(function(i){i!==e&&(i.incoming.forEach(function(a){C(a,"bpmn:MessageFlow")&&n.push(a)}),i.outgoing.forEach(function(a){C(a,"bpmn:MessageFlow")&&r.push(a)}))},[]),{incoming:n,outgoing:r}}const aEe=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function VB(e){const t=Ce(e);if(!C(t,"bpmn:BoundaryEvent")&&!(C(t,"bpmn:StartEvent")&&Er(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:aEe.some(r=>C(n[0],r))}function GB(e){return C(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function HE(e,t){e.invoke(he,this),this.postExecuted("shape.replace",function(n){const r=n.context.oldShape,i=n.context.newShape,a=n.context.hints;if(!VB(i))return;const s=GB(i);if(a.targetElement&&a.targetElement[s]!==void 0)return;const l=Ce(r).get(s),u=Ce(i).get(s);l!==u&&t.updateProperties(i,{[s]:l})})}HE.$inject=["injector","modeling"];Ie(HE,he);function VE(e,t){he.call(this,e),this.preExecute("shape.resize",function(n){var r=n.shape,i=zt(r),a=i&&i.get("label"),s=a&&a.get("bounds");s&&t.updateModdleProperties(r,a,{bounds:void 0})},!0)}Ie(VE,he);VE.$inject=["eventBus","modeling"];function GE(e,t,n){he.call(this,e),this.preExecute("shape.delete",function(r){var i=r.context.shape;if(!(i.incoming.length!==1||i.outgoing.length!==1)){var a=i.incoming[0],s=i.outgoing[0];if(!(!C(a,"bpmn:SequenceFlow")||!C(s,"bpmn:SequenceFlow"))&&t.canConnect(a.source,s.target,a)){var c=sEe(a.waypoints,s.waypoints);n.reconnectEnd(a,s.target,c)}}})}Ie(GE,he);GE.$inject=["eventBus","bpmnRules","modeling"];function Ml(e){return e.original||e}function sEe(e,t){var n=R1(Ml(e[e.length-2]),Ml(e[e.length-1]),Ml(t[1]),Ml(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[Ml(e[0]),Ml(t[t.length-1])]}function WE(e,t){he.call(this,e),this.preExecute("shape.delete",function(n){var r=n.shape,i=r.parent;C(r,"bpmn:Participant")&&(n.collaborationRoot=i)},!0),this.postExecute("shape.delete",function(n){var r=n.collaborationRoot;if(r&&!r.businessObject.participants.length){var i=t.makeProcess(),a=r.children.slice();t.moveElements(a,{x:0,y:0},i)}},!0)}WE.$inject=["eventBus","modeling"];Ie(WE,he);function qE(e,t,n,r){he.call(this,e);var i=r.get("dragging",!1);function a(l){var u=l.source,d=l.target,h=l.parent;if(h){var f,p;C(l,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(u,d)||(p=!0),n.canConnectMessageFlow(u,d)&&(f="bpmn:MessageFlow")),C(l,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(u,d)||(p=!0),n.canConnectSequenceFlow(u,d)&&(f="bpmn:SequenceFlow")),p&&t.removeConnection(l),f&&t.connect(u,d,{type:f,waypoints:l.waypoints.slice()})}}function s(l){var u=l.context,d=u.connection,h=u.newSource||d.source,f=u.newTarget||d.target,p,m;p=n.canConnect(h,f),!(!p||p.type===d.type)&&(m=t.connect(h,f,{type:p.type,associationDirection:p.associationDirection,waypoints:d.waypoints.slice()}),d.parent&&t.removeConnection(d),u.connection=m,i&&c(d,m))}function c(l,u){var d=i.context(),h=d&&d.payload.previousSelection,f;!h||!h.length||(f=h.indexOf(l),f!==-1&&h.splice(f,1,u))}this.postExecuted("elements.move",function(l){var u=l.closure,d=u.allConnections;q(d,a)},!0),this.preExecute("connection.reconnect",s),this.postExecuted("element.updateProperties",function(l){var u=l.context,d=u.properties,h=u.element,f=h.businessObject,p;d.default&&(p=dn(h.outgoing,xs({id:h.businessObject.default.id})),p&&t.updateProperties(p,{conditionExpression:void 0})),d.conditionExpression&&f.sourceRef.default===f&&t.updateProperties(h.source,{default:void 0})})}Ie(qE,he);qE.$inject=["eventBus","modeling","bpmnRules","injector"];function Lx(e,t,n,r,i,a){r.invoke(he,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=a,this.postExecuted(["elements.create"],500,function(s){var c=s.context,l=c.parent,u=c.elements,d=$o(u,function(h,f){var p=t.canReplace([f],f.host||f.parent||l);return p?h.concat(p.replacements):h},[]);d.length&&this._replaceElements(u,d)},this),this.postExecuted(["elements.move"],500,function(s){var c=s.context,l=c.newParent,u=c.newHost,d=[];q(c.closure.topLevel,function(f){Er(f)?d=d.concat(f.children):d=d.concat(f)}),d.length===1&&u&&(l=u);var h=t.canReplace(d,l);h&&this._replaceElements(d,h.replacements,u)},this),this.postExecute(["shape.replace"],1500,function(s){var c=s.context,l=c.oldShape,u=c.newShape,d=l.attachers,h;d&&d.length&&(h=t.canReplace(d,u),this._replaceElements(d,h.replacements))},this),this.postExecuted(["shape.replace"],1500,function(s){var c=s.context,l=c.oldShape,u=c.newShape;i.unclaimId(l.businessObject.id,l.businessObject),i.updateProperties(u,{id:l.id})})}Ie(Lx,he);Lx.prototype._replaceElements=function(e,t){var n=this._elementRegistry,r=this._bpmnReplace,i=this._selection;q(t,function(a){var s={type:a.newElementType},c=n.get(a.oldElementId),l=e.indexOf(c);e[l]=r.replaceElement(c,s,{select:!1})}),t&&i.select(e)};Lx.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var oEe=1500,cEe={width:140,height:120},KE={width:300,height:60},YE={width:60,height:300},gg={width:300,height:150},vg={width:150,height:300},WB={width:140,height:120},qB={width:50,height:30};function KB(e){e.on("resize.start",oEe,function(t){var n=t.context,r=n.shape,i=n.direction,a=n.balanced;(C(r,"bpmn:Lane")||C(r,"bpmn:Participant"))&&(n.resizeConstraints=fEe(r,i,a)),C(r,"bpmn:SubProcess")&&$t(r)&&(n.minDimensions=WB),C(r,"bpmn:TextAnnotation")&&(n.minDimensions=qB)})}KB.$inject=["eventBus"];var ao=Math.abs,lEe=Math.min,uEe=Math.max;function YB(e,t,n,r){var i=e[t];e[t]=i===void 0?n:r(n,i)}function Dl(e,t,n){return YB(e,t,n,lEe)}function Ll(e,t,n){return YB(e,t,n,uEe)}var dEe={top:20,left:50,right:20,bottom:20},hEe={top:50,left:20,right:20,bottom:20};function fEe(e,t,n){var r=Ri(e),i=!0,a=!0,s=Rx(r,[r]),c=Ge(e),l={},u={},d=dr(e),h=d?KE:YE;/n/.test(t)?u.top=c.bottom-h.height:/e/.test(t)?u.right=c.left+h.width:/s/.test(t)?u.bottom=c.top+h.height:/w/.test(t)&&(u.left=c.right-h.width),s.forEach(function(m){var g=Ge(m);d?(g.top<c.top-10&&(i=!1),g.bottom>c.bottom+10&&(a=!1)):(g.left<c.left-10&&(i=!1),g.right>c.right+10&&(a=!1)),/n/.test(t)&&(n&&ao(c.top-g.bottom)<10&&Ll(l,"top",g.top+h.height),ao(c.top-g.top)<5&&Dl(u,"top",g.bottom-h.height)),/e/.test(t)&&(n&&ao(c.right-g.left)<10&&Dl(l,"right",g.right-h.width),ao(c.right-g.right)<5&&Ll(u,"right",g.left+h.width)),/s/.test(t)&&(n&&ao(c.bottom-g.top)<10&&Dl(l,"bottom",g.bottom-h.height),ao(c.bottom-g.bottom)<5&&Ll(u,"bottom",g.top+h.height)),/w/.test(t)&&(n&&ao(c.left-g.right)<10&&Ll(l,"left",g.left+h.width),ao(c.left-g.left)<5&&Dl(u,"left",g.right-h.width))});var f=r.children.filter(function(m){return!m.hidden&&!m.waypoints&&(C(m,"bpmn:FlowElement")||C(m,"bpmn:Artifact"))}),p=d?dEe:hEe;return f.forEach(function(m){var g=Ge(m);/n/.test(t)&&(!d||i)&&Dl(u,"top",g.top-p.top),/e/.test(t)&&(d||a)&&Ll(u,"right",g.right+p.right),/s/.test(t)&&(!d||a)&&Ll(u,"bottom",g.bottom+p.bottom),/w/.test(t)&&(d||i)&&Dl(u,"left",g.left-p.left)}),{min:u,max:l}}var ZO=1001;function XB(e,t){e.on("resize.start",ZO+500,function(n){var r=n.context,i=r.shape;(C(i,"bpmn:Lane")||C(i,"bpmn:Participant"))&&(r.balanced=!Gh(n))}),e.on("resize.end",ZO,function(n){var r=n.context,i=r.shape,a=r.canExecute,s=r.newBounds;if(C(i,"bpmn:Lane")||C(i,"bpmn:Participant"))return a&&(s=xI(s),t.resizeLane(i,s,r.balanced)),!1})}XB.$inject=["eventBus","modeling"];var pEe=500;function XE(e,t,n,r,i){n.invoke(he,this);function a(d){return ft(d,["bpmn:ReceiveTask","bpmn:SendTask"])||mEe(d,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function s(d){var h=e.getDefinitions(),f=h.get("rootElements");return!!dn(f,xs({id:d.id}))}function c(d){if(C(d,"bpmn:ErrorEventDefinition"))return"errorRef";if(C(d,"bpmn:EscalationEventDefinition"))return"escalationRef";if(C(d,"bpmn:MessageEventDefinition"))return"messageRef";if(C(d,"bpmn:SignalEventDefinition"))return"signalRef"}function l(d){if(ft(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.get("messageRef");var h=d.get("eventDefinitions"),f=h[0];return f.get(c(f))}function u(d,h){if(ft(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.set("messageRef",h);var f=d.get("eventDefinitions"),p=f[0];return p.set(c(p),h)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(d){var h=d.shape||d.element;if(a(h)){var f=Ce(h),p=l(f),m;p&&!s(p)&&(m=e.getDefinitions().get("rootElements"),qn(m,p),d.addedRootElement=p)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(d){var h=d.addedRootElement;if(h){var f=e.getDefinitions().get("rootElements");Dn(f,h)}},!0),t.on("copyPaste.copyElement",function(d){var h=d.descriptor,f=d.element;if(!(f.labelTarget||!a(f))){var p=Ce(f),m=l(p);m&&(h.referencedRootElement=m)}}),t.on("copyPaste.pasteElement",pEe,function(d){var h=d.descriptor,f=h.businessObject,p=h.referencedRootElement;p&&(s(p)||(p=r.copyElement(p,i.create(p.$type))),u(f,p),delete h.referencedRootElement)})}XE.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];Ie(XE,he);function mEe(e,t){return _t(t)||(t=[t]),ip(t,function(n){return gj(e,n)})}var ZB=Math.max;function JB(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,r=t.axis,i=t.start,a={};return q(n,function(s){var c=s.id;C(s,"bpmn:Participant")&&(a[c]=vEe(s,r,i)),C(s,"bpmn:Lane")&&(a[c]=dr(s)?KE:YE),C(s,"bpmn:SubProcess")&&$t(s)&&(a[c]=WB),C(s,"bpmn:TextAnnotation")&&(a[c]=qB),C(s,"bpmn:Group")&&(a[c]=cEe)}),a})}JB.$inject=["eventBus"];function gEe(e){return e==="x"}function vEe(e,t,n){var r=dr(e);if(!bEe(e))return r?gg:vg;var i=gEe(t),a={};return i?r?a=gg:a={width:xEe(e,n,i),height:vg.height}:r?a={width:gg.width,height:yEe(e,n,i)}:a=vg,a}function yEe(e,t,n){var r;return r=wEe(e,t,n),ZB(gg.height,r)}function xEe(e,t,n){var r;return r=_Ee(e,t,n),ZB(vg.width,r)}function bEe(e){return!!zo(e).length}function wEe(e,t,n){var r=zo(e),i;return i=ZE(r,t,n),e.height-i.height+KE.height}function _Ee(e,t,n){var r=zo(e),i;return i=ZE(r,t,n),e.width-i.width+YE.width}function ZE(e,t,n){var r,i,a;for(r=0;r<e.length;r++)if(i=e[r],!n&&t>=i.y&&t<=i.y+i.height||n&&t>=i.x&&t<=i.x+i.width)return a=zo(i),a.length?ZE(a,t,n):i}var JO=400,jEe=600,QO={x:180,y:160};function Uo(e,t,n,r,i,a,s){he.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=r,this._bpmnFactory=i,this._bpmnjs=a,this._elementRegistry=s;var c=this;function l(h){return C(h,"bpmn:SubProcess")&&!$t(h)}function u(h){var f=h.shape,p=h.newRootElement,m=Ce(f);p=c._addDiagram(p||m),h.newRootElement=e.addRootElement(p)}function d(h){var f=h.shape,p=Ce(f);c._removeDiagram(p);var m=h.newRootElement=s.get(Bl(p));e.removeRootElement(m)}this.executed("shape.create",function(h){var f=h.shape;l(f)&&u(h)},!0),this.postExecuted("shape.create",function(h){var f=h.shape,p=h.newRootElement;!p||!f.children||(c._showRecursively(f.children),c._moveChildrenToShape(f,p))},!0),this.reverted("shape.create",function(h){var f=h.shape;l(f)&&d(h)},!0),this.preExecuted("shape.delete",function(h){var f=h.shape;if(l(f)){var p=s.get(Bl(f));p&&n.removeElements(p.children.slice())}},!0),this.executed("shape.delete",function(h){var f=h.shape;l(f)&&d(h)},!0),this.reverted("shape.delete",function(h){var f=h.shape;l(f)&&u(h)},!0),this.preExecuted("shape.replace",function(h){var f=h.oldShape,p=h.newShape;!l(f)||!l(p)||(h.oldRoot=e.removeRootElement(Bl(f)))},!0),this.postExecuted("shape.replace",function(h){var f=h.newShape,p=h.oldRoot,m=e.findRoot(Bl(f));if(!(!p||!m)){var g=p.children;n.moveElements(g,{x:0,y:0},m)}},!0),this.executed("element.updateProperties",function(h){var f=h.element;if(C(f,"bpmn:SubProcess")){var p=h.properties,m=h.oldProperties,g=m.id,v=p.id;if(g!==v){if(cg(f)){s.updateId(f,ec(v)),s.updateId(g,v);return}var b=s.get(ec(g));b&&s.updateId(ec(g),ec(v))}}},!0),this.reverted("element.updateProperties",function(h){var f=h.element;if(C(f,"bpmn:SubProcess")){var p=h.properties,m=h.oldProperties,g=m.id,v=p.id;if(g!==v){if(cg(f)){s.updateId(f,ec(g)),s.updateId(v,g);return}var b=s.get(ec(v));b&&s.updateId(b,ec(g))}}},!0),t.on("element.changed",function(h){var f=h.element;if(cg(f)){var p=f,m=s.get(SP(p));!m||m===p||t.fire("element.changed",{element:m})}}),this.executed("shape.toggleCollapse",JO,function(h){var f=h.shape;C(f,"bpmn:SubProcess")&&($t(f)?d(h):(u(h),c._showRecursively(f.children)))},!0),this.reverted("shape.toggleCollapse",JO,function(h){var f=h.shape;C(f,"bpmn:SubProcess")&&($t(f)?d(h):(u(h),c._showRecursively(f.children)))},!0),this.postExecuted("shape.toggleCollapse",jEe,function(h){var f=h.shape;if(C(f,"bpmn:SubProcess")){var p=h.newRootElement;p&&($t(f)?c._moveChildrenToShape(p,f):c._moveChildrenToShape(f,p))}},!0),t.on("copyPaste.createTree",function(h){var f=h.element,p=h.children;if(l(f)){var m=Bl(f),g=s.get(m);g&&p.push.apply(p,g.children)}}),t.on("copyPaste.copyElement",function(h){var f=h.descriptor,p=h.element,m=h.elements,g=p.parent,v=C(zt(g),"bpmndi:BPMNPlane");if(v){var b=SP(g),w=dn(m,function(y){return y.id===b});w&&(f.parent=w.id)}}),t.on("copyPaste.pasteElement",function(h){var f=h.descriptor;f.parent&&(l(f.parent)||f.parent.hidden)&&(f.hidden=!0)})}Ie(Uo,he);Uo.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,r=e.children,i;if(r){r=r.concat(r.reduce(function(u,d){return d.label&&d.label.parent!==e?u.concat(d.label):u},[]));var a=r.filter(function(u){return!u.hidden});if(!a.length){n.moveElements(r,{x:0,y:0},t,{autoResize:!1});return}var s=$r(a);if(!t.x)i={x:QO.x-s.x,y:QO.y-s.y};else{var c=Qe(t),l=Qe(s);i={x:c.x-l.x,y:c.y-l.y}}n.moveElements(r,i,t,{autoResize:!1})}};Uo.prototype._showRecursively=function(e,t){var n=this,r=[];return e.forEach(function(i){i.hidden=!!t,r=r.concat(i),i.children&&(r=r.concat(n._showRecursively(i.children,i.collapsed||t)))}),r};Uo.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};Uo.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,r=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),i=t.create("bpmndi:BPMNDiagram",{plane:r});r.$parent=i;var a=n.createRoot({id:Bl(e),type:e.$type,di:r,businessObject:e,collapsed:!0});return a};Uo.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,r=dn(n,function(i){return i.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(r),1),r};Uo.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function JE(e,t){e.invoke(he,this),this.postExecuted("shape.replace",function(n){var r=n.context.oldShape,i=n.context.newShape;if(!(!C(i,"bpmn:SubProcess")||C(i,"bpmn:AdHocSubProcess")||!(C(r,"bpmn:Task")||C(r,"bpmn:CallActivity"))||!$t(i))){var a=SEe(i);t.createShape({type:"bpmn:StartEvent"},a,i)}})}JE.$inject=["injector","modeling"];Ie(JE,he);function SEe(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function QE(e){he.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;C(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&C(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}Ie(QE,he);QE.$inject=["eventBus"];function eN(e,t){he.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var r=n.shape;if($t(r))return;var i=rp(r);i.forEach(function(s){var c=s.incoming.slice(),l=s.outgoing.slice();q(c,function(u){a(u,!0)}),q(l,function(u){a(u,!1)})});function a(s,c){i.indexOf(s.source)!==-1&&i.indexOf(s.target)!==-1||(c?t.reconnectEnd(s,r,Qe(r)):t.reconnectStart(s,r,Qe(r)))}},!0)}Ie(eN,he);eN.$inject=["eventBus","modeling"];var Z0=500;function tN(e,t,n){he.call(this,e);function r(s){s.length&&s.forEach(function(c){c.type==="label"&&!c.businessObject.name&&(c.hidden=!0)})}function i(s,c){var l=s.children,u=c,d,h;return d=EEe(l).concat([s]),h=IB(d),h?(u.width=Math.max(h.width,u.width),u.height=Math.max(h.height,u.height),u.x=h.x+(h.width-u.width)/2,u.y=h.y+(h.height-u.height)/2):(u.x=s.x+(s.width-u.width)/2,u.y=s.y+(s.height-u.height)/2),u}function a(s,c){return{x:s.x+(s.width-c.width)/2,y:s.y+(s.height-c.height)/2,width:c.width,height:c.height}}this.executed(["shape.toggleCollapse"],Z0,function(s){var c=s.context,l=c.shape;C(l,"bpmn:SubProcess")&&(l.collapsed?zt(l).isExpanded=!1:(r(l.children),zt(l).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],Z0,function(s){var c=s.context,l=c.shape;l.collapsed?zt(l).isExpanded=!1:zt(l).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],Z0,function(s){var c=s.context.shape,l=t.getDefaultSize(c),u;c.collapsed?u=a(c,l):u=i(c,l),n.resizeShape(c,u,null,{autoResize:c.collapsed?!1:"nwse"})})}Ie(tN,he);tN.$inject=["eventBus","elementFactory","modeling"];function EEe(e){return e.filter(function(t){return!t.hidden})}function nN(e,t,n,r){t.invoke(he,this),this.preExecute("shape.delete",function(i){var a=i.context,s=a.shape,c=s.businessObject;Pt(s)||(C(s,"bpmn:Participant")&&$t(s)&&n.ids.unclaim(c.processRef.id),r.unclaimId(c.id,c))}),this.preExecute("connection.delete",function(i){var a=i.context,s=a.connection,c=s.businessObject;r.unclaimId(c.id,c)}),this.preExecute("canvas.updateRoot",function(){var i=e.getRootElement(),a=i.businessObject;C(i,"bpmn:Collaboration")&&n.ids.unclaim(a.id)})}Ie(nN,he);nN.$inject=["canvas","injector","moddle","modeling"];function rN(e,t){he.call(this,e),this.preExecute("connection.delete",function(n){var r=n.context,i=r.connection,a=i.source;NEe(i,a)&&t.updateProperties(a,{default:null})})}Ie(rN,he);rN.$inject=["eventBus","modeling"];function NEe(e,t){if(!C(e,"bpmn:SequenceFlow"))return!1;var n=Ce(t),r=Ce(e);return n.get("default")===r}var PEe=500,kEe=5e3;function iN(e,t){he.call(this,e);var n;function r(){return n=n||new CEe,n.enter(),n}function i(){if(!n)throw new Error("out of bounds release");return n}function a(){if(!n)throw new Error("out of bounds release");var c=n.leave();return c&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),c}var s=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(s,kEe,function(c){r()}),this.postExecuted(s,PEe,function(c){a()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(c){var l=c.context,u=l.shape,d=i();u.labelTarget||(C(u,"bpmn:Lane")&&d.addLane(u),C(u,"bpmn:FlowNode")&&d.addFlowNode(u))})}iN.$inject=["eventBus","modeling"];Ie(iN,he);function CEe(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function aN(e,t){he.call(this,e),this.postExecuted("elements.create",function(n){const r=n.context,i=r.elements;for(const a of i)AEe(a)&&!OEe(a)&&t.updateProperties(a,{isForCompensation:void 0})})}Ie(aN,he);aN.$inject=["eventBus","modeling"];function AEe(e){const t=Ce(e);return t&&t.isForCompensation}function TEe(e){return e&&C(e,"bpmn:BoundaryEvent")&&gj(e,"bpmn:CompensateEventDefinition")}function OEe(e){return e.incoming.filter(n=>TEe(n.source)).length>0}const REe={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",jE],appendBehavior:["type",SE],associationBehavior:["type",EE],attachEventBehavior:["type",Tx],boundaryEventBehavior:["type",NE],compensateBoundaryEventBehaviour:["type",PE],createBehavior:["type",kE],createDataObjectBehavior:["type",CE],createParticipantBehavior:["type",AE],dataInputAssociationBehavior:["type",TE],dataStoreBehavior:["type",OE],deleteLaneBehavior:["type",RE],detachEventBehavior:["type",$x],dropOnFlowBehavior:["type",$E],eventBasedGatewayBehavior:["type",IE],fixHoverBehavior:["type",MB],groupBehavior:["type",ME],importDockingFix:["type",DB],isHorizontalFix:["type",DE],labelBehavior:["type",LE],layoutConnectionBehavior:["type",BE],messageFlowBehavior:["type",UE],nonInterruptingBehavior:["type",HE],removeElementBehavior:["type",GE],removeEmbeddedLabelBoundsBehavior:["type",VE],removeParticipantBehavior:["type",WE],replaceConnectionBehavior:["type",qE],replaceElementBehaviour:["type",Lx],resizeBehavior:["type",KB],resizeLaneBehavior:["type",XB],rootElementReferenceBehavior:["type",XE],spaceToolBehavior:["type",JB],subProcessPlaneBehavior:["type",Uo],subProcessStartEventBehavior:["type",JE],textAnnotationBehavior:["type",QE],toggleCollapseConnectionBehaviour:["type",eN],toggleElementCollapseBehaviour:["type",tN],unclaimIdBehavior:["type",nN],unsetDefaultFlowBehavior:["type",rN],updateFlowNodeRefsBehavior:["type",iN],setCompensationActivityAfterPasteBehavior:["type",aN]};function QB(e,t){var n=vr(e,t,-15);return n!=="intersect"?n:null}function fr(e){qi.call(this,e)}Ie(fr,qi);fr.$inject=["eventBus"];fr.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return $Ee(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,r=e.hints||{},i=r.targetParent,a=r.targetAttach;if(a)return!1;i&&(n.parent=i);try{return yg(t,n)}finally{i&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,r=e.target;return yg(n,r,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return cF(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,r=e.target;return qt(r)&&!Yv(t,r)?!1:cy(t,function(i){return qt(i)?yg(i.source,i.target,i):i.host?zh(i,i.host,null,n):D1(i,r,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,r=e.position;return zh(n,t,null,r)||sF(n,t,r)||oF(n,t)||Yv(n,t)}),this.addRule("shape.create",function(e){return D1(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return zh(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return fF(n,t)})};fr.prototype.canConnectMessageFlow=dF;fr.prototype.canConnectSequenceFlow=hF;fr.prototype.canConnectDataAssociation=oN;fr.prototype.canConnectAssociation=lF;fr.prototype.canConnectCompensationAssociation=uF;fr.prototype.canMove=oF;fr.prototype.canAttach=zh;fr.prototype.canReplace=sF;fr.prototype.canDrop=rd;fr.prototype.canInsert=Yv;fr.prototype.canCreate=D1;fr.prototype.canConnect=yg;fr.prototype.canResize=cF;fr.prototype.canCopy=fF;function $Ee(e){return $1(e)?null:ft(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function $1(e){return!e||Pt(e)}function IEe(e,t){return e===t}function eR(e){do{if(C(e,"bpmn:Process"))return Ce(e);if(C(e,"bpmn:Participant"))return Ce(e).processRef||Ce(e)}while(e=e.parent)}function I1(e){return C(e,"bpmn:TextAnnotation")}function sN(e){return C(e,"bpmn:Group")&&!e.labelTarget}function eF(e){return C(e,"bpmn:BoundaryEvent")&&$a(e,"bpmn:CompensateEventDefinition")}function Bx(e){return Ce(e).isForCompensation}function MEe(e,t){var n=eR(e),r=eR(t);return n===r}function DEe(e){return C(e,"bpmn:InteractionNode")&&!C(e,"bpmn:BoundaryEvent")&&(!C(e,"bpmn:Event")||C(e,"bpmn:ThrowEvent")&&nF(e,"bpmn:MessageEventDefinition"))}function LEe(e){return C(e,"bpmn:InteractionNode")&&!Bx(e)&&(!C(e,"bpmn:Event")||C(e,"bpmn:CatchEvent")&&nF(e,"bpmn:MessageEventDefinition"))&&!(C(e,"bpmn:BoundaryEvent")&&!$a(e,"bpmn:MessageEventDefinition"))}function tR(e){for(var t=e;t=t.parent;){if(C(t,"bpmn:FlowElementsContainer"))return Ce(t);if(C(t,"bpmn:Participant"))return Ce(t).processRef}return null}function tF(e,t){var n=tR(e),r=tR(t);return n===r}function $a(e,t){var n=Ce(e);return!!dn(n.eventDefinitions||[],function(r){return C(r,t)})}function nF(e,t){var n=Ce(e);return(n.eventDefinitions||[]).every(function(r){return C(r,t)})}function BEe(e){return C(e,"bpmn:FlowNode")&&!C(e,"bpmn:EndEvent")&&!Er(e)&&!(C(e,"bpmn:IntermediateThrowEvent")&&$a(e,"bpmn:LinkEventDefinition"))&&!eF(e)&&!Bx(e)}function FEe(e){return C(e,"bpmn:FlowNode")&&!C(e,"bpmn:StartEvent")&&!C(e,"bpmn:BoundaryEvent")&&!Er(e)&&!(C(e,"bpmn:IntermediateCatchEvent")&&$a(e,"bpmn:LinkEventDefinition"))&&!Bx(e)}function zEe(e){return C(e,"bpmn:ReceiveTask")||C(e,"bpmn:IntermediateCatchEvent")&&($a(e,"bpmn:MessageEventDefinition")||$a(e,"bpmn:TimerEventDefinition")||$a(e,"bpmn:ConditionalEventDefinition")||$a(e,"bpmn:SignalEventDefinition"))}function UEe(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function M1(e,t){var n=UEe(t);return n.indexOf(e)!==-1}function yg(e,t,n){if($1(e)||$1(t))return null;if(!C(n,"bpmn:DataAssociation")){if(dF(e,t))return{type:"bpmn:MessageFlow"};if(hF(e,t))return{type:"bpmn:SequenceFlow"}}var r=oN(e,t);return r||(uF(e,t)?{type:"bpmn:Association",associationDirection:"One"}:lF(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function rd(e,t){return Pt(e)||sN(e)?!0:C(t,"bpmn:Participant")&&!$t(t)?!1:C(e,"bpmn:Participant")?C(t,"bpmn:Process")||C(t,"bpmn:Collaboration"):ft(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:C(e,"bpmn:Lane")?C(t,"bpmn:Participant")||C(t,"bpmn:Lane"):C(e,"bpmn:BoundaryEvent")&&!HEe(e)?!1:C(e,"bpmn:FlowElement")&&!C(e,"bpmn:DataStoreReference")?C(t,"bpmn:FlowElementsContainer")?$t(t):ft(t,["bpmn:Participant","bpmn:Lane"]):C(e,"bpmn:DataStoreReference")&&C(t,"bpmn:Collaboration")?ip(Ce(t).get("participants"),function(n){return!!n.get("processRef")}):ft(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?ft(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):C(e,"bpmn:MessageFlow")?C(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function HEe(e){return Ce(e).cancelActivity&&(rF(e)||iF(e))}function VEe(e){return!Pt(e)&&C(e,"bpmn:BoundaryEvent")}function GEe(e){return C(e,"bpmn:Lane")}function WEe(e){return VEe(e)||C(e,"bpmn:IntermediateThrowEvent")&&rF(e)?!0:C(e,"bpmn:IntermediateCatchEvent")&&iF(e)}function rF(e){var t=Ce(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function iF(e){return aF(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function aF(e,t){return t.some(function(n){return $a(e,n)})}function qEe(e){return C(e,"bpmn:ReceiveTask")&&dn(e.incoming,function(t){return C(t.source,"bpmn:EventBasedGateway")})}function zh(e,t,n,r){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var i=e[0];return Pt(i)||!WEe(i)||Er(t)||!C(t,"bpmn:Activity")||Bx(t)||r&&!QB(r,t)||qEe(t)?!1:"attach"}function sF(e,t,n){if(!t)return!1;var r={replacements:[]};return q(e,function(i){Er(t)||C(i,"bpmn:StartEvent")&&i.type!=="label"&&rd(i,t)&&(aH(i)||r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),(sH(i)||oH(i)||cH(i))&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),aF(i,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&C(t,"bpmn:SubProcess")&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"})),C(t,"bpmn:Transaction")||$a(i,"bpmn:CancelEventDefinition")&&i.type!=="label"&&(C(i,"bpmn:EndEvent")&&rd(i,t)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:EndEvent"}),C(i,"bpmn:BoundaryEvent")&&zh(i,t,null,n)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:BoundaryEvent"}))}),r.replacements.length?r:!1}function oF(e,t){return ip(e,GEe)?!1:t?e.every(function(n){return rd(n,t)}):!0}function D1(e,t,n,r){return t?Pt(e)||sN(e)?!0:IEe(n,t)||n&&M1(n,t)?!1:rd(e,t)||Yv(e,t):!1}function cF(e,t){return C(e,"bpmn:SubProcess")?$t(e)&&(!t||t.width>=100&&t.height>=80):!!(C(e,"bpmn:Lane")||C(e,"bpmn:Participant")||I1(e)||sN(e))}function KEe(e,t){var n=I1(e),r=I1(t);return(n||r)&&n!==r}function lF(e,t){return M1(t,e)||M1(e,t)?!1:KEe(e,t)?!0:!!oN(e,t)}function uF(e,t){return tF(e,t)&&eF(e)&&C(t,"bpmn:Activity")&&!XEe(t,e)&&!Er(t)}function dF(e,t){return nR(e)&&!nR(t)?!1:DEe(e)&&LEe(t)&&!MEe(e,t)}function hF(e,t){return BEe(e)&&FEe(t)&&tF(e,t)&&!(C(e,"bpmn:EventBasedGateway")&&!zEe(t))}function oN(e,t){return ft(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ft(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:ft(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ft(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Yv(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:ft(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Pt(t)&&C(e,"bpmn:FlowNode")&&!C(e,"bpmn:BoundaryEvent")&&rd(e,t.parent)}function YEe(e,t){return e&&t&&e.indexOf(t)!==-1}function fF(e,t){return Pt(t)?!0:!(C(t,"bpmn:Lane")&&!YEe(e,t.parent))}function nR(e){return td(e,"bpmn:Process")||td(e,"bpmn:Collaboration")}function XEe(e,t){return e.attachers.includes(t)}const ZEe={__depends__:[Ya],__init__:["bpmnRules"],bpmnRules:["type",fr]};var JEe=2e3;function pF(e,t){e.on("saveXML.start",JEe,n);function n(){var r=t.getRootElements();q(r,function(i){var a=zt(i),s,c;s=rp([i],!1),s=St(s,function(l){return l!==i&&!l.labelTarget}),c=gi(s,zt),a.set("planeElement",c)})}}pF.$inject=["eventBus","canvas"];const QEe={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",pF]};function Fx(e){he.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var r=n.context,i=r.shape||r.connection,a=r.parent,s=t.getOrdering(i,a);s&&(s.parent!==void 0&&(r.parent=s.parent),r.parentIndex=s.index)}),this.preExecute(["shape.move","connection.move"],function(n){var r=n.context,i=r.shape||r.connection,a=r.newParent||i.parent,s=t.getOrdering(i,a);s&&(s.parent!==void 0&&(r.newParent=s.parent),r.newParentIndex=s.index)})}Fx.prototype.getOrdering=function(e,t){return null};Ie(Fx,he);function cN(e,t){Fx.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(s){if(s.labelTarget)return{level:10};var c=dn(n,function(l){return ft(s,[l.type])});return c&&c.order||{level:1}}function i(s){var c=s.order;if(c||(s.order=c=r(s)),!c)throw new Error(`no order for <${s.id}>`);return c}function a(s,c,l){for(var u=c;u&&!ft(u,l);)u=u.parent;if(!u)throw new Error(`no parent for <${s.id}> in <${c&&c.id}>`);return u}this.getOrdering=function(s,c){if(s.labelTarget||C(s,"bpmn:TextAnnotation"))return{parent:t.findRoot(c)||t.getRootElement(),index:-1};var l=i(s);l.containers&&(c=a(s,c,l.containers));var u=c.children.indexOf(s),d=lH(c.children,function(h){return!s.labelTarget&&h.labelTarget?!1:l.level<i(h).level});return d!==-1&&u!==-1&&u<d&&(d-=1),{index:d,parent:c}}}cN.$inject=["eventBus","canvas"];Ie(cN,Fx);const eNe={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",cN]};function Ep(){}Ep.prototype.get=function(){return this._data};Ep.prototype.set=function(e){this._data=e};Ep.prototype.clear=function(){var e=this._data;return delete this._data,e};Ep.prototype.isEmpty=function(){return!this._data};const tNe={clipboard:["type",Ep]};var nNe="drop-ok",rR="drop-not-ok",iR="attach-ok",aR="new-parent",sR="create",rNe=2e3;function mF(e,t,n,r,i){function a(l,u,d,h,f){if(!u)return!1;l=St(l,function(w){var y=w.labelTarget;return!w.parent&&!(Pt(w)&&l.indexOf(y)!==-1)});var p=dn(l,function(w){return!qt(w)}),m=!1,g=!1,v=!1;cR(l)&&(m=i.allowed("shape.attach",{position:d,shape:p,target:u})),m||(cR(l)?v=i.allowed("shape.create",{position:d,shape:p,source:h,target:u}):v=i.allowed("elements.create",{elements:l,position:d,target:u}));var b=f.connectionTarget;return v||m?(p&&h&&(g=i.allowed("connection.create",{source:b===h?p:h,target:b===h?h:p,hints:{targetParent:u,targetAttach:m}})),{attach:m,connect:g}):v===null||m===null?null:!1}function s(l,u){[iR,nNe,rR,aR].forEach(function(d){d===u?e.addMarker(l,d):e.removeMarker(l,d)})}n.on(["create.move","create.hover"],function(l){var u=l.context,d=u.elements,h=l.hover,f=u.source,p=u.hints||{};if(!h){u.canExecute=!1,u.target=null;return}oR(l);var m={x:l.x,y:l.y},g=u.canExecute=h&&a(d,h,m,f,p);h&&g!==null&&(u.target=h,g&&g.attach?s(h,iR):s(h,g?aR:rR))}),n.on(["create.end","create.out","create.cleanup"],function(l){var u=l.hover;u&&s(u,null)}),n.on("create.end",function(l){var u=l.context,d=u.source,h=u.shape,f=u.elements,p=u.target,m=u.canExecute,g=m&&m.attach,v=m&&m.connect,b=u.hints||{};if(m===!1||!p)return!1;oR(l);var w={x:l.x,y:l.y};v?h=r.appendShape(d,h,w,p,{attach:g,connection:v===!0?{}:v,connectionTarget:b.connectionTarget}):(f=r.createElements(f,w,p,J({},b,{attach:g})),h=dn(f,function(y){return!qt(y)})),J(u,{elements:f,shape:h}),J(l,{elements:f,shape:h})});function c(){var l=t.context();l&&l.prefix===sR&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",c),n.once(["create.cancel","create.end"],rNe,function(){n.off("elements.changed",c)})}),this.start=function(l,u,d){_t(u)||(u=[u]);var h=dn(u,function(m){return!qt(m)});if(h){d=J({elements:u,hints:{},shape:h},d||{}),q(u,function(m){wt(m.x)||(m.x=0),wt(m.y)||(m.y=0)});var f=St(u,function(m){return!m.hidden}),p=$r(f);q(u,function(m){qt(m)&&(m.waypoints=gi(m.waypoints,function(g){return{x:g.x-p.x-p.width/2,y:g.y-p.y-p.height/2}})),J(m,{x:m.x-p.x-p.width/2,y:m.y-p.y-p.height/2})}),t.init(l,sR,{cursor:"grabbing",autoActivate:!0,data:{shape:h,elements:u,context:d}})}}}mF.$inject=["canvas","dragging","eventBus","modeling","rules"];function oR(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function cR(e){return e&&e.length===1&&!qt(e[0])}var iNe=750;function gF(e,t,n,r,i){function a(s){var c=je("g");de(c,i.cls("djs-drag-group",["no-events"]));var l=je("g");return s.forEach(function(u){var d;u.hidden||(u.waypoints?(d=n._createContainer("connection",l),n.drawConnection(Ql(d),u)):(d=n._createContainer("shape",l),n.drawShape(Ql(d),u),jr(d,u.x,u.y)),r.addDragger(u,c,d))}),c}t.on("create.move",iNe,function(s){var c=s.hover,l=s.context,u=l.elements,d=l.dragGroup;d||(d=l.dragGroup=a(u));var h;c?(d.parentNode||(h=e.getActiveLayer(),ke(h,d)),jr(d,s.x,s.y)):Sr(d)}),t.on("create.cleanup",function(s){var c=s.context,l=c.dragGroup;l&&Sr(l)})}gF.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const zx={__depends__:[zs,Td,Ya,Ha],__init__:["create","createPreview"],create:["type",mF],createPreview:["type",gF]};function lN(e){var t=this;this._lastMoveEvent=null;function n(r){t._lastMoveEvent=r}e.on("canvas.init",function(r){var i=t._svg=r.svg;i.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}lN.$inject=["eventBus"];lN.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||aNe(0,0)};function aNe(e,t){var n=document.createEvent("MouseEvent"),r=e,i=t,a=e,s=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,r,i,a,s,!1,!1,!1,!1,0,null),n}const Np={__init__:["mouse"],mouse:["type",lN]};function ba(e,t,n,r,i,a,s,c){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=r,this._eventBus=i,this._modeling=a,this._mouse=s,this._rules=c,i.on("copyPaste.copyElement",function(l){var u=l.descriptor,d=l.element,h=l.elements;u.priority=1,u.id=d.id;var f=dn(h,function(p){return p===d.parent});f&&(u.parent=d.parent.id),sNe(d)&&(u.priority=2,u.host=d.host.id),qt(d)&&(u.priority=3,u.source=d.source.id,u.target=d.target.id,u.waypoints=oNe(d)),Pt(d)&&(u.priority=4,u.labelTarget=d.labelTarget.id),q(["x","y","width","height"],function(p){wt(d[p])&&(u[p]=d[p])}),u.hidden=d.hidden,u.collapsed=d.collapsed}),i.on("copyPaste.pasteElements",function(l){var u=l.hints;J(u,{createElementsBehavior:!1})})}ba.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];ba.prototype.copy=function(e){var t,n;return _t(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(_t(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};ba.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var r=this._createElements(t);if(e&&e.element&&e.point)return this._paste(r,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),r,{hints:n||{}})}};ba.prototype._paste=function(e,t,n,r){q(e,function(a){wt(a.x)||(a.x=0),wt(a.y)||(a.y=0)});var i=$r(e);return q(e,function(a){qt(a)&&(a.waypoints=gi(a.waypoints,function(s){return{x:s.x-i.x-i.width/2,y:s.y-i.y-i.height/2}})),J(a,{x:a.x-i.x-i.width/2,y:a.y-i.y-i.height/2})}),this._modeling.createElements(e,n,t,J({},r))};ba.prototype._createElements=function(e){var t=this,n=this._eventBus,r={},i=[];return q(e,function(a,s){a=Ps(a,"priority"),q(a,function(c){var l=J({},Is(c,["priority"]));r[c.parent]?l.parent=r[c.parent]:delete l.parent,n.fire("copyPaste.pasteElement",{cache:r,descriptor:l});var u;if(qt(l)){l.source=r[c.source],l.target=r[c.target],u=r[c.id]=t.createConnection(l),i.push(u);return}if(Pt(l)){l.labelTarget=r[l.labelTarget],u=r[c.id]=t.createLabel(l),i.push(u);return}l.host&&(l.host=r[l.host]),u=r[c.id]=t.createShape(l),i.push(u)})}),i};ba.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Is(e,["id"]));return t};ba.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Is(e,["id"]));return t};ba.prototype.createShape=function(e){var t=this._elementFactory.createShape(Is(e,["id"]));return t};ba.prototype.hasRelations=function(e,t){var n,r,i;return!(qt(e)&&(r=dn(t,xs({id:e.source.id})),i=dn(t,xs({id:e.target.id})),!r||!i)||Pt(e)&&(n=dn(t,xs({id:e.labelTarget.id})),!n))};ba.prototype.createTree=function(e){var t=this._rules,n=this,r={},i=[],a=ly(e);function s(u,d){return t.allowed("element.copy",{element:u,elements:d})}function c(u,d){var h=dn(i,function(f){return u===f.element});if(!h){i.push({element:u,depth:d});return}h.depth<d&&(i=l(h,i),i.push({element:h.element,depth:d}))}function l(u,d){var h=d.indexOf(u);return h!==-1&&d.splice(h,1),d}return my(a,function(u,d,h){if(Pt(u))return;q(u.labels,function(m){c(m,h)});function f(m){m&&m.length&&q(m,function(g){q(g.labels,function(v){c(v,h)}),c(g,h)})}q([u.attachers,u.incoming,u.outgoing],f),c(u,h);var p=[];return u.children&&(p=u.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:u,children:p}),p}),e=gi(i,function(u){return u.element}),i=gi(i,function(u){return u.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:u.descriptor,element:u.element,elements:e}),u}),i=Ps(i,function(u){return u.descriptor.priority}),e=gi(i,function(u){return u.element}),q(i,function(u){var d=u.depth;if(!n.hasRelations(u.element,e)){uR(u.element,e);return}if(!s(u.element,e)){uR(u.element,e);return}r[d]||(r[d]=[]),r[d].push(u.descriptor)}),r};function sNe(e){return!!e.host}function oNe(e){return gi(e.waypoints,function(t){return t=lR(t),t.original&&(t.original=lR(t.original)),t})}function lR(e){return J({},e)}function uR(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const cNe={__depends__:[tNe,zx,Np,Ya],__init__:["copyPaste"],copyPaste:["type",ba]};function J0(e,t,n){_t(n)||(n=[n]),q(n,function(r){bI(e[r])||(t[r]=e[r])})}var Q0=750;function vF(e,t,n){function r(l,u){var d=e.create(l.$type);return n.copyElement(l,d,null,u)}t.on("copyPaste.copyElement",Q0,function(l){var u=l.descriptor,d=l.element,h=Ce(d);if(Pt(d))return u;var f=u.businessObject=r(h,!0),p=u.di=r(zt(d),!0);p.bpmnElement=f,J0(f,u,"name"),J0(p,u,"isExpanded"),h.default&&(u.default=h.default.id)});var i="-bpmn-js-refs";function a(l){return l[i]=l[i]||{}}function s(l,u){l[i]=u}function c(l,u,d){var h=Ce(l);return l.default&&(d[l.default]={element:h,property:"default"}),l.host&&(Ce(l).attachedToRef=Ce(u[l.host])),Is(d,$o(d,function(f,p,m){var g=p.element,v=p.property;return m===l.id&&(g.set(v,h),f.push(l.id)),f},[]))}t.on("copyPaste.pasteElement",function(l){var u=l.cache,d=l.descriptor,h=d.businessObject,f=d.di;if(Pt(d)){d.businessObject=Ce(u[d.labelTarget]),d.di=zt(u[d.labelTarget]);return}h=d.businessObject=r(h),f=d.di=r(f),f.bpmnElement=h,J0(d,h,["isExpanded","name"]),d.type=h.$type}),t.on("copyPaste.copyElement",Q0,function(l){var u=l.descriptor,d=l.element;if(C(d,"bpmn:Participant")){var h=Ce(d);h.processRef&&(u.processRef=r(h.processRef,!0))}}),t.on("copyPaste.pasteElement",function(l){var u=l.descriptor,d=u.processRef;d&&(u.processRef=r(d))}),t.on("copyPaste.pasteElement",Q0,function(l){var u=l.cache,d=l.descriptor;s(u,c(d,u,a(u)))})}vF.$inject=["bpmnFactory","eventBus","moddleCopy"];const lNe=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"],uNe=["errorRef","escalationRef","messageRef","signalRef","dataObjectRef"];function Pp(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",r=>{const{propertyNames:i}=r;if(!(!i||!i.length))return Ps(i,a=>a==="extensionElements")}),e.on("moddleCopy.canCopyProperty",r=>{const{parent:i,property:a,propertyName:s}=r,c=ks(i)&&i.$descriptor;if(s&&uNe.includes(s))return a;if(s&&lNe.includes(s)||s&&c&&!dn(c.properties,xs({name:s})))return!1}),e.on("moddleCopy.canSetCopiedProperty",r=>{const{property:i}=r;if(C(i,"bpmn:ExtensionElements")&&(!i.values||!i.values.length))return!1})}Pp.$inject=["eventBus","bpmnFactory","moddle"];Pp.prototype.copyElement=function(e,t,n,r=!1){n&&!_t(n)&&(n=[n]),n=n||L1(e.$descriptor);const i=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:r});return i===!1||(_t(i)&&(n=i),q(n,a=>{let s;_o(e,a)&&(s=e.get(a));const c=this.copyProperty(s,t,a,r);!ui(c)||this._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:c,propertyName:a})===!1||t.set(a,c)})),t};Pp.prototype.copyProperty=function(e,t,n,r=!1){let i=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:r});if(i===!1)return;if(i)return ks(i)&&i.$type&&!i.$parent&&(i.$parent=t),i;const a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?e&&this._copyId(e,t,r):_t(e)?$o(e,(s,c)=>{const l=this.copyProperty(c,t,n,r);return l?s.concat(l):s},[]):ks(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(i=this._bpmnFactory.create(e.$type),i.$parent=t,i=this.copyElement(e,i,null,r),i):e};Pp.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function L1(e,t){return $o(e.properties,(n,r)=>t&&r.default?n:n.concat(r.name),[])}const yF={__depends__:[cNe],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",vF],moddleCopy:["type",Pp]};var dR=Math.round;function uN(e,t){this._modeling=e,this._eventBus=t}uN.$inject=["modeling","eventBus"];uN.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var r=this._modeling,i=this._eventBus;i.fire("replace.start",{element:e,attrs:t,hints:n});var a=t.width||e.width,s=t.height||e.height,c=t.x||e.x,l=t.y||e.y,u=dR(c+a/2),d=dR(l+s/2),h=r.replaceShape(e,J({},t,{x:u,y:d,width:a,height:s}),n);return i.fire("replace.end",{element:e,newElement:h,hints:n}),h};function xF(e,t){t.on("replace.end",500,function(n){const{newElement:r,hints:i={}}=n;i.select!==!1&&e.select(r)})}xF.$inject=["selection","eventBus"];const dNe={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",xF],replace:["type",uN]};function hNe(e,t,n){_t(n)||(n=[n]),q(n,function(r){bI(e[r])||(t[r]=e[r])})}var fNe=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function pNe(e,t){var n=e&&_o(e,"collapsed")?e.collapsed:!$t(e),r;return t&&(_o(t,"collapsed")||_o(t,"isExpanded"))?r=_o(t,"collapsed")?t.collapsed:!t.isExpanded:r=n,n!==r}function bF(e,t,n,r,i,a){function s(c,l,u){u=u||{};var d=l.type,h=c.businessObject;if(Ym(h)&&(d==="bpmn:SubProcess"||d==="bpmn:AdHocSubProcess")&&pNe(c,l))return r.toggleCollapse(c),c;var f=e.create(d),p={type:d,businessObject:f};p.di={},d==="bpmn:ExclusiveGateway"&&(p.di.isMarkerVisible=!0),hNe(c.di,p.di,["fill","stroke","background-color","border-color","color"]);var m=L1(h.$descriptor),g=L1(f.$descriptor,!0),v=mNe(m,g);J(f,Fa(l,fNe));var b=St(v,function(_){return _==="eventDefinitions"?hR(c,l.eventDefinitionType):_==="loopCharacteristics"?!Er(f):_o(f,_)||_==="processRef"&&l.isExpanded===!1||_==="triggeredByEvent"?!1:_==="isForCompensation"?!Er(f):!0});if(f=n.copyElement(h,f,b),l.eventDefinitionType&&(hR(f,l.eventDefinitionType)||(p.eventDefinitionType=l.eventDefinitionType,p.eventDefinitionAttrs=l.eventDefinitionAttrs)),C(h,"bpmn:Activity")){if(Ym(h))p.isExpanded=$t(c);else if(l&&_o(l,"isExpanded")){p.isExpanded=l.isExpanded;var w=t.getDefaultSize(f,{isExpanded:p.isExpanded});p.width=w.width,p.height=w.height,p.x=c.x-(p.width-c.width)/2,p.y=c.y-(p.height-c.height)/2}$t(c)&&!C(h,"bpmn:Task")&&p.isExpanded&&(p.width=c.width,p.height=c.height)}if(Ym(h)&&!Ym(f)&&(u.moveChildren=!1),C(h,"bpmn:Participant")){l.isExpanded===!0?f.processRef=e.create("bpmn:Process"):u.moveChildren=!1;var y=dr(c);zt(c).isHorizontal||(zt(p).isHorizontal=y),p.width=y?c.width:t.getDefaultSize(p).width,p.height=y?t.getDefaultSize(p).height:c.height}return a.allowed("shape.resize",{shape:f})||(p.height=t.getDefaultSize(p).height,p.width=t.getDefaultSize(p).width),f.name=h.name,ft(h,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&ft(f,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(f.default=h.default),l.host&&!C(h,"bpmn:BoundaryEvent")&&C(f,"bpmn:BoundaryEvent")&&(p.host=l.host),(p.type==="bpmn:DataStoreReference"||p.type==="bpmn:DataObjectReference")&&(p.x=c.x+(c.width-p.width)/2),i.replaceElement(c,p,{...u,targetElement:l})}this.replaceElement=s}bF.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function Ym(e){return C(e,"bpmn:SubProcess")}function hR(e,t){var n=Ce(e);return t&&n.get("eventDefinitions").some(function(r){return C(r,t)})}function mNe(e,t){return e.filter(function(n){return t.includes(n)})}const wF={__depends__:[yF,dNe,Ha],bpmnReplace:["type",bF]};var gNe=250;function ll(e){this._eventBus=e,this._tools=[],this._active=null}ll.$inject=["eventBus"];ll.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};ll.prototype.isActive=function(e){return e&&this._active===e};ll.prototype.length=function(e){return this._tools.length};ll.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};ll.prototype.bindEvents=function(e,t){var n=this._eventBus,r=[];n.on(t.tool+".init",function(i){var a=i.context;if(!a.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),q(t,function(i){r.push(i+".ended"),r.push(i+".canceled")}),n.on(r,gNe,function(i){this._active&&(vNe(i)||this.setActive(null))},this)};function vNe(e){var t=e.originalEvent&&e.originalEvent.target;return t&&tp(t,'.group[data-group="tools"]')}const Ux={__depends__:[zs],__init__:["toolManager"],toolManager:["type",ll]};function yNe(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function xNe(e,t){var n=[];return q(e.concat(t),function(r){var i=r.incoming,a=r.outgoing;q(i.concat(a),function(s){var c=s.source,l=s.target;(gh(e,c)||gh(e,l)||gh(t,c)||gh(t,l))&&(gh(n,s)||n.push(s))})}),n}function gh(e,t){return e.indexOf(t)!==-1}function bNe(e,t,n){var r=e.x,i=e.y,a=e.width,s=e.height,c=n.x,l=n.y;switch(t){case"n":return{x:r,y:i+l,width:a,height:s-l};case"s":return{x:r,y:i,width:a,height:s+l};case"w":return{x:r+c,y:i,width:a-c,height:s};case"e":return{x:r,y:i,width:a+c,height:s};default:throw new Error("unknown direction: "+t)}}var ew=Math.abs,wNe=Math.round,os={x:"width",y:"height"},_F="crosshair",so={n:"top",w:"left",s:"bottom",e:"right"},_Ne=1500,Xm={n:"s",w:"e",s:"n",e:"w"},Zm=20;function Ki(e,t,n,r,i,a,s){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=r,this._rules=i,this._toolManager=a,this._mouse=s;var c=this;a.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){c.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",_Ne,function(l){var u=l.context,d=u.initialized;d||(d=u.initialized=c.init(l,u)),d&&pR(l)}),n.on("spaceTool.end",function(l){var u=l.context,d=u.axis,h=u.direction,f=u.movingShapes,p=u.resizingShapes,m=u.start;if(u.initialized){pR(l);var g={x:0,y:0};g[d]=wNe(l["d"+d]),c.makeSpace(f,p,g,h,m),n.once("spaceTool.ended",function(v){c.activateSelection(v.originalEvent,!0,!0)})}})}Ki.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];Ki.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:_F,data:{context:{reactivate:n}},trapClick:!1})};Ki.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:_F,data:{context:{}}})};Ki.prototype.makeSpace=function(e,t,n,r,i){return this._modeling.createSpace(e,t,n,r,i)};Ki.prototype.init=function(e,t){var n=ew(e.dx)>ew(e.dy)?"x":"y",r=e["d"+n],i=e[n]-r;if(ew(r)<5)return!1;r<0&&(r*=-1),Gh(e)&&(r*=-1);var a=yNe(n,r),s=this._canvas.getRootElement();!vw(e)&&e.hover&&(s=e.hover);var c=[...rp(s,!0),...s.attachers||[]],l=this.calculateAdjustments(c,n,r,i),u=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:a,shapes:l.resizingShapes,start:i}),d=jNe(l,n,a,i,u);return J(t,l,{axis:n,direction:a,spaceToolConstraints:d,start:i}),jx("resize-"+(n==="x"?"ew":"ns")),!0};Ki.prototype.calculateAdjustments=function(e,t,n,r){var i=this._rules,a=[],s=[],c=[],l=[];function u(f){a.includes(f)||a.push(f);var p=f.label;p&&!a.includes(p)&&a.push(p)}function d(f){s.includes(f)||s.push(f)}q(e,function(f){if(!(!f.parent||Pt(f))){if(qt(f)){l.push(f);return}var p=f[t],m=p+f[os[t]];if(SNe(f)&&(n>0&&Qe(f)[t]>r||n<0&&Qe(f)[t]<r)){c.push(f);return}if(n>0&&p>r||n<0&&m<r){u(f);return}if(p<r&&m>r&&i.allowed("shape.resize",{shape:f})){d(f);return}}}),q(a,function(f){var p=f.attachers;p&&q(p,function(m){u(m)})});var h=a.concat(s);return q(c,function(f){var p=f.host;Pc(h,p)&&u(f)}),h=a.concat(s),q(l,function(f){var p=f.source,m=f.target,g=f.label;Pc(h,p)&&Pc(h,m)&&g&&u(g)}),{movingShapes:a,resizingShapes:s}};Ki.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Ki.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function fR(e){return{top:e.top-Zm,right:e.right+Zm,bottom:e.bottom+Zm,left:e.left-Zm}}function pR(e){var t=e.context,n=t.spaceToolConstraints;if(n){var r,i;wt(n.left)&&(r=Math.max(e.x,n.left),e.dx=e.dx+r-e.x,e.x=r),wt(n.right)&&(r=Math.min(e.x,n.right),e.dx=e.dx+r-e.x,e.x=r),wt(n.top)&&(i=Math.max(e.y,n.top),e.dy=e.dy+i-e.y,e.y=i),wt(n.bottom)&&(i=Math.min(e.y,n.bottom),e.dy=e.dy+i-e.y,e.y=i)}}function jNe(e,t,n,r,i){var a=e.movingShapes,s=e.resizingShapes;if(s.length){var c={},l,u;return q(s,function(d){var h=d.attachers,f=d.children,p=Ge(d),m=St(f,function(T){return!qt(T)&&!Pt(T)&&!Pc(a,T)&&!Pc(s,T)}),g=St(f,function(T){return!qt(T)&&!Pt(T)&&Pc(a,T)}),v,b,w,y=[],_=[],j,S,E,P;m.length&&(b=fR(Ge($r(m))),v=r-p[so[n]]+b[so[n]],n==="n"?c.bottom=u=wt(u)?Math.min(u,v):v:n==="w"?c.right=u=wt(u)?Math.min(u,v):v:n==="s"?c.top=l=wt(l)?Math.max(l,v):v:n==="e"&&(c.left=l=wt(l)?Math.max(l,v):v)),g.length&&(w=fR(Ge($r(g))),v=r-w[so[Xm[n]]]+p[so[Xm[n]]],n==="n"?c.bottom=u=wt(u)?Math.min(u,v):v:n==="w"?c.right=u=wt(u)?Math.min(u,v):v:n==="s"?c.top=l=wt(l)?Math.max(l,v):v:n==="e"&&(c.left=l=wt(l)?Math.max(l,v):v)),h&&h.length&&(h.forEach(function(T){Pc(a,T)?y.push(T):_.push(T)}),y.length&&(j=Ge($r(y.map(Qe))),S=p[so[Xm[n]]]-(j[so[Xm[n]]]-r)),_.length&&(E=Ge($r(_.map(Qe))),P=E[so[n]]-(p[so[n]]-r)),n==="n"?(v=Math.min(S||1/0,P||1/0),c.bottom=u=wt(u)?Math.min(u,v):v):n==="w"?(v=Math.min(S||1/0,P||1/0),c.right=u=wt(u)?Math.min(u,v):v):n==="s"?(v=Math.max(S||-1/0,P||-1/0),c.top=l=wt(l)?Math.max(l,v):v):n==="e"&&(v=Math.max(S||-1/0,P||-1/0),c.left=l=wt(l)?Math.max(l,v):v));var k=i&&i[d.id];k&&(n==="n"?(v=r+d[os[t]]-k[os[t]],c.bottom=u=wt(u)?Math.min(u,v):v):n==="w"?(v=r+d[os[t]]-k[os[t]],c.right=u=wt(u)?Math.min(u,v):v):n==="s"?(v=r-d[os[t]]+k[os[t]],c.top=l=wt(l)?Math.max(l,v):v):n==="e"&&(v=r-d[os[t]]+k[os[t]],c.left=l=wt(l)?Math.max(l,v):v))}),c}}function Pc(e,t){return e.indexOf(t)!==-1}function SNe(e){return!!e.host}var tw="djs-dragging",mR="djs-resizing",ENe=250,Jm=Math.max;function jF(e,t,n,r,i){function a(s,c){q(s,function(l){i.addDragger(l,c),n.addMarker(l,tw)})}e.on("spaceTool.selection.start",function(s){var c=n.getLayer("space"),l=s.context,u={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},d=je("g");de(d,r.cls("djs-crosshair-group",["no-events"])),ke(c,d);var h=je("path");de(h,"d",u.x),Xt(h).add("djs-crosshair"),ke(d,h);var f=je("path");de(f,"d",u.y),Xt(f).add("djs-crosshair"),ke(d,f),l.crosshairGroup=d}),e.on("spaceTool.selection.move",function(s){var c=s.context.crosshairGroup;jr(c,s.x,s.y)}),e.on("spaceTool.selection.cleanup",function(s){var c=s.context,l=c.crosshairGroup;l&&Sr(l)}),e.on("spaceTool.move",ENe,function(s){var c=s.context,l=c.line,u=c.axis,d=c.movingShapes,h=c.resizingShapes;if(c.initialized){if(!c.dragGroup){var f=n.getLayer("space");l=je("path"),de(l,"d","M0,0 L0,0"),Xt(l).add("djs-crosshair"),ke(f,l),c.line=l;var p=je("g");de(p,r.cls("djs-drag-group",["no-events"])),ke(n.getActiveLayer(),p),a(d,p);var m=c.movingConnections=t.filter(function(_){var j=!1;q(d,function(k){q(k.outgoing,function(T){_===T&&(j=!0)})});var S=!1;q(d,function(k){q(k.incoming,function(T){_===T&&(S=!0)})});var E=!1;q(h,function(k){q(k.outgoing,function(T){_===T&&(E=!0)})});var P=!1;return q(h,function(k){q(k.incoming,function(T){_===T&&(P=!0)})}),qt(_)&&(j||E)&&(S||P)});a(m,p),c.dragGroup=p}if(!c.frameGroup){var g=je("g");de(g,r.cls("djs-frame-group",["no-events"])),ke(n.getActiveLayer(),g);var v=[];q(h,function(_){var j=i.addFrame(_,g),S=j.getBBox();v.push({element:j,initialBounds:S}),n.addMarker(_,mR)}),c.frameGroup=g,c.frames=v}var b={x:"M"+s.x+", -10000 L"+s.x+", 10000",y:"M -10000, "+s.y+" L 10000, "+s.y};de(l,{d:b[u]});var w={x:"y",y:"x"},y={x:s.dx,y:s.dy};y[w[c.axis]]=0,jr(c.dragGroup,y.x,y.y),q(c.frames,function(_){var j=_.element,S=_.initialBounds,E,P;c.direction==="e"?de(j,{width:Jm(S.width+y.x,5)}):(E=Jm(S.width-y.x,5),de(j,{width:E,x:S.x+S.width-E})),c.direction==="s"?de(j,{height:Jm(S.height+y.y,5)}):(P=Jm(S.height-y.y,5),de(j,{height:P,y:S.y+S.height-P}))})}}),e.on("spaceTool.cleanup",function(s){var c=s.context,l=c.movingShapes,u=c.movingConnections,d=c.resizingShapes,h=c.line,f=c.dragGroup,p=c.frameGroup;q(l,function(m){n.removeMarker(m,tw)}),q(u,function(m){n.removeMarker(m,tw)}),f&&(Sr(h),Sr(f)),q(d,function(m){n.removeMarker(m,mR)}),p&&Sr(p)})}jF.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const NNe={__init__:["spaceToolPreview"],__depends__:[zs,Ya,Ux,Td,Np],spaceTool:["type",Ki],spaceToolPreview:["type",jF]};function Hx(e,t){e.invoke(Ki,this),this._canvas=t}Hx.$inject=["injector","canvas"];Ie(Hx,Ki);Hx.prototype.calculateAdjustments=function(e,t,n,r){var i=this._canvas.getRootElement(),a=e[0]===i?null:e[0],s=[];a&&(s=dy(wI(i.children.filter(u=>C(u,"bpmn:Artifact")),$r(a))));const c=[...e,...s];var l=Ki.prototype.calculateAdjustments.call(this,c,t,n,r);return l.resizingShapes=l.resizingShapes.filter(function(u){return!(C(u,"bpmn:TextAnnotation")||PNe(u)&&(t==="y"&&dr(u)||t==="x"&&!dr(u)))}),l};function PNe(e){return C(e,"bpmn:Participant")&&!Ce(e).processRef}const SF={__depends__:[NNe],spaceTool:["type",Hx]};function bn(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}bn.$inject=["eventBus","injector"];bn.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};bn.prototype.canExecute=function(e,t){const n={command:e,context:t},r=this._getHandler(e);let i=this._fire(e,"canExecute",n);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(t))}return i};bn.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};bn.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};bn.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};bn.prototype.register=function(e,t){this._setHandler(e,t)};bn.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};bn.prototype.canUndo=function(){return!!this._getUndoAction()};bn.prototype.canRedo=function(){return!!this._getRedoAction()};bn.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};bn.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};bn.prototype._internalUndo=function(e){const t=e.command,n=e.context,r=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};bn.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const r=t?[e+"."+t,t]:[e];let i;n=this._eventBus.createEvent(n);for(const a of r)if(i=this._eventBus.fire("commandStack."+a,n),n.cancelBubble)break;return i};bn.prototype._createId=function(){return this._uid++};bn.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};bn.prototype._internalExecute=function(e,t){const n=e.command,r=e.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),i.preExecute&&i.preExecute(r),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),i.execute&&this._markDirty(i.execute(r)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),i.postExecute&&i.postExecute(r),this._fire(n,"postExecuted",e)),this._popAction()};bn.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)};bn.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:uH("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};bn.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=_t(e)?e:[e],t.dirty=t.dirty.concat(e))};bn.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};bn.prototype._revertedAction=function(e){this._stackIdx--};bn.prototype._getHandler=function(e){return this._handlerMap[e]};bn.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const kNe={commandStack:["type",bn]};function Po(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var CNe=250,gR=1400;function dN(e,t,n){he.call(this,t);var r=e.get("movePreview",!1);t.on("shape.move.start",gR,function(i){var a=i.context,s=a.shapes,c=a.validatedShapes;a.shapes=vR(s),a.validatedShapes=vR(c)}),r&&t.on("shape.move.start",CNe,function(i){var a=i.context,s=a.shapes,c=[];q(s,function(l){q(l.labels,function(u){!u.hidden&&a.shapes.indexOf(u)===-1&&c.push(u),l.labelTarget&&c.push(l)})}),q(c,function(l){r.makeDraggable(a,l,!0)})}),this.preExecuted("elements.move",gR,function(i){var a=i.context,s=a.closure,c=s.enclosedElements,l=[];q(c,function(u){q(u.labels,function(d){c[d.id]||l.push(d)})}),s.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(i){var a=i.context,s=a.connection||a.shape;Po(s.labels,function(c){n.removeShape(c,{nested:!0})})}),this.execute("shape.delete",function(i){var a=i.context,s=a.shape,c=s.labelTarget;c&&(a.labelTargetIndex=vj(c.labels,s),a.labelTarget=c,s.labelTarget=null)}),this.revert("shape.delete",function(i){var a=i.context,s=a.shape,c=a.labelTarget,l=a.labelTargetIndex;c&&(qn(c.labels,s,l),s.labelTarget=c)})}Ie(dN,he);dN.$inject=["injector","eventBus","modeling"];function vR(e){return St(e,function(t){return e.indexOf(t.labelTarget)===-1})}const ANe={__init__:["labelSupport"],labelSupport:["type",dN]};var TNe=251,yR=1401,xR="attach-ok";function hN(e,t,n,r,i){he.call(this,t);var a=e.get("movePreview",!1);t.on("shape.move.start",yR,function(s){var c=s.context,l=c.shapes,u=c.validatedShapes;c.shapes=ONe(l),c.validatedShapes=RNe(u)}),a&&t.on("shape.move.start",TNe,function(s){var c=s.context,l=c.shapes,u=B1(l);q(u,function(d){a.makeDraggable(c,d,!0),q(d.labels,function(h){a.makeDraggable(c,h,!0)})})}),a&&t.on("shape.move.start",function(s){var c=s.context,l=c.shapes;if(l.length===1){var u=l[0],d=u.host;d&&(n.addMarker(d,xR),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(d,xR)}))}}),this.preExecuted("elements.move",yR,function(s){var c=s.context,l=c.closure,u=c.shapes,d=B1(u);q(d,function(h){l.add(h,l.topLevel[h.host.id])})}),this.postExecuted("elements.move",function(s){var c=s.context,l=c.shapes,u=c.newHost,d;u&&l.length!==1||(u?d=l:d=St(l,function(h){var f=h.host;return $Ne(h)&&!INe(l,f)}),q(d,function(h){i.updateAttachment(h,u)}))}),this.postExecuted("elements.move",function(s){var c=s.context.shapes;q(c,function(l){q(l.attachers,function(u){q(u.outgoing.slice(),function(d){var h=r.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});h||i.removeConnection(d)}),q(u.incoming.slice(),function(d){var h=r.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});h||i.removeConnection(d)})})})}),this.postExecute("shape.create",function(s){var c=s.context,l=c.shape,u=c.host;u&&i.updateAttachment(l,u)}),this.postExecute("shape.replace",function(s){var c=s.context,l=c.oldShape,u=c.newShape;Po(l.attachers,function(d){var h=r.allowed("elements.move",{target:u,shapes:[d]});h==="attach"?i.updateAttachment(d,u):i.removeShape(d)}),u.attachers.length&&q(u.attachers,function(d){var h=KO(d,l,u);i.moveShape(d,h,d.parent)})}),this.postExecute("shape.resize",function(s){var c=s.context,l=c.shape,u=c.oldBounds,d=c.newBounds,h=l.attachers,f=c.hints||{};f.attachSupport!==!1&&q(h,function(p){var m=KO(p,u,d);i.moveShape(p,m,p.parent),q(p.labels,function(g){i.moveShape(g,m,g.parent)})})}),this.preExecute("shape.delete",function(s){var c=s.context.shape;Po(c.attachers,function(l){i.removeShape(l)}),c.host&&i.updateAttachment(c,null)})}Ie(hN,he);hN.$inject=["injector","eventBus","canvas","rules","modeling"];function B1(e){return fj(gi(e,function(t){return t.attachers||[]}))}function ONe(e){var t=B1(e);return dH("id",e,t)}function RNe(e){var t=hy(e,"id");return St(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function $Ne(e){return!!e.host}function INe(e,t){return e.indexOf(t)!==-1}const MNe={__depends__:[Ya],__init__:["attachSupport"],attachSupport:["type",hN]};function Yi(e){this._model=e}Yi.$inject=["moddle"];Yi.prototype._needsId=function(e){return ft(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};Yi.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;C(e,"bpmn:Activity")?t="Activity":C(e,"bpmn:Event")?t="Event":C(e,"bpmn:Gateway")?t="Gateway":ft(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};Yi.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};Yi.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};Yi.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",J({bpmnElement:e,bounds:this.createDiBounds()},t))};Yi.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};Yi.prototype.createDiWaypoints=function(e){var t=this;return gi(e,function(n){return t.createDiWaypoint(n)})};Yi.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Fa(e,["x","y"]))};Yi.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",J({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};Yi.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",J({bpmnElement:e},t))};function Xr(e,t,n){he.call(this,e),this._bpmnFactory=t;var r=this;function i(p){var m=p.context,g=m.hints||{},v;!m.cropped&&g.createElementsBehavior!==!1&&(v=m.connection,v.waypoints=n.getCroppedWaypoints(v),m.cropped=!0)}this.executed(["connection.layout","connection.create"],i),this.reverted(["connection.layout"],function(p){delete p.context.cropped});function a(p){var m=p.context;r.updateParent(m.shape||m.connection,m.oldParent)}function s(p){var m=p.context,g=m.shape||m.connection,v=m.parent||m.newParent;r.updateParent(g,v)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Hr(a)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Hr(s));function c(p){var m=p.context,g=m.oldRoot,v=g.children;q(v,function(b){C(b,"bpmn:BaseElement")&&r.updateParent(b)})}this.executed(["canvas.updateRoot"],c),this.reverted(["canvas.updateRoot"],c);function l(p){var m=p.context.shape;C(m,"bpmn:BaseElement")&&r.updateBounds(m)}this.executed(["shape.move","shape.create","shape.resize"],Hr(function(p){p.context.shape.type!=="label"&&l(p)})),this.reverted(["shape.move","shape.create","shape.resize"],Hr(function(p){p.context.shape.type!=="label"&&l(p)})),e.on("shape.changed",function(p){p.element.type==="label"&&l({context:{shape:p.element}})});function u(p){r.updateConnection(p.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],Hr(u)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],Hr(u));function d(p){r.updateConnectionWaypoints(p.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],Hr(d)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],Hr(d)),this.executed("connection.reconnect",Hr(function(p){var m=p.context,g=m.connection,v=m.oldSource,b=m.newSource,w=Ce(g),y=Ce(v),_=Ce(b);w.conditionExpression&&!ft(_,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(m.oldConditionExpression=w.conditionExpression,delete w.conditionExpression),v!==b&&y.default===w&&(m.oldDefault=y.default,delete y.default)})),this.reverted("connection.reconnect",Hr(function(p){var m=p.context,g=m.connection,v=m.oldSource,b=m.newSource,w=Ce(g),y=Ce(v),_=Ce(b);m.oldConditionExpression&&(w.conditionExpression=m.oldConditionExpression),m.oldDefault&&(y.default=m.oldDefault,delete _.default)}));function h(p){r.updateAttachment(p.context)}this.executed(["element.updateAttachment"],Hr(h)),this.reverted(["element.updateAttachment"],Hr(h)),this.executed("element.updateLabel",Hr(f)),this.reverted("element.updateLabel",Hr(f));function f(p){const{element:m}=p.context,g=Vc(m),v=zt(m),b=v&&v.get("label");bu(m)||cg(m)||(g&&!b?v.set("label",t.create("bpmndi:BPMNLabel")):!g&&b&&v.set("label",void 0))}}Ie(Xr,he);Xr.$inject=["eventBus","bpmnFactory","connectionDocking"];Xr.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,r=t.host;n.attachedToRef=r&&r.businessObject};Xr.prototype.updateParent=function(e,t){if(!Pt(e)&&!(C(e,"bpmn:DataStoreReference")&&e.parent&&C(e.parent,"bpmn:Collaboration"))){var n=e.parent,r=e.businessObject,i=zt(e),a=n&&n.businessObject,s=zt(n);C(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(r,a,t&&t.businessObject),C(e,"bpmn:DataOutputAssociation")&&(e.source?a=e.source.businessObject:a=null),C(e,"bpmn:DataInputAssociation")&&(e.target?a=e.target.businessObject:a=null),this.updateSemanticParent(r,a),C(e,"bpmn:DataObjectReference")&&r.dataObjectRef&&this.updateSemanticParent(r.dataObjectRef,a),this.updateDiParent(i,s)}};Xr.prototype.updateBounds=function(e){var t=zt(e),n=LNe(e);if(n){var r=va(n,t.get("bounds"));J(n,{x:e.x+r.x,y:e.y+r.y})}var i=Pt(e)?this._getLabel(t):t,a=i.bounds;a||(a=this._bpmnFactory.createDiBounds(),i.set("bounds",a)),J(a,{x:e.x,y:e.y,width:e.width,height:e.height})};Xr.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var r,i;C(n,"bpmn:Lane")&&(r=n.get("flowNodeRef"),Dn(r,e)),C(t,"bpmn:Lane")&&(i=t.get("flowNodeRef"),qn(i,e))}};Xr.prototype.updateDiConnection=function(e,t,n){var r=zt(e),i=zt(t),a=zt(n);r.sourceElement&&r.sourceElement.bpmnElement!==Ce(t)&&(r.sourceElement=t&&i),r.targetElement&&r.targetElement.bpmnElement!==Ce(n)&&(r.targetElement=n&&a)};Xr.prototype.updateDiParent=function(e,t){if(t&&!C(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(Dn(n,e),e.$parent=null)}};function DNe(e){for(;e&&!C(e,"bpmn:Definitions");)e=e.$parent;return e}Xr.prototype.getLaneSet=function(e){var t,n;return C(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(C(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};Xr.prototype.updateSemanticParent=function(e,t,n){var r;if(e.$parent!==t&&!((C(e,"bpmn:DataInput")||C(e,"bpmn:DataOutput"))&&(C(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(C(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),r="lanes";else if(C(e,"bpmn:FlowElement")){if(t){if(C(t,"bpmn:Participant"))t=t.processRef;else if(C(t,"bpmn:Lane"))do t=t.$parent.$parent;while(C(t,"bpmn:Lane"))}r="flowElements"}else if(C(e,"bpmn:Artifact")){for(;t&&!C(t,"bpmn:Process")&&!C(t,"bpmn:SubProcess")&&!C(t,"bpmn:Collaboration");)if(C(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;r="artifacts"}else if(C(e,"bpmn:MessageFlow"))r="messageFlows";else if(C(e,"bpmn:Participant")){r="participants";var i=e.processRef,a;i&&(a=DNe(e.$parent||t),e.$parent&&(Dn(a.get("rootElements"),i),i.$parent=null),t&&(qn(a.get("rootElements"),i),i.$parent=a))}else C(e,"bpmn:DataOutputAssociation")?r="dataOutputAssociations":C(e,"bpmn:DataInputAssociation")&&(r="dataInputAssociations");if(!r)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var s;if(e.$parent&&(s=e.$parent.get(r),Dn(s,e)),t?(s=t.get(r),s.push(e),e.$parent=t):e.$parent=null,n){var c=n.get(r);Dn(s,e),t&&(c||(c=[],t.set(r,c)),c.push(e))}}};Xr.prototype.updateConnectionWaypoints=function(e){var t=zt(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};Xr.prototype.updateConnection=function(e){var t=e.connection,n=Ce(t),r=t.source,i=Ce(r),a=t.target,s=Ce(t.target),c;if(C(n,"bpmn:DataAssociation"))C(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=i,c=e.parent||e.newParent||s,this.updateSemanticParent(n,s,c)):C(n,"bpmn:DataOutputAssociation")&&(c=e.parent||e.newParent||i,this.updateSemanticParent(n,i,c),n.targetRef=s);else{var l=C(n,"bpmn:SequenceFlow");n.sourceRef!==i&&(l&&(Dn(n.sourceRef&&n.sourceRef.get("outgoing"),n),i&&i.get("outgoing")&&i.get("outgoing").push(n)),n.sourceRef=i),n.targetRef!==s&&(l&&(Dn(n.targetRef&&n.targetRef.get("incoming"),n),s&&s.get("incoming")&&s.get("incoming").push(n)),n.targetRef=s)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,r,a)};Xr.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function Hr(e){return function(t){var n=t.context,r=n.shape||n.connection||n.element;C(r,"bpmn:BaseElement")&&e(t)}}function LNe(e){if(C(e,"bpmn:Activity")){var t=zt(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function Ho(e,t){yj.call(this),this._bpmnFactory=e,this._moddle=t}Ie(Ho,yj);Ho.$inject=["bpmnFactory","moddle"];Ho.prototype._baseCreate=yj.prototype.create;Ho.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,J({type:"label",di:n},hH,t))}return this.createElement(e,t)};Ho.prototype.createElement=function(e,t){t=J({},t||{});var n,r=t.businessObject,i=t.di;if(!r){if(!t.type)throw new Error("no shape type specified");r=this._bpmnFactory.create(t.type),fH(r)}if(!FNe(i)){var a=J({},i||{},{id:r.id+"_di"});e==="root"?i=this._bpmnFactory.createDiPlane(r,a):e==="connection"?i=this._bpmnFactory.createDiEdge(r,a):i=this._bpmnFactory.createDiShape(r,a)}C(r,"bpmn:Group")&&(t=J({isFrame:!0},t)),t=BNe(r,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=F1(i,t,"isExpanded")),ft(r,["bpmn:Lane","bpmn:Participant"])&&(t=F1(i,t,"isHorizontal")),C(r,"bpmn:SubProcess")&&(t.collapsed=!$t(r,i)),C(r,"bpmn:ExclusiveGateway")&&(_o(i,"isMarkerVisible")?i.isMarkerVisible===void 0&&(i.isMarkerVisible=!1):i.isMarkerVisible=!0),ui(t.triggeredByEvent)&&(r.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),ui(t.cancelActivity)&&(r.cancelActivity=t.cancelActivity,delete t.cancelActivity);var s,c;return t.eventDefinitionType&&(s=r.get("eventDefinitions")||[],c=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(c.condition=this._bpmnFactory.create("bpmn:FormalExpression")),s.push(c),c.$parent=r,r.eventDefinitions=s,delete t.eventDefinitionType),n=this.getDefaultSize(r,i),t=J({id:r.id},n,t,{businessObject:r,di:i}),this._baseCreate(e,t)};Ho.prototype.getDefaultSize=function(e,t){var n=Ce(e);if(t=t||zt(e),C(n,"bpmn:SubProcess"))return $t(n,t)?{width:350,height:200}:{width:100,height:80};if(C(n,"bpmn:Task"))return{width:100,height:80};if(C(n,"bpmn:Gateway"))return{width:50,height:50};if(C(n,"bpmn:Event"))return{width:36,height:36};if(C(n,"bpmn:Participant")){var r=t.isHorizontal===void 0||t.isHorizontal===!0;return $t(n,t)?r?{width:600,height:250}:{width:250,height:600}:r?{width:400,height:60}:{width:60,height:400}}return C(n,"bpmn:Lane")?{width:400,height:100}:C(n,"bpmn:DataObjectReference")?{width:36,height:50}:C(n,"bpmn:DataStoreReference")?{width:50,height:50}:C(n,"bpmn:TextAnnotation")?{width:100,height:30}:C(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};Ho.prototype.createParticipantShape=function(e){return ks(e)||(e={isExpanded:e}),e=J({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function BNe(e,t,n){return q(n,function(r){t=F1(e,t,r)}),t}function F1(e,t,n){return t[n]===void 0?t:(e[n]=t[n],Is(t,[n]))}function FNe(e){return ft(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function Vx(e,t){this._modeling=e,this._canvas=t}Vx.$inject=["modeling","canvas"];Vx.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,r=e.alignment;q(n,function(i){var a={x:0,y:0};ui(r.left)?a.x=r.left-i.x:ui(r.right)?a.x=r.right-i.width-i.x:ui(r.center)?a.x=r.center-Math.round(i.width/2)-i.x:ui(r.top)?a.y=r.top-i.y:ui(r.bottom)?a.y=r.bottom-i.height-i.y:ui(r.middle)&&(a.y=r.middle-Math.round(i.height/2)-i.y),t.moveElements([i],a,i.parent)})};Vx.prototype.postExecute=function(e){};function Gx(e){this._modeling=e}Gx.$inject=["modeling"];Gx.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,r=e.shape,i=e.hints||{};r=e.shape=this._modeling.createShape(r,e.position,n,{attach:i.attach}),e.shape=r};Gx.prototype.postExecute=function(e){var t=e.hints||{};zNe(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function zNe(e,t){return ip(e.outgoing,function(n){return n.target===t})}function Wx(e,t){this._canvas=e,this._layouter=t}Wx.$inject=["canvas","layouter"];Wx.prototype.execute=function(e){var t=e.connection,n=e.source,r=e.target,i=e.parent,a=e.parentIndex,s=e.hints;if(!n||!r)throw new Error("source and target required");if(!i)throw new Error("parent required");return t.source=n,t.target=r,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,s)),this._canvas.addConnection(t,i,a),t};Wx.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Qm=Math.round;function fN(e){this._modeling=e}fN.$inject=["modeling"];fN.prototype.preExecute=function(e){var t=e.elements,n=e.parent,r=e.parentIndex,i=e.position,a=e.hints,s=this._modeling;q(t,function(h){wt(h.x)||(h.x=0),wt(h.y)||(h.y=0)});var c=St(t,function(h){return!h.hidden}),l=$r(c);q(t,function(h){qt(h)&&(h.waypoints=gi(h.waypoints,function(f){return{x:Qm(f.x-l.x-l.width/2+i.x),y:Qm(f.y-l.y-l.height/2+i.y)}})),J(h,{x:Qm(h.x-l.x-l.width/2+i.x),y:Qm(h.y-l.y-l.height/2+i.y)})});var u=ly(t),d={};q(t,function(h){if(qt(h)){d[h.id]=wt(r)?s.createConnection(d[h.source.id],d[h.target.id],r,h,h.parent||n,a):s.createConnection(d[h.source.id],d[h.target.id],h,h.parent||n,a);return}var f=J({},a);u.indexOf(h)===-1&&(f.autoResize=!1),Pt(h)&&(f=Is(f,["attach"])),d[h.id]=wt(r)?s.createShape(h,Fa(h,["x","y","width","height"]),h.parent||n,r,f):s.createShape(h,Fa(h,["x","y","width","height"]),h.parent||n,f)}),e.elements=dy(d)};var bR=Math.round;function Vo(e){this._canvas=e}Vo.$inject=["canvas"];Vo.prototype.execute=function(e){var t=e.shape,n=e.position,r=e.parent,i=e.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?J(t,n):J(t,{x:n.x-bR(t.width/2),y:n.y-bR(t.height/2)}),this._canvas.addShape(t,r,i),t};Vo.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function kp(e){Vo.call(this,e)}Ie(kp,Vo);kp.$inject=["canvas"];var UNe=Vo.prototype.execute;kp.prototype.execute=function(e){var t=e.shape;return VNe(t),t.labelTarget=e.labelTarget,UNe.call(this,e)};var HNe=Vo.prototype.revert;kp.prototype.revert=function(e){return e.shape.labelTarget=null,HNe.call(this,e)};function VNe(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function Cp(e,t){this._canvas=e,this._modeling=t}Cp.$inject=["canvas","modeling"];Cp.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;Po(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),Po(n.outgoing,function(r){t.removeConnection(r,{nested:!0})})};Cp.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=vj(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};Cp.prototype.revert=function(e){var t=e.connection,n=e.parent,r=e.parentIndex;return t.source=e.source,t.target=e.target,qn(n.children,t,r),this._canvas.addConnection(t,n),t};function pN(e,t){this._modeling=e,this._elementRegistry=t}pN.$inject=["modeling","elementRegistry"];pN.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,r=e.elements;q(r,function(i){n.get(i.id)&&(i.waypoints?t.removeConnection(i):t.removeShape(i))})};function Ap(e,t){this._canvas=e,this._modeling=t}Ap.$inject=["canvas","modeling"];Ap.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Po(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),Po(n.outgoing,function(r){t.removeConnection(r,{nested:!0})}),Po(n.children,function(r){qt(r)?t.removeConnection(r,{nested:!0}):t.removeShape(r,{nested:!0})})};Ap.prototype.execute=function(e){var t=this._canvas,n=e.shape,r=n.parent;return e.oldParent=r,e.oldParentIndex=vj(r.children,n),t.removeShape(n),n};Ap.prototype.revert=function(e){var t=this._canvas,n=e.shape,r=e.oldParent,i=e.oldParentIndex;return qn(r.children,n,i),t.addShape(n,r),n};function qx(e){this._modeling=e}qx.$inject=["modeling"];var wR={x:"y",y:"x"};qx.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,r=e.axis,i=e.dimension;function a(v,b){v.range.min=Math.min(b[r],v.range.min),v.range.max=Math.max(b[r]+b[i],v.range.max)}function s(v){return v[r]+v[i]/2}function c(v){return v.length-1}function l(v){return v.max-v.min}function u(v,b){var w={y:0};w[r]=v-s(b),w[r]&&(w[wR[r]]=0,t.moveElements([b],w,b.parent))}var d=n[0],h=c(n),f=n[h],p,m,g=0;q(n,function(v,b){var w,y,_;if(v.elements.length<2){b&&b!==n.length-1&&(a(v,v.elements[0]),g+=l(v.range));return}w=Ps(v.elements,r),y=w[0],b===h&&(y=w[c(w)]),_=s(y),v.range=null,q(w,function(j){if(u(_,j),v.range===null){v.range={min:j[r],max:j[r]+j[i]};return}a(v,j)}),b&&b!==n.length-1&&(g+=l(v.range))}),m=Math.abs(f.range.min-d.range.max),p=Math.round((m-g)/(n.length-1)),!(p<n.length-1)&&q(n,function(v,b){var w={},y;v===d||v===f||(y=n[b-1],v.range.max=0,q(v.elements,function(_,j){w[wR[r]]=0,w[r]=y.range.max-_[r]+p,v.range.min!==_[r]&&(w[r]+=_[r]-v.range.min),w[r]&&t.moveElements([_],w,_.parent),v.range.max=Math.max(_[r]+_[i],j?v.range.max:0)}))})};qx.prototype.postExecute=function(e){};function Kx(e,t){this._layouter=e,this._canvas=t}Kx.$inject=["layouter","canvas"];Kx.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return J(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};Kx.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function mN(){}mN.prototype.execute=function(e){var t=e.connection,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,a=t.parent;return e.oldParent=a,e.oldParentIndex=Dn(a.children,t),qn(r.children,t,i),t.parent=r,q(t.waypoints,function(s){s.x+=n.x,s.y+=n.y,s.original&&(s.original.x+=n.x,s.original.y+=n.y)}),t};mN.prototype.revert=function(e){var t=e.connection,n=t.parent,r=e.oldParent,i=e.oldParentIndex,a=e.delta;return Dn(n.children,t),qn(r.children,t,i),t.parent=r,q(t.waypoints,function(s){s.x-=a.x,s.y-=a.y,s.original&&(s.original.x-=a.x,s.original.y-=a.y)}),t};function gN(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}gN.prototype.add=function(e,t){return this.addAll([e],t)};gN.prototype.addAll=function(e,t){var n=pH(e,!!t,this);return J(this,n),this};function Tp(e){this._modeling=e}Tp.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};Tp.prototype.moveClosure=function(e,t,n,r,i){var a=this._modeling,s=e.allShapes,c=e.allConnections,l=e.enclosedConnections,u=e.topLevel,d=!1;i&&i.parent===n&&(d=!0),q(s,function(h){a.moveShape(h,t,u[h.id]&&!d&&n,{recurse:!1,layout:!1})}),q(c,function(h){var f=!!s[h.source.id],p=!!s[h.target.id];l[h.id]&&f&&p?a.moveConnection(h,t,u[h.id]&&!d&&n):a.layoutConnection(h,{connectionStart:f&&FE(h,h.source,t),connectionEnd:p&&zE(h,h.target,t)})})};Tp.prototype.getClosure=function(e){return new gN().addAll(e,!0)};function Yx(e){this._helper=new Tp(e)}Yx.$inject=["modeling"];Yx.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};Yx.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function ul(e){this._modeling=e,this._helper=new Tp(e)}ul.$inject=["modeling"];ul.prototype.execute=function(e){var t=e.shape,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,a=t.parent;return e.oldBounds=Fa(t,["x","y","width","height"]),e.oldParent=a,e.oldParentIndex=Dn(a.children,t),qn(r.children,t,i),J(t,{parent:r,x:t.x+n.x,y:t.y+n.y}),t};ul.prototype.postExecute=function(e){var t=e.shape,n=e.delta,r=e.hints,i=this._modeling;r.layout!==!1&&(q(t.incoming,function(a){i.layoutConnection(a,{connectionEnd:zE(a,t,n)})}),q(t.outgoing,function(a){i.layoutConnection(a,{connectionStart:FE(a,t,n)})})),r.recurse!==!1&&this.moveChildren(e)};ul.prototype.revert=function(e){var t=e.shape,n=e.oldParent,r=e.oldParentIndex,i=e.delta;return qn(n.children,t,r),J(t,{parent:n,x:t.x-i.x,y:t.y-i.y}),t};ul.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};ul.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Op(e){this._modeling=e}Op.$inject=["modeling"];Op.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,r=e.connection,i=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return _t(i)&&(e.oldWaypoints=r.waypoints,r.waypoints=i),t&&(e.oldSource=r.source,r.source=t),n&&(e.oldTarget=r.target,r.target=n),r};Op.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,r=e.newTarget,i=e.dockingOrPoints,a=e.hints||{},s={};a.connectionStart&&(s.connectionStart=a.connectionStart),a.connectionEnd&&(s.connectionEnd=a.connectionEnd),a.layoutConnection!==!1&&(n&&(!r||a.docking==="source")&&(s.connectionStart=s.connectionStart||_R(_t(i)?i[0]:i)),r&&(!n||a.docking==="target")&&(s.connectionEnd=s.connectionEnd||_R(_t(i)?i[i.length-1]:i)),a.newWaypoints&&(s.waypoints=a.newWaypoints),this._modeling.layoutConnection(t,s))};Op.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,r=e.oldWaypoints,i=e.connection;return t&&(i.source=t),n&&(i.target=n),r&&(i.waypoints=r),i};function _R(e){return e.original||e}function Hs(e,t){this._modeling=e,this._rules=t}Hs.$inject=["modeling","rules"];Hs.prototype.preExecute=function(e){var t=this,n=this._modeling,r=this._rules,i=e.oldShape,a=e.newData,s=e.hints||{},c;function l(m,g,v){return r.allowed("connection.reconnect",{connection:v,source:m,target:g})}var u={x:a.x,y:a.y},d={x:i.x,y:i.y,width:i.width,height:i.height};c=e.newShape=e.newShape||t.createShape(a,u,i.parent,s),i.host&&n.updateAttachment(c,i.host);var h;s.moveChildren!==!1&&(h=i.children.slice(),n.moveElements(h,{x:0,y:0},c,s));var f=i.incoming.slice(),p=i.outgoing.slice();q(f,function(m){var g=m.source,v=l(g,c,m);v&&t.reconnectEnd(m,c,Mx(m,c,d),s)}),q(p,function(m){var g=m.target,v=l(c,g,m);v&&t.reconnectStart(m,c,Ix(m,c,d),s)})};Hs.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Hs.prototype.execute=function(e){};Hs.prototype.revert=function(e){};Hs.prototype.createShape=function(e,t,n,r){return this._modeling.createShape(e,t,n,r)};Hs.prototype.reconnectStart=function(e,t,n,r){this._modeling.reconnectStart(e,t,n,r)};Hs.prototype.reconnectEnd=function(e,t,n,r){this._modeling.reconnectEnd(e,t,n,r)};function Rp(e){this._modeling=e}Rp.$inject=["modeling"];Rp.prototype.execute=function(e){var t=e.shape,n=e.newBounds,r=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(r&&(n.width<r.width||n.height<r.height))throw new Error("width and height cannot be less than minimum height and width");if(!r&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},J(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};Rp.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,r=e.oldBounds,i=e.hints||{};i.layout!==!1&&(q(n.incoming,function(a){t.layoutConnection(a,{connectionEnd:Mx(a,n,r)})}),q(n.outgoing,function(a){t.layoutConnection(a,{connectionStart:Ix(a,n,r)})}))};Rp.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return J(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function Go(e){this._modeling=e}Go.$inject=["modeling"];Go.prototype.preExecute=function(e){var t=e.delta,n=e.direction,r=e.movingShapes,i=e.resizingShapes,a=e.start,s={};this.moveShapes(r,t),q(i,function(c){s[c.id]=WNe(c)}),this.resizeShapes(i,t,n),this.updateConnectionWaypoints(xNe(r,i),t,n,a,r,i,s)};Go.prototype.execute=function(){};Go.prototype.revert=function(){};Go.prototype.moveShapes=function(e,t){var n=this;q(e,function(r){n._modeling.moveShape(r,t,null,{autoResize:!1,layout:!1,recurse:!1})})};Go.prototype.resizeShapes=function(e,t,n){var r=this;q(e,function(i){var a=bNe(i,n,t);r._modeling.resizeShape(i,a,null,{attachSupport:!1,autoResize:!1,layout:!1})})};Go.prototype.updateConnectionWaypoints=function(e,t,n,r,i,a,s){var c=this,l=i.concat(a);q(e,function(u){var d=u.source,h=u.target,f=GNe(u),p=EF(n),m={};oo(l,d)&&oo(l,h)?(f=gi(f,function(g){return SR(g,r,n)&&(g[p]=g[p]+t[p]),g.original&&SR(g.original,r,n)&&(g.original[p]=g.original[p]+t[p]),g}),c._modeling.updateWaypoints(u,f,{labelBehavior:!1})):(oo(l,d)||oo(l,h))&&(oo(i,d)?m.connectionStart=FE(u,d,t):oo(i,h)?m.connectionEnd=zE(u,h,t):oo(a,d)?m.connectionStart=Ix(u,d,s[d.id]):oo(a,h)&&(m.connectionEnd=Mx(u,h,s[h.id])),c._modeling.layoutConnection(u,m))})};function jR(e){return J({},e)}function GNe(e){return gi(e.waypoints,function(t){return t=jR(t),t.original&&(t.original=jR(t.original)),t})}function EF(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function SR(e,t,n){var r=EF(n);if(/e|s/.test(n))return e[r]>t;if(/n|w/.test(n))return e[r]<t}function oo(e,t){return e.indexOf(t)!==-1}function WNe(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Xx(e){this._modeling=e}Xx.$inject=["modeling"];Xx.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=NF(n),t.collapsed=!t.collapsed;var r=PF(n,t.collapsed);return[t].concat(r)};Xx.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,r=t.children,i=kF(r,n);return t.collapsed=!t.collapsed,[t].concat(i)};function NF(e){var t={};return q(e,function(n){t[n.id]=n.hidden,n.children&&(t=J({},t,NF(n.children)))}),t}function PF(e,t){var n=[];return q(e,function(r){r.hidden=t,n=n.concat(r),r.children&&(n=n.concat(PF(r.children,r.collapsed||t)))}),n}function kF(e,t){var n=[];return q(e,function(r){r.hidden=t[r.id],n=n.concat(r),r.children&&(n=n.concat(kF(r.children,t)))}),n}function Zx(e){this._modeling=e}Zx.$inject=["modeling"];Zx.prototype.execute=function(e){var t=e.shape,n=e.newHost,r=t.host;return e.oldHost=r,e.attacherIdx=CF(r,t),AF(n,t),t.host=n,t};Zx.prototype.revert=function(e){var t=e.shape,n=e.newHost,r=e.oldHost,i=e.attacherIdx;return t.host=r,CF(n,t),AF(r,t,i),t};function CF(e,t){return Dn(e&&e.attachers,t)}function AF(e,t,n){if(e){var r=e.attachers;r||(e.attachers=r=[]),qn(r,t,n)}}function vN(){}vN.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};vN.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function Ut(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var r=this;e.on("diagram.init",function(){r.registerHandlers(n)})}Ut.$inject=["eventBus","elementFactory","commandStack"];Ut.prototype.getHandlers=function(){return{"shape.append":Gx,"shape.create":Vo,"shape.delete":Ap,"shape.move":ul,"shape.resize":Rp,"shape.replace":Hs,"shape.toggleCollapse":Xx,spaceTool:Go,"label.create":kp,"connection.create":Wx,"connection.delete":Cp,"connection.move":mN,"connection.layout":Kx,"connection.updateWaypoints":vN,"connection.reconnect":Op,"elements.create":fN,"elements.move":Yx,"elements.delete":pN,"elements.distribute":qx,"elements.align":Vx,"element.updateAttachment":Zx}};Ut.prototype.registerHandlers=function(e){q(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};Ut.prototype.moveShape=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=null);var a={shape:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("shape.move",a)};Ut.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};Ut.prototype.moveElements=function(e,t,n,r){r=r||{};var i=r.attach,a=n,s;i===!0?(s=n,a=n.parent):i===!1&&(s=null);var c={shapes:e,delta:t,newParent:a,newHost:s,hints:r};this._commandStack.execute("elements.move",c)};Ut.prototype.moveConnection=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=void 0);var a={connection:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("connection.move",a)};Ut.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};Ut.prototype.createConnection=function(e,t,n,r,i,a){typeof n=="object"&&(a=i,i=r,r=n,n=void 0),r=this._create("connection",r);var s={source:e,target:t,parent:i,parentIndex:n,connection:r,hints:a};return this._commandStack.execute("connection.create",s),s.connection};Ut.prototype.createShape=function(e,t,n,r,i){typeof r!="number"&&(i=r,r=void 0),i=i||{};var a=i.attach,s,c;e=this._create("shape",e),a?(s=n.parent,c=n):s=n;var l={position:t,shape:e,parent:s,parentIndex:r,host:c,hints:i};return this._commandStack.execute("shape.create",l),l.shape};Ut.prototype.createElements=function(e,t,n,r,i){_t(e)||(e=[e]),typeof r!="number"&&(i=r,r=void 0),i=i||{};var a={position:t,elements:e,parent:n,parentIndex:r,hints:i};return this._commandStack.execute("elements.create",a),a.elements};Ut.prototype.createLabel=function(e,t,n,r){n=this._create("label",n);var i={labelTarget:e,position:t,parent:r||e.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape};Ut.prototype.appendShape=function(e,t,n,r,i){i=i||{},t=this._create("shape",t);var a={source:e,position:n,target:r,shape:t,connection:i.connection,connectionParent:i.connectionParent,hints:i};return this._commandStack.execute("shape.append",a),a.shape};Ut.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};Ut.prototype.distributeElements=function(e,t,n){var r={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",r)};Ut.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};Ut.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};Ut.prototype.replaceShape=function(e,t,n){var r={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape};Ut.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};Ut.prototype.resizeShape=function(e,t,n,r){var i={shape:e,newBounds:t,minBounds:n,hints:r};this._commandStack.execute("shape.resize",i)};Ut.prototype.createSpace=function(e,t,n,r,i){var a={delta:n,direction:r,movingShapes:e,resizingShapes:t,start:i};this._commandStack.execute("spaceTool",a)};Ut.prototype.updateWaypoints=function(e,t,n){var r={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)};Ut.prototype.reconnect=function(e,t,n,r,i){var a={connection:e,newSource:t,newTarget:n,dockingOrPoints:r,hints:i||{}};this._commandStack.execute("connection.reconnect",a)};Ut.prototype.reconnectStart=function(e,t,n,r){r||(r={}),this.reconnect(e,t,e.target,n,J(r,{docking:"source"}))};Ut.prototype.reconnectEnd=function(e,t,n,r){r||(r={}),this.reconnect(e,e.source,t,n,J(r,{docking:"target"}))};Ut.prototype.connect=function(e,t,n,r){return this.createConnection(e,t,n||{},e.parent,r)};Ut.prototype._create=function(e,t){return mH(t)?t:this._elementFactory.create(e,t)};Ut.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function $p(e){this._elementRegistry=e}$p.$inject=["elementRegistry"];$p.prototype.execute=function(e){var t=e.element,n=e.moddleElement,r=e.properties;if(!n)throw new Error("<moddleElement> required");var i=e.changed||this._getVisualReferences(n).concat(t),a=e.oldProperties||qNe(n,yw(r));return TF(n,r),e.oldProperties=a,e.changed=i,i};$p.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,r=e.changed;return TF(n,t),r};$p.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return C(e,"bpmn:DataObject")?KNe(e,t):[]};function qNe(e,t){return $o(t,function(n,r){return n[r]=e.get(r),n},{})}function TF(e,t){q(t,function(n,r){e.set(r,n)})}function KNe(e,t){return t.filter(function(n){return C(n,"bpmn:DataObjectReference")&&Ce(n).dataObjectRef===e})}var vh="default",js="id",OF="di",YNe={width:0,height:0};function Ip(e,t,n,r){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=r}Ip.$inject=["elementRegistry","moddle","modeling","textRenderer"];Ip.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var r=this._elementRegistry,i=this._moddle.ids,a=t.businessObject,s=ePe(e.properties),c=e.oldProperties||XNe(t,s);return RF(s,a)&&(i.unclaim(a[js]),r.updateId(t,s[js]),i.claim(s[js],a)),vh in s&&(s[vh]&&n.push(r.get(s[vh].id)),a[vh]&&n.push(r.get(a[vh].id))),$F(t,s),e.oldProperties=c,e.changed=n,n};Ip.prototype.postExecute=function(e){var t=e.element,n=t.label,r=n&&Ce(n).name;if(r){var i=this._textRenderer.getExternalLabelBounds(n,r);this._modeling.resizeShape(n,i,YNe)}};Ip.prototype.revert=function(e){var t=e.element,n=e.properties,r=e.oldProperties,i=t.businessObject,a=this._elementRegistry,s=this._moddle.ids;return $F(t,r),RF(n,i)&&(s.unclaim(n[js]),a.updateId(t,r[js]),s.claim(r[js],i)),e.changed};function RF(e,t){return js in e&&e[js]!==t[js]}function XNe(e,t){var n=yw(t),r=e.businessObject,i=zt(e);return $o(n,function(a,s){return s!==OF?a[s]=r.get(s):a[s]=ZNe(i,yw(t.di)),a},{})}function ZNe(e,t){return $o(t,function(n,r){return n[r]=e&&e.get(r),n},{})}function $F(e,t){var n=e.businessObject,r=zt(e);q(t,function(i,a){a!==OF?n.set(a,i):r&&JNe(r,i)})}function JNe(e,t){q(t,function(n,r){e.set(r,n)})}var QNe=["default"];function ePe(e){var t=J({},e);return QNe.forEach(function(n){n in e&&(t[n]=Ce(t[n]))}),t}function Jx(e,t){this._canvas=e,this._modeling=t}Jx.$inject=["canvas","modeling"];Jx.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=t.getRootElement(),a=i.businessObject,s=a.$parent,c=zt(i);return t.setRootElement(n),t.removeRootElement(i),qn(s.rootElements,r),r.$parent=s,Dn(s.rootElements,a),a.$parent=null,i.di=null,c.bpmnElement=r,n.di=c,e.oldRoot=i,[]};Jx.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=e.oldRoot,a=i.businessObject,s=r.$parent,c=zt(n);return t.setRootElement(i),t.removeRootElement(n),Dn(s.rootElements,r),r.$parent=null,qn(s.rootElements,a),a.$parent=s,n.di=null,c.bpmnElement=a,i.di=c,[]};function yN(e,t){this._modeling=e,this._spaceTool=t}yN.$inject=["modeling","spaceTool"];yN.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,r=e.shape,i=e.location,a=Ri(r),s=a===r,c=s?r:r.parent,l=zo(c),u=dr(r);if(u?i==="left"?i="top":i==="right"&&(i="bottom"):i==="top"?i="left":i==="bottom"&&(i="right"),!l.length){var d=u?{x:r.x+Ai,y:r.y,width:r.width-Ai,height:r.height}:{x:r.x,y:r.y+Ai,width:r.width,height:r.height-Ai};n.createShape({type:"bpmn:Lane",isHorizontal:u},d,c)}var h=[];my(a,function(_){return h.push(_),_.label&&h.push(_.label),_===r?[]:St(_.children,function(j){return j!==r})});var f,p,m,g,v;i==="top"?(f=-120,p=r.y,m=p+10,g="n",v="y"):i==="left"?(f=-120,p=r.x,m=p+10,g="w",v="x"):i==="bottom"?(f=120,p=r.y+r.height,m=p-10,g="s",v="y"):i==="right"&&(f=120,p=r.x+r.width,m=p-10,g="e",v="x");var b=t.calculateAdjustments(h,v,f,m),w=u?{x:0,y:f}:{x:f,y:0};t.makeSpace(b.movingShapes,b.resizingShapes,w,g,m);var y=u?{x:r.x+(s?Ai:0),y:p-(i==="top"?120:0),width:r.width-(s?Ai:0),height:120}:{x:p-(i==="left"?120:0),y:r.y+(s?Ai:0),width:120,height:r.height-(s?Ai:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:u},y,c)};function xN(e){this._modeling=e}xN.$inject=["modeling"];xN.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,r=e.count,i=zo(n),a=i.length;if(a>r)throw new Error(`more than <${r}> child lanes`);var s=dr(n),c=s?n.height:n.width,l=Math.round(c/r),u,d,h,f;for(f=0;f<r;f++)f===r-1?u=c-l*f:u=l,d=s?{x:n.x+Ai,y:n.y+f*l,width:n.width-Ai,height:u}:{x:n.x+f*l,y:n.y+Ai,width:u,height:n.height-Ai},f<a?t.resizeShape(i[f],d):(h={type:"bpmn:Lane",isHorizontal:s},t.createShape(h,d,n))};function Mp(e,t){this._modeling=e,this._spaceTool=t}Mp.$inject=["modeling","spaceTool"];Mp.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,r=e.balanced;r!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};Mp.prototype.resizeBalanced=function(e,t){var n=this._modeling,r=kSe(e,t);n.resizeShape(e,t),r.forEach(function(i){n.resizeShape(i.shape,i.newBounds)})};Mp.prototype.resizeSpace=function(e,t){var n=this._spaceTool,r=Ge(e),i=Ge(t),a=$B(i,r),s=Ri(e),c=[],l=[];my(s,function(m){return c.push(m),(C(m,"bpmn:Lane")||C(m,"bpmn:Participant"))&&l.push(m),m.children});var u,d,h,f,p;(a.bottom||a.top)&&(u=a.bottom||a.top,d=e.y+(a.bottom?e.height:0)+(a.bottom?-10:10),h=a.bottom?"s":"n",f=a.top>0||a.bottom<0?-u:u,p=n.calculateAdjustments(c,"y",f,d),n.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:u},h)),(a.left||a.right)&&(u=a.right||a.left,d=e.x+(a.right?e.width:0)+(a.right?-10:100),h=a.right?"e":"w",f=a.left>0||a.right<0?-u:u,p=n.calculateAdjustments(l,"x",f,d),n.makeSpace(p.movingShapes,p.resizingShapes,{x:u,y:0},h))};var Vf="flowNodeRef",bN="lanes";function Dp(e){this._elementRegistry=e}Dp.$inject=["elementRegistry"];Dp.prototype._computeUpdates=function(e,t){var n=[],r=[],i={},a=[];function s(d,h){var f=Ge(h),p={x:d.x+d.width/2,y:d.y+d.height/2};return p.x>f.left&&p.x<f.right&&p.y>f.top&&p.y<f.bottom}function c(d){n.indexOf(d)===-1&&(a.push(d),n.push(d))}function l(d){var h=Ri(d);return i[h.id]||(i[h.id]=Rx(h)),i[h.id]}function u(d){if(!d.parent)return[];var h=l(d);return h.filter(function(f){return s(d,f)}).map(function(f){return f.businessObject})}return t.forEach(function(d){var h=Ri(d);if(!(!h||n.indexOf(h)!==-1)){var f=h.children.filter(function(p){return C(p,"bpmn:FlowNode")});f.forEach(c),n.push(h)}}),e.forEach(c),a.forEach(function(d){var h=d.businessObject,f=h.get(bN),p=f.slice(),m=u(d);r.push({flowNode:h,remove:p,add:m})}),t.forEach(function(d){var h=d.businessObject;d.parent||h.get(Vf).forEach(function(f){r.push({flowNode:f,remove:[h],add:[]})})}),r};Dp.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var r=n.flowNode,i=r.get(bN);n.remove.forEach(function(a){Dn(i,a),Dn(a.get(Vf),r)}),n.add.forEach(function(a){qn(i,a),qn(a.get(Vf),r)})}),[]};Dp.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var r=n.flowNode,i=r.get(bN);n.add.forEach(function(a){Dn(i,a),Dn(a.get(Vf),r)}),n.remove.forEach(function(a){qn(i,a),qn(a.get(Vf),r)})}),[]};function Qx(e){this._moddle=e}Qx.$inject=["moddle"];Qx.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.claim(n,r):t.unclaim(n),[]};Qx.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.unclaim(n):t.claim(n,r),[]};var tPe={fill:void 0,stroke:void 0};function wN(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(uy(t)){var n=nPe(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}wN.$inject=["commandStack"];wN.prototype.postExecute=function(e){var t=e.elements,n=e.colors||tPe,r=this,i={};"fill"in n&&J(i,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&J(i,{"border-color":this._normalizeColor(n.stroke)}),q(t,function(a){var s=qt(a)?Fa(i,["border-color"]):i,c=zt(a);if(rPe(s),Pt(a))r._commandStack.execute("element.updateModdleProperties",{element:a,moddleElement:c.label,properties:{color:i["border-color"]}});else{if(!ft(c,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;r._commandStack.execute("element.updateProperties",{element:a,properties:{di:s}})}})};function nPe(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function rPe(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var iPe={width:0,height:0};function IF(e,t,n){function r(l,u){var d=l.label||l,h=l.labelTarget||l;return gH(d,u),[d,h]}function i(l){var u=l.element,d=u.businessObject,h=l.newLabel;if(!Pt(u)&&bu(u)&&!py(u)&&!ER(h)){var f=7,p=_I(u);p={x:p.x,y:p.y+f},e.createLabel(u,p,{id:d.id+"_label",businessObject:d,di:u.di})}}function a(l){return l.oldLabel=Vc(l.element),r(l.element,l.newLabel)}function s(l){return r(l.element,l.oldLabel)}function c(l){var u=l.element,d=u.label||u,h=l.newLabel,f=l.newBounds,p=l.hints||{};if(!(!Pt(d)&&!C(d,"bpmn:TextAnnotation"))){if(Pt(d)&&ER(h)){p.removeShape!==!1&&e.removeShape(d,{unsetLabel:!1});return}var m=Vc(u);typeof f>"u"&&(f=t.getExternalLabelBounds(d,m)),f&&e.resizeShape(d,f,iPe)}}this.preExecute=i,this.execute=a,this.revert=s,this.postExecute=c}IF.$inject=["modeling","textRenderer","bpmnFactory"];function ER(e){return!e||!e.trim()}function yr(e,t,n,r){Ut.call(this,e,t,n),this._bpmnRules=r}Ie(yr,Ut);yr.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];yr.prototype.getHandlers=function(){var e=Ut.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=$p,e["element.updateProperties"]=Ip,e["canvas.updateRoot"]=Jx,e["lane.add"]=yN,e["lane.resize"]=Mp,e["lane.split"]=xN,e["lane.updateRefs"]=Dp,e["id.updateClaim"]=Qx,e["element.setColor"]=wN,e["element.updateLabel"]=IF,e};yr.prototype.updateLabel=function(e,t,n,r){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:r||{}})};yr.prototype.connect=function(e,t,n,r){var i=this._bpmnRules;if(n||(n=i.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,r)};yr.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};yr.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};yr.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};yr.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};yr.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};yr.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};yr.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};yr.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};yr.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};yr.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};yr.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function MF(){}MF.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||Qe(t.source||e.source),t.connectionEnd||Qe(t.target||e.target)]};var eg=20,aPe=5,Xv=Math.round,NR=20,sPe={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function oPe(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function cPe(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function DF(e,t,n){var r=vr(t,e,aPe),i=n.split(":")[0],a=Xv((t.x-e.x)/2+e.x),s=Xv((t.y-e.y)/2+e.y),c,l,u=cPe(i,r),d=/h|r|l/.test(i),h=!1,f=!1;return u?(c=d?{x:a,y:e.y}:{x:e.x,y:s},l=d?"h:h":"v:v"):(h=oPe(r,i),l=d?"h:v":"v:h",h?d?(f=s===e.y,c={x:e.x+eg*(/l/.test(i)?-1:1),y:f?s+eg:s}):(f=a===e.x,c={x:f?a+eg:a,y:e.y+eg*(/t/.test(i)?-1:1)}):c={x:a,y:s}),{waypoints:_N(e,c,l).concat(c),directions:l,turnNextDirections:f}}function lPe(e,t,n){return DF(e,t,n)}function uPe(e,t,n){var r=DF(t,e,PR(n));return{waypoints:r.waypoints.slice().reverse(),directions:PR(r.directions),turnNextDirections:r.turnNextDirections}}function dPe(e,t){var n=e.directions.split(":")[1],r=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(r=r=="h"?"v":"h");var i=n+":"+r,a=_N(e.waypoints[e.waypoints.length-1],t.waypoints[0],i);return{waypoints:a,directions:i}}function PR(e){return e.split(":").reverse().join(":")}function hPe(e,t,n){var r=Xv((t.x-e.x)/2+e.x),i=Xv((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:r,y:e.y},{x:r,y:t.y}];if(n==="v:v")return[{x:e.x,y:i},{x:t.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function _N(e,t,n){if(n=n||"h:h",!wPe(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(LF(n)){var r=lPe(e,t,n),i=uPe(e,t,n),a=dPe(r,i);return[].concat(r.waypoints,a.waypoints,i.waypoints)}return hPe(e,t,n)}function fPe(e,t,n){var r=_N(e,t,n);return r.unshift(e),r.push(t),BF(r)}function pPe(e,t,n,r,i){var a=i&&i.preferredLayouts||[],s=vH(a,"straight")[0]||"h:h",c=sPe[s]||0,l=vr(e,t,c),u=bPe(l,s);n=n||Qe(e),r=r||Qe(t);var d=u.split(":"),h=CR(n,e,d[0],_Pe(l)),f=CR(r,t,d[1],l);return fPe(h,f,u)}function mPe(e,t,n,r,i,a){_t(n)&&(i=n,a=r,n=Qe(e),r=Qe(t)),a=J({preferredLayouts:[]},a),i=i||[];var s=a.preferredLayouts,c=s.indexOf("straight")!==-1,l;return l=c&&vPe(e,t,n,r,a),l||(l=a.connectionEnd&&xPe(t,e,r,i),l)||(l=a.connectionStart&&yPe(e,t,n,i),l)?l:!a.connectionStart&&!a.connectionEnd&&i&&i.length?i:pPe(e,t,n,r,a)}function gPe(e,t,n){return e>=t&&e<=n}function kR(e,t,n){var r={x:"width",y:"height"};return gPe(t[e],n[e],n[e]+n[r[e]])}function vPe(e,t,n,r,i){var a={},s,c;return c=vr(e,t),/^(top|bottom|left|right)$/.test(c)?(/top|bottom/.test(c)&&(s="x"),/left|right/.test(c)&&(s="y"),i.preserveDocking==="target"?kR(s,r,e)?(a[s]=r[s],[{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y,original:{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y}},{x:r.x,y:r.y}]):null:kR(s,n,t)?(a[s]=n[s],[{x:n.x,y:n.y},{x:a.x!==void 0?a.x:r.x,y:a.y!==void 0?a.y:r.y,original:{x:a.x!==void 0?a.x:r.x,y:a.y!==void 0?a.y:r.y}}]):null):null}function yPe(e,t,n,r){return jN(e,t,n,r)}function xPe(e,t,n,r){var i=r.slice().reverse();return i=jN(e,t,n,i),i?i.reverse():null}function jN(e,t,n,r){function i(d){return d.length<3?!0:d.length>4?!1:!!dn(d,function(h,f){var p=d[f-1];return p&&gI(h,p)<3})}function a(d,h,f){var p=ps(h,d);switch(p){case"v":return{x:f.x,y:d.y};case"h":return{x:d.x,y:f.y}}return{x:d.x,y:d.y}}function s(d,h,f){var p;for(p=d.length-2;p!==0;p--)if(EP(d[p],h,NR)||EP(d[p],f,NR))return d.slice(p);return d}if(i(r))return null;var c=r[0],l=r.slice(),u;return l[0]=n,l[1]=a(l[1],c,n),u=s(l,e,t),u!==l&&(l=jN(e,t,n,u)),l&&ps(l)?null:l}function bPe(e,t){if(LF(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function wPe(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function LF(e){return e&&/t|r|b|l/.test(e)}function _Pe(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function CR(e,t,n,r){if(n==="h"&&(n=/left/.test(r)?"l":"r"),n==="v"&&(n=/top/.test(r)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function BF(e){return e.reduce(function(t,n,r){var i=t[t.length-1],a=e[r+1];return vI(i,a,n,0)||t.push(n),t},[])}var jPe=-10,SPe=40,EPe={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},NPe={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},SN={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Sh={top:"t",right:"r",bottom:"b",left:"l"};function eb(e){this._elementRegistry=e}Ie(eb,MF);eb.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,r=t.target||e.target,i=t.waypoints||e.waypoints,a=t.connectionStart,s=t.connectionEnd,c=this._elementRegistry,l,u;if(a||(a=AR(i&&i[0],n)),s||(s=AR(i&&i[i.length-1],r)),(C(e,"bpmn:Association")||C(e,"bpmn:DataAssociation"))&&i&&!TR(n,r))return[].concat([a],i.slice(1,-1),[s]);var d=uB(n,c)?EPe:NPe;return C(e,"bpmn:MessageFlow")?l=kPe(n,r,d):(C(e,"bpmn:SequenceFlow")||TR(n,r))&&(n===r?l={preferredLayouts:$Pe(n,e,d)}:C(n,"bpmn:BoundaryEvent")?l={preferredLayouts:IPe(n,r,s,d)}:Gf(n)||Gf(r)?l={preferredLayouts:d.subProcess,preserveDocking:APe(n)}:C(n,"bpmn:Gateway")?l={preferredLayouts:d.fromGateway}:C(r,"bpmn:Gateway")?l={preferredLayouts:d.toGateway}:l={preferredLayouts:d.default}),l&&(l=J(l,t),u=BF(mPe(n,r,a,s,i,l))),u||[a,s]};function PPe(e){var t=e.host;return vr(Qe(e),t,jPe)}function kPe(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:CPe(e,t)}}function CPe(e,t){return C(t,"bpmn:Participant")?"source":C(e,"bpmn:Participant")?"target":Gf(t)?"source":Gf(e)||C(t,"bpmn:Event")?"target":C(e,"bpmn:Event")?"source":null}function APe(e){return Gf(e)?"target":"source"}function AR(e,t){return e?e.original||e:Qe(t)}function TR(e,t){return C(t,"bpmn:Activity")&&C(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Gf(e){return C(e,"bpmn:SubProcess")&&$t(e)}function kc(e,t){return e===t}function TPe(e,t){return t.indexOf(e)!==-1}function id(e){var t=/right|left/.exec(e);return t&&t[0]}function ad(e){var t=/top|bottom/.exec(e);return t&&t[0]}function OR(e,t){return SN[e]===t}function OPe(e,t){var n=id(e),r=SN[n];return t.indexOf(r)!==-1}function RPe(e,t){var n=ad(e),r=SN[n];return t.indexOf(r)!==-1}function FF(e){return e==="right"||e==="left"}function $Pe(e,t,n){var r=t.waypoints,i=r&&r.length&&vr(r[0],e);return i==="top"?n.loop.fromTop:i==="right"?n.loop.fromRight:i==="left"?n.loop.fromLeft:n.loop.fromBottom}function IPe(e,t,n,r){var i=Qe(e),a=Qe(t),s=PPe(e),c,l,u=kc(e.host,t),d=TPe(s,["top","right","bottom","left"]),h=vr(a,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return u?MPe(s,d,e,t,n,r):(c=DPe(s,h,d,r.isHorizontal),l=LPe(s,h,d,r.isHorizontal),[c+":"+l])}function MPe(e,t,n,r,i,a){var s=t?e:a.isHorizontal?ad(e):id(e),c=Sh[s],l;return t?FF(e)?l=RR("y",n,r,i)?"h":a.boundaryLoop.alternateHorizontalSide:l=RR("x",n,r,i)?"v":a.boundaryLoop.alternateVerticalSide:l=a.boundaryLoop.default,[c+":"+l]}function RR(e,t,n,r){var i=SPe;return!(nw(e,r,n,i)||nw(e,r,{x:n.x+n.width,y:n.y+n.height},i)||nw(e,r,Qe(t),i))}function nw(e,t,n,r){return Math.abs(t[e]-n[e])<r}function DPe(e,t,n,r){if(n)return Sh[e];var i=ad(e),a=id(e),s=ad(t),c=id(t);if(r){if(kc(i,s)||OR(a,c))return Sh[i]}else if(kc(a,c)||OR(i,s))return Sh[a];return Sh[r?a:i]}function LPe(e,t,n,r){return n?FF(e)?OPe(e,t)||kc(e,t)?"h":"v":RPe(e,t)||kc(e,t)?"v":"h":r?kc(ad(e),ad(t))?"h":"v":kc(id(e),id(t))?"v":"h"}eb.$inject=["elementRegistry"];function $R(e){return J({original:e.point.original||e.point},e.actual)}function Wo(e,t){this._elementRegistry=e,this._graphicsFactory=t}Wo.$inject=["elementRegistry","graphicsFactory"];Wo.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var r=this.getDockingPoint(e,t,!0),i=this.getDockingPoint(e,n),a=e.waypoints.slice(r.idx+1,i.idx);return a.unshift($R(r)),a.push($R(i)),a};Wo.prototype.getDockingPoint=function(e,t,n){var r=e.waypoints,i,a,s;return i=n?0:r.length-1,a=r[i],s=this._getIntersection(t,e,n),{point:a,actual:s||a,idx:i}};Wo.prototype._getIntersection=function(e,t,n){var r=this._getShapePath(e),i=this._getConnectionPath(t);return gw(r,i,n)};Wo.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};Wo.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};Wo.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const zF={__init__:["modeling","bpmnUpdater"],__depends__:[REe,ZEe,QEe,eNe,wF,kNe,ANe,MNe,Ha,jI,SF],bpmnFactory:["type",Yi],bpmnUpdater:["type",Xr],elementFactory:["type",Ho],modeling:["type",yr],layouter:["type",eb],connectionDocking:["type",Wo]},IR=Math.round;function tb(e,t,n,r,i,a){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=r,this._layouter=i,this._rules=a}tb.prototype.create=function(e,t,n){const r=this._complexPreview,i=this._connectionDocking,a=this._elementFactory,s=this._eventBus,c=this._layouter,l=this._rules,u=a.createShape(J({type:t},n)),d=s.fire("autoPlace",{source:e,shape:u});if(!d)return;J(u,{x:d.x-IR(u.width/2),y:d.y-IR(u.height/2)});const h=l.allowed("connection.create",{source:e,target:u,hints:{targetParent:e.parent}});let f=null;h&&(f=a.createConnection(h),f.waypoints=c.layoutConnection(f,{source:e,target:u}),f.waypoints=i.getCroppedWaypoints(f,e,u)),r.create({created:[u,f].filter(p=>!mw(p))})};tb.prototype.cleanUp=function(){this._complexPreview.cleanUp()};tb.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const BPe={__depends__:[gE,cSe,zF],__init__:["appendPreview"],appendPreview:["type",tb]};var MR=Math.min,DR=Math.max;function rw(e){e.preventDefault()}function Uh(e){e.stopPropagation()}function FPe(e){return e.nodeType===Node.TEXT_NODE}function zPe(e){return[].slice.call(e)}function wa(e){this.container=e.container,this.parent=ur('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=An("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=Hc(this.autoResize,this),this.handlePaste=Hc(this.handlePaste,this)}wa.prototype.create=function(e,t,n,r){var i=this,a=this.parent,s=this.content,c=this.container;r=this.options=r||{},t=this.style=t||{};var l=Fa(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);J(a.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},l);var u=Fa(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return J(s.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},u),r.centerVertically&&J(s.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},u),s.innerText=n,at.bind(s,"keydown",this.keyHandler),at.bind(s,"mousedown",Uh),at.bind(s,"paste",i.handlePaste),r.autoResize&&at.bind(s,"input",this.autoResize),r.resizable&&this.resizable(t),c.appendChild(a),this.setSelection(s.lastChild,s.lastChild&&s.lastChild.length),a};wa.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var r;if(e.clipboardData?r=e.clipboardData.getData("text/plain"):r=window.clipboardData.getData("Text"),this.insertText(r),t.autoResize){var i=this.autoResize(n);i&&this.resizeHandler(i)}};wa.prototype.insertText=function(e){e=UPe(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};wa.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,r=t.endContainer,i=t.startOffset,a=t.endOffset,s=t.commonAncestorContainer,c=zPe(s.childNodes),l,u;if(FPe(s)){var d=n.textContent;n.textContent=d.substring(0,i)+e+d.substring(a),l=n,u=i+e.length}else if(n===this.content&&r===this.content){var h=document.createTextNode(e);this.content.insertBefore(h,c[i]),l=h,u=h.textContent.length}else{var f=c.indexOf(n),p=c.indexOf(r);c.forEach(function(m,g){g===f?m.textContent=n.textContent.substring(0,i)+e+r.textContent.substring(a):g>f&&g<=p&&xu(m)}),l=n,u=i+e.length}l&&u!==void 0&&setTimeout(function(){self.setSelection(l,u)})};wa.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var r=e.getBoundingClientRect(),i=t.scrollHeight;e.style.height=i+"px",this.resizeHandler({width:r.width,height:r.height,dx:0,dy:i-r.height})}};wa.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,i=parseInt(this.style.minHeight)||0,a=parseInt(this.style.maxWidth)||1/0,s=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=ur('<div class="djs-direct-editing-resize-handle"></div>');var c,l,u,d,h=function(m){rw(m),Uh(m),c=m.clientX,l=m.clientY;var g=t.getBoundingClientRect();u=g.width,d=g.height,at.bind(document,"mousemove",f),at.bind(document,"mouseup",p)},f=function(m){rw(m),Uh(m);var g=MR(DR(u+m.clientX-c,r),a),v=MR(DR(d+m.clientY-l,i),s);t.style.width=g+"px",t.style.height=v+"px",e.resizeHandler({width:u,height:d,dx:m.clientX-c,dy:m.clientY-l})},p=function(m){rw(m),Uh(m),at.unbind(document,"mousemove",f,!1),at.unbind(document,"mouseup",p,!1)};at.bind(n,"mousedown",h)}J(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};wa.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),at.unbind(t,"keydown",this.keyHandler),at.unbind(t,"mousedown",Uh),at.unbind(t,"input",this.autoResize),at.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),xu(n)),xu(e)};wa.prototype.getValue=function(){return this.content.innerText.trim()};wa.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};wa.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)};function UPe(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Xi(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new wa({container:t.getContainer(),keyHandler:Hc(this._handleKey,this),resizeHandler:Hc(this._handleResize,this)})}Xi.$inject=["eventBus","canvas"];Xi.prototype.registerProvider=function(e){this._providers.push(e)};Xi.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};Xi.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};Xi.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};Xi.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};Xi.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,r=this.$textbox.getBoundingClientRect(),i=this.getValue(),a=e.context.text;(i!==a||r.height!==n.height||r.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,i,e.context.text,{x:r.left-t.left,y:r.top-t.top,width:r.width,height:r.height})),this._fire("complete"),this.close()}};Xi.prototype.getValue=function(){return this._textbox.getValue()};Xi.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};Xi.prototype._handleResize=function(e){this._fire("resize",e)};Xi.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=dn(this._providers,function(r){return(t=r.activate(e))?r:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const UF={__depends__:[hj],__init__:["directEditing"],directEditing:["type",Xi]};function HPe(e){return function(t){var n=t.target,r=Ce(e),i=r.eventDefinitions&&r.eventDefinitions[0],a=r.$type===n.type,s=(i&&i.$type)===n.eventDefinitionType,c=!!n.triggeredByEvent==!!r.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===$t(e);return!a||!s||!c||!l}}var VPe=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],GPe=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],WPe=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],qPe=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],KPe=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],YPe=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],XPe=[{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}}],HF=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],ZPe=HF,LR=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}],JPe=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],QPe=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],eke=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],tke=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],nke=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],rke=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],ike={"bpmn:MessageEventDefinition":[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}}],"bpmn:TimerEventDefinition":[{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}}],"bpmn:ConditionalEventDefinition":[{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}}],"bpmn:SignalEventDefinition":[{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],"bpmn:ErrorEventDefinition":[{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}}],"bpmn:EscalationEventDefinition":[{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}}],"bpmn:CompensateEventDefinition":[{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}}]};const BR={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function Zi(e,t,n,r,i,a,s,c){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=r,this._bpmnReplace=i,this._rules=a,this._translate=s,this._moddleCopy=c,this._register()}Zi.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];Zi.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};Zi.prototype.getPopupMenuEntries=function(e){var c;var t=e.businessObject,n=this._rules,r=[],i,a=[];if(_t(e)||!n.allowed("shape.replace",{element:e}))return{};var s=HPe(e);return C(t,"bpmn:DataObjectReference")?this._createEntries(e,JPe):C(t,"bpmn:DataStoreReference")&&!C(e.parent,"bpmn:Collaboration")?this._createEntries(e,QPe):(C(t,"bpmn:Event")&&!C(t,"bpmn:BoundaryEvent")&&(i=(c=t.get("eventDefinitions")[0])==null?void 0:c.$type,r=ike[i]||[],!Er(t.$parent)&&C(t.$parent,"bpmn:SubProcess")&&(r=St(r,function(l){return l.target.type!=="bpmn:StartEvent"}))),C(t,"bpmn:StartEvent")&&!C(t.$parent,"bpmn:SubProcess")?(a=St(VPe.concat(r),s),this._createEntries(e,a)):C(t,"bpmn:Participant")?(a=St(rke,function(l){return $t(e)!==l.target.isExpanded}),this._createEntries(e,a)):C(t,"bpmn:StartEvent")&&Er(t.$parent)?(a=St(tke.concat(r),function(l){var u=l.target,d=u.isInterrupting!==!1,h=t.isInterrupting===d;return s(l)||!s(l)&&!h}),this._createEntries(e,a)):C(t,"bpmn:StartEvent")&&!Er(t.$parent)&&C(t.$parent,"bpmn:SubProcess")?(a=St(GPe.concat(r),s),this._createEntries(e,a)):C(t,"bpmn:EndEvent")?(a=St(qPe.concat(r),function(l){var u=l.target;return u.eventDefinitionType=="bpmn:CancelEventDefinition"&&!C(t.$parent,"bpmn:Transaction")?!1:s(l)}),this._createEntries(e,a)):C(t,"bpmn:BoundaryEvent")?(a=St(eke,function(l){var u=l.target;if(u.eventDefinitionType=="bpmn:CancelEventDefinition"&&!C(t.attachedToRef,"bpmn:Transaction"))return!1;var d=u.cancelActivity!==!1,h=t.cancelActivity==d;return s(l)||!s(l)&&!h}),this._createEntries(e,a)):C(t,"bpmn:IntermediateCatchEvent")||C(t,"bpmn:IntermediateThrowEvent")?(a=St(WPe.concat(r),s),this._createEntries(e,a)):C(t,"bpmn:Gateway")?(a=St(KPe,s),this._createEntries(e,a)):C(t,"bpmn:Transaction")?(a=St(HF,s),this._createEntries(e,a)):Er(t)&&$t(e)?(a=St(ZPe,s),this._createEntries(e,a)):C(t,"bpmn:AdHocSubProcess")&&$t(e)?(a=St(XPe,s),this._createEntries(e,a)):C(t,"bpmn:SubProcess")&&$t(e)?(a=St(YPe,s),this._createEntries(e,a)):C(t,"bpmn:SubProcess")&&!$t(e)?(a=St(LR,function(l){var u=l.target.type===e.type,d=l.target.isExpanded===!0;return u===d}),this._createEntries(e,a)):C(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,nke):C(t,"bpmn:FlowNode")?(a=St(LR,s),this._createEntries(e,a)):{})};Zi.prototype.getPopupMenuHeaderEntries=function(e){var t={};return C(e,"bpmn:Activity")&&!Er(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),C(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),C(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),VB(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};Zi.prototype._createEntries=function(e,t){var n={},r=this;return q(t,function(i){n[i.actionName]=r._createEntry(i,e)}),n};Zi.prototype._createSequenceFlowEntries=function(e,t){var n=Ce(e),r={},i=this._modeling,a=this._moddle,s=this;return q(t,function(c){switch(c.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(C(n.sourceRef,"bpmn:ExclusiveGateway")||C(n.sourceRef,"bpmn:InclusiveGateway")||C(n.sourceRef,"bpmn:ComplexGateway")||C(n.sourceRef,"bpmn:Activity"))&&(r={...r,[c.actionName]:s._createEntry(c,e,function(){i.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&C(n.sourceRef,"bpmn:Activity")&&(r={...r,[c.actionName]:s._createEntry(c,e,function(){var l=a.create("bpmn:FormalExpression",{body:""});i.updateProperties(e,{conditionExpression:l})})});break;default:C(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(r={...r,[c.actionName]:s._createEntry(c,e,function(){i.updateProperties(e,{conditionExpression:void 0})})}),(C(n.sourceRef,"bpmn:ExclusiveGateway")||C(n.sourceRef,"bpmn:InclusiveGateway")||C(n.sourceRef,"bpmn:ComplexGateway")||C(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(r={...r,[c.actionName]:s._createEntry(c,e,function(){i.updateProperties(e.source,{default:void 0})})})}}),r};Zi.prototype._createEntry=function(e,t,n){var r=this._translate,i=this._bpmnReplace.replaceElement,a=function(){return i(t,e.target)},s=e.label;return s&&typeof s=="function"&&(s=s(t)),n=n||a,{label:r(s),className:e.className,action:n}};Zi.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function r(u,d){if(d.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}var h=e.businessObject.get("loopCharacteristics");h&&C(h,d.options.loopCharacteristics)?t._modeling.updateModdleProperties(e,h,{isSequential:d.options.isSequential}):(h=t._moddle.create(d.options.loopCharacteristics,{isSequential:d.options.isSequential}),t._modeling.updateProperties(e,{loopCharacteristics:h}))}var i=Ce(e),a=i.loopCharacteristics,s,c,l;return a&&(s=a.isSequential,c=a.isSequential===void 0,l=a.isSequential!==void 0&&!a.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:l,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:s,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:c,action:r,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};Zi.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,r=e.businessObject.dataObjectRef;if(!r)return{};function i(s,c){t._modeling.updateModdleProperties(e,r,{isCollection:!c.active})}var a=r.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:a,action:i}}};Zi.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,r=this._translate;function i(s,c){var l=c.active,u;l||(u=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:u})}var a=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:r("Participant multiplicity"),active:!!a,action:i}}};Zi.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=Ce(e),r=this,i=GB(e),a=C(e,"bpmn:BoundaryEvent")?BR["intermediate-event-non-interrupting"]:BR["start-event-non-interrupting"],s=!n[i];return{"toggle-non-interrupting":{imageHtml:a,title:t("Toggle non-interrupting"),active:s,action:function(){r._modeling.updateProperties(e,{[i]:!!s})}}}};const ake={__depends__:[fE,wF,gE],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",Zi]};function Lp(e,t,n,r,i,a,s,c,l,u,d,h,f){e=e||{},r.registerProvider(this),this._contextPad=r,this._modeling=i,this._elementFactory=a,this._connect=s,this._create=c,this._popupMenu=l,this._canvas=u,this._rules=d,this._translate=h,this._eventBus=n,this._appendPreview=f,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(p){var m=p.context,g=m.shape;if(!(!Gh(p)||!r.isOpen(g))){var v=r.getEntries(g);v.replace&&v.replace.action.click(p,g)}}),n.on("contextPad.close",function(){f.cleanUp()})}Lp.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];Lp.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&J(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(r,i){t.removeElements(i.slice())}}}}),n};Lp.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return _t(t)?cy(e,n=>t.includes(n)):t};Lp.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,r=this._elementFactory,i=this._connect,a=this._create,s=this._popupMenu,c=this._autoPlace,l=this._translate,u=this._appendPreview,d={};if(e.type==="label")return this._isDeleteAllowed([e])&&J(d,m()),d;var h=e.businessObject;function f(y,_){i.start(y,_)}function p(y,_){n.removeElements([_])}function m(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:l("Delete"),action:{click:p}}}}function g(y){var _=5,j=t.getPad(y).html,S=j.getBoundingClientRect(),E={x:S.left,y:S.bottom+_};return E}function v(y,_,j,S){function E(T,A){var R=r.createShape(J({type:y},S));a.start(T,R,{source:A})}var P=c?function(T,A){var R=r.createShape(J({type:y},S));c.append(A,R)}:E,k=c?function(T,A){return u.create(A,y,S),()=>{u.cleanUp()}}:null;return{group:"model",className:_,title:j,action:{dragstart:E,click:P,hover:k}}}function b(y){return function(_,j){n.splitLane(j,y),t.open(j,!0)}}if(ft(h,["bpmn:Lane","bpmn:Participant"])&&$t(e)){var w=zo(e);J(d,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:l("Add lane above"),action:{click:function(y,_){n.addLane(_,"top")}}}}),w.length<2&&((dr(e)?e.height>=120:e.width>=120)&&J(d,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:l("Divide into two lanes"),action:{click:b(2)}}}),(dr(e)?e.height>=180:e.width>=180)&&J(d,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:l("Divide into three lanes"),action:{click:b(3)}}})),J(d,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:l("Add lane below"),action:{click:function(y,_){n.addLane(_,"bottom")}}}})}return C(h,"bpmn:FlowNode")&&(C(h,"bpmn:EventBasedGateway")?J(d,{"append.receive-task":v("bpmn:ReceiveTask","bpmn-icon-receive-task",l("Append receive task")),"append.message-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",l("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",l("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",l("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",l("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):FR(h,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?J(d,{"append.compensation-activity":v("bpmn:Task","bpmn-icon-task",l("Append compensation activity"),{isForCompensation:!0})}):!C(h,"bpmn:EndEvent")&&!h.isForCompensation&&!FR(h,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Er(h)&&J(d,{"append.end-event":v("bpmn:EndEvent","bpmn-icon-end-event-none",l("Append end event")),"append.gateway":v("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",l("Append gateway")),"append.append-task":v("bpmn:Task","bpmn-icon-task",l("Append task")),"append.intermediate-event":v("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",l("Append intermediate/boundary event"))})),s.isEmpty(e,"bpmn-replace")||J(d,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:l("Change element"),action:{click:function(y,_){var j=J(g(_),{cursor:{x:y.x,y:y.y}});s.open(_,"bpmn-replace",j,{title:l("Change element"),width:300,search:!0})}}}}),C(h,"bpmn:SequenceFlow")&&J(d,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),C(h,"bpmn:MessageFlow")&&J(d,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),ft(h,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&J(d,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect to other element"),action:{click:f,dragstart:f}}}),C(h,"bpmn:TextAnnotation")&&J(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using association"),action:{click:f,dragstart:f}}}),ft(h,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&J(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using data input association"),action:{click:f,dragstart:f}}}),C(h,"bpmn:Group")&&J(d,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),this._isDeleteAllowed([e])&&J(d,m()),d};function FR(e,t,n){var r=e.$instanceOf(t),i=!1,a=e.eventDefinitions||[];return q(a,function(s){s.$type===n&&(i=!0)}),r&&i}const ske={__depends__:[BPe,UF,B3,Ha,wE,zx,ake],__init__:["contextPadProvider"],contextPadProvider:["type",Lp]};var oke={horizontal:["x","width"],vertical:["y","height"]},zR=5;function Vs(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var r=t.allowed("elements.distribute",{elements:n});return _t(r)?r:r?n:[]})}Vs.$inject=["modeling","rules"];Vs.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};Vs.prototype.trigger=function(e,t){var n=this._modeling,r,i;if(!(e.length<3)&&(this._setOrientation(t),i=this._filterElements(e),r=this._createGroups(i),!(r.length<=2)))return n.distributeElements(r,this._axis,this._dimension),r};Vs.prototype._filterElements=function(e){var t=this._filters,n=this._axis,r=this._dimension,i=[].concat(e);return t.length?(q(t,function(a){i=a(i,n,r)}),i):e};Vs.prototype._createGroups=function(e){var t=[],n=this,r=this._axis,i=this._dimension;if(!r)throw new Error('must have a defined "axis" and "dimension"');var a=Ps(e,r);return q(a,function(s,c){var l=n._findRange(s,r,i),u,d=t[t.length-1];d&&n._hasIntersection(d.range,l)?t[t.length-1].elements.push(s):(u={range:l,elements:[s]},t.push(u))}),t};Vs.prototype._setOrientation=function(e){var t=oke[e];this._axis=t[0],this._dimension=t[1]};Vs.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};Vs.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+zR,max:t+n-zR}};const cke={__init__:["distributeElements"],distributeElements:["type",Vs]};function nb(e){qi.call(this,e)}nb.$inject=["eventBus"];Ie(nb,qi);nb.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=St(t,function(n){var r=ft(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||r)}),t=ly(t),t.length<3?!1:t})};var UR={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},lke=900;function Bp(e,t,n,r){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",lke,this)}Bp.$inject=["popupMenu","distributeElements","translate","rules"];Bp.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&J(t,this._getEntries(e)),t};Bp.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Bp.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,r=this._popupMenu,i={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:UR.horizontal,action:function(a,s){t.trigger(e,"horizontal"),r.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:UR.vertical,action:function(a,s){t.trigger(e,"vertical"),r.close()}}};return i};const uke={__depends__:[fE,cke],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",nb],distributeElementsMenuProvider:["type",Bp]};var VF="is not a registered action",dke="is already registered";function Ji(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}Ji.$inject=["eventBus","injector"];Ji.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),r=e.get("selection",!1),i=e.get("zoomScroll",!1),a=e.get("copyPaste",!1),s=e.get("canvas",!1),c=e.get("rules",!1),l=e.get("keyboardMove",!1),u=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),a&&r&&this.register("copy",function(){var d=r.get();if(d.length)return a.copy(d)}),a&&this.register("paste",function(){a.paste()}),i&&this.register("stepZoom",function(d){i.stepZoom(d.value)}),s&&this.register("zoom",function(d){s.zoom(d.value)}),n&&r&&c&&this.register("removeSelection",function(){var d=r.get();if(d.length){var h=c.allowed("elements.delete",{elements:d}),f;h!==!1&&(_t(h)?f=h:f=d,f.length&&n.removeElements(f.slice()))}}),l&&this.register("moveCanvas",function(d){l.moveCanvas(d)}),u&&this.register("moveSelection",function(d){u.moveSelection(d.direction,d.accelerated)})};Ji.prototype.trigger=function(e,t){if(!this._actions[e])throw EN(e,VF);return this._actions[e](t)};Ji.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);q(e,function(r,i){n._registerAction(i,r)})};Ji.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw EN(e,dke);this._actions[e]=t};Ji.prototype.unregister=function(e){if(!this.isRegistered(e))throw EN(e,VF);this._actions[e]=void 0};Ji.prototype.getActions=function(){return Object.keys(this._actions)};Ji.prototype.isRegistered=function(e){return!!this._actions[e]};function EN(e,t){return new Error(e+" "+t)}const hke={__init__:["editorActions"],editorActions:["type",Ji]};function rb(e){e.invoke(Ji,this)}Ie(rb,Ji);rb.$inject=["injector"];rb.prototype._registerDefaultActions=function(e){Ji.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),r=e.get("selection",!1),i=e.get("spaceTool",!1),a=e.get("lassoTool",!1),s=e.get("handTool",!1),c=e.get("globalConnect",!1),l=e.get("distributeElements",!1),u=e.get("alignElements",!1),d=e.get("directEditing",!1),h=e.get("searchPad",!1),f=e.get("modeling",!1),p=e.get("contextPad",!1);t&&n&&r&&this._registerAction("selectElements",function(){var m=t.getRootElement(),g=n.filter(function(v){return v!==m});return r.select(g),g}),i&&this._registerAction("spaceTool",function(){i.toggle()}),a&&this._registerAction("lassoTool",function(){a.toggle()}),s&&this._registerAction("handTool",function(){s.toggle()}),c&&this._registerAction("globalConnectTool",function(){c.toggle()}),r&&l&&this._registerAction("distributeElements",function(m){var g=r.get(),v=m.type;g.length&&l.trigger(g,v)}),r&&u&&this._registerAction("alignElements",function(m){var g=r.get(),v=[],b=m.type;g.length&&(v=St(g,function(w){return!C(w,"bpmn:Lane")}),u.trigger(v,b))}),r&&f&&this._registerAction("setColor",function(m){var g=r.get();g.length&&f.setColor(g,m)}),r&&d&&this._registerAction("directEditing",function(){var m=r.get();m.length&&d.activate(m[0])}),h&&this._registerAction("find",function(){h.toggle()}),t&&f&&this._registerAction("moveToOrigin",function(){var m=t.getRootElement(),g,v;C(m,"bpmn:Collaboration")?v=n.filter(function(b){return C(b.parent,"bpmn:Collaboration")}):v=n.filter(function(b){return b!==m&&!C(b.parent,"bpmn:SubProcess")}),g=$r(v),f.moveElements(v,{x:-g.x,y:-g.y},m)}),r&&p&&this._registerAction("replaceElement",function(m){p.triggerEntry("replace","click",m)})};const fke={__depends__:[hke],editorActions:["type",rb]};function GF(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,r=t.shape;ft(r,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}GF.$inject=["eventBus"];var xg=10;function iw(e,t,n){return n||(n="round"),Math[n](e/t)*t}var pke=1200,mke=800;function qo(e,t,n){var r=!n||n.active!==!1;this._eventBus=t;var i=this;t.on("diagram.init",mke,function(){i.setActive(r)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],pke,function(a){var s=a.originalEvent;if(!(!i.active||s&&Li(s))){var c=a.context,l=c.gridSnappingContext;l||(l=c.gridSnappingContext={}),["x","y"].forEach(function(u){var d={},h=vke(a,u,e);h&&(d.offset=h);var f=gke(a,u);f&&J(d,f),nd(a,u)||i.snapEvent(a,u,d)})}})}qo.prototype.snapEvent=function(e,t,n){var r=this.snapValue(e[t],n);Cn(e,t,r)};qo.prototype.getGridSpacing=function(){return xg};qo.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=iw(e,xg);var r,i;return t&&t.min&&(r=t.min,wt(r)&&(r=iw(r+n,xg,"ceil"),e=Math.max(e,r))),t&&t.max&&(i=t.max,wt(i)&&(i=iw(i+n,xg,"floor"),e=Math.min(e,i))),e-=n,e};qo.prototype.isActive=function(){return this.active};qo.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};qo.prototype.toggleActive=function(){this.setActive(!this.active)};qo.$inject=["elementRegistry","eventBus","config.gridSnapping"];function gke(e,t){var n=e.context,r=n.createConstraints,i=n.resizeConstraints||{},a=n.gridSnappingContext,s=a.snapConstraints;if(s&&s[t])return s[t];s||(s=a.snapConstraints={}),s[t]||(s[t]={});var c=n.direction;r&&(bg(t)?(s.x.min=r.left,s.x.max=r.right):(s.y.min=r.top,s.y.max=r.bottom));var l=i.min,u=i.max;return l&&(bg(t)?VR(c)?s.x.max=l.left:s.x.min=l.right:HR(c)?s.y.max=l.top:s.y.min=l.bottom),u&&(bg(t)?VR(c)?s.x.min=u.left:s.x.max=u.right:HR(c)?s.y.min=u.top:s.y.max=u.bottom),s[t]}function vke(e,t,n){var r=e.context,i=e.shape,a=r.gridSnappingContext,s=a.snapLocation,c=a.snapOffset;return c&&wt(c[t])||(c||(c=a.snapOffset={}),wt(c[t])||(c[t]=0),!i)||(n.get(i.id)||(bg(t)?c[t]+=i[t]+i.width/2:c[t]+=i[t]+i.height/2),!s)||(t==="x"?/left/.test(s)?c[t]-=i.width/2:/right/.test(s)&&(c[t]+=i.width/2):/top/.test(s)?c[t]-=i.height/2:/bottom/.test(s)&&(c[t]+=i.height/2)),c[t]}function bg(e){return e==="x"}function HR(e){return e.indexOf("n")!==-1}function VR(e){return e.indexOf("w")!==-1}function dl(e,t){he.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(r){var i=r.context,a=i.hints||{},s=a.autoResize;if(s){var c=i.shape,l=i.newBounds;uy(s)?i.newBounds=n.snapComplex(l,s):i.newBounds=n.snapSimple(c,l)}})}dl.$inject=["eventBus","gridSnapping","modeling"];Ie(dl,he);dl.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};dl.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};dl.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,r=/w/.test(t),i=/e/.test(t),a={};return a.width=n.snapValue(e.width,{min:e.width}),i&&(r?(a.x=n.snapValue(e.x,{max:e.x}),a.width+=n.snapValue(e.x-a.x,{min:e.x-a.x})):e.x=e.x+e.width-a.width),J(e,a),e};dl.prototype.snapVertically=function(e,t){var n=this._gridSnapping,r=/n/.test(t),i=/s/.test(t),a={};return a.height=n.snapValue(e.height,{min:e.height}),r&&(i?(a.y=n.snapValue(e.y,{max:e.y}),a.height+=n.snapValue(e.y-a.y,{min:e.y-a.y})):e.y=e.y+e.height-a.height),J(e,a),e};var yke=2e3;function WF(e,t){e.on(["spaceTool.move","spaceTool.end"],yke,function(n){var r=n.context;if(r.initialized){var i=r.axis,a;i==="x"?(a=t.snapValue(n.dx),n.x=n.x+a-n.dx,n.dx=a):(a=t.snapValue(n.dy),n.y=n.y+a-n.dy,n.dy=a)}})}WF.$inject=["eventBus","gridSnapping"];const xke={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",dl],gridSnappingSpaceToolBehavior:["type",WF]},bke={__depends__:[xke],__init__:["gridSnapping"],gridSnapping:["type",qo]};var wke=2e3;function qF(e,t,n){e.on("autoPlace",wke,function(r){var i=r.source,a=Qe(i),s=r.shape,c=dB(i,s,n);return["x","y"].forEach(function(l){var u={};c[l]!==a[l]&&(c[l]>a[l]?u.min=c[l]:u.max=c[l],C(s,"bpmn:TextAnnotation")&&(_ke(l)?u.offset=-s.width/2:u.offset=-s.height/2),c[l]=t.snapValue(c[l],u))}),c})}qF.$inject=["eventBus","gridSnapping","elementRegistry"];function _ke(e){return e==="x"}var jke=1750;function KF(e,t,n){t.on(["create.start","shape.move.start"],jke,function(r){var i=r.context,a=i.shape,s=e.getRootElement();if(!(!C(a,"bpmn:Participant")||!C(s,"bpmn:Process")||!s.children.length)){var c=i.createConstraints;c&&(a.width=n.snapValue(a.width,{min:a.width}),a.height=n.snapValue(a.height,{min:a.height}))}})}KF.$inject=["canvas","eventBus","gridSnapping"];var Ske=3e3;function ib(e,t,n){he.call(this,e),this._gridSnapping=t;var r=this;this.postExecuted(["connection.create","connection.layout"],Ske,function(i){var a=i.context,s=a.connection,c=a.hints||{},l=s.waypoints;c.connectionStart||c.connectionEnd||c.createElementsBehavior===!1||Eke(l)&&n.updateWaypoints(s,r.snapMiddleSegments(l))})}ib.$inject=["eventBus","gridSnapping","modeling"];Ie(ib,he);ib.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var r=1;r<e.length-2;r++)n=kke(t,e[r],e[r+1]),e[r]=n[0],e[r+1]=n[1];return e};function Eke(e){return e.length>3}function Nke(e){return e==="h"}function Pke(e){return e==="v"}function kke(e,t,n){var r=ps(t,n),i={};return Nke(r)&&(i.y=e.snapValue(t.y)),Pke(r)&&(i.x=e.snapValue(t.x)),("x"in i||"y"in i)&&(t=J({},t,i),n=J({},n,i)),[t,n]}const Cke={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",qF],gridSnappingParticipantBehavior:["type",KF],gridSnappingLayoutConnectionBehavior:["type",ib]},Ake={__depends__:[bke,Cke],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",GF]};var Tke=30,YF=30;function Fp(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(r){var i=r.element,a=r.gfx;if(C(i,"bpmn:Lane"))return n._createParticipantHit(i,a);if(C(i,"bpmn:Participant"))return $t(i)?n._createParticipantHit(i,a):n._createDefaultHit(i,a);if(C(i,"bpmn:SubProcess"))return $t(i)?n._createSubProcessHit(i,a):n._createDefaultHit(i,a)})}Fp.$inject=["eventBus","interactionEvents"];Fp.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};Fp.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=dr(e)?{width:Tke,height:e.height}:{width:e.width,height:YF};return this._interactionEvents.createBoxHit(t,"all",n),!0};Fp.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:YF}),!0};const Oke={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Fp]};function ab(e){e.invoke(Nd,this)}Ie(ab,Nd);ab.$inject=["injector"];ab.prototype.registerBindings=function(e,t){Nd.prototype.registerBindings.call(this,e,t);function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("selectElements",function(r){var i=r.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0}),n("find",function(r){var i=r.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0}),n("spaceTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["s","S"],i))return t.trigger("spaceTool"),!0}),n("lassoTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["l","L"],i))return t.trigger("lassoTool"),!0}),n("handTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["h","H"],i))return t.trigger("handTool"),!0}),n("globalConnectTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["c","C"],i))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["e","E"],i))return t.trigger("directEditing"),!0}),n("replaceElement",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["r","R"],i))return t.trigger("replaceElement",i),!0})};const Rke={__depends__:[sE],__init__:["keyboardBindings"],keyboardBindings:["type",ab]};var $ke={moveSpeed:1,moveSpeedAccelerated:10},Ike=1500,GR="left",WR="up",qR="right",KR="down",Mke={ArrowLeft:GR,Left:GR,ArrowUp:WR,Up:WR,ArrowRight:qR,Right:qR,ArrowDown:KR,Down:KR},Dke={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function XF(e,t,n,r,i){var a=this;this._config=J({},$ke,e||{}),t.addListener(Ike,function(s){var c=s.keyEvent,l=Mke[c.key];if(l&&!t.isCmd(c)){var u=t.isShift(c);return a.moveSelection(l,u),!0}}),this.moveSelection=function(s,c){var l=i.get();if(l.length){var u=this._config[c?"moveSpeedAccelerated":"moveSpeed"],d=Dke[s](u),h=r.allowed("elements.move",{shapes:l});h&&n.moveElements(l,d)}}}XF.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const Lke={__depends__:[sE,Ha],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",XF]};var YR=10;function zp(e,t,n,r){this._dragging=r,this._rules=t;var i=this;function a(l,u){var d=l.shape,h=l.direction,f=l.resizeConstraints,p;l.delta=u,p=bSe(d,h,u),l.newBounds=_Se(p,f),l.canExecute=i.canResize(l)}function s(l){var u=l.resizeConstraints,d=l.minBounds;u===void 0&&(d===void 0&&(d=i.computeMinResizeBox(l)),l.resizeConstraints={min:Ge(d)})}function c(l){var u=l.shape,d=l.canExecute,h=l.newBounds;if(d){if(h=xI(h),!Bke(u,h))return;n.resizeShape(u,h)}}e.on("resize.start",function(l){s(l.context)}),e.on("resize.move",function(l){var u={x:l.dx,y:l.dy};a(l.context,u)}),e.on("resize.end",function(l){c(l.context)})}zp.prototype.canResize=function(e){var t=this._rules,n=Fa(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};zp.prototype.activate=function(e,t,n){var r=this._dragging,i,a;if(typeof n=="string"&&(n={direction:n}),i=J({shape:t},n),a=i.direction,!a)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(e,ZF(t,a),"resize",{autoActivate:!0,cursor:Fke(a),data:{shape:t,context:i}})};zp.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,r,i;return r=e.minDimensions||{width:YR,height:YR},i=IB(t,e.childrenBoxPadding),jSe(n,t,r,i)};zp.$inject=["eventBus","rules","modeling","dragging"];function Bke(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function ZF(e,t){var n=Qe(e),r=Ge(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function Fke(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var XR="djs-resizing",ZR="resize-not-ok",zke=500;function JF(e,t,n){function r(a){var s=a.shape,c=a.newBounds,l=a.frame;l||(l=a.frame=n.addFrame(s,t.getActiveLayer()),t.addMarker(s,XR)),c.width>5&&de(l,{x:c.x,width:c.width}),c.height>5&&de(l,{y:c.y,height:c.height}),a.canExecute?Xt(l).remove(ZR):Xt(l).add(ZR)}function i(a){var s=a.shape,c=a.frame;c&&Sr(a.frame),t.removeMarker(s,XR)}e.on("resize.move",zke,function(a){r(a.context)}),e.on("resize.cleanup",function(a){i(a.context)})}JF.$inject=["eventBus","canvas","previewSupport"];var tg=-6,ng=8,rg=20,yh="djs-resizer",Uke=["n","w","s","e","nw","ne","se","sw"];function Ko(e,t,n,r){this._resize=r,this._canvas=t;var i=this;e.on("selection.changed",function(a){var s=a.newSelection;i.removeResizers(),s.length===1&&q(s,Hc(i.addResizer,i))}),e.on("shape.changed",function(a){var s=a.element;n.isSelected(s)&&(i.removeResizers(),i.addResizer(s))})}Ko.prototype.makeDraggable=function(e,t,n){var r=this._resize;function i(a){mj(a)&&r.activate(a,e,n)}at.bind(t,"mousedown",i),at.bind(t,"touchstart",i)};Ko.prototype._createResizer=function(e,t,n,r){var i=this._getResizersParent(),a=Hke(r),s=je("g");Xt(s).add(yh),Xt(s).add(yh+"-"+e.id),Xt(s).add(yh+"-"+r),ke(i,s);var c=je("rect");de(c,{x:-ng/2+a.x,y:-ng/2+a.y,width:ng,height:ng}),Xt(c).add(yh+"-visual"),ke(s,c);var l=je("rect");return de(l,{x:-rg/2+a.x,y:-rg/2+a.y,width:rg,height:rg}),Xt(l).add(yh+"-hit"),ke(s,l),yH(s,t,n),s};Ko.prototype.createResizer=function(e,t){var n=ZF(e,t),r=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,r,t)};Ko.prototype.addResizer=function(e){var t=this;qt(e)||!this._resize.canResize({shape:e})||q(Uke,function(n){t.createResizer(e,n)})};Ko.prototype.removeResizers=function(){var e=this._getResizersParent();fy(e)};Ko.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};Ko.$inject=["eventBus","canvas","selection","resize"];function Hke(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-tg:e.indexOf("w")!==-1&&(t.x=tg),e.indexOf("s")!==-1?t.y=-tg:e.indexOf("n")!==-1&&(t.y=tg),t}const QF={__depends__:[Ya,zs,Td],__init__:["resize","resizePreview","resizeHandles"],resize:["type",zp],resizePreview:["type",JF],resizeHandles:["type",Ko]};var Vke=2e3;function Up(e,t,n,r,i,a,s){this._bpmnFactory=t,this._canvas=n,this._modeling=i,this._textRenderer=s,r.registerProvider(this),e.on("element.dblclick",function(l){c(l.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){r.isActive()&&r.complete()}),e.on(["shape.remove","connection.remove"],Vke,function(l){r.isActive(l.element)&&r.cancel()}),e.on(["commandStack.changed"],function(l){r.isActive()&&r.cancel()}),e.on("directEditing.activate",function(l){a.removeResizers()}),e.on("create.end",500,function(l){var u=l.context,d=u.shape,h=l.context.canExecute,f=l.isTouch;f||h&&(u.hints&&u.hints.createElementsBehavior===!1||c(d))}),e.on("autoPlace.end",500,function(l){c(l.shape)});function c(l,u){(u||ft(l,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||NN(l))&&r.activate(l)}}Up.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];Up.prototype.activate=function(e){var t=Vc(e);if(t!==void 0){var n={text:t},r=this.getEditingBBox(e);J(n,r);var i={},a=n.style||{};return J(a,{backgroundColor:null,border:null}),(ft(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||NN(e))&&J(i,{centerVertically:!0}),bu(e)&&(J(i,{autoResize:!0}),J(a,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),C(e,"bpmn:TextAnnotation")&&(J(i,{resizable:!0,autoResize:!0}),J(a,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),J(n,{options:i,style:a}),n}};Up.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,r=t.getAbsoluteBBox(n),i={x:r.x+r.width/2,y:r.y+r.height/2},a={x:r.x,y:r.y},s=t.zoom(),c=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),u=l.fontSize*s,d=l.lineHeight,h=c.fontSize*s,f=c.lineHeight,p={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(C(e,"bpmn:Lane")||qke(e)){var m=dr(e),g=m?{width:r.height,height:30*s,x:r.x-r.height/2+15*s,y:i.y-30*s/2}:{width:r.width,height:30*s};J(a,g),J(p,{fontSize:h+"px",lineHeight:f,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:m?"rotate(-90deg)":null})}if(Wke(e)){var v=dr(e),b=v?{width:r.width,height:r.height}:{width:r.height,height:r.width,x:i.x-r.height/2,y:i.y-r.width/2};J(a,b),J(p,{fontSize:h+"px",lineHeight:f,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:v?null:"rotate(-90deg)"})}(ft(e,["bpmn:Task","bpmn:CallActivity"])||NN(e))&&(J(a,{width:r.width,height:r.height}),J(p,{fontSize:h+"px",lineHeight:f,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"})),Gke(e)&&(J(a,{width:r.width,x:r.x}),J(p,{fontSize:h+"px",lineHeight:f,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"}));var w=90*s,y=7*s,_=4*s;if(n.labelTarget&&(J(a,{width:w,height:r.height+y+_,x:i.x-w/2,y:r.y-y}),J(p,{fontSize:u+"px",lineHeight:d,paddingTop:y+"px",paddingBottom:_+"px"})),bu(n)&&!py(n)&&!Pt(n)){var j=_I(e),S=t.getAbsoluteBBox({x:j.x,y:j.y,width:0,height:0}),E=u+y+_;J(a,{width:w,height:E,x:S.x-w/2,y:S.y-E/2}),J(p,{fontSize:u+"px",lineHeight:d,paddingTop:y+"px",paddingBottom:_+"px"})}return C(e,"bpmn:TextAnnotation")&&(J(a,{width:r.width,height:r.height,minWidth:30*s,minHeight:10*s}),J(p,{textAlign:"left",paddingTop:5*s+"px",paddingBottom:7*s+"px",paddingLeft:7*s+"px",paddingRight:5*s+"px",fontSize:h+"px",lineHeight:f})),{bounds:a,style:p}};Up.prototype.update=function(e,t,n,r){var i,a;C(e,"bpmn:TextAnnotation")&&(a=this._canvas.getAbsoluteBBox(e),i={x:e.x,y:e.y,width:e.width/a.width*r.width,height:e.height/a.height*r.height}),Kke(t)&&(t=null),this._modeling.updateLabel(e,t,i)};function NN(e){return C(e,"bpmn:SubProcess")&&!$t(e)}function Gke(e){return C(e,"bpmn:SubProcess")&&$t(e)}function Wke(e){return C(e,"bpmn:Participant")&&!$t(e)}function qke(e){return C(e,"bpmn:Participant")&&$t(e)}function Kke(e){return!e||!e.trim()}var JR="djs-element-hidden",QR="djs-label-hidden";function e6(e,t,n){var r=this,i=t.getDefaultLayer(),a,s,c;e.on("directEditing.activate",function(l){var u=l.active;if(a=u.element.label||u.element,C(a,"bpmn:TextAnnotation")){s=t.getAbsoluteBBox(a),c=je("g");var d=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:a.height,position:{mx:0,my:0}}),h=r.path=je("path");de(h,{d,strokeWidth:2,stroke:Yke(a)}),ke(c,h),ke(i,c),jr(c,a.x,a.y)}C(a,"bpmn:TextAnnotation")||a.labelTarget?t.addMarker(a,JR):(C(a,"bpmn:Task")||C(a,"bpmn:CallActivity")||C(a,"bpmn:SubProcess")||C(a,"bpmn:Participant")||C(a,"bpmn:Lane"))&&t.addMarker(a,QR)}),e.on("directEditing.resize",function(l){if(C(a,"bpmn:TextAnnotation")){var u=l.height,d=l.dy,h=Math.max(a.height/s.height*(u+d),0),f=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:h,position:{mx:0,my:0}});de(r.path,{d:f})}}),e.on(["directEditing.complete","directEditing.cancel"],function(l){var u=l.active;u&&(t.removeMarker(u.element.label||u.element,JR),t.removeMarker(a,QR)),a=void 0,s=void 0,c&&(Sr(c),c=void 0)})}e6.$inject=["eventBus","canvas","pathMap"];function Yke(e,t){var n=zt(e);return n.get("stroke")||t||"black"}const Xke={__depends__:[jI,QF,UF],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",Up],labelEditingPreview:["type",e6]};var Zke=new dj("tt");function Jke(e){var t=ur('<div class="djs-tooltip-container" />');return xj(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function Qke(e,t,n){xj(e,{left:t+"px",top:n+"px"})}function PN(e,t){e.style.display=t===!1?"none":""}var t6="djs-tooltip",aw="."+t6;function Br(e,t){this._eventBus=e,this._canvas=t,this._ids=Zke,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=Jke(t.getContainer());var n=this;ma.bind(this._tooltipRoot,aw,"mousedown",function(r){r.stopPropagation()}),ma.bind(this._tooltipRoot,aw,"mouseover",function(r){n.trigger("mouseover",r)}),ma.bind(this._tooltipRoot,aw,"mouseout",function(r){n.trigger("mouseout",r)}),this._init()}Br.$inject=["eventBus","canvas"];Br.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=J({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};Br.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,r=this.get(Rr(n,"data-tooltip-id"));r&&(e==="mouseover"&&r.timeout&&this.clearTimeout(r),e==="mouseout"&&r.timeout&&(r.timeout=1e3,this.setTimeout(r)))};Br.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};Br.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};Br.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};Br.prototype.remove=function(e){var t=this.get(e);t&&(xu(t.html),xu(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};Br.prototype.show=function(){PN(this._tooltipRoot)};Br.prototype.hide=function(){PN(this._tooltipRoot,!1)};Br.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,r="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=r,this._tooltipRoot.style["-ms-transform"]=r};Br.prototype._addTooltip=function(e){var t=e.id,n=e.html,r,i=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),uy(n)&&(n=ur(n)),r=ur('<div data-tooltip-id="'+t+'" class="'+t6+'">'),xj(r,{position:"absolute"}),r.appendChild(n),e.type&&Wn(r).add("djs-tooltip-"+e.type),e.className&&Wn(r).add(e.className),e.htmlContainer=r,i.appendChild(r),this._tooltips[t]=e,this._updateTooltip(e)};Br.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;Qke(n,t.x,t.y)};Br.prototype._updateTooltipVisibilty=function(e){q(this._tooltips,function(t){var n=t.show,r=t.htmlContainer,i=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(i=!1),PN(r,i))})};Br.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const e2e={__init__:["tooltips"],tooltips:["type",Br]};var t2e="flow elements must be children of pools/participants",n2e="Data object must be placed within a pool/participant.";function n6(e,t,n){function r(i,a,s){t.add({position:{x:i.x+5,y:i.y+5},type:"error",timeout:2e3,html:"<div>"+a+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(i){var a=i.context,s=a.shape,c=a.target;C(c,"bpmn:Collaboration")&&(C(s,"bpmn:FlowNode")?r(i,n(t2e)):C(s,"bpmn:DataObjectReference")&&r(i,n(n2e)))})}n6.$inject=["eventBus","tooltips","translate"];const r2e={__depends__:[e2e],__init__:["modelingFeedback"],modelingFeedback:["type",n6]};var i2e=500,a2e=1e3;function hl(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),r=this;function i(a){var s=je("rect");return de(s,J({x:0,y:0,rx:4,width:100,height:100},n)),s}e.on(["shape.added","shape.changed"],i2e,function(a){var s=a.element,c=a.gfx,l=An(".djs-outline",c);l||(l=r.getOutline(s)||i(),ke(c,l)),r.updateShapeOutline(l,s)}),e.on(["connection.added","connection.changed"],function(a){var s=a.element,c=a.gfx,l=An(".djs-outline",c);l||(l=i(),ke(c,l)),r.updateConnectionOutline(l,s)})}hl.prototype.updateShapeOutline=function(e,t){var n=!1,r=this._getProviders();r.length&&q(r,function(i){n=n||i.updateOutline(t,e)}),n||de(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};hl.prototype.updateConnectionOutline=function(e,t){var n=$r(t);de(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};hl.prototype.registerProvider=function(e,t){t||(t=e,e=a2e),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};hl.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};hl.prototype.getOutline=function(e){var t,n=this._getProviders();return q(n,function(r){Fi(r.getOutline)&&(t=t||r.getOutline(e))}),t};hl.$inject=["eventBus","styles","elementRegistry"];var ig=6;function kN(e,t,n){this._canvas=t;var r=this;e.on("element.changed",function(i){n.isSelected(i.element)&&r._updateMultiSelectionOutline(n.get())}),e.on("selection.changed",function(i){var a=i.newSelection;r._updateMultiSelectionOutline(a)})}kN.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");fy(t);var n=e.length>1,r=this._canvas.getContainer();if(Xt(r)[n?"add":"remove"]("djs-multi-select"),!!n){var i=s2e($r(e)),a=je("rect");de(a,J({rx:3},i)),Xt(a).add("djs-selection-outline"),ke(t,a)}};kN.$inject=["eventBus","canvas","selection"];function s2e(e){return{x:e.x-ig,y:e.y-ig,width:e.width+ig*2,height:e.height+ig*2}}const r6={__depends__:[Ha],__init__:["outline","multiSelectionOutline"],outline:["type",hl],multiSelectionOutline:["type",kN]};var o2e=500,c2e=1250,l2e=1500,Zv=Math.round;function u2e(e){return{x:e.x+Zv(e.width/2),y:e.y+Zv(e.height/2)}}function i6(e,t,n,r,i){function a(c,l,u,d){return i.allowed("elements.move",{shapes:c,delta:l,position:u,target:d})}e.on("shape.move.start",l2e,function(c){var l=c.context,u=c.shape,d=r.get().slice();d.indexOf(u)===-1&&(d=[u]),d=d2e(d),J(l,{shapes:d,validatedShapes:d,shape:u})}),e.on("shape.move.start",c2e,function(c){var l=c.context,u=l.validatedShapes,d;if(d=l.canExecute=a(u),!d)return!1}),e.on("shape.move.move",o2e,function(c){var l=c.context,u=l.validatedShapes,d=c.hover,h={x:c.dx,y:c.dy},f={x:c.x,y:c.y},p;if(p=a(u,h,f,d),l.delta=h,l.canExecute=p,p===null){l.target=null;return}l.target=d}),e.on("shape.move.end",function(c){var l=c.context,u=l.delta,d=l.canExecute,h=d==="attach",f=l.shapes;if(d===!1)return!1;u.x=Zv(u.x),u.y=Zv(u.y),!(u.x===0&&u.y===0)&&n.moveElements(f,u,l.target,{primaryShape:l.shape,attach:h})}),e.on("element.mousedown",function(c){if(mj(c)){var l=mI(c);if(!l)throw new Error("must supply DOM mousedown event");return s(l,c.element)}});function s(c,l,u,d){if(ks(u)&&(d=u,u=!1),!(l.waypoints||!l.parent)&&!Xt(c.target).has("djs-hit-no-move")){var h=u2e(l);return t.init(c,h,"shape.move",{cursor:"grabbing",autoActivate:u,data:{shape:l,context:d||{}}}),!0}}this.start=s}i6.$inject=["eventBus","dragging","modeling","selection","rules"];function d2e(e){var t=hy(e,"id");return St(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var e$=499,sw="djs-dragging",t$="drop-ok",n$="drop-not-ok",r$="new-parent",i$="attach-ok";function a6(e,t,n,r){function i(l){var u=a(l),d=h2e(u);return d}function a(l){var u=rp(l,!0),d=u.flatMap(p=>(p.incoming||[]).concat(p.outgoing||[])),h=u.concat(d),f=[...new Set(h)];return f}function s(l,u){[i$,t$,n$,r$].forEach(function(d){d===u?t.addMarker(l,d):t.removeMarker(l,d)})}function c(l,u,d){r.addDragger(u,l.dragGroup),d&&t.addMarker(u,sw),l.allDraggedElements?l.allDraggedElements.push(u):l.allDraggedElements=[u]}e.on("shape.move.start",e$,function(l){var u=l.context,d=u.shapes,h=u.allDraggedElements,f=i(d);if(!u.dragGroup){var p=je("g");de(p,n.cls("djs-drag-group",["no-events"]));var m=t.getActiveLayer();ke(m,p),u.dragGroup=p}f.forEach(function(g){r.addDragger(g,u.dragGroup)}),h?h=fj([h,a(d)]):h=a(d),q(h,function(g){t.addMarker(g,sw)}),u.allDraggedElements=h,u.differentParents=f2e(d)}),e.on("shape.move.move",e$,function(l){var u=l.context,d=u.dragGroup,h=u.target,f=u.shape.parent,p=u.canExecute;h&&(p==="attach"?s(h,i$):u.canExecute&&f&&h.id!==f.id?s(h,r$):s(h,u.canExecute?t$:n$)),jr(d,l.dx,l.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(l){var u=l.context,d=u.target;d&&s(d,null)}),e.on("shape.move.cleanup",function(l){var u=l.context,d=u.allDraggedElements,h=u.dragGroup;q(d,function(f){t.removeMarker(f,sw)}),h&&Sr(h)}),this.makeDraggable=c}a6.$inject=["eventBus","canvas","styles","previewSupport"];function h2e(e){var t=St(e,function(n){return qt(n)?dn(e,xs({id:n.source.id}))&&dn(e,xs({id:n.target.id})):!0});return t}function f2e(e){return xH(hy(e,function(t){return t.parent&&t.parent.id}))!==1}const p2e={__depends__:[hj,Ha,r6,Ya,zs,Td],__init__:["move","movePreview"],move:["type",i6],movePreview:["type",a6]};var s6=".djs-palette-toggle",o6=".entry",m2e=s6+", "+o6,z1="djs-palette-",g2e="shown",U1="open",a$="two-column",v2e=1e3;function Tn(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(r){var i=r.tool;n.updateToolHighlight(i)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}Tn.$inject=["eventBus","canvas"];Tn.prototype.registerProvider=function(e,t){t||(t=e,e=v2e),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};Tn.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(x2e,{})};Tn.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};Tn.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),r=this._container=ur(Tn.HTML_MARKUP);n.appendChild(r),Wn(n).add(z1+g2e),ma.bind(r,m2e,"click",function(i){var a=i.delegateTarget;if(pI(a,s6))return e.toggle();e.trigger("click",i)}),at.bind(r,"mousedown",function(i){i.stopPropagation()}),ma.bind(r,o6,"dragstart",function(i){e.trigger("dragstart",i)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:r})};Tn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};Tn.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,r=this._eventBus,i,a=Wn(n),s=Wn(t);"twoColumn"in e?i=e.twoColumn:i=this._needsCollapse(t.clientHeight,this._entries||{}),a.toggle(a$,i),s.toggle(z1+a$,i),"open"in e&&(a.toggle(U1,e.open),s.toggle(z1+U1,e.open)),r.fire("palette.changed",{twoColumn:i,open:this.isOpen()})};Tn.prototype._update=function(){var e=An(".djs-palette-entries",this._container),t=this._entries=this.getEntries();SI(e),q(t,function(n,r){var i=n.group||"default",a=An("[data-group="+Hh(i)+"]",e);a||(a=ur('<div class="group"></div>'),Rr(a,"data-group",i),e.appendChild(a));var s=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=ur(s);if(a.appendChild(c),!n.separator&&(Rr(c,"data-action",r),n.title&&Rr(c,"title",n.title),n.className&&y2e(c,n.className),n.imageUrl)){var l=ur("<img>");Rr(l,"src",n.imageUrl),c.appendChild(l)}}),this.open()};Tn.prototype.trigger=function(e,t,n){var r,i,a=t.delegateTarget||t.target;return a?(r=Rr(a,"data-action"),i=t.originalEvent||t,this.triggerEntry(r,e,i,n)):t.preventDefault()};Tn.prototype.triggerEntry=function(e,t,n,r){var i=this._entries,a,s;if(a=i[e],!!a&&(s=a.action,this._eventBus.fire("palette.trigger",{entry:a,event:n})!==!1)){if(Fi(s)){if(t==="click")return s(n,r)}else if(s[t])return s[t](n,r);n.preventDefault()}};Tn.prototype._layoutChanged=function(){this._toggleState({})};Tn.prototype._needsCollapse=function(e,t){var n=50,r=Object.keys(t).length*46;return e<r+n};Tn.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};Tn.prototype.open=function(){this._toggleState({open:!0})};Tn.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Tn.prototype.isActiveTool=function(e){return e&&this._activeTool===e};Tn.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=An(".djs-palette-entries",this._container),this._toolsContainer=An("[data-group=tools]",t)),n=this._toolsContainer,q(n.children,function(r){var i=r.getAttribute("data-action");if(i){var a=Wn(r);i=i.replace("-tool",""),a.contains("entry")&&i===e?a.add("highlighted-entry"):a.remove("highlighted-entry")}})};Tn.prototype.isOpen=function(){return Wn(this._container).has(U1)};Tn.prototype._getParentContainer=function(){return this._canvas.getContainer()};Tn.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function y2e(e,t){var n=Wn(e),r=_t(t)?t:t.split(/\s+/g);r.forEach(function(i){n.add(i)})}function x2e(e,t){var n=t.getPaletteEntries();return Fi(n)?n(e):(q(n,function(r,i){e[i]=r}),e)}const b2e={__init__:["palette"],palette:["type",Tn]};var c6="crosshair";function fl(e,t,n,r,i,a,s){this._selection=i,this._dragging=n,this._mouse=s;var c=this,l={create:function(u){var d=t.getActiveLayer(),h;h=u.frame=je("rect"),de(h,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),ke(d,h)},update:function(u){var d=u.frame,h=u.bbox;de(d,{x:h.x,y:h.y,width:h.width,height:h.height})},remove:function(u){u.frame&&Sr(u.frame)}};a.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(u){var d=u.originalEvent.target;!u.hover&&!(d instanceof SVGElement)||e.once("lasso.selection.ended",function(){c.activateLasso(u.originalEvent,!0)})}),e.on("lasso.end",0,function(u){var d=u.context,h=ow(u),f=r.filter(function(m){return m}),p=vw(u);c.select(f,h,p?d.selection:[])}),e.on("lasso.start",function(u){var d=u.context;d.bbox=ow(u),l.create(d),d.selection=i.get()}),e.on("lasso.move",function(u){var d=u.context;d.bbox=ow(u),l.update(d)}),e.on("lasso.cleanup",function(u){var d=u.context;l.remove(d)}),e.on("element.mousedown",1500,function(u){if(vw(u))return c.activateLasso(u.originalEvent),!0})}fl.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];fl.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:c6,data:{context:{}}})};fl.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:c6,data:{context:{}},keepSelection:!0})};fl.prototype.select=function(e,t,n=[]){var r=wI(e,t);this._selection.select([...n,...dy(r)])};fl.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};fl.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function ow(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},r;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?r={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?r={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?r={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?r={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:r={x:n.x,y:n.y,width:0,height:0},r}const w2e={__depends__:[Ux,Np],__init__:["lassoTool"],lassoTool:["type",fl]};var cw=1500,l6="grab";function Od(e,t,n,r,i,a){this._dragging=n,this._mouse=a;var s=this,c=r.get("keyboard",!1);i.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",cw,function(l){if(Gh(l))return s.activateMove(l.originalEvent,!0),!1}),c&&c.addListener(cw,function(l){if(!(!s$(l.keyEvent)||s.isActive())){var u=s._mouse.getLastMoveEvent();s.activateMove(u,!!u)}},"keyboard.keydown"),c&&c.addListener(cw,function(l){!s$(l.keyEvent)||!s.isActive()||s.toggle()},"keyboard.keyup"),e.on("hand.end",function(l){var u=l.originalEvent.target;if(!l.hover&&!(u instanceof SVGElement))return!1;e.once("hand.ended",function(){s.activateMove(l.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(l){var u=t.viewbox().scale;t.scroll({dx:l.dx*u,dy:l.dy*u})}),e.on("hand.move.end",function(l){var u=l.context,d=u.reactivate;return!Gh(l)&&d&&e.once("hand.move.ended",function(h){s.activateHand(h.originalEvent,!0,!0)}),!1})}Od.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];Od.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:l6,data:{context:n||{}}})};Od.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:l6,data:{context:{reactivate:n}}})};Od.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};Od.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function s$(e){return nr("Space",e)}const _2e={__depends__:[Ux,Np],__init__:["handTool"],handTool:["type",Od]};var o$="connect-ok",c$="connect-not-ok";function Rd(e,t,n,r,i,a,s){var c=this;this._dragging=t,this._rules=a,this._mouse=s,i.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(l){var u=l.context,d=l.hover,h=u.canStartConnect=c.canStartConnect(d);h!==null&&(u.startTarget=d,r.addMarker(d,h?o$:c$))}),e.on(["global-connect.out","global-connect.cleanup"],function(l){var u=l.context.startTarget,d=l.context.canStartConnect;u&&r.removeMarker(u,d?o$:c$)}),e.on(["global-connect.ended"],function(l){var u=l.context,d=u.startTarget,h={x:l.x,y:l.y},f=c.canStartConnect(d);if(f)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,d,h)}),!1})}Rd.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];Rd.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};Rd.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};Rd.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};Rd.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const j2e={__depends__:[wE,Ya,zs,Ux,Np],globalConnect:["type",Rd]};function CN(e,t,n,r,i,a,s,c){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=r,this._lassoTool=i,this._handTool=a,this._globalConnect=s,this._translate=c,e.registerProvider(this)}CN.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];CN.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,r=this._spaceTool,i=this._lassoTool,a=this._handTool,s=this._globalConnect,c=this._translate;function l(h,f,p,m,g){function v(b){var w=n.createShape(J({type:h},g));t.start(b,w)}return{group:f,className:p,title:m,action:{dragstart:v,click:v}}}function u(h){var f=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),p=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:f});t.start(h,[f,p],{hints:{autoSelect:[f]}})}function d(h){t.start(h,n.createParticipantShape())}return J(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate hand tool"),action:{click:function(h){a.activateHand(h)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate lasso tool"),action:{click:function(h){i.activateSelection(h)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate create/remove space tool"),action:{click:function(h){r.activateSelection(h)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate global connect tool"),action:{click:function(h){s.start(h)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",c("Create start event")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",c("Create intermediate/boundary event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",c("Create end event")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",c("Create gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",c("Create task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",c("Create data object reference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",c("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:c("Create expanded sub-process"),action:{dragstart:u,click:u}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:c("Create pool/participant"),action:{dragstart:d,click:d}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",c("Create group"))}),e};const S2e={__depends__:[b2e,zx,SF,w2e,_2e,j2e,EI],__init__:["paletteProvider"],paletteProvider:["type",CN]};var E2e=250;function AN(e,t,n,r,i){he.call(this,e);function a(c){var l=c.canExecute.replacements;q(l,function(u){var d=u.oldElementId,h={type:u.newElementType};if(!c.visualReplacements[d]){var f=t.get(d);J(h,{x:f.x,y:f.y});var p=n.createShape(h);r.addShape(p,f.parent);var m=An('[data-element-id="'+Hh(f.id)+'"]',c.dragGroup);m&&de(m,{display:"none"});var g=i.addDragger(p,c.dragGroup);c.visualReplacements[d]=g,r.removeShape(p)}})}function s(c){var l=c.visualReplacements;q(l,function(u,d){var h=An('[data-element-id="'+Hh(d)+'"]',c.dragGroup);h&&de(h,{display:"inline"}),u.remove(),l[d]&&delete l[d]})}e.on("shape.move.move",E2e,function(c){var l=c.context,u=l.canExecute;l.visualReplacements||(l.visualReplacements={}),u&&u.replacements?a(l):s(l)})}AN.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];Ie(AN,he);const N2e={__depends__:[Td],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",AN]};var P2e=1250,lw=40,k2e=20,C2e=10,l$=20,u6=["x","y"],A2e=Math.abs;function d6(e){e.on(["connect.hover","connect.move","connect.end"],P2e,function(t){var n=t.context,r=n.canExecute,i=n.start,a=n.hover,s=n.source,c=n.target;t.originalEvent&&Li(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),r&&a&&T2e(t,a,I2e(a)),a&&$2e(r,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=Di(i),ft(a,["bpmn:Event","bpmn:Gateway"])&&u$(t,Di(a)),ft(a,["bpmn:Task","bpmn:SubProcess"])&&O2e(t,a),C(s,"bpmn:BoundaryEvent")&&c===s.host&&R2e(t)):h6(r,"bpmn:MessageFlow")?(C(i,"bpmn:Event")&&(n.connectionStart=Di(i)),C(a,"bpmn:Event")&&u$(t,Di(a))):n.connectionStart=n.initialConnectionStart)})}d6.$inject=["eventBus"];function T2e(e,t,n){u6.forEach(function(r){var i=f6(r,t);e[r]<t[r]+n?Cn(e,r,t[r]+n):e[r]>t[r]+i-n&&Cn(e,r,t[r]+i-n)})}function O2e(e,t){var n=Di(t);u6.forEach(function(r){M2e(e,t,r)&&Cn(e,r,n[r])})}function R2e(e){var t=e.context,n=t.source,r=t.target;if(!D2e(t)){var i=Di(n),a=vr(i,r,-10),s=[];/top|bottom/.test(a)&&s.push("x"),/left|right/.test(a)&&s.push("y"),s.forEach(function(c){var l=e[c],u;A2e(l-i[c])<lw&&(l>i[c]?u=i[c]+lw:u=i[c]-lw,Cn(e,c,u))})}}function u$(e,t){Cn(e,"x",t.x),Cn(e,"y",t.y)}function h6(e,t){return e&&e.type===t}function $2e(e,t){return ip(t,function(n){return h6(e,n)})}function f6(e,t){return e==="x"?t.width:t.height}function I2e(e){return C(e,"bpmn:Task")?C2e:k2e}function M2e(e,t,n){return e[n]>t[n]+l$&&e[n]<t[n]+f6(n,t)-l$}function D2e(e){var t=e.hover,n=e.source;return t&&n&&t===n}function Yo(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}Yo.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};Yo.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};Yo.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};Yo.prototype.getSnapLocations=function(){return this._snapLocations};Yo.prototype.setSnapLocations=function(e){this._snapLocations=e};Yo.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new sb,n.initDefaults(this._defaultSnaps)),n};function sb(){this._snapValues={}}sb.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};sb.prototype.snap=function(e,t,n,r){var i=this._snapValues[t];return i&&Gje(e[n],i[n],r)};sb.prototype.initDefaults=function(e){var t=this;q(e||{},function(n,r){q(n,function(i){t.add(r,i)})})};var L2e=1250;function Xa(e,t,n){var r=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(i){r.initSnap(i)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],L2e,function(i){var a=i.context,s=a.shape,c=a.snapContext,l=a.target;if(!(i.originalEvent&&Li(i.originalEvent))&&!(nd(i)||!l)){var u=c.pointsForTarget(l);u.initialized||(u=r.addSnapTargetPoints(u,s,l),u.initialized=!0),n.snap(i,u)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}Xa.$inject=["elementRegistry","eventBus","snapping"];Xa.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,r=n.shape,i=n.snapContext;i||(i=n.snapContext=new Yo);var a;t.get(r.id)?a=Di(r,e):a={x:e.x+Di(r).x,y:e.y+Di(r).y};var s={x:a.x-r.width/2,y:a.y-r.height/2},c={x:a.x+r.width/2,y:a.y+r.height/2};return i.setSnapOrigin("mid",{x:a.x-e.x,y:a.y-e.y}),Pt(r)||(i.setSnapOrigin("top-left",{x:s.x-e.x,y:s.y-e.y}),i.setSnapOrigin("bottom-right",{x:c.x-e.x,y:c.y-e.y})),i};Xa.prototype.addSnapTargetPoints=function(e,t,n){var r=this.getSnapTargets(t,n);return q(r,function(i){if(Pt(i)){Pt(t)&&e.add("mid",Di(i));return}if(qt(i)){if(i.waypoints.length<3)return;var a=i.waypoints.slice(1,-1);q(a,function(s){e.add("mid",s)});return}e.add("mid",Di(i))}),!wt(t.x)||!wt(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",Di(t)),e};Xa.prototype.getSnapTargets=function(e,t){return PB(t).filter(function(n){return!B2e(n)})};function B2e(e){return!!e.hidden}var d$=1500;function $d(e,t){t.invoke(Xa,this),e.on(["create.move","create.end"],d$,H2e),e.on(["create.move","create.end","shape.move.move","shape.move.end"],d$,function(n){var r=n.context,i=r.canExecute,a=r.target,s=i&&(i==="attach"||i.attach);s&&!nd(n)&&F2e(n,a)})}Ie($d,Xa);$d.$inject=["eventBus","injector"];$d.prototype.initSnap=function(e){var t=Xa.prototype.initSnap.call(this,e),n=e.shape,r=!!this._elementRegistry.get(n.id);return q(n.outgoing,function(i){var a=i.waypoints[0];a=a.original||a,t.setSnapOrigin(i.id+"-docking",f$(a,r,e))}),q(n.incoming,function(i){var a=i.waypoints[i.waypoints.length-1];a=a.original||a,t.setSnapOrigin(i.id+"-docking",f$(a,r,e))}),C(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};$d.prototype.addSnapTargetPoints=function(e,t,n){Xa.prototype.addSnapTargetPoints.call(this,e,t,n);var r=this.getSnapTargets(t,n);q(r,function(a){(U2e(a)||z2e([t,a],"bpmn:TextAnnotation"))&&(e.add("top-left",EB(a)),e.add("bottom-right",NB(a)))});var i=this._elementRegistry;return q(t.incoming,function(a){if(i.get(t.id)){h$(r,a.source)||e.add("mid",Qe(a.source));var s=a.waypoints[0];e.add(a.id+"-docking",s.original||s)}}),q(t.outgoing,function(a){if(i.get(t.id)){h$(r,a.target)||e.add("mid",Qe(a.target));var s=a.waypoints[a.waypoints.length-1];e.add(a.id+"-docking",s.original||s)}}),C(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};$d.prototype.getSnapTargets=function(e,t){return Xa.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!C(n,"bpmn:Lane")})};function F2e(e,t){var n=Ge(t),r=QB(e,t),i=e.context,a=i.shape,s;a.parent?s={x:0,y:0}:s=Qe(a),/top/.test(r)?Cn(e,"y",n.top-s.y):/bottom/.test(r)&&Cn(e,"y",n.bottom-s.y),/left/.test(r)?Cn(e,"x",n.left-s.x):/right/.test(r)&&Cn(e,"x",n.right-s.x)}function z2e(e,t){return e.every(function(n){return C(n,t)})}function U2e(e){return C(e,"bpmn:SubProcess")&&$t(e)?!0:C(e,"bpmn:Participant")}function H2e(e){var t=e.context,n=t.createConstraints;if(n){var r=n.top,i=n.right,a=n.bottom,s=n.left;(s&&s>=e.x||i&&i<=e.x)&&Cn(e,"x",e.x),(r&&r>=e.y||a&&a<=e.y)&&Cn(e,"y",e.y)}}function h$(e,t){return e.indexOf(t)!==-1}function f$(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var V2e=1250;function Hp(e,t){var n=this;e.on(["resize.start"],function(r){n.initSnap(r)}),e.on(["resize.move","resize.end"],V2e,function(r){var i=r.context,a=i.shape,s=a.parent,c=i.direction,l=i.snapContext;if(!(r.originalEvent&&Li(r.originalEvent))&&!nd(r)){var u=l.pointsForTarget(s);u.initialized||(u=n.addSnapTargetPoints(u,a,s,c),u.initialized=!0),q2e(c)&&Cn(r,"x",r.x),K2e(c)&&Cn(r,"y",r.y),t.snap(r,u)}}),e.on(["resize.cleanup"],function(){t.hide()})}Hp.prototype.initSnap=function(e){var t=e.context,n=t.shape,r=t.direction,i=t.snapContext;i||(i=t.snapContext=new Yo);var a=p6(n,r);return i.setSnapOrigin("corner",{x:a.x-e.x,y:a.y-e.y}),i};Hp.prototype.addSnapTargetPoints=function(e,t,n,r){var i=this.getSnapTargets(t,n);return q(i,function(a){e.add("corner",NB(a)),e.add("corner",EB(a))}),e.add("corner",p6(t,r)),e};Hp.$inject=["eventBus","snapping"];Hp.prototype.getSnapTargets=function(e,t){return PB(t).filter(function(n){return!G2e(n,e)&&!qt(n)&&!W2e(n)&&!Pt(n)})};function p6(e,t){var n=Qe(e),r=Ge(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function G2e(e,t){return e.host===t}function W2e(e){return!!e.hidden}function q2e(e){return e==="n"||e==="s"}function K2e(e){return e==="e"||e==="w"}var Y2e=7,X2e=1e3;function Xo(e){this._canvas=e,this._asyncHide=bH(Hc(this.hide,this),X2e)}Xo.$inject=["canvas"];Xo.prototype.snap=function(e,t){var n=e.context,r=n.snapContext,i=r.getSnapLocations(),a={x:nd(e,"x"),y:nd(e,"y")};q(i,function(s){var c=r.getSnapOrigin(s),l={x:e.x+c.x,y:e.y+c.y};if(q(["x","y"],function(u){var d;a[u]||(d=t.snap(l,s,u,Y2e),d!==void 0&&(a[u]={value:d,originValue:d-c[u]}))}),a.x&&a.y)return!1}),this.showSnapLine("vertical",a.x&&a.x.value),this.showSnapLine("horizontal",a.y&&a.y.value),q(["x","y"],function(s){var c=a[s];ks(c)&&Cn(e,s,c.originValue)})};Xo.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=je("path");return de(n,{d:"M0,0 L0,0"}),Xt(n).add("djs-snap-line"),ke(t,n),{update:function(r){wt(r)?e==="horizontal"?de(n,{d:"M-100000,"+r+" L+100000,"+r,display:""}):de(n,{d:"M "+r+",-100000 L "+r+", +100000",display:""}):de(n,{display:"none"})}}};Xo.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};Xo.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};Xo.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};Xo.prototype.hide=function(){q(this._snapLines,function(e){e.update()})};const Z2e={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Xa],resizeSnapping:["type",Hp],snapping:["type",Xo]},J2e={__depends__:[Z2e],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",d6],createMoveSnapping:["type",$d]};var m6=300;function Ze(e,t,n,r){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=r,this._container=this._getBoxHtml(),this._searchInput=An(Ze.INPUT_SELECTOR,this._container),this._resultsContainer=An(Ze.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}Ze.$inject=["canvas","eventBus","selection","translate"];Ze.prototype._bindEvents=function(){var e=this;function t(n,r,i,a){e._eventMaps.push({el:n,type:i,listener:ma.bind(n,r,i,a)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,Ze.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,Ze.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,Ze.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,Ze.INPUT_SELECTOR,"keydown",function(n){nr("ArrowUp",n)&&n.preventDefault(),nr("ArrowDown",n)&&n.preventDefault()}),t(this._container,Ze.INPUT_SELECTOR,"keyup",function(n){if(nr("Escape",n))return e.close();if(nr("Enter",n)){var r=e._getCurrentResult();return r?e._select(r):e.close(!1)}if(nr("ArrowUp",n))return e._scrollToDirection(!0);if(nr("ArrowDown",n))return e._scrollToDirection();nr(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};Ze.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){ma.unbind(e.el,e.type,e.listener)})};Ze.prototype._search=function(e){var t=this;if(this._clearResults(),!!e.trim()){var n=this._searchProvider.find(e);if(n=n.filter(function(i){return!t._canvas.getRootElements().includes(i.element)}),!n.length){this._selection.select(null);return}n.forEach(function(i){var a=i.element.id,s=t._createResultNode(i,a);t._results[a]={element:i.element,node:s}});var r=An(Ze.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(r),this._preselect(r)}};Ze.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};Ze.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,r=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<r&&(this._resultsContainer.scrollTop=r)}};Ze.prototype._clearResults=function(){SI(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};Ze.prototype._getCurrentResult=function(){return An(Ze.RESULT_SELECTED_SELECTOR,this._resultsContainer)};Ze.prototype._createResultNode=function(e,t){var n=ur(Ze.RESULT_HTML);return e.primaryTokens.length>0&&p$(n,e.primaryTokens,Ze.RESULT_PRIMARY_HTML),p$(n,e.secondaryTokens,Ze.RESULT_SECONDARY_HTML),Rr(n,Ze.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};Ze.prototype.registerProvider=function(e){this._searchProvider=e};Ze.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._selection.select(null),this._bindEvents(),this._open=!0,Wn(this._canvas.getContainer()).add("djs-search-open"),Wn(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};Ze.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,Wn(this._canvas.getContainer()).remove("djs-search-open"),Wn(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"),this._canvas.restoreFocus())};Ze.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Ze.prototype.isOpen=function(){return this._open};Ze.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&Wn(t).remove(Ze.RESULT_SELECTED_CLASS);var n=Rr(e,Ze.RESULT_ID_ATTRIBUTE),r=this._results[n].element;Wn(e).add(Ze.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(r,{top:m6}),this._selection.select(r),this._eventBus.fire("searchPad.preselected",r)}};Ze.prototype._select=function(e){var t=Rr(e,Ze.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:m6}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};Ze.prototype._getBoxHtml=function(){const e=ur(Ze.BOX_HTML),t=An(Ze.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function p$(e,t,n){var r=Q2e(t),i=ur(n);i.innerHTML=r,e.appendChild(i)}function Q2e(e){var t="";return e.forEach(function(n){var r=wH(n.value||n.matched||n.normal),i=n.match||n.matched;i?t+='<b class="'+Ze.RESULT_HIGHLIGHT_CLASS+'">'+r+"</b>":t+=r}),t!==""?t:null}Ze.CONTAINER_SELECTOR=".djs-search-container";Ze.INPUT_SELECTOR=".djs-search-input input";Ze.RESULTS_CONTAINER_SELECTOR=".djs-search-results";Ze.RESULT_SELECTOR=".djs-search-result";Ze.RESULT_SELECTED_CLASS="djs-search-result-selected";Ze.RESULT_SELECTED_SELECTOR="."+Ze.RESULT_SELECTED_CLASS;Ze.RESULT_ID_ATTRIBUTE="data-result-id";Ze.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";Ze.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;Ze.RESULT_HTML='<div class="djs-search-result"></div>';Ze.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';Ze.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const eCe={__depends__:[EI,fI,Ha],searchPad:["type",Ze]};function TN(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._search=r,t.registerProvider(this)}TN.$inject=["elementRegistry","searchPad","canvas","search"];TN.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(r){return!Pt(r)&&!t.includes(r)});return this._search(n.map(r=>({element:r,label:Vc(r),id:r.id})),e,{keys:["label","id"]}).map(tCe)};function tCe(e){const{item:{element:t},tokens:n}=e;return{element:t,primaryTokens:n.label,secondaryTokens:n.id}}const nCe={__depends__:[eCe,aB],__init__:["bpmnSearch"],bpmnSearch:["type",TN]},rCe="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",iCe="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",aCe={width:36,height:50},sCe={width:50,height:50};function m$(e,t,n){return je("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const fo=5;function ob(e,t){this._styles=t,e.registerProvider(this)}ob.$inject=["outline","styles"];ob.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Pt(e))return C(e,"bpmn:Gateway")?(n=je("rect"),J(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),de(n,J({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):ft(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=je("rect"),de(n,J({x:-fo,y:-fo,rx:14,width:e.width+fo*2,height:e.height+fo*2},t))):C(e,"bpmn:EndEvent")?(n=je("circle"),de(n,J({cx:e.width/2,cy:e.height/2,r:e.width/2+fo+1},t))):C(e,"bpmn:Event")?(n=je("circle"),de(n,J({cx:e.width/2,cy:e.height/2,r:e.width/2+fo},t))):C(e,"bpmn:DataObjectReference")&&g$(e,"bpmn:DataObjectReference")?n=m$(rCe,{x:-6,y:-6},t):C(e,"bpmn:DataStoreReference")&&g$(e,"bpmn:DataStoreReference")&&(n=m$(iCe,{x:-6,y:-6},t)),n};ob.prototype.updateOutline=function(e,t){if(!Pt(e))return ft(e,["bpmn:SubProcess","bpmn:Group"])?(de(t,{width:e.width+fo*2,height:e.height+fo*2}),!0):!!ft(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function g$(e,t){var n;return t==="bpmn:DataObjectReference"?n=aCe:t==="bpmn:DataStoreReference"&&(n=sCe),e.width===n.width&&e.height===n.height}const oCe={__depends__:[r6],__init__:["outlineProvider"],outlineProvider:["type",ob]};var cCe='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Bi(e){wp.call(this,e)}Ie(Bi,wp);Bi.Viewer=np;Bi.NavigatedViewer=zf;Bi.prototype.createDiagram=function(){return this.importXML(cCe)};Bi.prototype._interactionModules=[T3,I3,L3];Bi.prototype._modelingModules=[ije,gE,Pje,wje,qje,wE,Qje,ske,yF,zx,uke,fke,Ake,Oke,Rke,Lke,Xke,zF,r2e,p2e,S2e,N2e,QF,J2e,nCe,oCe];Bi.prototype._modules=[].concat(np.prototype._modules,Bi.prototype._interactionModules,Bi.prototype._modelingModules);const lCe=100,uCe=60;class dCe extends _H{constructor(n,r,i){super(n,5e3);qd(this,"bpmnRenderer");qd(this,"styles");qd(this,"_createDefs",!1);qd(this,"isPidMode",!1);this.bpmnRenderer=r,this.styles=i||{},this._createDefs=!1,this.isPidMode=!1,n.on("import.done",()=>{var s,c;const a=(s=r==null?void 0:r.get)==null?void 0:s.call(r,"canvas",!1);if(a){a.getRootElement();const l=(c=r==null?void 0:r.get)==null?void 0:c.call(r,"elementRegistry",!1);if(l){const d=l.getAll().some(h=>{const f=h.businessObject;if(!f)return!1;const p=f.$attrs||{};return!!(p["pid:symbol"]||p["pid:type"]||p["pid:category"])});this.isPidMode=d}}}),n.on("canvas.viewbox.changed",({element:a})=>{})}canRender(n){var d,h;const r=n.businessObject;if(!r||n.type==="label"||(d=n.id)!=null&&d.includes("_label")||(h=n.id)!=null&&h.includes("_di"))return!1;if(!this.isPidMode){const f=r.$attrs||{};return!!(f["pid:symbol"]||f["pid:type"]||f["pid:category"])}const i=r.name||"",a=(n.type||"").toLowerCase(),s=r.$attrs||{},c=!!(s["pid:symbol"]||s["pid:type"]||s["pid:category"]),l=a.includes("task")||a.includes("exclusivegateway")||a.includes("dataobjectreference")||a.includes("subprocess")||a.includes("startevent"),u=a.includes("sequenceflow")||a.includes("messageflow");return!!(c||l&&i||u)}drawShape(n,r){const i=r.businessObject,a=(i==null?void 0:i.$attrs)||{};let s=a["pid:symbol"]||"unknown";if(a["pid:category"],s==="unknown"&&this.isPidMode){const d=((i==null?void 0:i.name)||"").toLowerCase(),h=r.type||"";d.includes("tank")||d.includes("vessel")||d.includes("drum")?s="tank":d.includes("pump")?s="pump":d.includes("filter")?s="filter":d.includes("valve")?s=h.includes("Gateway")?"valve_control":"valve_gate":d.includes("transmitter")||d.includes("transducer")?d.includes("level")?s="transmitter_level":d.includes("flow")?s="transmitter_flow":d.includes("pressure")?s="transmitter_pressure":s="transmitter_level":d.includes("controller")?s="controller_pid":d.includes("analyzer")?s="analyzer":(d.includes("exchanger")||d.includes("heater")||d.includes("cooler"))&&(s="heat_exchanger"),s.includes("transmitter")||s.includes("analyzer")}this._ensureDefs(n);const c=je("g");de(c,{class:"pid-renderer-group"}),ke(n,c),setTimeout(()=>{Array.from(n.children).forEach(d=>{if(d!==c&&d.tagName==="g"){const h=d.querySelector(".djs-visual")||d;h&&!h.classList.contains("pid-renderer-group")&&h.setAttribute("style","display: none !important;")}})},0);const l=r.width&&r.width>0?r.width:lCe,u=r.height&&r.height>0?r.height:uCe;switch(s){case"tank":case"mixing_tank":case"storage_tank":this._drawTank(c,l,u);break;case"pump":case"pump_centrifugal":this._drawPump(c,l,u);break;case"filter":case"separator":this._drawFilter(c,l,u);break;case"heat_exchanger":case"condenser":this._drawHeatExchanger(c,l,u);break;case"reactor":this._drawRectWithDoubleLine(c,l,u);break;case"valve_control":case"valve_gate":case"valve_globe":case"valve_ball":case"valve_butterfly":case"valve_check":case"valve_pressure_relief":case"valve_solenoid":case"valve_diaphragm":case"valve_manual":this._drawValve(c,l,u,s);break;case"transmitter_temp":case"transmitter_pressure":case"transmitter_flow":case"transmitter_level":case"transmitter_analyzer":case"indicator_temp":case"indicator_pressure":case"indicator_flow":case"indicator_level":case"flow_meter":case"pressure_gauge":this._drawInstrument(c,l,u,s);break;case"controller_pid":case"controller_plc":case"controller_dcs":case"controller_local":case"controller_remote":case"controller_manual":this._drawController(c,l,u,s);break;case"actuator_electric":case"actuator_pneumatic":case"actuator_hydraulic":case"motor":case"fan":this._drawActuator(c,l,u,s);break;case"junction":case"tee_connection":case"analyzer_chamber":case"relay":case"control_panel":case"display":case"instrument_bubble":this._drawSmallSymbol(c,l,u,s);break;default:if(this.isPidMode)this._drawRoundedRect(c,l,u,{fill:"#e8f4f8",stroke:"#333",rx:8});else return this.bpmnRenderer.drawShape(n,r)}if(i&&i.name){const d=je("text");de(d,{x:l/2,y:u+14,"text-anchor":"middle","font-family":"Arial, Helvetica, sans-serif","font-size":"12px",fill:"#222","font-weight":"normal"}),d.textContent=i.name,ke(c,d)}return c}drawConnection(n,r){const i=r.businessObject,a=(i==null?void 0:i.$attrs)&&i.$attrs["pid:category"]||"process",s=(i==null?void 0:i.$attrs)&&i.$attrs["pid:style"]||"",c=a==="signal"?"#999":a==="electrical"?"#666":"#000",l=s==="dashed"||a==="signal"?"4 3":a==="electrical"?"2 2":null;this._ensureDefs(n);const u=je("path");if(r.waypoints&&r.waypoints.length>0){const d=r.waypoints.map((h,f)=>f===0?`M ${h.x} ${h.y}`:`L ${h.x} ${h.y}`).join(" ");de(u,{d})}else de(u,{d:"M0 0 L10 10"});return de(u,{stroke:c,"stroke-width":1.5,fill:"none"}),l&&de(u,{"stroke-dasharray":l}),a==="process"?de(u,{"marker-end":"url(#pid-arrow)"}):de(u,{"marker-end":"url(#pid-arrow-small)"}),ke(n,u),u}_drawRoundedRect(n,r,i,a={}){const s=je("rect");return de(s,{x:0,y:0,width:r,height:i,rx:a.rx||10,ry:a.rx||10,fill:a.fill||"#b3d9ff",stroke:a.stroke||"#333","stroke-width":a.strokeWidth||2}),ke(n,s),s}_drawRectWithDoubleLine(n,r,i){this._drawRoundedRect(n,r,i,{fill:"#fff",stroke:"#333",rx:4,strokeWidth:2});const a=je("rect");de(a,{x:6,y:6,width:r-12,height:i-12,rx:3,stroke:"#333","stroke-width":1,fill:"none"}),ke(n,a)}_drawPump(n,r,i){const a=Math.min(r,i)*.35,s=a+8,c=i/2,l=je("circle");de(l,{cx:s,cy:c,r:a,stroke:"#333","stroke-width":2,fill:"#e6f2ff"}),ke(n,l);const u=je("polygon"),d=s+a*.2,h=c-8,f=c+8;de(u,{points:`${d},${c} ${d+22},${h} ${d+22},${f}`,fill:"#333"}),ke(n,u)}_drawTank(n,r,i){const a=r*.15,s=i*.15,c=je("rect");de(c,{x:a,y:s,width:r-2*a,height:i-2*s,fill:"#b3d9ff",stroke:"#333","stroke-width":2}),ke(n,c);const l=je("ellipse");de(l,{cx:r/2,cy:s,rx:a,ry:s,fill:"#b3d9ff",stroke:"#333","stroke-width":2}),ke(n,l);const u=je("ellipse");de(u,{cx:r/2,cy:i-s,rx:a,ry:s*.7,fill:"#b3d9ff",stroke:"#333","stroke-width":2}),ke(n,u);const d=je("line");de(d,{x1:a+5,y1:i*.6,x2:r-a-5,y2:i*.6,stroke:"#666","stroke-width":1,"stroke-dasharray":"3 3"}),ke(n,d)}_drawFilter(n,r,i){const a=je("rect");de(a,{x:0,y:0,width:r,height:i,rx:6,fill:"#eaf7ea",stroke:"#333","stroke-width":2}),ke(n,a);const s=5,c=r/(s+1);for(let l=1;l<=s;l++){const u=c*l,d=je("line");de(d,{x1:u-8,y1:8,x2:u+8,y2:i-8,stroke:"#333","stroke-width":1.5}),ke(n,d)}}_drawHeatExchanger(n,r,i){const a=Math.min(r,i)*.22,s=a+8,c=r-a-8,l=i/2,u=je("circle");de(u,{cx:s,cy:l,r:a,stroke:"#333","stroke-width":1.5,fill:"#fff"}),ke(n,u);const d=je("circle");de(d,{cx:c,cy:l,r:a,stroke:"#333","stroke-width":1.5,fill:"#fff"}),ke(n,d);const h=je("line");de(h,{x1:s+a,y1:l,x2:c-a,y2:l,stroke:"#333","stroke-width":1.2}),ke(n,h)}_drawValve(n,r,i,a){const s=Math.min(r,i)*.6,c=r/2,l=i/2,u=s/2,d=`${c},${l-u} ${c+u},${l} ${c},${l+u} ${c-u},${l}`,h=je("polygon");if(de(h,{points:d,stroke:"#000","stroke-width":2,fill:"none"}),ke(n,h),a==="valve_control"){const f=je("line");de(f,{x1:c-u*.6,y1:l-u*.6,x2:c+u*.6,y2:l+u*.6,stroke:"#000","stroke-width":2}),ke(n,f);const p=je("line");de(p,{x1:c+u*.6,y1:l-u*.6,x2:c-u*.6,y2:l+u*.6,stroke:"#000","stroke-width":2}),ke(n,p)}else if(a==="valve_check"){const f=je("path");de(f,{d:`M ${c-u*.4} ${l} q ${u*.4} ${-u*.4} ${u*.8} 0`,stroke:"#000","stroke-width":1.8,fill:"none"}),ke(n,f)}else if(a==="valve_gate"){const f=je("line");de(f,{x1:c,y1:l-u,x2:c,y2:l+u,stroke:"#000","stroke-width":1.6}),ke(n,f)}else{const f=je("circle");de(f,{cx:c,cy:l,r:Math.max(3,u*.25),fill:"#000"}),ke(n,f)}}_drawInstrument(n,r,i,a){const s=Math.min(20,Math.min(r,i)*.25),c=s+4,l=i/2,u=je("circle");if(de(u,{cx:c,cy:l,r:s,stroke:"#333","stroke-width":1.2,fill:"#fff"}),ke(n,u),a==="transmitter_analyzer"){const d=je("rect");de(d,{x:c-s/2,y:l-s/2,width:s,height:s,rx:2,stroke:"#333","stroke-width":1,fill:"#fff"}),ke(n,d)}else if(a==="flow_meter"){const d=je("line");de(d,{x1:c-s+2,y1:l,x2:c+s-2,y2:l,stroke:"#333","stroke-width":1.2}),ke(n,d)}else if(a==="pressure_gauge"){const d=je("line");de(d,{x1:c,y1:l,x2:c+s*.6,y2:l-s*.4,stroke:"#333","stroke-width":1.2}),ke(n,d)}}_drawController(n,r,i,a){const s=je("rect");de(s,{x:0,y:0,width:r,height:i,rx:8,stroke:"#333","stroke-width":1.6,fill:"#f9f9f9"}),ke(n,s);const c=r/2-18,l=i/2;for(let u=0;u<3;u++){const d=je("line");de(d,{x1:c+u*12,y1:l-8,x2:c+u*12,y2:l+8,stroke:"#333","stroke-width":1}),ke(n,d)}}_drawActuator(n,r,i,a){if(a==="motor"){const s=r/2,c=i/2,l=Math.min(r,i)*.28,u=je("circle");de(u,{cx:s,cy:c,r:l,stroke:"#333","stroke-width":1.6,fill:"#fff"}),ke(n,u);const d=je("text");de(d,{x:s,y:c+5,"text-anchor":"middle","font-size":"12px",fill:"#333"}),d.textContent="M",ke(n,d)}else a==="actuator_pneumatic"?this._drawRoundedRect(n,r*.8,i*.5,{fill:"#fff",stroke:"#333",rx:6}):this._drawSmallSymbol(n,r,i,a)}_drawSmallSymbol(n,r,i,a){const s=r/2,c=i/2;if(a==="junction"||a==="tee_connection"){const l=je("circle");de(l,{cx:s,cy:c,r:4,fill:"#333"}),ke(n,l)}else if(a==="analyzer_chamber"){const l=je("rect");de(l,{x:s-12,y:c-10,width:24,height:20,rx:4,stroke:"#333",fill:"#fff"}),ke(n,l)}else{const l=je("circle");de(l,{cx:s,cy:c,r:8,stroke:"#333",fill:"#fff"}),ke(n,l)}}_ensureDefs(n){let r=n;for(;r&&r.nodeName&&r.nodeName.toLowerCase()!=="svg";)r=r.parentNode;if(!r||this._createDefs)return;const i=je("defs"),a=je("marker");de(a,{id:"pid-arrow",markerWidth:10,markerHeight:10,refX:8,refY:3.5,orient:"auto",markerUnits:"strokeWidth"});const s=je("path");de(s,{d:"M0,0 L8,3.5 L0,7 Z",fill:"#000"}),ke(a,s),ke(i,a);const c=je("marker");de(c,{id:"pid-arrow-small",markerWidth:8,markerHeight:8,refX:6,refY:3,orient:"auto",markerUnits:"strokeWidth"});const l=je("path");de(l,{d:"M0,0 L6,3 L0,6 Z",fill:"#666"}),ke(c,l),ke(i,c),ke(r,i),this._createDefs=!0}}const hCe={__init__:["pidRenderer"],pidRenderer:["type",["eventBus","bpmnRenderer",dCe]]},oc=FU,cc=zU,fCe=x.forwardRef(({className:e,inset:t,children:n,...r},i)=>o.jsxs(J$,{ref:i,className:ge("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,o.jsx(Yh,{className:"ml-auto h-4 w-4"})]}));fCe.displayName=J$.displayName;const pCe=x.forwardRef(({className:e,...t},n)=>o.jsx(Q$,{ref:n,className:ge("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));pCe.displayName=Q$.displayName;const co=x.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(BU,{children:o.jsx(eI,{ref:r,sideOffset:t,className:ge("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));co.displayName=eI.displayName;const Gt=x.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(tI,{ref:r,className:ge("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));Gt.displayName=tI.displayName;const mCe=x.forwardRef(({className:e,children:t,checked:n,...r},i)=>o.jsxs(nI,{ref:i,className:ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(rI,{children:o.jsx(Gr,{className:"h-4 w-4"})})}),t]}));mCe.displayName=nI.displayName;const gCe=x.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(iI,{ref:r,className:ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(rI,{children:o.jsx(GG,{className:"h-2 w-2 fill-current"})})}),t]}));gCe.displayName=iI.displayName;const wg=x.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(aI,{ref:r,className:ge("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));wg.displayName=aI.displayName;const Hl=x.forwardRef(({className:e,...t},n)=>o.jsx(sI,{ref:n,className:ge("-mx-1 my-1 h-px bg-muted",e),...t}));Hl.displayName=sI.displayName;var cb="Collapsible",[vCe,g6]=$s(cb),[yCe,ON]=vCe(cb),v6=x.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:s,...c}=e,[l,u]=ko({prop:r,defaultProp:i??!1,onChange:s,caller:cb});return o.jsx(yCe,{scope:n,disabled:a,contentId:ld(),open:l,onOpenToggle:x.useCallback(()=>u(d=>!d),[u]),children:o.jsx(kt.div,{"data-state":$N(l),"data-disabled":a?"":void 0,...c,ref:t})})});v6.displayName=cb;var y6="CollapsibleTrigger",x6=x.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,i=ON(y6,n);return o.jsx(kt.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":$N(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:ot(e.onClick,i.onOpenToggle)})});x6.displayName=y6;var RN="CollapsibleContent",b6=x.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ON(RN,e.__scopeCollapsible);return o.jsx(Ro,{present:n||i.open,children:({present:a})=>o.jsx(xCe,{...r,ref:t,present:a})})});b6.displayName=RN;var xCe=x.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=e,s=ON(RN,n),[c,l]=x.useState(r),u=x.useRef(null),d=hn(t,u),h=x.useRef(0),f=h.current,p=x.useRef(0),m=p.current,g=s.open||c,v=x.useRef(g),b=x.useRef(void 0);return x.useEffect(()=>{const w=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(w)},[]),Kr(()=>{const w=u.current;if(w){b.current=b.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const y=w.getBoundingClientRect();h.current=y.height,p.current=y.width,v.current||(w.style.transitionDuration=b.current.transitionDuration,w.style.animationName=b.current.animationName),l(r)}},[s.open,r]),o.jsx(kt.div,{"data-state":$N(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!g,...a,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...e.style},children:g&&i})});function $N(e){return e?"open":"closed"}var bCe=v6,wCe=x6,_Ce=b6,_a="Accordion",jCe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[IN,SCe,ECe]=lj(_a),[lb]=$s(_a,[ECe,g6]),MN=g6(),w6=O.forwardRef((e,t)=>{const{type:n,...r}=e,i=r,a=r;return o.jsx(IN.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?o.jsx(CCe,{...a,ref:t}):o.jsx(kCe,{...i,ref:t})})});w6.displayName=_a;var[_6,NCe]=lb(_a),[j6,PCe]=lb(_a,{collapsible:!1}),kCe=O.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...s}=e,[c,l]=ko({prop:n,defaultProp:r??"",onChange:i,caller:_a});return o.jsx(_6,{scope:e.__scopeAccordion,value:O.useMemo(()=>c?[c]:[],[c]),onItemOpen:l,onItemClose:O.useCallback(()=>a&&l(""),[a,l]),children:o.jsx(j6,{scope:e.__scopeAccordion,collapsible:a,children:o.jsx(S6,{...s,ref:t})})})}),CCe=O.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=e,[s,c]=ko({prop:n,defaultProp:r??[],onChange:i,caller:_a}),l=O.useCallback(d=>c((h=[])=>[...h,d]),[c]),u=O.useCallback(d=>c((h=[])=>h.filter(f=>f!==d)),[c]);return o.jsx(_6,{scope:e.__scopeAccordion,value:s,onItemOpen:l,onItemClose:u,children:o.jsx(j6,{scope:e.__scopeAccordion,collapsible:!0,children:o.jsx(S6,{...a,ref:t})})})}),[ACe,ub]=lb(_a),S6=O.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...s}=e,c=O.useRef(null),l=hn(c,t),u=SCe(n),h=sy(i)==="ltr",f=ot(e.onKeyDown,p=>{var P;if(!jCe.includes(p.key))return;const m=p.target,g=u().filter(k=>{var T;return!((T=k.ref.current)!=null&&T.disabled)}),v=g.findIndex(k=>k.ref.current===m),b=g.length;if(v===-1)return;p.preventDefault();let w=v;const y=0,_=b-1,j=()=>{w=v+1,w>_&&(w=y)},S=()=>{w=v-1,w<y&&(w=_)};switch(p.key){case"Home":w=y;break;case"End":w=_;break;case"ArrowRight":a==="horizontal"&&(h?j():S());break;case"ArrowDown":a==="vertical"&&j();break;case"ArrowLeft":a==="horizontal"&&(h?S():j());break;case"ArrowUp":a==="vertical"&&S();break}const E=w%b;(P=g[E].ref.current)==null||P.focus()});return o.jsx(ACe,{scope:n,disabled:r,direction:i,orientation:a,children:o.jsx(IN.Slot,{scope:n,children:o.jsx(kt.div,{...s,"data-orientation":a,ref:l,onKeyDown:r?void 0:f})})})}),Jv="AccordionItem",[TCe,DN]=lb(Jv),E6=O.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...i}=e,a=ub(Jv,n),s=NCe(Jv,n),c=MN(n),l=ld(),u=r&&s.value.includes(r)||!1,d=a.disabled||e.disabled;return o.jsx(TCe,{scope:n,open:u,disabled:d,triggerId:l,children:o.jsx(bCe,{"data-orientation":a.orientation,"data-state":T6(u),...c,...i,ref:t,disabled:d,open:u,onOpenChange:h=>{h?s.onItemOpen(r):s.onItemClose(r)}})})});E6.displayName=Jv;var N6="AccordionHeader",P6=O.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=ub(_a,n),a=DN(N6,n);return o.jsx(kt.h3,{"data-orientation":i.orientation,"data-state":T6(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});P6.displayName=N6;var H1="AccordionTrigger",k6=O.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=ub(_a,n),a=DN(H1,n),s=PCe(H1,n),c=MN(n);return o.jsx(IN.ItemSlot,{scope:n,children:o.jsx(wCe,{"aria-disabled":a.open&&!s.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...c,...r,ref:t})})});k6.displayName=H1;var C6="AccordionContent",A6=O.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=ub(_a,n),a=DN(C6,n),s=MN(n);return o.jsx(_Ce,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...s,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});A6.displayName=C6;function T6(e){return e?"open":"closed"}var OCe=w6,RCe=E6,$Ce=P6,O6=k6,R6=A6;const V1=OCe,Xl=x.forwardRef(({className:e,...t},n)=>o.jsx(RCe,{ref:n,className:ge("border-b",e),...t}));Xl.displayName="AccordionItem";const Zl=x.forwardRef(({className:e,children:t,...n},r)=>o.jsx($Ce,{className:"flex",children:o.jsxs(O6,{ref:r,className:ge("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,o.jsx(ai,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Zl.displayName=O6.displayName;const Jl=x.forwardRef(({className:e,children:t,...n},r)=>o.jsx(R6,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:o.jsx("div",{className:ge("pb-4 pt-0",e),children:t})}));Jl.displayName=R6.displayName;const $6=x.forwardRef(({...e},t)=>o.jsx("nav",{ref:t,"aria-label":"breadcrumb",...e}));$6.displayName="Breadcrumb";const I6=x.forwardRef(({className:e,...t},n)=>o.jsx("ol",{ref:n,className:ge("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...t}));I6.displayName="BreadcrumbList";const _g=x.forwardRef(({className:e,...t},n)=>o.jsx("li",{ref:n,className:ge("inline-flex items-center gap-1.5",e),...t}));_g.displayName="BreadcrumbItem";const G1=x.forwardRef(({asChild:e,className:t,...n},r)=>{const i=e?oM:"a";return o.jsx(i,{ref:r,className:ge("transition-colors hover:text-foreground",t),...n})});G1.displayName="BreadcrumbLink";const M6=x.forwardRef(({className:e,...t},n)=>o.jsx("span",{ref:n,role:"link","aria-disabled":"true","aria-current":"page",className:ge("font-normal text-foreground",e),...t}));M6.displayName="BreadcrumbPage";const W1=({children:e,className:t,...n})=>o.jsx("li",{role:"presentation","aria-hidden":"true",className:ge("[&>svg]:size-3.5",t),...n,children:e??o.jsx(Yh,{})});W1.displayName="BreadcrumbSeparator";function ICe(e){const t=MCe(e),n=x.forwardRef((r,i)=>{const{children:a,...s}=r,c=x.Children.toArray(a),l=c.find(LCe);if(l){const u=l.props.children,d=c.map(h=>h===l?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...s,ref:i,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return o.jsx(t,{...s,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}function MCe(e){const t=x.forwardRef((n,r)=>{const{children:i,...a}=n;if(x.isValidElement(i)){const s=FCe(i),c=BCe(a,i.props);return i.type!==x.Fragment&&(c.ref=r?K$(r,s):s),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var DCe=Symbol("radix.slottable");function LCe(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===DCe}function BCe(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...c)=>{const l=a(...c);return i(...c),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function FCe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function D6(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var L6=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zCe="VisuallyHidden",db=x.forwardRef((e,t)=>o.jsx(kt.span,{...e,ref:t,style:{...L6,...e.style}}));db.displayName=zCe;var UCe=db,HCe=[" ","Enter","ArrowUp","ArrowDown"],VCe=[" ","Enter"],Qc="Select",[hb,fb,GCe]=lj(Qc),[Id]=$s(Qc,[GCe,oy]),pb=oy(),[WCe,Zo]=Id(Qc),[qCe,KCe]=Id(Qc),B6=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:s,defaultValue:c,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:f,required:p,form:m}=e,g=pb(t),[v,b]=x.useState(null),[w,y]=x.useState(null),[_,j]=x.useState(!1),S=sy(u),[E,P]=ko({prop:r,defaultProp:i??!1,onChange:a,caller:Qc}),[k,T]=ko({prop:s,defaultProp:c,onChange:l,caller:Qc}),A=x.useRef(null),R=v?m||!!v.closest("form"):!0,[L,B]=x.useState(new Set),G=Array.from(L).map(U=>U.props.value).join(";");return o.jsx(WU,{...g,children:o.jsxs(WCe,{required:p,scope:t,trigger:v,onTriggerChange:b,valueNode:w,onValueNodeChange:y,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:ld(),value:k,onValueChange:T,open:E,onOpenChange:P,dir:S,triggerPointerDownPosRef:A,disabled:f,children:[o.jsx(hb.Provider,{scope:t,children:o.jsx(qCe,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(U=>{B(K=>new Set(K).add(U))},[]),onNativeOptionRemove:x.useCallback(U=>{B(K=>{const te=new Set(K);return te.delete(U),te})},[]),children:n})}),R?o.jsxs(l8,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:k,onChange:U=>T(U.target.value),disabled:f,form:m,children:[k===void 0?o.jsx("option",{value:""}):null,Array.from(L)]},G):null]})})};B6.displayName=Qc;var F6="SelectTrigger",z6=x.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,a=pb(n),s=Zo(F6,n),c=s.disabled||r,l=hn(t,s.onTriggerChange),u=fb(n),d=x.useRef("touch"),[h,f,p]=d8(g=>{const v=u().filter(y=>!y.disabled),b=v.find(y=>y.value===s.value),w=h8(v,g,b);w!==void 0&&s.onValueChange(w.value)}),m=g=>{c||(s.onOpenChange(!0),p()),g&&(s.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(oI,{asChild:!0,...a,children:o.jsx(kt.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":u8(s.value)?"":void 0,...i,ref:l,onClick:ot(i.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&m(g)}),onPointerDown:ot(i.onPointerDown,g=>{d.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:ot(i.onKeyDown,g=>{const v=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(v&&g.key===" ")&&HCe.includes(g.key)&&(m(),g.preventDefault())})})})});z6.displayName=F6;var U6="SelectValue",H6=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:s="",...c}=e,l=Zo(U6,n),{onValueNodeHasChildrenChange:u}=l,d=a!==void 0,h=hn(t,l.onValueNodeChange);return Kr(()=>{u(d)},[u,d]),o.jsx(kt.span,{...c,ref:h,style:{pointerEvents:"none"},children:u8(l.value)?o.jsx(o.Fragment,{children:s}):a})});H6.displayName=U6;var YCe="SelectIcon",V6=x.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return o.jsx(kt.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});V6.displayName=YCe;var XCe="SelectPortal",G6=e=>o.jsx(cI,{asChild:!0,...e});G6.displayName=XCe;var el="SelectContent",W6=x.forwardRef((e,t)=>{const n=Zo(el,e.__scopeSelect),[r,i]=x.useState();if(Kr(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?ry.createPortal(o.jsx(q6,{scope:e.__scopeSelect,children:o.jsx(hb.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(K6,{...e,ref:t})});W6.displayName=el;var aa=10,[q6,Jo]=Id(el),ZCe="SelectContentImpl",JCe=ICe("SelectContent.RemoveScroll"),K6=x.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:s,side:c,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v,...b}=e,w=Zo(el,n),[y,_]=x.useState(null),[j,S]=x.useState(null),E=hn(t,_e=>_(_e)),[P,k]=x.useState(null),[T,A]=x.useState(null),R=fb(n),[L,B]=x.useState(!1),G=x.useRef(!1);x.useEffect(()=>{if(y)return UU(y)},[y]),HU();const U=x.useCallback(_e=>{const[ie,...Y]=R().map(H=>H.ref.current),[re]=Y.slice(-1),ae=document.activeElement;for(const H of _e)if(H===ae||(H==null||H.scrollIntoView({block:"nearest"}),H===ie&&j&&(j.scrollTop=0),H===re&&j&&(j.scrollTop=j.scrollHeight),H==null||H.focus(),document.activeElement!==ae))return},[R,j]),K=x.useCallback(()=>U([P,y]),[U,P,y]);x.useEffect(()=>{L&&K()},[L,K]);const{onOpenChange:te,triggerPointerDownPosRef:W}=w;x.useEffect(()=>{if(y){let _e={x:0,y:0};const ie=re=>{var ae,H;_e={x:Math.abs(Math.round(re.pageX)-(((ae=W.current)==null?void 0:ae.x)??0)),y:Math.abs(Math.round(re.pageY)-(((H=W.current)==null?void 0:H.y)??0))}},Y=re=>{_e.x<=10&&_e.y<=10?re.preventDefault():y.contains(re.target)||te(!1),document.removeEventListener("pointermove",ie),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",Y,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",Y,{capture:!0})}}},[y,te,W]),x.useEffect(()=>{const _e=()=>te(!1);return window.addEventListener("blur",_e),window.addEventListener("resize",_e),()=>{window.removeEventListener("blur",_e),window.removeEventListener("resize",_e)}},[te]);const[fe,be]=d8(_e=>{const ie=R().filter(ae=>!ae.disabled),Y=ie.find(ae=>ae.ref.current===document.activeElement),re=h8(ie,_e,Y);re&&setTimeout(()=>re.ref.current.focus())}),ne=x.useCallback((_e,ie,Y)=>{const re=!G.current&&!Y;(w.value!==void 0&&w.value===ie||re)&&(k(_e),re&&(G.current=!0))},[w.value]),ce=x.useCallback(()=>y==null?void 0:y.focus(),[y]),we=x.useCallback((_e,ie,Y)=>{const re=!G.current&&!Y;(w.value!==void 0&&w.value===ie||re)&&A(_e)},[w.value]),et=r==="popper"?q1:Y6,jt=et===q1?{side:c,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v}:{};return o.jsx(q6,{scope:n,content:y,viewport:j,onViewportChange:S,itemRefCallback:ne,selectedItem:P,onItemLeave:ce,itemTextRefCallback:we,focusSelectedItem:K,selectedItemText:T,position:r,isPositioned:L,searchRef:fe,children:o.jsx(VU,{as:JCe,allowPinchZoom:!0,children:o.jsx(GU,{asChild:!0,trapped:w.open,onMountAutoFocus:_e=>{_e.preventDefault()},onUnmountAutoFocus:ot(i,_e=>{var ie;(ie=w.trigger)==null||ie.focus({preventScroll:!0}),_e.preventDefault()}),children:o.jsx(lI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:_e=>_e.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(et,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:_e=>_e.preventDefault(),...b,...jt,onPlaced:()=>B(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ot(b.onKeyDown,_e=>{const ie=_e.ctrlKey||_e.altKey||_e.metaKey;if(_e.key==="Tab"&&_e.preventDefault(),!ie&&_e.key.length===1&&be(_e.key),["ArrowUp","ArrowDown","Home","End"].includes(_e.key)){let re=R().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(_e.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(_e.key)){const ae=_e.target,H=re.indexOf(ae);re=re.slice(H+1)}setTimeout(()=>U(re)),_e.preventDefault()}})})})})})})});K6.displayName=ZCe;var QCe="SelectItemAlignedPosition",Y6=x.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,a=Zo(el,n),s=Jo(el,n),[c,l]=x.useState(null),[u,d]=x.useState(null),h=hn(t,E=>d(E)),f=fb(n),p=x.useRef(!1),m=x.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=s,y=x.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&u&&g&&v&&b){const E=a.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),k=a.valueNode.getBoundingClientRect(),T=b.getBoundingClientRect();if(a.dir!=="rtl"){const ae=T.left-P.left,H=k.left-ae,Te=E.left-H,Ee=E.width+Te,We=Math.max(Ee,P.width),gt=window.innerWidth-aa,Jt=Mw(H,[aa,Math.max(aa,gt-We)]);c.style.minWidth=Ee+"px",c.style.left=Jt+"px"}else{const ae=P.right-T.right,H=window.innerWidth-k.right-ae,Te=window.innerWidth-E.right-H,Ee=E.width+Te,We=Math.max(Ee,P.width),gt=window.innerWidth-aa,Jt=Mw(H,[aa,Math.max(aa,gt-We)]);c.style.minWidth=Ee+"px",c.style.right=Jt+"px"}const A=f(),R=window.innerHeight-aa*2,L=g.scrollHeight,B=window.getComputedStyle(u),G=parseInt(B.borderTopWidth,10),U=parseInt(B.paddingTop,10),K=parseInt(B.borderBottomWidth,10),te=parseInt(B.paddingBottom,10),W=G+U+L+te+K,fe=Math.min(v.offsetHeight*5,W),be=window.getComputedStyle(g),ne=parseInt(be.paddingTop,10),ce=parseInt(be.paddingBottom,10),we=E.top+E.height/2-aa,et=R-we,jt=v.offsetHeight/2,_e=v.offsetTop+jt,ie=G+U+_e,Y=W-ie;if(ie<=we){const ae=A.length>0&&v===A[A.length-1].ref.current;c.style.bottom="0px";const H=u.clientHeight-g.offsetTop-g.offsetHeight,Te=Math.max(et,jt+(ae?ce:0)+H+K),Ee=ie+Te;c.style.height=Ee+"px"}else{const ae=A.length>0&&v===A[0].ref.current;c.style.top="0px";const Te=Math.max(we,G+g.offsetTop+(ae?ne:0)+jt)+Y;c.style.height=Te+"px",g.scrollTop=ie-we+g.offsetTop}c.style.margin=`${aa}px 0`,c.style.minHeight=fe+"px",c.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,c,u,g,v,b,a.dir,r]);Kr(()=>y(),[y]);const[_,j]=x.useState();Kr(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const S=x.useCallback(E=>{E&&m.current===!0&&(y(),w==null||w(),m.current=!1)},[y,w]);return o.jsx(tAe,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:p,onScrollButtonChange:S,children:o.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:o.jsx(kt.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Y6.displayName=QCe;var eAe="SelectPopperPosition",q1=x.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=aa,...a}=e,s=pb(n);return o.jsx(uI,{...s,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});q1.displayName=eAe;var[tAe,LN]=Id(el,{}),K1="SelectViewport",X6=x.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,a=Jo(K1,n),s=LN(K1,n),c=hn(t,a.onViewportChange),l=x.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(hb.Slot,{scope:n,children:o.jsx(kt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ot(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=s;if(f!=null&&f.current&&h){const p=Math.abs(l.current-d.scrollTop);if(p>0){const m=window.innerHeight-aa*2,g=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),b=Math.max(g,v);if(b<m){const w=b+p,y=Math.min(m,w),_=w-y;h.style.height=y+"px",h.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});X6.displayName=K1;var Z6="SelectGroup",[nAe,rAe]=Id(Z6),iAe=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=ld();return o.jsx(nAe,{scope:n,id:i,children:o.jsx(kt.div,{role:"group","aria-labelledby":i,...r,ref:t})})});iAe.displayName=Z6;var J6="SelectLabel",Q6=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=rAe(J6,n);return o.jsx(kt.div,{id:i.id,...r,ref:t})});Q6.displayName=J6;var Qv="SelectItem",[aAe,e8]=Id(Qv),t8=x.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...s}=e,c=Zo(Qv,n),l=Jo(Qv,n),u=c.value===r,[d,h]=x.useState(a??""),[f,p]=x.useState(!1),m=hn(t,w=>{var y;return(y=l.itemRefCallback)==null?void 0:y.call(l,w,r,i)}),g=ld(),v=x.useRef("touch"),b=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(aAe,{scope:n,value:r,disabled:i,textId:g,isSelected:u,onItemTextChange:x.useCallback(w=>{h(y=>y||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(hb.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:o.jsx(kt.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:m,onFocus:ot(s.onFocus,()=>p(!0)),onBlur:ot(s.onBlur,()=>p(!1)),onClick:ot(s.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:ot(s.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:ot(s.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:ot(s.onPointerMove,w=>{var y;v.current=w.pointerType,i?(y=l.onItemLeave)==null||y.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ot(s.onPointerLeave,w=>{var y;w.currentTarget===document.activeElement&&((y=l.onItemLeave)==null||y.call(l))}),onKeyDown:ot(s.onKeyDown,w=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&w.key===" "||(VCe.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});t8.displayName=Qv;var Eh="SelectItemText",n8=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...a}=e,s=Zo(Eh,n),c=Jo(Eh,n),l=e8(Eh,n),u=KCe(Eh,n),[d,h]=x.useState(null),f=hn(t,b=>h(b),l.onItemTextChange,b=>{var w;return(w=c.itemTextRefCallback)==null?void 0:w.call(c,b,l.value,l.disabled)}),p=d==null?void 0:d.textContent,m=x.useMemo(()=>o.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return Kr(()=>(g(m),()=>v(m)),[g,v,m]),o.jsxs(o.Fragment,{children:[o.jsx(kt.span,{id:l.textId,...a,ref:f}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?ry.createPortal(a.children,s.valueNode):null]})});n8.displayName=Eh;var r8="SelectItemIndicator",i8=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return e8(r8,n).isSelected?o.jsx(kt.span,{"aria-hidden":!0,...r,ref:t}):null});i8.displayName=r8;var Y1="SelectScrollUpButton",a8=x.forwardRef((e,t)=>{const n=Jo(Y1,e.__scopeSelect),r=LN(Y1,e.__scopeSelect),[i,a]=x.useState(!1),s=hn(t,r.onScrollButtonChange);return Kr(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=l.scrollTop>0;a(u)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?o.jsx(o8,{...e,ref:s,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});a8.displayName=Y1;var X1="SelectScrollDownButton",s8=x.forwardRef((e,t)=>{const n=Jo(X1,e.__scopeSelect),r=LN(X1,e.__scopeSelect),[i,a]=x.useState(!1),s=hn(t,r.onScrollButtonChange);return Kr(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;a(d)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?o.jsx(o8,{...e,ref:s,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});s8.displayName=X1;var o8=x.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,a=Jo("SelectScrollButton",n),s=x.useRef(null),c=fb(n),l=x.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Kr(()=>{var d;const u=c().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[c]),o.jsx(kt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:ot(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:ot(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:ot(i.onPointerLeave,()=>{l()})})}),sAe="SelectSeparator",c8=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(kt.div,{"aria-hidden":!0,...r,ref:t})});c8.displayName=sAe;var Z1="SelectArrow",oAe=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=pb(n),a=Zo(Z1,n),s=Jo(Z1,n);return a.open&&s.position==="popper"?o.jsx(dI,{...i,...r,ref:t}):null});oAe.displayName=Z1;var cAe="SelectBubbleInput",l8=x.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=x.useRef(null),a=hn(r,i),s=D6(t);return x.useEffect(()=>{const c=i.current;if(!c)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("change",{bubbles:!0});d.call(c,t),c.dispatchEvent(h)}},[s,t]),o.jsx(kt.select,{...n,style:{...L6,...n.style},ref:a,defaultValue:t})});l8.displayName=cAe;function u8(e){return e===""||e===void 0}function d8(e){const t=hi(e),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(s=>{const c=n.current+s;t(c),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(c)},[t]),a=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function h8(e,t,n){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let s=lAe(e,Math.max(a,0));i.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function lAe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var uAe=B6,f8=z6,dAe=H6,hAe=V6,fAe=G6,p8=W6,pAe=X6,m8=Q6,g8=t8,mAe=n8,gAe=i8,v8=a8,y8=s8,x8=c8;const Ss=uAe,Es=dAe,La=x.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(f8,{ref:r,className:ge("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx(hAe,{asChild:!0,children:o.jsx(ai,{className:"h-4 w-4 opacity-50"})})]}));La.displayName=f8.displayName;const b8=x.forwardRef(({className:e,...t},n)=>o.jsx(v8,{ref:n,className:ge("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(ra,{className:"h-4 w-4"})}));b8.displayName=v8.displayName;const w8=x.forwardRef(({className:e,...t},n)=>o.jsx(y8,{ref:n,className:ge("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(ai,{className:"h-4 w-4"})}));w8.displayName=y8.displayName;const Ba=x.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>o.jsx(fAe,{children:o.jsxs(p8,{ref:i,className:ge("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(b8,{}),o.jsx(pAe,{className:ge("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(w8,{})]})}));Ba.displayName=p8.displayName;const vAe=x.forwardRef(({className:e,...t},n)=>o.jsx(m8,{ref:n,className:ge("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));vAe.displayName=m8.displayName;const Be=x.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(g8,{ref:r,className:ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(gAe,{children:o.jsx(Gr,{className:"h-4 w-4"})})}),o.jsx(mAe,{children:t})]}));Be.displayName=g8.displayName;const yAe=x.forwardRef(({className:e,...t},n)=>o.jsx(x8,{ref:n,className:ge("-mx-1 my-1 h-px bg-muted",e),...t}));yAe.displayName=x8.displayName;var mb="Switch",[xAe]=$s(mb),[bAe,wAe]=xAe(mb),_8=x.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:s,disabled:c,value:l="on",onCheckedChange:u,form:d,...h}=e,[f,p]=x.useState(null),m=hn(t,y=>p(y)),g=x.useRef(!1),v=f?d||!!f.closest("form"):!0,[b,w]=ko({prop:i,defaultProp:a??!1,onChange:u,caller:mb});return o.jsxs(bAe,{scope:n,checked:b,disabled:c,children:[o.jsx(kt.button,{type:"button",role:"switch","aria-checked":b,"aria-required":s,"data-state":N8(b),"data-disabled":c?"":void 0,disabled:c,value:l,...h,ref:m,onClick:ot(e.onClick,y=>{w(_=>!_),v&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),v&&o.jsx(E8,{control:f,bubbles:!g.current,name:r,value:l,checked:b,required:s,disabled:c,form:d,style:{transform:"translateX(-100%)"}})]})});_8.displayName=mb;var j8="SwitchThumb",S8=x.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=wAe(j8,n);return o.jsx(kt.span,{"data-state":N8(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});S8.displayName=j8;var _Ae="SwitchBubbleInput",E8=x.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},a)=>{const s=x.useRef(null),c=hn(s,a),l=D6(n),u=qU(t);return x.useEffect(()=>{const d=s.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&p){const m=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(m)}},[l,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:c,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});E8.displayName=_Ae;function N8(e){return e?"checked":"unchecked"}var P8=_8,jAe=S8;const Ns=x.forwardRef(({className:e,...t},n)=>o.jsx(P8,{className:ge("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:o.jsx(jAe,{className:ge("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ns.displayName=P8.displayName;var SAe=Symbol("radix.slottable");function EAe(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=SAe,t}var k8="AlertDialog",[NAe]=$s(k8,[hI]),Gs=hI(),C8=e=>{const{__scopeAlertDialog:t,...n}=e,r=Gs(t);return o.jsx(cj,{...r,...n,modal:!0})};C8.displayName=k8;var PAe="AlertDialogTrigger",kAe=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Gs(n);return o.jsx(Y$,{...i,...r,ref:t})});kAe.displayName=PAe;var CAe="AlertDialogPortal",A8=e=>{const{__scopeAlertDialog:t,...n}=e,r=Gs(t);return o.jsx(oj,{...r,...n})};A8.displayName=CAe;var AAe="AlertDialogOverlay",T8=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Gs(n);return o.jsx(Zf,{...i,...r,ref:t})});T8.displayName=AAe;var uu="AlertDialogContent",[TAe,OAe]=NAe(uu),RAe=EAe("AlertDialogContent"),O8=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,a=Gs(n),s=x.useRef(null),c=hn(t,s),l=x.useRef(null);return o.jsx(KU,{contentName:uu,titleName:R8,docsSlug:"alert-dialog",children:o.jsx(TAe,{scope:n,cancelRef:l,children:o.jsxs(Jf,{role:"alertdialog",...a,...i,ref:c,onOpenAutoFocus:ot(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(RAe,{children:r}),o.jsx(IAe,{contentRef:s})]})})})});O8.displayName=uu;var R8="AlertDialogTitle",$8=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Gs(n);return o.jsx(Qf,{...i,...r,ref:t})});$8.displayName=R8;var I8="AlertDialogDescription",M8=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Gs(n);return o.jsx(ep,{...i,...r,ref:t})});M8.displayName=I8;var $Ae="AlertDialogAction",D8=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Gs(n);return o.jsx(ay,{...i,...r,ref:t})});D8.displayName=$Ae;var L8="AlertDialogCancel",B8=x.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=OAe(L8,n),a=Gs(n),s=hn(t,i);return o.jsx(ay,{...a,...r,ref:s})});B8.displayName=L8;var IAe=({contentRef:e})=>{const t=`\`${uu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${uu}\` by passing a \`${I8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${uu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},MAe=C8,DAe=A8,F8=T8,z8=O8,U8=D8,H8=B8,V8=$8,G8=M8;const BN=MAe,LAe=DAe,W8=x.forwardRef(({className:e,...t},n)=>o.jsx(F8,{className:ge("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));W8.displayName=F8.displayName;const gb=x.forwardRef(({className:e,...t},n)=>o.jsxs(LAe,{children:[o.jsx(W8,{}),o.jsx(z8,{ref:n,className:ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));gb.displayName=z8.displayName;const vb=({className:e,...t})=>o.jsx("div",{className:ge("flex flex-col space-y-2 text-center sm:text-left",e),...t});vb.displayName="AlertDialogHeader";const yb=({className:e,...t})=>o.jsx("div",{className:ge("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});yb.displayName="AlertDialogFooter";const xb=x.forwardRef(({className:e,...t},n)=>o.jsx(V8,{ref:n,className:ge("text-lg font-semibold",e),...t}));xb.displayName=V8.displayName;const bb=x.forwardRef(({className:e,...t},n)=>o.jsx(G8,{ref:n,className:ge("text-sm text-muted-foreground",e),...t}));bb.displayName=G8.displayName;const wb=x.forwardRef(({className:e,...t},n)=>o.jsx(U8,{ref:n,className:ge(Cj(),e),...t}));wb.displayName=U8.displayName;const _b=x.forwardRef(({className:e,...t},n)=>o.jsx(H8,{ref:n,className:ge(Cj({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));_b.displayName=H8.displayName;const BAe=[{value:"auto",label:"Auto (match prompt language)"},{value:"en",label:"English"},{value:"es",label:"Espaol (Spanish)"},{value:"fr",label:"Franais (French)"},{value:"de",label:"Deutsch (German)"},{value:"pt",label:"Portugus (Portuguese)"},{value:"it",label:"Italiano (Italian)"}],ey={auto:"Prompt language",en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",pt:"Portugus",it:"Italiano"},q8={es:{start:"inicio",startevent:"evento de inicio",end:"fin",event:"evento",endevent:"evento final",approve:"aprobar",approval:"aprobacin",request:"solicitud",review:"revisin",task:"tarea",user:"usuario",service:"servicio",process:"proceso",data:"datos",validation:"validacin",payment:"pago",error:"error",handling:"gestin",customer:"cliente",support:"soporte",escalation:"escalamiento",decision:"decisin",gateway:"compuerta",branch:"rama",automation:"automatizacin",monitoring:"monitoreo",compliance:"cumplimiento"},fr:{start:"dbut",startevent:"vnement de dbut",end:"fin",event:"vnement",endevent:"vnement de fin",approve:"approuver",approval:"approbation",request:"demande",review:"revue",task:"tche",user:"utilisateur",service:"service",process:"processus",data:"donnes",validation:"validation",payment:"paiement",error:"erreur",handling:"gestion",customer:"client",support:"support",escalation:"escalade",decision:"dcision",gateway:"passerelle",branch:"branche",automation:"automatisation",compliance:"conformit"},de:{start:"start",startevent:"startereignis",end:"ende",event:"ereignis",endevent:"endereignis",approve:"genehmigen",approval:"genehmigung",request:"anfrage",review:"prfung",task:"aufgabe",user:"benutzer",service:"dienst",process:"prozess",data:"daten",validation:"validierung",payment:"zahlung",error:"fehler",handling:"bearbeitung",customer:"kunde",support:"support",escalation:"eskalation",decision:"entscheidung",gateway:"gateway",branch:"zweig",automation:"automatisierung",compliance:"compliance"},pt:{start:"incio",startevent:"evento inicial",end:"fim",event:"evento",endevent:"evento final",approve:"aprovar",approval:"aprovao",request:"solicitao",review:"reviso",task:"tarefa",user:"usurio",service:"servio",process:"processo",data:"dados",validation:"validao",payment:"pagamento",error:"erro",handling:"tratamento",customer:"cliente",support:"suporte",escalation:"escalonamento",decision:"deciso",gateway:"gateway",branch:"ramo",automation:"automao",compliance:"conformidade"},it:{start:"inizio",startevent:"evento iniziale",end:"fine",event:"evento",endevent:"evento finale",approve:"approvare",approval:"approvazione",request:"richiesta",review:"revisione",task:"attivit",user:"utente",service:"servizio",process:"processo",data:"dati",validation:"validazione",payment:"pagamento",error:"errore",handling:"gestione",customer:"cliente",support:"supporto",escalation:"escalation",decision:"decisione",gateway:"gateway",branch:"ramo",automation:"automazione",compliance:"conformit"}},FAe={es:[{pattern:/start event/gi,replacement:"Evento de Inicio"},{pattern:/end event/gi,replacement:"Evento Final"},{pattern:/user task/gi,replacement:"Tarea de Usuario"},{pattern:/service task/gi,replacement:"Tarea de Servicio"}],fr:[{pattern:/start event/gi,replacement:"vnement de dbut"},{pattern:/end event/gi,replacement:"vnement de fin"},{pattern:/user task/gi,replacement:"Tche utilisateur"},{pattern:/service task/gi,replacement:"Tche de service"}],de:[{pattern:/start event/gi,replacement:"Startereignis"},{pattern:/end event/gi,replacement:"Endereignis"},{pattern:/user task/gi,replacement:"Benutzeraufgabe"},{pattern:/service task/gi,replacement:"Serviceaufgabe"}],pt:[{pattern:/start event/gi,replacement:"Evento de Incio"},{pattern:/end event/gi,replacement:"Evento Final"},{pattern:/user task/gi,replacement:"Tarefa do Usurio"},{pattern:/service task/gi,replacement:"Tarefa de Servio"}],it:[{pattern:/start event/gi,replacement:"Evento Iniziale"},{pattern:/end event/gi,replacement:"Evento Finale"},{pattern:/user task/gi,replacement:"Attivit Utente"},{pattern:/service task/gi,replacement:"Attivit di Servizio"}]},v$="bpmn-language-preference",zAe=new Set(Object.keys(q8)),UAe=e=>BAe.some(t=>t.value===e),HAe=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z]/g,""),y$=(e,t)=>{var n;return e?e===e.toUpperCase()?t.toUpperCase():e[0]===((n=e[0])==null?void 0:n.toUpperCase())?t.charAt(0).toUpperCase()+t.slice(1):t:t},VAe=(e,t)=>{const n=q8[t];if(!n)return null;const r=FAe[t];let i=e;return r&&r.forEach(({pattern:c,replacement:l})=>{i=i.replace(c,u=>y$(u,l))}),i.split(/(\s+|[-/(),:]+)/g).map(c=>{if(!c.trim()||/(\s+|[-/(),:]+)/.test(c))return c;const l=HAe(c),u=n[l];return u?y$(c,u):c}).join("")},GAe=e=>{if(!e||e.trim().length===0)return"en";const t=e.toLowerCase();if(/[]/.test(e))return"de";const n={es:[/\b(es|est|estn|con|para|por|del|la|el|de|en|un|una|son|ser|hacer|tiene|tener|proceso|diagrama|crear|generar|tarea|aprobar|revisin|validacin)\b/i],fr:[/\b(est|sont|avec|pour|par|du|la|le|de|en|un|une|sont|tre|faire|a|avoir|processus|diagramme|crer|gnrer|tche|approuver|revue|validation)\b/i],de:[/\b(ist|sind|mit|fr|von|der|die|das|dem|den|des|ein|eine|einen|einem|einer|und|oder|prozess|prozesse|diagramm|erstellen|generieren|aufgabe|aktivitt)\b/i],it:[/\b(|sono|con|per|da|del|la|il|di|in|un|una|sono|essere|fare|ha|avere|processo|diagramma|creare|generare|compito)\b/i],pt:[/\b(|so|com|para|por|do|da|de|em|um|uma|so|ser|fazer|tem|ter|processo|diagrama|criar|gerar|tarefa)\b/i],ru:[/\b(||||||||||||)\b/i],ja:[/\b(|||||||||||)\b/i],ko:[/\b(|||||||||||)\b/i],zh:[/\b(||||||||||)\b/i],ar:[/\b(|||||||||||)\b/i],hi:[/\b(|||||||||)\b/i]},r={};for(const[s,c]of Object.entries(n)){r[s]=0;for(const l of c){const u=t.match(l);u&&(r[s]+=u.length)}}let i=0,a="en";for(const[s,c]of Object.entries(r))c>i&&(i=c,a=s);if(i===0){if(/[\u4e00-\u9fff]/.test(e))return"zh";if(/[\u3040-\u309f\u30a0-\u30ff]/.test(e))return"ja";if(/[\uac00-\ud7af]/.test(e))return"ko";if(/[\u0600-\u06ff]/.test(e))return"ar";if(/[\u0400-\u04ff]/.test(e))return"ru";if(/[\u0900-\u097f]/.test(e))return"hi"}return a},K8=e=>e==="auto"?`LANGUAGE DIRECTIVE:
- Mirror the language used in the user's prompt and on the current canvas.
- If the existing diagram contains Spanish labels, every generated variant MUST also be Spanish.
- Never switch to English unless the prompt itself is English.`:`LANGUAGE DIRECTIVE:
CRITICAL: Use ${ey[e]??e.toUpperCase()} for 100% of textual content (tasks, events, gateways, pools, lanes, annotations, documentation).
Do NOT include English translations or bilingual labels.`,WAe=(e,t)=>{const n=GAe(e),r={en:"en",es:"es",fr:"fr",de:"de",it:"it",pt:"pt"},i=n!=="en"&&r[n]?r[n]:t;if(t==="auto"&&n!=="en"&&r[n]){const a=ey[r[n]]??n.toUpperCase();return`LANGUAGE DIRECTIVE:
CRITICAL: The existing diagram content is in ${a}. Generate ALL variants using ${a} for 100% of textual content (tasks, events, gateways, pools, lanes, annotations, documentation).
Do NOT switch to English. Do NOT include English translations or bilingual labels.
Every generated variant MUST match the language of the existing diagram.`}return K8(i)},qAe=e=>{if(!e)return"";const t=[];let n=e;for(;n&&n.nodeType===1;){const r=n.tagName.toLowerCase();let i=1,a=!1;if(n.parentNode){const s=n.parentNode.childNodes;let c=0;for(let l=0;l<s.length;l++){const u=s[l];u.nodeType===1&&u.tagName===n.tagName&&(c+=1,u===n?(i=c,c>1&&(a=!0)):a=!0)}}t.unshift(a?`${r}[${i}]`:r),n=n.parentElement}return`/${t.join("/")}`},x$=(e,t=280)=>{if(!e)return;const n=e.replace(/\s+/g," ").trim();if(n)return n.length>t?`${n.slice(0,t)}...`:n},uw=async e=>{const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(a=>a.toString(16).padStart(2,"0")).join("")},KAe=e=>{try{const n=new DOMParser().parseFromString(e,"application/xml");if(n.getElementsByTagName("parsererror").length>0)return{taskCount:0,decisionPoints:0,parallelBranches:0,errorHandlers:0,eventTypes:[],estimatedPaths:1};const i=n.querySelectorAll("task, userTask, serviceTask, manualTask, sendTask, receiveTask, scriptTask, businessRuleTask, callActivity").length,a=n.querySelectorAll("exclusiveGateway, parallelGateway, inclusiveGateway, eventBasedGateway"),s=a.length,l=n.querySelectorAll("parallelGateway").length,d=n.querySelectorAll("boundaryEvent errorEventDefinition, intermediateCatchEvent errorEventDefinition").length,h=[];n.querySelectorAll("startEvent, intermediateCatchEvent, intermediateThrowEvent, endEvent, boundaryEvent").forEach(m=>{m.querySelectorAll("messageEventDefinition, timerEventDefinition, errorEventDefinition, escalationEventDefinition, signalEventDefinition, conditionalEventDefinition").forEach(v=>{const b=v.tagName.replace("EventDefinition","").toLowerCase();b&&!h.includes(b)&&h.push(b)})});let p=1;return a.forEach(m=>{const g=m.tagName.toLowerCase();if(g.includes("exclusive"))p*=2;else if(g.includes("parallel")){const v=m.querySelectorAll("outgoing").length;p*=Math.max(2,v)}else g.includes("inclusive")&&(p*=2)}),{taskCount:i,decisionPoints:s,parallelBranches:l,errorHandlers:d,eventTypes:h.length>0?h:["none"],estimatedPaths:Math.max(1,p)}}catch(t){return console.error("Failed to calculate metrics:",t),{taskCount:0,decisionPoints:0,parallelBranches:0,errorHandlers:0,eventTypes:[],estimatedPaths:1}}},YAe=(e,t)=>{try{const r=new DOMParser().parseFromString(e,"application/xml");if(r.getElementsByTagName("parsererror").length>0)return t==="pid"?"Instrumentation and equipment interactions.":"Business process from start to finish.";const i=["bpmn:task","bpmn:userTask","bpmn:serviceTask","bpmn:manualTask","bpmn:sendTask","bpmn:receiveTask","bpmn:scriptTask","bpmn:businessRuleTask","bpmn:callActivity","task","userTask","serviceTask","manualTask","sendTask","receiveTask","scriptTask","businessRuleTask","callActivity"],a=[];if(i.forEach(d=>{const h=r.getElementsByTagName(d);for(let f=0;f<h.length;f++){const p=h[f].getAttribute("name");p&&!a.includes(p)&&a.push(p)}}),!a.length)return t==="pid"?"Instrumentation and equipment interactions.":"Business process from start to finish.";const s=20,c=a.length>s?a.slice(0,s):a,l=a.length>s?", and more.":".";return`${t==="pid"?"P&ID workflow covering: ":"Process steps include: "}${c.join(", ")}${l}`}catch(n){return console.error("Failed to extract process summary:",n),t==="pid"?"Instrumentation and equipment interactions.":"Business process from start to finish."}},xh=[{id:"core-linear",title:"Core Linear Flow",description:"Straight-through execution with only essential activities.",complexity:"basic",instructions:{bpmn:"Generate the most streamlined BPMN possible for the process summary, keeping only critical tasks and a single happy path.",pid:"Focus on the principal equipment path and core instrumentation, omitting secondary loops or optional devices."}},{id:"human-centric",title:"Human-Centric Collaboration",description:"Highlights manual approvals and team handoffs.",complexity:"intermediate",instructions:{bpmn:"Emphasize manual approvals, include at least two swimlanes, and show review loops that require people to coordinate.",pid:"Highlight manual valves, operator checkpoints, and instrumentation that requires human acknowledgement before continuing."}},{id:"automation-lean",title:"Automation Lean",description:"Switches repetitive work to automated service steps.",complexity:"intermediate",instructions:{bpmn:"Transform repetitive or high-volume tasks into service tasks with system integrations and automated escalations.",pid:"Show controllers and transmitters automating monitoring tasks, including signal lines that close the loop automatically."}},{id:"parallel-efficiency",title:"Parallel Efficiency",description:"Optimizes throughput with parallel branches and event handling.",complexity:"advanced",instructions:{bpmn:"Introduce parallel gateways to split workload, use event-based gateways for exceptions, and add a compensation or rollback path.",pid:"Model redundant equipment paths in parallel with automated switchovers and interlock signals connecting the branches."}},{id:"compliance-audit",title:"Compliance & Audit Ready",description:"Adds control checkpoints, logging, and audit artefacts.",complexity:"advanced",instructions:{bpmn:"Layer in compliance checks, logging activities, and escalation paths. Attach data objects for evidence and audit trails.",pid:"Add monitoring instrumentation, safety valves, bypass lines, and annotations for regulatory checkpoints and alarms."}},{id:"experience-journey",title:"Customer Experience Journey",description:"Maps personas, SLAs, and service touchpoints end to end.",complexity:"intermediate",instructions:{bpmn:"Introduce swimlanes for customer-facing roles, note SLA timers, and highlight feedback or survey capture points along the path.",pid:"Call out operator interfaces, HMI panels, and alarm acknowledgements that connect process equipment to customer-impacting metrics."}},{id:"resilient-recovery",title:"Resilient Recovery Blueprint",description:"Builds failover branches, compensations, and escalation playbooks.",complexity:"advanced",instructions:{bpmn:"Layer event subprocesses for incidents, model compensation tasks, and show escalation to support teams with clear rollback steps.",pid:"Add redundancy loops, relief paths, and interlocks that trigger automated shutdown, including operator guidance annotations."}}],b$=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2),lc=async(e,t,n="#ffffff")=>{const r=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(r);try{const a=new Image;a.crossOrigin="anonymous";const s=new Promise((h,f)=>{a.onload=()=>h(),a.onerror=p=>f(p)});a.src=i,await s;const c=document.createElement("canvas");c.width=a.naturalWidth||a.width||1200,c.height=a.naturalHeight||a.height||800;const l=c.getContext("2d");if(!l)throw new Error("Unable to create 2D canvas context");l.fillStyle=n,l.fillRect(0,0,c.width,c.height),l.drawImage(a,0,0);const u=c.toDataURL(t);return await(await fetch(u)).blob()}finally{URL.revokeObjectURL(i)}},Ca=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},Y8=e=>{try{const n=new DOMParser().parseFromString(e,"application/xml");if(n.getElementsByTagName("parsererror").length>0)return{elementCount:0,complexity:"simple"};const r=n.querySelectorAll("task, userTask, serviceTask, manualTask, sendTask, receiveTask, scriptTask, businessRuleTask, callActivity"),i=n.querySelectorAll("exclusiveGateway, parallelGateway, inclusiveGateway, eventBasedGateway"),a=n.querySelectorAll("startEvent, intermediateCatchEvent, intermediateThrowEvent, endEvent, boundaryEvent"),s=n.querySelectorAll("sequenceFlow, messageFlow"),c=n.querySelectorAll("subProcess, callActivity"),l=r.length+i.length+a.length+s.length+c.length;let u;return l<=20?u="simple":l<=50?u="intermediate":l<=100?u="complex":u="very-complex",{elementCount:l,complexity:u}}catch(t){return console.error("Failed to calculate complexity:",t),{elementCount:0,complexity:"simple"}}},X8=async(e,t,n)=>Promise.race([e,new Promise((r,i)=>setTimeout(()=>i(new Error(n)),t))]),cs=async(e,t=5e3)=>{const n=document.createElement("div");n.style.position="fixed",n.style.left="-99999px",n.style.top="-99999px",n.style.width="1200px",n.style.height="800px",document.body.appendChild(n);try{const r=(async()=>{const a=new Bi({container:n});await a.importXML(e);const{svg:s}=await a.saveSVG();return a.destroy(),s})(),i=await X8(r,t,"SVG rendering timed out");return document.body.removeChild(n),i}catch(r){throw n.parentNode&&document.body.removeChild(n),r}},XAe=async(e,t=5e3)=>{const n=document.createElement("div");n.style.position="fixed",n.style.left="-99999px",n.style.top="-99999px",n.style.width="2000px",n.style.height="1500px",document.body.appendChild(n);try{const r=(async()=>{const a=new Bi({container:n});await a.importXML(e),await new Promise(c=>setTimeout(c,800));const{svg:s}=await a.saveSVG();return a.destroy(),s})(),i=await X8(r,t,"Canvas rendering timed out");return document.body.removeChild(n),i}catch(r){throw n.parentNode&&document.body.removeChild(n),r}},ZAe=async(e,t)=>{try{return null}catch(n){return console.error("Server preview request failed:",n),null}},ag=(e,t)=>{try{const r=new DOMParser().parseFromString(e,"application/xml");if(r.getElementsByTagName("parsererror").length>0)throw new Error("Invalid XML");const i=Array.from(r.querySelectorAll("task, userTask, serviceTask")).slice(0,10),a=i.map(m=>m.getAttribute("name")||"Task").filter(Boolean),s=r.querySelectorAll("startEvent"),c=r.querySelectorAll("endEvent"),l=r.querySelectorAll("exclusiveGateway, parallelGateway, inclusiveGateway"),u=600,d=Math.max(400,a.length*60+100);let h=`<svg width="${u}" height="${d}" xmlns="http://www.w3.org/2000/svg" style="background: white;">
      <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
          <polygon points="0 0, 10 3, 0 6" fill="#1976d2" />
        </marker>
        <style>
          .task-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
          .start-end { fill: #c8e6c9; stroke: #388e3c; stroke-width: 2; }
          .gateway { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
          .text { font-family: Arial, sans-serif; font-size: 12px; fill: #333; }
          .title { font-size: 14px; font-weight: bold; fill: #1976d2; }
        </style>
      </defs>
      <text x="${u/2}" y="25" text-anchor="middle" class="title">${t}</text>
      <text x="${u/2}" y="45" text-anchor="middle" class="text" style="font-size: 10px; fill: #666;">Simplified Preview</text>
    `;s.length>0&&(h+=`<circle cx="50" cy="80" r="15" class="start-end" />
              <text x="50" y="85" text-anchor="middle" class="text" style="font-size: 10px;">Start</text>`);let f=120;a.forEach((m,g)=>{const b=m.length>25?m.substring(0,22)+"...":m;h+=`<rect x="90" y="${f-15}" width="120" height="30" rx="5" class="task-box" />
              <text x="150" y="${f+2}" text-anchor="middle" class="text">${b}</text>`,g<a.length-1&&(h+=`<line x1="150" y1="${f+15}" x2="150" y2="${f+45}" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)" />`),f+=60}),c.length>0&&(h+=`<circle cx="150" cy="${f}" r="15" class="start-end" />
              <text x="150" y="${f+5}" text-anchor="middle" class="text" style="font-size: 10px;">End</text>`),l.length>0&&(h+=`<text x="${u-100}" y="80" class="text" style="font-size: 10px; fill: #f57c00;">${l.length} Gateway${l.length>1?"s":""}</text>`);const p=i.length+l.length+s.length+c.length;return h+=`<text x="${u/2}" y="${d-20}" text-anchor="middle" class="text" style="font-size: 10px; fill: #666;">${p} elements total</text>`,h+="</svg>",h}catch{return`<svg width="400" height="200" xmlns="http://www.w3.org/2000/svg" style="background: white;">
      <text x="200" y="100" text-anchor="middle" font-family="Arial" font-size="14" fill="#666">${t}</text>
      <text x="200" y="120" text-anchor="middle" font-family="Arial" font-size="12" fill="#999">Diagram Preview</text>
    </svg>`}};function JAe(e,t,n){return new Promise(r=>{const i=setTimeout(()=>{r({data:null,error:new Error(`Function call timed out after ${n/1e3} seconds`)})},n);oe.functions.invoke(e,t).then(a=>{clearTimeout(i),r(a)}).catch(a=>{clearTimeout(i),r({data:null,error:a})})})}const ty=new Map,QAe=5*60*1e3,eTe=e=>{const t=ty.get(e);return t&&Date.now()-t.timestamp<QAe?t.svg:(t&&ty.delete(e),null)},tTe=(e,t)=>{ty.set(e,{svg:t,timestamp:Date.now()})},nTe=(e,t)=>{const n=e.slice(0,100)+t;return btoa(n).replace(/[^a-zA-Z0-9]/g,"")},dw=({xml:e,title:t,onRetry:n,onDownloadAvailable:r})=>{const[i,a]=x.useState(null),[s,c]=x.useState(!0),[l,u]=x.useState(null),[d,h]=x.useState(null),[f,p]=x.useState(0),[m,g]=x.useState("svg");return x.useEffect(()=>{let v=!0;const b=Y8(e),w=nTe(e,t),y=eTe(w);if(y){a(y),c(!1),r&&r(!0);return}return(async()=>{c(!0),u(null),h(null),g("svg");try{let j=null,S=null;try{g("svg"),j=await cs(e,5e3),console.log(` SVG render successful for ${t}`)}catch(E){S=E,console.warn(` SVG render failed for ${t}:`,E);try{g("canvas"),j=await XAe(e,5e3),console.log(` Canvas render successful for ${t}`)}catch(P){if(S=P,console.warn(` Canvas render failed for ${t}:`,P),b.complexity==="complex"||b.complexity==="very-complex"){g("server");try{const k=await ZAe(e,t);if(k)j=k,console.log(` Server preview successful for ${t}`);else throw new Error("Server preview not available")}catch(k){S=k,console.warn(` Server preview failed for ${t}:`,k)}}if(!j){g("svg");try{j=ag(e,t),console.log(` Simplified preview generated for ${t}`)}catch(k){console.error(` Even simplified preview failed for ${t}:`,k),j=ag(e,t)}}}}if(v)if(j)a(j),tTe(w,j),g("svg"),r&&r(!0);else{const E=ag(e,t);a(E),r&&r(!0)}}catch(j){if(v)try{const S=ag(e,t);a(S),r&&r(!0)}catch(S){console.error(`Even simplified preview failed for ${t}:`,S);const E=`<svg width="400" height="200" xmlns="http://www.w3.org/2000/svg" style="background: white;">
              <text x="200" y="100" text-anchor="middle" font-family="Arial" font-size="14" fill="#666">${t}</text>
              <text x="200" y="120" text-anchor="middle" font-family="Arial" font-size="12" fill="#999">Diagram Preview</text>
            </svg>`;a(E),r&&r(!0)}console.error(`Failed to render preview for ${t}:`,j)}finally{v&&c(!1)}})(),()=>{v=!1}},[e,t,f,r]),o.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",style:{backgroundColor:"#ffffff"},children:s?o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx(tr,{className:"h-8 w-8 animate-spin text-muted-foreground"}),m==="server"&&o.jsx("p",{className:"text-xs text-muted-foreground",children:"Generating server preview..."})]}):i?o.jsx("img",{src:`data:image/svg+xml;utf8,${encodeURIComponent(i)}`,alt:`${t} preview`,className:"h-full w-full object-contain"}):null})},FN=({xml:e,onSave:t,diagramType:n="bpmn",onRefine:r})=>{var pP,mP,gP;_i();const i=x.useRef(null),a=x.useRef(null),[s,c]=x.useState(!1),[l,u]=x.useState(!1),[d,h]=x.useState(null),[f,p]=x.useState(!1),[m,g]=x.useState(!0),[v,b]=x.useState(!1),[w,y]=x.useState(!1),[_,j]=x.useState([]),[S,E]=x.useState(!1),[P,k]=x.useState([]),[T,A]=x.useState(!1),[R,L]=x.useState(null),[B,G]=x.useState({completed:0,total:0}),[U,K]=x.useState(new Map),[te,W]=x.useState(5),[fe,be]=x.useState(0),ne=x.useRef(null),[ce,we]=x.useState(null),[et,jt]=x.useState([]),[_e,ie]=x.useState(!1),[Y,re]=x.useState(null),[ae,H]=x.useState(null),Te=x.useRef(!0),Ee=x.useRef(!1),[We,gt]=x.useState([]),[Jt,le]=x.useState(!1),[ze,Le]=x.useState(null),[mt,He]=x.useState(!1),Ye=x.useRef([]),At=x.useRef(null),[Tt,Rn]=x.useState("auto"),[Za,Gp]=x.useState(!1),[kb,Ws]=x.useState(!1),Qo=x.useRef(new Map),pl=x.useRef("auto"),[ml,Qt]=x.useState(!1);x.useEffect(()=>{if(!(typeof window>"u"))try{const N=window.localStorage.getItem(v$);N&&UAe(N)&&Rn(N)}catch(N){console.warn("Unable to read saved language preference:",N)}},[]),x.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(v$,Tt)}catch(N){console.warn("Unable to persist language preference:",N)}},[Tt]);const Ja=x.useMemo(()=>YAe(e,n),[e,n]),qs=x.useMemo(()=>K8(Tt),[Tt]),sr=x.useCallback(()=>{if(a.current)try{const N=a.current.get("elementRegistry");if(!N)return;const I=new Map;N.getAll().forEach(M=>{var F;const z=(F=M==null?void 0:M.businessObject)==null?void 0:F.name;typeof z=="string"&&z.trim()&&I.set(M.id,z)}),Qo.current=I}catch(N){console.warn("Failed to capture diagram labels:",N)}},[]),gl=x.useCallback(()=>{if(!(!a.current||!Qo.current.size))try{const N=a.current.get("modeling"),I=a.current.get("elementRegistry");if(!N||!I)return;Qo.current.forEach((M,z)=>{const F=I.get(z);if(F!=null&&F.businessObject&&F.businessObject.name!==M)try{N.updateProperties(F,{name:M})}catch(D){console.warn(`Failed to restore label for ${z}`,D)}}),pl.current="auto"}catch(N){console.warn("Failed to restore original labels:",N)}},[]),Md=x.useCallback(async(N,I)=>{if(!a.current||N==="auto")return!0;if(N==="en")return gl(),pl.current="en",!0;if(!zAe.has(N))return I!=null&&I.silent||$.info(`Live translation not available for ${ey[N]??N}.`),!1;Qo.current.size||sr();try{const M=a.current.get("modeling"),z=a.current.get("elementRegistry");return!M||!z?!1:(Qo.current.forEach((F,D)=>{const Z=z.get(D);if(!(Z!=null&&Z.businessObject))return;const ue=VAe(F,N);if(!(!ue||ue===Z.businessObject.name))try{M.updateProperties(Z,{name:ue})}catch(pe){console.warn(`Failed to translate label for ${D}`,pe)}}),pl.current=N,!0)}catch(M){return console.warn("Failed to apply language adaptation:",M),!1}},[sr,gl]);x.useEffect(()=>{if(!ml||!a.current)return;let N=!1;return(async()=>{Gp(!0);try{Tt==="auto"?(gl(),sr()):!await Md(Tt,{silent:!0})&&!N&&$.info(`Live translation not yet available for ${ey[Tt]??Tt}.`)}catch(M){N||(console.error("Language adaptation failed:",M),$.error("Unable to adapt diagram language"))}finally{N||Gp(!1)}})(),()=>{N=!0}},[Tt,ml,Md,gl,sr]),x.useCallback(N=>{Rn(N)},[]);const Wp=x.useCallback(N=>{const I=N.metrics||{parallelBranches:0,errorHandlers:0},M=N.complexity,z=[],F=[],D=[];return M==="basic"?(z.push("Simple and easy to understand"),z.push("Fast to implement and maintain"),z.push("Low complexity reduces errors"),F.push("Limited flexibility for complex scenarios"),F.push("No error handling or recovery paths"),F.push("Cannot model parallel or conditional flows"),D.push("Simple, linear processes"),D.push("Quick prototyping"),D.push("Training and documentation")):M==="intermediate"?(z.push("Balanced complexity and clarity"),z.push("Includes decision points and parallel flows"),z.push("Human and system interaction points"),I.errorHandlers>0&&z.push("Basic error handling included"),I.parallelBranches>0&&z.push("Optimized for efficiency"),F.push("May lack advanced error recovery"),F.push("Limited compliance checkpoints"),D.push("Standard business processes"),D.push("Process optimization"),D.push("Team collaboration workflows")):M==="advanced"&&(z.push("Comprehensive error handling and recovery"),z.push("Multiple execution paths"),z.push("Compliance and audit ready"),z.push("External system integration"),I.errorHandlers>1&&z.push("Robust error recovery mechanisms"),I.parallelBranches>2&&z.push("Highly optimized parallel execution"),F.push("Higher implementation complexity"),F.push("Requires more maintenance"),F.push("Steeper learning curve"),D.push("Enterprise-grade processes"),D.push("Compliance-critical workflows"),D.push("Complex multi-system integrations"),D.push("High-availability systems")),{strengths:z,weaknesses:F,useCases:D}},[]),vl=x.useMemo(()=>{var I;if(!P.length)return null;const N=P.map(M=>{let z=0;const F=M.metrics||{taskCount:0,decisionPoints:0,parallelBranches:0,errorHandlers:0,estimatedPaths:1};return M.complexity==="intermediate"?z+=15:M.complexity==="basic"?z+=8:z+=5,F.taskCount>=3&&F.taskCount<=12?z+=8:F.taskCount>12&&F.taskCount<=20?z+=5:F.taskCount>0&&(z+=2),F.decisionPoints>=1&&F.decisionPoints<=3?z+=8:F.decisionPoints>3&&(z+=4),F.parallelBranches>0&&F.parallelBranches<=2?z+=6:F.parallelBranches>2&&(z+=3),F.errorHandlers>0&&(z+=5),F.errorHandlers>1&&(z+=2),F.estimatedPaths>=2&&F.estimatedPaths<=5?z+=4:F.estimatedPaths>5&&(z+=2),F.taskCount>25&&(z-=5),F.taskCount<2&&(z-=3),{model:M,score:z}});return N.sort((M,z)=>z.score-M.score),((I=N[0])==null?void 0:I.model)||P[0]},[P]),qe=x.useMemo(()=>{if(!P.length)return null;if(ce){const N=P.find(I=>I.id===ce);if(N)return N}return P[0]},[P,ce]),Fr=x.useCallback(async()=>{if(a.current)try{const N=await a.current.saveXML({format:!0});if(N.xml)return N.xml}catch(N){console.error("Failed to capture current XML snapshot:",N)}return e},[e]),Ks=x.useCallback(async()=>{if(f){E(!0);try{const{data:N,error:I}=await oe.from("user_profiles").select("user_id,email,created_at,last_login");if(I)throw I;const{data:M,error:z}=await oe.from("user_roles").select("user_id, role");if(z)throw z;const F=new Map;(M??[]).forEach(({user_id:Z,role:ue})=>{const pe=F.get(Z)??[];F.set(Z,[...pe,ue])});const D=(N??[]).map(({user_id:Z,email:ue,created_at:pe,last_login:Ct})=>({userId:Z,email:ue,roles:F.get(Z)??["user"],createdAt:pe,lastLogin:Ct}));j(D)}catch(N){console.error("Failed to load collaborators:",N),$.error("Unable to load collaborators right now")}finally{E(!1)}}},[f]),it=x.useCallback(N=>{Ye.current=[...Ye.current,N],gt(Ye.current.slice(-50))},[]),It=x.useCallback(async N=>{if(!(!d||Ye.current.length===0))try{const I=await Fr(),{error:M}=await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"log",input_description:`system-use:${Y??"unknown"}:${Date.now()}`,generated_bpmn_xml:I,alternative_models:JSON.parse(JSON.stringify([{events:Ye.current,source:"system-tracking",capturedAt:new Date().toISOString()}]))});if(M)throw M;Ye.current=[],gt([]),N!=null&&N.silent||$.success("System usage log saved")}catch(I){console.error("Failed to persist system activities:",I),N!=null&&N.silent||$.error("Could not save system activity log")}},[d,Y,Fr]),sn=x.useCallback(()=>{var M;At.current&&At.current();const N=x$(((M=document.body)==null?void 0:M.innerText)??"");it({id:b$(),type:"visit",timestamp:new Date().toISOString(),details:{url:window.location.href,title:document.title,contentPreview:N,referrer:document.referrer||void 0}});const I=z=>{var D;const F=z.target;F&&it({id:b$(),type:"click",timestamp:new Date().toISOString(),details:{url:window.location.href,text:((D=F.innerText)==null?void 0:D.trim().slice(0,120))||void 0,tag:F.tagName.toLowerCase(),xpath:qAe(F),contentPreview:x$(F.textContent)}})};document.addEventListener("click",I,!0),At.current=()=>{document.removeEventListener("click",I,!0)}},[it]),Zr=x.useCallback(async N=>{At.current&&(At.current(),At.current=null),await It(N),le(!1)},[It]),Jr=x.useCallback(N=>{if(!f){$.error("Only Process Managers can change editing lock");return}b(N),Y&&localStorage.setItem(`bpmn-lock:${Y}`,N?"locked":"unlocked"),$.success(N?"Collaborators are now in view-only mode":"Collaborators can edit this diagram")},[Y,f]),ja=x.useCallback(async N=>{if(f){if(N===(d==null?void 0:d.id)){$.info("You already have Process Manager rights.");return}try{const{error:I}=await oe.from("user_roles").insert({user_id:N,role:"admin"});if(I){if(I.code==="23505"){$.info("User already has Process Manager rights.");return}throw I}$.success("Process Manager access granted"),Ks()}catch(I){console.error("Failed to grant access:",I),$.error("Unable to grant access")}}},[d==null?void 0:d.id,f,Ks]),Qa=x.useCallback(async N=>{if(f){if(N===(d==null?void 0:d.id)){$.error("You cannot remove your own Process Manager rights.");return}try{const{error:I}=await oe.from("user_roles").delete().match({user_id:N,role:"admin"});if(I)throw I;$.success("Process Manager access revoked"),Ks()}catch(I){console.error("Failed to revoke access:",I),$.error("Unable to revoke access")}}},[d==null?void 0:d.id,f,Ks]),Pr=x.useCallback(async()=>{ie(!0);try{let N=oe.from("bpmn_generations").select("id, created_at, input_description, input_type, alternative_models, generated_bpmn_xml, user_id").order("created_at",{ascending:!1}).limit(f?25:10);!f&&d&&(N=N.eq("user_id",d.id));const{data:I,error:M}=await N;if(M)throw M;jt(I??[])}catch(N){console.error("Failed to load log history:",N),$.error("Unable to load BPMN history right now")}finally{ie(!1)}},[d,f]),zr=x.useCallback(async(N=!1)=>{var I;if(!d){$.error("Please sign in to open Modelling Agent Mode");return}L(null),A(!0),k([]),we(null),Le(null),He(!1);try{const M=await Fr(),z=Y??await uw(M);if(Y||re(z),!N&&!Ee.current){const{data:X,error:Re}=await oe.from("bpmn_generations").select("id, alternative_models, created_at").eq("user_id",d.id).eq("input_description",`modelling-agent:${z}`).not("alternative_models","is",null).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(Re&&Re.code!=="PGRST116"&&console.warn("Error checking cache:",Re),X!=null&&X.alternative_models){const Ke=X.alternative_models;if(Array.isArray(Ke)&&Ke.length>0){console.log(`[Cache] Found ${Ke.length} cached alternatives`),k(Ke),Ee.current=!0,A(!1);return}}}const D=(X=>{const Re=xh.filter(bt=>bt.complexity==="basic"),Ke=xh.filter(bt=>bt.complexity==="intermediate"),Ht=xh.filter(bt=>bt.complexity==="advanced"),en=[];if(X===3)Re.length>0&&en.push(Re[0]),Ke.length>0&&en.push(Ke[0]),Ht.length>0&&en.push(Ht[0]);else if(X===5){Re.length>0&&en.push(Re[0]);for(let bt=0;bt<Math.min(2,Ke.length);bt++)en.push(Ke[bt]);for(let bt=0;bt<Math.min(2,Ht.length);bt++)en.push(Ht[bt])}else if(X===7){Re.length>0&&en.push(Re[0]);for(let bt=0;bt<Math.min(3,Ke.length);bt++)en.push(Ke[bt]);for(let bt=0;bt<Math.min(3,Ht.length);bt++)en.push(Ht[bt])}if(en.length<X){const bt=new Set(en.map(Ur=>Ur.id)),ti=xh.filter(Ur=>!bt.has(Ur.id));en.push(...ti.slice(0,X-en.length))}return en.slice(0,X)})(te);if(!D.length)throw new Error("No variant definitions available for generation.");const Z=D.length;G({completed:0,total:Z,current:void 0});const ue=new Map;D.forEach(X=>{ue.set(X.id,"queued")}),K(ue);const pe=[];let Ct=0;const Ot=async(X,Re)=>{var bt,ti,Ur,ts;const Ke=Date.now();let Ht,en=0;try{K(jn=>{const tn=new Map(jn);return tn.set(X.id,"generating"),tn}),G({completed:Ct,total:Z,current:X.title});const _n=n==="pid"?X.instructions.pid:X.instructions.bpmn,ji={basic:{maxElements:12,maxTasks:6,maxBranches:0,maxDecisionPoints:0,maxSubprocesses:0,maxDepth:1,description:"Minimal, straight-line flow with only essential activities"},intermediate:{maxElements:25,maxTasks:12,maxBranches:2,maxDecisionPoints:1,maxSubprocesses:1,maxDepth:2,description:"Balanced with some parallelism and decision points"},advanced:{maxElements:45,maxTasks:20,maxBranches:4,maxDecisionPoints:3,maxSubprocesses:2,maxDepth:3,description:"Complex with error handling, parallel flows, and subprocesses"}},kr=ji[X.complexity]||ji.intermediate,Cr=((jn,tn)=>jn.complexity==="basic"?`
CRITICAL: Generate a BEGINNER-LEVEL BPMN diagram - SIMPLE, LINEAR SEQUENCE ONLY.

MODE: BEGINNER
The complexity of the diagram must align with Beginner mode:
- Use ONLY basic tasks and events in a linear sequence
- AVOID branches, parallel flows, or advanced notations

MANDATORY STRUCTURE FOR BEGINNER TIER:
1. Start Event  Basic Task 1  Basic Task 2  Basic Task 3  ...  End Event
2. Use only simple <task> or <userTask> elements (no serviceTask, no manualTask)
3. Use only <startEvent> and <endEvent> (no intermediate events)
4. NO gateways (no XOR, AND, OR, or Inclusive gateways)
5. NO parallel branches
6. NO decision points
7. NO subprocesses
8. NO loops or backflows
9. NO pools or lanes
10. NO boundary events
11. NO BPMN artifacts (data objects, annotations, groups)
12. Simple linear sequence only
13. Maximum ${kr.maxTasks} tasks total
14. Each task flows directly to the next task

EXAMPLE STRUCTURE:
<startEvent>  <task name="Task 1">  <task name="Task 2">  <task name="Task 3">  <endEvent>

DO NOT include:
- Any gateways (exclusiveGateway, parallelGateway, inclusiveGateway, eventBasedGateway)
- Any subprocesses (subProcess, callActivity)
- Any boundary events (boundaryEvent)
- Any intermediate events (intermediateCatchEvent, intermediateThrowEvent)
- Any loops or cycles
- Any pools or lanes
- Any BPMN artifacts (dataObject, dataStore, annotation, group)
- Any advanced notations

Generate ONLY a simple, linear sequential flow with basic tasks and events.`:jn.complexity==="intermediate"?jn.id==="automation-lean"?`
AUTOMATION LEAN: Transform repetitive/high-volume tasks into automated service tasks.

CRITICAL TRANSFORMATION:
- Identify repetitive, routine, or high-volume tasks in the process
- Convert these tasks to <serviceTask> elements (automated system tasks)
- Add system integrations: name service tasks with integration context (e.g., "Automated Data Validation", "System Notification", "Auto-Process Payment")
- Include automated escalations: use intermediate events or boundary events for automated error handling
- Keep userTask only for tasks requiring human judgment or approval
- Use 1-2 exclusiveGateway for decision points (automated routing)
- Include 1+ serviceTask for each repetitive task pattern identified
- 8-12 tasks total (mix of userTask and serviceTask)
- 2-3 execution paths

STRUCTURE: startEvent  [automated service tasks]  [decision gateways]  [user tasks for approvals]  endEvent
Focus on automation: maximize serviceTask usage for repetitive work.`:jn.id==="human-centric"?`
HUMAN-CENTRIC COLLABORATION: Emphasize manual approvals and team coordination.

REQUIREMENTS:
- 2+ swimlanes (pools or lanes) representing different roles/departments
- Multiple userTask elements for manual work
- 1-2 exclusiveGateway for approval decisions
- Review loops: show tasks that require human review/approval before continuing
- Include intermediate events for notifications/handoffs between people
- 1 subprocess OR 1 intermediate event (message/timer/signal) for coordination
- 8-12 tasks total (mostly userTask)
- 2-3 execution paths showing different approval outcomes

STRUCTURE: startEvent  [swimlanes with user tasks]  [approval gateways]  [review loops]  endEvent
Focus on human collaboration: show handoffs, approvals, and coordination.`:jn.id==="parallel-efficiency"?`
PARALLEL EFFICIENCY: Maximize concurrent execution of independent activities.

REQUIREMENTS:
- 1-2 parallelGateway pairs (AND split + AND join) for concurrent flows
- Identify tasks that can run simultaneously (no dependencies)
- Group independent tasks into parallel branches
- Use exclusiveGateway for decisions (1-2 decision points)
- Mix of userTask and serviceTask
- 1 subprocess OR 1 intermediate event for coordination
- 8-12 tasks total
- 2-3 parallel branches with 2-4 tasks each

STRUCTURE: startEvent  [parallelGateway split]  [concurrent branches]  [parallelGateway join]  endEvent
Focus on parallelism: maximize tasks running simultaneously.`:`
INTERMEDIATE BPMN: Include structure with decisions and parallel flows.

REQUIREMENTS:
- 1-2 exclusiveGateway (decision points) with 2-3 paths each
- 1 parallelGateway (AND) OR 1 subProcess
- Mix of userTask (human) and serviceTask (system)
- 1 subprocess OR 1 intermediate event (message/timer/signal)
- 8-12 tasks total
- 2-3 execution paths

STRUCTURE: startEvent  [gateways/subprocesses]  endEvent with decision branches and optional parallel flows.`:jn.complexity==="advanced"?`
ADVANCED BPMN: Complex structure with error handling, compliance, and integration.

REQUIREMENTS:
- 2-3 gateways (XOR/Inclusive/Event-based) creating multiple paths
- 2-4 parallelGateway pairs (split + join)
- 1-2 subProcess elements
- 1+ boundaryEvent (error/escalation/timer) attached to task/subprocess
- 1+ recovery path (compensation/rollback/retry)
- 1+ compliance checkpoint (task/subprocess with "Compliance"/"Audit"/"Validation" in name)
- 1+ serviceTask for external system integration
- 2+ pools OR 2+ lanes
- 2+ BPMN artifacts (dataObject/dataStore/annotation/group)
- 15-20 tasks total
- 4+ execution paths

STRUCTURE: Complex routing with gateways, parallel flows, error handling, compliance checkpoints, and external integrations.`:"")(X,_n),rs=X.complexity==="basic"?"BASIC: Simple sequential flow only. NO gateways, NO subprocesses, NO branching.":X.complexity==="intermediate"?"INTERMEDIATE: Must include 1+ gateway OR 1+ subprocess. Show structure and organization.":"ADVANCED: Must include 2-3 gateways, 2-4 parallel branches, 1-2 subprocesses, error handling, 4+ paths.",is=WAe(Ja||"",Tt);Ht=`VARIANT: ${X.title} (${X.complexity.toUpperCase()})
Description: ${X.description}

Process: ${Ja}

${Cr}

Constraints: Max ${kr.maxElements} elements, ${kr.maxTasks} tasks, ${kr.maxBranches} branches, ${kr.maxDecisionPoints} decisions, ${kr.maxSubprocesses} subprocesses.

${rs}

${is}

Generate valid BPMN 2.0 XML matching the ${X.complexity.toUpperCase()} tier. Include mandatory structures. Return ONLY XML, no markdown.

Seed: ${Date.now()}-${Math.random().toString(36).substring(7)}`,en=Ht.length;const Pa=Cr.length,vP=(Ja==null?void 0:Ja.length)||0;console.group(`[Modelling Agent] Generating variant: ${X.title} (${X.complexity})`),console.log("Variant Details:",{id:X.id,title:X.title,complexity:X.complexity,description:X.description,index:Re}),console.log("Prompt Metrics:",{totalLength:en,variantSpecificLength:Pa,processSummaryLength:vP,baseInstructionsLength:_n.length,estimatedTokens:Math.ceil(en/4)}),console.log("Constraints:",kr),console.log("Prompt Structure:",{hasVariantSpecific:Pa>0,hasProcessSummary:vP>0,hasBaseInstructions:_n.length>0}),console.log(`Generating ${X.title} with skipCache=true, modelingAgentMode=true`);const vU=X.id==="automation-lean",Fb=X.complexity==="advanced"?12e4:X.complexity==="intermediate"?vU?105e3:9e4:45e3,yU=Date.now(),{data:$n,error:ni}=await JAe("generate-bpmn",{body:{prompt:Ht,diagramType:n,skipCache:!0,modelingAgentMode:!0}},Fb),zb=Date.now()-yU;if(console.log("API Response:",{duration:`${zb}ms`,hasError:!!ni,hasData:!!$n,hasBpmnXml:!!($n!=null&&$n.bpmnXml),errorMessage:ni==null?void 0:ni.message,responseKeys:$n?Object.keys($n):[]}),ni){console.error(`[Modelling Agent] API Error for ${X.title}:`,{error:ni.message,stack:ni instanceof Error?ni.stack:void 0,duration:`${zb}ms`,timeout:`${Fb}ms`,isTimeout:(bt=ni.message)==null?void 0:bt.includes("timed out")});let jn=ni.message;throw(ti=ni.message)!=null&&ti.includes("timed out")?jn=`Request timed out after ${Fb/1e3}s. ${X.complexity==="advanced"?"Advanced variants require more processing time. ":X.complexity==="intermediate"?"Intermediate variants may need additional time. ":""}Please try generating alternatives again, or generate them individually.`:(Ur=ni.message)!=null&&Ur.includes("rate limit")?jn="API rate limit exceeded. Please wait a moment and try again. Generating multiple variants in parallel may hit rate limits.":(ts=ni.message)!=null&&ts.includes("429")&&(jn="Too many requests. Please wait a moment and try again. Consider generating variants one at a time."),new Error(jn)}if(!($n!=null&&$n.bpmnXml))throw console.error(`[Modelling Agent] No BPMN XML returned for ${X.title}:`,{data:$n,duration:`${zb}ms`,hasData:!!$n,dataKeys:$n?Object.keys($n):[]}),new Error(`No BPMN XML returned for ${X.title}. The AI model may not have generated valid output.`);const yP=$n.bpmnXml.length;console.log("BPMN XML Received:",{length:yP,estimatedTokens:Math.ceil(yP/4),startsWithXml:$n.bpmnXml.trim().startsWith("<?xml"),containsDefinitions:$n.bpmnXml.includes("<bpmn:definitions")||$n.bpmnXml.includes("<definitions")});const Gd=Y8($n.bpmnXml),ri=KAe($n.bpmnXml),xP=X.complexity,_l=[],Si=[],bP=X.complexity==="advanced"?60:X.complexity==="intermediate"?50:45;Gd.elementCount>bP&&Si.push(`High element count (${Gd.elementCount} > ${bP}) - may affect rendering performance`);try{const tn=new DOMParser().parseFromString($n.bpmnXml,"application/xml");tn.getElementsByTagName("parsererror").length>0&&_l.push("Invalid XML structure"),tn.querySelectorAll("sequenceFlow").forEach((Gb,wP)=>{const jU=Gb.getAttribute("sourceRef"),SU=Gb.getAttribute("targetRef");(!jU||!SU)&&_l.push(`Flow ${wP} missing sourceRef or targetRef`)});const Wd=tn.querySelectorAll("exclusiveGateway, parallelGateway, inclusiveGateway, eventBasedGateway"),um=tn.querySelectorAll("subProcess, callActivity"),bU=tn.querySelectorAll("boundaryEvent"),TRe=tn.querySelectorAll("parallelGateway"),ORe=tn.querySelectorAll("userTask"),wU=tn.querySelectorAll("serviceTask"),_U=tn.querySelectorAll("intermediateCatchEvent, intermediateThrowEvent"),Ub=tn.querySelectorAll("participant"),Hb=tn.querySelectorAll("lane"),RRe=tn.querySelectorAll("dataObject, dataObjectReference"),$Re=tn.querySelectorAll("textAnnotation"),IRe=tn.querySelectorAll("group"),Vb=tn.querySelectorAll("dataObject, dataObjectReference, textAnnotation, group");X.complexity==="basic"?(Wd.length>0&&Si.push(`BEGINNER tier should have no gateways, but found ${Wd.length}`),um.length>0&&Si.push(`BEGINNER tier should have no subprocesses, but found ${um.length}`),ri.decisionPoints>0&&Si.push(`BEGINNER tier should have no decision points, but found ${ri.decisionPoints}`),(Ub.length>1||Hb.length>0)&&Si.push(`BEGINNER tier should have no pools/lanes, but found ${Ub.length} pools and ${Hb.length} lanes`),Vb.length>0&&Si.push(`BEGINNER tier should have no BPMN artifacts, but found ${Vb.length}`)):X.complexity==="intermediate"?Wd.length===0&&um.length===0&&_U.length===0&&ri.parallelBranches===0&&Si.push("INTERMEDIATE tier should have at least 1 gateway, subprocess, intermediate event, or parallel branch"):X.complexity==="advanced"&&(Wd.length>=1||um.length>=1||ri.parallelBranches>=1||Si.push("ADVANCED tier should have at least 1 gateway, subprocess, or parallel branch"),!(bU.length>0||Vb.length>0||wU.length>0||Ub.length>1||Hb.length>1)&&Wd.length<2&&Si.push("ADVANCED tier should include advanced features (error handling, artifacts, integration, or multiple pools/lanes)"))}catch{_l.push("XML parsing failed")}console.log("Validation Results:",{errors:_l.length,warnings:Si.length,elementCount:Gd.elementCount,complexity:Gd.complexity,metrics:{taskCount:ri.taskCount,decisionPoints:ri.decisionPoints,parallelBranches:ri.parallelBranches,errorHandlers:ri.errorHandlers,estimatedPaths:ri.estimatedPaths}}),_l.length>0&&console.error(`[Modelling Agent] Validation errors for ${X.title}:`,_l),Si.length>0&&(console.warn(`[Modelling Agent] Validation warnings for ${X.title}:`,Si),console.warn(`Generated structure: ${ri.decisionPoints} decision points, ${ri.parallelBranches} parallel branches, ${ri.taskCount} tasks`)),console.log(`[Model Generation] ${X.title}: Variant complexity="${X.complexity}", Assigned complexity="${xP}", Calculated complexity="${Gd.complexity}"`);const xU=Date.now()-Ke;console.log(`[Modelling Agent] Successfully generated ${X.title} in ${xU}ms`),console.groupEnd();const lm={id:`${X.id}-${Date.now()}-${Re}`,title:X.title,description:X.description,complexity:xP,xml:$n.bpmnXml,generatedAt:new Date().toISOString(),metrics:ri};return pe.push(lm),Ct++,K(jn=>{const tn=new Map(jn);return tn.set(X.id,"completed"),tn}),k([...pe]),G({completed:Ct,total:Z,current:void 0}),ce||we(lm.id),(async()=>{try{const jn=[...pe,lm],{data:tn}=await oe.from("bpmn_generations").select("id").eq("user_id",d.id).eq("input_description",`modelling-agent:${z}`).order("created_at",{ascending:!1}).limit(1).maybeSingle();tn!=null&&tn.id?await oe.from("bpmn_generations").update({alternative_models:JSON.parse(JSON.stringify(jn)),updated_at:new Date().toISOString()}).eq("id",tn.id):await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"text",input_description:`modelling-agent:${z}`,generated_bpmn_xml:M,alternative_models:JSON.parse(JSON.stringify(jn))}),console.log(`[Cache] Incrementally cached ${jn.length} alternatives`)}catch(jn){console.warn("Failed to cache alternatives incrementally:",jn)}})(),lm}catch(_n){Ct++;const ji=Date.now()-Ke;return console.error(`[Modelling Agent] Failed to generate alternative "${X.title}":`,{variant:{id:X.id,title:X.title,complexity:X.complexity},error:{message:_n instanceof Error?_n.message:String(_n),stack:_n instanceof Error?_n.stack:void 0,name:_n instanceof Error?_n.name:"Unknown"},duration:`${ji}ms`,promptLength:en,timestamp:new Date().toISOString()}),K(kr=>{const ns=new Map(kr);return ns.set(X.id,"failed"),ns}),G({completed:Ct,total:Z,current:void 0}),console.groupEnd(),(Ct===Z||_n instanceof Error&&_n.message.includes("rate limit"))&&$.error(`Could not generate: ${X.title}`,{description:_n instanceof Error?_n.message:"An unknown error occurred. The AI model might be overloaded or the request may have timed out."}),null}},lt=D.map((X,Re)=>Ot(X,Re));if(console.log(`[Modelling Agent] Starting parallel generation of ${Z} variants`),console.log("[Modelling Agent] All variants will start generating simultaneously:",D.map(X=>`${X.title} (${X.complexity})`).join(", ")),(await Promise.allSettled(lt)).forEach((X,Re)=>{const Ke=D[Re];X.status==="rejected"?console.error(`[Parallel Processing] Variant ${Ke.title} (${Ke.complexity}) failed:`,X.reason):X.status==="fulfilled"&&X.value?console.log(`[Parallel Processing] Variant ${Ke.title} (${Ke.complexity}) succeeded`):X.status==="fulfilled"&&!X.value&&console.warn(`[Parallel Processing] Variant ${Ke.title} (${Ke.complexity}) returned null (failed silently)`)}),console.log(`[Modelling Agent] Generation complete: ${pe.length} successful, ${Z-pe.length} failed`),pe.length<Z){const X=D.filter(Re=>!pe.find(Ke=>Ke.title===Re.title));console.warn("[Modelling Agent] Failed variants:",X.map(Re=>Re.title))}if(G({completed:Z,total:Z}),console.log(`[Modelling Agent] Final results: ${pe.length} successful out of ${Z} total variants`),pe.length<Z){const X=Z-pe.length,Re=D.filter(Ke=>!pe.find(Ht=>Ht.title===Ke.title));console.warn(`[Modelling Agent] ${X} variants failed:`,Re.map(Ke=>`${Ke.title} (${Ke.complexity})`)),pe.length>0&&$.warning(`${pe.length} of ${Z} variants generated`,{description:X>0?`${X} variants failed to generate. Check console for details.`:void 0,duration:5e3})}if(!pe.length){const Re=`No alternative diagrams were produced. ${Z-pe.length} of ${Z} generations failed. Check the browser console for detailed error messages.`;throw console.error(`[Modelling Agent] ${Re}`),new Error(Re)}k(pe),we(((I=pe[0])==null?void 0:I.id)??null),Ee.current=!0,console.log(`[Modelling Agent] Successfully generated ${pe.length} variants:`,pe.map(X=>X.title));try{const{data:X}=await oe.from("bpmn_generations").select("id").eq("user_id",d.id).eq("input_description",`modelling-agent:${z}`).order("created_at",{ascending:!1}).limit(1).maybeSingle();X!=null&&X.id?await oe.from("bpmn_generations").update({alternative_models:JSON.parse(JSON.stringify(pe)),updated_at:new Date().toISOString()}).eq("id",X.id):await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"text",input_description:`modelling-agent:${z}`,generated_bpmn_xml:M,alternative_models:JSON.parse(JSON.stringify(pe))}),console.log(`[Cache] Successfully cached ${pe.length} alternatives`)}catch(X){console.error("Failed to cache alternatives:",X)}}catch(M){console.error("Failed to prepare alternative models:",M),L(M instanceof Error?M.message:"An unexpected error occurred while preparing alternatives.")}finally{A(!1),G({completed:0,total:0})}},[d,Y,n,Ja,Fr,te,qs]),Dz=x.useCallback(N=>{let I=N;return I=I.replace(/bpmns:/gi,"bpmn:"),I=I.replace(/bpmndi\:BPMNShape/gi,"bpmndi:BPMNShape"),I=I.replace(/bpmndi\:BPMNEdge/gi,"bpmndi:BPMNEdge"),I=I.replace(/<(\s*)di:waypoint\s+([^>]*?)>/gi,(M,z,F)=>M.trim().endsWith("/>")?M:`<${z}di:waypoint ${F}/>`),I=I.replace(/<(\s*)di:waypoint\s*>/gi,"<$1di:waypoint/>"),I=I.replace(/<\s*bpmn:flowNodeRef[^>]*>[\s\S]*?<\/\s*bpmn:flowNodeRef\s*>/gi,""),I=I.replace(/<\s*bpmns:flowNodeRef[^>]*>[\s\S]*?<\/\s*bpmns:flowNodeRef\s*>/gi,""),I=I.replace(/<\/\s*bpmn:flowNodeRef\s*>/gi,""),I=I.replace(/<\/\s*bpmns:flowNodeRef\s*>/gi,""),I=I.replace(/<\s*bpmn:flowNodeRef[^>]*\/?\s*>/gi,""),I=I.replace(/<\s*bpmns:flowNodeRef[^>]*\/?\s*>/gi,""),I=I.replace(/<\s*\/\?xml/gi,"<?xml"),I=I.replace(/&(?!(?:amp|lt|gt|quot|apos|#\d+|#x[0-9a-fA-F]+);)/g,"&amp;"),I=I.replace(/<\/\s*[^>]*:flowNodeRef[^>]*>/gi,""),I.trim()},[]),KN=x.useCallback(async N=>{if(a.current)try{const I=Dz(N.xml);Qt(!1),await a.current.importXML(I);const M=a.current.get("canvas");try{const z=M.getViewbox();if(z){const F=z.scale??1,D=z.width??0,Z=z.height??0;isFinite(F)&&isFinite(D)&&isFinite(Z)&&D>0&&Z>0&&F>0&&M.zoom("fit-viewport")}}catch(z){console.warn("Zoom error, continuing:",z)}cm(z=>[...z,N.xml]),Hd(z=>z+1),$.success(`${N.title} applied to the canvas`),Tb(!1),sr(),Qt(!0)}catch(I){console.error("Failed to apply alternative model:",I),$.error("Unable to apply this alternative diagram"),Qt(!0)}},[sr]),Cb=x.useCallback((N,I="bpmn")=>{const M=new Blob([N.xml],{type:"application/xml"}),z=URL.createObjectURL(M),F=document.createElement("a");F.href=z;const D=N.title.replace(/\s+/g,"_").toLowerCase();F.download=`${D}_${N.complexity}.${I}`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(z)},[]),Lz=x.useCallback(async N=>{if(a.current)try{Qt(!1),await a.current.importXML(N.generated_bpmn_xml);const I=a.current.get("canvas");try{const M=I.getViewbox();M&&isFinite(M.scale)&&isFinite(M.width)&&isFinite(M.height)&&M.width>0&&M.height>0&&I.zoom("fit-viewport")}catch(M){console.warn("Zoom error, continuing:",M)}cm(M=>[...M,N.generated_bpmn_xml]),Hd(M=>M+1),$.success("Historical diagram loaded"),Kp(!1),sr(),Qt(!0)}catch(I){console.error("Failed to load historical diagram:",I),$.error("Unable to load this historical snapshot"),Qt(!0)}},[sr]),Bz=x.useCallback((N,I)=>{const M=new Blob([N],{type:"application/xml"}),z=URL.createObjectURL(M),F=document.createElement("a");F.href=z,F.download=I.endsWith(".bpmn")?I:`${I}.bpmn`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(z)},[]),[Fz,qp]=x.useState(!1),[zz,YN]=x.useState(!1),[Ab,Kp]=x.useState(!1),[Dd,Tb]=x.useState(!1),[Uz,Hz]=x.useState(!1),[Qr,Yp]=x.useState(null),[XN,Ys]=x.useState(null),[Xp,Sa]=x.useState(!1),[yl,ZN]=x.useState(!1),[Ld,Ob]=x.useState({x:0,y:0}),Vz=typeof window<"u"?Math.min(700,window.innerHeight-300):600,[JN,QN]=x.useState({width:280,height:Vz}),[Gz,Wz]=x.useState(""),[yt,Ea]=x.useState({quickDraw:!0,startEvents:!0,activities:!0,intermediateEvents:!1,endEvents:!1,gateways:!1,subprocesses:!0,pools:!0,dataObjects:!0,artifacts:!0}),Bd=x.useRef({x:0,y:0}),xr=x.useRef({width:0,height:0,x:0,y:0,clientX:0,clientY:0,edge:"",startLeft:0,startTop:0,startRight:0,startBottom:0}),Rb=x.useRef(!1),[qz,eP]=x.useState(!1),Kn=x.useRef(null),Xs=x.useRef(null),Kz=x.useRef({top:0,left:0}),[tP,nP]=x.useState(!0),[xl,rP]=x.useState(!1),[Zp,Yz]=x.useState(!1),[Fd,Jp]=x.useState(!1),[zd,Qp]=x.useState(!0),[em,Xz]=x.useState(!1),[tm,nm]=x.useState(!1),[rm,$b]=x.useState(!1),[im,Ud]=x.useState(!1),[am,sm]=x.useState(!1),[Ib,Mb]=x.useState(!1),[iP,Zz]=x.useState([]),[pr,Jz]=x.useState(null),[aP,Qz]=x.useState({x:0,y:0}),[om,Na]=x.useState(!1),[sP,oP]=x.useState(!1),[cP,eU]=x.useState(!1),[Zs,Hd]=x.useState(1),[Js,cm]=x.useState([e]),[Vd,Db]=x.useState(null);x.useEffect(()=>{e&&Js.length===1&&Js[0]!==e&&(cm([e]),Hd(1))},[e]),x.useEffect(()=>{let N=!0;return(async()=>{if(e)try{const M=await uw(e);if(!N)return;re(M);const z=localStorage.getItem(`bpmn-lock:${M}`);z==="locked"?b(!0):z==="unlocked"&&b(!1)}catch(M){console.error("Failed to compute diagram fingerprint:",M)}})(),()=>{N=!1}},[e]),x.useEffect(()=>{let N=!0;return(async()=>{try{const{data:{user:M},error:z}=await oe.auth.getUser();if(!N)return;if(z)throw z;if(h(M??null),!M){p(!1);return}const{data:F,error:D}=await oe.from("user_roles").select("role").eq("user_id",M.id);if(D)throw D;const Z=(F==null?void 0:F.some(ue=>ue.role==="admin"))??!1;p(Z)}catch(M){console.error("Failed to load user/role info:",M),N&&(h(null),p(!1))}})(),()=>{N=!1}},[]),x.useEffect(()=>{g(f||!v)},[f,v]),x.useEffect(()=>{Te.current=m},[m,sr]),x.useEffect(()=>{Ee.current=!1,k([])},[Y]),x.useEffect(()=>{P.length?we(N=>N&&P.some(I=>I.id===N)?N:P[0].id):we(null)},[P]),x.useEffect(()=>{w&&Ks()},[w,Ks]),x.useEffect(()=>()=>{At.current&&At.current(),Ye.current.length>0&&It({silent:!0})},[It]),x.useEffect(()=>{Dd&&zr()},[Dd,zr]),x.useEffect(()=>{Dd||(Le(null),He(!1))},[Dd]),x.useEffect(()=>{Ab&&Pr()},[Pr,Ab]),x.useEffect(()=>{if(!ae)return;let N;const I=async()=>{const{data:F,error:D}=await oe.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",ae).single();if(D){console.error("Error checking job status:",D);return}if(F.status==="completed"&&F.bpmn_xml){if(a.current)try{Qt(!1),await a.current.importXML(F.bpmn_xml);const ue=a.current.get("canvas");try{const pe=ue.getViewbox();pe&&isFinite(pe.scale)&&isFinite(pe.width)&&isFinite(pe.height)&&pe.width>0&&pe.height>0&&ue.zoom("fit-viewport")}catch(pe){console.warn("Zoom error, continuing:",pe)}$.success("BPMN diagram generated from your image!",{description:"Process extracted and visualized successfully"}),sr(),Qt(!0)}catch(ue){console.error("Failed to import BPMN:",ue),$.error("Failed to load generated diagram"),Qt(!0)}const Z=document.getElementById("vision-upload");Z&&(Z.value=""),qp(!1),Ys(null),Sa(!1),H(null),N&&clearInterval(N)}else if(F.status==="failed"){const Z=F.error_message||"Processing failed. Please try again.";$.error("Vision AI processing failed",{description:Z});const ue=document.getElementById("vision-upload");ue&&(ue.value=""),Sa(!1),Ys(null),H(null),N&&clearInterval(N)}},M=oe.channel(`vision-job-${ae}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${ae}`},F=>{const D=F.new;if(console.log(" Vision job status update:",D.status),D.status==="completed"&&D.bpmn_xml){a.current&&(Qt(!1),a.current.importXML(D.bpmn_xml).then(()=>{const ue=a.current.get("canvas");try{const pe=ue.getViewbox();pe&&isFinite(pe.scale)&&isFinite(pe.width)&&isFinite(pe.height)&&pe.width>0&&pe.height>0&&ue.zoom("fit-viewport")}catch(pe){console.warn("Zoom error, continuing:",pe)}$.success("BPMN diagram generated from your image!",{description:"Process extracted and visualized successfully"}),sr(),Qt(!0)}).catch(ue=>{console.error("Failed to import BPMN:",ue),$.error("Failed to load generated diagram"),Qt(!0)}));const Z=document.getElementById("vision-upload");Z&&(Z.value=""),qp(!1),Ys(null),Sa(!1),H(null),N&&clearInterval(N)}else if(D.status==="failed"){const Z=D.error_message||"Processing failed. Please try again.";$.error("Vision AI processing failed",{description:Z});const ue=document.getElementById("vision-upload");ue&&(ue.value=""),Sa(!1),Ys(null),H(null),N&&clearInterval(N)}}).subscribe();N=window.setInterval(I,3e3),I();const z=window.setTimeout(()=>{N&&clearInterval(N),$.error("Processing timed out",{description:"Please try again or contact support"});const F=document.getElementById("vision-upload");F&&(F.value=""),Sa(!1),Ys(null),H(null)},3e5);return()=>{clearTimeout(z),oe.removeChannel(M),N&&clearInterval(N)}},[ae,n,sr]),x.useEffect(()=>{if(!i.current||a.current)return;a.current=new Bi({container:i.current,additionalModules:[{__init__:["paletteProvider"],paletteProvider:["value",{getPaletteEntries:()=>({})}]},hCe]}),n==="pid"&&(a.current.get("eventBus").once("canvas.init",()=>{var D;try{const Z=(D=a.current)==null?void 0:D.get("pidRenderer",!1);Z&&(Z.isPidMode=!0)}catch{}}),setTimeout(()=>{var D;try{const Z=(D=a.current)==null?void 0:D.get("pidRenderer",!1);Z&&(Z.isPidMode=!0)}catch{}},50));const N=a.current.get("eventBus");N.on("commandStack.changed",()=>{var D;const F=(D=a.current)==null?void 0:D.get("commandStack");F&&(c(F.canUndo()),u(F.canRedo()))});const I=F=>{if(a.current)try{const D=a.current.get("modeling"),ue=a.current.get("elementRegistry").get(F);if(ue)if(typeof D.toggleCollapse=="function")D.toggleCollapse(ue);else{const pe=ue.businessObject,Ct=pe==null?void 0:pe.di,Ot=(Ct==null?void 0:Ct.isExpanded)!==!1;D.updateProperties(ue,{isExpanded:!Ot})}}catch(D){console.error("Error toggling subprocess expansion:",D)}},M=F=>{const D=F.target;if(!D||!a.current)return;if(D.tagName==="circle"||D.tagName==="path"||D.classList.contains("djs-collapse-marker")||D.classList.contains("djs-expand-marker")||D.closest(".djs-collapse-marker")||D.closest(".djs-expand-marker")){const ue=a.current.get("elementRegistry"),pe=a.current.get("canvas"),Ct=ue.filter(Ot=>Ot.type==="bpmn:SubProcess");for(const Ot of Ct)if(Ot.id){const lt=pe.getGraphics(Ot);if(lt){const Ue=lt.getBoundingClientRect(),X=F.clientX,Re=F.clientY,Ke=X>=Ue.left&&X<=Ue.right&&Re>=Ue.bottom-30&&Re<=Ue.bottom+10;if(lt.contains(D)||Ke){I(Ot.id),F.stopPropagation(),F.preventDefault();return}}}}},z=i.current;return z&&z.addEventListener("click",M,!0),N.on("element.click",F=>{var Ct,Ot,lt,Ue,X;const{element:D,originalEvent:Z,gfx:ue}=F;if(D.type==="bpmn:SubProcess"&&D.id&&a.current)try{const Re=a.current.get("canvas");if(ue){const Ke=ue,Ht=Z.target,en=Ht&&(Ht.tagName==="circle"||Ht.tagName==="path"||((Ct=Ht.classList)==null?void 0:Ct.contains("djs-collapse-marker"))||((Ot=Ht.classList)==null?void 0:Ot.contains("djs-expand-marker"))||((lt=Ht.closest)==null?void 0:lt.call(Ht,".djs-collapse-marker"))||((Ue=Ht.closest)==null?void 0:Ue.call(Ht,".djs-expand-marker"))),bt=Ke.getBoundingClientRect(),ti=Z.clientX,Ur=Z.clientY,ts=ti>=bt.left&&ti<=bt.right&&Ur>=bt.bottom-40&&Ur<=bt.bottom+10&&ti>=bt.left+bt.width*.4&&ti<=bt.right-bt.width*.4;if(en||ts){I(D.id),Z.stopPropagation(),Z.preventDefault();return}}}catch(Re){console.error("Error handling subprocess click:",Re)}if(!Te.current){Na(!1);return}if(D.type==="bpmn:Process"||D.waypoints){Na(!1);return}const pe=(X=i.current)==null?void 0:X.getBoundingClientRect();pe&&(Qz({x:Z.clientX-pe.left,y:Z.clientY-pe.top}),Jz(D),Na(!0))}),N.on("element.dblclick",F=>{const{element:D}=F;D.type==="bpmn:SubProcess"&&D.id&&I(D.id)}),N.on("interactionEvents.create",F=>{}),N.on("marker.click",F=>{const{element:D}=F;D.type==="bpmn:SubProcess"&&D.id&&I(D.id)}),N.on("shape.click",F=>{const{element:D,originalEvent:Z}=F;if(D.type==="bpmn:SubProcess"&&D.id&&Z){const ue=Z.target;ue&&(ue.classList.contains("djs-collapse-marker")||ue.closest(".djs-collapse-marker")||ue.classList.contains("djs-expand-marker")||ue.closest(".djs-expand-marker"))&&(I(D.id),Z.stopPropagation(),Z.preventDefault())}}),()=>{z&&z.removeEventListener("click",M,!0),a.current&&(a.current.destroy(),a.current=null)}},[]);const tU=N=>{if(n!=="pid")return N;let I=N;I.includes('xmlns:pid="http://pid.extensions/schema"')||(I=I.replace(/(<bpmn:definitions[^>]*>)/,`$1
  xmlns:pid="http://pid.extensions/schema"`));const M=(z,F)=>{const D=(z||"").toLowerCase();let Z="",ue="",pe="";return F.includes("task")||F.includes("Task")?D.includes("tank")||D.includes("vessel")||D.includes("drum")?(Z="equipment",ue="tank",pe="mechanical"):D.includes("pump")?(Z="equipment",ue="pump",pe="mechanical"):D.includes("filter")?(Z="equipment",ue="filter",pe="mechanical"):D.includes("exchanger")||D.includes("heater")||D.includes("cooler")?(Z="equipment",ue="heat_exchanger",pe="mechanical"):(Z="equipment",ue="tank",pe="mechanical"):F.includes("exclusiveGateway")||F.includes("Gateway")?D.includes("valve")?(Z="valve",ue=D.includes("control")?"valve_control":"valve_gate",pe="mechanical"):(Z="valve",ue="valve_control",pe="mechanical"):F.includes("dataObjectReference")||F.includes("DataObject")?D.includes("analyzer")?(Z="instrument",ue="analyzer",pe="control"):D.includes("transmitter")||D.includes("transducer")?(Z="instrument",D.includes("level")?ue="transmitter_level":D.includes("flow")?ue="transmitter_flow":D.includes("pressure")?ue="transmitter_pressure":ue="transmitter_level",pe="control"):(Z="instrument",ue="transmitter_level",pe="control"):F.includes("subProcess")||F.includes("SubProcess")?(D.includes("controller"),Z="controller",ue="controller_pid",pe="control"):F.includes("sequenceFlow")||F.includes("SequenceFlow")?(Z="line",pe="process"):(F.includes("messageFlow")||F.includes("MessageFlow"))&&(Z="line",pe="signal"),Z&&ue&&pe?` pid:type="${Z}" pid:symbol="${ue}" pid:category="${pe}"`:""};return I=I.replace(/(<bpmn:task[^>]*name="([^"]*)")([^>]*>)/g,(z,F,D,Z)=>{if(z.includes("pid:type"))return z;const ue=M(D,"task");return F+ue+Z}),I=I.replace(/(<bpmn:exclusiveGateway[^>]*name="([^"]*)")([^>]*>)/g,(z,F,D,Z)=>{if(z.includes("pid:type"))return z;const ue=M(D,"exclusiveGateway");return F+ue+Z}),I=I.replace(/(<bpmn:dataObjectReference[^>]*name="([^"]*)")([^>]*>)/g,(z,F,D,Z)=>{if(z.includes("pid:type"))return z;const ue=M(D,"dataObjectReference");return F+ue+Z}),I=I.replace(/(<bpmn:subProcess[^>]*name="([^"]*)")([^>]*>)/g,(z,F,D,Z)=>{if(z.includes("pid:type"))return z;const ue=M(D,"subProcess");return F+ue+Z}),I=I.replace(/(<bpmn:sequenceFlow[^>]*)([^/]*>)/g,(z,F,D)=>{if(z.includes("pid:type"))return z;const Z=M("","sequenceFlow");return F+Z+D}),I=I.replace(/(<bpmn:messageFlow[^>]*)([^/]*>)/g,(z,F,D)=>{if(z.includes("pid:type"))return z;const Z=M("","messageFlow");return F+Z+D}),I};x.useEffect(()=>{var M;if(!a.current||!e)return;if(n==="pid")try{const z=(M=a.current)==null?void 0:M.get("pidRenderer",!1);z&&(z.isPidMode=!0)}catch{}const I=tU(e);Qt(!1),a.current.importXML(I).then(()=>{var F;const z=a.current.get("canvas");try{const D=z.getViewbox();D&&isFinite(D.scale)&&isFinite(D.width)&&isFinite(D.height)&&D.width>0&&D.height>0&&z.zoom("fit-viewport")}catch(D){console.warn("Zoom error, continuing:",D)}if(Db(null),n==="pid"){try{const Ot=(F=a.current)==null?void 0:F.get("pidRenderer",!1);Ot&&(Ot.isPidMode=!0,setTimeout(()=>{try{const lt=a.current.get("elementRegistry"),Ue=a.current.get("draw",!1);lt.getAll().forEach(Re=>{if(Ue&&Ue.update)try{Ue.update(Re)}catch{}})}catch{}},200))}catch{}const Z=a.current.get("elementRegistry").getAll();let ue=0,pe=0;const Ct=(Ot,lt)=>{const Ue=(Ot||"").toLowerCase();let X="",Re="",Ke="";return lt.includes("task")||lt.includes("Task")?Ue.includes("tank")||Ue.includes("vessel")||Ue.includes("drum")?(X="equipment",Re="tank",Ke="mechanical"):Ue.includes("pump")?(X="equipment",Re="pump",Ke="mechanical"):Ue.includes("filter")?(X="equipment",Re="filter",Ke="mechanical"):Ue.includes("exchanger")||Ue.includes("heater")||Ue.includes("cooler")?(X="equipment",Re="heat_exchanger",Ke="mechanical"):(X="equipment",Re="tank",Ke="mechanical"):lt.includes("exclusiveGateway")||lt.includes("Gateway")?(X="valve",Re=Ue.includes("control")?"valve_control":"valve_gate",Ke="mechanical"):lt.includes("dataObjectReference")||lt.includes("DataObject")?(X="instrument",Ue.includes("analyzer")?Re="analyzer":Ue.includes("transmitter")||Ue.includes("transducer")?Ue.includes("level")?Re="transmitter_level":Ue.includes("flow")?Re="transmitter_flow":Ue.includes("pressure")?Re="transmitter_pressure":Re="transmitter_level":Re="transmitter_level",Ke="control"):lt.includes("subProcess")||lt.includes("SubProcess")?(X="controller",Re="controller_pid",Ke="control"):lt.includes("sequenceFlow")||lt.includes("SequenceFlow")?(X="line",Ke="process"):(lt.includes("messageFlow")||lt.includes("MessageFlow"))&&(X="line",Ke="signal"),{type:X,symbol:Re,category:Ke}};Z.forEach(Ot=>{const lt=Ot.businessObject;if(!lt)return;if(lt.$attrs||(lt.$attrs={}),Object.keys(lt.$attrs).filter(X=>X.startsWith("pid:")).length>0)ue++;else{const X=Ct(lt.name||"",Ot.type||"");X.type&&X.symbol&&X.category&&(lt.$attrs["pid:type"]=X.type,lt.$attrs["pid:symbol"]=X.symbol,lt.$attrs["pid:category"]=X.category,pe++)}}),(pe>0||ue>0)&&setTimeout(()=>{try{const Ot=a.current.get("canvas"),lt=I;a.current.importXML(lt).then(()=>{try{const Ue=Ot.getViewbox();Ue&&isFinite(Ue.scale)&&isFinite(Ue.width)&&isFinite(Ue.height)&&Ue.width>0&&Ue.height>0&&Ot.zoom("fit-viewport")}catch(Ue){console.warn("Zoom error, continuing:",Ue)}setTimeout(()=>{var Ke;const Ue=a.current.get("elementRegistry"),X=a.current.get("graphicsFactory"),Re=(Ke=a.current)==null?void 0:Ke.get("pidRenderer",!1);Re&&(Re.isPidMode=!0),X&&Ue&&Ue.getAll().forEach(Ht=>{try{const en=Ue.getGraphics(Ht.id);en&&X.update&&X.update(Ht,en)}catch{}})},200)}).catch(Ue=>{})}catch{}},500)}sr(),Qt(!0)}).catch(z=>{console.error("Error rendering diagram:",z);const F=z.message||"Failed to load diagram";Db(`Generation failed (Reason: ${F}). Try simplified prompt.`),n==="pid"?$.error("Generation failed (Reason: token limit). Try simplified prompt."):$.error("Failed to load BPMN diagram"),Qt(!0)})},[e,n,sr]);const nU=async()=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(a.current)try{const N=await a.current.saveXML({format:!0});if(N.xml){const I=Zs+1;Hd(I);const M=[...Js,N.xml];if(cm(M),t&&t(N.xml),d)try{const F=Y??await uw(N.xml);await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"text",input_description:`manual-save:${F}`,generated_bpmn_xml:N.xml})}catch(F){console.error("Failed to log manual save:",F)}const z=n==="bpmn"?"BPMN":"P&ID";$.success("Diagram saved to workspace",{description:`Saved as version v${I}`})}}catch(N){console.error("Error saving diagram:",N),$.error("Failed to save diagram")}},Lb=async N=>{if(a.current)try{if((await a.current.saveXML({format:!0})).xml){const M=`PID_v${Zs}.${N}`;$.success(`Exported to ${M}`,{description:"Export functionality ready"})}}catch(I){console.error("Error exporting P&ID:",I),$.error("Failed to export diagram")}},rU=N=>{if(!m){$.error("Editing is locked by the Process Manager");return}N>=0&&N<Js.length&&(Hd(N+1),t&&a.current&&(Qt(!1),a.current.importXML(Js[N]).then(()=>{const I=a.current.get("canvas");try{const M=I.getViewbox();M&&isFinite(M.scale)&&isFinite(M.width)&&isFinite(M.height)&&M.width>0&&M.height>0&&I.zoom("fit-viewport")}catch(M){console.warn("Zoom error, continuing:",M)}sr(),Qt(!0)}).catch(I=>{console.error("Failed to load historical version:",I),$.error("Unable to load this version"),Qt(!0)})))},lP=()=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(!a.current)return;const N=a.current.get("commandStack");N.canUndo()&&N.undo()},uP=()=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(!a.current)return;const N=a.current.get("commandStack");N.canRedo()&&N.redo()},iU=()=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(!a.current)return;const N=a.current.get("modeling"),I=a.current.get("elementRegistry"),z=a.current.get("canvas").getRootElement(),F=I.filter(D=>D.id!==z.id&&D.parent===z);N.removeElements(F),$.success("Canvas cleared!")},aU=x.useCallback(()=>{if(!m){$.error("Editing is locked by the Process Manager");return}const N=document.createElement("input");N.type="file",N.accept=".bpmn,.xml",N.onchange=async I=>{var z;const M=(z=I.target.files)==null?void 0:z[0];if(!(!M||!a.current))try{const F=await M.text();if(new DOMParser().parseFromString(F,"text/xml").querySelector("parsererror")){$.error("Invalid XML file");return}if(!F.includes("bpmn:")&&!F.includes("bpmn2:")&&!F.includes("bpmndi:")){$.error("File does not appear to be a valid BPMN diagram");return}Qt(!1),await a.current.importXML(F);const pe=a.current.get("canvas");try{const Ct=pe.getViewbox();if(Ct){const Ot=Ct.scale??1,lt=Ct.width??0,Ue=Ct.height??0;isFinite(Ot)&&isFinite(lt)&&isFinite(Ue)&&lt>0&&Ue>0&&Ot>0&&pe.zoom("fit-viewport")}}catch(Ct){console.warn("Zoom error, continuing:",Ct)}$.success("Diagram imported successfully"),sr(),Qt(!0)}catch(F){console.error("Import error:",F),$.error("Failed to import diagram"),Qt(!0)}},N.click()},[m]),bl=x.useCallback(async(N="bpmn")=>{if(!a.current)return;const z=`${n==="bpmn"?"BPMN":"P&ID"}_v${Zs}.${N==="jpeg"?"jpeg":N}`;try{if(N==="bpmn"||N==="xml"){const{xml:F}=await a.current.saveXML({format:!0}),D=new Blob([F],{type:"application/xml"});Ca(D,z),$.success(`Exported ${z}`)}else{const{svg:F}=await a.current.saveSVG();if(N==="svg"){const D=new Blob([F],{type:"image/svg+xml"});Ca(D,z),$.success(`Exported ${z}`)}else{const ue=await lc(F,N==="png"?"image/png":"image/jpeg",N==="png"?"rgba(255,255,255,0)":"#ffffff");Ca(ue,z),$.success(`Exported ${z}`)}}}catch(F){console.error("Export error:",F),$.error("Failed to export diagram")}},[n,Zs]),sU=x.useCallback(async()=>{if(a.current)try{const{xml:N}=await a.current.saveXML({format:!0});if(!N){$.error("No BPMN XML available");return}const I=n==="bpmn"?`Current BPMN Diagram (v${Zs})`:`Current P&ID Diagram (v${Zs})`;Yp({title:I,xml:N,source:"canvas"})}catch(N){console.error("Error opening XML viewer:",N),$.error("Unable to open XML viewer")}},[n,Zs]),wl=x.useCallback(N=>{if(!a.current)return!1;try{const I=a.current.get("canvas");if(typeof N=="number"&&(!isFinite(N)||N<=0))return console.warn("Invalid zoom value:",N),!1;if(N==="fit-viewport"){const M=I.getViewbox();if(M){const z=M.scale??1,F=M.width??0,D=M.height??0;if(!isFinite(z)||!isFinite(F)||!isFinite(D)||F<=0||D<=0||z<=0)return console.warn("Invalid viewbox values, skipping zoom:",M),!1}}return I.zoom(N),!0}catch(I){return console.error("Error applying zoom:",I),!1}},[]),dP=x.useCallback(()=>{if(a.current)try{const I=a.current.get("canvas").getViewbox();if(I&&isFinite(I.scale)&&I.scale>0){const M=Math.min(I.scale*1.2,3);isFinite(M)&&M>0&&wl(M)}}catch(N){console.error("Error zooming in:",N)}},[wl]),hP=x.useCallback(()=>{if(a.current)try{const I=a.current.get("canvas").getViewbox();if(I&&isFinite(I.scale)&&I.scale>0){const M=Math.max(I.scale/1.2,.2);isFinite(M)&&M>0&&wl(M)}}catch(N){console.error("Error zooming out:",N)}},[wl]),Bb=x.useCallback(()=>{wl("fit-viewport")},[wl]),oU=x.useCallback(()=>{var N;if(document.fullscreenElement)document.exitFullscreen().then(()=>{Jp(!1)}).catch(()=>{$.error("Failed to exit fullscreen mode")});else{const I=document.querySelector(".bpmn-viewer-root");I?I.requestFullscreen().then(()=>{Jp(!0),Qp(!0)}).catch(()=>{$.error("Failed to enter fullscreen mode")}):(N=i.current)==null||N.requestFullscreen().then(()=>{Jp(!0),Qp(!0)}).catch(()=>{$.error("Failed to enter fullscreen mode")})}},[]),cU=x.useCallback(()=>{if(a.current)try{const N=a.current.get("grid",!1);if(N)rP(!xl),N.setVisible(!xl);else{rP(!xl);const I=i.current;if(I){const M=I.querySelector(".djs-container");M&&(xl?M.style.backgroundImage="none":(M.style.backgroundImage="linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px)",M.style.backgroundSize="20px 20px"))}}}catch(N){console.error("Error toggling grid:",N)}},[xl]),lU=x.useCallback(()=>{Yz(!Zp),$.info(`Ruler ${Zp?"disabled":"enabled"}`)},[Zp]),fP=x.useCallback(()=>{if(!a.current)return;const N=[];try{const M=a.current.get("elementRegistry").getAll(),z=M.filter(D=>{var Z;return(Z=D.type)==null?void 0:Z.includes("StartEvent")}),F=M.filter(D=>{var Z;return(Z=D.type)==null?void 0:Z.includes("EndEvent")});z.length===0&&N.push({message:"No start event found. A BPMN diagram must have at least one start event."}),F.length===0&&N.push({message:"No end event found. A BPMN diagram should have at least one end event."}),M.forEach(D=>{var Z,ue;(Z=D.type)!=null&&Z.includes("Task")&&!((ue=D.businessObject)!=null&&ue.name)&&N.push({message:`Task "${D.id}" has no name`,elementId:D.id})}),M.forEach(D=>{D.type&&!D.type.includes("Event")&&D.type.includes("Gateway")}),Zz(N),Mb(!0),N.length===0?$.success("Validation passed! No issues found."):$.warning(`Found ${N.length} validation issue(s)`)}catch(I){console.error("Validation error:",I),$.error("Failed to validate diagram")}},[]),uU=x.useCallback(()=>{if(a.current){Xz(!em);try{const N=a.current.get("canvas");em?(N.isActive("hand-tool")&&N.toggle("hand-tool"),$.info("Pan mode deactivated.")):(N.toggle("hand-tool"),$.info("Pan mode activated. Click and drag to move the canvas."))}catch(N){console.error("Error toggling pan mode:",N)}}},[em]),dU=x.useCallback(N=>{if(!(!a.current||!N.trim()))try{const I=a.current.get("elementRegistry"),M=a.current.get("canvas"),z=I.getAll(),F=N.toLowerCase(),D=z.filter(Z=>{var Ot,lt,Ue,X;const ue=((lt=(Ot=Z.businessObject)==null?void 0:Ot.name)==null?void 0:lt.toLowerCase())||"",pe=((Ue=Z.id)==null?void 0:Ue.toLowerCase())||"",Ct=((X=Z.type)==null?void 0:X.toLowerCase())||"";return ue.includes(F)||pe.includes(F)||Ct.includes(F)});if(D.length>0){const Z=D[0];try{M.zoom(Z),$.success(`Found ${D.length} element(s) matching "${N}"`)}catch(ue){console.warn("Zoom to element error:",ue),$.success(`Found ${D.length} element(s) matching "${N}"`)}}else $.info(`No elements found matching "${N}"`)}catch(I){console.error("Search error:",I)}},[]),hU=async N=>{var M;if(!m){$.error("Editing is locked by the Process Manager"),N.target.value="";return}const I=(M=N.target.files)==null?void 0:M[0];if(!I){N.target.value="";return}if(!I.type.startsWith("image/")){$.error("Please upload an image file"),N.target.value="";return}Ys(I),Sa(!0);try{const{data:{user:z},error:F}=await oe.auth.getUser();if(F||!z){$.error("Please log in to use Vision Modelling AI"),Sa(!1),Ys(null),N.target.value="";return}let D=I;const{shouldCompressImage:Z,compressImage:ue}=await iu(async()=>{const{shouldCompressImage:Re,compressImage:Ke}=await Promise.resolve().then(()=>Lw);return{shouldCompressImage:Re,compressImage:Ke}},void 0);if(Z(I))try{D=await ue(I)}catch(Re){console.warn("Image compression failed, using original:",Re)}const{fileToBase64:pe}=await iu(async()=>{const{fileToBase64:Re}=await Promise.resolve().then(()=>Lw);return{fileToBase64:Re}},void 0),Ct=await pe(D,!1),Ot=`data:${D.type};base64,${Ct}`;$.info("Uploading image for analysis...");const{invokeFunction:lt}=await iu(async()=>{const{invokeFunction:Re}=await Promise.resolve().then(()=>Kj);return{invokeFunction:Re}},void 0),{data:Ue,error:X}=await lt("vision-to-bpmn",{imageBase64:Ot,diagramType:n},{deduplicate:!0});if(X)throw X;if(Ue!=null&&Ue.jobId)H(Ue.jobId),$.info("Processing started",{description:"Your image is being analyzed. This may take a moment..."});else throw new Error("No job ID received from server")}catch(z){console.error("Vision processing error:",z);const F=z instanceof Error?z.message:"Failed to process image. Please try again.";$.error("Failed to process image",{description:F}),Sa(!1),Ys(null),N.target.value=""}},fU=async N=>{var M;const I=(M=N.target.files)==null?void 0:M[0];if(I){if(!d){$.error("Please sign in to archive logs");return}Sa(!0);try{const z=await I.text(),F=await Fr(),{error:D}=await oe.from("bpmn_generations").insert({user_id:d.id,input_type:"log",input_description:`log-import:${I.name}`,generated_bpmn_xml:F,alternative_models:[{event:"log_import",fileName:I.name,size:I.size,preview:z.slice(0,1e3),importedAt:new Date().toISOString()}]});if(D)throw D;$.success("Log file imported successfully"),await Pr(),Kp(!1)}catch(z){console.error("Log import error:",z),$.error("Failed to import log file")}finally{Sa(!1),N.target.value=""}}},pU=()=>{$.success("QR code generated! Share with collaborators.")},ei=x.useCallback(N=>{if(!m){$.error("Editing is locked by the Process Manager"),Na(!1);return}if(!a.current||!pr)return;a.current.get("modeling");const I=a.current.get("bpmnReplace");try{let M=N,z;switch(N){case"start-event":M="bpmn:StartEvent";break;case"start-timer-event":M="bpmn:StartEvent",z="bpmn:TimerEventDefinition";break;case"start-message-event":M="bpmn:StartEvent",z="bpmn:MessageEventDefinition";break;case"intermediate-event":M="bpmn:IntermediateThrowEvent";break;case"intermediate-timer-event":M="bpmn:IntermediateCatchEvent",z="bpmn:TimerEventDefinition";break;case"end-event":M="bpmn:EndEvent";break;case"end-message-event":M="bpmn:EndEvent",z="bpmn:MessageEventDefinition";break;case"task":M="bpmn:Task";break;case"user-task":M="bpmn:UserTask";break;case"service-task":M="bpmn:ServiceTask";break;case"manual-task":M="bpmn:ManualTask";break;case"xor-gateway":M="bpmn:ExclusiveGateway";break;case"and-gateway":M="bpmn:ParallelGateway";break;case"or-gateway":M="bpmn:InclusiveGateway";break;default:N.startsWith("bpmn:")&&(M=N)}I.replaceElement(pr,{type:M,eventDefinitionType:z}),$.success("Element changed successfully!"),Na(!1)}catch(M){console.error("Error changing element:",M),$.error("Failed to change element type")}},[m,pr]),mU=x.useCallback((N,I)=>{if(!m){$.error("Editing is locked by the Process Manager"),Na(!1);return}if(!(!a.current||!pr))try{a.current.get("modeling").setColor([pr],{fill:N,stroke:N}),$.success(`Applied ${I} color`),Na(!1)}catch(M){console.error("Error applying color:",M),$.error("Failed to apply color")}},[m,pr]),gU=[{name:"Bottleneck",color:"#FF5252",label:"Bottleneck (Red)"},{name:"Optimization",color:"#4CAF50",label:"Optimization (Green)"},{name:"Warning",color:"#FFC107",label:"Warning (Yellow)"},{name:"Standard",color:"#2196F3",label:"Standard (Blue)"},{name:"Inactive",color:"#9E9E9E",label:"Inactive (Gray)"},{name:"Special",color:"#9C27B0",label:"Special (Purple)"},{name:"Remove",color:"none",label:"Remove Color"}],tt=x.useCallback(N=>{if(!m){$.error("Editing is locked by the Process Manager");return}if(!a.current)return;const I=a.current.get("modeling"),M=a.current.get("elementFactory"),F=a.current.get("canvas").getRootElement();let D;const Z={x:300,y:200};switch(N){case"start-event":D=M.createShape({type:"bpmn:StartEvent"});break;case"start-timer-event":D=M.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"});break;case"start-message-event":D=M.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"});break;case"start-signal-event":D=M.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"});break;case"start-conditional-event":D=M.createShape({type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"});break;case"intermediate-event":D=M.createShape({type:"bpmn:IntermediateThrowEvent"});break;case"intermediate-timer-event":D=M.createShape({type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"});break;case"intermediate-message-event":D=M.createShape({type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"});break;case"intermediate-signal-event":D=M.createShape({type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"});break;case"end-event":D=M.createShape({type:"bpmn:EndEvent"});break;case"end-message-event":D=M.createShape({type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"});break;case"end-error-event":D=M.createShape({type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"});break;case"end-terminate-event":D=M.createShape({type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"});break;case"task":D=M.createShape({type:"bpmn:Task"});break;case"user-task":D=M.createShape({type:"bpmn:UserTask"});break;case"service-task":D=M.createShape({type:"bpmn:ServiceTask"});break;case"manual-task":D=M.createShape({type:"bpmn:ManualTask"});break;case"script-task":D=M.createShape({type:"bpmn:ScriptTask"});break;case"send-task":D=M.createShape({type:"bpmn:SendTask"});break;case"receive-task":D=M.createShape({type:"bpmn:ReceiveTask"});break;case"business-rule-task":D=M.createShape({type:"bpmn:BusinessRuleTask"});break;case"call-activity":D=M.createShape({type:"bpmn:CallActivity"});break;case"xor-gateway":D=M.createShape({type:"bpmn:ExclusiveGateway"});break;case"and-gateway":D=M.createShape({type:"bpmn:ParallelGateway"});break;case"or-gateway":D=M.createShape({type:"bpmn:InclusiveGateway"});break;case"event-gateway":D=M.createShape({type:"bpmn:EventBasedGateway"});break;case"complex-gateway":D=M.createShape({type:"bpmn:ComplexGateway"});break;case"subprocess":D=M.createShape({type:"bpmn:SubProcess",isExpanded:!0});break;case"collapsed-subprocess":D=M.createShape({type:"bpmn:SubProcess",isExpanded:!1});break;case"event-subprocess":D=M.createShape({type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0});break;case"transaction":D=M.createShape({type:"bpmn:Transaction",isExpanded:!0});break;case"participant":D=M.createShape({type:"bpmn:Participant"});break;case"data-object":D=M.createShape({type:"bpmn:DataObjectReference"});break;case"data-store":D=M.createShape({type:"bpmn:DataStoreReference"});break;case"data-input":D=M.createShape({type:"bpmn:DataInput"});break;case"data-output":D=M.createShape({type:"bpmn:DataOutput"});break;case"text-annotation":D=M.createShape({type:"bpmn:TextAnnotation"});break;case"group":D=M.createShape({type:"bpmn:Group"});break;default:return}D&&(I.createShape(D,Z,F),$.success("Element added to canvas!"))},[m]);x.useEffect(()=>{const N=I=>{const M=I.target;om&&!M.closest(".context-menu")&&Na(!1)};return om&&document.addEventListener("click",N),()=>{document.removeEventListener("click",N)}},[om]),x.useEffect(()=>{const N=()=>{Jp(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",N),()=>document.removeEventListener("fullscreenchange",N)},[]),x.useEffect(()=>{const N=()=>{if(Kn.current){const M=Kn.current.getBoundingClientRect();Kz.current={top:M.top,left:M.left}}};N(),window.addEventListener("scroll",N,!0),window.addEventListener("resize",N);const I=Kn.current;return I&&I.addEventListener("scroll",N),()=>{window.removeEventListener("scroll",N,!0),window.removeEventListener("resize",N),I&&I.removeEventListener("scroll",N)}},[yl]),x.useEffect(()=>{if(!yl)return;const N=()=>{if(Kn.current){const M=Kn.current.offsetHeight-140;M>400&&QN(z=>z.height>M||z.height<400?{...z,height:Math.max(400,Math.min(700,M))}:z)}};return N(),window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)}},[yl]);const Qs=x.useCallback((N,I)=>{if(I.preventDefault(),I.stopPropagation(),!Xs.current||!Kn.current)return;Rb.current=!0,eP(!0);const z=Kn.current.getBoundingClientRect(),F=Xs.current.getBoundingClientRect(),D=F.left-z.left,Z=F.top-z.top,ue=F.right-z.left,pe=F.bottom-z.top,Ct=F.width,Ot=F.height;xr.current={width:Ct,height:Ot,x:D,y:Z,clientX:I.clientX,clientY:I.clientY,edge:N,startLeft:D,startTop:Z,startRight:ue,startBottom:pe};const lt=X=>{if(X.preventDefault(),!Kn.current||!Xs.current)return;const Re=Kn.current,Ke=Re.getBoundingClientRect(),Ht=X.clientX-Ke.left,en=X.clientY-Ke.top,bt=200,ti=300,Ur=Re.offsetWidth,ts=Re.offsetHeight;let _n=xr.current.width,ji=xr.current.height,kr=xr.current.startLeft,ns=xr.current.startTop;const Cr=xr.current.edge;if(Cr==="right"||Cr==="top-right"||Cr==="bottom-right"){const rs=Math.min(Ur,Ht),is=xr.current.startLeft+bt;_n=Math.max(is,Math.min(Ur,rs))-xr.current.startLeft,kr=xr.current.startLeft}else if(Cr==="left"||Cr==="top-left"||Cr==="bottom-left"){const rs=Math.max(0,Ht),is=xr.current.startRight-bt,Pa=Math.max(0,Math.min(is,rs));_n=xr.current.startRight-Pa,kr=Pa}if(Cr==="bottom"||Cr==="bottom-left"||Cr==="bottom-right"){const rs=Math.min(ts,en),is=xr.current.startTop+ti;ji=Math.max(is,Math.min(ts,rs))-xr.current.startTop,ns=xr.current.startTop}else if(Cr==="top"||Cr==="top-left"||Cr==="top-right"){const rs=Math.max(0,en),is=xr.current.startBottom-ti,Pa=Math.max(0,Math.min(is,rs));ji=xr.current.startBottom-Pa,ns=Pa}kr+_n>Ur&&(_n=Ur-kr),ns+ji>ts&&(ji=ts-ns),_n=Math.max(bt,_n),ji=Math.max(ti,ji),QN({width:_n,height:ji}),Ob({x:kr,y:ns})},Ue=()=>{Rb.current=!1,eP(!1),document.removeEventListener("mousemove",lt),document.removeEventListener("mouseup",Ue),document.body.style.cursor="",document.body.style.userSelect=""};document.body.style.cursor=N.includes("left")&&N.includes("top")?"nwse-resize":N.includes("right")&&N.includes("top")||N.includes("left")&&N.includes("bottom")?"nesw-resize":N.includes("right")&&N.includes("bottom")?"nwse-resize":N==="left"||N==="right"?"ew-resize":"ns-resize",document.body.style.userSelect="none",document.addEventListener("mousemove",lt),document.addEventListener("mouseup",Ue)},[]),es=n==="pid";return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        .shape-repository-scroll::-webkit-scrollbar {
          width: 8px;
        }
        .shape-repository-scroll::-webkit-scrollbar-track {
          background: transparent;
        }
        .shape-repository-scroll::-webkit-scrollbar-thumb {
          background-color: rgba(0, 0, 0, 0.5);
          border-radius: 4px;
        }
        .shape-repository-scroll::-webkit-scrollbar-thumb:hover {
          background-color: rgba(0, 0, 0, 0.7);
        }
      `}),o.jsxs("div",{className:"bpmn-viewer-root flex flex-col h-[calc(100vh-8rem)] bg-background",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-background",children:[o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Tw,{className:"h-5 w-5 text-primary"}),o.jsx("span",{className:"font-bold text-lg",children:"PROSSMIND"}),o.jsx("span",{className:"text-sm text-muted-foreground font-normal",children:"DESIGN"})]})}),o.jsx("div",{className:"flex-1 flex justify-center",children:o.jsx($6,{children:o.jsxs(I6,{children:[o.jsx(_g,{children:o.jsx(G1,{asChild:!0,children:o.jsx("a",{href:"/",className:"text-sm hover:text-primary",children:"Workspaces"})})}),o.jsx(W1,{}),o.jsx(_g,{children:o.jsx(G1,{className:"text-sm hover:text-primary",children:"Generated default"})}),o.jsx(W1,{}),o.jsx(_g,{children:o.jsx(M6,{className:`text-sm font-medium ${es?"text-engineering-green":"text-primary"}`,children:es?"* P&ID":"* BPMN"})})]})})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("a",{href:"/",className:"text-sm hover:text-primary",children:"Overview"}),o.jsx("a",{href:"/",className:"text-sm hover:text-primary",children:"Models"}),o.jsx("a",{href:"/",className:"text-sm hover:text-primary font-medium",children:"Editing"}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",children:o.jsx(Jh,{className:"h-4 w-4"})})]})]}),(zd||!Fd)&&o.jsxs("div",{className:`flex items-center gap-0.5 px-1 py-1 border-b bg-muted/30 overflow-x-auto ${es?"border-engineering-green/20":"border-border"}`,children:[o.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:nU,className:"h-7 w-7 p-0 shrink-0",title:"Save",disabled:!m,children:o.jsx(mW,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:aU,className:"h-7 w-7 p-0 shrink-0",title:"Upload/Import",disabled:!m,children:o.jsx(s0,{className:"h-3.5 w-3.5"})}),o.jsxs(oc,{children:[o.jsx(cc,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 shrink-0",title:"Download/Export",children:o.jsx(Xh,{className:"h-3.5 w-3.5"})})}),o.jsxs(co,{align:"start",children:[o.jsxs(Gt,{onClick:()=>bl("bpmn"),children:[o.jsx(ak,{className:"h-4 w-4 mr-2"}),"Export as .bpmn"]}),o.jsxs(Gt,{onClick:()=>bl("xml"),children:[o.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Export as .xml"]}),o.jsxs(Gt,{onClick:()=>bl("svg"),children:[o.jsx($i,{className:"h-4 w-4 mr-2"}),"Export as .svg"]}),o.jsxs(Gt,{onClick:()=>bl("png"),children:[o.jsx($i,{className:"h-4 w-4 mr-2"}),"Export as .png"]}),o.jsxs(Gt,{onClick:()=>bl("jpeg"),children:[o.jsx($i,{className:"h-4 w-4 mr-2"}),"Export as .jpeg"]}),o.jsxs(Gt,{onClick:()=>bl("jpg"),children:[o.jsx($i,{className:"h-4 w-4 mr-2"}),"Export as .jpg"]})]})]}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 shrink-0",title:"View BPMN XML",onClick:sU,children:o.jsx(Ic,{className:"h-3.5 w-3.5"})}),Bw.showLanguagePreference,o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),o.jsx(V,{variant:"ghost",size:"sm",onClick:lP,className:"h-7 w-7 p-0 shrink-0",title:"Undo",disabled:!s||!m,children:o.jsx(dk,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:uP,className:"h-7 w-7 p-0 shrink-0",title:"Redo",disabled:!l||!m,children:o.jsx(lk,{className:"h-3.5 w-3.5"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),o.jsxs(oc,{children:[o.jsx(cc,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 shrink-0",title:"Zoom Controls",children:o.jsx(o0,{className:"h-3.5 w-3.5"})})}),o.jsxs(co,{align:"start",children:[o.jsxs(Gt,{onClick:dP,children:[o.jsx(o0,{className:"h-4 w-4 mr-2"}),"Zoom In"]}),o.jsxs(Gt,{onClick:hP,children:[o.jsx(hk,{className:"h-4 w-4 mr-2"}),"Zoom Out"]}),o.jsxs(Gt,{onClick:Bb,children:[o.jsx(a0,{className:"h-4 w-4 mr-2"}),"Fit to Screen"]})]})]}),o.jsx(V,{variant:Fd?"default":"ghost",size:"sm",onClick:oU,className:"h-7 w-7 p-0 shrink-0",title:"Fullscreen Mode",children:Fd?o.jsx(sW,{className:"h-3.5 w-3.5"}):o.jsx(iW,{className:"h-3.5 w-3.5"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),o.jsx(V,{variant:xl?"default":"ghost",size:"sm",onClick:cU,className:"h-7 w-7 p-0 shrink-0",title:"Toggle Grid",children:o.jsx(ZG,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:Zp?"default":"ghost",size:"sm",onClick:lU,className:"h-7 w-7 p-0 shrink-0",title:"Toggle Ruler",children:o.jsx(pW,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:yl?"default":"ghost",size:"sm",onClick:()=>ZN(!yl),className:"h-7 w-7 p-0 shrink-0",title:"Toggle Elements Palette",children:o.jsx(uW,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:Bb,className:"h-7 w-7 p-0 shrink-0",title:"Fit Diagram to Screen",children:o.jsx(a0,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:fP,className:"h-7 w-7 p-0 shrink-0",title:"Validate Model",children:o.jsx(_m,{className:"h-3.5 w-3.5"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),o.jsx(V,{variant:"ghost",size:"sm",onClick:iU,className:"h-7 w-7 p-0 shrink-0",title:"Clear canvas",disabled:!m,children:o.jsx(cp,{className:"h-3.5 w-3.5"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"}),Fd&&o.jsxs(o.Fragment,{children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Qp(!zd),className:"h-7 w-7 p-0 shrink-0",title:zd?"Hide Toolbar":"Show Toolbar",children:zd?o.jsx(Xd,{className:"h-3.5 w-3.5"}):o.jsx(Xd,{className:"h-3.5 w-3.5 rotate-180"})}),o.jsx("div",{className:"h-5 w-px bg-border mx-0.5 shrink-0"})]}),o.jsxs(oc,{children:[o.jsx(cc,{asChild:!0,children:o.jsxs(V,{variant:"outline",size:"sm",className:"gap-1.5 h-7 px-2 shrink-0",children:[o.jsx(jW,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:"text-xs",children:"Tools"})]})}),o.jsxs(co,{align:"start",className:"w-64",children:[o.jsx(wg,{children:es?"Advanced P&ID Tools":"Advanced BPMN Tools"}),o.jsx(Hl,{}),r&&o.jsxs(o.Fragment,{children:[o.jsx(Gt,{onClick:()=>{if(!m){$.error("Editing is locked by the Process Manager");return}r()},children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wu,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Refine Diagram"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"AI-powered diagram refinement"})]})]})}),o.jsx(Hl,{})]}),o.jsx(Gt,{onClick:()=>Tb(!0),children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nu,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Modelling Agent Mode"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Review 5-7 AI-generated alternatives"})]})]})}),o.jsx(Gt,{onClick:()=>Kp(!0),children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(i0,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Log Agent"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Review BPMN audit history"})]})]})}),o.jsx(Gt,{onClick:()=>qp(!0),children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(s0,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Vision Modelling AI"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Sketch to diagram"})]})]})}),o.jsx(Hl,{}),o.jsx(Gt,{onClick:()=>YN(!0),children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ck,{className:"h-4 w-4"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"font-medium",children:"Share via QR Code"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Invite collaborators"})]})]})})]})]}),r&&o.jsxs(V,{variant:"outline",size:"sm",className:"gap-1.5 h-7 px-2 shrink-0",onClick:()=>{if(!m){$.error("Editing is locked by the Process Manager");return}r()},title:"Refine diagram with AI",disabled:!m,children:[o.jsx(wu,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:"text-xs",children:"Refine"})]}),o.jsx(mn,{variant:m?f?"default":"secondary":"outline",className:"ml-1 shrink-0 text-xs",children:f?"Process Manager":m?"Editor mode":"View only"})]}),o.jsx("div",{className:"flex-1 flex justify-center min-w-0 shrink",children:o.jsxs("div",{className:"flex items-center gap-1 bg-background rounded-md border border-border p-0.5",children:[o.jsxs("div",{className:"px-2 py-0.5 bg-primary text-primary-foreground rounded text-xs font-medium flex items-center gap-1.5",children:[es?"P&ID":"BPMN",o.jsx(V,{variant:"ghost",size:"sm",className:"h-3.5 w-3.5 p-0 hover:bg-primary-foreground/20",onClick:()=>{},children:o.jsx(fa,{className:"h-2.5 w-2.5"})})]}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",title:"New Tab",children:o.jsx(Th,{className:"h-3 w-3"})})]})}),o.jsx("div",{className:"flex items-center gap-1 shrink-0",children:o.jsxs("div",{className:"relative",children:[o.jsx(Zh,{className:"absolute left-1.5 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),o.jsx(vn,{placeholder:"Q Quick Search...",className:"pl-7 pr-7 h-7 w-40 text-xs",onKeyDown:N=>{N.key==="Enter"&&dU(N.currentTarget.value)}}),o.jsx("kbd",{className:"absolute right-1.5 top-1/2 transform -translate-y-1/2 pointer-events-none inline-flex h-3.5 select-none items-center gap-0.5 rounded border bg-muted px-1 font-mono text-[9px] font-medium text-muted-foreground opacity-100",children:"K"})]})})]}),o.jsxs("div",{ref:Kn,className:"flex flex-1 relative",style:{position:"relative",isolation:"isolate",overflow:"auto"},children:[yl&&o.jsxs(ye.div,{ref:Xs,className:"absolute z-50 bg-white border border-border rounded-lg shadow-lg flex flex-col",style:{position:"absolute",left:0,top:0,width:`${JN.width}px`,height:`${JN.height}px`,minWidth:"240px",minHeight:"400px",maxWidth:Kn.current?`${Kn.current.offsetWidth-Ld.x}px`:"none",maxHeight:Kn.current?`${Kn.current.offsetHeight-Ld.y}px`:"none",display:"flex",flexDirection:"column",willChange:"transform"},drag:!qz,dragMomentum:!1,dragElastic:0,dragConstraints:Kn,dragPropagation:!1,dragListener:!0,onDragStart:(N,I)=>{var F;if(Rb.current||N.target.closest(".resize-handle"))return!1;const z=(F=N.originalEvent)==null?void 0:F.target;if(z!=null&&z.closest(".resize-handle"))return!1;Bd.current={...Ld}},onDrag:(N,I)=>{if(!Kn.current||!Xs.current)return;const M=Kn.current,z=Xs.current,F=z.offsetWidth,D=z.offsetHeight,Z=Math.max(0,M.offsetWidth-F),ue=Math.max(0,M.offsetHeight-D),pe=Math.max(0,Math.min(Z,Bd.current.x+I.offset.x)),Ct=Math.max(0,Math.min(ue,Bd.current.y+I.offset.y));Ob({x:pe,y:Ct})},onDragEnd:(N,I)=>{if(!Kn.current||!Xs.current)return;const M=Kn.current,z=Xs.current,F=z.offsetWidth,D=z.offsetHeight,Z=Math.max(0,M.offsetWidth-F),ue=Math.max(0,M.offsetHeight-D),pe=Math.max(0,Math.min(Z,Bd.current.x+I.offset.x)),Ct=Math.max(0,Math.min(ue,Bd.current.y+I.offset.y));Ob({x:pe,y:Ct})},initial:!1,animate:{x:Ld.x,y:Ld.y},children:[o.jsxs("div",{className:"p-3 border-b border-border bg-white rounded-t-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-semibold text-sm text-foreground",children:"Shape repository"}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>ZN(!1),children:o.jsx(fa,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Zh,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),o.jsx(vn,{placeholder:"Enter text to filter",value:Gz,onChange:N=>Wz(N.target.value),className:"pl-8 pr-8 h-8 text-xs"}),o.jsx(tW,{className:"absolute right-2.5 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"})]})]}),o.jsx("div",{className:"flex-1 bg-white overflow-y-auto shape-repository-scroll",style:{minHeight:0,scrollbarWidth:"thin",scrollbarColor:"rgba(0, 0, 0, 0.5) transparent"},children:o.jsxs("div",{className:"p-2 space-y-1",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,quickDraw:!yt.quickDraw}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Quick draw"}),yt.quickDraw?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.quickDraw&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("start-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Start event"})]}),o.jsxs("div",{onClick:()=>tt("user-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"User task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"User task"})]}),o.jsxs("div",{onClick:()=>tt("user-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Case task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Case task"})]}),o.jsxs("div",{onClick:()=>tt("service-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Service task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Service task"})]}),o.jsxs("div",{onClick:()=>tt("collapsed-subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Subprocess",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center",children:o.jsx("div",{className:"w-3 h-0.5 bg-foreground"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Subpro..."})]}),o.jsxs("div",{onClick:()=>tt("call-activity"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Call activity",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Call activity"})]}),o.jsxs("div",{onClick:()=>tt("xor-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Exclusive gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-amber-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"X"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Exclusive gateway"})]}),o.jsxs("div",{onClick:()=>tt("intermediate-timer-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Timer boundary event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Timer boundary event"})]}),o.jsxs("div",{onClick:()=>tt("end-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"End event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"End event"})]}),o.jsxs("div",{onClick:()=>tt("participant"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Pool",children:[o.jsx("div",{className:"w-10 h-8 border-2 border-foreground rounded",children:o.jsx("div",{className:"w-1 h-full bg-foreground"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Pool"})]}),o.jsxs("div",{onClick:()=>tt("participant"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Lane",children:[o.jsx("div",{className:"w-10 h-8 border-2 border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Lane"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,startEvents:!yt.startEvents}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Start events"}),yt.startEvents?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.startEvents&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("start-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Start event"})]}),o.jsxs("div",{onClick:()=>tt("start-timer-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Timer start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Timer start event"})]}),o.jsxs("div",{onClick:()=>tt("start-message-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Message start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Message start event"})]}),o.jsxs("div",{onClick:()=>tt("start-signal-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Signal start event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-green-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Signal start event"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,activities:!yt.activities}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Activities"}),yt.activities?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.activities&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("user-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"User task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"User task"})]}),o.jsxs("div",{onClick:()=>tt("user-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Case task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Case task"})]}),o.jsxs("div",{onClick:()=>tt("service-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Service task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Service task"})]}),o.jsxs("div",{onClick:()=>tt("script-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Script task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Script task"})]}),o.jsxs("div",{onClick:()=>tt("business-rule-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Business rule task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Business rule task"})]}),o.jsxs("div",{onClick:()=>tt("receive-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Receive task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Receive task"})]}),o.jsxs("div",{onClick:()=>tt("manual-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Manual task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Manual task"})]}),o.jsxs("div",{onClick:()=>tt("send-task"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Email task",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Email task"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,gateways:!yt.gateways}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Gateways"}),yt.gateways?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.gateways&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("xor-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Exclusive gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-amber-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"X"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Exclusive gateway"})]}),o.jsxs("div",{onClick:()=>tt("and-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Parallel gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-purple-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"+"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Parallel gateway"})]}),o.jsxs("div",{onClick:()=>tt("or-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Inclusive gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-indigo-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"O"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Inclusive gateway"})]}),o.jsxs("div",{onClick:()=>tt("event-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Event-based gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-cyan-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs",children:""})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Event-based gateway"})]}),o.jsxs("div",{onClick:()=>tt("complex-gateway"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Complex gateway",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-pink-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-xs font-bold",children:"*"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Complex gateway"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,intermediateEvents:!yt.intermediateEvents}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Intermediate events"}),yt.intermediateEvents?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.intermediateEvents&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("intermediate-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Intermediate event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Intermediate event"})]}),o.jsxs("div",{onClick:()=>tt("intermediate-timer-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Timer event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Timer event"})]}),o.jsxs("div",{onClick:()=>tt("intermediate-message-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Message event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Message event"})]}),o.jsxs("div",{onClick:()=>tt("intermediate-signal-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Signal event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-blue-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Signal event"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,endEvents:!yt.endEvents}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"End events"}),yt.endEvents?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.endEvents&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("end-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"End event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"End event"})]}),o.jsxs("div",{onClick:()=>tt("end-message-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Message end event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Message end event"})]}),o.jsxs("div",{onClick:()=>tt("end-error-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Error end event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Error end event"})]}),o.jsxs("div",{onClick:()=>tt("end-terminate-event"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Terminate end event",children:[o.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-600 flex items-center justify-center text-xs",children:""}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Terminate end event"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,subprocesses:!yt.subprocesses}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Subprocesses"}),yt.subprocesses?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.subprocesses&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Subprocess",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center text-xs",children:"+"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Subprocess"})]}),o.jsxs("div",{onClick:()=>tt("collapsed-subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Collapsed subprocess",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-foreground rounded flex items-center justify-center",children:o.jsx("div",{className:"w-3 h-0.5 bg-foreground"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Collapsed subprocess"})]}),o.jsxs("div",{onClick:()=>tt("event-subprocess"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Event subprocess",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-dashed border-foreground rounded flex items-center justify-center text-xs",children:"+"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Event subprocess"})]}),o.jsxs("div",{onClick:()=>tt("transaction"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Transaction",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-double border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Transaction"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,pools:!yt.pools}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Pools & Lanes"}),yt.pools?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.pools&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("participant"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Pool",children:[o.jsx("div",{className:"w-10 h-8 border-2 border-foreground rounded",children:o.jsx("div",{className:"w-1 h-full bg-foreground"})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Pool"})]}),o.jsxs("div",{onClick:()=>tt("participant"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Lane",children:[o.jsx("div",{className:"w-10 h-8 border-2 border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Lane"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,dataObjects:!yt.dataObjects}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Data Objects"}),yt.dataObjects?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.dataObjects&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("data-object"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data object",children:[o.jsx("div",{className:"w-7 h-8 border-2 border-foreground",style:{clipPath:"polygon(0 10%, 70% 10%, 100% 0, 100% 100%, 0 100%)"}}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Data object"})]}),o.jsxs("div",{onClick:()=>tt("data-store"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data store",children:[o.jsx("div",{className:"w-8 h-7 border-2 border-foreground rounded-sm"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Data store"})]}),o.jsxs("div",{onClick:()=>tt("data-input"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data input",children:[o.jsx("div",{className:"w-7 h-8 border-2 border-foreground",style:{clipPath:"polygon(0 10%, 70% 10%, 100% 0, 100% 100%, 0 100%)"},children:o.jsx("div",{className:"text-[8px] mt-2 ml-1",children:""})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Data input"})]}),o.jsxs("div",{onClick:()=>tt("data-output"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Data output",children:[o.jsx("div",{className:"w-7 h-8 border-2 border-foreground",style:{clipPath:"polygon(0 10%, 70% 10%, 100% 0, 100% 100%, 0 100%)"},children:o.jsx("div",{className:"text-[8px] mt-2 ml-1",children:""})}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Data output"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>Ea({...yt,artifacts:!yt.artifacts}),className:"w-full flex items-center justify-between px-2 py-1.5 text-xs font-semibold text-foreground hover:bg-accent rounded transition-colors",children:[o.jsx("span",{children:"Artifacts"}),yt.artifacts?o.jsx(ra,{className:"h-3.5 w-3.5"}):o.jsx(ai,{className:"h-3.5 w-3.5"})]}),yt.artifacts&&o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 px-2 pb-2",children:[o.jsxs("div",{onClick:()=>tt("text-annotation"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Text annotation",children:[o.jsx("div",{className:"w-8 h-7 border-l-2 border-t-2 border-b-2 border-foreground"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Text annotation"})]}),o.jsxs("div",{onClick:()=>tt("group"),className:"flex flex-col items-center gap-1 p-2 hover:bg-accent rounded cursor-pointer transition-colors",title:"Group",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-dashed border-foreground rounded"}),o.jsx("span",{className:"text-[10px] text-center leading-tight",children:"Group"})]})]})]})]})}),o.jsxs("div",{className:"border-t border-border p-2 flex items-center justify-center gap-1 bg-white rounded-b-lg",children:[o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:dP,title:"Zoom In",children:o.jsx(o0,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:hP,title:"Zoom Out",children:o.jsx(hk,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:Bb,title:"Fit to Screen",children:o.jsx(a0,{className:"h-3.5 w-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>Ud(!0),title:"Settings",children:o.jsx(kg,{className:"h-3.5 w-3.5"})})]}),o.jsx("div",{className:"resize-handle absolute left-0 top-0 bottom-0 w-4 cursor-ew-resize hover:bg-primary/70 active:bg-primary z-[60] transition-colors",onMouseDown:N=>{N.preventDefault(),N.stopPropagation(),Qs("left",N)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from left"}),o.jsx("div",{className:"resize-handle absolute right-0 top-0 bottom-0 w-4 cursor-ew-resize hover:bg-primary/70 active:bg-primary z-[60] transition-colors",onMouseDown:N=>{N.preventDefault(),N.stopPropagation(),Qs("right",N)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from right"}),o.jsx("div",{className:"resize-handle absolute top-0 left-0 right-0 h-4 cursor-ns-resize hover:bg-primary/70 active:bg-primary z-[60] transition-colors",onMouseDown:N=>{N.preventDefault(),N.stopPropagation(),Qs("top",N)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from top"}),o.jsx("div",{className:"resize-handle absolute bottom-0 left-0 right-0 h-4 cursor-ns-resize hover:bg-primary/70 active:bg-primary z-[60] transition-colors",onMouseDown:N=>{N.preventDefault(),N.stopPropagation(),Qs("bottom",N)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from bottom"}),o.jsx("div",{className:"resize-handle absolute top-0 left-0 w-8 h-8 cursor-nwse-resize hover:bg-primary/70 active:bg-primary z-[60] rounded-tl-lg transition-colors",onMouseDown:N=>{N.preventDefault(),N.stopPropagation(),Qs("top-left",N)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from top-left"}),o.jsx("div",{className:"resize-handle absolute top-0 right-0 w-8 h-8 cursor-nesw-resize hover:bg-primary/70 active:bg-primary z-[60] rounded-tr-lg transition-colors",onMouseDown:N=>{N.preventDefault(),N.stopPropagation(),Qs("top-right",N)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from top-right"}),o.jsx("div",{className:"resize-handle absolute bottom-0 left-0 w-8 h-8 cursor-nesw-resize hover:bg-primary/70 active:bg-primary z-[60] rounded-bl-lg transition-colors",onMouseDown:N=>{N.preventDefault(),N.stopPropagation(),Qs("bottom-left",N)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from bottom-left"}),o.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-8 h-8 cursor-nwse-resize hover:bg-primary/70 active:bg-primary z-[60] rounded-br-lg transition-colors",onMouseDown:N=>{N.preventDefault(),N.stopPropagation(),Qs("bottom-right",N)},style:{touchAction:"none",pointerEvents:"auto"},title:"Resize from bottom-right"})]}),o.jsxs("div",{className:"flex-1 relative flex flex-col overflow-hidden",children:[Fd&&!zd&&o.jsx("div",{className:"absolute top-4 left-4 z-40",children:o.jsx(V,{variant:"default",size:"sm",onClick:()=>Qp(!0),className:"h-8 w-8 p-0 shadow-lg",title:"Show Toolbar",children:o.jsx(Xd,{className:"h-4 w-4 rotate-180"})})}),o.jsxs("div",{className:"absolute top-4 right-4 z-40 flex items-center gap-2 bg-background/95 backdrop-blur-sm border border-border rounded-lg shadow-lg p-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:lP,disabled:!m||!s,title:"Undo (Ctrl+Z)",className:"h-8 w-8 p-0",children:o.jsx(dk,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:uP,disabled:!m||!l,title:"Redo (Ctrl+Y)",className:"h-8 w-8 p-0",children:o.jsx(lk,{className:"h-4 w-4"})}),o.jsx("div",{className:"h-6 w-px bg-border mx-1"}),o.jsxs("span",{className:"text-xs text-muted-foreground px-2",children:["v",Zs,Js.length>1&&o.jsxs(oc,{children:[o.jsx(cc,{asChild:!0,children:o.jsxs("button",{className:"ml-1 text-primary hover:underline",children:[" v",Js.length]})}),o.jsx(co,{children:Js.map((N,I)=>o.jsxs(Gt,{onClick:()=>rU(I),children:["Version ",I+1]},I))})]})]})]}),Vd&&o.jsx("div",{className:"w-full h-full bg-muted/50 border border-destructive/20 rounded-lg flex flex-col items-center justify-center p-8",children:o.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto",children:o.jsx(fa,{className:"h-8 w-8 text-destructive"})}),o.jsx("h3",{className:"text-lg font-semibold",children:"Generation Failed"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:Vd}),o.jsx(V,{onClick:()=>Db(null),variant:"outline",children:"Retry with Simplified Prompt"})]})}),o.jsx("div",{ref:i,style:{backgroundColor:"#ffffff",width:"100%",height:"100%",position:"relative"},className:`w-full h-full border rounded-lg shadow-sm ${Vd?"hidden":""} ${es?"border-engineering-green/30":"border-border"}`}),es&&sP&&o.jsxs("div",{className:"absolute top-16 right-4 w-80 bg-background border border-engineering-green/20 rounded-lg shadow-lg z-40 max-h-[600px] overflow-y-auto",children:[o.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[o.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[o.jsx(sk,{className:"h-4 w-4 text-engineering-green"}),"ISA S5.1 Symbols"]}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>oP(!1),children:o.jsx(fa,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs(V1,{type:"single",collapsible:!0,children:[o.jsxs(Xl,{value:"equipment",children:[o.jsx(Zl,{className:"text-sm",children:"Equipment"}),o.jsxs(Jl,{className:"text-xs space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"TK-xxx:"})," Storage Tank"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"P-xxx:"})," Pump"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"V-xxx:"})," Pressure Vessel"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"E-xxx:"})," Heat Exchanger"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"R-xxx:"})," Reactor"]})]})]}),o.jsxs(Xl,{value:"valves",children:[o.jsx(Zl,{className:"text-sm",children:"Valves"}),o.jsxs(Jl,{className:"text-xs space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"FCV-xxx:"})," Flow Control Valve"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"TCV-xxx:"})," Temperature Control Valve"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"PCV-xxx:"})," Pressure Control Valve"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"PSV-xxx:"})," Pressure Safety Valve"]})]})]}),o.jsxs(Xl,{value:"instruments",children:[o.jsx(Zl,{className:"text-sm",children:"Instruments"}),o.jsxs(Jl,{className:"text-xs space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"FI:"})," Flow Indicator"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"TI:"})," Temperature Indicator"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"PI:"})," Pressure Indicator"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"LI:"})," Level Indicator"]})]})]})]}),o.jsx(V1,{type:"single",collapsible:!0,children:o.jsxs(Xl,{value:"advanced",children:[o.jsx(Zl,{className:"text-sm",onClick:()=>eU(!cP),children:"Show Advanced Symbols"}),cP&&o.jsxs(Jl,{className:"text-xs space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"FIC:"})," Flow Indicating Controller"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"TIC:"})," Temperature Indicating Controller"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"PIC:"})," Pressure Indicating Controller"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"LIC:"})," Level Indicating Controller"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Line Ratings:"})," 150# = ASME B16.5 Class 150"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Line Ratings:"})," 300# = ASME B16.5 Class 300"]})]})]})})]})]}),es&&!Vd&&o.jsx("div",{className:"absolute bottom-8 right-8 z-30",children:o.jsxs(oc,{children:[o.jsx(cc,{asChild:!0,children:o.jsxs(V,{className:"shadow-lg hover:shadow-xl bg-engineering-green hover:bg-engineering-green/90",children:["Export ",o.jsx(ak,{className:"ml-2 h-4 w-4"})]})}),o.jsxs(co,{align:"end",children:[o.jsx(Gt,{onClick:()=>Lb("svg"),children:"Export as SVG"}),o.jsx(Gt,{onClick:()=>Lb("pdf"),children:"Export as PDF"}),o.jsx(Gt,{onClick:()=>Lb("dwg"),children:"Export as DWG"})]})]})}),es&&!sP&&!Vd&&o.jsxs(V,{variant:"outline",size:"sm",className:"absolute top-16 right-4 z-30 bg-background/95 backdrop-blur-sm border-engineering-green/20 hover:bg-engineering-green/10",onClick:()=>oP(!0),children:[o.jsx(sk,{className:"h-4 w-4 mr-2 text-engineering-green"}),"Show Legend"]})]}),tP&&o.jsxs("div",{className:"w-12 border-l border-border bg-muted/30 flex flex-col items-center py-2 gap-2",children:[o.jsx(V,{variant:tm?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Diagram Overview",onClick:()=>nm(!tm),children:o.jsx(Mn,{className:"h-4 w-4"})}),o.jsx(V,{variant:rm?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Participants / Pools & Lanes",onClick:()=>$b(!rm),children:o.jsx(Cg,{className:"h-4 w-4"})}),o.jsx(V,{variant:im?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Execution Settings",onClick:()=>Ud(!im),children:o.jsx(kg,{className:"h-4 w-4"})}),o.jsx(V,{variant:Ib?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Check Model / Validate",onClick:fP,children:o.jsx(Gr,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",title:"User / Role Panel",onClick:()=>$.info("User/Role panel - coming soon"),children:o.jsx(Cg,{className:"h-4 w-4"})}),o.jsx(V,{variant:am?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Element Documentation",onClick:()=>sm(!am),children:o.jsx(Mn,{className:"h-4 w-4"})}),o.jsx(V,{variant:em?"default":"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Pan / Navigate Tool",onClick:uU,children:o.jsx(JG,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",title:"Search",onClick:()=>{const N=document.querySelector('input[placeholder*="Quick Search"]');N&&N.focus()},children:o.jsx(KG,{className:"h-4 w-4"})}),o.jsx("div",{className:"flex-1"}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",onClick:()=>nP(!1),title:"Collapse Sidebar",children:o.jsx(Xd,{className:"h-4 w-4"})})]}),!tP&&o.jsx("div",{className:"w-8 border-l border-border bg-muted/30 flex items-center justify-center",children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>nP(!0),title:"Expand Sidebar",children:o.jsx(Xd,{className:"h-4 w-4 rotate-180"})})})]}),om&&pr&&o.jsxs("div",{className:"context-menu absolute bg-background border border-border rounded-lg shadow-lg z-50 p-3",style:{left:`${aP.x}px`,top:`${aP.y}px`,maxWidth:"280px"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b",children:[o.jsx("span",{className:"text-xs font-semibold",children:"Change to:"}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>Na(!1),children:o.jsx(fa,{className:"h-3 w-3"})})]}),o.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:[(((pP=pr.type)==null?void 0:pP.includes("Event"))||pr.type==="bpmn:StartEvent"||pr.type==="bpmn:EndEvent")&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"EVENTS"}),o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsxs("button",{onClick:()=>ei("start-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded text-xs",title:"Start Event",children:[o.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-600"}),o.jsx("span",{className:"text-[8px]",children:"Start"})]}),o.jsxs("button",{onClick:()=>ei("intermediate-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded text-xs",title:"Intermediate",children:[o.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-blue-600"}),o.jsx("span",{className:"text-[8px]",children:"Inter."})]}),o.jsxs("button",{onClick:()=>ei("end-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded text-xs",title:"End Event",children:[o.jsx("div",{className:"w-6 h-6 rounded-full border-4 border-red-600"}),o.jsx("span",{className:"text-[8px]",children:"End"})]})]})]}),((mP=pr.type)==null?void 0:mP.includes("Task"))&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"TASKS"}),o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsxs("button",{onClick:()=>ei("task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Task",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded"}),o.jsx("span",{className:"text-[8px]",children:"Task"})]}),o.jsxs("button",{onClick:()=>ei("user-task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"User Task",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),o.jsx("span",{className:"text-[8px]",children:"User"})]}),o.jsxs("button",{onClick:()=>ei("service-task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Service",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),o.jsx("span",{className:"text-[8px]",children:"Service"})]}),o.jsxs("button",{onClick:()=>ei("manual-task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Manual",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded flex items-center justify-center text-[10px]",children:""}),o.jsx("span",{className:"text-[8px]",children:"Manual"})]})]})]}),((gP=pr.type)==null?void 0:gP.includes("Gateway"))&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"GATEWAYS"}),o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsxs("button",{onClick:()=>ei("xor-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"XOR",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-amber-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"X"})}),o.jsx("span",{className:"text-[8px]",children:"XOR"})]}),o.jsxs("button",{onClick:()=>ei("and-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"AND",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-purple-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"+"})}),o.jsx("span",{className:"text-[8px]",children:"AND"})]}),o.jsxs("button",{onClick:()=>ei("or-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"OR",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-indigo-600 transform rotate-45 flex items-center justify-center",children:o.jsx("span",{className:"transform -rotate-45 text-[10px] font-bold",children:"O"})}),o.jsx("span",{className:"text-[8px]",children:"OR"})]})]})]}),o.jsxs("div",{className:"pt-2 border-t space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"CAMUNDA COLORS"}),o.jsx("div",{className:"grid grid-cols-3 gap-1",children:gU.map(N=>o.jsxs("button",{onClick:()=>{var I;if(N.color==="none")try{const M=(I=a.current)==null?void 0:I.get("modeling");M&&pr&&(M.setColor([pr],{fill:void 0,stroke:void 0}),$.success("Color removed"),Na(!1))}catch(M){console.error("Error removing color:",M),$.error("Failed to remove color")}else mU(N.color,N.label)},className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded transition-colors",title:N.label,children:[N.color==="none"?o.jsx("div",{className:"w-6 h-6 border-2 border-dashed border-foreground rounded flex items-center justify-center",children:o.jsx(fa,{className:"h-3 w-3"})}):o.jsx("div",{className:"w-6 h-6 rounded border-2 border-border",style:{backgroundColor:N.color}}),o.jsx("span",{className:"text-[8px] text-center leading-tight",children:N.name})]},N.name))})]}),o.jsxs("div",{className:"pt-2 border-t space-y-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground",children:"CHANGE TO"}),o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsxs("button",{onClick:()=>ei("task"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Task",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-foreground rounded"}),o.jsx("span",{className:"text-[8px]",children:"Task"})]}),o.jsxs("button",{onClick:()=>ei("start-event"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Event",children:[o.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-600"}),o.jsx("span",{className:"text-[8px]",children:"Event"})]}),o.jsxs("button",{onClick:()=>ei("xor-gateway"),className:"flex flex-col items-center gap-1 p-1.5 hover:bg-accent rounded",title:"Gateway",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-amber-600 transform rotate-45"}),o.jsx("span",{className:"text-[8px]",children:"Gateway"})]})]})]})]})]}),o.jsx(Jn,{open:Fz,onOpenChange:qp,children:o.jsxs(Fn,{children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Vision Modelling AI - Process from Images"}),o.jsxs(Hn,{children:["Upload images containing process information:",o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Handwritten notes"})," - sketches and text"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Whiteboard diagrams"})," - flow drawings and ideas"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Process sketches"})," - rough workflow designs"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Meeting notes"})," - captured process discussions"]})]}),o.jsx("p",{className:"mt-2 text-sm",children:"AI will extract text, analyze the content, and generate a professional BPMN diagram."})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center",children:[o.jsx(s0,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsxs(Et,{htmlFor:"vision-upload",className:"cursor-pointer",children:[o.jsx("span",{className:"text-sm font-medium",children:"Click to upload image"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG - handwritten or printed content"})]}),o.jsx(vn,{id:"vision-upload",type:"file",accept:"image/*",className:"hidden",onChange:hU,disabled:Xp})]}),XN&&o.jsx("div",{className:"text-center text-sm",children:o.jsxs("p",{className:"text-foreground",children:["Selected: ",o.jsx("strong",{children:XN.name})]})}),Xp&&o.jsx("div",{className:"text-center space-y-2",children:o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx("p",{className:"font-medium",children:"Processing your image with AI..."}),o.jsx("p",{className:"text-xs mt-1",children:" Extracting text and analyzing content"}),o.jsx("p",{className:"text-xs",children:" Understanding process flow"}),o.jsx("p",{className:"text-xs",children:" Generating BPMN diagram"})]})})]})]})}),o.jsx(BN,{open:mt,onOpenChange:N=>{He(N),N||Le(null)},children:o.jsxs(gb,{children:[o.jsxs(vb,{children:[o.jsx(xb,{children:"Apply this alternative diagram?"}),o.jsx(bb,{children:"The current canvas will be replaced with the selected alternative. You can always undo or regenerate additional options."})]}),ze?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:ze.title}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ze.description})]}),o.jsx(mn,{variant:ze.complexity==="advanced"?"default":"secondary",children:ze.complexity.toUpperCase()})]}),o.jsx(ds,{className:"h-40 border rounded-md bg-muted/30",children:o.jsxs("pre",{className:"text-[11px] leading-4 p-3 whitespace-pre-wrap",children:[ze.xml.slice(0,1600),ze.xml.length>1600?`...

(Preview truncated)`:""]})})]}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"Select an alternative to preview and apply it."}),o.jsxs(yb,{children:[o.jsx(_b,{children:"Not now"}),o.jsx(wb,{disabled:!ze,onClick:async()=>{ze&&(await KN(ze),Le(null),He(!1))},children:"Apply diagram"})]})]})}),o.jsx(Jn,{open:zz,onOpenChange:YN,children:o.jsxs(Fn,{children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Share via QR Code"}),o.jsx(Hn,{children:"Generate a QR code to invite collaborators with view or edit permissions"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"border rounded-lg p-8 text-center bg-muted/30",children:[o.jsx(ck,{className:"h-32 w-32 mx-auto mb-4"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"QR Code will appear here"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{onClick:pU,className:"flex-1",children:"Generate QR Code"}),o.jsx(V,{variant:"outline",className:"flex-1",children:"Set Permissions"})]})]})]})}),o.jsx(Jn,{open:Ab,onOpenChange:N=>{Kp(N)},children:o.jsxs(Fn,{className:"max-w-xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Log Agent"}),o.jsx(Hn,{children:"Store and audit BPMN diagram history for compliance, recovery, and review"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center bg-muted/30",children:[o.jsx(i0,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsxs(Et,{htmlFor:"log-upload",className:"cursor-pointer flex flex-col gap-1",children:[o.jsx("span",{className:"text-sm font-medium",children:"Click to upload log file"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV, JSON, TXT, or LOG format"})]}),o.jsx(vn,{id:"log-upload",type:"file",accept:".csv,.json,.txt,.log",className:"hidden",onChange:fU,disabled:Xp})]}),Xp&&o.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Analyzing log file..."}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(i0,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("p",{className:"text-sm font-medium",children:"Audit trail"})]}),o.jsxs(mn,{variant:"outline",children:[et.length," snapshots"]})]}),o.jsx(ds,{className:"max-h-64 border rounded-md",children:o.jsx("div",{className:"divide-y",children:_e?o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Loading audit trail..."}):et.length?et.map(N=>{const I=Array.isArray(N.alternative_models)?N.alternative_models[0]:void 0,M=I&&typeof I=="object"&&typeof I.preview=="string"?I.preview:void 0;return o.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:N.input_description??"Manual save"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:N.created_at?new Date(N.created_at).toLocaleString():"Timestamp unavailable"}),N.input_type&&o.jsx(mn,{variant:"secondary",className:"mt-1 uppercase tracking-wide",children:N.input_type.replace(/[_-]/g," ")})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(oc,{children:[o.jsx(cc,{asChild:!0,children:o.jsx(V,{size:"sm",variant:"outline",children:"Download as"})}),o.jsxs(co,{align:"end",className:"w-44",children:[o.jsx(wg,{children:"Choose format"}),o.jsx(Hl,{}),o.jsx(Gt,{onClick:()=>Bz(N.generated_bpmn_xml,N.input_description??"diagram-log"),children:"BPMN (.bpmn)"}),o.jsx(Gt,{onClick:async()=>{try{const z=await cs(N.generated_bpmn_xml),F=new Blob([z],{type:"image/svg+xml"});Ca(F,`${N.input_description??"diagram-log"}.svg`)}catch{$.error("Failed to export SVG")}},children:"SVG (.svg)"}),o.jsx(Gt,{onClick:async()=>{try{const z=await cs(N.generated_bpmn_xml),F=await lc(z,"image/png");Ca(F,`${N.input_description??"diagram-log"}.png`)}catch{$.error("Failed to export PNG")}},children:"PNG (.png)"}),o.jsx(Gt,{onClick:async()=>{try{const z=await cs(N.generated_bpmn_xml),F=await lc(z,"image/jpeg","#ffffff");Ca(F,`${N.input_description??"diagram-log"}.jpg`)}catch{$.error("Failed to export JPG")}},children:"JPG (.jpg)"}),o.jsx(Gt,{onClick:async()=>{try{const z=await cs(N.generated_bpmn_xml),F=await lc(z,"image/png","#ffffff"),D=URL.createObjectURL(F),Z=window.open("","_blank");Z?(Z.document.write(`<html><head><title>${N.input_description??"diagram-log"}</title></head><body style="margin:0"><img src="${D}" style="width:100%;height:auto"/></body></html>`),Z.document.close(),setTimeout(()=>{try{Z.focus(),Z.print()}catch{}},300)):$.info("Popup blocked. Enable popups to save as PDF.")}catch{$.error("Failed to prepare PDF. Use 'Print to PDF' from the opened image.")}},children:"PDF (via Print)"})]})]}),o.jsx(V,{size:"sm",onClick:()=>Lz(N),children:"Load"})]})]}),M&&o.jsx("pre",{className:"text-xs bg-muted/60 border rounded-md p-3 whitespace-pre-wrap max-h-32 overflow-auto",children:M})]},N.id)}):o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No historical logs archived yet."})})})]})]})]})}),o.jsx(Jn,{open:Dd,onOpenChange:N=>{Tb(N),N||L(null)},children:o.jsxs(Fn,{className:"max-w-[95vw] max-h-[95vh] w-[90vw] h-[90vh] overflow-hidden flex flex-col p-0",style:{maxWidth:"1400px",maxHeight:"900px",width:"90vw",height:"90vh",minWidth:"900px",minHeight:"650px"},children:[o.jsxs(zn,{className:"px-6 pt-6 pb-4 flex-shrink-0 border-b",children:[o.jsx(Un,{children:"Modelling Agent Mode"}),o.jsx(Hn,{children:"Compare 5-7 AI-generated BPMN variations, from streamlined to advanced, and apply the best fit"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-6 pb-6 space-y-6",style:{minHeight:0,scrollBehavior:"smooth"},children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"How many alternative diagrams would you like to generate?"}),o.jsx("div",{className:"flex gap-4",children:[3,5,7].map(N=>o.jsxs("label",{className:`flex items-center gap-2 cursor-pointer ${T?"opacity-50 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",name:"alternativeCount",value:N,checked:te===N,onChange:()=>{T||W(N)},disabled:T,className:"w-4 h-4 text-primary focus:ring-2 focus:ring-primary focus:ring-offset-2","aria-label":`Generate ${N} alternatives`}),o.jsx("span",{className:"text-sm font-medium",children:N}),N===5&&o.jsx(mn,{variant:"secondary",className:"text-[10px]",children:"Recommended"})]},N))}),o.jsxs("div",{className:"mt-1 space-y-1 text-xs text-muted-foreground",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"3 alternatives:"})," Quick comparison (fastest)"]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"5 alternatives:"})," Comprehensive options (recommended)"]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"7 alternatives:"})," Maximum variety (slowest)"]})]})]}),Bw.showLanguagePreference]}),T?o.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-8",children:[o.jsx(tr,{className:"h-8 w-8 animate-spin text-primary"}),o.jsxs("div",{className:"space-y-4 text-center w-full max-w-md",children:[o.jsxs("p",{className:"text-sm font-medium",children:["Generating ",B.total||te," alternative ",n==="pid"?"P&ID":"BPMN"," models in parallel..."]}),B.total>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Progress: ",B.completed," / ",B.total]}),o.jsxs("span",{children:[B.total?Math.round(B.completed/B.total*100):0,"%"]})]}),o.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${B.total?Math.min(100,B.completed/B.total*100):0}%`}})}),o.jsx("div",{className:"space-y-1.5 text-left border rounded-lg p-3 bg-muted/30 max-h-64 overflow-y-auto",children:xh.slice(0,B.total).map(N=>{var z;const I=U.get(N.id)||"queued",M=B.current===N.title;return o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[I==="completed"&&o.jsx(Gr,{className:"h-3.5 w-3.5 text-green-600 dark:text-green-400 flex-shrink-0"}),I==="generating"&&o.jsx(tr,{className:"h-3.5 w-3.5 animate-spin text-primary flex-shrink-0"}),I==="failed"&&o.jsx(_m,{className:"h-3.5 w-3.5 text-destructive flex-shrink-0"}),I==="queued"&&o.jsx("div",{className:"h-3.5 w-3.5 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"}),o.jsxs("span",{className:`flex-1 ${M?"font-medium text-primary":""} ${I==="failed"?"text-destructive":""}`,children:[N.title,I==="failed"&&" (generation failed)",I==="completed"&&((z=P.find(F=>F.title===N.title))==null?void 0:z.previewFailed)&&" (preview unavailable)"]})]},N.id)})})]}),P.length>0&&o.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:[" ",P.length," model",P.length!==1?"s":""," ready"]})]})]}):R?o.jsxs("div",{className:"border border-destructive/30 bg-destructive/10 rounded-lg p-4 space-y-3",children:[o.jsx("p",{className:"text-sm text-destructive font-medium",children:"Unable to prepare alternatives"}),o.jsx("p",{className:"text-xs text-destructive/80",children:R}),o.jsx(V,{size:"sm",variant:"outline",onClick:()=>zr(!0),children:"Retry"})]}):P.length?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[o.jsx("div",{className:"space-y-4",children:qe?o.jsxs("div",{className:"border rounded-lg p-5 space-y-4 bg-muted/40",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nu,{className:"h-4 w-4 text-primary"}),o.jsx("h4",{className:"text-base font-semibold",children:qe.title})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:qe.description})]}),o.jsx(mn,{variant:qe.complexity==="advanced"?"default":"secondary",children:qe.complexity.toUpperCase()})]}),qe.generatedAt&&o.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Generated ",new Date(qe.generatedAt).toLocaleString()]}),vl&&vl.id===qe.id&&o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gradient-to-r from-primary/10 to-primary/5 border-2 border-primary/30 rounded-lg shadow-sm",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-semibold text-primary",children:"Recommended Variant"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Best balance of complexity, clarity, and functionality"})]})]}),qe.metrics&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-xs font-semibold text-foreground uppercase tracking-wide",children:"Key Performance Indicators"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Number of Tasks"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.taskCount})]}),o.jsxs("div",{className:"flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Decision Points"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.decisionPoints})]}),o.jsxs("div",{className:"flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Parallel Branches"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.parallelBranches})]}),o.jsxs("div",{className:"flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Error Handlers"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.errorHandlers})]}),o.jsxs("div",{className:"col-span-2 flex flex-col p-3 bg-background border rounded-lg",children:[o.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Estimated Execution Paths"}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:qe.metrics.estimatedPaths})]})]})]}),(()=>{const N=Wp(qe);return o.jsxs("div",{className:"space-y-3 border-t pt-4",children:[o.jsx("p",{className:"text-xs font-semibold text-foreground uppercase tracking-wide",children:"Variant Analysis"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-green-600 dark:text-green-400 mb-2 flex items-center gap-1",children:[o.jsx("span",{children:""})," Strengths"]}),o.jsx("ul",{className:"space-y-1 text-muted-foreground",children:N.strengths.map((I,M)=>o.jsxs("li",{className:"flex items-start gap-1",children:[o.jsx("span",{className:"text-green-500 mt-0.5",children:""}),o.jsx("span",{children:I})]},M))})]}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-amber-600 dark:text-amber-400 mb-2 flex items-center gap-1",children:[o.jsx("span",{children:""})," Weaknesses"]}),o.jsx("ul",{className:"space-y-1 text-muted-foreground",children:N.weaknesses.map((I,M)=>o.jsxs("li",{className:"flex items-start gap-1",children:[o.jsx("span",{className:"text-amber-500 mt-0.5",children:""}),o.jsx("span",{children:I})]},M))})]}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-1",children:[o.jsx("span",{children:""})," Best Use Cases"]}),o.jsx("ul",{className:"space-y-1 text-muted-foreground",children:N.useCases.map((I,M)=>o.jsxs("li",{className:"flex items-start gap-1",children:[o.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),o.jsx("span",{children:I})]},M))})]})]})]})})(),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Diagram Preview"}),o.jsx("div",{className:"h-64 border rounded-md",style:{backgroundColor:"#ffffff"},"data-preview-container":!0,children:o.jsx(dw,{xml:qe.xml,title:qe.title,onRetry:()=>{we(qe.id)},onDownloadAvailable:N=>{N||k(I=>I.map(M=>M.id===qe.id?{...M,previewFailed:!0}:M))}})})]}),o.jsx("div",{className:"flex justify-between items-center gap-2 pt-2 border-t",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{size:"sm",variant:"outline",onClick:()=>{!qe&&P.length&&we(P[0].id),Ws(!0)},className:"flex items-center gap-2",children:[o.jsx(ya,{className:"h-4 w-4"}),"Preview"]}),o.jsxs(V,{size:"sm",variant:"outline",onClick:()=>Yp({title:qe.title,xml:qe.xml,generatedAt:qe.generatedAt,complexity:qe.complexity,source:"alternative"}),className:"flex items-center gap-2",children:[o.jsx(Ic,{className:"h-4 w-4"}),"View XML"]}),o.jsxs(oc,{children:[o.jsx(cc,{asChild:!0,children:o.jsxs(V,{size:"sm",variant:"outline",className:"flex items-center gap-2",children:[o.jsx(Xh,{className:"h-4 w-4"}),"Download"]})}),o.jsxs(co,{align:"end",className:"w-44",children:[o.jsx(wg,{children:"Choose format"}),o.jsx(Hl,{}),o.jsx(Gt,{onClick:()=>Cb(qe),children:"BPMN (.bpmn)"}),o.jsx(Gt,{onClick:()=>Cb(qe,"xml"),children:"XML (.xml)"}),o.jsx(Gt,{onClick:async()=>{try{const N=await cs(qe.xml),I=new Blob([N],{type:"image/svg+xml"});Ca(I,`${qe.title}.svg`)}catch{$.error("Failed to export SVG")}},children:"SVG (.svg)"}),o.jsx(Gt,{onClick:async()=>{try{const N=await cs(qe.xml),I=await lc(N,"image/png");Ca(I,`${qe.title}.png`)}catch{$.error("Failed to export PNG")}},children:"PNG (.png)"}),o.jsx(Gt,{onClick:async()=>{try{const N=await cs(qe.xml),I=await lc(N,"image/jpeg","#ffffff");Ca(I,`${qe.title}.jpg`)}catch{$.error("Failed to export JPG")}},children:"JPG (.jpg)"}),o.jsx(Gt,{onClick:async()=>{try{const N=await cs(qe.xml),I=await lc(N,"image/png","#ffffff"),M=URL.createObjectURL(I),z=window.open("","_blank");z?(z.document.write(`<html><head><title>${qe.title}</title></head><body style="margin:0"><img src="${M}" style="width:100%;height:auto"/></body></html>`),z.document.close(),setTimeout(()=>{try{z.focus(),z.print()}catch{}},300)):$.info("Popup blocked. Enable popups to save as PDF.")}catch{$.error("Failed to prepare PDF. Use 'Print to PDF' from the opened image.")}},children:"PDF (via Print)"})]})]}),o.jsxs(V,{size:"sm",onClick:()=>{qe&&KN(qe)},className:"flex items-center gap-2",children:[o.jsx(Gr,{className:"h-4 w-4"}),"Apply"]})]})})]}):o.jsx("div",{className:"border rounded-lg p-6 text-center text-sm text-muted-foreground bg-muted/30",children:"Select an alternative from the list to preview and apply it."})}),o.jsxs("div",{className:"border rounded-lg p-3 bg-background/70 flex flex-col",style:{minHeight:"300px",maxHeight:"calc(100vh - 250px)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:["Alternatives (",P.length,")"]}),o.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Click to preview & confirm"})]}),P.length>3&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 h-1.5 bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary transition-all duration-200",style:{width:`${fe}%`}})}),o.jsxs("span",{className:"text-[10px] text-muted-foreground min-w-[35px] text-right",children:[Math.round(fe),"%"]})]}),o.jsxs(ds,{className:"flex-1 pr-2 alternatives-panel-scroll",style:{scrollbarWidth:"thin",scrollbarColor:"rgba(52, 152, 219, 0.6) rgba(255, 255, 255, 0.05)",minHeight:"300px",maxHeight:"calc(100vh - 350px)"},onScroll:N=>{const I=N.target,{scrollTop:M,scrollHeight:z,clientHeight:F}=I,D=z>F?M/(z-F)*100:0;be(Math.min(100,Math.max(0,D)))},children:[o.jsx("style",{children:`
                        .alternatives-panel-scroll::-webkit-scrollbar {
                          width: 10px;
                          height: 10px;
                        }
                        .alternatives-panel-scroll::-webkit-scrollbar-track {
                          background: rgba(255, 255, 255, 0.05);
                          border-radius: 10px;
                          margin: 5px 0;
                        }
                        .alternatives-panel-scroll::-webkit-scrollbar-thumb {
                          background: rgba(52, 152, 219, 0.6);
                          border-radius: 10px;
                          border: 2px solid transparent;
                          background-clip: padding-box;
                        }
                        .alternatives-panel-scroll::-webkit-scrollbar-thumb:hover {
                          background: rgba(52, 152, 219, 0.9);
                          background-clip: padding-box;
                        }
                        @media (max-width: 1200px) {
                          .alternatives-panel-scroll {
                            max-height: calc(100vh - 200px) !important;
                          }
                        }
                        @media (max-width: 768px) {
                          .alternatives-panel-scroll {
                            max-height: calc(100vh - 150px) !important;
                          }
                        }
                      `}),o.jsx("div",{ref:ne,className:"space-y-3",style:{scrollBehavior:"smooth"},children:P.map((N,I)=>{const M=N.id===ce;return o.jsxs("button",{type:"button",onClick:()=>we(N.id),className:`w-full text-left border rounded-lg p-3 transition-all focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 flex-shrink-0 ${M?"border-primary bg-primary/10 shadow-lg":"border-border hover:shadow-md"}`,style:{minHeight:"280px",maxHeight:"none",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:N.title}),o.jsx(mn,{variant:N.complexity==="advanced"?"default":N.complexity==="intermediate"?"secondary":"outline",className:"text-[10px] mt-1",children:N.complexity==="basic"?"BASIC":N.complexity==="intermediate"?"INTERMEDIATE":"ADVANCED"})]}),M&&o.jsx(Gr,{className:"h-5 w-5 text-primary flex-shrink-0"})]}),o.jsx("div",{className:"mt-2 rounded-md border overflow-hidden",style:{backgroundColor:"#ffffff",minHeight:"128px",maxHeight:"200px",height:"auto"},children:o.jsx(dw,{xml:N.xml,title:N.title,onDownloadAvailable:z=>{z||k(F=>F.map(D=>D.id===N.id?{...D,previewFailed:!0}:D))}})}),N.metrics&&o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-1.5 text-[10px]",children:[o.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-muted-foreground",children:"Tasks:"}),o.jsx("span",{className:"font-semibold",children:N.metrics.taskCount})]}),o.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-muted-foreground",children:"Decisions:"}),o.jsx("span",{className:"font-semibold",children:N.metrics.decisionPoints})]}),o.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-muted-foreground",children:"Parallel:"}),o.jsx("span",{className:"font-semibold",children:N.metrics.parallelBranches})]}),o.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-muted-foreground",children:"Errors:"}),o.jsx("span",{className:"font-semibold",children:N.metrics.errorHandlers})]})]}),vl&&vl.id===N.id&&o.jsxs("div",{className:"mt-2 flex items-center gap-1.5 px-2 py-1 bg-primary/10 border border-primary/20 rounded text-[10px] text-primary",children:[o.jsx("span",{children:""}),o.jsx("span",{className:"font-semibold",children:"Recommended"})]}),N.previewFailed&&o.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[10px] text-yellow-600 dark:text-yellow-500",children:[o.jsx(_m,{className:"h-3 w-3"}),o.jsx("span",{children:"Preview unavailable"})]})]},N.id)})})]}),P.length>3&&o.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-border",children:[o.jsx(V,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>{var N;(N=ne.current)==null||N.scrollTo({top:0,behavior:"smooth"})},disabled:fe===0,children:" Top"}),o.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[P.length," alternative",P.length!==1?"s":""]}),o.jsx(V,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>{ne.current&&ne.current.scrollTo({top:ne.current.scrollHeight,behavior:"smooth"})},disabled:fe>=99,children:"Bottom "})]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[o.jsx("span",{className:"text-xs text-muted-foreground",children:"Compare variants side by side, then apply the one that fits your requirements."}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{size:"sm",variant:"outline",onClick:()=>{ty.clear(),k(N=>N.map(I=>({...I}))),$.info("Refreshing all previews...")},disabled:T,title:"Refresh all alternative previews",children:"Refresh All"}),o.jsx(V,{size:"sm",variant:"outline",onClick:()=>{confirm("This will replace current alternatives with a new set. Continue?")&&zr(!0)},disabled:T,title:"Generate a new set of alternative BPMN models with the same input",children:"Regenerate all variations"})]})]})]}):o.jsxs("div",{className:"border rounded-lg p-6 text-center bg-muted/40",children:[o.jsx(nu,{className:"h-16 w-16 mx-auto mb-4 text-primary"}),o.jsx("p",{className:"text-sm font-medium mb-2",children:"Preparing alternatives"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"We will analyze the current diagram and assemble 5-7 tailored variations, from core flow to advanced designs."}),o.jsx(V,{className:"mt-4",onClick:()=>zr(!0),disabled:T,children:"Generate alternatives"})]})]})]})}),o.jsx(Jn,{open:kb,onOpenChange:Ws,children:o.jsxs(Fn,{className:"max-w-5xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:qe?`Preview  ${qe.title}`:"Preview alternative"}),o.jsx(Hn,{children:qe?`Complexity: ${qe.complexity.toUpperCase()}`:"Select an alternative to preview it."})]}),qe?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"border rounded-lg bg-muted/30 h-[420px]","data-preview-container":!0,children:o.jsx(dw,{xml:qe.xml,title:qe.title,onRetry:()=>we(qe.id),onDownloadAvailable:()=>{}})}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsxs(V,{variant:"outline",onClick:()=>{Ws(!1),Yp({title:qe.title,xml:qe.xml,generatedAt:qe.generatedAt,complexity:qe.complexity,source:"alternative"})},className:"flex items-center gap-2",children:[o.jsx(Ic,{className:"h-4 w-4"}),"View XML"]}),o.jsx(V,{onClick:()=>Cb(qe),children:"Download .bpmn"})]})]}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"Pick an alternative model to preview it."})]})}),o.jsx(Jn,{open:!!Qr,onOpenChange:N=>{N||Yp(null)},children:o.jsxs(Fn,{className:"max-w-3xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"BPMN XML"}),o.jsx(Hn,{children:Qr?`${Qr.title}${Qr.complexity?` (${Qr.complexity.toUpperCase()})`:""}`:"Inspect the generated BPMN XML."})]}),Qr&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Generated"," ",Qr.generatedAt?new Date(Qr.generatedAt).toLocaleString():Qr.source==="canvas"?new Date().toLocaleString():"just now"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{size:"sm",variant:"outline",onClick:async()=>{try{if(typeof navigator>"u"||!navigator.clipboard)throw new Error("Clipboard API unavailable");await navigator.clipboard.writeText(Qr.xml),$.success("XML copied to clipboard")}catch(N){console.error("Failed to copy XML:",N),$.error("Unable to copy XML")}},children:"Copy XML"}),o.jsx(V,{size:"sm",onClick:()=>{const N=new Blob([Qr.xml],{type:"application/xml"}),I=`${(Qr.title||"diagram").replace(/\s+/g,"_").toLowerCase()}.xml`;Ca(N,I)},children:"Download XML"})]})]}),o.jsxs(ds,{className:"max-h-[60vh] border rounded-md bg-muted/30",children:[o.jsx("pre",{className:"text-[11px] leading-5 p-4 whitespace-pre-wrap",children:Qr.xml}),o.jsx(Hj,{orientation:"vertical"})]})]})]})}),o.jsx(Jn,{open:Uz,onOpenChange:N=>{Hz(N)},children:o.jsxs(Fn,{className:"max-w-xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"System Use Modelling"}),o.jsx(Hn,{children:"Capture visits, clicks, and on-page context to generate BPMN models from real usage"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"border rounded-lg p-4 bg-muted/40 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Tw,{className:"h-10 w-10 text-primary"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold",children:"Detailed Behavior Tracking"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Log page visits, clicked elements, and page copy for downstream mining."})]})]}),o.jsx(mn,{variant:Jt?"default":"outline",children:Jt?"Active":"Paused"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Jt?o.jsxs(o.Fragment,{children:[o.jsx(V,{variant:"destructive",className:"flex-1",onClick:()=>void Zr(),children:"Stop Tracking"}),o.jsx(V,{variant:"outline",className:"flex-1",onClick:()=>void It(),disabled:We.length===0,children:"Save Snapshot"})]}):o.jsx(V,{className:"flex-1",onClick:()=>{if(!d){$.error("Please sign in to enable tracking");return}le(!0),sn(),$.success("System tracking enabled  capturing visits, clicks, and page context.")},children:"Enable Tracking"})}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:["Tracked activity (",We.length,")"]}),o.jsx(ds,{className:"max-h-60 border rounded-md",children:o.jsx("div",{className:"divide-y",children:We.length?We.map(N=>o.jsxs("div",{className:"flex items-start gap-3 p-3",children:[N.type==="visit"?o.jsx(yy,{className:"h-4 w-4 mt-1 text-primary"}):o.jsx(lW,{className:"h-4 w-4 mt-1 text-primary"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium",children:N.type==="visit"?"Visited page":"User click"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(N.timestamp).toLocaleString()}),N.details.url&&o.jsx("p",{className:"text-xs break-all",children:N.details.url}),N.details.title&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Title: ",N.details.title]}),N.details.text&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:['"',N.details.text,'"']}),N.details.contentPreview&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Preview: ",N.details.contentPreview]}),N.details.tag&&o.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Element: ",N.details.tag,N.details.xpath?`  ${N.details.xpath}`:""]}),N.details.referrer&&o.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Referrer: ",N.details.referrer]})]})]},N.id)):o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No activity captured yet. Enable tracking to begin logging interactions."})})})]})]})]})}),o.jsx(Jn,{open:w,onOpenChange:N=>{if(N&&!f){$.error("Process Manager rights required");return}y(N)},children:o.jsxs(Fn,{className:"max-w-2xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Process Manager Console"}),o.jsx(Hn,{children:"Exercise full editing control, lock or unlock the canvas, and grant or revoke collaborator rights."})]}),f?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"border rounded-lg p-4 flex items-center justify-between bg-muted/40",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Editing lock"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"When locked, collaborators can only view the diagram."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mn,{variant:v?"default":"outline",children:v?"Locked":"Unlocked"}),o.jsx(Ns,{id:"editing-lock",checked:v,onCheckedChange:N=>Jr(N)})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yW,{className:"h-4 w-4 text-primary"}),o.jsx("p",{className:"text-sm font-medium",children:"Collaborators"})]}),o.jsx(mn,{variant:"outline",children:_.length})]}),o.jsx(ds,{className:"max-h-72 border rounded-md",children:o.jsx("div",{className:"divide-y",children:S?o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Loading collaborators..."}):_.length?_.map(N=>{const I=N.roles.includes("admin");return o.jsxs("div",{className:"p-4 flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"text-sm font-medium flex items-center gap-2",children:[N.email,N.userId===(d==null?void 0:d.id)&&o.jsx(mn,{variant:"outline",children:"You"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:I?"Process Manager":"Collaborator"}),o.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Last active:"," ",N.lastLogin?new Date(N.lastLogin).toLocaleString():"No activity recorded"]})]}),N.userId!==(d==null?void 0:d.id)&&(I?o.jsx(V,{variant:"outline",size:"sm",onClick:()=>Qa(N.userId),children:"Remove access"}):o.jsx(V,{size:"sm",onClick:()=>ja(N.userId),children:"Grant access"}))]},N.userId)}):o.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No collaborators found."})})})]})]}):o.jsxs("div",{className:"border rounded-lg p-6 text-center bg-muted/40 space-y-2",children:[o.jsx("p",{className:"text-sm font-medium",children:"View-only access"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"You do not have Process Manager permissions. Please contact an administrator to update access rights."})]})]})}),tm&&o.jsx(Jn,{open:tm,onOpenChange:nm,children:o.jsxs(Fn,{className:"max-w-2xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Diagram Overview"}),o.jsx(Hn,{children:"Edit process properties and metadata"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Et,{children:"Process Name"}),o.jsx(vn,{placeholder:"Enter process name"})]}),o.jsxs("div",{children:[o.jsx(Et,{children:"Process ID"}),o.jsx(vn,{placeholder:"process-id"})]}),o.jsxs("div",{children:[o.jsx(Et,{children:"Description"}),o.jsx(vi,{placeholder:"Enter process description",rows:4})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(V,{variant:"outline",onClick:()=>nm(!1),children:"Cancel"}),o.jsx(V,{onClick:()=>{$.success("Properties saved"),nm(!1)},children:"Save"})]})]})]})}),rm&&o.jsx(Jn,{open:rm,onOpenChange:$b,children:o.jsxs(Fn,{className:"max-w-2xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Participants / Pools & Lanes"}),o.jsx(Hn,{children:"Manage collaboration elements"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Manage pools, lanes, and participant assignments for your BPMN diagram."}),o.jsx(V,{onClick:()=>$.info("Add participant functionality - coming soon"),children:"Add Participant"}),o.jsx("div",{className:"flex justify-end gap-2",children:o.jsx(V,{variant:"outline",onClick:()=>$b(!1),children:"Close"})})]})]})}),im&&o.jsx(Jn,{open:im,onOpenChange:Ud,children:o.jsxs(Fn,{className:"max-w-2xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Execution Settings"}),o.jsx(Hn,{children:"Configure process engine options and metadata"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Et,{children:"Process Version"}),o.jsx(vn,{type:"number",defaultValue:"1"})]}),o.jsxs("div",{children:[o.jsx(Et,{children:"Process Namespace"}),o.jsx(vn,{placeholder:"http://example.org/bpmn"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ns,{id:"executable"}),o.jsx(Et,{htmlFor:"executable",children:"Executable Process"})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(V,{variant:"outline",onClick:()=>Ud(!1),children:"Cancel"}),o.jsx(V,{onClick:()=>{$.success("Settings saved"),Ud(!1)},children:"Save"})]})]})]})}),am&&o.jsx(Jn,{open:am,onOpenChange:sm,children:o.jsxs(Fn,{className:"max-w-2xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Element Documentation"}),o.jsx(Hn,{children:"Add documentation for the selected element"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs(Et,{children:["Element: ",(pr==null?void 0:pr.id)||"None selected"]}),o.jsx(vi,{placeholder:"Enter element documentation",rows:6})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(V,{variant:"outline",onClick:()=>sm(!1),children:"Cancel"}),o.jsx(V,{onClick:()=>{$.success("Documentation saved"),sm(!1)},children:"Save"})]})]})]})}),Ib&&o.jsx(Jn,{open:Ib,onOpenChange:Mb,children:o.jsxs(Fn,{className:"max-w-2xl",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Validation Results"}),o.jsx(Hn,{children:"BPMN structural validation issues"})]}),o.jsxs("div",{className:"space-y-4",children:[iP.length===0?o.jsxs("div",{className:"text-center py-8 text-green-600",children:[o.jsx(Gr,{className:"h-12 w-12 mx-auto mb-2"}),o.jsx("p",{className:"font-semibold",children:"No validation issues found!"})]}):o.jsx(ds,{className:"h-[400px]",children:o.jsx("div",{className:"space-y-2",children:iP.map((N,I)=>o.jsx("div",{className:"p-3 border border-destructive/20 rounded-lg bg-destructive/5",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(_m,{className:"h-4 w-4 text-destructive mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:N.message}),N.elementId&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Element ID: ",N.elementId]})]})]})},I))})}),o.jsx("div",{className:"flex justify-end gap-2",children:o.jsx(V,{variant:"outline",onClick:()=>Mb(!1),children:"Close"})})]})]})})]})]})},Z8=oD,zN=x.forwardRef(({className:e,...t},n)=>o.jsx(Sy,{ref:n,className:ge("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));zN.displayName=Sy.displayName;const Fc=x.forwardRef(({className:e,...t},n)=>o.jsx(Ey,{ref:n,className:ge("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Fc.displayName=Ey.displayName;const zc=x.forwardRef(({className:e,...t},n)=>o.jsx(Ny,{ref:n,className:ge("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));zc.displayName=Ny.displayName;const rTe=({user:e,diagramType:t})=>{const n=_i(),{hasUsedAllPrompts:r,usePrompt:i}=wx(!!e),[a,s]=x.useState(""),[c,l]=x.useState(!1),[u,d]=x.useState(null),[h,f]=x.useState(!1),[p,m]=x.useState("en-US"),[g,v]=x.useState(null),[b,w]=x.useState(!1),[y,_]=x.useState(""),[j,S]=x.useState(!1),[E,P]=x.useState("idle"),[k,T]=x.useState("idle"),[A,R]=x.useState(!1),[L,B]=x.useState(null),[G,U]=x.useState(!1),K=x.useRef(null),te=x.useRef(null),W=x.useRef(null),fe=t==="bpmn"?["Create a customer onboarding process","Design an order fulfillment workflow","Build a support ticket resolution process","Generate an employee hiring workflow","Create an invoice approval process"]:["Create a chemical reactor cooling system","Design a water treatment process flow","Build a distillation column control loop","Generate a pump and valve configuration","Create a heat exchanger system"];x.useEffect(()=>{const ie=t==="bpmn"?"generatedBpmn":"generatedPid",Y=localStorage.getItem(ie);if(Y){d(Y),localStorage.removeItem(ie),localStorage.removeItem("diagramType");const re=t==="bpmn"?"BPMN":"P&ID";$.success(`Your generated ${re} diagram is ready!`,{description:"You can now view and edit your process diagram"}),setTimeout(()=>{var ae;(ae=document.getElementById("bpmn-viewer"))==null||ae.scrollIntoView({behavior:"smooth",block:"start"})},500)}},[t]),x.useEffect(()=>{if(!L)return;let ie;const Y=async()=>{const{data:H,error:Te}=await oe.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",L).single();if(Te){console.error("Error checking job status:",Te);return}if(console.log("Job status:",H.status),H.status==="completed"&&H.bpmn_xml){const Ee=t==="bpmn"?"BPMN":"P&ID";d(H.bpmn_xml),T("idle"),l(!1),B(null),w(!1),v(null),$.success(`${Ee} diagram generated successfully!`),setTimeout(()=>{var We;(We=document.getElementById("bpmn-viewer"))==null||We.scrollIntoView({behavior:"smooth",block:"start"})},500),ie&&clearInterval(ie)}else if(H.status==="failed"){const Ee=H.error_message||"Processing failed. Please try again.";T("idle"),l(!1),B(null),$.error("Upload failed",{description:Ee,action:{label:"Retry",onClick:()=>{}},duration:1e4}),ie&&clearInterval(ie)}},re=oe.channel(`job-${L}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${L}`},H=>{const Te=H.new;if(console.log("Realtime job status update:",Te.status),Te.status==="completed"&&Te.bpmn_xml){const Ee=t==="bpmn"?"BPMN":"P&ID";d(Te.bpmn_xml),T("idle"),l(!1),B(null),w(!1),v(null),$.success(`${Ee} diagram generated successfully!`),setTimeout(()=>{var We;(We=document.getElementById("bpmn-viewer"))==null||We.scrollIntoView({behavior:"smooth",block:"start"})},500),ie&&clearInterval(ie)}else if(Te.status==="failed"){const Ee=Te.error_message||"Processing failed. Please try again.";T("idle"),l(!1),B(null),$.error("Upload failed",{description:Ee,action:{label:"Retry",onClick:()=>{g&&jt()}},duration:1e4}),ie&&clearInterval(ie)}}).subscribe();ie=window.setInterval(Y,3e3),Y();const ae=window.setTimeout(()=>{ie&&clearInterval(ie);const H="Processing timed out - Please try refreshing the page or contact support";T("idle"),l(!1),B(null),$.error("Upload failed",{description:H,action:{label:"Retry",onClick:()=>{g&&jt()}},duration:1e4})},3e5);return()=>{clearTimeout(ae),oe.removeChannel(re),ie&&clearInterval(ie)}},[L,t,g]);const be=async ie=>{var re,ae;if(c)return;if(!ie.trim()){$.error("Please enter a process description");return}if(!e&&r){$.error("You've used all 5 free prompts. Please sign up to continue!"),n("/auth");return}if(!e&&!i()){$.error("You've used all 5 free prompts. Please sign up to continue!"),n("/auth");return}l(!0);const Y=t==="bpmn"?"BPMN":"P&ID";T("reading"),await new Promise(H=>setTimeout(H,500)),T("generating");try{const{invokeFunction:H}=await iu(async()=>{const{invokeFunction:We}=await Promise.resolve().then(()=>Kj);return{invokeFunction:We}},void 0),{data:Te,error:Ee}=await H("generate-bpmn",{prompt:ie,diagramType:t},{deduplicate:!0});if(Ee){console.error("Function error:",Ee),T("idle"),(re=Ee.message)!=null&&re.includes("429")?$.error("Rate limit exceeded. Please try again in a moment."):(ae=Ee.message)!=null&&ae.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):$.error(`Failed to generate ${Y} model`);return}T("drawing"),await new Promise(We=>setTimeout(We,500)),Te!=null&&Te.bpmnXml?(d(Te.bpmnXml),T("idle"),$.success(`${Y} model generated successfully!`)):(T("idle"),$.error("No diagram data received"))}catch(H){console.error("Error generating BPMN:",H),T("idle"),$.error("An error occurred while generating the model")}finally{l(!1)}},ne=()=>{be(a),s("")},ce=ie=>{s(ie)},we=async ie=>{var We,gt;const Y="dataTransfer"in ie?(We=ie.dataTransfer.files)==null?void 0:We[0]:(gt=ie.target.files)==null?void 0:gt[0];if(!Y)return;const{data:{user:re},error:ae}=await oe.auth.getUser();if(ae||!re){$.error("Please log in to upload and analyze documents"),n("/auth");return}if(!["image/png","image/jpeg","image/jpg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(Y.type)){$.error("Please upload an image, PDF, Word document, or text file");return}l(!0);const Te=t==="bpmn"?"BPMN":"P&ID";$.info(`Analyzing document and generating ${Te}...`);const Ee=new FileReader;Ee.onloadend=async()=>{const Jt=Ee.result;v({name:Y.name,type:Y.type,base64:Jt}),w(!0),l(!1),$.success(`File uploaded! Review the preview before generating ${Te}.`)},Ee.readAsDataURL(Y)},et=async()=>{if(h)te.current&&te.current.state==="recording"&&te.current.stop(),W.current&&(W.current.getTracks().forEach(ie=>ie.stop()),W.current=null),f(!1),te.current=null;else try{const ie=await navigator.mediaDevices.getUserMedia({audio:!0});W.current=ie;const Y=new MediaRecorder(ie),re=[];Y.ondataavailable=ae=>{re.push(ae.data)},Y.onstop=async()=>{const ae=new Blob(re,{type:"audio/webm"}),H=new FileReader;H.readAsDataURL(ae),H.onloadend=async()=>{var Ee;const Te=(Ee=H.result)==null?void 0:Ee.toString().split(",")[1];try{const{data:We,error:gt}=await oe.functions.invoke("speech-to-text",{body:{audio:Te,language:p}});if(gt)throw gt;We!=null&&We.text&&(s(We.text),$.success("Voice recorded successfully!"))}catch(We){console.error("Speech-to-text error:",We),$.error("Failed to convert speech to text.")}},W.current&&(W.current.getTracks().forEach(Te=>Te.stop()),W.current=null)},Y.start(),te.current=Y,f(!0),$.info("Recording... Click again to stop")}catch(ie){console.error("Error accessing microphone:",ie),$.error("Could not access microphone. Please check permissions.")}},jt=async()=>{if(g){l(!0),w(!1),T("reading"),await new Promise(ie=>setTimeout(ie,500)),T("generating");try{const{data:{user:ie}}=await oe.auth.getUser();if(!ie){T("idle"),$.error("Please log in to continue"),n("/auth");return}const Y=g.base64.length*.75,re=200*1024*1024;if(Y>re){T("idle"),l(!1),$.error("File too large",{description:"Maximum file size is 200 MB. Please select a smaller file."});return}const ae=$.loading("Processing your file...",{description:"This may take 30-60 seconds for complex diagrams"}),{data:H,error:Te}=await oe.functions.invoke("vision-to-bpmn",{body:{imageBase64:g.base64,diagramType:t}});if($.dismiss(ae),Te){console.error("Vision AI error:",Te),T("idle"),l(!1);const Ee=Te.message||"Failed to start diagram generation";$.error("Upload failed",{description:Ee,action:{label:"Retry",onClick:()=>{jt()}},duration:1e4});return}if(!H||!H.jobId){T("idle"),l(!1),$.error("Upload failed",{description:"Failed to start processing",action:{label:"Retry",onClick:()=>{jt()}},duration:1e4});return}B(H.jobId),T("generating"),$.info("Processing started",{description:"We'll notify you when your diagram is ready (this may take 1-2 minutes)"})}catch(ie){console.error("Vision AI processing error:",ie),T("idle"),l(!1);const Y=ie instanceof Error?ie.message:"Network error - Please check your connection and try again";$.error("Upload failed",{description:Y,action:{label:"Retry",onClick:()=>{jt()}},duration:1e4})}}},_e=async()=>{if(!u||!y.trim()){const re=t==="bpmn"?"BPMN":"P&ID";$.error(`Please enter instructions to refine the ${re}`);return}const{data:{user:ie}}=await oe.auth.getUser();if(!ie){const re=t==="bpmn"?"BPMN":"P&ID";$.error(`Please log in to refine ${re}`),n("/auth");return}S(!0);const Y=t==="bpmn"?"BPMN":"P&ID";$.info(`Refining ${Y} based on your instructions...`),P("analyzing"),await new Promise(re=>setTimeout(re,500)),P("refining");try{const{data:re,error:ae}=await oe.functions.invoke("refine-bpmn",{body:{currentBpmnXml:u,instructions:y,userId:ie.id,diagramType:t}});if(ae){console.error("Refinement error:",ae),P("idle");const H=ae.message||JSON.stringify(ae);H.includes("429")?$.error("Rate limit exceeded. Please try again in a moment."):H.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):H.includes("401")||H.includes("Authentication")?($.error("Authentication required. Please log in again."),n("/auth")):$.error(`Failed to refine ${Y}: ${H}`);return}if(re!=null&&re.error){console.error("Refinement error in response:",re.error),P("idle");const H=typeof re.error=="string"?re.error:JSON.stringify(re.error);H.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):H.includes("401")||H.includes("Authentication")?($.error("Authentication required. Please log in again."),n("/auth")):$.error(`Failed to refine ${Y}: ${H}`);return}if(re!=null&&re.bpmnXml){P("applying"),await new Promise(Te=>setTimeout(Te,300));const H=re.bpmnXml.includes("</bpmn:definitions>")||re.bpmnXml.includes("</definitions>");re.bpmnXml.includes("<?xml")&&H?(d(re.bpmnXml),P("idle"),$.success(`${Y} refined successfully!`),_("")):(console.error("Received invalid diagram XML:",re.bpmnXml.substring(0,200)),P("idle"),$.error("Received invalid diagram structure. Please try again."))}else console.error("No refined diagram received. Response:",re),P("idle"),$.error("No refined diagram received. The function may not be deployed or there was an error.")}catch(re){console.error("BPMN refinement error:",re),P("idle");const ae=re instanceof Error?re.message:String(re);ae.includes("Failed to fetch")||ae.includes("load the resource")?$.error("Network error: Unable to reach refine-bpmn function. Please check if the function is deployed."):$.error(`Failed to refine ${t==="bpmn"?"BPMN":"P&ID"}: ${ae}`)}finally{S(!1)}};return o.jsx("section",{className:"py-24 bg-muted/20 relative","data-section":"try-prossmind",children:o.jsxs("div",{className:"container mx-auto px-6",children:[o.jsxs("div",{className:"text-center mb-12 slide-up",children:[o.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Try ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"ProssMind!"})]}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:t==="bpmn"?"Describe your business process, upload an image, PDF, Word doc, or text file - AI will generate a BPMN diagram for you":"Describe your P&ID process, upload an image, PDF, Word doc, or text file - AI will generate a P&ID diagram for you"})]}),o.jsxs("div",{className:"max-w-5xl mx-auto mt-12 space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-muted/50 to-muted/30 rounded-2xl p-8 border border-border/50 slide-up stagger-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:o.jsx(wu,{className:"h-5 w-5 text-primary"})}),o.jsxs("h3",{className:"font-semibold text-lg",children:["Try these ",t==="bpmn"?"BPMN":"P&ID"," examples:"]})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:fe.map((ie,Y)=>o.jsx(V,{variant:"outline",size:"sm",onClick:()=>ce(ie),className:"text-sm hover:bg-primary/10 hover:border-primary/50 transition-all whitespace-nowrap",disabled:c,style:{minWidth:"max-content",paddingLeft:"1.2em",paddingRight:"1.2em"},"aria-label":`Use suggestion: ${ie}`,children:ie},Y))})]}),o.jsx("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl slide-up stagger-2",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Z8,{defaultValue:"prompt",className:"w-full",children:[o.jsxs(zN,{className:"grid w-full grid-cols-3 bg-muted/50",children:[o.jsxs(Fc,{value:"prompt",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(Rj,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Prompt"})]}),o.jsxs(Fc,{value:"voice",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(Ch,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Voice"})]}),o.jsxs(Fc,{value:"attachment",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(Ah,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Attachment"})]})]}),o.jsx(zc,{value:"prompt",className:"mt-4",children:o.jsx(vi,{placeholder:`Describe your ${t==="bpmn"?"business process":"P&ID process"} step by step...`,value:a,onChange:ie=>s(ie.target.value),className:"min-h-[120px] resize-none border-muted",style:{paddingLeft:"1.2em",paddingRight:"1.2em"},disabled:c})}),o.jsx(zc,{value:"voice",className:"mt-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rw,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs(Ss,{value:p,onValueChange:m,children:[o.jsx(La,{className:"w-[200px] h-8",children:o.jsx(Es,{placeholder:"Select language"})}),o.jsxs(Ba,{children:[o.jsx(Be,{value:"en-US",children:"English (US)"}),o.jsx(Be,{value:"en-GB",children:"English (UK)"}),o.jsx(Be,{value:"es-ES",children:"Spanish"}),o.jsx(Be,{value:"fr-FR",children:"French"}),o.jsx(Be,{value:"de-DE",children:"German"}),o.jsx(Be,{value:"it-IT",children:"Italian"}),o.jsx(Be,{value:"pt-BR",children:"Portuguese (Brazil)"}),o.jsx(Be,{value:"pt-PT",children:"Portuguese (Portugal)"}),o.jsx(Be,{value:"ru-RU",children:"Russian"}),o.jsx(Be,{value:"ja-JP",children:"Japanese"}),o.jsx(Be,{value:"ko-KR",children:"Korean"}),o.jsx(Be,{value:"zh-CN",children:"Chinese (Simplified)"}),o.jsx(Be,{value:"zh-TW",children:"Chinese (Traditional)"}),o.jsx(Be,{value:"ar-SA",children:"Arabic"}),o.jsx(Be,{value:"hi-IN",children:"Hindi"})]})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Voice recognition language"})]}),o.jsx(V,{variant:"outline",onClick:et,disabled:c,className:h?"text-red-500 border-red-500":"w-full",children:h?o.jsxs(o.Fragment,{children:[o.jsx($w,{className:"h-4 w-4 mr-2 animate-pulse"}),"Click to Stop Recording"]}):o.jsxs(o.Fragment,{children:[o.jsx(Ch,{className:"h-4 w-4 mr-2"}),"Start Voice Recording"]})})]})}),o.jsx(zc,{value:"attachment",className:"mt-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{ref:K,type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:we,className:"hidden"}),o.jsxs("div",{onDragOver:ie=>{ie.preventDefault(),U(!0)},onDragLeave:()=>U(!1),onDrop:ie=>{ie.preventDefault(),U(!1),we(ie)},className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${G?"border-primary bg-primary/5 scale-[1.02]":"border-border hover:border-primary/50"}`,children:[o.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx($i,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PNG/JPG"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Mn,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PDF"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Ow,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"DOCX"})]})]}),o.jsxs(V,{variant:"outline",onClick:()=>{var ie;return(ie=K.current)==null?void 0:ie.click()},disabled:c,className:"w-full","aria-label":"Upload file",children:[o.jsx(Ah,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload File"]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Drag and drop a file here or click to browse"})]})]})})]}),c&&k!=="idle"&&o.jsxs("div",{className:"space-y-3 p-4 bg-muted/50 rounded-lg border border-border",children:[o.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Processing your document..."}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:k==="reading"?"font-semibold":"text-muted-foreground",children:[k==="reading"&&o.jsx(tr,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),k!=="reading"&&" ","Step 1: Reading prompt..."]}),k==="reading"&&o.jsx(Oi,{value:33,className:"w-24","aria-label":"Progress: 33%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:k==="generating"?"font-semibold":k==="drawing"?"text-muted-foreground":"",children:[k==="generating"&&o.jsx(tr,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),k!=="generating"&&k!=="reading"&&" ","Step 2: Generating..."]}),k==="generating"&&o.jsx(Oi,{value:66,className:"w-24","aria-label":"Progress: 66%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:k==="drawing"?"font-semibold":"text-muted-foreground",children:[k==="drawing"&&o.jsx(tr,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),k!=="drawing"&&k!=="generating"&&k!=="reading"&&" ","Step 3: Drawing Diagram..."]}),k==="drawing"&&o.jsx(Oi,{value:100,className:"w-24","aria-label":"Progress: 100%"})]})]}),o.jsxs(V,{onClick:ne,className:"gap-2 shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all w-full",size:"lg",disabled:c||!a.trim(),"aria-label":`Generate ${t==="bpmn"?"BPMN":"P&ID"} diagram`,children:[c?"Generating...":`Generate ${t==="bpmn"?"BPMN":"P&ID"}`,o.jsx(Pg,{className:"h-4 w-4","aria-hidden":"true"})]})]})}),b&&g&&o.jsxs("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Preview Uploaded File"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[o.jsxs("p",{className:"text-sm font-medium mb-2",children:["File: ",g.name]}),g.type.startsWith("image/")&&o.jsx("div",{className:"mt-4 max-h-96 overflow-auto",children:o.jsx("img",{src:g.base64,alt:"Preview",className:"max-w-full rounded border"})}),g.extractedText&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Extracted Content Preview:"}),o.jsx("div",{className:"bg-background rounded p-3 max-h-48 overflow-auto text-xs",children:g.extractedText})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{onClick:jt,className:"flex-1",disabled:c,children:c?"Generating...":`Generate ${t==="bpmn"?"BPMN":"P&ID"} from this file`}),o.jsx(V,{variant:"outline",onClick:()=>{w(!1),v(null)},children:"Cancel"})]})]})]}),u&&o.jsx("div",{id:"bpmn-viewer",className:"mt-12",children:o.jsx(FN,{xml:u,onSave:d,diagramType:t,onRefine:()=>R(!0)})}),o.jsx(Jn,{open:A,onOpenChange:R,children:o.jsxs(Fn,{className:"sm:max-w-[500px]",children:[o.jsxs(zn,{children:[o.jsxs(Un,{children:["Refine ",t==="bpmn"?"BPMN":"P&ID"," Diagram"]}),o.jsxs(Hn,{children:["Describe the changes you'd like to make to your ",t==="bpmn"?"BPMN":"P&ID"," diagram"]})]}),o.jsx(vi,{value:y,onChange:ie=>_(ie.target.value),placeholder:`e.g., "Add a ${t==="bpmn"?"decision gateway":"control valve"} after the first ${t==="bpmn"?"task":"process unit"}"`,className:"min-h-[120px]"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx(V,{variant:"outline",onClick:()=>{R(!1),_("")},children:"Cancel"}),o.jsx(V,{onClick:_e,disabled:j||!y.trim(),children:j?"Refining...":"Apply Changes"})]})]})})]})]})})};async function iTe(e){const{data:t,error:n}=await oe.from("vision_bpmn_jobs").select("bpmn_xml").eq("id",e).single();return n||!(t!=null&&t.bpmn_xml)?(console.error("Failed to load job result:",n),null):t.bpmn_xml}function aTe(){const[e,t]=x.useState(null),[n,r]=x.useState(null),{jobId:i}=TU();return x.useEffect(()=>{oe.auth.getSession().then(({data:{session:s}})=>{r((s==null?void 0:s.user)??null)});const{data:{subscription:a}}=oe.auth.onAuthStateChange((s,c)=>{r((c==null?void 0:c.user)??null)});return()=>a.unsubscribe()},[]),x.useEffect(()=>{i&&(async()=>{try{const s=await iTe(i);t(s)}catch(s){console.error("Error loading job result:",s)}})()},[i]),o.jsx(Mt,{children:o.jsxs("div",{className:"flex flex-col gap-8",children:[o.jsx(rTe,{user:n,diagramType:"pid"}),e&&o.jsx(FN,{xml:e,diagramType:"pid"})]})})}async function sTe(e){try{const{data:t,error:n}=await oe.from("projects").insert(e).select().single();return n?{data:null,error:new Error(n.message)}:{data:t,error:null}}catch(t){return{data:null,error:t instanceof Error?t:new Error("Unknown error")}}}async function oTe(e,t){try{let n=oe.from("projects").select("*").eq("user_id",e).order("last_accessed_at",{ascending:!1});t!=null&&t.diagramType&&t.diagramType!=="all"&&(n=n.eq("diagram_type",t.diagramType));const{data:r,error:i}=await n;return i?{data:null,error:new Error(i.message)}:{data:r,error:null}}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}async function cTe(e,t,n){try{const{data:r,error:i}=await oe.from("projects").update(n).eq("id",e).eq("user_id",t).select().single();return i?{data:null,error:new Error(i.message)}:{data:r,error:null}}catch(r){return{data:null,error:r instanceof Error?r:new Error("Unknown error")}}}async function lTe(e,t){try{const{error:n}=await oe.from("projects").delete().eq("id",e).eq("user_id",t);return n?{error:new Error(n.message)}:{error:null}}catch(n){return{error:n instanceof Error?n:new Error("Unknown error")}}}async function J8(e,t){try{const{error:n}=await oe.from("projects").update({last_accessed_at:new Date().toISOString()}).eq("id",e).eq("user_id",t);return n?{error:new Error(n.message)}:{error:null}}catch(n){return{error:n instanceof Error?n:new Error("Unknown error")}}}async function uTe(e,t=6){try{const{data:n,error:r}=await oe.from("projects").select("*").eq("user_id",e).order("last_accessed_at",{ascending:!1}).limit(t);return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}const w$=({user:e})=>{const t=_i(),{remainingPrompts:n,isUnlimited:r}=wx(!0),[i,a]=x.useState([]),[s,c]=x.useState(!0);x.useEffect(()=>{const u=async()=>{c(!0);const{data:d,error:h}=await uTe(e.id,6);h?(console.error("Failed to load recent projects:",h),a([])):d&&a(d),c(!1)};e!=null&&e.id&&u()},[e==null?void 0:e.id]);const l=async u=>{await J8(u.id,e.id);const d=u.diagram_type==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(d,u.bpmn_xml),localStorage.setItem("diagramType",u.diagram_type),localStorage.setItem("currentProjectId",u.id);const h=u.diagram_type==="bpmn"?"/bpmn-generator":"/pid-generator";er(t,h)};return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Dashboard"}),o.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",e.email]})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[o.jsxs(xe,{className:"cursor-pointer hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 flex flex-col",onClick:()=>er(t,"/bpmn-generator"),children:[o.jsxs(Ne,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx(bi,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(Pe,{children:"New BPMN Diagram"})]}),o.jsx($e,{className:"text-center",children:"Create a new business process diagram"})]}),o.jsx(Se,{className:"mt-auto",children:o.jsxs(V,{className:"w-full",onClick:u=>{u.stopPropagation(),er(t,"/bpmn-generator")},children:[o.jsx(Th,{className:"h-4 w-4 mr-2"}),"Create BPMN"]})})]}),o.jsxs(xe,{className:"cursor-pointer hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 flex flex-col",onClick:()=>er(t,"/pid-generator"),children:[o.jsxs(Ne,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx(Gc,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(Pe,{children:"New P&ID Diagram"})]}),o.jsx($e,{className:"text-center",children:"Create a new piping and instrumentation diagram"})]}),o.jsx(Se,{className:"mt-auto",children:o.jsxs(V,{className:"w-full",onClick:u=>{u.stopPropagation(),er(t,"/pid-generator")},children:[o.jsx(Th,{className:"h-4 w-4 mr-2"}),"Create P&ID"]})})]}),o.jsxs(xe,{className:"cursor-pointer hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 flex flex-col",onClick:()=>er(t,"/vision-ai"),children:[o.jsxs(Ne,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx(ya,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(Pe,{children:"Vision AI"})]}),o.jsx($e,{className:"text-center",children:"Upload images to generate diagrams"})]}),o.jsx(Se,{className:"mt-auto",children:o.jsxs(V,{className:"w-full",onClick:u=>{u.stopPropagation(),er(t,"/vision-ai")},children:[o.jsx(Th,{className:"h-4 w-4 mr-2"}),"Upload Image"]})})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs(xe,{className:"flex flex-col hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:[o.jsxs(Ne,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx("div",{className:"h-10 w-10 mb-4 flex items-center justify-center",children:o.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx("span",{className:"text-primary font-bold text-xl",children:""})})}),o.jsx(Pe,{children:"Usage Statistics"})]}),o.jsx($e,{className:"text-center",children:"Your current plan usage"})]}),o.jsxs(Se,{className:"flex-1 flex flex-col",children:[o.jsxs("div",{className:"space-y-4 flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Free Prompts Remaining"}),o.jsx("span",{className:"text-2xl font-bold",children:r?"":n})]}),!r&&o.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:o.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${n/5*100}%`}})})]}),o.jsx("div",{className:"mt-auto pt-4",children:o.jsx(V,{variant:"outline",className:"w-full",onClick:()=>er(t,"/settings"),children:"View Plan Details"})})]})]}),o.jsxs(xe,{className:"flex flex-col hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:[o.jsxs(Ne,{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[o.jsx("div",{className:"h-10 w-10 mb-4 flex items-center justify-center",children:o.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx(Tj,{className:"h-5 w-5 text-primary"})})}),o.jsx(Pe,{children:"Recent Projects"})]}),o.jsx($e,{className:"text-center",children:"Your recently created diagrams"})]}),o.jsxs(Se,{className:"flex-1 flex flex-col",children:[o.jsx("div",{className:"flex-1",children:s?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(tr,{className:"h-6 w-6 animate-spin text-primary"})}):i.length>0?o.jsx("div",{className:"space-y-3",children:i.map(u=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>l(u),children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[u.diagram_type==="bpmn"?o.jsx(bi,{className:"h-4 w-4 text-primary flex-shrink-0"}):o.jsx(Gc,{className:"h-4 w-4 text-primary flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm truncate",children:u.name}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.diagram_type==="bpmn"?"BPMN":"P&ID","  ",new Date(u.last_accessed_at).toLocaleDateString()]})]})]}),o.jsx(Mn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]},u.id))}):o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(Mn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No recent projects"}),o.jsx("p",{className:"text-sm mt-2",children:"Create your first diagram to get started"})]})}),o.jsx("div",{className:"mt-auto pt-4",children:o.jsx(V,{variant:"outline",className:"w-full",onClick:()=>er(t,"/projects"),children:"View All Projects"})})]})]})]})]})})},dTe=({user:e})=>{const t=_i(),[n,r]=x.useState([]),[i,a]=x.useState([]),[s,c]=x.useState(""),[l,u]=x.useState("all"),[d,h]=x.useState(!0),[f,p]=x.useState(!1),[m,g]=x.useState(null),[v,b]=x.useState(!1),w=async()=>{h(!0);const S=l!=="all"?{diagramType:l}:void 0,{data:E,error:P}=await oTe(e.id,S);if(P){$.error("Failed to load projects"),console.error(P),h(!1);return}E&&r(E),h(!1)};x.useEffect(()=>{w()},[e.id,l]),x.useEffect(()=>{let S=n;s&&(S=S.filter(E=>{var P;return E.name.toLowerCase().includes(s.toLowerCase())||((P=E.description)==null?void 0:P.toLowerCase().includes(s.toLowerCase()))})),a(S)},[n,s]);const y=S=>{g(S),p(!0)},_=async()=>{if(!m)return;b(!0);const{error:S}=await lTe(m.id,e.id);S?($.error("Failed to delete project"),console.error(S)):($.success("Project deleted successfully"),await w()),b(!1),p(!1),g(null)},j=async S=>{await J8(S.id,e.id);const E=S.diagram_type==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(E,S.bpmn_xml),localStorage.setItem("diagramType",S.diagram_type),localStorage.setItem("currentProjectId",S.id);const P=S.diagram_type==="bpmn"?"/bpmn-generator":"/pid-generator";er(t,P)};return d?o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsx(Mt,{children:o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsx(tr,{className:"h-8 w-8 animate-spin text-primary"})})})}):o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Projects"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your diagrams and processes"})]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:w,disabled:d,children:[o.jsx(fW,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]})]})}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Zh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(vn,{placeholder:"Search projects...",value:s,onChange:S=>c(S.target.value),className:"pl-10"})]}),o.jsxs(Ss,{value:l,onValueChange:S=>u(S),children:[o.jsx(La,{className:"w-full md:w-[180px]",children:o.jsx(Es,{placeholder:"Filter by type"})}),o.jsxs(Ba,{children:[o.jsx(Be,{value:"all",children:"All Types"}),o.jsx(Be,{value:"bpmn",children:"BPMN"}),o.jsx(Be,{value:"pid",children:"P&ID"})]})]}),o.jsxs(V,{onClick:()=>er(t,"/bpmn-generator"),children:[o.jsx(Mn,{className:"h-4 w-4 mr-2"}),"New Project"]})]}),i.length>0?o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(S=>o.jsxs(xe,{className:"hover:shadow-lg transition-shadow",children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[S.diagram_type==="bpmn"?o.jsx(bi,{className:"h-6 w-6 text-primary flex-shrink-0"}):o.jsx(Gc,{className:"h-6 w-6 text-primary flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx(Pe,{className:"text-lg truncate",children:S.name}),o.jsx($e,{children:new Date(S.created_at).toLocaleDateString()}),S.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:S.description})]})]}),o.jsx(mn,{variant:S.diagram_type==="bpmn"?"default":"secondary",className:"ml-2 flex-shrink-0",children:S.diagram_type.toUpperCase()})]})}),o.jsx(Se,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>j(S),children:[o.jsx($j,{className:"h-4 w-4 mr-2"}),"Edit"]}),o.jsx(V,{variant:"outline",size:"sm",onClick:()=>y(S),children:o.jsx(cp,{className:"h-4 w-4"})})]})})]},S.id))}):o.jsx(xe,{children:o.jsxs(Se,{className:"flex flex-col items-center justify-center py-16",children:[o.jsx(Mn,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No projects found"}),o.jsx("p",{className:"text-muted-foreground text-center mb-6",children:s||l!=="all"?"Try adjusting your search or filters":"Create your first diagram to get started"}),o.jsxs(V,{onClick:()=>er(t,"/bpmn-generator"),children:[o.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Create New Project"]})]})}),o.jsx(BN,{open:f,onOpenChange:p,children:o.jsxs(gb,{children:[o.jsxs(vb,{children:[o.jsx(xb,{children:"Are you sure?"}),o.jsxs(bb,{children:['This will permanently delete "',m==null?void 0:m.name,'". This action cannot be undone.']})]}),o.jsxs(yb,{children:[o.jsx(_b,{disabled:v,children:"Cancel"}),o.jsx(wb,{onClick:_,disabled:v,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:v?o.jsxs(o.Fragment,{children:[o.jsx(tr,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})})};async function hTe(e){try{let t=oe.from("templates").select("*").eq("is_active",!0).order("name",{ascending:!0});e!=null&&e.category&&e.category,e!=null&&e.diagramType;const{data:n,error:r}=await t;return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(t){return{data:null,error:t instanceof Error?t:new Error("Unknown error")}}}async function fTe(e,t){try{const{data:n,error:r}=await oe.from("templates").select("bpmn_xml, usage_count").eq("id",e).eq("is_active",!0).single();return r||!n?{data:null,error:new Error((r==null?void 0:r.message)||"Template not found")}:(oe.from("templates").update({usage_count:(n.usage_count||0)+1}).eq("id",e).then(()=>{},()=>{}),{data:n.bpmn_xml,error:null})}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}async function pTe(e){try{const{data:t,error:n}=await oe.from("templates").insert(e).select().single();return n?{data:null,error:new Error(n.message)}:{data:t,error:null}}catch(t){return{data:null,error:t instanceof Error?t:new Error("Unknown error")}}}async function mTe(e,t){try{const{data:n,error:r}=await oe.from("templates").update(t).eq("id",e).select().single();return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(n){return{data:null,error:n instanceof Error?n:new Error("Unknown error")}}}async function gTe(e){try{const{error:t}=await oe.from("templates").update({is_active:!1}).eq("id",e);return t?{error:new Error(t.message)}:{error:null}}catch(t){return{error:t instanceof Error?t:new Error("Unknown error")}}}async function vTe(e){try{let t=oe.from("templates").select("*").order("created_at",{ascending:!1});e!=null&&e.category&&e.category,e!=null&&e.diagramType;const{data:n,error:r}=await t;return r?{data:null,error:new Error(r.message)}:{data:n,error:null}}catch(t){return{data:null,error:t instanceof Error?t:new Error("Unknown error")}}}const yTe={Users:Cg,ShoppingCart:xW,Building2:Aj,Cog:WG,Factory:Gc,Workflow:bi},xTe=e=>e&&yTe[e]||bi,bTe=({user:e})=>{const t=_i(),[n,r]=x.useState("all"),[i,a]=x.useState([]),[s,c]=x.useState(!0),[l,u]=x.useState(null);x.useEffect(()=>{(async()=>{c(!0),u(null);const{data:m,error:g}=await hTe();g?(u(g.message),$.error("Failed to load templates")):m&&a(m),c(!1)})()},[]);const d=["all",...Array.from(new Set(i.map(p=>p.category)))],h=n==="all"?i:i.filter(p=>p.category===n),f=async p=>{try{const{data:m,error:g}=await fTe(p.id,e.id);if(g||!m){$.error("Failed to load template");return}const v=p.diagram_type==="bpmn"?"generatedBpmn":"generatedPid";localStorage.setItem(v,m),localStorage.setItem("diagramType",p.diagram_type),p.diagram_type==="bpmn"?er(t,"/bpmn-generator"):er(t,"/pid-generator"),$.success("Template loaded successfully!")}catch(m){$.error("Failed to use template"),console.error(m)}};return s?o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsx(Mt,{children:o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsx(tr,{className:"h-8 w-8 animate-spin text-primary"})})})}):l?o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsx(Mt,{children:o.jsx(xe,{className:"hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:o.jsxs(Se,{className:"flex flex-col items-center justify-center py-16",children:[o.jsx(bi,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Error loading templates"}),o.jsx("p",{className:"text-muted-foreground",children:l})]})})})}):o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Templates"}),o.jsx("p",{className:"text-muted-foreground",children:"Start with a pre-built process template"})]}),d.length>1&&o.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:d.map(p=>o.jsx(V,{variant:n===p?"default":"outline",onClick:()=>r(p),className:"capitalize",children:p},p))}),h.length>0?o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(p=>{const m=xTe(p.icon_name);return o.jsxs(xe,{className:"flex flex-col hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:[o.jsxs(Ne,{className:"flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx(m,{className:"h-8 w-8 text-primary flex-shrink-0"}),o.jsx(mn,{variant:p.diagram_type==="bpmn"?"default":"secondary",children:p.diagram_type.toUpperCase()})]}),o.jsx(Pe,{className:"mb-2 min-h-[3rem]",children:p.name}),o.jsx($e,{className:"min-h-[4.5rem] max-h-[4.5rem] overflow-hidden",children:o.jsx("div",{className:"line-clamp-3",children:p.description||"No description available"})})]}),o.jsx(Se,{className:"mt-auto pt-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx(mn,{variant:"outline",className:"capitalize flex-shrink-0",children:p.category}),o.jsx(V,{size:"sm",onClick:()=>f(p),className:"flex-shrink-0",children:"Use Template"})]})})]},p.id)})}):o.jsx(xe,{className:"hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05),0_0_20px_hsl(var(--primary)/0.3)] hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300",children:o.jsxs(Se,{className:"flex flex-col items-center justify-center py-16",children:[o.jsx(bi,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No templates found"}),o.jsx("p",{className:"text-muted-foreground",children:"Try selecting a different category"})]})})]})})},wTe=({user:e})=>{const{toast:t}=lp(),[n,r]=x.useState(e.email||""),[i,a]=x.useState(!1),s=async c=>{c.preventDefault(),a(!0);try{const{error:l}=await oe.auth.updateUser({email:n});if(l)throw l;t({title:"Email update requested",description:"Please check your new email for a confirmation link."})}catch(l){t({title:"Error updating email",description:l.message,variant:"destructive"})}finally{a(!1)}};return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Account"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your account information"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(Jh,{className:"h-5 w-5"}),"Profile Information"]}),o.jsx($e,{children:"Your account details"})]}),o.jsxs(Se,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Et,{children:"User ID"}),o.jsx(vn,{value:e.id,disabled:!0,className:"mt-1 font-mono text-sm"})]}),o.jsxs("form",{onSubmit:s,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Et,{htmlFor:"email",children:"Email Address"}),o.jsx(vn,{id:"email",type:"email",value:n,onChange:c=>r(c.target.value),className:"mt-1"})]}),o.jsx(V,{type:"submit",disabled:i||n===e.email,children:i?"Updating...":"Update Email"})]})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(Cs,{className:"h-5 w-5"}),"Security"]}),o.jsx($e,{children:"Manage your account security"})]}),o.jsxs(Se,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Et,{children:"Password"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1 mb-3",children:"Change your password to keep your account secure"}),o.jsx(V,{variant:"outline",onClick:()=>{t({title:"Password reset",description:"A password reset link has been sent to your email."})},children:"Change Password"})]}),o.jsxs("div",{className:"pt-4 border-t",children:[o.jsx(Et,{children:"Account Created"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:new Date(e.created_at).toLocaleDateString()})]})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(Oj,{className:"h-5 w-5"}),"Email Preferences"]}),o.jsx($e,{children:"Manage your email notifications"})]}),o.jsx(Se,{children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"Email preferences will be available soon."})})]})]})]})})},_Te=({user:e})=>{const{remainingPrompts:t,isUnlimited:n}=wx(!0),[r,i]=x.useState({email:!0,push:!1,updates:!0}),[a,s]=x.useState("en"),[c,l]=x.useState("system");return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Customize your experience"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Plan Details"}),o.jsx($e,{children:"Your current subscription plan"})]}),o.jsxs(Se,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Et,{children:"Current Plan"}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:n?"Pro":"Free"})]}),o.jsxs("div",{children:[o.jsx(Et,{children:"Free Prompts Remaining"}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:n?"":t})]}),o.jsx(V,{className:"w-full",children:"Upgrade Plan"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(DG,{className:"h-5 w-5"}),"Notifications"]}),o.jsx($e,{children:"Manage your notification preferences"})]}),o.jsxs(Se,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Et,{children:"Email Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive updates via email"})]}),o.jsx(Ns,{checked:r.email,onCheckedChange:u=>i({...r,email:u})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Et,{children:"Push Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive browser notifications"})]}),o.jsx(Ns,{checked:r.push,onCheckedChange:u=>i({...r,push:u})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Et,{children:"Product Updates"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about new features"})]}),o.jsx(Ns,{checked:r.updates,onCheckedChange:u=>i({...r,updates:u})})]})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(op,{className:"h-5 w-5"}),"API Keys"]}),o.jsx($e,{children:"Manage your API access keys"})]}),o.jsxs(Se,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"API keys allow you to integrate ProssMind with your applications."}),o.jsx(V,{variant:"outline",className:"w-full",children:"Generate API Key"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(yy,{className:"h-5 w-5"}),"Preferences"]}),o.jsx($e,{children:"Customize your app experience"})]}),o.jsxs(Se,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Et,{htmlFor:"language",children:"Language"}),o.jsxs(Ss,{value:a,onValueChange:s,children:[o.jsx(La,{id:"language",className:"mt-1",children:o.jsx(Es,{})}),o.jsxs(Ba,{children:[o.jsx(Be,{value:"en",children:"English"}),o.jsx(Be,{value:"de",children:"Deutsch"}),o.jsx(Be,{value:"fr",children:"Franais"})]})]})]}),o.jsxs("div",{children:[o.jsx(Et,{htmlFor:"theme",children:"Theme"}),o.jsxs(Ss,{value:c,onValueChange:l,children:[o.jsx(La,{id:"theme",className:"mt-1",children:o.jsx(Es,{})}),o.jsxs(Ba,{children:[o.jsx(Be,{value:"light",children:"Light"}),o.jsx(Be,{value:"dark",children:"Dark"}),o.jsx(Be,{value:"system",children:"System"})]})]})]})]})]})]})]})})};function jTe({open:e,onOpenChange:t,onSave:n,diagramType:r="bpmn",defaultName:i="",defaultDescription:a="",isLoading:s=!1}){const[c,l]=x.useState(""),[u,d]=x.useState("");x.useEffect(()=>{e&&(l(i||""),d(a||""))},[e,i,a]);const h=()=>{c.trim()&&n(c.trim(),u.trim())},f=()=>{l(""),d(""),t(!1)},p=r==="bpmn"?"BPMN":"P&ID";return o.jsx(Jn,{open:e,onOpenChange:t,children:o.jsxs(Fn,{children:[o.jsxs(zn,{children:[o.jsxs(Un,{children:["Save ",p," Project"]}),o.jsx(Hn,{children:"Give your project a name and optional description to save it to your workspace."})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Et,{htmlFor:"project-name",children:["Project Name ",o.jsx("span",{className:"text-destructive",children:"*"})]}),o.jsx(vn,{id:"project-name",placeholder:`My ${p} Diagram`,value:c,onChange:m=>l(m.target.value),onKeyDown:m=>{m.key==="Enter"&&c.trim()&&h()},maxLength:100,disabled:s})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Et,{htmlFor:"project-description",children:"Description (Optional)"}),o.jsx(vi,{id:"project-description",placeholder:"Add a description for your project...",value:u,onChange:m=>d(m.target.value),maxLength:500,rows:3,disabled:s})]})]}),o.jsxs(Rg,{children:[o.jsx(V,{variant:"outline",onClick:f,disabled:s,children:"Cancel"}),o.jsx(V,{onClick:h,disabled:!c.trim()||s,children:s?"Saving...":"Save Project"})]})]})})}const STe=["Create a customer onboarding process","Design an order fulfillment workflow","Build a support ticket resolution process","Generate an employee hiring workflow","Create an invoice approval process"],_$=({user:e})=>{const t=_i(),n=Va(),{hasUsedAllPrompts:r,usePrompt:i}=wx(!!e),[a,s]=x.useState(""),[c,l]=x.useState(!1),[u,d]=x.useState(null),[h,f]=x.useState("bpmn"),p=IW(),[m,g]=x.useState(!1),[v,b]=x.useState("en-US"),[w,y]=x.useState(null),[_,j]=x.useState(!1),[S,E]=x.useState(""),[P,k]=x.useState(!1),[T,A]=x.useState("idle"),[R,L]=x.useState("idle"),[B,G]=x.useState(!1),[U,K]=x.useState(null),[te,W]=x.useState(!1),fe=x.useRef(null),be=x.useRef(null),ne=x.useRef(null),[ce,we]=x.useState(!1),[et,jt]=x.useState(null),[_e,ie]=x.useState(!1),[Y,re]=x.useState(null);x.useEffect(()=>{const le=localStorage.getItem("diagramType")||"bpmn",ze=le==="bpmn"?"generatedBpmn":"generatedPid",Le=localStorage.getItem(ze),mt=localStorage.getItem("currentProjectId");if(Le){d(Le),jt(mt),localStorage.removeItem(ze),localStorage.removeItem("diagramType"),mt&&localStorage.removeItem("currentProjectId");const He=le==="bpmn"?"BPMN":"P&ID";$.success(`Your generated ${He} diagram is ready!`,{description:"You can now view and edit your process diagram"}),setTimeout(()=>{var Ye;(Ye=document.getElementById("bpmn-viewer"))==null||Ye.scrollIntoView({behavior:"smooth",block:"start"})},500)}},[]),x.useEffect(()=>{if(!U)return;let le;const ze=async()=>{const{data:He,error:Ye}=await oe.from("vision_bpmn_jobs").select("status, bpmn_xml, error_message").eq("id",U).single();if(Ye){console.error("Error checking job status:",Ye);return}if(console.log("Job status:",He.status),He.status==="completed"&&He.bpmn_xml){const At=h==="bpmn"?"BPMN":"P&ID";d(He.bpmn_xml),L("idle"),l(!1),K(null),j(!1),y(null),$.success(`${At} diagram generated successfully!`),setTimeout(()=>{var Tt;(Tt=document.getElementById("bpmn-viewer"))==null||Tt.scrollIntoView({behavior:"smooth",block:"start"})},500),le&&clearInterval(le)}else if(He.status==="failed"){const At=He.error_message||"Processing failed. Please try again.";L("idle"),l(!1),K(null),$.error("Upload failed",{description:At,action:{label:"Retry",onClick:()=>{}},duration:1e4}),le&&clearInterval(le)}},Le=oe.channel(`job-${U}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_bpmn_jobs",filter:`id=eq.${U}`},He=>{const Ye=He.new;if(console.log("Realtime job status update:",Ye.status),Ye.status==="completed"&&Ye.bpmn_xml){const At=h==="bpmn"?"BPMN":"P&ID";d(Ye.bpmn_xml),L("idle"),l(!1),K(null),j(!1),y(null),$.success(`${At} diagram generated successfully!`),e&&(re(Ye.bpmn_xml),we(!0)),setTimeout(()=>{var Tt;(Tt=document.getElementById("bpmn-viewer"))==null||Tt.scrollIntoView({behavior:"smooth",block:"start"})},500),le&&clearInterval(le)}else if(Ye.status==="failed"){const At=Ye.error_message||"Processing failed. Please try again.";L("idle"),l(!1),K(null),$.error("Upload failed",{description:At,action:{label:"Retry",onClick:()=>{w&&gt()}},duration:1e4}),le&&clearInterval(le)}}).subscribe();le=window.setInterval(ze,3e3),ze();const mt=window.setTimeout(()=>{le&&clearInterval(le);const He="Processing timed out - Please try refreshing the page or contact support";L("idle"),l(!1),K(null),$.error("Upload failed",{description:He,action:{label:"Retry",onClick:()=>{w&&gt()}},duration:1e4})},3e5);return()=>{clearTimeout(mt),oe.removeChannel(Le),le&&clearInterval(le)}},[U,h,w]);const ae=async le=>{var Le,mt;if(c)return;if(!le.trim()){$.error("Please enter a process description");return}if(!e&&r){$.error("You've used all 5 free prompts. Please sign up to continue!"),t("/auth");return}if(!e&&!i()){$.error("You've used all 5 free prompts. Please sign up to continue!"),t("/auth");return}l(!0);const ze=h==="bpmn"?"BPMN":"P&ID";L("reading"),await new Promise(He=>setTimeout(He,500)),L("generating");try{const{invokeFunction:He}=await iu(async()=>{const{invokeFunction:Tt}=await Promise.resolve().then(()=>Kj);return{invokeFunction:Tt}},void 0),{data:Ye,error:At}=await He("generate-bpmn",{prompt:le,diagramType:h},{deduplicate:!0});if(At){console.error("Function error:",At),L("idle"),(Le=At.message)!=null&&Le.includes("429")?$.error("Rate limit exceeded. Please try again in a moment."):(mt=At.message)!=null&&mt.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):$.error(`Failed to generate ${ze} model`);return}L("drawing"),await new Promise(Tt=>setTimeout(Tt,500)),Ye!=null&&Ye.bpmnXml?(d(Ye.bpmnXml),L("idle"),$.success(`${ze} model generated successfully!`),e&&(re(Ye.bpmnXml),we(!0))):(L("idle"),$.error("No diagram data received"))}catch(He){console.error("Error generating BPMN:",He),L("idle"),$.error("An error occurred while generating the model")}finally{l(!1)}},H=()=>{ae(a),s("")},Te=le=>{s(le)},Ee=async le=>{var Tt,Rn;const ze="dataTransfer"in le?(Tt=le.dataTransfer.files)==null?void 0:Tt[0]:(Rn=le.target.files)==null?void 0:Rn[0];if(!ze)return;const{data:{user:Le},error:mt}=await oe.auth.getUser();if(mt||!Le){$.error("Please log in to upload and analyze documents"),t("/auth");return}if(!["image/png","image/jpeg","image/jpg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(ze.type)){$.error("Please upload an image, PDF, Word document, or text file");return}l(!0);const Ye=h==="bpmn"?"BPMN":"P&ID";$.info(`Analyzing document and generating ${Ye}...`);const At=new FileReader;At.onloadend=async()=>{const Za=At.result;y({name:ze.name,type:ze.type,base64:Za}),j(!0),l(!1),$.success(`File uploaded! Review the preview before generating ${Ye}.`)},At.readAsDataURL(ze)},We=async()=>{if(m)be.current&&be.current.state==="recording"&&be.current.stop(),ne.current&&(ne.current.getTracks().forEach(le=>le.stop()),ne.current=null),g(!1),be.current=null;else try{const le=await navigator.mediaDevices.getUserMedia({audio:!0});ne.current=le;const ze=new MediaRecorder(le),Le=[];ze.ondataavailable=mt=>{Le.push(mt.data)},ze.onstop=async()=>{const mt=new Blob(Le,{type:"audio/webm"}),He=new FileReader;He.readAsDataURL(mt),He.onloadend=async()=>{var At;const Ye=(At=He.result)==null?void 0:At.toString().split(",")[1];try{const{data:Tt,error:Rn}=await oe.functions.invoke("speech-to-text",{body:{audio:Ye,language:v},headers:e?void 0:{Authorization:""}});if(Rn)throw Rn;Tt!=null&&Tt.text&&(s(Tt.text),$.success("Voice recorded successfully!"))}catch(Tt){console.error("Speech-to-text error:",Tt),$.error("Failed to convert speech to text.")}},ne.current&&(ne.current.getTracks().forEach(Ye=>Ye.stop()),ne.current=null)},ze.start(),be.current=ze,g(!0),$.info("Recording... Click again to stop")}catch(le){console.error("Error accessing microphone:",le),$.error("Could not access microphone. Please check permissions.")}},gt=async()=>{if(w){l(!0),j(!1),L("reading"),await new Promise(le=>setTimeout(le,500)),L("generating");try{const{data:{user:le}}=await oe.auth.getUser();if(!le){L("idle"),$.error("Please log in to continue"),t("/auth");return}const ze=w.base64.length*.75,Le=200*1024*1024;if(ze>Le){L("idle"),l(!1),$.error("File too large",{description:"Maximum file size is 200 MB. Please select a smaller file."});return}const mt=$.loading("Processing your file...",{description:"This may take 30-60 seconds for complex diagrams"}),{data:He,error:Ye}=await oe.functions.invoke("vision-to-bpmn",{body:{imageBase64:w.base64,diagramType:h},headers:e?void 0:{Authorization:""}});if($.dismiss(mt),Ye){console.error("Vision AI error:",Ye),L("idle"),l(!1);const At=Ye.message||"Failed to start diagram generation";$.error("Upload failed",{description:At,action:{label:"Retry",onClick:()=>{gt()}},duration:1e4});return}if(!He||!He.jobId){L("idle"),l(!1),$.error("Upload failed",{description:"Failed to start processing",action:{label:"Retry",onClick:()=>{gt()}},duration:1e4});return}K(He.jobId),L("generating"),$.info("Processing started",{description:"We'll notify you when your diagram is ready (this may take 1-2 minutes)"})}catch(le){console.error("Vision AI processing error:",le),L("idle"),l(!1);const ze=le instanceof Error?le.message:"Network error - Please check your connection and try again";$.error("Upload failed",{description:ze,action:{label:"Retry",onClick:()=>{gt()}},duration:1e4})}}},Jt=async()=>{if(!u||!S.trim()){const Le=h==="bpmn"?"BPMN":"P&ID";$.error(`Please enter instructions to refine the ${Le}`);return}const{data:{user:le}}=await oe.auth.getUser();if(!le){const Le=h==="bpmn"?"BPMN":"P&ID";$.error(`Please log in to refine ${Le}`),t("/auth");return}k(!0);const ze=h==="bpmn"?"BPMN":"P&ID";$.info(`Refining ${ze} based on your instructions...`),A("analyzing"),await new Promise(Le=>setTimeout(Le,500)),A("refining");try{const{data:Le,error:mt}=await oe.functions.invoke("refine-bpmn",{body:{currentBpmnXml:u,instructions:S,userId:le.id,diagramType:h},headers:e?void 0:{Authorization:""}});if(mt){console.error("Refinement error:",mt),A("idle");const He=mt.message||JSON.stringify(mt);He.includes("429")?$.error("Rate limit exceeded. Please try again in a moment."):He.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):He.includes("401")||He.includes("Authentication")?($.error("Authentication required. Please log in again."),t("/auth")):$.error(`Failed to refine ${ze}: ${He}`);return}if(Le!=null&&Le.error){console.error("Refinement error in response:",Le.error),A("idle");const He=typeof Le.error=="string"?Le.error:JSON.stringify(Le.error);He.includes("402")?$.error("AI credits depleted. Please add more credits to continue."):He.includes("401")||He.includes("Authentication")?($.error("Authentication required. Please log in again."),t("/auth")):$.error(`Failed to refine ${ze}: ${He}`);return}if(Le!=null&&Le.bpmnXml){A("applying"),await new Promise(Ye=>setTimeout(Ye,300));const He=Le.bpmnXml.includes("</bpmn:definitions>")||Le.bpmnXml.includes("</definitions>");Le.bpmnXml.includes("<?xml")&&He?(d(Le.bpmnXml),A("idle"),$.success(`${ze} refined successfully!`),E("")):(console.error("Received invalid diagram XML:",Le.bpmnXml.substring(0,200)),A("idle"),$.error("Received invalid diagram structure. Please try again."))}else console.error("No refined diagram received. Response:",Le),A("idle"),$.error("No refined diagram received. The function may not be deployed or there was an error.")}catch(Le){console.error("BPMN refinement error:",Le),A("idle");const mt=Le instanceof Error?Le.message:String(Le);mt.includes("Failed to fetch")||mt.includes("load the resource")?$.error("Network error: Unable to reach refine-bpmn function. Please check if the function is deployed."):$.error(`Failed to refine ${h==="bpmn"?"BPMN":"P&ID"}: ${mt}`)}finally{k(!1)}};return o.jsx(ye.section,{className:`${p?"py-8":"py-24"} bg-muted/20 relative`,"data-section":"try-prossmind",initial:n?{opacity:1}:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:xt(n)||{duration:.7},children:o.jsxs("div",{className:"container mx-auto px-6",children:[!p&&o.jsxs(ye.div,{className:"text-center mb-12",initial:n?{opacity:1,y:0}:{opacity:0,y:30,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:xt(n)||{duration:.6,delay:.2},children:[o.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Try ",o.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"ProssMind!"})]}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"Describe your business process, upload an image, PDF, Word doc, or text file - AI will generate a BPMN or P&ID diagram for you"})]}),o.jsxs("div",{className:"max-w-5xl mx-auto mt-12 space-y-8",children:[o.jsxs(cD,{value:h,onValueChange:le=>f(le),className:"w-full",children:[o.jsxs(Gj,{className:`grid w-full max-w-md mx-auto grid-cols-2 mb-8 ${h==="pid"?"bg-engineering-green/10":""}`,children:[o.jsx(Qh,{value:"bpmn",className:`${h==="bpmn"?"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground":""}`,children:"BPMN Diagram"}),o.jsxs(Qh,{value:"pid",className:`${h==="pid"?"data-[state=active]:bg-engineering-green data-[state=active]:text-white":""}`,children:[o.jsx(Gc,{className:"h-4 w-4 mr-2 flex-shrink-0"}),"P&ID Diagram"]})]}),o.jsxs(ef,{value:"bpmn",className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-muted/50 to-muted/30 rounded-2xl p-8 border border-border/50 slide-up stagger-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:o.jsx(wu,{className:"h-5 w-5 text-primary"})}),o.jsx("h3",{className:"font-semibold text-lg",children:"Try these BPMN examples:"})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:STe.map((le,ze)=>o.jsx(V,{variant:"outline",size:"sm",onClick:()=>Te(le),className:"text-sm hover:bg-primary/10 hover:border-primary/50 transition-all whitespace-nowrap",disabled:c,style:{minWidth:"max-content",paddingLeft:"1.2em",paddingRight:"1.2em"},"aria-label":`Use suggestion: ${le}`,children:le},ze))})]}),o.jsx("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl slide-up stagger-2",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Z8,{defaultValue:"prompt",className:"w-full",children:[o.jsxs(zN,{className:"grid w-full grid-cols-3 bg-muted/50",children:[o.jsxs(Fc,{value:"prompt",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(Rj,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Prompt"})]}),o.jsxs(Fc,{value:"voice",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(Ch,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Voice"})]}),o.jsxs(Fc,{value:"attachment",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[o.jsx(Ah,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Attachment"})]})]}),o.jsx(zc,{value:"prompt",className:"mt-4",children:o.jsxs("div",{className:"relative",children:[o.jsx(vi,{placeholder:"Describe your process step by step...",value:a,onChange:le=>s(le.target.value),className:"min-h-[120px] resize-none border-muted",style:{paddingLeft:"1.2em",paddingRight:"1.2em"},disabled:c}),c&&o.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-1",children:[o.jsx(ye.span,{className:"w-2 h-2 bg-primary rounded-full",animate:n?{}:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:xt(n)||{duration:1,repeat:1/0,delay:0}}),o.jsx(ye.span,{className:"w-2 h-2 bg-primary rounded-full",animate:n?{}:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:xt(n)||{duration:1,repeat:1/0,delay:.2}}),o.jsx(ye.span,{className:"w-2 h-2 bg-primary rounded-full",animate:n?{}:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:xt(n)||{duration:1,repeat:1/0,delay:.4}})]})]})}),o.jsx(zc,{value:"voice",className:"mt-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rw,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs(Ss,{value:v,onValueChange:b,children:[o.jsx(La,{className:"w-[200px] h-8",children:o.jsx(Es,{placeholder:"Select language"})}),o.jsxs(Ba,{children:[o.jsx(Be,{value:"en-US",children:"English (US)"}),o.jsx(Be,{value:"en-GB",children:"English (UK)"}),o.jsx(Be,{value:"es-ES",children:"Spanish"}),o.jsx(Be,{value:"fr-FR",children:"French"}),o.jsx(Be,{value:"de-DE",children:"German"}),o.jsx(Be,{value:"it-IT",children:"Italian"}),o.jsx(Be,{value:"pt-BR",children:"Portuguese (Brazil)"}),o.jsx(Be,{value:"pt-PT",children:"Portuguese (Portugal)"}),o.jsx(Be,{value:"ru-RU",children:"Russian"}),o.jsx(Be,{value:"ja-JP",children:"Japanese"}),o.jsx(Be,{value:"ko-KR",children:"Korean"}),o.jsx(Be,{value:"zh-CN",children:"Chinese (Simplified)"}),o.jsx(Be,{value:"zh-TW",children:"Chinese (Traditional)"}),o.jsx(Be,{value:"ar-SA",children:"Arabic"}),o.jsx(Be,{value:"hi-IN",children:"Hindi"})]})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Voice recognition language"})]}),o.jsx(V,{variant:"outline",onClick:We,disabled:c,className:m?"text-red-500 border-red-500":"w-full",children:m?o.jsxs(o.Fragment,{children:[o.jsx($w,{className:"h-4 w-4 mr-2 animate-pulse"}),"Click to Stop Recording"]}):o.jsxs(o.Fragment,{children:[o.jsx(Ch,{className:"h-4 w-4 mr-2"}),"Start Voice Recording"]})})]})}),o.jsx(zc,{value:"attachment",className:"mt-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{ref:fe,type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:Ee,className:"hidden"}),o.jsxs("div",{onDragOver:le=>{le.preventDefault(),W(!0)},onDragLeave:()=>W(!1),onDrop:le=>{le.preventDefault(),W(!1),Ee(le)},className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${te?"border-primary bg-primary/5 scale-[1.02]":"border-border hover:border-primary/50"}`,children:[o.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx($i,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PNG/JPG"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Mn,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PDF"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Ow,{className:"h-5 w-5","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"DOCX"})]})]}),o.jsxs(V,{variant:"outline",onClick:()=>{var le;return(le=fe.current)==null?void 0:le.click()},disabled:c,className:"w-full","aria-label":"Upload file",children:[o.jsx(Ah,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Upload File"]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Drag and drop a file here or click to browse"})]})]})})]}),c&&R!=="idle"&&o.jsxs("div",{className:"space-y-3 p-4 bg-muted/50 rounded-lg border border-border",children:[o.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Processing your document..."}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:R==="reading"?"font-semibold":"text-muted-foreground",children:[R==="reading"&&o.jsx(tr,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),R!=="reading"&&" ","Step 1: Reading prompt..."]}),R==="reading"&&o.jsx(Oi,{value:33,className:"w-24","aria-label":"Progress: 33%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:R==="generating"?"font-semibold":R==="drawing"?"text-muted-foreground":"",children:[R==="generating"&&o.jsx(tr,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),R!=="generating"&&R!=="reading"&&" ","Step 2: Generating..."]}),R==="generating"&&o.jsx(Oi,{value:66,className:"w-24","aria-label":"Progress: 66%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:R==="drawing"?"font-semibold":"text-muted-foreground",children:[R==="drawing"&&o.jsx(tr,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),R!=="drawing"&&R!=="generating"&&R!=="reading"&&" ","Step 3: Drawing Diagram..."]}),R==="drawing"&&o.jsx(Oi,{value:100,className:"w-24","aria-label":"Progress: 100%"})]})]}),o.jsxs(V,{onClick:H,className:"gap-2 shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all w-full",size:"lg",disabled:c||!a.trim(),"aria-label":"Generate BPMN diagram",children:[c?"Generating...":"Generate BPMN",o.jsx(Pg,{className:"h-4 w-4","aria-hidden":"true"})]})]})})]}),o.jsxs(ef,{value:"pid",className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-muted/50 to-muted/30 rounded-2xl p-8 border border-border/50 slide-up stagger-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"rounded-full bg-primary/10 p-2",children:o.jsx(wu,{className:"h-5 w-5 text-primary"})}),o.jsx("h3",{className:"font-semibold text-lg",children:"Try these P&ID examples:"})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:["Create a chemical reactor cooling system","Design a water treatment process flow","Build a distillation column control loop","Generate a pump and valve configuration","Create a heat exchanger system"].map((le,ze)=>o.jsx(V,{variant:"outline",size:"sm",onClick:()=>Te(le),className:"text-sm hover:bg-primary/10 hover:border-primary/50 transition-all",disabled:c,children:le},ze))})]}),o.jsx("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl slide-up stagger-2",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rw,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true"}),o.jsxs(Ss,{value:v,onValueChange:b,children:[o.jsx(La,{className:"w-[200px] h-8","aria-label":"Select voice recognition language",children:o.jsx(Es,{placeholder:"Select language"})}),o.jsxs(Ba,{children:[o.jsx(Be,{value:"en-US",children:"English (US)"}),o.jsx(Be,{value:"en-GB",children:"English (UK)"}),o.jsx(Be,{value:"es-ES",children:"Spanish"}),o.jsx(Be,{value:"fr-FR",children:"French"}),o.jsx(Be,{value:"de-DE",children:"German"}),o.jsx(Be,{value:"it-IT",children:"Italian"}),o.jsx(Be,{value:"pt-BR",children:"Portuguese (Brazil)"}),o.jsx(Be,{value:"pt-PT",children:"Portuguese (Portugal)"}),o.jsx(Be,{value:"ru-RU",children:"Russian"}),o.jsx(Be,{value:"ja-JP",children:"Japanese"}),o.jsx(Be,{value:"ko-KR",children:"Korean"}),o.jsx(Be,{value:"zh-CN",children:"Chinese (Simplified)"}),o.jsx(Be,{value:"zh-TW",children:"Chinese (Traditional)"}),o.jsx(Be,{value:"ar-SA",children:"Arabic"}),o.jsx(Be,{value:"hi-IN",children:"Hindi"})]})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Voice recognition language"})]}),o.jsx(vi,{placeholder:"Describe your P&ID process, or upload files (images, PDFs, Word docs, text files) - I'll extract content and generate a P&ID diagram. You can preview before generation and refine using natural language after creation...",value:a,onChange:le=>s(le.target.value),className:"min-h-[120px] resize-none border-muted",disabled:c,"aria-label":"P&ID process description input"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{ref:fe,type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:Ee,className:"hidden","aria-label":"Upload file input"}),o.jsx(V,{variant:"ghost",size:"icon",onClick:()=>{var le;return(le=fe.current)==null?void 0:le.click()},disabled:c,title:"Upload image, PDF, Word, or text file to generate P&ID","aria-label":"Upload file",children:o.jsx(Ah,{className:"h-5 w-5","aria-hidden":"true"})}),o.jsx(V,{variant:"ghost",size:"icon",onClick:We,disabled:c,className:m?"text-red-500":"",title:"Voice to text","aria-label":m?"Stop voice recording":"Start voice recording",children:m?o.jsx($w,{className:"h-5 w-5 animate-pulse","aria-hidden":"true"}):o.jsx(Ch,{className:"h-5 w-5","aria-hidden":"true"})})]}),o.jsxs(V,{onClick:H,className:"gap-2 shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all",size:"lg",disabled:c||!a.trim(),"aria-label":"Generate P&ID diagram",children:[c?"Generating...":"Generate P&ID",o.jsx(Pg,{className:"h-4 w-4","aria-hidden":"true"})]})]}),o.jsxs("div",{className:"border border-border rounded-lg p-4 bg-muted/30",children:[o.jsxs("div",{className:"flex justify-center gap-4 mb-2",children:[o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx($i,{className:"h-4 w-4","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PNG/JPG"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Mn,{className:"h-4 w-4","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"PDF"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Ow,{className:"h-4 w-4","aria-hidden":"true"}),o.jsx("span",{className:"text-xs",children:"DOCX"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Supported file types for upload"})]})]})})]})]}),_&&w&&o.jsxs("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Preview Uploaded File"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[o.jsxs("p",{className:"text-sm font-medium mb-2",children:["File: ",w.name]}),w.type.startsWith("image/")&&o.jsx("div",{className:"mt-4 max-h-96 overflow-auto",children:o.jsx("img",{src:w.base64,alt:"Preview",className:"max-w-full rounded border"})}),w.extractedText&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Extracted Content Preview:"}),o.jsx("div",{className:"bg-background rounded p-3 max-h-48 overflow-auto text-xs",children:w.extractedText})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{onClick:gt,className:"flex-1",disabled:c,children:c?"Generating...":`Generate ${h==="bpmn"?"BPMN":"P&ID"} from this file`}),o.jsx(V,{variant:"outline",onClick:()=>{j(!1),y(null)},children:"Cancel"})]})]})]}),u?o.jsxs("div",{id:"bpmn-viewer",className:"space-y-6 relative",children:[o.jsxs("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",children:[o.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Your ",h==="bpmn"?"BPMN":"P&ID"," Model"]}),o.jsx(FN,{xml:u,diagramType:h,onSave:async le=>{if(d(le),et&&e){const{error:ze}=await cTe(et,e.id,{bpmn_xml:le});ze?($.error("Failed to update project"),console.error(ze)):$.success("Project updated successfully")}else e&&le?(re(le),we(!0)):$.success("Diagram saved to workspace")},onRefine:()=>G(!0)}),o.jsx("p",{className:"text-xs text-muted-foreground mt-4 text-right",children:"Generated via Gemini 2.5 Pro  v1"})]}),P&&T!=="idle"&&o.jsxs("div",{className:"space-y-3 p-4 bg-muted/50 rounded-lg border border-border",children:[o.jsxs("p",{className:"text-sm font-medium text-foreground mb-2",children:["Refining your ",h==="bpmn"?"BPMN":"P&ID"," diagram..."]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:T==="analyzing"?"font-semibold":"text-muted-foreground",children:[T==="analyzing"&&o.jsx(tr,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),T!=="analyzing"&&" ","Step 1: Analyzing instructions..."]}),T==="analyzing"&&o.jsx(Oi,{value:33,className:"w-24","aria-label":"Progress: 33%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:T==="refining"?"font-semibold":T==="applying"?"text-muted-foreground":"",children:[T==="refining"&&o.jsx(tr,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),T!=="refining"&&T!=="analyzing"&&" ","Step 2: Refining diagram..."]}),T==="refining"&&o.jsx(Oi,{value:66,className:"w-24","aria-label":"Progress: 66%"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:T==="applying"?"font-semibold":"text-muted-foreground",children:[T==="applying"&&o.jsx(tr,{className:"h-4 w-4 inline mr-2 animate-spin","aria-hidden":"true"}),T!=="applying"&&T!=="refining"&&T!=="analyzing"&&" ","Step 3: Applying changes..."]}),T==="applying"&&o.jsx(Oi,{value:100,className:"w-24","aria-label":"Progress: 100%"})]})]}),o.jsx(Jn,{open:B,onOpenChange:G,children:o.jsxs(Fn,{children:[o.jsxs(zn,{children:[o.jsxs(Un,{children:["Refine Your ",h==="bpmn"?"BPMN":"P&ID"]}),o.jsx(Hn,{children:"Use natural language to modify the current diagram. The AI will update the latest version based on your instructions."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(vi,{placeholder:"E.g., 'add a review step after approval', 'replace manual task with automated service', 'add parallel gateway for concurrent processing'...",value:S,onChange:le=>E(le.target.value),className:"min-h-[100px] resize-none",disabled:P}),o.jsx(V,{onClick:()=>{Jt(),G(!1)},disabled:P||!S.trim(),className:"w-full",children:P?"Refining...":`Apply Changes to Current ${h==="bpmn"?"BPMN":"P&ID"}`})]})]})}),e&&o.jsx(jTe,{open:ce,onOpenChange:we,onSave:async(le,ze)=>{if(!Y||!e)return;ie(!0);const{data:Le,error:mt}=await sTe({user_id:e.id,name:le,description:ze||null,diagram_type:h,bpmn_xml:Y});mt?($.error("Failed to save project"),console.error(mt)):Le&&(jt(Le.id),re(null),$.success("Project saved successfully!")),ie(!1),we(!1)},diagramType:h,isLoading:_e})]}):c&&R==="drawing"?o.jsxs(ye.div,{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",initial:n?{opacity:1}:{opacity:0},animate:{opacity:1},transition:xt(n)||{duration:.3},children:[o.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Generating ",h==="bpmn"?"BPMN":"P&ID"," Model"]}),o.jsx("div",{className:"space-y-4",children:o.jsx("div",{className:"w-full h-[400px] bg-muted/50 rounded-lg animate-pulse border border-border/50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx(tr,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Rendering diagram..."})]})})})]}):null]})]})})},ETe=()=>{const e=_i(),t=od(),[n,r]=x.useState(null),[i,a]=x.useState(!0);if(x.useEffect(()=>{const{data:{subscription:u}}=oe.auth.onAuthStateChange((d,h)=>{r((h==null?void 0:h.user)??null),a(!1),!(h!=null&&h.user)&&!t.pathname.includes("/auth")&&er(e,"/auth")});return oe.auth.getSession().then(({data:{session:d}})=>{r((d==null?void 0:d.user)??null),a(!1),!(d!=null&&d.user)&&!t.pathname.includes("/auth")&&er(e,"/auth")}),()=>u.unsubscribe()},[e,t.pathname]),i)return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})});const s=ia(),c=`/auth${s}`,l=`/dashboard${s}`;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{user:n}),o.jsxs(cd,{children:[o.jsx(rt,{path:"/auth",element:o.jsx(MD,{})}),o.jsx(rt,{path:"/",element:n?o.jsx(w$,{user:n}):o.jsx(ki,{to:c,replace:!0})}),o.jsx(rt,{path:"/dashboard",element:n?o.jsx(w$,{user:n}):o.jsx(ki,{to:c,replace:!0})}),o.jsx(rt,{path:"/projects",element:n?o.jsx(dTe,{user:n}):o.jsx(ki,{to:c,replace:!0})}),o.jsx(rt,{path:"/bpmn-generator",element:n?o.jsx(_$,{user:n}):o.jsx(ki,{to:c,replace:!0})}),o.jsx(rt,{path:"/pid-generator",element:n?o.jsx(_$,{user:n}):o.jsx(ki,{to:c,replace:!0})}),o.jsx(rt,{path:"/vision-ai",element:n?o.jsx(xD,{}):o.jsx(ki,{to:c,replace:!0})}),o.jsx(rt,{path:"/templates",element:n?o.jsx(bTe,{user:n}):o.jsx(ki,{to:c,replace:!0})}),o.jsx(rt,{path:"/account",element:n?o.jsx(wTe,{user:n}):o.jsx(ki,{to:c,replace:!0})}),o.jsx(rt,{path:"/settings",element:n?o.jsx(_Te,{user:n}):o.jsx(ki,{to:c,replace:!0})}),o.jsx(rt,{path:"*",element:o.jsx(ki,{to:l,replace:!0})})]})]})},j$=[{name:"Getting Started",path:"/getting-started",icon:bM},{name:"Guides",path:"/guides",icon:LG},{name:"Tutorials",path:"/tutorials",icon:yM},{name:"API Reference",path:"/api-reference",icon:Ic},{name:"FAQ",path:"/faq",icon:UG},{name:"Changelog",path:"/changelog",icon:Mn}],NTe=()=>{const e=od(),[t,n]=x.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"lg:hidden fixed top-16 left-0 right-0 z-40 border-b bg-background px-6 py-3",children:o.jsxs(_M,{open:t,onOpenChange:n,children:[o.jsx(jM,{asChild:!0,children:o.jsxs(V,{variant:"outline",size:"sm",children:[o.jsx(xM,{className:"h-4 w-4 mr-2"}),"Documentation Menu"]})}),o.jsxs(Ij,{side:"left",className:"w-[300px] sm:w-[400px]",children:[o.jsx(Mj,{children:o.jsx(Dj,{children:"Documentation"})}),o.jsx("nav",{className:"mt-6 space-y-2",children:j$.map(r=>{const i=r.icon,a=e.pathname===r.path||r.path==="/getting-started"&&e.pathname==="/";return o.jsxs(Qn,{to:r.path,onClick:()=>n(!1),className:ge("flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted"),children:[o.jsx(i,{className:"h-4 w-4"}),r.name]},r.path)})})]})]})}),o.jsx("aside",{className:"hidden lg:block w-64 border-r bg-muted/30 pt-16 fixed left-0 top-0 h-full overflow-y-auto",children:o.jsx("nav",{className:"p-6 space-y-2",children:j$.map(r=>{const i=r.icon,a=e.pathname===r.path||r.path==="/getting-started"&&e.pathname==="/";return o.jsxs(Qn,{to:r.path,className:ge("flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground hover:bg-muted"),children:[o.jsx(i,{className:"h-4 w-4"}),r.name]},r.path)})})})]})},PTe=({children:e})=>o.jsxs("div",{className:"flex min-h-screen pt-16",children:[o.jsx(NTe,{}),o.jsx("main",{className:"flex-1 overflow-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:e})})]}),hw=()=>o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Getting Started"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Welcome to ProssMind! Learn how to create your first BPMN or P&ID diagram."})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(bM,{className:"h-5 w-5 text-primary"}),"Quick Start"]}),o.jsx($e,{children:"Get up and running in minutes"})]}),o.jsxs(Se,{className:"space-y-4",children:[o.jsxs("ol",{className:"space-y-3 list-decimal list-inside",children:[o.jsx("li",{children:"Sign up for a free account"}),o.jsx("li",{children:"Choose your diagram type (BPMN or P&ID)"}),o.jsx("li",{children:"Describe your process or upload an image"}),o.jsx("li",{children:"Download your generated diagram"})]}),o.jsxs(V,{onClick:()=>ua("/auth"),className:"w-full",children:["Get Started",o.jsx(Vl,{className:"h-4 w-4 ml-2"})]})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"What You Get"}),o.jsx($e,{children:"Features included in your free account"})]}),o.jsx(Se,{children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(wh,{className:"h-4 w-4 text-primary"}),o.jsx("span",{children:"5 free diagram generations"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(wh,{className:"h-4 w-4 text-primary"}),o.jsx("span",{children:"BPMN and P&ID diagram support"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(wh,{className:"h-4 w-4 text-primary"}),o.jsx("span",{children:"Vision AI image conversion"})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(wh,{className:"h-4 w-4 text-primary"}),o.jsx("span",{children:"Export to standard formats"})]})]})})]})]}),o.jsxs(xe,{children:[o.jsx(Ne,{children:o.jsx(Pe,{children:"Next Steps"})}),o.jsxs(Se,{className:"space-y-4",children:[o.jsx("p",{className:"text-muted-foreground",children:"Ready to create your first diagram? Check out our guides and tutorials to learn more about creating professional process diagrams with ProssMind."}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(V,{variant:"outline",onClick:()=>ua("/dashboard"),children:"Go to Dashboard"}),o.jsx(V,{variant:"outline",onClick:()=>window.location.href="/guides",children:"View Guides"})]})]})]})]}),kTe=()=>{const e=[{title:"BPMN Diagram Guide",description:"Learn how to create effective business process models",icon:bi,topics:["Elements and symbols","Swimlanes and pools","Gateways and events","Best practices"]},{title:"P&ID Diagram Guide",description:"Master piping and instrumentation diagrams",icon:Gc,topics:["Equipment symbols","Instrumentation tags","Piping connections","ISA standards"]},{title:"Vision AI Guide",description:"Convert images and documents to diagrams",icon:ya,topics:["Supported formats","Image requirements","Processing tips","Troubleshooting"]},{title:"Export and Integration",description:"Export diagrams and integrate with other tools",icon:Mn,topics:["Export formats","SAP Signavio","Camunda","Flowable"]}];return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"User Guides"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Comprehensive guides to help you get the most out of ProssMind."})]}),o.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.map(t=>{const n=t.icon;return o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(n,{className:"h-5 w-5 text-primary"}),t.title]}),o.jsx($e,{children:t.description})]}),o.jsx(Se,{children:o.jsx("ul",{className:"space-y-2",children:t.topics.map((r,i)=>o.jsxs("li",{className:"text-sm text-muted-foreground",children:[" ",r]},i))})})]},t.title)})})]})},CTe=()=>{const e=[{title:"Creating Your First BPMN Diagram",description:"Step-by-step tutorial for creating a simple business process diagram",duration:"5 min",level:"Beginner"},{title:"Advanced P&ID Design",description:"Learn advanced techniques for complex piping and instrumentation diagrams",duration:"15 min",level:"Advanced"},{title:"Using Vision AI",description:"Convert handwritten notes and sketches into professional diagrams",duration:"10 min",level:"Intermediate"},{title:"Integrating with SAP Signavio",description:"Export and import diagrams to SAP Signavio for process management",duration:"12 min",level:"Intermediate"}];return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Tutorials"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Step-by-step tutorials to help you master ProssMind features."})]}),o.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.map(t=>o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx(Pe,{children:t.title}),o.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-primary/10 text-primary",children:t.level})]}),o.jsx($e,{children:t.description})]}),o.jsx(Se,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Tj,{className:"h-4 w-4"}),t.duration]}),o.jsxs(V,{variant:"outline",size:"sm",children:[o.jsx(HG,{className:"h-4 w-4 mr-2"}),"Watch Tutorial"]})]})})]},t.title))})]})},ATe=()=>o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Reference"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Integrate ProssMind into your applications using our REST API."})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(op,{className:"h-5 w-5 text-primary"}),"Authentication"]}),o.jsx($e,{children:"API authentication and authorization"})]}),o.jsxs(Se,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"All API requests require authentication using an API key. You can generate API keys in your account settings."}),o.jsx("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm",children:o.jsx("code",{children:"Authorization: Bearer YOUR_API_KEY"})})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(Ic,{className:"h-5 w-5 text-primary"}),"Endpoints"]}),o.jsx($e,{children:"Available API endpoints"})]}),o.jsxs(Se,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"API documentation is coming soon. For now, please use the web interface or contact support for API access."}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"POST"}),o.jsx("code",{children:"/api/v1/diagrams/generate"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"GET"}),o.jsxs("code",{children:["/api/v1/diagrams/","{id}"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"GET"}),o.jsx("code",{children:"/api/v1/diagrams"})]})]})]})]})]}),TTe=()=>{const e=[{question:"How many free diagrams can I create?",answer:"Free accounts include 5 diagram generations. After that, you can upgrade to a paid plan for unlimited diagrams."},{question:"What file formats can I export?",answer:"You can export diagrams in BPMN 2.0 XML, PNG, SVG, and PDF formats."},{question:"Can I use Vision AI with handwritten notes?",answer:"Yes! Vision AI can convert handwritten notes, whiteboard sketches, and printed documents into professional diagrams."},{question:"Is my data secure?",answer:"Yes, ProssMind is GDPR compliant and all data is encrypted. We never share your data with third parties."},{question:"Can I integrate with SAP Signavio?",answer:"Yes, you can export BPMN diagrams in a format compatible with SAP Signavio, Camunda, and Flowable."},{question:"What's the difference between BPMN and P&ID?",answer:"BPMN (Business Process Model and Notation) is for business processes, while P&ID (Piping and Instrumentation Diagram) is for engineering and manufacturing processes."}];return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Frequently Asked Questions"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Find answers to common questions about ProssMind."})]}),o.jsxs(xe,{children:[o.jsx(Ne,{children:o.jsx(Pe,{children:"Common Questions"})}),o.jsx(Se,{children:o.jsx(V1,{type:"single",collapsible:!0,className:"w-full",children:e.map((t,n)=>o.jsxs(Xl,{value:`item-${n}`,children:[o.jsx(Zl,{children:t.question}),o.jsx(Jl,{children:t.answer})]},n))})})]})]})},OTe=()=>{const e=[{version:"1.0.0",date:"2024-01-15",type:"major",changes:["Initial release of ProssMind","BPMN diagram generation","P&ID diagram generation","Vision AI image conversion","Free tier with 5 diagram generations"]}];return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Changelog"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Track updates and new features in ProssMind."})]}),o.jsx("div",{className:"space-y-6",children:e.map(t=>o.jsxs(xe,{children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Pe,{className:"flex items-center gap-3",children:["Version ",t.version,o.jsx(mn,{variant:t.type==="major"?"default":"secondary",children:t.type})]}),o.jsx($e,{children:t.date})]})}),o.jsx(Se,{children:o.jsx("ul",{className:"space-y-2",children:t.changes.map((n,r)=>o.jsxs("li",{className:"text-sm flex items-start gap-2",children:[o.jsx("span",{className:"text-primary mt-1",children:""}),o.jsx("span",{children:n})]},r))})})]},t.version))})]})},RTe=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{}),o.jsx(PTe,{children:o.jsxs(cd,{children:[o.jsx(rt,{path:"/",element:o.jsx(hw,{})}),o.jsx(rt,{path:"/getting-started",element:o.jsx(hw,{})}),o.jsx(rt,{path:"/guides",element:o.jsx(kTe,{})}),o.jsx(rt,{path:"/tutorials",element:o.jsx(CTe,{})}),o.jsx(rt,{path:"/api-reference",element:o.jsx(ATe,{})}),o.jsx(rt,{path:"/faq",element:o.jsx(TTe,{})}),o.jsx(rt,{path:"/changelog",element:o.jsx(OTe,{})}),o.jsx(rt,{path:"*",element:o.jsx(hw,{})})]})})]}),$Te=()=>{const e="operational",n={operational:{label:"All Systems Operational",color:"bg-green-500",icon:gM,variant:"default"},degraded:{label:"Degraded Performance",color:"bg-yellow-500",icon:mM,variant:"secondary"},down:{label:"Service Disruption",color:"bg-red-500",icon:VG,variant:"destructive"}}[e],r=n.icon;return o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${n.color} animate-pulse`}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(r,{className:"h-5 w-5"}),o.jsx("span",{className:"font-semibold",children:n.label})]}),o.jsx(mn,{variant:n.variant,children:e})]})},ITe=()=>{const e=[{id:1,date:"2024-01-10",title:"Scheduled Maintenance",status:"resolved",description:"Database optimization and performance improvements"},{id:2,date:"2024-01-05",title:"API Rate Limiting Issue",status:"resolved",description:"Temporary rate limiting issue affecting some API requests"}];return o.jsx("div",{className:"space-y-4",children:e.length>0?o.jsxs(tl,{children:[o.jsx(nl,{children:o.jsxs(qr,{children:[o.jsx(Yt,{children:"Date"}),o.jsx(Yt,{children:"Title"}),o.jsx(Yt,{children:"Status"}),o.jsx(Yt,{children:"Description"})]})}),o.jsx(rl,{children:e.map(t=>o.jsxs(qr,{children:[o.jsx(Wt,{children:new Date(t.date).toLocaleDateString()}),o.jsx(Wt,{className:"font-medium",children:t.title}),o.jsx(Wt,{children:o.jsx(mn,{variant:t.status==="resolved"?"default":"secondary",children:t.status})}),o.jsx(Wt,{className:"text-muted-foreground",children:t.description})]},t.id))})]}):o.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No incidents reported. All systems operational."})})},MTe=()=>{const{toast:e}=lp(),[t,n]=x.useState(""),r=i=>{i.preventDefault(),e({title:"Subscribed!",description:"You'll receive email updates about service status."}),n("")};return o.jsxs("form",{onSubmit:r,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Et,{htmlFor:"email",children:"Email Address"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Oj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(vn,{id:"email",type:"email",placeholder:"your@email.com",value:t,onChange:i=>n(i.target.value),className:"pl-10",required:!0})]}),o.jsx(V,{type:"submit",children:"Subscribe"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll receive email notifications about service incidents and maintenance."})]})},DTe=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{}),o.jsx("div",{className:"pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Service Status"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Real-time status of ProssMind services"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"System Status"}),o.jsx($e,{children:"Current operational status"})]}),o.jsx(Se,{children:o.jsx($Te,{})})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Subscribe to Updates"}),o.jsx($e,{children:"Get notified about service incidents"})]}),o.jsx(Se,{children:o.jsx(MTe,{})})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Incident History"}),o.jsx($e,{children:"Past incidents and maintenance windows"})]}),o.jsx(Se,{children:o.jsx(ITe,{})})]})]})})]}),LTe=({user:e})=>{const t={totalUsers:1250,organizations:45,revenue:125e3,activeUsers:890};return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Admin Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your organization and users"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Pe,{className:"text-sm font-medium",children:"Total Users"}),o.jsx(Cg,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(Se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t.totalUsers}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Pe,{className:"text-sm font-medium",children:"Organizations"}),o.jsx(Aj,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(Se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t.organizations}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"+3 new this month"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Pe,{className:"text-sm font-medium",children:"Revenue"}),o.jsx(vM,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(Se,{children:[o.jsxs("div",{className:"text-2xl font-bold",children:["$",t.revenue.toLocaleString()]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"+8% from last month"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Pe,{className:"text-sm font-medium",children:"Active Users"}),o.jsx(Tw,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(Se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:t.activeUsers}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Quick Actions"}),o.jsx($e,{children:"Common administrative tasks"})]}),o.jsxs(Se,{className:"space-y-2",children:[o.jsx("a",{href:"/organization",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"Manage Organization Settings"}),o.jsx("a",{href:"/users",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"View All Users"}),o.jsx("a",{href:"/billing",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"Billing & Invoices"}),o.jsx("a",{href:"/security",className:"block p-3 rounded-lg border hover:bg-muted transition-colors",children:"Security Settings"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(Cs,{className:"h-5 w-5"}),"Security Overview"]}),o.jsx($e,{children:"Recent security events"})]}),o.jsx(Se,{children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No security events in the last 24 hours. All systems secure."})})]})]})]})})},BTe=({user:e})=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Organization Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your organization configuration"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(Aj,{className:"h-5 w-5"}),"Organization Details"]}),o.jsx($e,{children:"Basic organization information"})]}),o.jsxs(Se,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Et,{htmlFor:"orgName",children:"Organization Name"}),o.jsx(vn,{id:"orgName",defaultValue:"Your Organization",className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Et,{htmlFor:"orgEmail",children:"Contact Email"}),o.jsx(vn,{id:"orgEmail",type:"email",defaultValue:e.email,className:"mt-1"})]}),o.jsx(V,{children:"Save Changes"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(op,{className:"h-5 w-5"}),"Single Sign-On (SSO)"]}),o.jsx($e,{children:"Configure SSO for your organization"})]}),o.jsxs(Se,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"SSO configuration allows your organization to use your identity provider for authentication."}),o.jsx(V,{variant:"outline",children:"Configure SSO"})]})]})]})]})}),FTe=({user:e})=>{const t=[{id:"1",email:"user1@example.com",role:"admin",createdAt:"2024-01-01"},{id:"2",email:"user2@example.com",role:"user",createdAt:"2024-01-05"},{id:"3",email:"user3@example.com",role:"user",createdAt:"2024-01-10"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"User Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage users in your organization"})]}),o.jsxs(xe,{children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Pe,{children:"Users"}),o.jsx($e,{children:"All users in your organization"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Zh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(vn,{placeholder:"Search users...",className:"pl-10 w-64"})]})]})}),o.jsx(Se,{children:o.jsxs(tl,{children:[o.jsx(nl,{children:o.jsxs(qr,{children:[o.jsx(Yt,{children:"Email"}),o.jsx(Yt,{children:"Role"}),o.jsx(Yt,{children:"Created"}),o.jsx(Yt,{children:"Actions"})]})}),o.jsx(rl,{children:t.map(n=>o.jsxs(qr,{children:[o.jsx(Wt,{className:"font-medium",children:n.email}),o.jsx(Wt,{children:o.jsx(mn,{variant:n.role==="admin"?"default":"secondary",children:n.role})}),o.jsx(Wt,{children:new Date(n.createdAt).toLocaleDateString()}),o.jsx(Wt,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{variant:"ghost",size:"sm",children:o.jsx($j,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",children:o.jsx(cp,{className:"h-4 w-4"})})]})})]},n.id))})]})})]})]})})},zTe=({user:e})=>{const t=[{id:"INV-001",date:"2024-01-15",amount:999,status:"paid"},{id:"INV-002",date:"2024-02-15",amount:999,status:"paid"},{id:"INV-003",date:"2024-03-15",amount:999,status:"pending"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Billing & Invoices"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage billing and view invoices"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(vM,{className:"h-5 w-5"}),"Current Plan"]}),o.jsx($e,{children:"Your subscription details"})]}),o.jsxs(Se,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Plan"}),o.jsx("span",{className:"font-semibold",children:"Enterprise"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Billing Cycle"}),o.jsx("span",{children:"Monthly"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Next Billing Date"}),o.jsx("span",{children:"April 15, 2024"})]})]}),o.jsx(V,{className:"w-full mt-4",children:"Change Plan"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Payment Method"}),o.jsx($e,{children:"Manage your payment methods"})]}),o.jsxs(Se,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"   4242"}),o.jsx(V,{variant:"outline",children:"Update Payment Method"})]})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Invoice History"}),o.jsx($e,{children:"View and download past invoices"})]}),o.jsx(Se,{children:o.jsxs(tl,{children:[o.jsx(nl,{children:o.jsxs(qr,{children:[o.jsx(Yt,{children:"Invoice ID"}),o.jsx(Yt,{children:"Date"}),o.jsx(Yt,{children:"Amount"}),o.jsx(Yt,{children:"Status"}),o.jsx(Yt,{children:"Actions"})]})}),o.jsx(rl,{children:t.map(n=>o.jsxs(qr,{children:[o.jsx(Wt,{className:"font-medium",children:n.id}),o.jsx(Wt,{children:new Date(n.date).toLocaleDateString()}),o.jsxs(Wt,{children:["$",n.amount]}),o.jsx(Wt,{children:o.jsx(mn,{variant:n.status==="paid"?"default":"secondary",children:n.status})}),o.jsx(Wt,{children:o.jsxs(V,{variant:"ghost",size:"sm",children:[o.jsx(Xh,{className:"h-4 w-4 mr-2"}),"Download"]})})]},n.id))})]})})]})]})})},UTe=({user:e})=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Security Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage security and access controls"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(Cs,{className:"h-5 w-5"}),"Two-Factor Authentication"]}),o.jsx($e,{children:"Require 2FA for all users"})]}),o.jsx(Se,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Et,{children:"Enable 2FA"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Require two-factor authentication"})]}),o.jsx(Ns,{})]})})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(op,{className:"h-5 w-5"}),"API Keys"]}),o.jsx($e,{children:"Manage API access keys"})]}),o.jsxs(Se,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"API keys allow programmatic access to ProssMind services."}),o.jsx(V,{variant:"outline",children:"Manage API Keys"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(nW,{className:"h-5 w-5"}),"Access Controls"]}),o.jsx($e,{children:"Configure access permissions"})]}),o.jsxs(Se,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Et,{children:"IP Whitelist"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Restrict access by IP address"})]}),o.jsx(Ns,{})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Et,{children:"Session Timeout"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto-logout after inactivity"})]}),o.jsx(Ns,{defaultChecked:!0})]})]})]})]})]})}),HTe=({user:e})=>{const t=[{id:"1",user:"admin@example.com",action:"User created",timestamp:"2024-01-15T10:30:00Z",ip:"192.168.1.1"},{id:"2",user:"admin@example.com",action:"Settings updated",timestamp:"2024-01-15T09:15:00Z",ip:"192.168.1.1"},{id:"3",user:"user@example.com",action:"Login",timestamp:"2024-01-15T08:00:00Z",ip:"192.168.1.2"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Audit Logs"}),o.jsx("p",{className:"text-muted-foreground",children:"View activity and security logs"})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(Mn,{className:"h-5 w-5"}),"Activity Log"]}),o.jsx($e,{children:"Recent administrative actions and events"})]}),o.jsx(Se,{children:o.jsxs(tl,{children:[o.jsx(nl,{children:o.jsxs(qr,{children:[o.jsx(Yt,{children:"Timestamp"}),o.jsx(Yt,{children:"User"}),o.jsx(Yt,{children:"Action"}),o.jsx(Yt,{children:"IP Address"})]})}),o.jsx(rl,{children:t.map(n=>o.jsxs(qr,{children:[o.jsx(Wt,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Tj,{className:"h-4 w-4 text-muted-foreground"}),new Date(n.timestamp).toLocaleString()]})}),o.jsx(Wt,{className:"font-medium",children:n.user}),o.jsx(Wt,{children:o.jsx(mn,{variant:"outline",children:n.action})}),o.jsx(Wt,{className:"text-muted-foreground",children:n.ip})]},n.id))})]})})]})]})})},VTe=["Business","E-Commerce","Finance","IT","Manufacturing","Utilities"],GTe=["bpmn","pid"],WTe=["Users","ShoppingCart","Building2","Cog","Factory","Workflow"],qTe=({user:e})=>{const[t,n]=x.useState([]),[r,i]=x.useState(!0),[a,s]=x.useState(""),[c,l]=x.useState(!1),[u,d]=x.useState(!1),[h,f]=x.useState(null),[p,m]=x.useState(!1),[g,v]=x.useState(""),[b,w]=x.useState({name:"",description:"",category:"Business",diagram_type:"bpmn",bpmn_xml:"",icon_name:"Workflow",is_active:!0});x.useEffect(()=>{y()},[]);const y=async()=>{i(!0);const{data:A,error:R}=await vTe();R?$.error("Failed to load templates"):A&&n(A),i(!1)},_=()=>{f(null),w({name:"",description:"",category:"Business",diagram_type:"bpmn",bpmn_xml:"",icon_name:"Workflow",is_active:!0}),l(!0)},j=A=>{f(A),w({name:A.name,description:A.description||"",category:A.category,diagram_type:A.diagram_type,bpmn_xml:A.bpmn_xml,icon_name:A.icon_name||"Workflow",is_active:A.is_active}),l(!0)},S=A=>{f(A),d(!0)},E=async()=>{if(!h)return;const{error:A}=await gTe(h.id);A?$.error("Failed to delete template"):($.success("Template deleted successfully"),y()),d(!1),f(null)},P=A=>{v(A.bpmn_xml),m(!0)},k=async()=>{if(!b.name||!b.bpmn_xml){$.error("Name and XML are required");return}const A={name:b.name,description:b.description||null,category:b.category,diagram_type:b.diagram_type,bpmn_xml:b.bpmn_xml,icon_name:b.icon_name||null,is_active:b.is_active??!0,created_by:e.id};if(h){const{error:R}=await mTe(h.id,A);R?$.error("Failed to update template"):($.success("Template updated successfully"),l(!1),y())}else{const{error:R}=await pTe(A);R?$.error("Failed to create template"):($.success("Template created successfully"),l(!1),y())}},T=t.filter(A=>{var R;return A.name.toLowerCase().includes(a.toLowerCase())||((R=A.description)==null?void 0:R.toLowerCase().includes(a.toLowerCase()))});return r?o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsx(Mt,{children:o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsx(tr,{className:"h-8 w-8 animate-spin text-primary"})})})}):o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Template Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage BPMN and P&ID diagram templates"})]}),o.jsxs(xe,{children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Pe,{children:"Templates"}),o.jsx($e,{children:"Create and manage diagram templates"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Zh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(vn,{placeholder:"Search templates...",className:"pl-10 w-64",value:a,onChange:A=>s(A.target.value)})]}),o.jsxs(V,{onClick:_,children:[o.jsx(Th,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]})}),o.jsx(Se,{children:o.jsxs(tl,{children:[o.jsx(nl,{children:o.jsxs(qr,{children:[o.jsx(Yt,{children:"Name"}),o.jsx(Yt,{children:"Category"}),o.jsx(Yt,{children:"Type"}),o.jsx(Yt,{children:"Status"}),o.jsx(Yt,{children:"Usage"}),o.jsx(Yt,{children:"Created"}),o.jsx(Yt,{children:"Actions"})]})}),o.jsx(rl,{children:T.length===0?o.jsx(qr,{children:o.jsx(Wt,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No templates found"})}):T.map(A=>o.jsxs(qr,{children:[o.jsx(Wt,{className:"font-medium",children:A.name}),o.jsx(Wt,{children:o.jsx(mn,{variant:"outline",children:A.category})}),o.jsx(Wt,{children:o.jsx(mn,{variant:A.diagram_type==="bpmn"?"default":"secondary",children:A.diagram_type.toUpperCase()})}),o.jsx(Wt,{children:o.jsx(mn,{variant:A.is_active?"default":"secondary",children:A.is_active?"Active":"Inactive"})}),o.jsx(Wt,{children:A.usage_count}),o.jsx(Wt,{children:new Date(A.created_at).toLocaleDateString()}),o.jsx(Wt,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>P(A),children:o.jsx(ya,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>j(A),children:o.jsx($j,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>S(A),children:o.jsx(cp,{className:"h-4 w-4"})})]})})]},A.id))})]})})]}),o.jsx(Jn,{open:c,onOpenChange:l,children:o.jsxs(Fn,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:h?"Edit Template":"Create New Template"}),o.jsx(Hn,{children:h?"Update template details and XML content":"Create a new diagram template"})]}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Et,{htmlFor:"name",children:"Name *"}),o.jsx(vn,{id:"name",value:b.name,onChange:A=>w({...b,name:A.target.value}),placeholder:"Template name"})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Et,{htmlFor:"description",children:"Description"}),o.jsx(vi,{id:"description",value:b.description,onChange:A=>w({...b,description:A.target.value}),placeholder:"Template description",rows:2})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Et,{htmlFor:"category",children:"Category *"}),o.jsxs(Ss,{value:b.category,onValueChange:A=>w({...b,category:A}),children:[o.jsx(La,{id:"category",children:o.jsx(Es,{})}),o.jsx(Ba,{children:VTe.map(A=>o.jsx(Be,{value:A,children:A},A))})]})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Et,{htmlFor:"diagram_type",children:"Diagram Type *"}),o.jsxs(Ss,{value:b.diagram_type,onValueChange:A=>w({...b,diagram_type:A}),children:[o.jsx(La,{id:"diagram_type",children:o.jsx(Es,{})}),o.jsx(Ba,{children:GTe.map(A=>o.jsx(Be,{value:A,children:A.toUpperCase()},A))})]})]})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Et,{htmlFor:"icon_name",children:"Icon"}),o.jsxs(Ss,{value:b.icon_name||"Workflow",onValueChange:A=>w({...b,icon_name:A}),children:[o.jsx(La,{id:"icon_name",children:o.jsx(Es,{})}),o.jsx(Ba,{children:WTe.map(A=>o.jsx(Be,{value:A,children:A},A))})]})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Et,{htmlFor:"bpmn_xml",children:"BPMN/PID XML *"}),o.jsx(vi,{id:"bpmn_xml",value:b.bpmn_xml,onChange:A=>w({...b,bpmn_xml:A.target.value}),placeholder:"Paste BPMN or PID XML here",rows:12,className:"font-mono text-sm"})]})]}),o.jsxs(Rg,{children:[o.jsx(V,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),o.jsx(V,{onClick:k,children:h?"Update":"Create"})]})]})}),o.jsx(Jn,{open:p,onOpenChange:m,children:o.jsxs(Fn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs(zn,{children:[o.jsx(Un,{children:"Template XML Preview"}),o.jsx(Hn,{children:"View the template XML content"})]}),o.jsx("div",{className:"mt-4",children:o.jsx("pre",{className:"bg-muted p-4 rounded-md overflow-x-auto text-sm",children:o.jsx("code",{children:g})})}),o.jsx(Rg,{children:o.jsx(V,{variant:"outline",onClick:()=>m(!1),children:"Close"})})]})}),o.jsx(BN,{open:u,onOpenChange:d,children:o.jsxs(gb,{children:[o.jsxs(vb,{children:[o.jsx(xb,{children:"Are you sure?"}),o.jsxs(bb,{children:['This will deactivate the template "',h==null?void 0:h.name,'". This action cannot be undone, but you can reactivate it later.']})]}),o.jsxs(yb,{children:[o.jsx(_b,{children:"Cancel"}),o.jsx(wb,{onClick:E,children:"Delete"})]})]})})]})})},KTe=()=>{_i();const[e,t]=x.useState(null),[n,r]=x.useState(!0),{isAdmin:i}=wM(e);return x.useEffect(()=>{const{data:{subscription:a}}=oe.auth.onAuthStateChange((s,c)=>{t((c==null?void 0:c.user)??null),r(!1)});return oe.auth.getSession().then(({data:{session:s}})=>{t((s==null?void 0:s.user)??null),r(!1)}),()=>a.unsubscribe()},[]),n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):!e||!i?o.jsx(ki,{to:"/",replace:!0}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{user:e}),o.jsxs(cd,{children:[o.jsx(rt,{path:"/",element:o.jsx(LTe,{user:e})}),o.jsx(rt,{path:"/organization",element:o.jsx(BTe,{user:e})}),o.jsx(rt,{path:"/users",element:o.jsx(FTe,{user:e})}),o.jsx(rt,{path:"/billing",element:o.jsx(zTe,{user:e})}),o.jsx(rt,{path:"/security",element:o.jsx(UTe,{user:e})}),o.jsx(rt,{path:"/audit-logs",element:o.jsx(HTe,{user:e})}),o.jsx(rt,{path:"/templates",element:o.jsx(qTe,{user:e})}),o.jsx(rt,{path:"*",element:o.jsx(ki,{to:"/",replace:!0})})]})]})},S$=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Overview"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Integrate ProssMind into your applications with our REST API"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(op,{className:"h-5 w-5 text-primary"}),"Authentication"]}),o.jsx($e,{children:"Get started with API keys"})]}),o.jsxs(Se,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"All API requests require authentication using an API key. Generate your API key in your account settings."}),o.jsx(V,{onClick:()=>ua("/settings"),children:"Generate API Key"})]})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs(Pe,{className:"flex items-center gap-2",children:[o.jsx(Ic,{className:"h-5 w-5 text-primary"}),"Base URL"]}),o.jsx($e,{children:"API endpoint"})]}),o.jsx(Se,{children:o.jsx("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm",children:o.jsx("code",{children:"https://api.prossmind.com/v1"})})})]})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsx(xe,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/reference",children:o.jsxs(Ne,{children:[o.jsx(BG,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(Pe,{children:"API Reference"}),o.jsx($e,{children:"Complete API documentation"})]})}),o.jsx(xe,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/sdks",children:o.jsxs(Ne,{children:[o.jsx(Ic,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(Pe,{children:"SDKs"}),o.jsx($e,{children:"Client libraries and tools"})]})}),o.jsx(xe,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/playground",children:o.jsxs(Ne,{children:[o.jsx(hW,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(Pe,{children:"API Playground"}),o.jsx($e,{children:"Test API endpoints"})]})})]})]})}),YTe=()=>{const e=[{method:"POST",path:"/diagrams/generate",description:"Generate a BPMN or P&ID diagram from a text description"},{method:"GET",path:"/diagrams/{id}",description:"Retrieve a diagram by ID"},{method:"GET",path:"/diagrams",description:"List all diagrams for the authenticated user"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Reference"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Complete reference for all API endpoints"})]}),o.jsx("div",{className:"space-y-6",children:e.map((t,n)=>o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(mn,{variant:t.method==="POST"?"default":"secondary",children:t.method}),o.jsx("code",{className:"text-lg",children:t.path})]}),o.jsx($e,{children:t.description})]}),o.jsx(Se,{children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"Full API documentation coming soon. For now, please use the web interface or contact support for API access."})})]},n))})]})})},XTe=()=>{const e=[{name:"JavaScript/TypeScript",version:"1.0.0",language:"npm"},{name:"Python",version:"1.0.0",language:"pip"},{name:"Go",version:"1.0.0",language:"go get"}];return o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"SDKs & Libraries"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Client libraries for popular programming languages"})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(t=>o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:t.name}),o.jsxs($e,{children:["Version ",t.version]})]}),o.jsxs(Se,{children:[o.jsx("div",{className:"bg-muted p-3 rounded-lg font-mono text-sm mb-4",children:o.jsxs("code",{children:[t.language," install prossmind-sdk"]})}),o.jsxs(V,{variant:"outline",className:"w-full",children:[o.jsx(Xh,{className:"h-4 w-4 mr-2"}),"Download"]})]})]},t.name))})]})})},ZTe=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Code Examples"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Example code snippets for common use cases"})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Examples"}),o.jsx($e,{children:"Code examples coming soon"})]}),o.jsx(Se,{children:o.jsx("p",{className:"text-muted-foreground",children:"Code examples and tutorials will be available here. Check back soon!"})})]})]})}),JTe=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"API Playground"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Test API endpoints interactively"})]}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(Pe,{children:"Interactive Playground"}),o.jsx($e,{children:"API playground coming soon"})]}),o.jsx(Se,{children:o.jsx("p",{className:"text-muted-foreground",children:"An interactive API playground will be available here. Check back soon!"})})]})]})}),QTe=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{}),o.jsxs(cd,{children:[o.jsx(rt,{path:"/",element:o.jsx(S$,{})}),o.jsx(rt,{path:"/reference",element:o.jsx(YTe,{})}),o.jsx(rt,{path:"/sdks",element:o.jsx(XTe,{})}),o.jsx(rt,{path:"/examples",element:o.jsx(ZTe,{})}),o.jsx(rt,{path:"/playground",element:o.jsx(JTe,{})}),o.jsx(rt,{path:"*",element:o.jsx(S$,{})})]})]}),E$=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Partner Program"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Join our partner ecosystem and grow your business"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(xe,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/marketplace",children:o.jsxs(Ne,{children:[o.jsx(bW,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(Pe,{children:"Marketplace"}),o.jsx($e,{children:"Integration marketplace"})]})}),o.jsx(xe,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/resources",children:o.jsxs(Ne,{children:[o.jsx(Mn,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(Pe,{children:"Resources"}),o.jsx($e,{children:"Partner resources"})]})}),o.jsx(xe,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.location.href="/training",children:o.jsxs(Ne,{children:[o.jsx(yM,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(Pe,{children:"Training"}),o.jsx($e,{children:"Partner training"})]})}),o.jsxs(xe,{children:[o.jsxs(Ne,{children:[o.jsx(QG,{className:"h-8 w-8 text-primary mb-2"}),o.jsx(Pe,{children:"Become a Partner"}),o.jsx($e,{children:"Join our partner program"})]}),o.jsx(Se,{children:o.jsx(V,{className:"w-full",children:"Apply Now"})})]})]})]})}),eOe=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Integration Marketplace"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Browse available integrations and extensions"})]}),o.jsx(xe,{children:o.jsx(Se,{className:"pt-6",children:o.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Integration marketplace coming soon. Check back later for partner integrations."})})})]})}),tOe=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Partner Resources"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Download resources and materials for partners"})]}),o.jsx(xe,{children:o.jsx(Se,{className:"pt-6",children:o.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Partner resources coming soon. Check back later for downloadable materials."})})})]})}),nOe=()=>o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Partner Training"}),o.jsx("p",{className:"text-xl text-muted-foreground",children:"Training materials and certification programs"})]}),o.jsx(xe,{children:o.jsx(Se,{className:"pt-6",children:o.jsx("p",{className:"text-center text-muted-foreground py-12",children:"Partner training materials coming soon. Check back later for training programs."})})})]})}),rOe=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{}),o.jsxs(cd,{children:[o.jsx(rt,{path:"/",element:o.jsx(E$,{})}),o.jsx(rt,{path:"/marketplace",element:o.jsx(eOe,{})}),o.jsx(rt,{path:"/resources",element:o.jsx(tOe,{})}),o.jsx(rt,{path:"/training",element:o.jsx(nOe,{})}),o.jsx(rt,{path:"*",element:o.jsx(E$,{})})]})]}),iOe=({language:e})=>{_i();const[t,n]=x.useState(null),[r,i]=x.useState(!0);if(x.useEffect(()=>{const{data:{subscription:c}}=oe.auth.onAuthStateChange((l,u)=>{n((u==null?void 0:u.user)??null),i(!1)});return oe.auth.getSession().then(({data:{session:l}})=>{n((l==null?void 0:l.user)??null),i(!1)}),()=>c.unsubscribe()},[]),r)return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})});const a={de:{title:"Bereit loszulegen?",description:"Erstellen Sie professionelle BPMN- und P&ID-Diagramme mit KI-gesttzter Automatisierung",tryFree:"Kostenlos testen"},fr:{title:"Prt  commencer?",description:"Crez des diagrammes BPMN et P&ID professionnels avec l'automatisation alimente par l'IA",tryFree:"Essayer gratuitement"}},s=a[e]||a.de;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Lr,{user:t}),o.jsx(YM,{}),o.jsx(CM,{}),o.jsx(AM,{}),o.jsx("section",{className:"py-20 bg-muted/30",children:o.jsxs(Mt,{children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-4xl font-bold mb-4",children:s.title}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:s.description})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-8",children:[o.jsxs(xe,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>ua("/bpmn-generator"),children:[o.jsxs(Ne,{children:[o.jsx(bi,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(Pe,{children:"BPMN Diagramme"}),o.jsx($e,{children:"Erstellen Sie Geschftsprozessmodelle"})]}),o.jsx(Se,{children:o.jsxs(V,{className:"w-full",onClick:c=>{c.stopPropagation(),ua("/bpmn-generator")},children:["BPMN-Generator testen",o.jsx(Vl,{className:"h-4 w-4 ml-2"})]})})]}),o.jsxs(xe,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>ua("/pid-generator"),children:[o.jsxs(Ne,{children:[o.jsx(Gc,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(Pe,{children:"P&ID Diagramme"}),o.jsx($e,{children:"Entwerfen Sie Rohrleitungs- und Instrumentierungsdiagramme"})]}),o.jsx(Se,{children:o.jsxs(V,{className:"w-full",onClick:c=>{c.stopPropagation(),ua("/pid-generator")},children:["P&ID-Generator testen",o.jsx(Vl,{className:"h-4 w-4 ml-2"})]})})]}),o.jsxs(xe,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>ua("/vision-ai"),children:[o.jsxs(Ne,{children:[o.jsx(ya,{className:"h-10 w-10 text-primary mb-4"}),o.jsx(Pe,{children:"Vision AI"}),o.jsx($e,{children:"Konvertieren Sie Bilder in Diagramme"})]}),o.jsx(Se,{children:o.jsxs(V,{className:"w-full",onClick:c=>{c.stopPropagation(),ua("/vision-ai")},children:["Vision AI testen",o.jsx(Vl,{className:"h-4 w-4 ml-2"})]})})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs(V,{size:"lg",className:"text-lg px-8",onClick:()=>ua(t?"/dashboard":"/auth"),children:[t?"Zum Dashboard":s.tryFree,o.jsx(Vl,{className:"h-5 w-5 ml-2"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"Keine Kreditkarte erforderlich  5 kostenlose Prompts enthalten"})]})]})}),o.jsx(OM,{}),o.jsx(Lj,{}),o.jsx(qM,{}),o.jsx(Og,{})]})},aOe=()=>{const e=up();return e==="app"?o.jsx(ETe,{}):e==="docs"?o.jsx(RTe,{}):e==="status"?o.jsx(DTe,{}):e==="admin"?o.jsx(KTe,{}):e==="api"?o.jsx(QTe,{}):e==="partners"?o.jsx(rOe,{}):e==="de"||e==="fr"?o.jsx(iOe,{language:e}):e==="bpmn"?o.jsx(Z_e,{}):e==="pid"?o.jsx(aTe,{}):o.jsx(P3,{})};var jb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sOe={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},go,sj,D$,oOe=(D$=class{constructor(){Rt(this,go,sOe);Rt(this,sj,!1)}setTimeoutProvider(e){ut(this,go,e)}setTimeout(e,t){return ee(this,go).setTimeout(e,t)}clearTimeout(e){ee(this,go).clearTimeout(e)}setInterval(e,t){return ee(this,go).setInterval(e,t)}clearInterval(e){ee(this,go).clearInterval(e)}},go=new WeakMap,sj=new WeakMap,D$),J1=new oOe;function cOe(e){setTimeout(e,0)}var Sb=typeof window>"u"||"Deno"in globalThis;function oa(){}function lOe(e,t){return typeof e=="function"?e(t):e}function uOe(e){return typeof e=="number"&&e>=0&&e!==1/0}function dOe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Q1(e,t){return typeof e=="function"?e(t):e}function hOe(e,t){return typeof e=="function"?e(t):e}function N$(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:s,stale:c}=e;if(s){if(r){if(t.queryHash!==UN(s,t.options))return!1}else if(!qf(t.queryKey,s))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||i&&i!==t.state.fetchStatus||a&&!a(t))}function P$(e,t){const{exact:n,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Wf(t.options.mutationKey)!==Wf(a))return!1}else if(!qf(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function UN(e,t){return((t==null?void 0:t.queryKeyHashFn)||Wf)(e)}function Wf(e){return JSON.stringify(e,(t,n)=>ej(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function qf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>qf(e[n],t[n])):!1}var fOe=Object.prototype.hasOwnProperty;function Q8(e,t){if(e===t)return e;const n=k$(e)&&k$(t);if(!n&&!(ej(e)&&ej(t)))return t;const i=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),s=a.length,c=n?new Array(s):{};let l=0;for(let u=0;u<s;u++){const d=n?u:a[u],h=e[d],f=t[d];if(h===f){c[d]=h,(n?u<i:fOe.call(e,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){c[d]=f;continue}const p=Q8(h,f);c[d]=p,p===h&&l++}return i===s&&l===i?e:c}function k$(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ej(e){if(!C$(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!C$(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function C$(e){return Object.prototype.toString.call(e)==="[object Object]"}function pOe(e){return new Promise(t=>{J1.setTimeout(t,e)})}function mOe(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Q8(e,t):t}function gOe(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function vOe(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var HN=Symbol();function ez(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===HN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Cc,vo,du,L$,yOe=(L$=class extends jb{constructor(){super();Rt(this,Cc);Rt(this,vo);Rt(this,du);ut(this,du,t=>{if(!Sb&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ee(this,vo)||this.setEventListener(ee(this,du))}onUnsubscribe(){var t;this.hasListeners()||((t=ee(this,vo))==null||t.call(this),ut(this,vo,void 0))}setEventListener(t){var n;ut(this,du,t),(n=ee(this,vo))==null||n.call(this),ut(this,vo,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){ee(this,Cc)!==t&&(ut(this,Cc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof ee(this,Cc)=="boolean"?ee(this,Cc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Cc=new WeakMap,vo=new WeakMap,du=new WeakMap,L$),tz=new yOe;function xOe(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}var bOe=cOe;function wOe(){let e=[],t=0,n=c=>{c()},r=c=>{c()},i=bOe;const a=c=>{t?e.push(c):i(()=>{n(c)})},s=()=>{const c=e;e=[],c.length&&i(()=>{r(()=>{c.forEach(l=>{n(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||s()}return l},batchCalls:c=>(...l)=>{a(()=>{c(...l)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var Or=wOe(),hu,yo,fu,B$,_Oe=(B$=class extends jb{constructor(){super();Rt(this,hu,!0);Rt(this,yo);Rt(this,fu);ut(this,fu,t=>{if(!Sb&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ee(this,yo)||this.setEventListener(ee(this,fu))}onUnsubscribe(){var t;this.hasListeners()||((t=ee(this,yo))==null||t.call(this),ut(this,yo,void 0))}setEventListener(t){var n;ut(this,fu,t),(n=ee(this,yo))==null||n.call(this),ut(this,yo,t(this.setOnline.bind(this)))}setOnline(t){ee(this,hu)!==t&&(ut(this,hu,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return ee(this,hu)}},hu=new WeakMap,yo=new WeakMap,fu=new WeakMap,B$),ny=new _Oe;function jOe(e){return Math.min(1e3*2**e,3e4)}function nz(e){return(e??"online")==="online"?ny.isOnline():!0}var tj=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function rz(e){let t=!1,n=0,r;const i=xOe(),a=()=>i.status!=="pending",s=g=>{var v;if(!a()){const b=new tj(g);f(b),(v=e.onCancel)==null||v.call(e,b)}},c=()=>{t=!0},l=()=>{t=!1},u=()=>tz.isFocused()&&(e.networkMode==="always"||ny.isOnline())&&e.canRun(),d=()=>nz(e.networkMode)&&e.canRun(),h=g=>{a()||(r==null||r(),i.resolve(g))},f=g=>{a()||(r==null||r(),i.reject(g))},p=()=>new Promise(g=>{var v;r=b=>{(a()||u())&&g(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var g;r=void 0,a()||(g=e.onContinue)==null||g.call(e)}),m=()=>{if(a())return;let g;const v=n===0?e.initialPromise:void 0;try{g=v??e.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var S;if(a())return;const w=e.retry??(Sb?0:3),y=e.retryDelay??jOe,_=typeof y=="function"?y(n,b):y,j=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,b);if(t||!j){f(b);return}n++,(S=e.onFail)==null||S.call(e,n,b),pOe(_).then(()=>u()?void 0:p()).then(()=>{t?f(b):m()})})};return{promise:i,status:()=>i.status,cancel:s,continue:()=>(r==null||r(),i),cancelRetry:c,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Ac,F$,iz=(F$=class{constructor(){Rt(this,Ac)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),uOe(this.gcTime)&&ut(this,Ac,J1.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Sb?1/0:5*60*1e3))}clearGcTimeout(){ee(this,Ac)&&(J1.clearTimeout(ee(this,Ac)),ut(this,Ac,void 0))}},Ac=new WeakMap,F$),Tc,pu,Ci,Oc,or,Kf,Rc,ca,ls,z$,SOe=(z$=class extends iz{constructor(t){super();Rt(this,ca);Rt(this,Tc);Rt(this,pu);Rt(this,Ci);Rt(this,Oc);Rt(this,or);Rt(this,Kf);Rt(this,Rc);ut(this,Rc,!1),ut(this,Kf,t.defaultOptions),this.setOptions(t.options),this.observers=[],ut(this,Oc,t.client),ut(this,Ci,ee(this,Oc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ut(this,Tc,T$(this.options)),this.state=t.state??ee(this,Tc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ee(this,or))==null?void 0:t.promise}setOptions(t){if(this.options={...ee(this,Kf),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=T$(this.options);n.data!==void 0&&(this.setState(A$(n.data,n.dataUpdatedAt)),ut(this,Tc,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ee(this,Ci).remove(this)}setData(t,n){const r=mOe(this.state.data,t,this.options);return br(this,ca,ls).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){br(this,ca,ls).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=ee(this,or))==null?void 0:r.promise;return(i=ee(this,or))==null||i.cancel(t),n?n.then(oa).catch(oa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,Tc))}isActive(){return this.observers.some(t=>hOe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===HN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Q1(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!dOe(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=ee(this,or))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=ee(this,or))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ee(this,Ci).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(ee(this,or)&&(ee(this,Rc)?ee(this,or).cancel({revert:!0}):ee(this,or).cancelRetry()),this.scheduleGc()),ee(this,Ci).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||br(this,ca,ls).call(this,{type:"invalidate"})}async fetch(t,n){var l,u,d,h,f,p,m,g,v,b,w,y;if(this.state.fetchStatus!=="idle"&&((l=ee(this,or))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ee(this,or))return ee(this,or).continueRetry(),ee(this,or).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(j=>j.options.queryFn);_&&this.setOptions(_.options)}const r=new AbortController,i=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(ut(this,Rc,!0),r.signal)})},a=()=>{const _=ez(this.options,n),S=(()=>{const E={client:ee(this,Oc),queryKey:this.queryKey,meta:this.meta};return i(E),E})();return ut(this,Rc,!1),this.options.persister?this.options.persister(_,S,this):_(S)},c=(()=>{const _={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ee(this,Oc),state:this.state,fetchFn:a};return i(_),_})();(u=this.options.behavior)==null||u.onFetch(c,this),ut(this,pu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=c.fetchOptions)==null?void 0:d.meta))&&br(this,ca,ls).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta}),ut(this,or,rz({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,onCancel:_=>{_ instanceof tj&&_.revert&&this.setState({...ee(this,pu),fetchStatus:"idle"}),r.abort()},onFail:(_,j)=>{br(this,ca,ls).call(this,{type:"failed",failureCount:_,error:j})},onPause:()=>{br(this,ca,ls).call(this,{type:"pause"})},onContinue:()=>{br(this,ca,ls).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const _=await ee(this,or).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(p=(f=ee(this,Ci).config).onSuccess)==null||p.call(f,_,this),(g=(m=ee(this,Ci).config).onSettled)==null||g.call(m,_,this.state.error,this),_}catch(_){if(_ instanceof tj){if(_.silent)return ee(this,or).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw br(this,ca,ls).call(this,{type:"error",error:_}),(b=(v=ee(this,Ci).config).onError)==null||b.call(v,_,this),(y=(w=ee(this,Ci).config).onSettled)==null||y.call(w,this.state.data,_,this),_}finally{this.scheduleGc()}}},Tc=new WeakMap,pu=new WeakMap,Ci=new WeakMap,Oc=new WeakMap,or=new WeakMap,Kf=new WeakMap,Rc=new WeakMap,ca=new WeakSet,ls=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...EOe(r.data,this.options),fetchMeta:t.meta??null};case"success":const i={...r,...A$(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ut(this,pu,t.manual?i:void 0),i;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Or.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ee(this,Ci).notify({query:this,type:"updated",action:t})})},z$);function EOe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nz(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function A$(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function T$(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function O$(e){return{onFetch:(t,n)=>{var d,h,f,p,m;const r=t.options,i=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],s=((m=t.state.data)==null?void 0:m.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const v=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},b=ez(t.options,t.fetchOptions),w=async(y,_,j)=>{if(g)return Promise.reject();if(_==null&&y.pages.length)return Promise.resolve(y);const E=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};return v(A),A})(),P=await b(E),{maxPages:k}=t.options,T=j?vOe:gOe;return{pages:T(y.pages,P,k),pageParams:T(y.pageParams,_,k)}};if(i&&a.length){const y=i==="backward",_=y?NOe:R$,j={pages:a,pageParams:s},S=_(r,j);c=await w(j,S,y)}else{const y=e??a.length;do{const _=l===0?s[0]??r.initialPageParam:R$(r,c);if(l>0&&_==null)break;c=await w(c,_),l++}while(l<y)}return c};t.options.persister?t.fetchFn=()=>{var g,v;return(v=(g=t.options).persister)==null?void 0:v.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function R$(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function NOe(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Yf,Aa,Ar,$c,Ta,lo,U$,POe=(U$=class extends iz{constructor(t){super();Rt(this,Ta);Rt(this,Yf);Rt(this,Aa);Rt(this,Ar);Rt(this,$c);ut(this,Yf,t.client),this.mutationId=t.mutationId,ut(this,Ar,t.mutationCache),ut(this,Aa,[]),this.state=t.state||kOe(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ee(this,Aa).includes(t)||(ee(this,Aa).push(t),this.clearGcTimeout(),ee(this,Ar).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ut(this,Aa,ee(this,Aa).filter(n=>n!==t)),this.scheduleGc(),ee(this,Ar).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ee(this,Aa).length||(this.state.status==="pending"?this.scheduleGc():ee(this,Ar).remove(this))}continue(){var t;return((t=ee(this,$c))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,c,l,u,d,h,f,p,m,g,v,b,w,y,_,j,S,E,P,k;const n=()=>{br(this,Ta,lo).call(this,{type:"continue"})},r={client:ee(this,Yf),meta:this.options.meta,mutationKey:this.options.mutationKey};ut(this,$c,rz({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(T,A)=>{br(this,Ta,lo).call(this,{type:"failed",failureCount:T,error:A})},onPause:()=>{br(this,Ta,lo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,Ar).canRun(this)}));const i=this.state.status==="pending",a=!ee(this,$c).canStart();try{if(i)n();else{br(this,Ta,lo).call(this,{type:"pending",variables:t,isPaused:a}),await((c=(s=ee(this,Ar).config).onMutate)==null?void 0:c.call(s,t,this,r));const A=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,r));A!==this.state.context&&br(this,Ta,lo).call(this,{type:"pending",context:A,variables:t,isPaused:a})}const T=await ee(this,$c).start();return await((h=(d=ee(this,Ar).config).onSuccess)==null?void 0:h.call(d,T,t,this.state.context,this,r)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,t,this.state.context,r)),await((g=(m=ee(this,Ar).config).onSettled)==null?void 0:g.call(m,T,null,this.state.variables,this.state.context,this,r)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,T,null,t,this.state.context,r)),br(this,Ta,lo).call(this,{type:"success",data:T}),T}catch(T){try{throw await((y=(w=ee(this,Ar).config).onError)==null?void 0:y.call(w,T,t,this.state.context,this,r)),await((j=(_=this.options).onError)==null?void 0:j.call(_,T,t,this.state.context,r)),await((E=(S=ee(this,Ar).config).onSettled)==null?void 0:E.call(S,void 0,T,this.state.variables,this.state.context,this,r)),await((k=(P=this.options).onSettled)==null?void 0:k.call(P,void 0,T,t,this.state.context,r)),T}finally{br(this,Ta,lo).call(this,{type:"error",error:T})}}finally{ee(this,Ar).runNext(this)}}},Yf=new WeakMap,Aa=new WeakMap,Ar=new WeakMap,$c=new WeakMap,Ta=new WeakSet,lo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Or.batch(()=>{ee(this,Aa).forEach(r=>{r.onMutationUpdate(t)}),ee(this,Ar).notify({mutation:this,type:"updated",action:t})})},U$);function kOe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fs,la,Xf,H$,COe=(H$=class extends jb{constructor(t={}){super();Rt(this,fs);Rt(this,la);Rt(this,Xf);this.config=t,ut(this,fs,new Set),ut(this,la,new Map),ut(this,Xf,0)}build(t,n,r){const i=new POe({client:t,mutationCache:this,mutationId:++dm(this,Xf)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){ee(this,fs).add(t);const n=sg(t);if(typeof n=="string"){const r=ee(this,la).get(n);r?r.push(t):ee(this,la).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ee(this,fs).delete(t)){const n=sg(t);if(typeof n=="string"){const r=ee(this,la).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&ee(this,la).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=sg(t);if(typeof n=="string"){const r=ee(this,la).get(n),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=sg(t);if(typeof n=="string"){const i=(r=ee(this,la).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Or.batch(()=>{ee(this,fs).forEach(t=>{this.notify({type:"removed",mutation:t})}),ee(this,fs).clear(),ee(this,la).clear()})}getAll(){return Array.from(ee(this,fs))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>P$(n,r))}findAll(t={}){return this.getAll().filter(n=>P$(t,n))}notify(t){Or.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Or.batch(()=>Promise.all(t.map(n=>n.continue().catch(oa))))}},fs=new WeakMap,la=new WeakMap,Xf=new WeakMap,H$);function sg(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Oa,V$,AOe=(V$=class extends jb{constructor(t={}){super();Rt(this,Oa);this.config=t,ut(this,Oa,new Map)}build(t,n,r){const i=n.queryKey,a=n.queryHash??UN(i,n);let s=this.get(a);return s||(s=new SOe({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){ee(this,Oa).has(t.queryHash)||(ee(this,Oa).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=ee(this,Oa).get(t.queryHash);n&&(t.destroy(),n===t&&ee(this,Oa).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Or.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ee(this,Oa).get(t)}getAll(){return[...ee(this,Oa).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>N$(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>N$(t,r)):n}notify(t){Or.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Or.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Or.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Oa=new WeakMap,V$),Nn,xo,bo,mu,gu,wo,vu,yu,G$,TOe=(G$=class{constructor(e={}){Rt(this,Nn);Rt(this,xo);Rt(this,bo);Rt(this,mu);Rt(this,gu);Rt(this,wo);Rt(this,vu);Rt(this,yu);ut(this,Nn,e.queryCache||new AOe),ut(this,xo,e.mutationCache||new COe),ut(this,bo,e.defaultOptions||{}),ut(this,mu,new Map),ut(this,gu,new Map),ut(this,wo,0)}mount(){dm(this,wo)._++,ee(this,wo)===1&&(ut(this,vu,tz.subscribe(async e=>{e&&(await this.resumePausedMutations(),ee(this,Nn).onFocus())})),ut(this,yu,ny.subscribe(async e=>{e&&(await this.resumePausedMutations(),ee(this,Nn).onOnline())})))}unmount(){var e,t;dm(this,wo)._--,ee(this,wo)===0&&((e=ee(this,vu))==null||e.call(this),ut(this,vu,void 0),(t=ee(this,yu))==null||t.call(this),ut(this,yu,void 0))}isFetching(e){return ee(this,Nn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ee(this,xo).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ee(this,Nn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=ee(this,Nn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Q1(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return ee(this,Nn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=ee(this,Nn).get(r.queryHash),a=i==null?void 0:i.state.data,s=lOe(t,a);if(s!==void 0)return ee(this,Nn).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return Or.batch(()=>ee(this,Nn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ee(this,Nn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=ee(this,Nn);Or.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=ee(this,Nn);return Or.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Or.batch(()=>ee(this,Nn).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(oa).catch(oa)}invalidateQueries(e,t={}){return Or.batch(()=>(ee(this,Nn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Or.batch(()=>ee(this,Nn).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(oa)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(oa)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=ee(this,Nn).build(this,t);return n.isStaleByTime(Q1(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(oa).catch(oa)}fetchInfiniteQuery(e){return e.behavior=O$(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(oa).catch(oa)}ensureInfiniteQueryData(e){return e.behavior=O$(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ny.isOnline()?ee(this,xo).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,Nn)}getMutationCache(){return ee(this,xo)}getDefaultOptions(){return ee(this,bo)}setDefaultOptions(e){ut(this,bo,e)}setQueryDefaults(e,t){ee(this,mu).set(Wf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ee(this,mu).values()],n={};return t.forEach(r=>{qf(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){ee(this,gu).set(Wf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ee(this,gu).values()],n={};return t.forEach(r=>{qf(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ee(this,bo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=UN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===HN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ee(this,bo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ee(this,Nn).clear(),ee(this,xo).clear()}},Nn=new WeakMap,xo=new WeakMap,bo=new WeakMap,mu=new WeakMap,gu=new WeakMap,wo=new WeakMap,vu=new WeakMap,yu=new WeakMap,G$),OOe=x.createContext(void 0),ROe=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(OOe.Provider,{value:e,children:t})),$Oe=Symbol("radix.slottable");function IOe(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=$Oe,t}var[Eb]=$s("Tooltip",[oy]),VN=oy(),az="TooltipProvider",MOe=700,$$="tooltip.open",[DOe,sz]=Eb(az),oz=e=>{const{__scopeTooltip:t,delayDuration:n=MOe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,s=x.useRef(!0),c=x.useRef(!1),l=x.useRef(0);return x.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),o.jsx(DOe,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:x.useCallback(u=>{c.current=u},[]),disableHoverableContent:i,children:a})};oz.displayName=az;var cz="Tooltip",[qRe,Nb]=Eb(cz),nj="TooltipTrigger",LOe=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Nb(nj,n),a=sz(nj,n),s=VN(n),c=x.useRef(null),l=hn(t,c,i.onTriggerChange),u=x.useRef(!1),d=x.useRef(!1),h=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),o.jsx(oI,{asChild:!0,...s,children:o.jsx(kt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:ot(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:ot(e.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:ot(e.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ot(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:ot(e.onBlur,i.onClose),onClick:ot(e.onClick,i.onClose)})})});LOe.displayName=nj;var BOe="TooltipPortal",[KRe,FOe]=Eb(BOe,{forceMount:void 0}),sd="TooltipContent",lz=x.forwardRef((e,t)=>{const n=FOe(sd,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=e,s=Nb(sd,e.__scopeTooltip);return o.jsx(Ro,{present:r||s.open,children:s.disableHoverableContent?o.jsx(uz,{side:i,...a,ref:t}):o.jsx(zOe,{side:i,...a,ref:t})})}),zOe=x.forwardRef((e,t)=>{const n=Nb(sd,e.__scopeTooltip),r=sz(sd,e.__scopeTooltip),i=x.useRef(null),a=hn(t,i),[s,c]=x.useState(null),{trigger:l,onClose:u}=n,d=i.current,{onPointerInTransitChange:h}=r,f=x.useCallback(()=>{c(null),h(!1)},[h]),p=x.useCallback((m,g)=>{const v=m.currentTarget,b={x:m.clientX,y:m.clientY},w=WOe(b,v.getBoundingClientRect()),y=qOe(b,w),_=KOe(g.getBoundingClientRect()),j=XOe([...y,..._]);c(j),h(!0)},[h]);return x.useEffect(()=>()=>f(),[f]),x.useEffect(()=>{if(l&&d){const m=v=>p(v,d),g=v=>p(v,l);return l.addEventListener("pointerleave",m),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",g)}}},[l,d,p,f]),x.useEffect(()=>{if(s){const m=g=>{const v=g.target,b={x:g.clientX,y:g.clientY},w=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),y=!YOe(b,s);w?f():y&&(f(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,d,s,u,f]),o.jsx(uz,{...e,ref:a})}),[UOe,HOe]=Eb(cz,{isInside:!1}),VOe=IOe("TooltipContent"),uz=x.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:s,...c}=e,l=Nb(sd,n),u=VN(n),{onClose:d}=l;return x.useEffect(()=>(document.addEventListener($$,d),()=>document.removeEventListener($$,d)),[d]),x.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),o.jsx(lI,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:o.jsxs(uI,{"data-state":l.stateAttribute,...u,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(VOe,{children:r}),o.jsx(UOe,{scope:n,isInside:!0,children:o.jsx(UCe,{id:l.contentId,role:"tooltip",children:i||r})})]})})});lz.displayName=sd;var dz="TooltipArrow",GOe=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=VN(n);return HOe(dz,n).isInside?null:o.jsx(dI,{...i,...r,ref:t})});GOe.displayName=dz;function WOe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function qOe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function KOe(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function YOe(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,s=t.length-1;a<t.length;s=a++){const c=t[a],l=t[s],u=c.x,d=c.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(i=!i)}return i}function XOe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),ZOe(t)}function ZOe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const a=t[t.length-1],s=t[t.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const a=n[n.length-1],s=n[n.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var JOe=oz,hz=lz;const QOe=JOe,eRe=x.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(hz,{ref:r,sideOffset:t,className:ge("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));eRe.displayName=hz.displayName;var GN="ToastProvider",[WN,tRe,nRe]=lj("Toast"),[fz]=$s("Toast",[nRe]),[rRe,Pb]=fz(GN),pz=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:s}=e,[c,l]=x.useState(null),[u,d]=x.useState(0),h=x.useRef(!1),f=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${GN}\`. Expected non-empty \`string\`.`),o.jsx(WN.Provider,{scope:t,children:o.jsx(rRe,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:u,viewport:c,onViewportChange:l,onToastAdd:x.useCallback(()=>d(p=>p+1),[]),onToastRemove:x.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:s})})};pz.displayName=GN;var mz="ToastViewport",iRe=["F8"],rj="toast.viewportPause",ij="toast.viewportResume",gz=x.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=iRe,label:i="Notifications ({hotkey})",...a}=e,s=Pb(mz,n),c=tRe(n),l=x.useRef(null),u=x.useRef(null),d=x.useRef(null),h=x.useRef(null),f=hn(t,h,s.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=s.toastCount>0;x.useEffect(()=>{const v=b=>{var y;r.length!==0&&r.every(_=>b[_]||b.code===_)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),x.useEffect(()=>{const v=l.current,b=h.current;if(m&&v&&b){const w=()=>{if(!s.isClosePausedRef.current){const S=new CustomEvent(rj);b.dispatchEvent(S),s.isClosePausedRef.current=!0}},y=()=>{if(s.isClosePausedRef.current){const S=new CustomEvent(ij);b.dispatchEvent(S),s.isClosePausedRef.current=!1}},_=S=>{!v.contains(S.relatedTarget)&&y()},j=()=>{v.contains(document.activeElement)||y()};return v.addEventListener("focusin",w),v.addEventListener("focusout",_),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",j),window.addEventListener("blur",w),window.addEventListener("focus",y),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",j),window.removeEventListener("blur",w),window.removeEventListener("focus",y)}}},[m,s.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:v})=>{const w=c().map(y=>{const _=y.ref.current,j=[_,...vRe(_)];return v==="forwards"?j:j.reverse()});return(v==="forwards"?w.reverse():w).flat()},[c]);return x.useEffect(()=>{const v=h.current;if(v){const b=w=>{var j,S,E;const y=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!y){const P=document.activeElement,k=w.shiftKey;if(w.target===v&&k){(j=u.current)==null||j.focus();return}const R=g({tabbingDirection:k?"backwards":"forwards"}),L=R.findIndex(B=>B===P);fw(R.slice(L+1))?w.preventDefault():k?(S=u.current)==null||S.focus():(E=d.current)==null||E.focus()}};return v.addEventListener("keydown",b),()=>v.removeEventListener("keydown",b)}},[c,g]),o.jsxs(YU,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&o.jsx(aj,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});fw(v)}}),o.jsx(WN.Slot,{scope:n,children:o.jsx(kt.ol,{tabIndex:-1,...a,ref:f})}),m&&o.jsx(aj,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});fw(v)}})]})});gz.displayName=mz;var vz="ToastFocusProxy",aj=x.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,a=Pb(vz,n);return o.jsx(db,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:s=>{var u;const c=s.relatedTarget;!((u=a.viewport)!=null&&u.contains(c))&&r()}})});aj.displayName=vz;var Vp="Toast",aRe="toast.swipeStart",sRe="toast.swipeMove",oRe="toast.swipeCancel",cRe="toast.swipeEnd",yz=x.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...s}=e,[c,l]=ko({prop:r,defaultProp:i??!0,onChange:a,caller:Vp});return o.jsx(Ro,{present:n||c,children:o.jsx(dRe,{open:c,...s,ref:t,onClose:()=>l(!1),onPause:hi(e.onPause),onResume:hi(e.onResume),onSwipeStart:ot(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ot(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ot(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ot(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});yz.displayName=Vp;var[lRe,uRe]=fz(Vp,{onClose(){}}),dRe=x.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:s,onEscapeKeyDown:c,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...m}=e,g=Pb(Vp,n),[v,b]=x.useState(null),w=hn(t,B=>b(B)),y=x.useRef(null),_=x.useRef(null),j=i||g.duration,S=x.useRef(0),E=x.useRef(j),P=x.useRef(0),{onToastAdd:k,onToastRemove:T}=g,A=hi(()=>{var G;(v==null?void 0:v.contains(document.activeElement))&&((G=g.viewport)==null||G.focus()),s()}),R=x.useCallback(B=>{!B||B===1/0||(window.clearTimeout(P.current),S.current=new Date().getTime(),P.current=window.setTimeout(A,B))},[A]);x.useEffect(()=>{const B=g.viewport;if(B){const G=()=>{R(E.current),u==null||u()},U=()=>{const K=new Date().getTime()-S.current;E.current=E.current-K,window.clearTimeout(P.current),l==null||l()};return B.addEventListener(rj,U),B.addEventListener(ij,G),()=>{B.removeEventListener(rj,U),B.removeEventListener(ij,G)}}},[g.viewport,j,l,u,R]),x.useEffect(()=>{a&&!g.isClosePausedRef.current&&R(j)},[a,j,g.isClosePausedRef,R]),x.useEffect(()=>(k(),()=>T()),[k,T]);const L=x.useMemo(()=>v?Ez(v):null,[v]);return g.viewport?o.jsxs(o.Fragment,{children:[L&&o.jsx(hRe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:L}),o.jsx(lRe,{scope:n,onClose:A,children:ry.createPortal(o.jsx(WN.ItemSlot,{scope:n,children:o.jsx(XU,{asChild:!0,onEscapeKeyDown:ot(c,()=>{g.isFocusedToastEscapeKeyDownRef.current||A(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(kt.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ot(e.onKeyDown,B=>{B.key==="Escape"&&(c==null||c(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:ot(e.onPointerDown,B=>{B.button===0&&(y.current={x:B.clientX,y:B.clientY})}),onPointerMove:ot(e.onPointerMove,B=>{if(!y.current)return;const G=B.clientX-y.current.x,U=B.clientY-y.current.y,K=!!_.current,te=["left","right"].includes(g.swipeDirection),W=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,fe=te?W(0,G):0,be=te?0:W(0,U),ne=B.pointerType==="touch"?10:2,ce={x:fe,y:be},we={originalEvent:B,delta:ce};K?(_.current=ce,og(sRe,h,we,{discrete:!1})):I$(ce,g.swipeDirection,ne)?(_.current=ce,og(aRe,d,we,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(G)>ne||Math.abs(U)>ne)&&(y.current=null)}),onPointerUp:ot(e.onPointerUp,B=>{const G=_.current,U=B.target;if(U.hasPointerCapture(B.pointerId)&&U.releasePointerCapture(B.pointerId),_.current=null,y.current=null,G){const K=B.currentTarget,te={originalEvent:B,delta:G};I$(G,g.swipeDirection,g.swipeThreshold)?og(cRe,p,te,{discrete:!0}):og(oRe,f,te,{discrete:!0}),K.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),hRe=e=>{const{__scopeToast:t,children:n,...r}=e,i=Pb(Vp,t),[a,s]=x.useState(!1),[c,l]=x.useState(!1);return mRe(()=>s(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),c?null:o.jsx(cI,{asChild:!0,children:o.jsx(db,{...r,children:a&&o.jsxs(o.Fragment,{children:[i.label," ",n]})})})},fRe="ToastTitle",xz=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(kt.div,{...r,ref:t})});xz.displayName=fRe;var pRe="ToastDescription",bz=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(kt.div,{...r,ref:t})});bz.displayName=pRe;var wz="ToastAction",_z=x.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?o.jsx(Sz,{altText:n,asChild:!0,children:o.jsx(qN,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${wz}\`. Expected non-empty \`string\`.`),null)});_z.displayName=wz;var jz="ToastClose",qN=x.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=uRe(jz,n);return o.jsx(Sz,{asChild:!0,children:o.jsx(kt.button,{type:"button",...r,ref:t,onClick:ot(e.onClick,i.onClose)})})});qN.displayName=jz;var Sz=x.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return o.jsx(kt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function Ez(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),gRe(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const s=r.dataset.radixToastAnnounceAlt;s&&t.push(s)}else t.push(...Ez(r))}}),t}function og(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?ZU(i,a):i.dispatchEvent(a)}var I$=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t==="left"||t==="right"?a&&r>n:!a&&i>n};function mRe(e=()=>{}){const t=hi(e);Kr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function gRe(e){return e.nodeType===e.ELEMENT_NODE}function vRe(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function fw(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var yRe=pz,Nz=gz,Pz=yz,kz=xz,Cz=bz,Az=_z,Tz=qN;const xRe=yRe,Oz=x.forwardRef(({className:e,...t},n)=>o.jsx(Nz,{ref:n,className:ge("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Oz.displayName=Nz.displayName;const bRe=sp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Rz=x.forwardRef(({className:e,variant:t,...n},r)=>o.jsx(Pz,{ref:r,className:ge(bRe({variant:t}),e),...n}));Rz.displayName=Pz.displayName;const wRe=x.forwardRef(({className:e,...t},n)=>o.jsx(Az,{ref:n,className:ge("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));wRe.displayName=Az.displayName;const $z=x.forwardRef(({className:e,...t},n)=>o.jsx(Tz,{ref:n,className:ge("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(fa,{className:"h-4 w-4"})}));$z.displayName=Tz.displayName;const Iz=x.forwardRef(({className:e,...t},n)=>o.jsx(kz,{ref:n,className:ge("text-sm font-semibold",e),...t}));Iz.displayName=kz.displayName;const Mz=x.forwardRef(({className:e,...t},n)=>o.jsx(Cz,{ref:n,className:ge("text-sm opacity-90",e),...t}));Mz.displayName=Cz.displayName;function _Re(){const{toasts:e}=lp();return o.jsxs(xRe,{children:[e.map(function({id:t,title:n,description:r,action:i,...a}){return o.jsxs(Rz,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(Iz,{children:n}),r&&o.jsx(Mz,{children:r})]}),i,o.jsx($z,{})]},t)}),o.jsx(Oz,{})]})}var M$=["light","dark"],jRe="(prefers-color-scheme: dark)",SRe=x.createContext(void 0),ERe={setTheme:e=>{},themes:[]},NRe=()=>{var e;return(e=x.useContext(SRe))!=null?e:ERe};x.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:s,attrs:c,nonce:l})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=i?M$.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,g=!1,v=!0)=>{let b=s?s[m]:m,w=g?m+"|| ''":`'${b}'`,y="";return i&&v&&!g&&M$.includes(m)&&(y+=`d.style.colorScheme = '${m}';`),n==="class"?g||b?y+=`c.add(${w})`:y+="null":b&&(y+=`d[s](n,${w})`),y},p=e?`!function(){${d}${f(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${jRe}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${f(s?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${f(s?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return x.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});const PRe=({...e})=>{const{theme:t="system"}=NRe();return o.jsx(T7,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},kRe=new TOe,CRe=up();NI(document.getElementById("root")).render(o.jsx(RW,{children:o.jsx(ROe,{client:kRe,children:o.jsxs(QOe,{children:[o.jsx(_Re,{}),o.jsx(PRe,{}),o.jsx(OU,{children:CRe?o.jsx(aOe,{}):o.jsx(P3,{})})]})})}));
